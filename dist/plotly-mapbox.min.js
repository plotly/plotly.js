/**
* plotly.js (mapbox - minified) v3.4.0
* Copyright 2012-2026, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(
 function(root, factory) {
  if (typeof module === "object" && module.exports) {
   module.exports = factory();
  } else {
   root.moduleName = factory();
  }
} (typeof self !== "undefined" ? self : this, () => {
"use strict";var Plotly=(()=>{var fj=Object.defineProperty,cj=Object.defineProperties;var hj=Object.getOwnPropertyDescriptors;var A7=Object.getOwnPropertySymbols;var vj=Object.prototype.hasOwnProperty,dj=Object.prototype.propertyIsEnumerable;var M7=(e,t,r)=>t in e?fj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sd=(e,t)=>{for(var r in t||(t={}))vj.call(t,r)&&M7(e,r,t[r]);if(A7)for(var r of A7(t))dj.call(t,r)&&M7(e,r,t[r]);return e},e_=(e,t)=>cj(e,hj(t));var me=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var t_=me(S7=>{"use strict";S7.version="3.4.0"});var C7=me((k7,r_)=>{(function(t,r,i){r[t]=r[t]||i(),typeof r_!="undefined"&&r_.exports&&(r_.exports=r[t])})("Promise",typeof window!="undefined"?window:k7,function(){"use strict";var t,r,i,a=Object.prototype.toString,s=typeof setImmediate!="undefined"?function(O){return setImmediate(O)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(O,q,z,N){return Object.defineProperty(O,q,{value:z,writable:!0,configurable:N!==!1})}}catch(I){t=function(q,z,N){return q[z]=N,q}}i=function(){var O,q,z;function N(H,V){this.fn=H,this.self=V,this.next=void 0}return{add:function(V,W){z=new N(V,W),q?q.next=z:O=z,q=z,z=void 0},drain:function(){var V=O;for(O=q=r=void 0;V;)V.fn.call(V.self),V=V.next}}}();function l(I,O){i.add(I,O),r||(r=s(i.drain))}function f(I){var O,q=typeof I;return I!=null&&(q=="object"||q=="function")&&(O=I.then),typeof O=="function"?O:!1}function h(){for(var I=0;I<this.chain.length;I++)v(this,this.state===1?this.chain[I].success:this.chain[I].failure,this.chain[I]);this.chain.length=0}function v(I,O,q){var z,N;try{O===!1?q.reject(I.msg):(O===!0?z=I.msg:z=O.call(void 0,I.msg),z===q.promise?q.reject(TypeError("Promise-chain cycle")):(N=f(z))?N.call(z,q.resolve,q.reject):q.resolve(z))}catch(H){q.reject(H)}}function m(I){var O,q=this;if(!q.triggered){q.triggered=!0,q.def&&(q=q.def);try{(O=f(I))?l(function(){var z=new M(q);try{O.call(I,function(){m.apply(z,arguments)},function(){_.apply(z,arguments)})}catch(N){_.call(z,N)}}):(q.msg=I,q.state=1,q.chain.length>0&&l(h,q))}catch(z){_.call(new M(q),z)}}}function _(I){var O=this;O.triggered||(O.triggered=!0,O.def&&(O=O.def),O.msg=I,O.state=2,O.chain.length>0&&l(h,O))}function T(I,O,q,z){for(var N=0;N<O.length;N++)(function(V){I.resolve(O[V]).then(function(J){q(V,J)},z)})(N)}function M(I){this.def=I,this.triggered=!1}function C(I){this.promise=I,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function E(I){if(typeof I!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var O=new C(this);this.then=function(z,N){var H={success:typeof z=="function"?z:!0,failure:typeof N=="function"?N:!1};return H.promise=new this.constructor(function(W,J){if(typeof W!="function"||typeof J!="function")throw TypeError("Not a function");H.resolve=W,H.reject=J}),O.chain.push(H),O.state!==0&&l(h,O),H.promise},this.catch=function(z){return this.then(void 0,z)};try{I.call(void 0,function(z){m.call(O,z)},function(z){_.call(O,z)})}catch(q){_.call(O,q)}}var L=t({},"constructor",E,!1);return E.prototype=L,t(L,"__NPO__",0,!1),t(E,"resolve",function(O){var q=this;return O&&typeof O=="object"&&O.__NPO__===1?O:new q(function(N,H){if(typeof N!="function"||typeof H!="function")throw TypeError("Not a function");N(O)})}),t(E,"reject",function(O){return new this(function(z,N){if(typeof z!="function"||typeof N!="function")throw TypeError("Not a function");N(O)})}),t(E,"all",function(O){var q=this;return a.call(O)!="[object Array]"?q.reject(TypeError("Not an array")):O.length===0?q.resolve([]):new q(function(N,H){if(typeof N!="function"||typeof H!="function")throw TypeError("Not a function");var V=O.length,W=Array(V),J=0;T(q,O,function(ie,oe){W[ie]=oe,++J===V&&N(W)},H)})}),t(E,"race",function(O){var q=this;return a.call(O)!="[object Array]"?q.reject(TypeError("Not an array")):new q(function(N,H){if(typeof N!="function"||typeof H!="function")throw TypeError("Not a function");T(q,O,function(W,J){N(J)},H)})}),E})});var ja=me((Xme,a_)=>{(function(){var e={version:"3.8.2"},t=[].slice,r=function(y){return t.call(y)},i=self.document;function a(y){return y&&(y.ownerDocument||y.document||y).documentElement}function s(y){return y&&(y.ownerDocument&&y.ownerDocument.defaultView||y.document&&y||y.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(y){r=function(S){for(var P=S.length,B=new Array(P);P--;)B[P]=S[P];return B}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(y){var l=this.Element.prototype,f=l.setAttribute,h=l.setAttributeNS,v=this.CSSStyleDeclaration.prototype,m=v.setProperty;l.setAttribute=function(S,P){f.call(this,S,P+"")},l.setAttributeNS=function(S,P,B){h.call(this,S,P,B+"")},v.setProperty=function(S,P,B){m.call(this,S,P+"",B)}}e.ascending=_;function _(y,S){return y<S?-1:y>S?1:y>=S?0:NaN}e.descending=function(y,S){return S<y?-1:S>y?1:S>=y?0:NaN},e.min=function(y,S){var P=-1,B=y.length,U,Z;if(arguments.length===1){for(;++P<B;)if((Z=y[P])!=null&&Z>=Z){U=Z;break}for(;++P<B;)(Z=y[P])!=null&&U>Z&&(U=Z)}else{for(;++P<B;)if((Z=S.call(y,y[P],P))!=null&&Z>=Z){U=Z;break}for(;++P<B;)(Z=S.call(y,y[P],P))!=null&&U>Z&&(U=Z)}return U},e.max=function(y,S){var P=-1,B=y.length,U,Z;if(arguments.length===1){for(;++P<B;)if((Z=y[P])!=null&&Z>=Z){U=Z;break}for(;++P<B;)(Z=y[P])!=null&&Z>U&&(U=Z)}else{for(;++P<B;)if((Z=S.call(y,y[P],P))!=null&&Z>=Z){U=Z;break}for(;++P<B;)(Z=S.call(y,y[P],P))!=null&&Z>U&&(U=Z)}return U},e.extent=function(y,S){var P=-1,B=y.length,U,Z,$;if(arguments.length===1){for(;++P<B;)if((Z=y[P])!=null&&Z>=Z){U=$=Z;break}for(;++P<B;)(Z=y[P])!=null&&(U>Z&&(U=Z),$<Z&&($=Z))}else{for(;++P<B;)if((Z=S.call(y,y[P],P))!=null&&Z>=Z){U=$=Z;break}for(;++P<B;)(Z=S.call(y,y[P],P))!=null&&(U>Z&&(U=Z),$<Z&&($=Z))}return[U,$]};function T(y){return y===null?NaN:+y}function M(y){return!isNaN(y)}e.sum=function(y,S){var P=0,B=y.length,U,Z=-1;if(arguments.length===1)for(;++Z<B;)M(U=+y[Z])&&(P+=U);else for(;++Z<B;)M(U=+S.call(y,y[Z],Z))&&(P+=U);return P},e.mean=function(y,S){var P=0,B=y.length,U,Z=-1,$=B;if(arguments.length===1)for(;++Z<B;)M(U=T(y[Z]))?P+=U:--$;else for(;++Z<B;)M(U=T(S.call(y,y[Z],Z)))?P+=U:--$;if($)return P/$},e.quantile=function(y,S){var P=(y.length-1)*S+1,B=Math.floor(P),U=+y[B-1],Z=P-B;return Z?U+Z*(y[B]-U):U},e.median=function(y,S){var P=[],B=y.length,U,Z=-1;if(arguments.length===1)for(;++Z<B;)M(U=T(y[Z]))&&P.push(U);else for(;++Z<B;)M(U=T(S.call(y,y[Z],Z)))&&P.push(U);if(P.length)return e.quantile(P.sort(_),.5)},e.variance=function(y,S){var P=y.length,B=0,U,Z,$=0,X=-1,ae=0;if(arguments.length===1)for(;++X<P;)M(U=T(y[X]))&&(Z=U-B,B+=Z/++ae,$+=Z*(U-B));else for(;++X<P;)M(U=T(S.call(y,y[X],X)))&&(Z=U-B,B+=Z/++ae,$+=Z*(U-B));if(ae>1)return $/(ae-1)},e.deviation=function(){var y=e.variance.apply(this,arguments);return y&&Math.sqrt(y)};function C(y){return{left:function(S,P,B,U){for(arguments.length<3&&(B=0),arguments.length<4&&(U=S.length);B<U;){var Z=B+U>>>1;y(S[Z],P)<0?B=Z+1:U=Z}return B},right:function(S,P,B,U){for(arguments.length<3&&(B=0),arguments.length<4&&(U=S.length);B<U;){var Z=B+U>>>1;y(S[Z],P)>0?U=Z:B=Z+1}return B}}}var E=C(_);e.bisectLeft=E.left,e.bisect=e.bisectRight=E.right,e.bisector=function(y){return C(y.length===1?function(S,P){return _(y(S),P)}:y)},e.shuffle=function(y,S,P){(B=arguments.length)<3&&(P=y.length,B<2&&(S=0));for(var B=P-S,U,Z;B;)Z=Math.random()*B--|0,U=y[B+S],y[B+S]=y[Z+S],y[Z+S]=U;return y},e.permute=function(y,S){for(var P=S.length,B=new Array(P);P--;)B[P]=y[S[P]];return B},e.pairs=function(y){for(var S=0,P=y.length-1,B,U=y[0],Z=new Array(P<0?0:P);S<P;)Z[S]=[B=U,U=y[++S]];return Z},e.transpose=function(y){if(!(Z=y.length))return[];for(var S=-1,P=e.min(y,L),B=new Array(P);++S<P;)for(var U=-1,Z,$=B[S]=new Array(Z);++U<Z;)$[U]=y[U][S];return B};function L(y){return y.length}e.zip=function(){return e.transpose(arguments)},e.keys=function(y){var S=[];for(var P in y)S.push(P);return S},e.values=function(y){var S=[];for(var P in y)S.push(y[P]);return S},e.entries=function(y){var S=[];for(var P in y)S.push({key:P,value:y[P]});return S},e.merge=function(y){for(var S=y.length,P,B=-1,U=0,Z,$;++B<S;)U+=y[B].length;for(Z=new Array(U);--S>=0;)for($=y[S],P=$.length;--P>=0;)Z[--U]=$[P];return Z};var I=Math.abs;e.range=function(y,S,P){if(arguments.length<3&&(P=1,arguments.length<2&&(S=y,y=0)),(S-y)/P===1/0)throw new Error("infinite range");var B=[],U=O(I(P)),Z=-1,$;if(y*=U,S*=U,P*=U,P<0)for(;($=y+P*++Z)>S;)B.push($/U);else for(;($=y+P*++Z)<S;)B.push($/U);return B};function O(y){for(var S=1;y*S%1;)S*=10;return S}function q(y,S){for(var P in S)Object.defineProperty(y.prototype,P,{value:S[P],enumerable:!1})}e.map=function(y,S){var P=new z;if(y instanceof z)y.forEach(function(X,ae){P.set(X,ae)});else if(Array.isArray(y)){var B=-1,U=y.length,Z;if(arguments.length===1)for(;++B<U;)P.set(B,y[B]);else for(;++B<U;)P.set(S.call(y,Z=y[B],B),Z)}else for(var $ in y)P.set($,y[$]);return P};function z(){this._=Object.create(null)}var N="__proto__",H="\0";q(z,{has:J,get:function(y){return this._[V(y)]},set:function(y,S){return this._[V(y)]=S},remove:ee,keys:ie,values:function(){var y=[];for(var S in this._)y.push(this._[S]);return y},entries:function(){var y=[];for(var S in this._)y.push({key:W(S),value:this._[S]});return y},size:oe,empty:fe,forEach:function(y){for(var S in this._)y.call(this,W(S),this._[S])}});function V(y){return(y+="")===N||y[0]===H?H+y:y}function W(y){return(y+="")[0]===H?y.slice(1):y}function J(y){return V(y)in this._}function ee(y){return(y=V(y))in this._&&delete this._[y]}function ie(){var y=[];for(var S in this._)y.push(W(S));return y}function oe(){var y=0;for(var S in this._)++y;return y}function fe(){for(var y in this._)return!1;return!0}e.nest=function(){var y={},S=[],P=[],B,U;function Z(X,ae,ye){if(ye>=S.length)return U?U.call(y,ae):B?ae.sort(B):ae;for(var xe=-1,Pe=ae.length,De=S[ye++],$e,ot,Ie,He=new z,Qe;++xe<Pe;)(Qe=He.get($e=De(ot=ae[xe])))?Qe.push(ot):He.set($e,[ot]);return X?(ot=X(),Ie=function(ct,nt){ot.set(ct,Z(X,nt,ye))}):(ot={},Ie=function(ct,nt){ot[ct]=Z(X,nt,ye)}),He.forEach(Ie),ot}function $(X,ae){if(ae>=S.length)return X;var ye=[],xe=P[ae++];return X.forEach(function(Pe,De){ye.push({key:Pe,values:$(De,ae)})}),xe?ye.sort(function(Pe,De){return xe(Pe.key,De.key)}):ye}return y.map=function(X,ae){return Z(ae,X,0)},y.entries=function(X){return $(Z(e.map,X,0),0)},y.key=function(X){return S.push(X),y},y.sortKeys=function(X){return P[S.length-1]=X,y},y.sortValues=function(X){return B=X,y},y.rollup=function(X){return U=X,y},y},e.set=function(y){var S=new le;if(y)for(var P=0,B=y.length;P<B;++P)S.add(y[P]);return S};function le(){this._=Object.create(null)}q(le,{has:J,add:function(y){return this._[V(y+="")]=!0,y},remove:ee,values:ie,size:oe,empty:fe,forEach:function(y){for(var S in this._)y.call(this,W(S))}}),e.behavior={};function Te(y){return y}e.rebind=function(y,S){for(var P=1,B=arguments.length,U;++P<B;)y[U=arguments[P]]=Se(y,S,S[U]);return y};function Se(y,S,P){return function(){var B=P.apply(S,arguments);return B===S?y:B}}function Me(y,S){if(S in y)return S;S=S.charAt(0).toUpperCase()+S.slice(1);for(var P=0,B=Ae.length;P<B;++P){var U=Ae[P]+S;if(U in y)return U}}var Ae=["webkit","ms","moz","Moz","o","O"];function pe(){}e.dispatch=function(){for(var y=new ke,S=-1,P=arguments.length;++S<P;)y[arguments[S]]=Ee(y);return y};function ke(){}ke.prototype.on=function(y,S){var P=y.indexOf("."),B="";if(P>=0&&(B=y.slice(P+1),y=y.slice(0,P)),y)return arguments.length<2?this[y].on(B):this[y].on(B,S);if(arguments.length===2){if(S==null)for(y in this)this.hasOwnProperty(y)&&this[y].on(B,null);return this}};function Ee(y){var S=[],P=new z;function B(){for(var U=S,Z=-1,$=U.length,X;++Z<$;)(X=U[Z].on)&&X.apply(this,arguments);return y}return B.on=function(U,Z){var $=P.get(U),X;return arguments.length<2?$&&$.on:($&&($.on=null,S=S.slice(0,X=S.indexOf($)).concat(S.slice(X+1)),P.remove(U)),Z&&S.push(P.set(U,{on:Z})),y)},B}e.event=null;function Xe(){e.event.preventDefault()}function lt(){for(var y=e.event,S;S=y.sourceEvent;)y=S;return y}function it(y){for(var S=new ke,P=0,B=arguments.length;++P<B;)S[arguments[P]]=Ee(S);return S.of=function(U,Z){return function($){try{var X=$.sourceEvent=e.event;$.target=y,e.event=$,S[$.type].apply(U,Z)}finally{e.event=X}}},S}e.requote=function(y){return y.replace(_t,"\\$&")};var _t=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ye={}.__proto__?function(y,S){y.__proto__=S}:function(y,S){for(var P in S)y[P]=S[P]};function kt(y){return Ye(y,yt),y}var st=function(y,S){return S.querySelector(y)},dt=function(y,S){return S.querySelectorAll(y)},It=function(y,S){var P=y.matches||y[Me(y,"matchesSelector")];return It=function(B,U){return P.call(B,U)},It(y,S)};typeof Sizzle=="function"&&(st=function(y,S){return Sizzle(y,S)[0]||null},dt=Sizzle,It=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var yt=e.selection.prototype=[];yt.select=function(y){var S=[],P,B,U,Z;y=de(y);for(var $=-1,X=this.length;++$<X;){S.push(P=[]),P.parentNode=(U=this[$]).parentNode;for(var ae=-1,ye=U.length;++ae<ye;)(Z=U[ae])?(P.push(B=y.call(Z,Z.__data__,ae,$)),B&&"__data__"in Z&&(B.__data__=Z.__data__)):P.push(null)}return kt(S)};function de(y){return typeof y=="function"?y:function(){return st(y,this)}}yt.selectAll=function(y){var S=[],P,B;y=ze(y);for(var U=-1,Z=this.length;++U<Z;)for(var $=this[U],X=-1,ae=$.length;++X<ae;)(B=$[X])&&(S.push(P=r(y.call(B,B.__data__,X,U))),P.parentNode=B);return kt(S)};function ze(y){return typeof y=="function"?y:function(){return dt(y,this)}}var _e="http://www.w3.org/1999/xhtml",Ue={svg:"http://www.w3.org/2000/svg",xhtml:_e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:Ue,qualify:function(y){var S=y.indexOf(":"),P=y;return S>=0&&(P=y.slice(0,S))!=="xmlns"&&(y=y.slice(S+1)),Ue.hasOwnProperty(P)?{space:Ue[P],local:y}:y}},yt.attr=function(y,S){if(arguments.length<2){if(typeof y=="string"){var P=this.node();return y=e.ns.qualify(y),y.local?P.getAttributeNS(y.space,y.local):P.getAttribute(y)}for(S in y)this.each(at(S,y[S]));return this}return this.each(at(y,S))};function at(y,S){y=e.ns.qualify(y);function P(){this.removeAttribute(y)}function B(){this.removeAttributeNS(y.space,y.local)}function U(){this.setAttribute(y,S)}function Z(){this.setAttributeNS(y.space,y.local,S)}function $(){var ae=S.apply(this,arguments);ae==null?this.removeAttribute(y):this.setAttribute(y,ae)}function X(){var ae=S.apply(this,arguments);ae==null?this.removeAttributeNS(y.space,y.local):this.setAttributeNS(y.space,y.local,ae)}return S==null?y.local?B:P:typeof S=="function"?y.local?X:$:y.local?Z:U}function Je(y){return y.trim().replace(/\s+/g," ")}yt.classed=function(y,S){if(arguments.length<2){if(typeof y=="string"){var P=this.node(),B=(y=wt(y)).length,U=-1;if(S=P.classList){for(;++U<B;)if(!S.contains(y[U]))return!1}else for(S=P.getAttribute("class");++U<B;)if(!Ct(y[U]).test(S))return!1;return!0}for(S in y)this.each(xt(S,y[S]));return this}return this.each(xt(y,S))};function Ct(y){return new RegExp("(?:^|\\s+)"+e.requote(y)+"(?:\\s+|$)","g")}function wt(y){return(y+"").trim().split(/^|\s+/)}function xt(y,S){y=wt(y).map(qt);var P=y.length;function B(){for(var Z=-1;++Z<P;)y[Z](this,S)}function U(){for(var Z=-1,$=S.apply(this,arguments);++Z<P;)y[Z](this,$)}return typeof S=="function"?U:B}function qt(y){var S=Ct(y);return function(P,B){if(U=P.classList)return B?U.add(y):U.remove(y);var U=P.getAttribute("class")||"";B?(S.lastIndex=0,S.test(U)||P.setAttribute("class",Je(U+" "+y))):P.setAttribute("class",Je(U.replace(S," ")))}}yt.style=function(y,S,P){var B=arguments.length;if(B<3){if(typeof y!="string"){B<2&&(S="");for(P in y)this.each(Ut(P,y[P],S));return this}if(B<2){var U=this.node();return s(U).getComputedStyle(U,null).getPropertyValue(y)}P=""}return this.each(Ut(y,S,P))};function Ut(y,S,P){function B(){this.style.removeProperty(y)}function U(){this.style.setProperty(y,S,P)}function Z(){var $=S.apply(this,arguments);$==null?this.style.removeProperty(y):this.style.setProperty(y,$,P)}return S==null?B:typeof S=="function"?Z:U}yt.property=function(y,S){if(arguments.length<2){if(typeof y=="string")return this.node()[y];for(S in y)this.each(Dt(S,y[S]));return this}return this.each(Dt(y,S))};function Dt(y,S){function P(){delete this[y]}function B(){this[y]=S}function U(){var Z=S.apply(this,arguments);Z==null?delete this[y]:this[y]=Z}return S==null?P:typeof S=="function"?U:B}yt.text=function(y){return arguments.length?this.each(typeof y=="function"?function(){var S=y.apply(this,arguments);this.textContent=S==null?"":S}:y==null?function(){this.textContent=""}:function(){this.textContent=y}):this.node().textContent},yt.html=function(y){return arguments.length?this.each(typeof y=="function"?function(){var S=y.apply(this,arguments);this.innerHTML=S==null?"":S}:y==null?function(){this.innerHTML=""}:function(){this.innerHTML=y}):this.node().innerHTML},yt.append=function(y){return y=Mt(y),this.select(function(){return this.appendChild(y.apply(this,arguments))})};function Mt(y){function S(){var B=this.ownerDocument,U=this.namespaceURI;return U===_e&&B.documentElement.namespaceURI===_e?B.createElement(y):B.createElementNS(U,y)}function P(){return this.ownerDocument.createElementNS(y.space,y.local)}return typeof y=="function"?y:(y=e.ns.qualify(y)).local?P:S}yt.insert=function(y,S){return y=Mt(y),S=de(S),this.select(function(){return this.insertBefore(y.apply(this,arguments),S.apply(this,arguments)||null)})},yt.remove=function(){return this.each(Zt)};function Zt(){var y=this.parentNode;y&&y.removeChild(this)}yt.data=function(y,S){var P=-1,B=this.length,U,Z;if(!arguments.length){for(y=new Array(B=(U=this[0]).length);++P<B;)(Z=U[P])&&(y[P]=Z.__data__);return y}function $(xe,Pe){var De,$e=xe.length,ot=Pe.length,Ie=Math.min($e,ot),He=new Array(ot),Qe=new Array(ot),ct=new Array($e),nt,je;if(S){var Vt=new z,or=new Array($e),hr;for(De=-1;++De<$e;)(nt=xe[De])&&(Vt.has(hr=S.call(nt,nt.__data__,De))?ct[De]=nt:Vt.set(hr,nt),or[De]=hr);for(De=-1;++De<ot;)(nt=Vt.get(hr=S.call(Pe,je=Pe[De],De)))?nt!==!0&&(He[De]=nt,nt.__data__=je):Qe[De]=Yt(je),Vt.set(hr,!0);for(De=-1;++De<$e;)De in or&&Vt.get(or[De])!==!0&&(ct[De]=xe[De])}else{for(De=-1;++De<Ie;)nt=xe[De],je=Pe[De],nt?(nt.__data__=je,He[De]=nt):Qe[De]=Yt(je);for(;De<ot;++De)Qe[De]=Yt(Pe[De]);for(;De<$e;++De)ct[De]=xe[De]}Qe.update=He,Qe.parentNode=He.parentNode=ct.parentNode=xe.parentNode,X.push(Qe),ae.push(He),ye.push(ct)}var X=Pr([]),ae=kt([]),ye=kt([]);if(typeof y=="function")for(;++P<B;)$(U=this[P],y.call(U,U.parentNode.__data__,P));else for(;++P<B;)$(U=this[P],y);return ae.enter=function(){return X},ae.exit=function(){return ye},ae};function Yt(y){return{__data__:y}}yt.datum=function(y){return arguments.length?this.property("__data__",y):this.property("__data__")},yt.filter=function(y){var S=[],P,B,U;typeof y!="function"&&(y=Be(y));for(var Z=0,$=this.length;Z<$;Z++){S.push(P=[]),P.parentNode=(B=this[Z]).parentNode;for(var X=0,ae=B.length;X<ae;X++)(U=B[X])&&y.call(U,U.__data__,X,Z)&&P.push(U)}return kt(S)};function Be(y){return function(){return It(this,y)}}yt.order=function(){for(var y=-1,S=this.length;++y<S;)for(var P=this[y],B=P.length-1,U=P[B],Z;--B>=0;)(Z=P[B])&&(U&&U!==Z.nextSibling&&U.parentNode.insertBefore(Z,U),U=Z);return this},yt.sort=function(y){y=ut.apply(this,arguments);for(var S=-1,P=this.length;++S<P;)this[S].sort(y);return this.order()};function ut(y){return arguments.length||(y=_),function(S,P){return S&&P?y(S.__data__,P.__data__):!S-!P}}yt.each=function(y){return sr(this,function(S,P,B){y.call(S,S.__data__,P,B)})};function sr(y,S){for(var P=0,B=y.length;P<B;P++)for(var U=y[P],Z=0,$=U.length,X;Z<$;Z++)(X=U[Z])&&S(X,Z,P);return y}yt.call=function(y){var S=r(arguments);return y.apply(S[0]=this,S),this},yt.empty=function(){return!this.node()},yt.node=function(){for(var y=0,S=this.length;y<S;y++)for(var P=this[y],B=0,U=P.length;B<U;B++){var Z=P[B];if(Z)return Z}return null},yt.size=function(){var y=0;return sr(this,function(){++y}),y};function Pr(y){return Ye(y,Et),y}var Et=[];e.selection.enter=Pr,e.selection.enter.prototype=Et,Et.append=yt.append,Et.empty=yt.empty,Et.node=yt.node,Et.call=yt.call,Et.size=yt.size,Et.select=function(y){for(var S=[],P,B,U,Z,$,X=-1,ae=this.length;++X<ae;){U=(Z=this[X]).update,S.push(P=[]),P.parentNode=Z.parentNode;for(var ye=-1,xe=Z.length;++ye<xe;)($=Z[ye])?(P.push(U[ye]=B=y.call(Z.parentNode,$.__data__,ye,X)),B.__data__=$.__data__):P.push(null)}return kt(S)},Et.insert=function(y,S){return arguments.length<2&&(S=ht(this)),yt.insert.call(this,y,S)};function ht(y){var S,P;return function(B,U,Z){var $=y[Z].update,X=$.length,ae;for(Z!=P&&(P=Z,S=0),U>=S&&(S=U+1);!(ae=$[S])&&++S<X;);return ae}}e.select=function(y){var S;return typeof y=="string"?(S=[st(y,i)],S.parentNode=i.documentElement):(S=[y],S.parentNode=a(y)),kt([S])},e.selectAll=function(y){var S;return typeof y=="string"?(S=r(dt(y,i)),S.parentNode=i.documentElement):(S=r(y),S.parentNode=null),kt([S])},yt.on=function(y,S,P){var B=arguments.length;if(B<3){if(typeof y!="string"){B<2&&(S=!1);for(P in y)this.each(pt(P,y[P],S));return this}if(B<2)return(B=this.node()["__on"+y])&&B._;P=!1}return this.each(pt(y,S,P))};function pt(y,S,P){var B="__on"+y,U=y.indexOf("."),Z=er;U>0&&(y=y.slice(0,U));var $=Ot.get(y);$&&(y=$,Z=Ht);function X(){var xe=this[B];xe&&(this.removeEventListener(y,xe,xe.$),delete this[B])}function ae(){var xe=Z(S,r(arguments));X.call(this),this.addEventListener(y,this[B]=xe,xe.$=P),xe._=S}function ye(){var xe=new RegExp("^__on([^.]+)"+e.requote(y)+"$"),Pe;for(var De in this)if(Pe=De.match(xe)){var $e=this[De];this.removeEventListener(Pe[1],$e,$e.$),delete this[De]}}return U?S?ae:X:S?pe:ye}var Ot=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});i&&Ot.forEach(function(y){"on"+y in i&&Ot.remove(y)});function er(y,S){return function(P){var B=e.event;e.event=P,S[0]=this.__data__;try{y.apply(this,S)}finally{e.event=B}}}function Ht(y,S){var P=er(y,S);return function(B){var U=this,Z=B.relatedTarget;(!Z||Z!==U&&!(Z.compareDocumentPosition(U)&8))&&P.call(U,B)}}var Kt,pr=0;function yr(y){var S=".dragsuppress-"+ ++pr,P="click"+S,B=e.select(s(y)).on("touchmove"+S,Xe).on("dragstart"+S,Xe).on("selectstart"+S,Xe);if(Kt==null&&(Kt="onselectstart"in y?!1:Me(y.style,"userSelect")),Kt){var U=a(y).style,Z=U[Kt];U[Kt]="none"}return function($){if(B.on(S,null),Kt&&(U[Kt]=Z),$){var X=function(){B.on(P,null)};B.on(P,function(){Xe(),X()},!0),setTimeout(X,0)}}}e.mouse=function(y){return Lt(y,lt())};var ur=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Lt(y,S){S.changedTouches&&(S=S.changedTouches[0]);var P=y.ownerSVGElement||y;if(P.createSVGPoint){var B=P.createSVGPoint();if(ur<0){var U=s(y);if(U.scrollX||U.scrollY){P=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Z=P[0][0].getScreenCTM();ur=!(Z.f||Z.e),P.remove()}}return ur?(B.x=S.pageX,B.y=S.pageY):(B.x=S.clientX,B.y=S.clientY),B=B.matrixTransform(y.getScreenCTM().inverse()),[B.x,B.y]}var $=y.getBoundingClientRect();return[S.clientX-$.left-y.clientLeft,S.clientY-$.top-y.clientTop]}e.touch=function(y,S,P){if(arguments.length<3&&(P=S,S=lt().changedTouches),S){for(var B=0,U=S.length,Z;B<U;++B)if((Z=S[B]).identifier===P)return Lt(y,Z)}},e.behavior.drag=function(){var y=it(U,"drag","dragstart","dragend"),S=null,P=Z(pe,e.mouse,s,"mousemove","mouseup"),B=Z(Fe,e.touch,Te,"touchmove","touchend");function U(){this.on("mousedown.drag",P).on("touchstart.drag",B)}function Z($,X,ae,ye,xe){return function(){var Pe=this,De=e.event.target.correspondingElement||e.event.target,$e=Pe.parentNode,ot=y.of(Pe,arguments),Ie=0,He=$(),Qe=".drag"+(He==null?"":"-"+He),ct,nt=e.select(ae(De)).on(ye+Qe,or).on(xe+Qe,hr),je=yr(De),Vt=X($e,He);S?(ct=S.apply(Pe,arguments),ct=[ct.x-Vt[0],ct.y-Vt[1]]):ct=[0,0],ot({type:"dragstart"});function or(){var fr=X($e,He),zr,Rr;fr&&(zr=fr[0]-Vt[0],Rr=fr[1]-Vt[1],Ie|=zr|Rr,Vt=fr,ot({type:"drag",x:fr[0]+ct[0],y:fr[1]+ct[1],dx:zr,dy:Rr}))}function hr(){X($e,He)&&(nt.on(ye+Qe,null).on(xe+Qe,null),je(Ie),ot({type:"dragend"}))}}}return U.origin=function($){return arguments.length?(S=$,U):S},e.rebind(U,y,"on")};function Fe(){return e.event.changedTouches[0].identifier}e.touches=function(y,S){return arguments.length<2&&(S=lt().touches),S?r(S).map(function(P){var B=Lt(y,P);return B.identifier=P.identifier,B}):[]};var Ve=1e-6,bt=Ve*Ve,Tt=Math.PI,mr=2*Tt,Ar=mr-Ve,Mr=Tt/2,Gr=Tt/180,pa=180/Tt;function Ca(y){return y>0?1:y<0?-1:0}function ii(y,S,P){return(S[0]-y[0])*(P[1]-y[1])-(S[1]-y[1])*(P[0]-y[0])}function wi(y){return y>1?0:y<-1?Tt:Math.acos(y)}function vi(y){return y>1?Mr:y<-1?-Mr:Math.asin(y)}function Fi(y){return((y=Math.exp(y))-1/y)/2}function Gi(y){return((y=Math.exp(y))+1/y)/2}function vn(y){return((y=Math.exp(2*y))-1)/(y+1)}function nn(y){return(y=Math.sin(y/2))*y}var Ki=Math.SQRT2,ir=2,oi=4;e.interpolateZoom=function(y,S){var P=y[0],B=y[1],U=y[2],Z=S[0],$=S[1],X=S[2],ae=Z-P,ye=$-B,xe=ae*ae+ye*ye,Pe,De;if(xe<bt)De=Math.log(X/U)/Ki,Pe=function(ct){return[P+ct*ae,B+ct*ye,U*Math.exp(Ki*ct*De)]};else{var $e=Math.sqrt(xe),ot=(X*X-U*U+oi*xe)/(2*U*ir*$e),Ie=(X*X-U*U-oi*xe)/(2*X*ir*$e),He=Math.log(Math.sqrt(ot*ot+1)-ot),Qe=Math.log(Math.sqrt(Ie*Ie+1)-Ie);De=(Qe-He)/Ki,Pe=function(ct){var nt=ct*De,je=Gi(He),Vt=U/(ir*$e)*(je*vn(Ki*nt+He)-Fi(He));return[P+Vt*ae,B+Vt*ye,U*je/Gi(Ki*nt+He)]}}return Pe.duration=De*1e3,Pe},e.behavior.zoom=function(){var y={x:0,y:0,k:1},S,P,B,U=[960,500],Z=Sa,$=250,X=0,ae="mousedown.zoom",ye="mousemove.zoom",xe="mouseup.zoom",Pe,De="touchstart.zoom",$e,ot=it(nt,"zoomstart","zoom","zoomend"),Ie,He,Qe,ct;Ci||(Ci="onwheel"in i?(la=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(la=function(){return e.event.wheelDelta},"mousewheel"):(la=function(){return-e.event.detail},"MozMousePixelScroll"));function nt(jt){jt.on(ae,Kr).on(Ci+".zoom",ei).on("dblclick.zoom",Qa).on(De,Na)}nt.event=function(jt){jt.each(function(){var Jr=ot.of(this,arguments),na=y;uo?e.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},Rr(Jr)}).tween("zoom:zoom",function(){var oa=U[0],Di=U[1],Vi=P?P[0]:oa/2,en=P?P[1]:Di/2,bi=e.interpolateZoom([(Vi-y.x)/y.k,(en-y.y)/y.k,oa/y.k],[(Vi-na.x)/na.k,(en-na.y)/na.k,oa/na.k]);return function(wn){var Tr=bi(wn),Hr=oa/Tr[2];this.__chart__=y={x:Vi-Tr[0]*Hr,y:en-Tr[1]*Hr,k:Hr},ea(Jr)}}).each("interrupt.zoom",function(){Vr(Jr)}).each("end.zoom",function(){Vr(Jr)}):(this.__chart__=y,Rr(Jr),ea(Jr),Vr(Jr))})},nt.translate=function(jt){return arguments.length?(y={x:+jt[0],y:+jt[1],k:y.k},zr(),nt):[y.x,y.y]},nt.scale=function(jt){return arguments.length?(y={x:y.x,y:y.y,k:null},or(+jt),zr(),nt):y.k},nt.scaleExtent=function(jt){return arguments.length?(Z=jt==null?Sa:[+jt[0],+jt[1]],nt):Z},nt.center=function(jt){return arguments.length?(B=jt&&[+jt[0],+jt[1]],nt):B},nt.size=function(jt){return arguments.length?(U=jt&&[+jt[0],+jt[1]],nt):U},nt.duration=function(jt){return arguments.length?($=+jt,nt):$},nt.x=function(jt){return arguments.length?(He=jt,Ie=jt.copy(),y={x:0,y:0,k:1},nt):He},nt.y=function(jt){return arguments.length?(ct=jt,Qe=jt.copy(),y={x:0,y:0,k:1},nt):ct};function je(jt){return[(jt[0]-y.x)/y.k,(jt[1]-y.y)/y.k]}function Vt(jt){return[jt[0]*y.k+y.x,jt[1]*y.k+y.y]}function or(jt){y.k=Math.max(Z[0],Math.min(Z[1],jt))}function hr(jt,Jr){Jr=Vt(Jr),y.x+=jt[0]-Jr[0],y.y+=jt[1]-Jr[1]}function fr(jt,Jr,na,oa){jt.__chart__={x:y.x,y:y.y,k:y.k},or(Math.pow(2,oa)),hr(P=Jr,na),jt=e.select(jt),$>0&&(jt=jt.transition().duration($)),jt.call(nt.event)}function zr(){He&&He.domain(Ie.range().map(function(jt){return(jt-y.x)/y.k}).map(Ie.invert)),ct&&ct.domain(Qe.range().map(function(jt){return(jt-y.y)/y.k}).map(Qe.invert))}function Rr(jt){X++||jt({type:"zoomstart"})}function ea(jt){zr(),jt({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function Vr(jt){--X||(jt({type:"zoomend"}),P=null)}function Kr(){var jt=this,Jr=ot.of(jt,arguments),na=0,oa=e.select(s(jt)).on(ye,en).on(xe,bi),Di=je(e.mouse(jt)),Vi=yr(jt);fh.call(jt),Rr(Jr);function en(){na=1,hr(e.mouse(jt),Di),ea(Jr)}function bi(){oa.on(ye,null).on(xe,null),Vi(na),Vr(Jr)}}function Na(){var jt=this,Jr=ot.of(jt,arguments),na={},oa=0,Di,Vi=".zoom-"+e.event.changedTouches[0].identifier,en="touchmove"+Vi,bi="touchend"+Vi,wn=[],Tr=e.select(jt),Hr=yr(jt);Ai(),Rr(Jr),Tr.on(ae,null).on(De,Ai);function Ni(){var mn=e.touches(jt);return Di=y.k,mn.forEach(function(pi){pi.identifier in na&&(na[pi.identifier]=je(pi))}),mn}function Ai(){var mn=e.event.target;e.select(mn).on(en,fo).on(bi,qn),wn.push(mn);for(var pi=e.event.changedTouches,Jo=0,co=pi.length;Jo<co;++Jo)na[pi[Jo].identifier]=null;var ci=Ni(),xf=Date.now();if(ci.length===1){if(xf-$e<500){var Ta=ci[0];fr(jt,Ta,na[Ta.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),Xe()}$e=xf}else if(ci.length>1){var Ta=ci[0],ui=ci[1],Bl=Ta[0]-ui[0],Kv=Ta[1]-ui[1];oa=Bl*Bl+Kv*Kv}}function fo(){var mn=e.touches(jt),pi,Jo,co,ci;fh.call(jt);for(var xf=0,Ta=mn.length;xf<Ta;++xf,ci=null)if(co=mn[xf],ci=na[co.identifier]){if(Jo)break;pi=co,Jo=ci}if(ci){var ui=(ui=co[0]-pi[0])*ui+(ui=co[1]-pi[1])*ui,Bl=oa&&Math.sqrt(ui/oa);pi=[(pi[0]+co[0])/2,(pi[1]+co[1])/2],Jo=[(Jo[0]+ci[0])/2,(Jo[1]+ci[1])/2],or(Bl*Di)}$e=null,hr(pi,Jo),ea(Jr)}function qn(){if(e.event.touches.length){for(var mn=e.event.changedTouches,pi=0,Jo=mn.length;pi<Jo;++pi)delete na[mn[pi].identifier];for(var co in na)return void Ni()}e.selectAll(wn).on(Vi,null),Tr.on(ae,Kr).on(De,Na),Hr(),Vr(Jr)}}function ei(){var jt=ot.of(this,arguments);Pe?clearTimeout(Pe):(fh.call(this),S=je(P=B||e.mouse(this)),Rr(jt)),Pe=setTimeout(function(){Pe=null,Vr(jt)},50),Xe(),or(Math.pow(2,la()*.002)*y.k),hr(P,S),ea(jt)}function Qa(){var jt=e.mouse(this),Jr=Math.log(y.k)/Math.LN2;fr(this,jt,je(jt),e.event.shiftKey?Math.ceil(Jr)-1:Math.floor(Jr)+1)}return e.rebind(nt,ot,"on")};var Sa=[0,1/0],la,Ci;e.color=ma;function ma(){}ma.prototype.toString=function(){return this.rgb()+""},e.hsl=se;function se(y,S,P){return this instanceof se?(this.h=+y,this.s=+S,void(this.l=+P)):arguments.length<2?y instanceof se?new se(y.h,y.s,y.l):$r(""+y,ga,se):new se(y,S,P)}var te=se.prototype=new ma;te.brighter=function(y){return y=Math.pow(.7,arguments.length?y:1),new se(this.h,this.s,this.l/y)},te.darker=function(y){return y=Math.pow(.7,arguments.length?y:1),new se(this.h,this.s,y*this.l)},te.rgb=function(){return ue(this.h,this.s,this.l)};function ue(y,S,P){var B,U;y=isNaN(y)?0:(y%=360)<0?y+360:y,S=isNaN(S)||S<0?0:S>1?1:S,P=P<0?0:P>1?1:P,U=P<=.5?P*(1+S):P+S-P*S,B=2*P-U;function Z(X){return X>360?X-=360:X<0&&(X+=360),X<60?B+(U-B)*X/60:X<180?U:X<240?B+(U-B)*(240-X)/60:B}function $(X){return Math.round(Z(X)*255)}return new ua($(y+120),$(y),$(y-120))}e.hcl=he;function he(y,S,P){return this instanceof he?(this.h=+y,this.c=+S,void(this.l=+P)):arguments.length<2?y instanceof he?new he(y.h,y.c,y.l):y instanceof et?Sr(y.l,y.a,y.b):Sr((y=nr((y=e.rgb(y)).r,y.g,y.b)).l,y.a,y.b):new he(y,S,P)}var Le=he.prototype=new ma;Le.brighter=function(y){return new he(this.h,this.c,Math.min(100,this.l+We*(arguments.length?y:1)))},Le.darker=function(y){return new he(this.h,this.c,Math.max(0,this.l-We*(arguments.length?y:1)))},Le.rgb=function(){return Ne(this.h,this.c,this.l).rgb()};function Ne(y,S,P){return isNaN(y)&&(y=0),isNaN(S)&&(S=0),new et(P,Math.cos(y*=Gr)*S,Math.sin(y)*S)}e.lab=et;function et(y,S,P){return this instanceof et?(this.l=+y,this.a=+S,void(this.b=+P)):arguments.length<2?y instanceof et?new et(y.l,y.a,y.b):y instanceof he?Ne(y.h,y.c,y.l):nr((y=ua(y)).r,y.g,y.b):new et(y,S,P)}var We=18,mt=.95047,Pt=1,Ft=1.08883,tr=et.prototype=new ma;tr.brighter=function(y){return new et(Math.min(100,this.l+We*(arguments.length?y:1)),this.a,this.b)},tr.darker=function(y){return new et(Math.max(0,this.l-We*(arguments.length?y:1)),this.a,this.b)},tr.rgb=function(){return Wt(this.l,this.a,this.b)};function Wt(y,S,P){var B=(y+16)/116,U=B+S/500,Z=B-P/200;return U=Zr(U)*mt,B=Zr(B)*Pt,Z=Zr(Z)*Ft,new ua(ca(3.2404542*U-1.5371385*B-.4985314*Z),ca(-.969266*U+1.8760108*B+.041556*Z),ca(.0556434*U-.2040259*B+1.0572252*Z))}function Sr(y,S,P){return y>0?new he(Math.atan2(P,S)*pa,Math.sqrt(S*S+P*P),y):new he(NaN,NaN,y)}function Zr(y){return y>.206893034?y*y*y:(y-4/29)/7.787037}function Or(y){return y>.008856?Math.pow(y,1/3):7.787037*y+4/29}function ca(y){return Math.round(255*(y<=.00304?12.92*y:1.055*Math.pow(y,1/2.4)-.055))}e.rgb=ua;function ua(y,S,P){return this instanceof ua?(this.r=~~y,this.g=~~S,void(this.b=~~P)):arguments.length<2?y instanceof ua?new ua(y.r,y.g,y.b):$r(""+y,ua,ue):new ua(y,S,P)}function qa(y){return new ua(y>>16,y>>8&255,y&255)}function ri(y){return qa(y)+""}var Yr=ua.prototype=new ma;Yr.brighter=function(y){y=Math.pow(.7,arguments.length?y:1);var S=this.r,P=this.g,B=this.b,U=30;return!S&&!P&&!B?new ua(U,U,U):(S&&S<U&&(S=U),P&&P<U&&(P=U),B&&B<U&&(B=U),new ua(Math.min(255,S/y),Math.min(255,P/y),Math.min(255,B/y)))},Yr.darker=function(y){return y=Math.pow(.7,arguments.length?y:1),new ua(y*this.r,y*this.g,y*this.b)},Yr.hsl=function(){return ga(this.r,this.g,this.b)},Yr.toString=function(){return"#"+gr(this.r)+gr(this.g)+gr(this.b)};function gr(y){return y<16?"0"+Math.max(0,y).toString(16):Math.min(255,y).toString(16)}function $r(y,S,P){var B=0,U=0,Z=0,$,X,ae;if($=/([a-z]+)\((.*)\)/.exec(y=y.toLowerCase()),$)switch(X=$[2].split(","),$[1]){case"hsl":return P(parseFloat(X[0]),parseFloat(X[1])/100,parseFloat(X[2])/100);case"rgb":return S(Ea(X[0]),Ea(X[1]),Ea(X[2]))}return(ae=si.get(y))?S(ae.r,ae.g,ae.b):(y!=null&&y.charAt(0)==="#"&&!isNaN(ae=parseInt(y.slice(1),16))&&(y.length===4?(B=(ae&3840)>>4,B=B>>4|B,U=ae&240,U=U>>4|U,Z=ae&15,Z=Z<<4|Z):y.length===7&&(B=(ae&16711680)>>16,U=(ae&65280)>>8,Z=ae&255)),S(B,U,Z))}function ga(y,S,P){var B=Math.min(y/=255,S/=255,P/=255),U=Math.max(y,S,P),Z=U-B,$,X,ae=(U+B)/2;return Z?(X=ae<.5?Z/(U+B):Z/(2-U-B),y==U?$=(S-P)/Z+(S<P?6:0):S==U?$=(P-y)/Z+2:$=(y-S)/Z+4,$*=60):($=NaN,X=ae>0&&ae<1?0:$),new se($,X,ae)}function nr(y,S,P){y=Ti(y),S=Ti(S),P=Ti(P);var B=Or((.4124564*y+.3575761*S+.1804375*P)/mt),U=Or((.2126729*y+.7151522*S+.072175*P)/Pt),Z=Or((.0193339*y+.119192*S+.9503041*P)/Ft);return et(116*U-16,500*(B-U),200*(U-Z))}function Ti(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function Ea(y){var S=parseFloat(y);return y.charAt(y.length-1)==="%"?Math.round(S*2.55):S}var si=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});si.forEach(function(y,S){si.set(y,qa(S))});function fa(y){return typeof y=="function"?y:function(){return y}}e.functor=fa,e.xhr=In(Te);function In(y){return function(S,P,B){return arguments.length===2&&typeof P=="function"&&(B=P,P=null),Co(S,P,y,B)}}function Co(y,S,P,B){var U={},Z=e.dispatch("beforesend","progress","load","error"),$={},X=new XMLHttpRequest,ae=null;self.XDomainRequest&&!("withCredentials"in X)&&/^(http(s)?:)?\/\//.test(y)&&(X=new XDomainRequest),"onload"in X?X.onload=X.onerror=ye:X.onreadystatechange=function(){X.readyState>3&&ye()};function ye(){var xe=X.status,Pe;if(!xe&&Ga(X)||xe>=200&&xe<300||xe===304){try{Pe=P.call(U,X)}catch(De){Z.error.call(U,De);return}Z.load.call(U,Pe)}else Z.error.call(U,X)}return X.onprogress=function(xe){var Pe=e.event;e.event=xe;try{Z.progress.call(U,X)}finally{e.event=Pe}},U.header=function(xe,Pe){return xe=(xe+"").toLowerCase(),arguments.length<2?$[xe]:(Pe==null?delete $[xe]:$[xe]=Pe+"",U)},U.mimeType=function(xe){return arguments.length?(S=xe==null?null:xe+"",U):S},U.responseType=function(xe){return arguments.length?(ae=xe,U):ae},U.response=function(xe){return P=xe,U},["get","post"].forEach(function(xe){U[xe]=function(){return U.send.apply(U,[xe].concat(r(arguments)))}}),U.send=function(xe,Pe,De){if(arguments.length===2&&typeof Pe=="function"&&(De=Pe,Pe=null),X.open(xe,y,!0),S!=null&&!("accept"in $)&&($.accept=S+",*/*"),X.setRequestHeader)for(var $e in $)X.setRequestHeader($e,$[$e]);return S!=null&&X.overrideMimeType&&X.overrideMimeType(S),ae!=null&&(X.responseType=ae),De!=null&&U.on("error",De).on("load",function(ot){De(null,ot)}),Z.beforesend.call(U,X),X.send(Pe==null?null:Pe),U},U.abort=function(){return X.abort(),U},e.rebind(U,Z,"on"),B==null?U:U.get(bs(B))}function bs(y){return y.length===1?function(S,P){y(S==null?P:null)}:y}function Ga(y){var S=y.responseType;return S&&S!=="text"?y.response:y.responseText}e.dsv=function(y,S){var P=new RegExp('["'+y+`
]`),B=y.charCodeAt(0);function U(ye,xe,Pe){arguments.length<3&&(Pe=xe,xe=null);var De=Co(ye,S,xe==null?Z:$(xe),Pe);return De.row=function($e){return arguments.length?De.response((xe=$e)==null?Z:$($e)):xe},De}function Z(ye){return U.parse(ye.responseText)}function $(ye){return function(xe){return U.parse(xe.responseText,ye)}}U.parse=function(ye,xe){var Pe;return U.parseRows(ye,function(De,$e){if(Pe)return Pe(De,$e-1);var ot=function(Ie){for(var He={},Qe=De.length,ct=0;ct<Qe;++ct)He[De[ct]]=Ie[ct];return He};Pe=xe?function(Ie,He){return xe(ot(Ie),He)}:ot})},U.parseRows=function(ye,xe){var Pe={},De={},$e=[],ot=ye.length,Ie=0,He=0,Qe,ct;function nt(){if(Ie>=ot)return De;if(ct)return ct=!1,Pe;var Vt=Ie;if(ye.charCodeAt(Vt)===34){for(var or=Vt;or++<ot;)if(ye.charCodeAt(or)===34){if(ye.charCodeAt(or+1)!==34)break;++or}Ie=or+2;var hr=ye.charCodeAt(or+1);return hr===13?(ct=!0,ye.charCodeAt(or+2)===10&&++Ie):hr===10&&(ct=!0),ye.slice(Vt+1,or).replace(/""/g,'"')}for(;Ie<ot;){var hr=ye.charCodeAt(Ie++),fr=1;if(hr===10)ct=!0;else if(hr===13)ct=!0,ye.charCodeAt(Ie)===10&&(++Ie,++fr);else if(hr!==B)continue;return ye.slice(Vt,Ie-fr)}return ye.slice(Vt)}for(;(Qe=nt())!==De;){for(var je=[];Qe!==Pe&&Qe!==De;)je.push(Qe),Qe=nt();xe&&(je=xe(je,He++))==null||$e.push(je)}return $e},U.format=function(ye){if(Array.isArray(ye[0]))return U.formatRows(ye);var xe=new le,Pe=[];return ye.forEach(function(De){for(var $e in De)xe.has($e)||Pe.push(xe.add($e))}),[Pe.map(ae).join(y)].concat(ye.map(function(De){return Pe.map(function($e){return ae(De[$e])}).join(y)})).join(`
`)},U.formatRows=function(ye){return ye.map(X).join(`
`)};function X(ye){return ye.map(ae).join(y)}function ae(ye){return P.test(ye)?'"'+ye.replace(/\"/g,'""')+'"':ye}return U},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var Kn,du,Ui,pl,lp=this[Me(this,"requestAnimationFrame")]||function(y){setTimeout(y,17)};e.timer=function(){Gc.apply(this,arguments)};function Gc(y,S,P){var B=arguments.length;B<2&&(S=0),B<3&&(P=Date.now());var U=P+S,Z={c:y,t:U,n:null};return du?du.n=Z:Kn=Z,du=Z,Ui||(pl=clearTimeout(pl),Ui=1,lp(Zc)),Z}function Zc(){var y=xv(),S=bv()-y;S>24?(isFinite(S)&&(clearTimeout(pl),pl=setTimeout(Zc,S)),Ui=0):(Ui=1,lp(Zc))}e.timer.flush=function(){xv(),bv()};function xv(){for(var y=Date.now(),S=Kn;S;)y>=S.t&&S.c(y-S.t)&&(S.c=null),S=S.n;return y}function bv(){for(var y,S=Kn,P=1/0;S;)S.c?(S.t<P&&(P=S.t),S=(y=S).n):S=y?y.n=S.n:Kn=S.n;return du=y,P}e.round=function(y,S){return S?Math.round(y*(S=Math.pow(10,S)))/S:Math.round(y)},e.geom={};function pu(y){return y[0]}function ml(y){return y[1]}e.geom.hull=function(y){var S=pu,P=ml;if(arguments.length)return B(y);function B(U){if(U.length<3)return[];var Z=fa(S),$=fa(P),X,ae=U.length,ye=[],xe=[];for(X=0;X<ae;X++)ye.push([+Z.call(this,U[X],X),+$.call(this,U[X],X),X]);for(ye.sort($u),X=0;X<ae;X++)xe.push([ye[X][0],-ye[X][1]]);var Pe=up(ye),De=up(xe),$e=De[0]===Pe[0],ot=De[De.length-1]===Pe[Pe.length-1],Ie=[];for(X=Pe.length-1;X>=0;--X)Ie.push(U[ye[Pe[X]][2]]);for(X=+$e;X<De.length-ot;++X)Ie.push(U[ye[De[X]][2]]);return Ie}return B.x=function(U){return arguments.length?(S=U,B):S},B.y=function(U){return arguments.length?(P=U,B):P},B};function up(y){for(var S=y.length,P=[0,1],B=2,U=2;U<S;U++){for(;B>1&&ii(y[P[B-2]],y[P[B-1]],y[U])<=0;)--B;P[B++]=U}return P.slice(0,B)}function $u(y,S){return y[0]-S[0]||y[1]-S[1]}e.geom.polygon=function(y){return Ye(y,Kf),y};var Kf=e.geom.polygon.prototype=[];Kf.area=function(){for(var y=-1,S=this.length,P,B=this[S-1],U=0;++y<S;)P=B,B=this[y],U+=P[1]*B[0]-P[0]*B[1];return U*.5},Kf.centroid=function(y){var S=-1,P=this.length,B=0,U=0,Z,$=this[P-1],X;for(arguments.length||(y=-1/(6*this.area()));++S<P;)Z=$,$=this[S],X=Z[0]*$[1]-$[0]*Z[1],B+=(Z[0]+$[0])*X,U+=(Z[1]+$[1])*X;return[B*y,U*y]},Kf.clip=function(y){for(var S,P=mo(y),B=-1,U=this.length-mo(this),Z,$,X=this[U-1],ae,ye,xe;++B<U;){for(S=y.slice(),y.length=0,ae=this[B],ye=S[($=S.length-P)-1],Z=-1;++Z<$;)xe=S[Z],$i(xe,X,ae)?($i(ye,X,ae)||y.push(Go(ye,xe,X,ae)),y.push(xe)):$i(ye,X,ae)&&y.push(Go(ye,xe,X,ae)),ye=xe;P&&y.push(y[0]),X=ae}return y};function $i(y,S,P){return(P[0]-S[0])*(y[1]-S[1])<(P[1]-S[1])*(y[0]-S[0])}function Go(y,S,P,B){var U=y[0],Z=P[0],$=S[0]-U,X=B[0]-Z,ae=y[1],ye=P[1],xe=S[1]-ae,Pe=B[1]-ye,De=(X*(ae-ye)-Pe*(U-Z))/(Pe*$-X*xe);return[U+De*$,ae+De*xe]}function mo(y){var S=y[0],P=y[y.length-1];return!(S[0]-P[0]||S[1]-P[1])}var yl,Zo,mu,fp=[],wv,ef,Tv=[];function Av(){Ei(this),this.edge=this.site=this.circle=null}function lo(y){var S=fp.pop()||new Av;return S.site=y,S}function Xt(y){ba(y),mu.remove(y),fp.push(y),Ei(y)}function Ur(y){var S=y.circle,P=S.x,B=S.cy,U={x:P,y:B},Z=y.P,$=y.N,X=[y];Xt(y);for(var ae=Z;ae.circle&&I(P-ae.circle.x)<Ve&&I(B-ae.circle.cy)<Ve;)Z=ae.P,X.unshift(ae),Xt(ae),ae=Z;X.unshift(ae),ba(ae);for(var ye=$;ye.circle&&I(P-ye.circle.x)<Ve&&I(B-ye.circle.cy)<Ve;)$=ye.N,X.push(ye),Xt(ye),ye=$;X.push(ye),ba(ye);var xe=X.length,Pe;for(Pe=1;Pe<xe;++Pe)ye=X[Pe],ae=X[Pe-1],fs(ye.edge,ae.site,ye.site,U);ae=X[0],ye=X[xe-1],ye.edge=Ws(ae.site,ye.site,null,U),Er(ae),Er(ye)}function cp(y){for(var S=y.x,P=y.y,B,U,Z,$,X=mu._;X;)if(Z=yu(X,P)-S,Z>Ve)X=X.L;else if($=S-on(X,P),$>Ve){if(!X.R){B=X;break}X=X.R}else{Z>-Ve?(B=X.P,U=X):$>-Ve?(B=X,U=X.N):B=U=X;break}var ae=lo(y);if(mu.insert(B,ae),!(!B&&!U)){if(B===U){ba(B),U=lo(B.site),mu.insert(ae,U),ae.edge=U.edge=Ws(B.site,ae.site),Er(B),Er(U);return}if(!U){ae.edge=Ws(B.site,ae.site);return}ba(B),ba(U);var ye=B.site,xe=ye.x,Pe=ye.y,De=y.x-xe,$e=y.y-Pe,ot=U.site,Ie=ot.x-xe,He=ot.y-Pe,Qe=2*(De*He-$e*Ie),ct=De*De+$e*$e,nt=Ie*Ie+He*He,je={x:(He*ct-$e*nt)/Qe+xe,y:(De*nt-Ie*ct)/Qe+Pe};fs(U.edge,ye,ot,je),ae.edge=Ws(ye,y,null,je),U.edge=Ws(y,ot,null,je),Er(B),Er(U)}}function yu(y,S){var P=y.site,B=P.x,U=P.y,Z=U-S;if(!Z)return B;var $=y.P;if(!$)return-1/0;P=$.site;var X=P.x,ae=P.y,ye=ae-S;if(!ye)return X;var xe=X-B,Pe=1/Z-1/ye,De=xe/ye;return Pe?(-De+Math.sqrt(De*De-2*Pe*(xe*xe/(-2*ye)-ae+ye/2+U-Z/2)))/Pe+B:(B+X)/2}function on(y,S){var P=y.N;if(P)return yu(P,S);var B=y.site;return B.y===S?B.x:1/0}function gl(y){this.site=y,this.edges=[]}gl.prototype.prepare=function(){for(var y=this.edges,S=y.length,P;S--;)P=y[S].edge,(!P.b||!P.a)&&y.splice(S,1);return y.sort(tf),y.length};function ws(y){for(var S=y[0][0],P=y[1][0],B=y[0][1],U=y[1][1],Z,$,X,ae,ye=Zo,xe=ye.length,Pe,De,$e,ot,Ie,He;xe--;)if(Pe=ye[xe],!(!Pe||!Pe.prepare()))for($e=Pe.edges,ot=$e.length,De=0;De<ot;)He=$e[De].end(),X=He.x,ae=He.y,Ie=$e[++De%ot].start(),Z=Ie.x,$=Ie.y,(I(X-Z)>Ve||I(ae-$)>Ve)&&($e.splice(De,0,new xl(gu(Pe.site,He,I(X-S)<Ve&&U-ae>Ve?{x:S,y:I(Z-S)<Ve?$:U}:I(ae-U)<Ve&&P-X>Ve?{x:I($-U)<Ve?Z:P,y:U}:I(X-P)<Ve&&ae-B>Ve?{x:P,y:I(Z-P)<Ve?$:B}:I(ae-B)<Ve&&X-S>Ve?{x:I($-B)<Ve?Z:S,y:B}:null),Pe.site,null)),++ot)}function tf(y,S){return S.angle-y.angle}function rf(){Ei(this),this.x=this.y=this.arc=this.site=this.cy=null}function Er(y){var S=y.P,P=y.N;if(!(!S||!P)){var B=S.site,U=y.site,Z=P.site;if(B!==Z){var $=U.x,X=U.y,ae=B.x-$,ye=B.y-X,xe=Z.x-$,He=Z.y-X,Pe=2*(ae*He-ye*xe);if(!(Pe>=-bt)){var De=ae*ae+ye*ye,$e=xe*xe+He*He,ot=(He*De-ye*$e)/Pe,Ie=(ae*$e-xe*De)/Pe,He=Ie+X,Qe=Tv.pop()||new rf;Qe.arc=y,Qe.site=U,Qe.x=ot+$,Qe.y=He+Math.sqrt(ot*ot+Ie*Ie),Qe.cy=He,y.circle=Qe;for(var ct=null,nt=ef._;nt;)if(Qe.y<nt.y||Qe.y===nt.y&&Qe.x<=nt.x)if(nt.L)nt=nt.L;else{ct=nt.P;break}else if(nt.R)nt=nt.R;else{ct=nt;break}ef.insert(ct,Qe),ct||(wv=Qe)}}}}function ba(y){var S=y.circle;S&&(S.P||(wv=S.N),ef.remove(S),Tv.push(S),Ei(S),y.circle=null)}function wa(y,S,P,B){return function(U){var Z=U.a,$=U.b,X=Z.x,ae=Z.y,ye=$.x,xe=$.y,Pe=0,De=1,$e=ye-X,ot=xe-ae,Ie;if(Ie=y-X,!(!$e&&Ie>0)){if(Ie/=$e,$e<0){if(Ie<Pe)return;Ie<De&&(De=Ie)}else if($e>0){if(Ie>De)return;Ie>Pe&&(Pe=Ie)}if(Ie=P-X,!(!$e&&Ie<0)){if(Ie/=$e,$e<0){if(Ie>De)return;Ie>Pe&&(Pe=Ie)}else if($e>0){if(Ie<Pe)return;Ie<De&&(De=Ie)}if(Ie=S-ae,!(!ot&&Ie>0)){if(Ie/=ot,ot<0){if(Ie<Pe)return;Ie<De&&(De=Ie)}else if(ot>0){if(Ie>De)return;Ie>Pe&&(Pe=Ie)}if(Ie=B-ae,!(!ot&&Ie<0)){if(Ie/=ot,ot<0){if(Ie>De)return;Ie>Pe&&(Pe=Ie)}else if(ot>0){if(Ie<Pe)return;Ie<De&&(De=Ie)}return Pe>0&&(U.a={x:X+Pe*$e,y:ae+Pe*ot}),De<1&&(U.b={x:X+De*$e,y:ae+De*ot}),U}}}}}}function Ts(y){for(var S=yl,P=wa(y[0][0],y[0][1],y[1][0],y[1][1]),B=S.length,U;B--;)U=S[B],(!_l(U,y)||!P(U)||I(U.a.x-U.b.x)<Ve&&I(U.a.y-U.b.y)<Ve)&&(U.a=U.b=null,S.splice(B,1))}function _l(y,S){var P=y.b;if(P)return!0;var B=y.a,U=S[0][0],Z=S[1][0],$=S[0][1],X=S[1][1],ae=y.l,ye=y.r,xe=ae.x,Pe=ae.y,De=ye.x,$e=ye.y,ot=(xe+De)/2,Ie=(Pe+$e)/2,He,Qe;if($e===Pe){if(ot<U||ot>=Z)return;if(xe>De){if(!B)B={x:ot,y:$};else if(B.y>=X)return;P={x:ot,y:X}}else{if(!B)B={x:ot,y:X};else if(B.y<$)return;P={x:ot,y:$}}}else if(He=(xe-De)/($e-Pe),Qe=Ie-He*ot,He<-1||He>1)if(xe>De){if(!B)B={x:($-Qe)/He,y:$};else if(B.y>=X)return;P={x:(X-Qe)/He,y:X}}else{if(!B)B={x:(X-Qe)/He,y:X};else if(B.y<$)return;P={x:($-Qe)/He,y:$}}else if(Pe<$e){if(!B)B={x:U,y:He*U+Qe};else if(B.x>=Z)return;P={x:Z,y:He*Z+Qe}}else{if(!B)B={x:Z,y:He*Z+Qe};else if(B.x<U)return;P={x:U,y:He*U+Qe}}return y.a=B,y.b=P,!0}function Aa(y,S){this.l=y,this.r=S,this.a=this.b=null}function Ws(y,S,P,B){var U=new Aa(y,S);return yl.push(U),P&&fs(U,y,S,P),B&&fs(U,S,y,B),Zo[y.i].edges.push(new xl(U,y,S)),Zo[S.i].edges.push(new xl(U,S,y)),U}function gu(y,S,P){var B=new Aa(y,null);return B.a=S,B.b=P,yl.push(B),B}function fs(y,S,P,B){!y.a&&!y.b?(y.a=B,y.l=S,y.r=P):y.l===P?y.b=B:y.a=B}function xl(y,S,P){var B=y.a,U=y.b;this.edge=y,this.site=S,this.angle=P?Math.atan2(P.y-S.y,P.x-S.x):y.l===S?Math.atan2(U.x-B.x,B.y-U.y):Math.atan2(B.x-U.x,U.y-B.y)}xl.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function yo(){this._=null}function Ei(y){y.U=y.C=y.L=y.R=y.P=y.N=null}yo.prototype={insert:function(y,S){var P,B,U;if(y){if(S.P=y,S.N=y.N,y.N&&(y.N.P=S),y.N=S,y.R){for(y=y.R;y.L;)y=y.L;y.L=S}else y.R=S;P=y}else this._?(y=Yc(this._),S.P=null,S.N=y,y.P=y.L=S,P=y):(S.P=S.N=null,this._=S,P=null);for(S.L=S.R=null,S.U=P,S.C=!0,y=S;P&&P.C;)B=P.U,P===B.L?(U=B.R,U&&U.C?(P.C=U.C=!1,B.C=!0,y=B):(y===P.R&&(As(this,P),y=P,P=y.U),P.C=!1,B.C=!0,cs(this,B))):(U=B.L,U&&U.C?(P.C=U.C=!1,B.C=!0,y=B):(y===P.L&&(cs(this,P),y=P,P=y.U),P.C=!1,B.C=!0,As(this,B))),P=y.U;this._.C=!1},remove:function(y){y.N&&(y.N.P=y.P),y.P&&(y.P.N=y.N),y.N=y.P=null;var S=y.U,P,B=y.L,U=y.R,Z,$;if(B?U?Z=Yc(U):Z=B:Z=U,S?S.L===y?S.L=Z:S.R=Z:this._=Z,B&&U?($=Z.C,Z.C=y.C,Z.L=B,B.U=Z,Z!==U?(S=Z.U,Z.U=y.U,y=Z.R,S.L=y,Z.R=U,U.U=Z):(Z.U=S,S=Z,y=Z.R)):($=y.C,y=Z),y&&(y.U=S),!$){if(y&&y.C){y.C=!1;return}do{if(y===this._)break;if(y===S.L){if(P=S.R,P.C&&(P.C=!1,S.C=!0,As(this,S),P=S.R),P.L&&P.L.C||P.R&&P.R.C){(!P.R||!P.R.C)&&(P.L.C=!1,P.C=!0,cs(this,P),P=S.R),P.C=S.C,S.C=P.R.C=!1,As(this,S),y=this._;break}}else if(P=S.L,P.C&&(P.C=!1,S.C=!0,cs(this,S),P=S.L),P.L&&P.L.C||P.R&&P.R.C){(!P.L||!P.L.C)&&(P.R.C=!1,P.C=!0,As(this,P),P=S.L),P.C=S.C,S.C=P.L.C=!1,cs(this,S),y=this._;break}P.C=!0,y=S,S=S.U}while(!y.C);y&&(y.C=!1)}}};function As(y,S){var P=S,B=S.R,U=P.U;U?U.L===P?U.L=B:U.R=B:y._=B,B.U=U,P.U=B,P.R=B.L,P.R&&(P.R.U=P),B.L=P}function cs(y,S){var P=S,B=S.L,U=P.U;U?U.L===P?U.L=B:U.R=B:y._=B,B.U=U,P.U=B,P.L=B.R,P.L&&(P.L.U=P),B.R=P}function Yc(y){for(;y.L;)y=y.L;return y}function _u(y,S){var P=y.sort(Pm).pop(),B,U,Z;for(yl=[],Zo=new Array(y.length),mu=new yo,ef=new yo;;)if(Z=wv,P&&(!Z||P.y<Z.y||P.y===Z.y&&P.x<Z.x))(P.x!==B||P.y!==U)&&(Zo[P.i]=new gl(P),cp(P),B=P.x,U=P.y),P=y.pop();else if(Z)Ur(Z.arc);else break;S&&(Ts(S),ws(S));var $={cells:Zo,edges:yl};return mu=ef=yl=Zo=null,$}function Pm(y,S){return S.y-y.y||S.x-y.x}e.geom.voronoi=function(y){var S=pu,P=ml,B=S,U=P,Z=Qf;if(y)return $(y);function $(ae){var ye=new Array(ae.length),xe=Z[0][0],Pe=Z[0][1],De=Z[1][0],$e=Z[1][1];return _u(X(ae),Z).cells.forEach(function(ot,Ie){var He=ot.edges,Qe=ot.site,ct=ye[Ie]=He.length?He.map(function(nt){var je=nt.start();return[je.x,je.y]}):Qe.x>=xe&&Qe.x<=De&&Qe.y>=Pe&&Qe.y<=$e?[[xe,$e],[De,$e],[De,Pe],[xe,Pe]]:[];ct.point=ae[Ie]}),ye}function X(ae){return ae.map(function(ye,xe){return{x:Math.round(B(ye,xe)/Ve)*Ve,y:Math.round(U(ye,xe)/Ve)*Ve,i:xe}})}return $.links=function(ae){return _u(X(ae)).edges.filter(function(ye){return ye.l&&ye.r}).map(function(ye){return{source:ae[ye.l.i],target:ae[ye.r.i]}})},$.triangles=function(ae){var ye=[];return _u(X(ae)).cells.forEach(function(xe,Pe){for(var De=xe.site,$e=xe.edges.sort(tf),ot=-1,Ie=$e.length,He,Qe,ct=$e[Ie-1].edge,nt=ct.l===De?ct.r:ct.l;++ot<Ie;)He=ct,Qe=nt,ct=$e[ot].edge,nt=ct.l===De?ct.r:ct.l,Pe<Qe.i&&Pe<nt.i&&ni(De,Qe,nt)<0&&ye.push([ae[Pe],ae[Qe.i],ae[nt.i]])}),ye},$.x=function(ae){return arguments.length?(B=fa(S=ae),$):S},$.y=function(ae){return arguments.length?(U=fa(P=ae),$):P},$.clipExtent=function(ae){return arguments.length?(Z=ae==null?Qf:ae,$):Z===Qf?null:Z},$.size=function(ae){return arguments.length?$.clipExtent(ae&&[[0,0],ae]):Z===Qf?null:Z&&Z[1]},$};var Qf=[[-1e6,-1e6],[1e6,1e6]];function ni(y,S,P){return(y.x-P.x)*(S.y-y.y)-(y.x-S.x)*(P.y-y.y)}e.geom.delaunay=function(y){return e.geom.voronoi().triangles(y)},e.geom.quadtree=function(y,S,P,B,U){var Z=pu,$=ml,X;if(X=arguments.length)return Z=$f,$=Mv,X===3&&(U=P,B=S,P=S=0),ae(y);function ae(ye){var xe,Pe=fa(Z),De=fa($),$e,ot,Ie,He,Qe,ct,nt,je;if(S!=null)Qe=S,ct=P,nt=B,je=U;else if(nt=je=-(Qe=ct=1/0),$e=[],ot=[],He=ye.length,X)for(Ie=0;Ie<He;++Ie)xe=ye[Ie],xe.x<Qe&&(Qe=xe.x),xe.y<ct&&(ct=xe.y),xe.x>nt&&(nt=xe.x),xe.y>je&&(je=xe.y),$e.push(xe.x),ot.push(xe.y);else for(Ie=0;Ie<He;++Ie){var Vt=+Pe(xe=ye[Ie],Ie),or=+De(xe,Ie);Vt<Qe&&(Qe=Vt),or<ct&&(ct=or),Vt>nt&&(nt=Vt),or>je&&(je=or),$e.push(Vt),ot.push(or)}var hr=nt-Qe,fr=je-ct;hr>fr?je=ct+hr:nt=Qe+fr;function zr(Vr,Kr,Na,ei,Qa,jt,Jr,na){if(!(isNaN(Na)||isNaN(ei)))if(Vr.leaf){var oa=Vr.x,Di=Vr.y;if(oa!=null)if(I(oa-Na)+I(Di-ei)<.01)Rr(Vr,Kr,Na,ei,Qa,jt,Jr,na);else{var Vi=Vr.point;Vr.x=Vr.y=Vr.point=null,Rr(Vr,Vi,oa,Di,Qa,jt,Jr,na),Rr(Vr,Kr,Na,ei,Qa,jt,Jr,na)}else Vr.x=Na,Vr.y=ei,Vr.point=Kr}else Rr(Vr,Kr,Na,ei,Qa,jt,Jr,na)}function Rr(Vr,Kr,Na,ei,Qa,jt,Jr,na){var oa=(Qa+Jr)*.5,Di=(jt+na)*.5,Vi=Na>=oa,en=ei>=Di,bi=en<<1|Vi;Vr.leaf=!1,Vr=Vr.nodes[bi]||(Vr.nodes[bi]=xn()),Vi?Qa=oa:Jr=oa,en?jt=Di:na=Di,zr(Vr,Kr,Na,ei,Qa,jt,Jr,na)}var ea=xn();if(ea.add=function(Vr){zr(ea,Vr,+Pe(Vr,++Ie),+De(Vr,Ie),Qe,ct,nt,je)},ea.visit=function(Vr){Rn(Vr,ea,Qe,ct,nt,je)},ea.find=function(Vr){return hp(ea,Vr[0],Vr[1],Qe,ct,nt,je)},Ie=-1,S==null){for(;++Ie<He;)zr(ea,ye[Ie],$e[Ie],ot[Ie],Qe,ct,nt,je);--Ie}else ye.forEach(ea.add);return $e=ot=ye=xe=null,ea}return ae.x=function(ye){return arguments.length?(Z=ye,ae):Z},ae.y=function(ye){return arguments.length?($=ye,ae):$},ae.extent=function(ye){return arguments.length?(ye==null?S=P=B=U=null:(S=+ye[0][0],P=+ye[0][1],B=+ye[1][0],U=+ye[1][1]),ae):S==null?null:[[S,P],[B,U]]},ae.size=function(ye){return arguments.length?(ye==null?S=P=B=U=null:(S=P=0,B=+ye[0],U=+ye[1]),ae):S==null?null:[B-S,U-P]},ae};function $f(y){return y.x}function Mv(y){return y.y}function xn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Rn(y,S,P,B,U,Z){if(!y(S,P,B,U,Z)){var $=(P+U)*.5,X=(B+Z)*.5,ae=S.nodes;ae[0]&&Rn(y,ae[0],P,B,$,X),ae[1]&&Rn(y,ae[1],$,B,U,X),ae[2]&&Rn(y,ae[2],P,X,$,Z),ae[3]&&Rn(y,ae[3],$,X,U,Z)}}function hp(y,S,P,B,U,Z,$){var X=1/0,ae;return function ye(xe,Pe,De,$e,ot){if(!(Pe>Z||De>$||$e<B||ot<U)){if(Ie=xe.point){var Ie,He=S-xe.x,Qe=P-xe.y,ct=He*He+Qe*Qe;if(ct<X){var nt=Math.sqrt(X=ct);B=S-nt,U=P-nt,Z=S+nt,$=P+nt,ae=Ie}}for(var je=xe.nodes,Vt=(Pe+$e)*.5,or=(De+ot)*.5,hr=S>=Vt,fr=P>=or,zr=fr<<1|hr,Rr=zr+4;zr<Rr;++zr)if(xe=je[zr&3])switch(zr&3){case 0:ye(xe,Pe,De,Vt,or);break;case 1:ye(xe,Vt,De,$e,or);break;case 2:ye(xe,Pe,or,Vt,ot);break;case 3:ye(xe,Vt,or,$e,ot);break}}}(y,B,U,Z,$),ae}e.interpolateRgb=af;function af(y,S){y=e.rgb(y),S=e.rgb(S);var P=y.r,B=y.g,U=y.b,Z=S.r-P,$=S.g-B,X=S.b-U;return function(ae){return"#"+gr(Math.round(P+Z*ae))+gr(Math.round(B+$*ae))+gr(Math.round(U+X*ae))}}e.interpolateObject=sn;function sn(y,S){var P={},B={},U;for(U in y)U in S?P[U]=ln(y[U],S[U]):B[U]=y[U];for(U in S)U in y||(B[U]=S[U]);return function(Z){for(U in P)B[U]=P[U](Z);return B}}e.interpolateNumber=Eo;function Eo(y,S){return y=+y,S=+S,function(P){return y*(1-P)+S*P}}e.interpolateString=Yo;function Yo(y,S){var P=dn.lastIndex=ec.lastIndex=0,B,U,Z,$=-1,X=[],ae=[];for(y=y+"",S=S+"";(B=dn.exec(y))&&(U=ec.exec(S));)(Z=U.index)>P&&(Z=S.slice(P,Z),X[$]?X[$]+=Z:X[++$]=Z),(B=B[0])===(U=U[0])?X[$]?X[$]+=U:X[++$]=U:(X[++$]=null,ae.push({i:$,x:Eo(B,U)})),P=ec.lastIndex;return P<S.length&&(Z=S.slice(P),X[$]?X[$]+=Z:X[++$]=Z),X.length<2?ae[0]?(S=ae[0].x,function(ye){return S(ye)+""}):function(){return S}:(S=ae.length,function(ye){for(var xe=0,Pe;xe<S;++xe)X[(Pe=ae[xe]).i]=Pe.x(ye);return X.join("")})}var dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ec=new RegExp(dn.source,"g");e.interpolate=ln;function ln(y,S){for(var P=e.interpolators.length,B;--P>=0&&!(B=e.interpolators[P](y,S)););return B}e.interpolators=[function(y,S){var P=typeof S;return(P==="string"?si.has(S.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(S)?af:Yo:S instanceof ma?af:Array.isArray(S)?Wo:P==="object"&&isNaN(S)?sn:Eo)(y,S)}],e.interpolateArray=Wo;function Wo(y,S){var P=[],B=[],U=y.length,Z=S.length,$=Math.min(y.length,S.length),X;for(X=0;X<$;++X)P.push(ln(y[X],S[X]));for(;X<U;++X)B[X]=y[X];for(;X<Z;++X)B[X]=S[X];return function(ae){for(X=0;X<$;++X)B[X]=P[X](ae);return B}}var Xs=function(){return Te},zm=e.map({linear:Xs,poly:Sv,quad:function(){return Rm},cubic:function(){return bl},sin:function(){return Fm},exp:function(){return qm},circle:function(){return Wc},elastic:Nm,back:Bm,bounce:function(){return Om}}),Xo=e.map({in:Te,out:js,"in-out":Fn,"out-in":function(y){return Fn(js(y))}});e.ease=function(y){var S=y.indexOf("-"),P=S>=0?y.slice(0,S):y,B=S>=0?y.slice(S+1):"in";return P=zm.get(P)||Xs,B=Xo.get(B)||Te,Im(B(P.apply(null,t.call(arguments,1))))};function Im(y){return function(S){return S<=0?0:S>=1?1:y(S)}}function js(y){return function(S){return 1-y(1-S)}}function Fn(y){return function(S){return .5*(S<.5?y(2*S):2-y(2-2*S))}}function Rm(y){return y*y}function bl(y){return y*y*y}function wl(y){if(y<=0)return 0;if(y>=1)return 1;var S=y*y,P=S*y;return 4*(y<.5?P:3*(y-S)+P-.75)}function Sv(y){return function(S){return Math.pow(S,y)}}function Fm(y){return 1-Math.cos(y*Mr)}function qm(y){return Math.pow(2,10*(y-1))}function Wc(y){return 1-Math.sqrt(1-y*y)}function Nm(y,S){var P;return arguments.length<2&&(S=.45),arguments.length?P=S/mr*Math.asin(1/y):(y=1,P=S/4),function(B){return 1+y*Math.pow(2,-10*B)*Math.sin((B-P)*mr/S)}}function Bm(y){return y||(y=1.70158),function(S){return S*S*((y+1)*S-y)}}function Om(y){return y<1/2.75?7.5625*y*y:y<2/2.75?7.5625*(y-=1.5/2.75)*y+.75:y<2.5/2.75?7.5625*(y-=2.25/2.75)*y+.9375:7.5625*(y-=2.625/2.75)*y+.984375}e.interpolateHcl=kv;function kv(y,S){y=e.hcl(y),S=e.hcl(S);var P=y.h,B=y.c,U=y.l,Z=S.h-P,$=S.c-B,X=S.l-U;return isNaN($)&&($=0,B=isNaN(B)?S.c:B),isNaN(Z)?(Z=0,P=isNaN(P)?S.h:P):Z>180?Z-=360:Z<-180&&(Z+=360),function(ae){return Ne(P+Z*ae,B+$*ae,U+X*ae)+""}}e.interpolateHsl=Um;function Um(y,S){y=e.hsl(y),S=e.hsl(S);var P=y.h,B=y.s,U=y.l,Z=S.h-P,$=S.s-B,X=S.l-U;return isNaN($)&&($=0,B=isNaN(B)?S.s:B),isNaN(Z)?(Z=0,P=isNaN(P)?S.h:P):Z>180?Z-=360:Z<-180&&(Z+=360),function(ae){return ue(P+Z*ae,B+$*ae,U+X*ae)+""}}e.interpolateLab=Vm;function Vm(y,S){y=e.lab(y),S=e.lab(S);var P=y.l,B=y.a,U=y.b,Z=S.l-P,$=S.a-B,X=S.b-U;return function(ae){return Wt(P+Z*ae,B+$*ae,U+X*ae)+""}}e.interpolateRound=Cv;function Cv(y,S){return S-=y,function(P){return Math.round(y+S*P)}}e.transform=function(y){var S=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(P){if(P!=null){S.setAttribute("transform",P);var B=S.transform.baseVal.consolidate()}return new vp(B?B.matrix:Lv)})(y)};function vp(y){var S=[y.a,y.b],P=[y.c,y.d],B=Ev(S),U=dp(S,P),Z=Ev(Hm(P,S,-U))||0;S[0]*P[1]<P[0]*S[1]&&(S[0]*=-1,S[1]*=-1,B*=-1,U*=-1),this.rotate=(B?Math.atan2(S[1],S[0]):Math.atan2(-P[0],P[1]))*pa,this.translate=[y.e,y.f],this.scale=[B,Z],this.skew=Z?Math.atan2(U,Z)*pa:0}vp.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function dp(y,S){return y[0]*S[0]+y[1]*S[1]}function Ev(y){var S=Math.sqrt(dp(y,y));return S&&(y[0]/=S,y[1]/=S),S}function Hm(y,S,P){return y[0]+=P*S[0],y[1]+=P*S[1],y}var Lv={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=gp;function xu(y){return y.length?y.pop()+",":""}function pp(y,S,P,B){if(y[0]!==S[0]||y[1]!==S[1]){var U=P.push("translate(",null,",",null,")");B.push({i:U-4,x:Eo(y[0],S[0])},{i:U-2,x:Eo(y[1],S[1])})}else(S[0]||S[1])&&P.push("translate("+S+")")}function Gm(y,S,P,B){y!==S?(y-S>180?S+=360:S-y>180&&(y+=360),B.push({i:P.push(xu(P)+"rotate(",null,")")-2,x:Eo(y,S)})):S&&P.push(xu(P)+"rotate("+S+")")}function mp(y,S,P,B){y!==S?B.push({i:P.push(xu(P)+"skewX(",null,")")-2,x:Eo(y,S)}):S&&P.push(xu(P)+"skewX("+S+")")}function yp(y,S,P,B){if(y[0]!==S[0]||y[1]!==S[1]){var U=P.push(xu(P)+"scale(",null,",",null,")");B.push({i:U-4,x:Eo(y[0],S[0])},{i:U-2,x:Eo(y[1],S[1])})}else(S[0]!==1||S[1]!==1)&&P.push(xu(P)+"scale("+S+")")}function gp(y,S){var P=[],B=[];return y=e.transform(y),S=e.transform(S),pp(y.translate,S.translate,P,B),Gm(y.rotate,S.rotate,P,B),mp(y.skew,S.skew,P,B),yp(y.scale,S.scale,P,B),y=S=null,function(U){for(var Z=-1,$=B.length,X;++Z<$;)P[(X=B[Z]).i]=X.x(U);return P.join("")}}function Zm(y,S){return S=(S-=y=+y)||1/S,function(P){return(P-y)/S}}function hs(y,S){return S=(S-=y=+y)||1/S,function(P){return Math.max(0,Math.min(1,(P-y)/S))}}e.layout={},e.layout.bundle=function(){return function(y){for(var S=[],P=-1,B=y.length;++P<B;)S.push(Xc(y[P]));return S}};function Xc(y){for(var S=y.source,P=y.target,B=jc(S,P),U=[S];S!==B;)S=S.parent,U.push(S);for(var Z=U.length;P!==B;)U.splice(Z,0,P),P=P.parent;return U}function Tl(y){for(var S=[],P=y.parent;P!=null;)S.push(y),y=P,P=P.parent;return S.push(y),S}function jc(y,S){if(y===S)return y;for(var P=Tl(y),B=Tl(S),U=P.pop(),Z=B.pop(),$=null;U===Z;)$=U,U=P.pop(),Z=B.pop();return $}e.layout.chord=function(){var y={},S,P,B,U,Z=0,$,X,ae;function ye(){var Pe={},De=[],$e=e.range(U),ot=[],Ie,He,Qe,ct,nt;for(S=[],P=[],Ie=0,ct=-1;++ct<U;){for(He=0,nt=-1;++nt<U;)He+=B[ct][nt];De.push(He),ot.push(e.range(U)),Ie+=He}for($&&$e.sort(function(ea,Vr){return $(De[ea],De[Vr])}),X&&ot.forEach(function(ea,Vr){ea.sort(function(Kr,Na){return X(B[Vr][Kr],B[Vr][Na])})}),Ie=(mr-Z*U)/Ie,He=0,ct=-1;++ct<U;){for(Qe=He,nt=-1;++nt<U;){var je=$e[ct],Vt=ot[je][nt],or=B[je][Vt],hr=He,fr=He+=or*Ie;Pe[je+"-"+Vt]={index:je,subindex:Vt,startAngle:hr,endAngle:fr,value:or}}P[je]={index:je,startAngle:Qe,endAngle:He,value:De[je]},He+=Z}for(ct=-1;++ct<U;)for(nt=ct-1;++nt<U;){var zr=Pe[ct+"-"+nt],Rr=Pe[nt+"-"+ct];(zr.value||Rr.value)&&S.push(zr.value<Rr.value?{source:Rr,target:zr}:{source:zr,target:Rr})}ae&&xe()}function xe(){S.sort(function(Pe,De){return ae((Pe.source.value+Pe.target.value)/2,(De.source.value+De.target.value)/2)})}return y.matrix=function(Pe){return arguments.length?(U=(B=Pe)&&B.length,S=P=null,y):B},y.padding=function(Pe){return arguments.length?(Z=Pe,S=P=null,y):Z},y.sortGroups=function(Pe){return arguments.length?($=Pe,S=P=null,y):$},y.sortSubgroups=function(Pe){return arguments.length?(X=Pe,S=null,y):X},y.sortChords=function(Pe){return arguments.length?(ae=Pe,S&&xe(),y):ae},y.chords=function(){return S||ye(),S},y.groups=function(){return P||ye(),P},y},e.layout.force=function(){var y={},S=e.dispatch("start","tick","end"),P,B=[1,1],U,Z,$=.9,X=pn,ae=Ym,ye=-30,xe=Wm,Pe=.1,De=.64,$e=[],ot=[],Ie,He,Qe;function ct(je){return function(Vt,or,hr,fr){if(Vt.point!==je){var zr=Vt.cx-je.x,Rr=Vt.cy-je.y,ea=fr-or,Vr=zr*zr+Rr*Rr;if(ea*ea/De<Vr){if(Vr<xe){var Kr=Vt.charge/Vr;je.px-=zr*Kr,je.py-=Rr*Kr}return!0}if(Vt.point&&Vr&&Vr<xe){var Kr=Vt.pointCharge/Vr;je.px-=zr*Kr,je.py-=Rr*Kr}}return!Vt.charge}}y.tick=function(){if((Z*=.99)<.005)return P=null,S.end({type:"end",alpha:Z=0}),!0;var je=$e.length,Vt=ot.length,or,hr,fr,zr,Rr,ea,Vr,Kr,Na;for(hr=0;hr<Vt;++hr)fr=ot[hr],zr=fr.source,Rr=fr.target,Kr=Rr.x-zr.x,Na=Rr.y-zr.y,(ea=Kr*Kr+Na*Na)&&(ea=Z*He[hr]*((ea=Math.sqrt(ea))-Ie[hr])/ea,Kr*=ea,Na*=ea,Rr.x-=Kr*(Vr=zr.weight+Rr.weight?zr.weight/(zr.weight+Rr.weight):.5),Rr.y-=Na*Vr,zr.x+=Kr*(Vr=1-Vr),zr.y+=Na*Vr);if((Vr=Z*Pe)&&(Kr=B[0]/2,Na=B[1]/2,hr=-1,Vr))for(;++hr<je;)fr=$e[hr],fr.x+=(Kr-fr.x)*Vr,fr.y+=(Na-fr.y)*Vr;if(ye)for(Ms(or=e.geom.quadtree($e),Z,Qe),hr=-1;++hr<je;)(fr=$e[hr]).fixed||or.visit(ct(fr));for(hr=-1;++hr<je;)fr=$e[hr],fr.fixed?(fr.x=fr.px,fr.y=fr.py):(fr.x-=(fr.px-(fr.px=fr.x))*$,fr.y-=(fr.py-(fr.py=fr.y))*$);S.tick({type:"tick",alpha:Z})},y.nodes=function(je){return arguments.length?($e=je,y):$e},y.links=function(je){return arguments.length?(ot=je,y):ot},y.size=function(je){return arguments.length?(B=je,y):B},y.linkDistance=function(je){return arguments.length?(X=typeof je=="function"?je:+je,y):X},y.distance=y.linkDistance,y.linkStrength=function(je){return arguments.length?(ae=typeof je=="function"?je:+je,y):ae},y.friction=function(je){return arguments.length?($=+je,y):$},y.charge=function(je){return arguments.length?(ye=typeof je=="function"?je:+je,y):ye},y.chargeDistance=function(je){return arguments.length?(xe=je*je,y):Math.sqrt(xe)},y.gravity=function(je){return arguments.length?(Pe=+je,y):Pe},y.theta=function(je){return arguments.length?(De=je*je,y):Math.sqrt(De)},y.alpha=function(je){return arguments.length?(je=+je,Z?je>0?Z=je:(P.c=null,P.t=NaN,P=null,S.end({type:"end",alpha:Z=0})):je>0&&(S.start({type:"start",alpha:Z=je}),P=Gc(y.tick)),y):Z},y.start=function(){var je,Vt=$e.length,or=ot.length,hr=B[0],fr=B[1],zr,Rr;for(je=0;je<Vt;++je)(Rr=$e[je]).index=je,Rr.weight=0;for(je=0;je<or;++je)Rr=ot[je],typeof Rr.source=="number"&&(Rr.source=$e[Rr.source]),typeof Rr.target=="number"&&(Rr.target=$e[Rr.target]),++Rr.source.weight,++Rr.target.weight;for(je=0;je<Vt;++je)Rr=$e[je],isNaN(Rr.x)&&(Rr.x=ea("x",hr)),isNaN(Rr.y)&&(Rr.y=ea("y",fr)),isNaN(Rr.px)&&(Rr.px=Rr.x),isNaN(Rr.py)&&(Rr.py=Rr.y);if(Ie=[],typeof X=="function")for(je=0;je<or;++je)Ie[je]=+X.call(this,ot[je],je);else for(je=0;je<or;++je)Ie[je]=X;if(He=[],typeof ae=="function")for(je=0;je<or;++je)He[je]=+ae.call(this,ot[je],je);else for(je=0;je<or;++je)He[je]=ae;if(Qe=[],typeof ye=="function")for(je=0;je<Vt;++je)Qe[je]=+ye.call(this,$e[je],je);else for(je=0;je<Vt;++je)Qe[je]=ye;function ea(Vr,Kr){if(!zr){for(zr=new Array(Vt),Qa=0;Qa<Vt;++Qa)zr[Qa]=[];for(Qa=0;Qa<or;++Qa){var Na=ot[Qa];zr[Na.source.index].push(Na.target),zr[Na.target.index].push(Na.source)}}for(var ei=zr[je],Qa=-1,jt=ei.length,Jr;++Qa<jt;)if(!isNaN(Jr=ei[Qa][Vr]))return Jr;return Math.random()*Kr}return y.resume()},y.resume=function(){return y.alpha(.1)},y.stop=function(){return y.alpha(0)},y.drag=function(){if(U||(U=e.behavior.drag().origin(Te).on("dragstart.force",Al).on("drag.force",nt).on("dragend.force",Ml)),!arguments.length)return U;this.on("mouseover.force",Dv).on("mouseout.force",Jc).call(U)};function nt(je){je.px=e.event.x,je.py=e.event.y,y.resume()}return e.rebind(y,S,"on")};function Al(y){y.fixed|=2}function Ml(y){y.fixed&=-7}function Dv(y){y.fixed|=4,y.px=y.x,y.py=y.y}function Jc(y){y.fixed&=-5}function Ms(y,S,P){var B=0,U=0;if(y.charge=0,!y.leaf)for(var Z=y.nodes,$=Z.length,X=-1,ae;++X<$;)ae=Z[X],ae!=null&&(Ms(ae,S,P),y.charge+=ae.charge,B+=ae.charge*ae.cx,U+=ae.charge*ae.cy);if(y.point){y.leaf||(y.point.x+=Math.random()-.5,y.point.y+=Math.random()-.5);var ye=S*P[y.point.index];y.charge+=y.pointCharge=ye,B+=ye*y.point.x,U+=ye*y.point.y}y.cx=B/y.charge,y.cy=U/y.charge}var pn=20,Ym=1,Wm=1/0;e.layout.hierarchy=function(){var y=of,S=_p,P=xp;function B(U){var Z=[U],$=[],X;for(U.depth=0;(X=Z.pop())!=null;)if($.push(X),(ye=S.call(B,X,X.depth))&&(ae=ye.length)){for(var ae,ye,xe;--ae>=0;)Z.push(xe=ye[ae]),xe.parent=X,xe.depth=X.depth+1;P&&(X.value=0),X.children=ye}else P&&(X.value=+P.call(B,X,X.depth)||0),delete X.children;return vs(U,function(Pe){var De,$e;y&&(De=Pe.children)&&De.sort(y),P&&($e=Pe.parent)&&($e.value+=Pe.value)}),$}return B.sort=function(U){return arguments.length?(y=U,B):y},B.children=function(U){return arguments.length?(S=U,B):S},B.value=function(U){return arguments.length?(P=U,B):P},B.revalue=function(U){return P&&(nf(U,function(Z){Z.children&&(Z.value=0)}),vs(U,function(Z){var $;Z.children||(Z.value=+P.call(B,Z,Z.depth)||0),($=Z.parent)&&($.value+=Z.value)})),U},B};function Sl(y,S){return e.rebind(y,S,"sort","children","value"),y.nodes=y,y.links=bp,y}function nf(y,S){for(var P=[y];(y=P.pop())!=null;)if(S(y),(U=y.children)&&(B=U.length))for(var B,U;--B>=0;)P.push(U[B])}function vs(y,S){for(var P=[y],B=[];(y=P.pop())!=null;)if(B.push(y),($=y.children)&&(Z=$.length))for(var U=-1,Z,$;++U<Z;)P.push($[U]);for(;(y=B.pop())!=null;)S(y)}function _p(y){return y.children}function xp(y){return y.value}function of(y,S){return S.value-y.value}function bp(y){return e.merge(y.map(function(S){return(S.children||[]).map(function(P){return{source:S,target:P}})}))}e.layout.partition=function(){var y=e.layout.hierarchy(),S=[1,1];function P(Z,$,X,ae){var ye=Z.children;if(Z.x=$,Z.y=Z.depth*ae,Z.dx=X,Z.dy=ae,ye&&(Pe=ye.length)){var xe=-1,Pe,De,$e;for(X=Z.value?X/Z.value:0;++xe<Pe;)P(De=ye[xe],$,$e=De.value*X,ae),$+=$e}}function B(Z){var $=Z.children,X=0;if($&&(ye=$.length))for(var ae=-1,ye;++ae<ye;)X=Math.max(X,B($[ae]));return 1+X}function U(Z,$){var X=y.call(this,Z,$);return P(X[0],0,S[0],S[1]/B(X[0])),X}return U.size=function(Z){return arguments.length?(S=Z,U):S},Sl(U,y)},e.layout.pie=function(){var y=Number,S=wp,P=0,B=mr,U=0;function Z($){var X=$.length,ae=$.map(function(ct,nt){return+y.call(Z,ct,nt)}),ye=+(typeof P=="function"?P.apply(this,arguments):P),xe=(typeof B=="function"?B.apply(this,arguments):B)-ye,Pe=Math.min(Math.abs(xe)/X,+(typeof U=="function"?U.apply(this,arguments):U)),De=Pe*(xe<0?-1:1),$e=e.sum(ae),ot=$e?(xe-X*De)/$e:0,Ie=e.range(X),He=[],Qe;return S!=null&&Ie.sort(S===wp?function(ct,nt){return ae[nt]-ae[ct]}:function(ct,nt){return S($[ct],$[nt])}),Ie.forEach(function(ct){He[ct]={data:$[ct],value:Qe=ae[ct],startAngle:ye,endAngle:ye+=Qe*ot+De,padAngle:Pe}}),He}return Z.value=function($){return arguments.length?(y=$,Z):y},Z.sort=function($){return arguments.length?(S=$,Z):S},Z.startAngle=function($){return arguments.length?(P=$,Z):P},Z.endAngle=function($){return arguments.length?(B=$,Z):B},Z.padAngle=function($){return arguments.length?(U=$,Z):U},Z};var wp={};e.layout.stack=function(){var y=Te,S=tc,P=Kc,B=Pv,U=Xm,Z=jm;function $(X,ae){if(!(ot=X.length))return X;var ye=X.map(function(ct,nt){return y.call($,ct,nt)}),xe=ye.map(function(ct){return ct.map(function(nt,je){return[U.call($,nt,je),Z.call($,nt,je)]})}),Pe=S.call($,xe,ae);ye=e.permute(ye,Pe),xe=e.permute(xe,Pe);var De=P.call($,xe,ae),$e=ye[0].length,ot,Ie,He,Qe;for(He=0;He<$e;++He)for(B.call($,ye[0][He],Qe=De[He],xe[0][He][1]),Ie=1;Ie<ot;++Ie)B.call($,ye[Ie][He],Qe+=xe[Ie-1][He][1],xe[Ie][He][1]);return X}return $.values=function(X){return arguments.length?(y=X,$):y},$.order=function(X){return arguments.length?(S=typeof X=="function"?X:zv.get(X)||tc,$):S},$.offset=function(X){return arguments.length?(P=typeof X=="function"?X:Iv.get(X)||Kc,$):P},$.x=function(X){return arguments.length?(U=X,$):U},$.y=function(X){return arguments.length?(Z=X,$):Z},$.out=function(X){return arguments.length?(B=X,$):B},$};function Xm(y){return y.x}function jm(y){return y.y}function Pv(y,S,P){y.y0=S,y.y=P}var zv=e.map({"inside-out":function(y){var S=y.length,P,B,U=y.map(Tp),Z=y.map(qi),$=e.range(S).sort(function(Pe,De){return U[Pe]-U[De]}),X=0,ae=0,ye=[],xe=[];for(P=0;P<S;++P)B=$[P],X<ae?(X+=Z[B],ye.push(B)):(ae+=Z[B],xe.push(B));return xe.reverse().concat(ye)},reverse:function(y){return e.range(y.length).reverse()},default:tc}),Iv=e.map({silhouette:function(y){var S=y.length,P=y[0].length,B=[],U=0,Z,$,X,ae=[];for($=0;$<P;++$){for(Z=0,X=0;Z<S;Z++)X+=y[Z][$][1];X>U&&(U=X),B.push(X)}for($=0;$<P;++$)ae[$]=(U-B[$])/2;return ae},wiggle:function(y){var S=y.length,P=y[0],B=P.length,U,Z,$,X,ae,ye,xe,Pe,De,$e=[];for($e[0]=Pe=De=0,Z=1;Z<B;++Z){for(U=0,X=0;U<S;++U)X+=y[U][Z][1];for(U=0,ae=0,xe=P[Z][0]-P[Z-1][0];U<S;++U){for($=0,ye=(y[U][Z][1]-y[U][Z-1][1])/(2*xe);$<U;++$)ye+=(y[$][Z][1]-y[$][Z-1][1])/xe;ae+=ye*y[U][Z][1]}$e[Z]=Pe-=X?ae/X*xe:0,Pe<De&&(De=Pe)}for(Z=0;Z<B;++Z)$e[Z]-=De;return $e},expand:function(y){var S=y.length,P=y[0].length,B=1/S,U,Z,$,X=[];for(Z=0;Z<P;++Z){for(U=0,$=0;U<S;U++)$+=y[U][Z][1];if($)for(U=0;U<S;U++)y[U][Z][1]/=$;else for(U=0;U<S;U++)y[U][Z][1]=B}for(Z=0;Z<P;++Z)X[Z]=0;return X},zero:Kc});function tc(y){return e.range(y.length)}function Kc(y){for(var S=-1,P=y[0].length,B=[];++S<P;)B[S]=0;return B}function Tp(y){for(var S=1,P=0,B=y[0][1],U,Z=y.length;S<Z;++S)(U=y[S][1])>B&&(P=S,B=U);return P}function qi(y){return y.reduce(Jm,0)}function Jm(y,S){return y+S[1]}e.layout.histogram=function(){var y=!0,S=Number,P=Ap,B=Qc;function U(Z,De){for(var X=[],ae=Z.map(S,this),ye=P.call(this,ae,De),xe=B.call(this,ye,ae,De),Pe,De=-1,$e=ae.length,ot=xe.length-1,Ie=y?1:1/$e,He;++De<ot;)Pe=X[De]=[],Pe.dx=xe[De+1]-(Pe.x=xe[De]),Pe.y=0;if(ot>0)for(De=-1;++De<$e;)He=ae[De],He>=ye[0]&&He<=ye[1]&&(Pe=X[e.bisect(xe,He,1,ot)-1],Pe.y+=Ie,Pe.push(Z[De]));return X}return U.value=function(Z){return arguments.length?(S=Z,U):S},U.range=function(Z){return arguments.length?(P=fa(Z),U):P},U.bins=function(Z){return arguments.length?(B=typeof Z=="number"?function($){return Rv($,Z)}:fa(Z),U):B},U.frequency=function(Z){return arguments.length?(y=!!Z,U):y},U};function Qc(y,S){return Rv(y,Math.ceil(Math.log(S.length)/Math.LN2+1))}function Rv(y,S){for(var P=-1,B=+y[0],U=(y[1]-B)/S,Z=[];++P<=S;)Z[P]=U*P+B;return Z}function Ap(y){return[e.min(y),e.max(y)]}e.layout.pack=function(){var y=e.layout.hierarchy().sort(sf),S=0,P=[1,1],B;function U(Z,$){var X=y.call(this,Z,$),ae=X[0],ye=P[0],xe=P[1],Pe=B==null?Math.sqrt:typeof B=="function"?B:function(){return B};if(ae.x=ae.y=0,vs(ae,function($e){$e.r=+Pe($e.value)}),vs(ae,rc),S){var De=S*(B?1:Math.max(2*ae.r/ye,2*ae.r/xe))/2;vs(ae,function($e){$e.r+=De}),vs(ae,rc),vs(ae,function($e){$e.r-=De})}return Cl(ae,ye/2,xe/2,B?1:1/Math.max(2*ae.r/ye,2*ae.r/xe)),X}return U.size=function(Z){return arguments.length?(P=Z,U):P},U.radius=function(Z){return arguments.length?(B=Z==null||typeof Z=="function"?Z:+Z,U):B},U.padding=function(Z){return arguments.length?(S=+Z,U):S},Sl(U,y)};function sf(y,S){return y.value-S.value}function bu(y,S){var P=y._pack_next;y._pack_next=S,S._pack_prev=y,S._pack_next=P,P._pack_prev=S}function Fv(y,S){y._pack_next=S,S._pack_prev=y}function bn(y,S){var P=S.x-y.x,B=S.y-y.y,U=y.r+S.r;return .999*U*U>P*P+B*B}function rc(y){if(!(S=y.children)||!(De=S.length))return;var S,P=1/0,B=-1/0,U=1/0,Z=-1/0,$,X,ae,ye,xe,Pe,De;function $e(je){P=Math.min(je.x-je.r,P),B=Math.max(je.x+je.r,B),U=Math.min(je.y-je.r,U),Z=Math.max(je.y+je.r,Z)}if(S.forEach(Js),$=S[0],$.x=-$.r,$.y=0,$e($),De>1&&(X=S[1],X.x=X.r,X.y=0,$e(X),De>2))for(ae=S[2],El($,X,ae),$e(ae),bu($,ae),$._pack_prev=ae,bu(ae,X),X=$._pack_next,ye=3;ye<De;ye++){El($,X,ae=S[ye]);var ot=0,Ie=1,He=1;for(xe=X._pack_next;xe!==X;xe=xe._pack_next,Ie++)if(bn(xe,ae)){ot=1;break}if(ot==1)for(Pe=$._pack_prev;Pe!==xe._pack_prev&&!bn(Pe,ae);Pe=Pe._pack_prev,He++);ot?(Ie<He||Ie==He&&X.r<$.r?Fv($,X=xe):Fv($=Pe,X),ye--):(bu($,ae),X=ae,$e(ae))}var Qe=(P+B)/2,ct=(U+Z)/2,nt=0;for(ye=0;ye<De;ye++)ae=S[ye],ae.x-=Qe,ae.y-=ct,nt=Math.max(nt,ae.r+Math.sqrt(ae.x*ae.x+ae.y*ae.y));y.r=nt,S.forEach(kl)}function Js(y){y._pack_next=y._pack_prev=y}function kl(y){delete y._pack_next,delete y._pack_prev}function Cl(y,S,P,B){var U=y.children;if(y.x=S+=B*y.x,y.y=P+=B*y.y,y.r*=B,U)for(var Z=-1,$=U.length;++Z<$;)Cl(U[Z],S,P,B)}function El(y,S,P){var B=y.r+P.r,U=S.x-y.x,Z=S.y-y.y;if(B&&(U||Z)){var $=S.r+P.r,X=U*U+Z*Z;$*=$,B*=B;var ae=.5+(B-$)/(2*X),ye=Math.sqrt(Math.max(0,2*$*(B+X)-(B-=X)*B-$*$))/(2*X);P.x=y.x+ae*U+ye*Z,P.y=y.y+ae*Z-ye*U}else P.x=y.x+B,P.y=y.y}e.layout.tree=function(){var y=e.layout.hierarchy().sort(null).value(null),S=Ks,P=[1,1],B=null;function U(xe,Pe){var De=y.call(this,xe,Pe),$e=De[0],ot=Z($e);if(vs(ot,$),ot.parent.m=-ot.z,nf(ot,X),B)nf($e,ye);else{var Ie=$e,He=$e,Qe=$e;nf($e,function(Vt){Vt.x<Ie.x&&(Ie=Vt),Vt.x>He.x&&(He=Vt),Vt.depth>Qe.depth&&(Qe=Vt)});var ct=S(Ie,He)/2-Ie.x,nt=P[0]/(He.x+S(He,Ie)/2+ct),je=P[1]/(Qe.depth||1);nf($e,function(Vt){Vt.x=(Vt.x+ct)*nt,Vt.y=Vt.depth*je})}return De}function Z(xe){for(var Pe={A:null,children:[xe]},De=[Pe],$e;($e=De.pop())!=null;)for(var ot=$e.children,Ie,He=0,Qe=ot.length;He<Qe;++He)De.push((ot[He]=Ie={_:ot[He],parent:$e,children:(Ie=ot[He].children)&&Ie.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:He}).a=Ie);return Pe.children[0]}function $(xe){var Pe=xe.children,De=xe.parent.children,$e=xe.i?De[xe.i-1]:null;if(Pe.length){Mp(xe);var ot=(Pe[0].z+Pe[Pe.length-1].z)/2;$e?(xe.z=$e.z+S(xe._,$e._),xe.m=xe.z-ot):xe.z=ot}else $e&&(xe.z=$e.z+S(xe._,$e._));xe.parent.A=ae(xe,$e,xe.parent.A||De[0])}function X(xe){xe._.x=xe.z+xe.parent.m,xe.m+=xe.parent.m}function ae(xe,Pe,De){if(Pe){for(var $e=xe,ot=xe,Ie=Pe,He=$e.parent.children[0],Qe=$e.m,ct=ot.m,nt=Ie.m,je=He.m,Vt;Ie=ks(Ie),$e=Ss($e),Ie&&$e;)He=Ss(He),ot=ks(ot),ot.a=xe,Vt=Ie.z+nt-$e.z-Qe+S(Ie._,$e._),Vt>0&&(Ll(Km(Ie,xe,De),xe,Vt),Qe+=Vt,ct+=Vt),nt+=Ie.m,Qe+=$e.m,je+=He.m,ct+=ot.m;Ie&&!ks(ot)&&(ot.t=Ie,ot.m+=nt-ct),$e&&!Ss(He)&&(He.t=$e,He.m+=Qe-je,De=xe)}return De}function ye(xe){xe.x*=P[0],xe.y=xe.depth*P[1]}return U.separation=function(xe){return arguments.length?(S=xe,U):S},U.size=function(xe){return arguments.length?(B=(P=xe)==null?ye:null,U):B?null:P},U.nodeSize=function(xe){return arguments.length?(B=(P=xe)==null?null:ye,U):B?P:null},Sl(U,y)};function Ks(y,S){return y.parent==S.parent?1:2}function Ss(y){var S=y.children;return S.length?S[0]:y.t}function ks(y){var S=y.children,P;return(P=S.length)?S[P-1]:y.t}function Ll(y,S,P){var B=P/(S.i-y.i);S.c-=B,S.s+=P,y.c+=B,S.z+=P,S.m+=P}function Mp(y){for(var S=0,P=0,B=y.children,U=B.length,Z;--U>=0;)Z=B[U],Z.z+=S,Z.m+=S,S+=Z.s+(P+=Z.c)}function Km(y,S,P){return y.a.parent===S.parent?y.a:P}e.layout.cluster=function(){var y=e.layout.hierarchy().sort(null).value(null),S=Ks,P=[1,1],B=!1;function U(Z,$){var X=y.call(this,Z,$),ae=X[0],ye,xe=0;vs(ae,function(Ie){var He=Ie.children;He&&He.length?(Ie.x=$m(He),Ie.y=Qm(He)):(Ie.x=ye?xe+=S(Ie,ye):0,Ie.y=0,ye=Ie)});var Pe=Sp(ae),De=kp(ae),$e=Pe.x-S(Pe,De)/2,ot=De.x+S(De,Pe)/2;return vs(ae,B?function(Ie){Ie.x=(Ie.x-ae.x)*P[0],Ie.y=(ae.y-Ie.y)*P[1]}:function(Ie){Ie.x=(Ie.x-$e)/(ot-$e)*P[0],Ie.y=(1-(ae.y?Ie.y/ae.y:1))*P[1]}),X}return U.separation=function(Z){return arguments.length?(S=Z,U):S},U.size=function(Z){return arguments.length?(B=(P=Z)==null,U):B?null:P},U.nodeSize=function(Z){return arguments.length?(B=(P=Z)!=null,U):B?P:null},Sl(U,y)};function Qm(y){return 1+e.max(y,function(S){return S.y})}function $m(y){return y.reduce(function(S,P){return S+P.x},0)/y.length}function Sp(y){var S=y.children;return S&&S.length?Sp(S[0]):y}function kp(y){var S=y.children,P;return S&&(P=S.length)?kp(S[P-1]):y}e.layout.treemap=function(){var y=e.layout.hierarchy(),S=Math.round,P=[1,1],B=null,U=qv,Z=!1,$,X="squarify",ae=.5*(1+Math.sqrt(5));function ye(Ie,He){for(var Qe=-1,ct=Ie.length,nt,je;++Qe<ct;)je=(nt=Ie[Qe]).value*(He<0?0:He),nt.area=isNaN(je)||je<=0?0:je}function xe(Ie){var He=Ie.children;if(He&&He.length){var Qe=U(Ie),ct=[],nt=He.slice(),je,Vt=1/0,or,hr=X==="slice"?Qe.dx:X==="dice"?Qe.dy:X==="slice-dice"?Ie.depth&1?Qe.dy:Qe.dx:Math.min(Qe.dx,Qe.dy),fr;for(ye(nt,Qe.dx*Qe.dy/Ie.value),ct.area=0;(fr=nt.length)>0;)ct.push(je=nt[fr-1]),ct.area+=je.area,X!=="squarify"||(or=De(ct,hr))<=Vt?(nt.pop(),Vt=or):(ct.area-=ct.pop().area,$e(ct,hr,Qe,!1),hr=Math.min(Qe.dx,Qe.dy),ct.length=ct.area=0,Vt=1/0);ct.length&&($e(ct,hr,Qe,!0),ct.length=ct.area=0),He.forEach(xe)}}function Pe(Ie){var He=Ie.children;if(He&&He.length){var Qe=U(Ie),ct=He.slice(),nt,je=[];for(ye(ct,Qe.dx*Qe.dy/Ie.value),je.area=0;nt=ct.pop();)je.push(nt),je.area+=nt.area,nt.z!=null&&($e(je,nt.z?Qe.dx:Qe.dy,Qe,!ct.length),je.length=je.area=0);He.forEach(Pe)}}function De(Ie,He){for(var Qe=Ie.area,ct,nt=0,je=1/0,Vt=-1,or=Ie.length;++Vt<or;)(ct=Ie[Vt].area)&&(ct<je&&(je=ct),ct>nt&&(nt=ct));return Qe*=Qe,He*=He,Qe?Math.max(He*nt*ae/Qe,Qe/(He*je*ae)):1/0}function $e(Ie,He,Qe,ct){var nt=-1,je=Ie.length,Vt=Qe.x,or=Qe.y,hr=He?S(Ie.area/He):0,fr;if(He==Qe.dx){for((ct||hr>Qe.dy)&&(hr=Qe.dy);++nt<je;)fr=Ie[nt],fr.x=Vt,fr.y=or,fr.dy=hr,Vt+=fr.dx=Math.min(Qe.x+Qe.dx-Vt,hr?S(fr.area/hr):0);fr.z=!0,fr.dx+=Qe.x+Qe.dx-Vt,Qe.y+=hr,Qe.dy-=hr}else{for((ct||hr>Qe.dx)&&(hr=Qe.dx);++nt<je;)fr=Ie[nt],fr.x=Vt,fr.y=or,fr.dx=hr,or+=fr.dy=Math.min(Qe.y+Qe.dy-or,hr?S(fr.area/hr):0);fr.z=!1,fr.dy+=Qe.y+Qe.dy-or,Qe.x+=hr,Qe.dx-=hr}}function ot(Ie){var He=$||y(Ie),Qe=He[0];return Qe.x=Qe.y=0,Qe.value?(Qe.dx=P[0],Qe.dy=P[1]):Qe.dx=Qe.dy=0,$&&y.revalue(Qe),ye([Qe],Qe.dx*Qe.dy/Qe.value),($?Pe:xe)(Qe),Z&&($=He),He}return ot.size=function(Ie){return arguments.length?(P=Ie,ot):P},ot.padding=function(Ie){if(!arguments.length)return B;function He(nt){var je=Ie.call(ot,nt,nt.depth);return je==null?qv(nt):Nv(nt,typeof je=="number"?[je,je,je,je]:je)}function Qe(nt){return Nv(nt,Ie)}var ct;return U=(B=Ie)==null?qv:(ct=typeof Ie)=="function"?He:(ct==="number"&&(Ie=[Ie,Ie,Ie,Ie]),Qe),ot},ot.round=function(Ie){return arguments.length?(S=Ie?Math.round:Number,ot):S!=Number},ot.sticky=function(Ie){return arguments.length?(Z=Ie,$=null,ot):Z},ot.ratio=function(Ie){return arguments.length?(ae=Ie,ot):ae},ot.mode=function(Ie){return arguments.length?(X=Ie+"",ot):X},Sl(ot,y)};function qv(y){return{x:y.x,y:y.y,dx:y.dx,dy:y.dy}}function Nv(y,S){var P=y.x+S[3],B=y.y+S[0],U=y.dx-S[1]-S[3],Z=y.dy-S[0]-S[2];return U<0&&(P+=U/2,U=0),Z<0&&(B+=Z/2,Z=0),{x:P,y:B,dx:U,dy:Z}}e.random={normal:function(y,S){var P=arguments.length;return P<2&&(S=1),P<1&&(y=0),function(){var B,U,Z;do B=Math.random()*2-1,U=Math.random()*2-1,Z=B*B+U*U;while(!Z||Z>1);return y+S*B*Math.sqrt(-2*Math.log(Z)/Z)}},logNormal:function(){var y=e.random.normal.apply(e,arguments);return function(){return Math.exp(y())}},bates:function(y){var S=e.random.irwinHall(y);return function(){return S()/y}},irwinHall:function(y){return function(){for(var S=0,P=0;P<y;P++)S+=Math.random();return S}}},e.scale={};function ac(y){var S=y[0],P=y[y.length-1];return S<P?[S,P]:[P,S]}function $c(y){return y.rangeExtent?y.rangeExtent():ac(y.range())}function Cp(y,S,P,B){var U=P(y[0],y[1]),Z=B(S[0],S[1]);return function($){return Z(U($))}}function Bv(y,S){var P=0,B=y.length-1,U=y[P],Z=y[B],$;return Z<U&&($=P,P=B,B=$,$=U,U=Z,Z=$),y[P]=S.floor(U),y[B]=S.ceil(Z),y}function Ep(y){return y?{floor:function(S){return Math.floor(S/y)*y},ceil:function(S){return Math.ceil(S/y)*y}}:lf}var lf={floor:Te,ceil:Te};function ey(y,S,P,B){var U=[],Z=[],$=0,X=Math.min(y.length,S.length)-1;for(y[X]<y[0]&&(y=y.slice().reverse(),S=S.slice().reverse());++$<=X;)U.push(P(y[$-1],y[$])),Z.push(B(S[$-1],S[$]));return function(ae){var ye=e.bisect(y,ae,1,X)-1;return Z[ye](U[ye](ae))}}e.scale.linear=function(){return Lp([0,1],[0,1],ln,!1)};function Lp(y,S,P,B){var U,Z;function $(){var ae=Math.min(y.length,S.length)>2?ey:Cp,ye=B?hs:Zm;return U=ae(y,S,ye,P),Z=ae(S,y,ye,ln),X}function X(ae){return U(ae)}return X.invert=function(ae){return Z(ae)},X.domain=function(ae){return arguments.length?(y=ae.map(Number),$()):y},X.range=function(ae){return arguments.length?(S=ae,$()):S},X.rangeRound=function(ae){return X.range(ae).interpolate(Cv)},X.clamp=function(ae){return arguments.length?(B=ae,$()):B},X.interpolate=function(ae){return arguments.length?(P=ae,$()):P},X.ticks=function(ae){return Uv(y,ae)},X.tickFormat=function(ae,ye){return d3_scale_linearTickFormat(y,ae,ye)},X.nice=function(ae){return Pp(y,ae),$()},X.copy=function(){return Lp(y,S,P,B)},$()}function Dp(y,S){return e.rebind(y,S,"range","rangeRound","interpolate","clamp")}function Pp(y,S){return Bv(y,Ep(Ov(y,S)[2])),Bv(y,Ep(Ov(y,S)[2])),y}function Ov(y,S){S==null&&(S=10);var P=ac(y),B=P[1]-P[0],U=Math.pow(10,Math.floor(Math.log(B/S)/Math.LN10)),Z=S/B*U;return Z<=.15?U*=10:Z<=.35?U*=5:Z<=.75&&(U*=2),P[0]=Math.ceil(P[0]/U)*U,P[1]=Math.floor(P[1]/U)*U+U*.5,P[2]=U,P}function Uv(y,S){return e.range.apply(e,Ov(y,S))}var wu={s:1,g:1,p:1,r:1,e:1};function Dl(y){return-Math.floor(Math.log(y)/Math.LN10+.01)}function ic(y,S){var P=Dl(S[2]);return y in wu?Math.abs(P-Dl(Math.max(I(S[0]),I(S[1]))))+ +(y!=="e"):P-(y==="%")*2}e.scale.log=function(){return Vv(e.scale.linear().domain([0,1]),10,!0,[1,10])};function Vv(y,S,P,B){function U(X){return(P?Math.log(X<0?0:X):-Math.log(X>0?0:-X))/Math.log(S)}function Z(X){return P?Math.pow(S,X):-Math.pow(S,-X)}function $(X){return y(U(X))}return $.invert=function(X){return Z(y.invert(X))},$.domain=function(X){return arguments.length?(P=X[0]>=0,y.domain((B=X.map(Number)).map(U)),$):B},$.base=function(X){return arguments.length?(S=+X,y.domain(B.map(U)),$):S},$.nice=function(){var X=Bv(B.map(U),P?Math:eh);return y.domain(X),B=X.map(Z),$},$.ticks=function(){var X=ac(B),ae=[],ye=X[0],xe=X[1],Pe=Math.floor(U(ye)),De=Math.ceil(U(xe)),$e=S%1?2:S;if(isFinite(De-Pe)){if(P){for(;Pe<De;Pe++)for(var ot=1;ot<$e;ot++)ae.push(Z(Pe)*ot);ae.push(Z(Pe))}else for(ae.push(Z(Pe));Pe++<De;)for(var ot=$e-1;ot>0;ot--)ae.push(Z(Pe)*ot);for(Pe=0;ae[Pe]<ye;Pe++);for(De=ae.length;ae[De-1]>xe;De--);ae=ae.slice(Pe,De)}return ae},$.copy=function(){return Vv(y.copy(),S,P,B)},Dp($,y)}var eh={floor:function(y){return-Math.ceil(-y)},ceil:function(y){return-Math.floor(-y)}};e.scale.pow=function(){return th(e.scale.linear(),1,[0,1])};function th(y,S,P){var B=rh(S),U=rh(1/S);function Z($){return y(B($))}return Z.invert=function($){return U(y.invert($))},Z.domain=function($){return arguments.length?(y.domain((P=$.map(Number)).map(B)),Z):P},Z.ticks=function($){return Uv(P,$)},Z.tickFormat=function($,X){return d3_scale_linearTickFormat(P,$,X)},Z.nice=function($){return Z.domain(Pp(P,$))},Z.exponent=function($){return arguments.length?(B=rh(S=$),U=rh(1/S),y.domain(P.map(B)),Z):S},Z.copy=function(){return th(y.copy(),S,P)},Dp(Z,y)}function rh(y){return function(S){return S<0?-Math.pow(-S,y):Math.pow(S,y)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return Pl([],{t:"range",a:[[]]})};function Pl(y,S){var P,B,U;function Z(X){return B[((P.get(X)||(S.t==="range"?P.set(X,y.push(X)):NaN))-1)%B.length]}function $(X,ae){return e.range(y.length).map(function(ye){return X+ae*ye})}return Z.domain=function(X){if(!arguments.length)return y;y=[],P=new z;for(var ae=-1,ye=X.length,xe;++ae<ye;)P.has(xe=X[ae])||P.set(xe,y.push(xe));return Z[S.t].apply(Z,S.a)},Z.range=function(X){return arguments.length?(B=X,U=0,S={t:"range",a:arguments},Z):B},Z.rangePoints=function(X,ae){arguments.length<2&&(ae=0);var ye=X[0],xe=X[1],Pe=y.length<2?(ye=(ye+xe)/2,0):(xe-ye)/(y.length-1+ae);return B=$(ye+Pe*ae/2,Pe),U=0,S={t:"rangePoints",a:arguments},Z},Z.rangeRoundPoints=function(X,ae){arguments.length<2&&(ae=0);var ye=X[0],xe=X[1],Pe=y.length<2?(ye=xe=Math.round((ye+xe)/2),0):(xe-ye)/(y.length-1+ae)|0;return B=$(ye+Math.round(Pe*ae/2+(xe-ye-(y.length-1+ae)*Pe)/2),Pe),U=0,S={t:"rangeRoundPoints",a:arguments},Z},Z.rangeBands=function(X,ae,ye){arguments.length<2&&(ae=0),arguments.length<3&&(ye=ae);var xe=X[1]<X[0],Pe=X[xe-0],De=X[1-xe],$e=(De-Pe)/(y.length-ae+2*ye);return B=$(Pe+$e*ye,$e),xe&&B.reverse(),U=$e*(1-ae),S={t:"rangeBands",a:arguments},Z},Z.rangeRoundBands=function(X,ae,ye){arguments.length<2&&(ae=0),arguments.length<3&&(ye=ae);var xe=X[1]<X[0],Pe=X[xe-0],De=X[1-xe],$e=Math.floor((De-Pe)/(y.length-ae+2*ye));return B=$(Pe+Math.round((De-Pe-(y.length-ae)*$e)/2),$e),xe&&B.reverse(),U=Math.round($e*(1-ae)),S={t:"rangeRoundBands",a:arguments},Z},Z.rangeBand=function(){return U},Z.rangeExtent=function(){return ac(S.a[0])},Z.copy=function(){return Pl(y,S)},Z.domain(y)}e.scale.category10=function(){return e.scale.ordinal().range(ah)},e.scale.category20=function(){return e.scale.ordinal().range(Tu)},e.scale.category20b=function(){return e.scale.ordinal().range(uf)},e.scale.category20c=function(){return e.scale.ordinal().range(zp)};var ah=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ri),Tu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ri),uf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ri),zp=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ri);e.scale.quantile=function(){return ih([],[])};function ih(y,S){var P;function B(){var Z=0,$=S.length;for(P=[];++Z<$;)P[Z-1]=e.quantile(y,Z/$);return U}function U(Z){if(!isNaN(Z=+Z))return S[e.bisect(P,Z)]}return U.domain=function(Z){return arguments.length?(y=Z.map(T).filter(M).sort(_),B()):y},U.range=function(Z){return arguments.length?(S=Z,B()):S},U.quantiles=function(){return P},U.invertExtent=function(Z){return Z=S.indexOf(Z),Z<0?[NaN,NaN]:[Z>0?P[Z-1]:y[0],Z<P.length?P[Z]:y[y.length-1]]},U.copy=function(){return ih(y,S)},B()}e.scale.quantize=function(){return di(0,1,[0,1])};function di(y,S,P){var B,U;function Z(X){return P[Math.max(0,Math.min(U,Math.floor(B*(X-y))))]}function $(){return B=P.length/(S-y),U=P.length-1,Z}return Z.domain=function(X){return arguments.length?(y=+X[0],S=+X[X.length-1],$()):[y,S]},Z.range=function(X){return arguments.length?(P=X,$()):P},Z.invertExtent=function(X){return X=P.indexOf(X),X=X<0?NaN:X/B+y,[X,X+1/B]},Z.copy=function(){return di(y,S,P)},$()}e.scale.threshold=function(){return nc([.5],[0,1])};function nc(y,S){function P(B){if(B<=B)return S[e.bisect(y,B)]}return P.domain=function(B){return arguments.length?(y=B,P):y},P.range=function(B){return arguments.length?(S=B,P):S},P.invertExtent=function(B){return B=S.indexOf(B),[y[B-1],y[B]]},P.copy=function(){return nc(y,S)},P}e.scale.identity=function(){return Ip([0,1])};function Ip(y){function S(P){return+P}return S.invert=S,S.domain=S.range=function(P){return arguments.length?(y=P.map(S),S):y},S.ticks=function(P){return Uv(y,P)},S.tickFormat=function(P,B){return d3_scale_linearTickFormat(y,P,B)},S.copy=function(){return Ip(y)},S}e.svg={};function Rp(){return 0}e.svg.arc=function(){var y=Fp,S=qp,P=Rp,B=zl,U=Hv,Z=Np,$=ty;function X(){var ye=Math.max(0,+y.apply(this,arguments)),xe=Math.max(0,+S.apply(this,arguments)),Pe=U.apply(this,arguments)-Mr,De=Z.apply(this,arguments)-Mr,$e=Math.abs(De-Pe),ot=Pe>De?0:1;if(xe<ye&&(Ie=xe,xe=ye,ye=Ie),$e>=Ar)return ae(xe,ot)+(ye?ae(ye,1-ot):"")+"Z";var Ie,He,Qe,ct,nt=0,je=0,Vt,or,hr,fr,zr,Rr,ea,Vr,Kr=[];if((ct=(+$.apply(this,arguments)||0)/2)&&(Qe=B===zl?Math.sqrt(ye*ye+xe*xe):+B.apply(this,arguments),ot||(je*=-1),xe&&(je=vi(Qe/xe*Math.sin(ct))),ye&&(nt=vi(Qe/ye*Math.sin(ct)))),xe){Vt=xe*Math.cos(Pe+je),or=xe*Math.sin(Pe+je),hr=xe*Math.cos(De-je),fr=xe*Math.sin(De-je);var Na=Math.abs(De-Pe-2*je)<=Tt?0:1;if(je&&Il(Vt,or,hr,fr)===ot^Na){var ei=(Pe+De)/2;Vt=xe*Math.cos(ei),or=xe*Math.sin(ei),hr=fr=null}}else Vt=or=0;if(ye){zr=ye*Math.cos(De-nt),Rr=ye*Math.sin(De-nt),ea=ye*Math.cos(Pe+nt),Vr=ye*Math.sin(Pe+nt);var Qa=Math.abs(Pe-De+2*nt)<=Tt?0:1;if(nt&&Il(zr,Rr,ea,Vr)===1-ot^Qa){var jt=(Pe+De)/2;zr=ye*Math.cos(jt),Rr=ye*Math.sin(jt),ea=Vr=null}}else zr=Rr=0;if($e>Ve&&(Ie=Math.min(Math.abs(xe-ye)/2,+P.apply(this,arguments)))>.001){He=ye<xe^ot?0:1;var Jr=Ie,na=Ie;if($e<Tt){var oa=ea==null?[zr,Rr]:hr==null?[Vt,or]:Go([Vt,or],[ea,Vr],[hr,fr],[zr,Rr]),Di=Vt-oa[0],Vi=or-oa[1],en=hr-oa[0],bi=fr-oa[1],wn=1/Math.sin(Math.acos((Di*en+Vi*bi)/(Math.sqrt(Di*Di+Vi*Vi)*Math.sqrt(en*en+bi*bi)))/2),Tr=Math.sqrt(oa[0]*oa[0]+oa[1]*oa[1]);na=Math.min(Ie,(ye-Tr)/(wn-1)),Jr=Math.min(Ie,(xe-Tr)/(wn+1))}if(hr!=null){var Hr=Au(ea==null?[zr,Rr]:[ea,Vr],[Vt,or],xe,Jr,ot),Ni=Au([hr,fr],[zr,Rr],xe,Jr,ot);Ie===Jr?Kr.push("M",Hr[0],"A",Jr,",",Jr," 0 0,",He," ",Hr[1],"A",xe,",",xe," 0 ",1-ot^Il(Hr[1][0],Hr[1][1],Ni[1][0],Ni[1][1]),",",ot," ",Ni[1],"A",Jr,",",Jr," 0 0,",He," ",Ni[0]):Kr.push("M",Hr[0],"A",Jr,",",Jr," 0 1,",He," ",Ni[0])}else Kr.push("M",Vt,",",or);if(ea!=null){var Ai=Au([Vt,or],[ea,Vr],ye,-na,ot),fo=Au([zr,Rr],hr==null?[Vt,or]:[hr,fr],ye,-na,ot);Ie===na?Kr.push("L",fo[0],"A",na,",",na," 0 0,",He," ",fo[1],"A",ye,",",ye," 0 ",ot^Il(fo[1][0],fo[1][1],Ai[1][0],Ai[1][1]),",",1-ot," ",Ai[1],"A",na,",",na," 0 0,",He," ",Ai[0]):Kr.push("L",fo[0],"A",na,",",na," 0 0,",He," ",Ai[0])}else Kr.push("L",zr,",",Rr)}else Kr.push("M",Vt,",",or),hr!=null&&Kr.push("A",xe,",",xe," 0 ",Na,",",ot," ",hr,",",fr),Kr.push("L",zr,",",Rr),ea!=null&&Kr.push("A",ye,",",ye," 0 ",Qa,",",1-ot," ",ea,",",Vr);return Kr.push("Z"),Kr.join("")}function ae(ye,xe){return"M0,"+ye+"A"+ye+","+ye+" 0 1,"+xe+" 0,"+-ye+"A"+ye+","+ye+" 0 1,"+xe+" 0,"+ye}return X.innerRadius=function(ye){return arguments.length?(y=fa(ye),X):y},X.outerRadius=function(ye){return arguments.length?(S=fa(ye),X):S},X.cornerRadius=function(ye){return arguments.length?(P=fa(ye),X):P},X.padRadius=function(ye){return arguments.length?(B=ye==zl?zl:fa(ye),X):B},X.startAngle=function(ye){return arguments.length?(U=fa(ye),X):U},X.endAngle=function(ye){return arguments.length?(Z=fa(ye),X):Z},X.padAngle=function(ye){return arguments.length?($=fa(ye),X):$},X.centroid=function(){var ye=(+y.apply(this,arguments)+ +S.apply(this,arguments))/2,xe=(+U.apply(this,arguments)+ +Z.apply(this,arguments))/2-Mr;return[Math.cos(xe)*ye,Math.sin(xe)*ye]},X};var zl="auto";function Fp(y){return y.innerRadius}function qp(y){return y.outerRadius}function Hv(y){return y.startAngle}function Np(y){return y.endAngle}function ty(y){return y&&y.padAngle}function Il(y,S,P,B){return(y-P)*S-(S-B)*y>0?0:1}function Au(y,S,P,B,U){var Z=y[0]-S[0],$=y[1]-S[1],X=(U?B:-B)/Math.sqrt(Z*Z+$*$),ae=X*$,ye=-X*Z,xe=y[0]+ae,Pe=y[1]+ye,De=S[0]+ae,$e=S[1]+ye,ot=(xe+De)/2,Ie=(Pe+$e)/2,He=De-xe,Qe=$e-Pe,ct=He*He+Qe*Qe,nt=P-B,je=xe*$e-De*Pe,Vt=(Qe<0?-1:1)*Math.sqrt(Math.max(0,nt*nt*ct-je*je)),or=(je*Qe-He*Vt)/ct,hr=(-je*He-Qe*Vt)/ct,fr=(je*Qe+He*Vt)/ct,zr=(-je*He+Qe*Vt)/ct,Rr=or-ot,ea=hr-Ie,Vr=fr-ot,Kr=zr-Ie;return Rr*Rr+ea*ea>Vr*Vr+Kr*Kr&&(or=fr,hr=zr),[[or-ae,hr-ye],[or*P/nt,hr*P/nt]]}function oc(){return!0}function Cs(y){var S=pu,P=ml,B=oc,U=jo,Z=U.key,$=.7;function X(ae){var ye=[],xe=[],Pe=-1,De=ae.length,$e,ot=fa(S),Ie=fa(P);function He(){ye.push("M",U(y(xe),$))}for(;++Pe<De;)B.call(this,$e=ae[Pe],Pe)?xe.push([+ot.call(this,$e,Pe),+Ie.call(this,$e,Pe)]):xe.length&&(He(),xe=[]);return xe.length&&He(),ye.length?ye.join(""):null}return X.x=function(ae){return arguments.length?(S=ae,X):S},X.y=function(ae){return arguments.length?(P=ae,X):P},X.defined=function(ae){return arguments.length?(B=ae,X):B},X.interpolate=function(ae){return arguments.length?(typeof ae=="function"?Z=U=ae:Z=(U=Es.get(ae)||jo).key,X):Z},X.tension=function(ae){return arguments.length?($=ae,X):$},X}e.svg.line=function(){return Cs(Te)};var Es=e.map({linear:jo,"linear-closed":ff,step:ry,"step-before":cf,"step-after":Gv,basis:Mu,"basis-open":iy,"basis-closed":ny,bundle:oh,cardinal:Zv,"cardinal-open":ay,"cardinal-closed":ds,monotone:Op});Es.forEach(function(y,S){S.key=y,S.closed=/-closed$/.test(y)});function jo(y){return y.length>1?y.join("L"):y+"Z"}function ff(y){return y.join("L")+"Z"}function ry(y){for(var S=0,P=y.length,B=y[0],U=[B[0],",",B[1]];++S<P;)U.push("H",(B[0]+(B=y[S])[0])/2,"V",B[1]);return P>1&&U.push("H",B[0]),U.join("")}function cf(y){for(var S=0,P=y.length,B=y[0],U=[B[0],",",B[1]];++S<P;)U.push("V",(B=y[S])[1],"H",B[0]);return U.join("")}function Gv(y){for(var S=0,P=y.length,B=y[0],U=[B[0],",",B[1]];++S<P;)U.push("H",(B=y[S])[0],"V",B[1]);return U.join("")}function ay(y,S){return y.length<4?jo(y):y[1]+hf(y.slice(1,-1),nh(y,S))}function ds(y,S){return y.length<3?ff(y):y[0]+hf((y.push(y[0]),y),nh([y[y.length-2]].concat(y,[y[1]]),S))}function Zv(y,S){return y.length<3?jo(y):y[0]+hf(y,nh(y,S))}function hf(y,S){if(S.length<1||y.length!=S.length&&y.length!=S.length+2)return jo(y);var P=y.length!=S.length,B="",U=y[0],Z=y[1],$=S[0],X=$,ae=1;if(P&&(B+="Q"+(Z[0]-$[0]*2/3)+","+(Z[1]-$[1]*2/3)+","+Z[0]+","+Z[1],U=y[1],ae=2),S.length>1){X=S[1],Z=y[ae],ae++,B+="C"+(U[0]+$[0])+","+(U[1]+$[1])+","+(Z[0]-X[0])+","+(Z[1]-X[1])+","+Z[0]+","+Z[1];for(var ye=2;ye<S.length;ye++,ae++)Z=y[ae],X=S[ye],B+="S"+(Z[0]-X[0])+","+(Z[1]-X[1])+","+Z[0]+","+Z[1]}if(P){var xe=y[ae];B+="Q"+(Z[0]+X[0]*2/3)+","+(Z[1]+X[1]*2/3)+","+xe[0]+","+xe[1]}return B}function nh(y,S){for(var P=[],B=(1-S)/2,U,Z=y[0],$=y[1],X=1,ae=y.length;++X<ae;)U=Z,Z=$,$=y[X],P.push([B*($[0]-U[0]),B*($[1]-U[1])]);return P}function Mu(y){if(y.length<3)return jo(y);var S=1,P=y.length,B=y[0],U=B[0],Z=B[1],$=[U,U,U,(B=y[1])[0]],X=[Z,Z,Z,B[1]],ae=[U,",",Z,"L",go(Rl,$),",",go(Rl,X)];for(y.push(y[P-1]);++S<=P;)B=y[S],$.shift(),$.push(B[0]),X.shift(),X.push(B[1]),df(ae,$,X);return y.pop(),ae.push("L",B),ae.join("")}function iy(y){if(y.length<4)return jo(y);for(var S=[],P=-1,B=y.length,U,Z=[0],$=[0];++P<3;)U=y[P],Z.push(U[0]),$.push(U[1]);for(S.push(go(Rl,Z)+","+go(Rl,$)),--P;++P<B;)U=y[P],Z.shift(),Z.push(U[0]),$.shift(),$.push(U[1]),df(S,Z,$);return S.join("")}function ny(y){for(var S,P=-1,B=y.length,U=B+4,Z,$=[],X=[];++P<4;)Z=y[P%B],$.push(Z[0]),X.push(Z[1]);for(S=[go(Rl,$),",",go(Rl,X)],--P;++P<U;)Z=y[P%B],$.shift(),$.push(Z[0]),X.shift(),X.push(Z[1]),df(S,$,X);return S.join("")}function oh(y,S){var P=y.length-1;if(P)for(var B=y[0][0],U=y[0][1],Z=y[P][0]-B,$=y[P][1]-U,X=-1,ae,ye;++X<=P;)ae=y[X],ye=X/P,ae[0]=S*ae[0]+(1-S)*(B+ye*Z),ae[1]=S*ae[1]+(1-S)*(U+ye*$);return Mu(y)}function go(y,S){return y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3]}var Bp=[0,2/3,1/3,0],vf=[0,1/3,2/3,0],Rl=[0,1/6,2/3,1/6];function df(y,S,P){y.push("C",go(Bp,S),",",go(Bp,P),",",go(vf,S),",",go(vf,P),",",go(Rl,S),",",go(Rl,P))}function pf(y,S){return(S[1]-y[1])/(S[0]-y[0])}function Yv(y){for(var S=0,P=y.length-1,B=[],U=y[0],Z=y[1],$=B[0]=pf(U,Z);++S<P;)B[S]=($+($=pf(U=Z,Z=y[S+1])))/2;return B[S]=$,B}function oy(y){for(var S=[],P,B,U,Z,$=Yv(y),X=-1,ae=y.length-1;++X<ae;)P=pf(y[X],y[X+1]),I(P)<Ve?$[X]=$[X+1]=0:(B=$[X]/P,U=$[X+1]/P,Z=B*B+U*U,Z>9&&(Z=P*3/Math.sqrt(Z),$[X]=Z*B,$[X+1]=Z*U));for(X=-1;++X<=ae;)Z=(y[Math.min(ae,X+1)][0]-y[Math.max(0,X-1)][0])/(6*(1+$[X]*$[X])),S.push([Z||0,$[X]*Z||0]);return S}function Op(y){return y.length<3?jo(y):y[0]+hf(y,oy(y))}e.svg.line.radial=function(){var y=Cs(Wv);return y.radius=y.x,delete y.x,y.angle=y.y,delete y.y,y};function Wv(y){for(var S,P=-1,B=y.length,U,Z;++P<B;)S=y[P],U=S[0],Z=S[1]-Mr,S[0]=U*Math.cos(Z),S[1]=U*Math.sin(Z);return y}function sc(y){var S=pu,P=pu,B=0,U=ml,Z=oc,$=jo,X=$.key,ae=$,ye="L",xe=.7;function Pe(De){var $e=[],ot=[],Ie=[],He=-1,Qe=De.length,ct,nt=fa(S),je=fa(B),Vt=S===P?function(){return hr}:fa(P),or=B===U?function(){return fr}:fa(U),hr,fr;function zr(){$e.push("M",$(y(Ie),xe),ye,ae(y(ot.reverse()),xe),"Z")}for(;++He<Qe;)Z.call(this,ct=De[He],He)?(ot.push([hr=+nt.call(this,ct,He),fr=+je.call(this,ct,He)]),Ie.push([+Vt.call(this,ct,He),+or.call(this,ct,He)])):ot.length&&(zr(),ot=[],Ie=[]);return ot.length&&zr(),$e.length?$e.join(""):null}return Pe.x=function(De){return arguments.length?(S=P=De,Pe):P},Pe.x0=function(De){return arguments.length?(S=De,Pe):S},Pe.x1=function(De){return arguments.length?(P=De,Pe):P},Pe.y=function(De){return arguments.length?(B=U=De,Pe):U},Pe.y0=function(De){return arguments.length?(B=De,Pe):B},Pe.y1=function(De){return arguments.length?(U=De,Pe):U},Pe.defined=function(De){return arguments.length?(Z=De,Pe):Z},Pe.interpolate=function(De){return arguments.length?(typeof De=="function"?X=$=De:X=($=Es.get(De)||jo).key,ae=$.reverse||$,ye=$.closed?"M":"L",Pe):X},Pe.tension=function(De){return arguments.length?(xe=De,Pe):xe},Pe}cf.reverse=Gv,Gv.reverse=cf,e.svg.area=function(){return sc(Te)},e.svg.area.radial=function(){var y=sc(Wv);return y.radius=y.x,delete y.x,y.innerRadius=y.x0,delete y.x0,y.outerRadius=y.x1,delete y.x1,y.angle=y.y,delete y.y,y.startAngle=y.y0,delete y.y0,y.endAngle=y.y1,delete y.y1,y};function sh(y){return y.source}function Xv(y){return y.target}e.svg.chord=function(){var y=sh,S=Xv,P=Up,B=Hv,U=Np;function Z(xe,Pe){var De=$(this,y,xe,Pe),$e=$(this,S,xe,Pe);return"M"+De.p0+ae(De.r,De.p1,De.a1-De.a0)+(X(De,$e)?ye(De.r,De.p1,De.r,De.p0):ye(De.r,De.p1,$e.r,$e.p0)+ae($e.r,$e.p1,$e.a1-$e.a0)+ye($e.r,$e.p1,De.r,De.p0))+"Z"}function $(xe,Pe,De,$e){var ot=Pe.call(xe,De,$e),Ie=P.call(xe,ot,$e),He=B.call(xe,ot,$e)-Mr,Qe=U.call(xe,ot,$e)-Mr;return{r:Ie,a0:He,a1:Qe,p0:[Ie*Math.cos(He),Ie*Math.sin(He)],p1:[Ie*Math.cos(Qe),Ie*Math.sin(Qe)]}}function X(xe,Pe){return xe.a0==Pe.a0&&xe.a1==Pe.a1}function ae(xe,Pe,De){return"A"+xe+","+xe+" 0 "+ +(De>Tt)+",1 "+Pe}function ye(xe,Pe,De,$e){return"Q 0,0 "+$e}return Z.radius=function(xe){return arguments.length?(P=fa(xe),Z):P},Z.source=function(xe){return arguments.length?(y=fa(xe),Z):y},Z.target=function(xe){return arguments.length?(S=fa(xe),Z):S},Z.startAngle=function(xe){return arguments.length?(B=fa(xe),Z):B},Z.endAngle=function(xe){return arguments.length?(U=fa(xe),Z):U},Z};function Up(y){return y.radius}e.svg.diagonal=function(){var y=sh,S=Xv,P=jv;function B(U,Z){var $=y.call(this,U,Z),X=S.call(this,U,Z),ae=($.y+X.y)/2,ye=[$,{x:$.x,y:ae},{x:X.x,y:ae},X];return ye=ye.map(P),"M"+ye[0]+"C"+ye[1]+" "+ye[2]+" "+ye[3]}return B.source=function(U){return arguments.length?(y=fa(U),B):y},B.target=function(U){return arguments.length?(S=fa(U),B):S},B.projection=function(U){return arguments.length?(P=U,B):P},B};function jv(y){return[y.x,y.y]}e.svg.diagonal.radial=function(){var y=e.svg.diagonal(),S=jv,P=y.projection;return y.projection=function(B){return arguments.length?P(Vp(S=B)):S},y};function Vp(y){return function(){var S=y.apply(this,arguments),P=S[0],B=S[1]-Mr;return[P*Math.cos(B),P*Math.sin(B)]}}e.svg.symbol=function(){var y=mf,S=Hp;function P(B,U){return(uh.get(y.call(this,B,U))||lh)(S.call(this,B,U))}return P.type=function(B){return arguments.length?(y=fa(B),P):y},P.size=function(B){return arguments.length?(S=fa(B),P):S},P};function Hp(){return 64}function mf(){return"circle"}function lh(y){var S=Math.sqrt(y/Tt);return"M0,"+S+"A"+S+","+S+" 0 1,1 0,"+-S+"A"+S+","+S+" 0 1,1 0,"+S+"Z"}var uh=e.map({circle:lh,cross:function(y){var S=Math.sqrt(y/5)/2;return"M"+-3*S+","+-S+"H"+-S+"V"+-3*S+"H"+S+"V"+-S+"H"+3*S+"V"+S+"H"+S+"V"+3*S+"H"+-S+"V"+S+"H"+-3*S+"Z"},diamond:function(y){var S=Math.sqrt(y/(2*Jv)),P=S*Jv;return"M0,"+-S+"L"+P+",0 0,"+S+" "+-P+",0Z"},square:function(y){var S=Math.sqrt(y)/2;return"M"+-S+","+-S+"L"+S+","+-S+" "+S+","+S+" "+-S+","+S+"Z"},"triangle-down":function(y){var S=Math.sqrt(y/Su),P=S*Su/2;return"M0,"+P+"L"+S+","+-P+" "+-S+","+-P+"Z"},"triangle-up":function(y){var S=Math.sqrt(y/Su),P=S*Su/2;return"M0,"+-P+"L"+S+","+P+" "+-S+","+P+"Z"}});e.svg.symbolTypes=uh.keys();var Su=Math.sqrt(3),Jv=Math.tan(30*Gr);yt.transition=function(y){for(var S=uo||++Li,P=fi(y),B=[],U,Z,$=Ls||{time:Date.now(),ease:wl,delay:0,duration:250},X=-1,ae=this.length;++X<ae;){B.push(U=[]);for(var ye=this[X],xe=-1,Pe=ye.length;++xe<Pe;)(Z=ye[xe])&&ch(Z,xe,P,S,$),U.push(Z)}return yf(B,P,S)},yt.interrupt=function(y){return this.each(y==null?fh:Gp(fi(y)))};var fh=Gp(fi());function Gp(y){return function(){var S,P,B;(S=this[y])&&(B=S[P=S.active])&&(B.timer.c=null,B.timer.t=NaN,--S.count?delete S[P]:delete this[y],S.active+=.5,B.event&&B.event.interrupt.call(this,this.__data__,B.index))}}function yf(y,S,P){return Ye(y,li),y.namespace=S,y.id=P,y}var li=[],Li=0,uo,Ls;li.call=yt.call,li.empty=yt.empty,li.node=yt.node,li.size=yt.size,e.transition=function(y,S){return y&&y.transition?uo?y.transition(S):y:e.selection().transition(y)},e.transition.prototype=li,li.select=function(y){var S=this.id,P=this.namespace,B=[],U,Z,$;y=de(y);for(var X=-1,ae=this.length;++X<ae;){B.push(U=[]);for(var ye=this[X],xe=-1,Pe=ye.length;++xe<Pe;)($=ye[xe])&&(Z=y.call($,$.__data__,xe,X))?("__data__"in $&&(Z.__data__=$.__data__),ch(Z,xe,P,S,$[P][S]),U.push(Z)):U.push(null)}return yf(B,P,S)},li.selectAll=function(y){var S=this.id,P=this.namespace,B=[],U,Z,$,X,ae;y=ze(y);for(var ye=-1,xe=this.length;++ye<xe;)for(var Pe=this[ye],De=-1,$e=Pe.length;++De<$e;)if($=Pe[De]){ae=$[P][S],Z=y.call($,$.__data__,De,ye),B.push(U=[]);for(var ot=-1,Ie=Z.length;++ot<Ie;)(X=Z[ot])&&ch(X,ot,P,S,ae),U.push(X)}return yf(B,P,S)},li.filter=function(y){var S=[],P,B,U;typeof y!="function"&&(y=Be(y));for(var Z=0,$=this.length;Z<$;Z++){S.push(P=[]);for(var B=this[Z],X=0,ae=B.length;X<ae;X++)(U=B[X])&&y.call(U,U.__data__,X,Z)&&P.push(U)}return yf(S,this.namespace,this.id)},li.tween=function(y,S){var P=this.id,B=this.namespace;return arguments.length<2?this.node()[B][P].tween.get(y):sr(this,S==null?function(U){U[B][P].tween.remove(y)}:function(U){U[B][P].tween.set(y,S)})};function _o(y,S,P,B){var U=y.id,Z=y.namespace;return sr(y,typeof P=="function"?function($,X,ae){$[Z][U].tween.set(S,B(P.call($,$.__data__,X,ae)))}:(P=B(P),function($){$[Z][U].tween.set(S,P)}))}li.attr=function(y,S){if(arguments.length<2){for(S in y)this.attr(S,y[S]);return this}var P=y=="transform"?gp:ln,B=e.ns.qualify(y);function U(){this.removeAttribute(B)}function Z(){this.removeAttributeNS(B.space,B.local)}function $(ae){return ae==null?U:(ae+="",function(){var ye=this.getAttribute(B),xe;return ye!==ae&&(xe=P(ye,ae),function(Pe){this.setAttribute(B,xe(Pe))})})}function X(ae){return ae==null?Z:(ae+="",function(){var ye=this.getAttributeNS(B.space,B.local),xe;return ye!==ae&&(xe=P(ye,ae),function(Pe){this.setAttributeNS(B.space,B.local,xe(Pe))})})}return _o(this,"attr."+y,S,B.local?X:$)},li.attrTween=function(y,S){var P=e.ns.qualify(y);function B(Z,$){var X=S.call(this,Z,$,this.getAttribute(P));return X&&function(ae){this.setAttribute(P,X(ae))}}function U(Z,$){var X=S.call(this,Z,$,this.getAttributeNS(P.space,P.local));return X&&function(ae){this.setAttributeNS(P.space,P.local,X(ae))}}return this.tween("attr."+y,P.local?U:B)},li.style=function(y,S,P){var B=arguments.length;if(B<3){if(typeof y!="string"){B<2&&(S="");for(P in y)this.style(P,y[P],S);return this}P=""}function U(){this.style.removeProperty(y)}function Z($){return $==null?U:($+="",function(){var X=s(this).getComputedStyle(this,null).getPropertyValue(y),ae;return X!==$&&(ae=ln(X,$),function(ye){this.style.setProperty(y,ae(ye),P)})})}return _o(this,"style."+y,S,Z)},li.styleTween=function(y,S,P){arguments.length<3&&(P="");function B(U,Z){var $=S.call(this,U,Z,s(this).getComputedStyle(this,null).getPropertyValue(y));return $&&function(X){this.style.setProperty(y,$(X),P)}}return this.tween("style."+y,B)},li.text=function(y){return _o(this,"text",y,$a)};function $a(y){return y==null&&(y=""),function(){this.textContent=y}}li.remove=function(){var y=this.namespace;return this.each("end.transition",function(){var S;this[y].count<2&&(S=this.parentNode)&&S.removeChild(this)})},li.ease=function(y){var S=this.id,P=this.namespace;return arguments.length<1?this.node()[P][S].ease:(typeof y!="function"&&(y=e.ease.apply(e,arguments)),sr(this,function(B){B[P][S].ease=y}))},li.delay=function(y){var S=this.id,P=this.namespace;return arguments.length<1?this.node()[P][S].delay:sr(this,typeof y=="function"?function(B,U,Z){B[P][S].delay=+y.call(B,B.__data__,U,Z)}:(y=+y,function(B){B[P][S].delay=y}))},li.duration=function(y){var S=this.id,P=this.namespace;return arguments.length<1?this.node()[P][S].duration:sr(this,typeof y=="function"?function(B,U,Z){B[P][S].duration=Math.max(1,y.call(B,B.__data__,U,Z))}:(y=Math.max(1,y),function(B){B[P][S].duration=y}))},li.each=function(y,S){var P=this.id,B=this.namespace;if(arguments.length<2){var U=Ls,Z=uo;try{uo=P,sr(this,function($,X,ae){Ls=$[B][P],y.call($,$.__data__,X,ae)})}finally{Ls=U,uo=Z}}else sr(this,function($){var X=$[B][P];(X.event||(X.event=e.dispatch("start","end","interrupt"))).on(y,S)});return this},li.transition=function(){for(var y=this.id,S=++Li,P=this.namespace,B=[],U,Z,$,X,ae=0,ye=this.length;ae<ye;ae++){B.push(U=[]);for(var Z=this[ae],xe=0,Pe=Z.length;xe<Pe;xe++)($=Z[xe])&&(X=$[P][y],ch($,xe,P,S,{time:X.time,ease:X.ease,delay:X.delay+X.duration,duration:X.duration})),U.push($)}return yf(B,P,S)};function fi(y){return y==null?"__transition__":"__transition_"+y+"__"}function ch(y,S,P,B,U){var Z=y[P]||(y[P]={active:0,count:0}),$=Z[B],X,ae,ye,xe,Pe;function De(Ie){var He=$.delay;if(ae.t=He+X,He<=Ie)return $e(Ie-He);ae.c=$e}function $e(Ie){var He=Z.active,Qe=Z[He];Qe&&(Qe.timer.c=null,Qe.timer.t=NaN,--Z.count,delete Z[He],Qe.event&&Qe.event.interrupt.call(y,y.__data__,Qe.index));for(var ct in Z)if(+ct<B){var nt=Z[ct];nt.timer.c=null,nt.timer.t=NaN,--Z.count,delete Z[ct]}ae.c=ot,Gc(function(){return ae.c&&ot(Ie||1)&&(ae.c=null,ae.t=NaN),1},0,X),Z.active=B,$.event&&$.event.start.call(y,y.__data__,S),Pe=[],$.tween.forEach(function(je,Vt){(Vt=Vt.call(y,y.__data__,S))&&Pe.push(Vt)}),xe=$.ease,ye=$.duration}function ot(Ie){for(var He=Ie/ye,Qe=xe(He),ct=Pe.length;ct>0;)Pe[--ct].call(y,Qe);if(He>=1)return $.event&&$.event.end.call(y,y.__data__,S),--Z.count?delete Z[B]:delete y[P],1}$||(X=U.time,ae=Gc(De,0,X),$=Z[B]={tween:new z,time:X,timer:ae,delay:U.delay,duration:U.duration,ease:U.ease,index:S},U=null,++Z.count)}e.svg.axis=function(){var y=e.scale.linear(),S=Fl,P=6,B=6,U=3,Z=[10],$=null,X;function ae(ye){ye.each(function(){var xe=e.select(this),Pe=this.__chart__||y,De=this.__chart__=y.copy(),$e=$==null?De.ticks?De.ticks.apply(De,Z):De.domain():$,ot=X==null?De.tickFormat?De.tickFormat.apply(De,Z):Te:X,Ie=xe.selectAll(".tick").data($e,De),He=Ie.enter().insert("g",".domain").attr("class","tick").style("opacity",Ve),Qe=e.transition(Ie.exit()).style("opacity",Ve).remove(),ct=e.transition(Ie.order()).style("opacity",1),nt=Math.max(P,0)+U,je,Vt=$c(De),or=xe.selectAll(".domain").data([0]),hr=(or.enter().append("path").attr("class","domain"),e.transition(or));He.append("line"),He.append("text");var fr=He.select("line"),zr=ct.select("line"),Rr=Ie.select("text").text(ot),ea=He.select("text"),Vr=ct.select("text"),Kr=S==="top"||S==="left"?-1:1,Na,ei,Qa,jt;if(S==="bottom"||S==="top"?(je=gf,Na="x",Qa="y",ei="x2",jt="y2",Rr.attr("dy",Kr<0?"0em":".71em").style("text-anchor","middle"),hr.attr("d","M"+Vt[0]+","+Kr*B+"V0H"+Vt[1]+"V"+Kr*B)):(je=ql,Na="y",Qa="x",ei="y2",jt="x2",Rr.attr("dy",".32em").style("text-anchor",Kr<0?"end":"start"),hr.attr("d","M"+Kr*B+","+Vt[0]+"H0V"+Vt[1]+"H"+Kr*B)),fr.attr(jt,Kr*P),ea.attr(Qa,Kr*nt),zr.attr(ei,0).attr(jt,Kr*P),Vr.attr(Na,0).attr(Qa,Kr*nt),De.rangeBand){var Jr=De,na=Jr.rangeBand()/2;Pe=De=function(oa){return Jr(oa)+na}}else Pe.rangeBand?Pe=De:Qe.call(je,De,Pe);He.call(je,Pe,De),ct.call(je,De,De)})}return ae.scale=function(ye){return arguments.length?(y=ye,ae):y},ae.orient=function(ye){return arguments.length?(S=ye in lc?ye+"":Fl,ae):S},ae.ticks=function(){return arguments.length?(Z=r(arguments),ae):Z},ae.tickValues=function(ye){return arguments.length?($=ye,ae):$},ae.tickFormat=function(ye){return arguments.length?(X=ye,ae):X},ae.tickSize=function(ye){var xe=arguments.length;return xe?(P=+ye,B=+arguments[xe-1],ae):P},ae.innerTickSize=function(ye){return arguments.length?(P=+ye,ae):P},ae.outerTickSize=function(ye){return arguments.length?(B=+ye,ae):B},ae.tickPadding=function(ye){return arguments.length?(U=+ye,ae):U},ae.tickSubdivide=function(){return arguments.length&&ae},ae};var Fl="bottom",lc={top:1,right:1,bottom:1,left:1};function gf(y,S,P){y.attr("transform",function(B){var U=S(B);return"translate("+(isFinite(U)?U:P(B))+",0)"})}function ql(y,S,P){y.attr("transform",function(B){var U=S(B);return"translate(0,"+(isFinite(U)?U:P(B))+")"})}e.svg.brush=function(){var y=it(xe,"brushstart","brush","brushend"),S=null,P=null,B=[0,0],U=[0,0],Z,$,X=!0,ae=!0,ye=hh[0];function xe(Ie){Ie.each(function(){var He=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",ot).on("touchstart.brush",ot),Qe=He.selectAll(".background").data([0]);Qe.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),He.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var ct=He.selectAll(".resize").data(ye,Te);ct.exit().remove(),ct.enter().append("g").attr("class",function(or){return"resize "+or}).style("cursor",function(or){return Ds[or]}).append("rect").attr("x",function(or){return/[ew]$/.test(or)?-3:null}).attr("y",function(or){return/^[ns]/.test(or)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),ct.style("display",xe.empty()?"none":null);var nt=e.transition(He),je=e.transition(Qe),Vt;S&&(Vt=$c(S),je.attr("x",Vt[0]).attr("width",Vt[1]-Vt[0]),De(nt)),P&&(Vt=$c(P),je.attr("y",Vt[0]).attr("height",Vt[1]-Vt[0]),$e(nt)),Pe(nt)})}xe.event=function(Ie){Ie.each(function(){var He=y.of(this,arguments),Qe={x:B,y:U,i:Z,j:$},ct=this.__chart__||Qe;this.__chart__=Qe,uo?e.select(this).transition().each("start.brush",function(){Z=ct.i,$=ct.j,B=ct.x,U=ct.y,He({type:"brushstart"})}).tween("brush:brush",function(){var nt=Wo(B,Qe.x),je=Wo(U,Qe.y);return Z=$=null,function(Vt){B=Qe.x=nt(Vt),U=Qe.y=je(Vt),He({type:"brush",mode:"resize"})}}).each("end.brush",function(){Z=Qe.i,$=Qe.j,He({type:"brush",mode:"resize"}),He({type:"brushend"})}):(He({type:"brushstart"}),He({type:"brush",mode:"resize"}),He({type:"brushend"}))})};function Pe(Ie){Ie.selectAll(".resize").attr("transform",function(He){return"translate("+B[+/e$/.test(He)]+","+U[+/^s/.test(He)]+")"})}function De(Ie){Ie.select(".extent").attr("x",B[0]),Ie.selectAll(".extent,.n>rect,.s>rect").attr("width",B[1]-B[0])}function $e(Ie){Ie.select(".extent").attr("y",U[0]),Ie.selectAll(".extent,.e>rect,.w>rect").attr("height",U[1]-U[0])}function ot(){var Ie=this,He=e.select(e.event.target),Qe=y.of(Ie,arguments),ct=e.select(Ie),nt=He.datum(),je=!/^(n|s)$/.test(nt)&&S,Vt=!/^(e|w)$/.test(nt)&&P,or=He.classed("extent"),hr=yr(Ie),fr,zr=e.mouse(Ie),Rr,ea=e.select(s(Ie)).on("keydown.brush",Na).on("keyup.brush",ei);if(e.event.changedTouches?ea.on("touchmove.brush",Qa).on("touchend.brush",Jr):ea.on("mousemove.brush",Qa).on("mouseup.brush",Jr),ct.interrupt().selectAll("*").interrupt(),or)zr[0]=B[0]-zr[0],zr[1]=U[0]-zr[1];else if(nt){var Vr=+/w$/.test(nt),Kr=+/^n/.test(nt);Rr=[B[1-Vr]-zr[0],U[1-Kr]-zr[1]],zr[0]=B[Vr],zr[1]=U[Kr]}else e.event.altKey&&(fr=zr.slice());ct.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",He.style("cursor")),Qe({type:"brushstart"}),Qa();function Na(){e.event.keyCode==32&&(or||(fr=null,zr[0]-=B[1],zr[1]-=U[1],or=2),Xe())}function ei(){e.event.keyCode==32&&or==2&&(zr[0]+=B[1],zr[1]+=U[1],or=0,Xe())}function Qa(){var na=e.mouse(Ie),oa=!1;Rr&&(na[0]+=Rr[0],na[1]+=Rr[1]),or||(e.event.altKey?(fr||(fr=[(B[0]+B[1])/2,(U[0]+U[1])/2]),zr[0]=B[+(na[0]<fr[0])],zr[1]=U[+(na[1]<fr[1])]):fr=null),je&&jt(na,S,0)&&(De(ct),oa=!0),Vt&&jt(na,P,1)&&($e(ct),oa=!0),oa&&(Pe(ct),Qe({type:"brush",mode:or?"move":"resize"}))}function jt(na,oa,Di){var Vi=$c(oa),en=Vi[0],bi=Vi[1],wn=zr[Di],Tr=Di?U:B,Hr=Tr[1]-Tr[0],Ni,Ai;if(or&&(en-=wn,bi-=Hr+wn),Ni=(Di?ae:X)?Math.max(en,Math.min(bi,na[Di])):na[Di],or?Ai=(Ni+=wn)+Hr:(fr&&(wn=Math.max(en,Math.min(bi,2*fr[Di]-Ni))),wn<Ni?(Ai=Ni,Ni=wn):Ai=wn),Tr[0]!=Ni||Tr[1]!=Ai)return Di?$=null:Z=null,Tr[0]=Ni,Tr[1]=Ai,!0}function Jr(){Qa(),ct.style("pointer-events","all").selectAll(".resize").style("display",xe.empty()?"none":null),e.select("body").style("cursor",null),ea.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),hr(),Qe({type:"brushend"})}}return xe.x=function(Ie){return arguments.length?(S=Ie,ye=hh[!S<<1|!P],xe):S},xe.y=function(Ie){return arguments.length?(P=Ie,ye=hh[!S<<1|!P],xe):P},xe.clamp=function(Ie){return arguments.length?(S&&P?(X=!!Ie[0],ae=!!Ie[1]):S?X=!!Ie:P&&(ae=!!Ie),xe):S&&P?[X,ae]:S?X:P?ae:null},xe.extent=function(Ie){var He,Qe,ct,nt,je;return arguments.length?(S&&(He=Ie[0],Qe=Ie[1],P&&(He=He[0],Qe=Qe[0]),Z=[He,Qe],S.invert&&(He=S(He),Qe=S(Qe)),Qe<He&&(je=He,He=Qe,Qe=je),(He!=B[0]||Qe!=B[1])&&(B=[He,Qe])),P&&(ct=Ie[0],nt=Ie[1],S&&(ct=ct[1],nt=nt[1]),$=[ct,nt],P.invert&&(ct=P(ct),nt=P(nt)),nt<ct&&(je=ct,ct=nt,nt=je),(ct!=U[0]||nt!=U[1])&&(U=[ct,nt])),xe):(S&&(Z?(He=Z[0],Qe=Z[1]):(He=B[0],Qe=B[1],S.invert&&(He=S.invert(He),Qe=S.invert(Qe)),Qe<He&&(je=He,He=Qe,Qe=je))),P&&($?(ct=$[0],nt=$[1]):(ct=U[0],nt=U[1],P.invert&&(ct=P.invert(ct),nt=P.invert(nt)),nt<ct&&(je=ct,ct=nt,nt=je))),S&&P?[[He,ct],[Qe,nt]]:S?[He,Qe]:P&&[ct,nt])},xe.clear=function(){return xe.empty()||(B=[0,0],U=[0,0],Z=$=null),xe},xe.empty=function(){return!!S&&B[0]==B[1]||!!P&&U[0]==U[1]},e.rebind(xe,y,"on")};var Ds={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hh=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.text=In(function(y){return y.responseText}),e.json=function(y,S){return Co(y,"application/json",_f,S)};function _f(y){return JSON.parse(y.responseText)}e.html=function(y,S){return Co(y,"text/html",Nl,S)};function Nl(y){var S=i.createRange();return S.selectNode(i.body),S.createContextualFragment(y.responseText)}e.xml=In(function(y){return y.responseXML}),typeof a_=="object"&&a_.exports?a_.exports=e:this.d3=e}).apply(self)});var Z3=me((i_,E7)=>{(function(e,t){typeof i_=="object"&&typeof E7!="undefined"?t(i_):(e=e||self,t(e.d3=e.d3||{}))})(i_,function(e){"use strict";var t=new Date,r=new Date;function i(Be,ut,sr,Pr){function Et(ht){return Be(ht=arguments.length===0?new Date:new Date(+ht)),ht}return Et.floor=function(ht){return Be(ht=new Date(+ht)),ht},Et.ceil=function(ht){return Be(ht=new Date(ht-1)),ut(ht,1),Be(ht),ht},Et.round=function(ht){var pt=Et(ht),Ot=Et.ceil(ht);return ht-pt<Ot-ht?pt:Ot},Et.offset=function(ht,pt){return ut(ht=new Date(+ht),pt==null?1:Math.floor(pt)),ht},Et.range=function(ht,pt,Ot){var er=[],Ht;if(ht=Et.ceil(ht),Ot=Ot==null?1:Math.floor(Ot),!(ht<pt)||!(Ot>0))return er;do er.push(Ht=new Date(+ht)),ut(ht,Ot),Be(ht);while(Ht<ht&&ht<pt);return er},Et.filter=function(ht){return i(function(pt){if(pt>=pt)for(;Be(pt),!ht(pt);)pt.setTime(pt-1)},function(pt,Ot){if(pt>=pt)if(Ot<0)for(;++Ot<=0;)for(;ut(pt,-1),!ht(pt););else for(;--Ot>=0;)for(;ut(pt,1),!ht(pt););})},sr&&(Et.count=function(ht,pt){return t.setTime(+ht),r.setTime(+pt),Be(t),Be(r),Math.floor(sr(t,r))},Et.every=function(ht){return ht=Math.floor(ht),!isFinite(ht)||!(ht>0)?null:ht>1?Et.filter(Pr?function(pt){return Pr(pt)%ht===0}:function(pt){return Et.count(0,pt)%ht===0}):Et}),Et}var a=i(function(){},function(Be,ut){Be.setTime(+Be+ut)},function(Be,ut){return ut-Be});a.every=function(Be){return Be=Math.floor(Be),!isFinite(Be)||!(Be>0)?null:Be>1?i(function(ut){ut.setTime(Math.floor(ut/Be)*Be)},function(ut,sr){ut.setTime(+ut+sr*Be)},function(ut,sr){return(sr-ut)/Be}):a};var s=a.range,l=1e3,f=6e4,h=36e5,v=864e5,m=6048e5,_=i(function(Be){Be.setTime(Be-Be.getMilliseconds())},function(Be,ut){Be.setTime(+Be+ut*l)},function(Be,ut){return(ut-Be)/l},function(Be){return Be.getUTCSeconds()}),T=_.range,M=i(function(Be){Be.setTime(Be-Be.getMilliseconds()-Be.getSeconds()*l)},function(Be,ut){Be.setTime(+Be+ut*f)},function(Be,ut){return(ut-Be)/f},function(Be){return Be.getMinutes()}),C=M.range,E=i(function(Be){Be.setTime(Be-Be.getMilliseconds()-Be.getSeconds()*l-Be.getMinutes()*f)},function(Be,ut){Be.setTime(+Be+ut*h)},function(Be,ut){return(ut-Be)/h},function(Be){return Be.getHours()}),L=E.range,I=i(function(Be){Be.setHours(0,0,0,0)},function(Be,ut){Be.setDate(Be.getDate()+ut)},function(Be,ut){return(ut-Be-(ut.getTimezoneOffset()-Be.getTimezoneOffset())*f)/v},function(Be){return Be.getDate()-1}),O=I.range;function q(Be){return i(function(ut){ut.setDate(ut.getDate()-(ut.getDay()+7-Be)%7),ut.setHours(0,0,0,0)},function(ut,sr){ut.setDate(ut.getDate()+sr*7)},function(ut,sr){return(sr-ut-(sr.getTimezoneOffset()-ut.getTimezoneOffset())*f)/m})}var z=q(0),N=q(1),H=q(2),V=q(3),W=q(4),J=q(5),ee=q(6),ie=z.range,oe=N.range,fe=H.range,le=V.range,Te=W.range,Se=J.range,Me=ee.range,Ae=i(function(Be){Be.setDate(1),Be.setHours(0,0,0,0)},function(Be,ut){Be.setMonth(Be.getMonth()+ut)},function(Be,ut){return ut.getMonth()-Be.getMonth()+(ut.getFullYear()-Be.getFullYear())*12},function(Be){return Be.getMonth()}),pe=Ae.range,ke=i(function(Be){Be.setMonth(0,1),Be.setHours(0,0,0,0)},function(Be,ut){Be.setFullYear(Be.getFullYear()+ut)},function(Be,ut){return ut.getFullYear()-Be.getFullYear()},function(Be){return Be.getFullYear()});ke.every=function(Be){return!isFinite(Be=Math.floor(Be))||!(Be>0)?null:i(function(ut){ut.setFullYear(Math.floor(ut.getFullYear()/Be)*Be),ut.setMonth(0,1),ut.setHours(0,0,0,0)},function(ut,sr){ut.setFullYear(ut.getFullYear()+sr*Be)})};var Ee=ke.range,Xe=i(function(Be){Be.setUTCSeconds(0,0)},function(Be,ut){Be.setTime(+Be+ut*f)},function(Be,ut){return(ut-Be)/f},function(Be){return Be.getUTCMinutes()}),lt=Xe.range,it=i(function(Be){Be.setUTCMinutes(0,0,0)},function(Be,ut){Be.setTime(+Be+ut*h)},function(Be,ut){return(ut-Be)/h},function(Be){return Be.getUTCHours()}),_t=it.range,Ye=i(function(Be){Be.setUTCHours(0,0,0,0)},function(Be,ut){Be.setUTCDate(Be.getUTCDate()+ut)},function(Be,ut){return(ut-Be)/v},function(Be){return Be.getUTCDate()-1}),kt=Ye.range;function st(Be){return i(function(ut){ut.setUTCDate(ut.getUTCDate()-(ut.getUTCDay()+7-Be)%7),ut.setUTCHours(0,0,0,0)},function(ut,sr){ut.setUTCDate(ut.getUTCDate()+sr*7)},function(ut,sr){return(sr-ut)/m})}var dt=st(0),It=st(1),yt=st(2),de=st(3),ze=st(4),_e=st(5),Ue=st(6),at=dt.range,Je=It.range,Ct=yt.range,wt=de.range,xt=ze.range,qt=_e.range,Ut=Ue.range,Dt=i(function(Be){Be.setUTCDate(1),Be.setUTCHours(0,0,0,0)},function(Be,ut){Be.setUTCMonth(Be.getUTCMonth()+ut)},function(Be,ut){return ut.getUTCMonth()-Be.getUTCMonth()+(ut.getUTCFullYear()-Be.getUTCFullYear())*12},function(Be){return Be.getUTCMonth()}),Mt=Dt.range,Zt=i(function(Be){Be.setUTCMonth(0,1),Be.setUTCHours(0,0,0,0)},function(Be,ut){Be.setUTCFullYear(Be.getUTCFullYear()+ut)},function(Be,ut){return ut.getUTCFullYear()-Be.getUTCFullYear()},function(Be){return Be.getUTCFullYear()});Zt.every=function(Be){return!isFinite(Be=Math.floor(Be))||!(Be>0)?null:i(function(ut){ut.setUTCFullYear(Math.floor(ut.getUTCFullYear()/Be)*Be),ut.setUTCMonth(0,1),ut.setUTCHours(0,0,0,0)},function(ut,sr){ut.setUTCFullYear(ut.getUTCFullYear()+sr*Be)})};var Yt=Zt.range;e.timeDay=I,e.timeDays=O,e.timeFriday=J,e.timeFridays=Se,e.timeHour=E,e.timeHours=L,e.timeInterval=i,e.timeMillisecond=a,e.timeMilliseconds=s,e.timeMinute=M,e.timeMinutes=C,e.timeMonday=N,e.timeMondays=oe,e.timeMonth=Ae,e.timeMonths=pe,e.timeSaturday=ee,e.timeSaturdays=Me,e.timeSecond=_,e.timeSeconds=T,e.timeSunday=z,e.timeSundays=ie,e.timeThursday=W,e.timeThursdays=Te,e.timeTuesday=H,e.timeTuesdays=fe,e.timeWednesday=V,e.timeWednesdays=le,e.timeWeek=z,e.timeWeeks=ie,e.timeYear=ke,e.timeYears=Ee,e.utcDay=Ye,e.utcDays=kt,e.utcFriday=_e,e.utcFridays=qt,e.utcHour=it,e.utcHours=_t,e.utcMillisecond=a,e.utcMilliseconds=s,e.utcMinute=Xe,e.utcMinutes=lt,e.utcMonday=It,e.utcMondays=Je,e.utcMonth=Dt,e.utcMonths=Mt,e.utcSaturday=Ue,e.utcSaturdays=Ut,e.utcSecond=_,e.utcSeconds=T,e.utcSunday=dt,e.utcSundays=at,e.utcThursday=ze,e.utcThursdays=xt,e.utcTuesday=yt,e.utcTuesdays=Ct,e.utcWednesday=de,e.utcWednesdays=wt,e.utcWeek=dt,e.utcWeeks=at,e.utcYear=Zt,e.utcYears=Yt,Object.defineProperty(e,"__esModule",{value:!0})})});var y0=me((n_,L7)=>{(function(e,t){typeof n_=="object"&&typeof L7!="undefined"?t(n_,Z3()):(e=e||self,t(e.d3=e.d3||{},e.d3))})(n_,function(e,t){"use strict";function r(Fe){if(0<=Fe.y&&Fe.y<100){var Ve=new Date(-1,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L);return Ve.setFullYear(Fe.y),Ve}return new Date(Fe.y,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L)}function i(Fe){if(0<=Fe.y&&Fe.y<100){var Ve=new Date(Date.UTC(-1,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L));return Ve.setUTCFullYear(Fe.y),Ve}return new Date(Date.UTC(Fe.y,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L))}function a(Fe,Ve,bt){return{y:Fe,m:Ve,d:bt,H:0,M:0,S:0,L:0}}function s(Fe){var Ve=Fe.dateTime,bt=Fe.date,Tt=Fe.time,mr=Fe.periods,Ar=Fe.days,Mr=Fe.shortDays,Gr=Fe.months,pa=Fe.shortMonths,Ca=T(mr),ii=M(mr),wi=T(Ar),vi=M(Ar),Fi=T(Mr),Gi=M(Mr),vn=T(Gr),nn=M(Gr),Ki=T(pa),ir=M(pa),oi={a:Pt,A:Ft,b:tr,B:Wt,c:null,d:Ae,e:Ae,f:lt,H:pe,I:ke,j:Ee,L:Xe,m:it,M:_t,p:Sr,q:Zr,Q:pt,s:Ot,S:Ye,u:kt,U:st,V:dt,w:It,W:yt,x:null,X:null,y:de,Y:ze,Z:_e,"%":ht},Sa={a:Or,A:ca,b:ua,B:qa,c:null,d:Ue,e:Ue,f:xt,H:at,I:Je,j:Ct,L:wt,m:qt,M:Ut,p:ri,q:Yr,Q:pt,s:Ot,S:Dt,u:Mt,U:Zt,V:Yt,w:Be,W:ut,x:null,X:null,y:sr,Y:Pr,Z:Et,"%":ht},la={a:ue,A:he,b:Le,B:Ne,c:et,d:W,e:W,f:le,H:ee,I:ee,j:J,L:fe,m:V,M:ie,p:te,q:H,Q:Se,s:Me,S:oe,u:E,U:L,V:I,w:C,W:O,x:We,X:mt,y:z,Y:q,Z:N,"%":Te};oi.x=Ci(bt,oi),oi.X=Ci(Tt,oi),oi.c=Ci(Ve,oi),Sa.x=Ci(bt,Sa),Sa.X=Ci(Tt,Sa),Sa.c=Ci(Ve,Sa);function Ci(gr,$r){return function(ga){var nr=[],Ti=-1,Ea=0,si=gr.length,fa,In,Co;for(ga instanceof Date||(ga=new Date(+ga));++Ti<si;)gr.charCodeAt(Ti)===37&&(nr.push(gr.slice(Ea,Ti)),(In=l[fa=gr.charAt(++Ti)])!=null?fa=gr.charAt(++Ti):In=fa==="e"?" ":"0",(Co=$r[fa])&&(fa=Co(ga,In)),nr.push(fa),Ea=Ti+1);return nr.push(gr.slice(Ea,Ti)),nr.join("")}}function ma(gr,$r){return function(ga){var nr=a(1900,void 0,1),Ti=se(nr,gr,ga+="",0),Ea,si;if(Ti!=ga.length)return null;if("Q"in nr)return new Date(nr.Q);if("s"in nr)return new Date(nr.s*1e3+("L"in nr?nr.L:0));if($r&&!("Z"in nr)&&(nr.Z=0),"p"in nr&&(nr.H=nr.H%12+nr.p*12),nr.m===void 0&&(nr.m="q"in nr?nr.q:0),"V"in nr){if(nr.V<1||nr.V>53)return null;"w"in nr||(nr.w=1),"Z"in nr?(Ea=i(a(nr.y,0,1)),si=Ea.getUTCDay(),Ea=si>4||si===0?t.utcMonday.ceil(Ea):t.utcMonday(Ea),Ea=t.utcDay.offset(Ea,(nr.V-1)*7),nr.y=Ea.getUTCFullYear(),nr.m=Ea.getUTCMonth(),nr.d=Ea.getUTCDate()+(nr.w+6)%7):(Ea=r(a(nr.y,0,1)),si=Ea.getDay(),Ea=si>4||si===0?t.timeMonday.ceil(Ea):t.timeMonday(Ea),Ea=t.timeDay.offset(Ea,(nr.V-1)*7),nr.y=Ea.getFullYear(),nr.m=Ea.getMonth(),nr.d=Ea.getDate()+(nr.w+6)%7)}else("W"in nr||"U"in nr)&&("w"in nr||(nr.w="u"in nr?nr.u%7:"W"in nr?1:0),si="Z"in nr?i(a(nr.y,0,1)).getUTCDay():r(a(nr.y,0,1)).getDay(),nr.m=0,nr.d="W"in nr?(nr.w+6)%7+nr.W*7-(si+5)%7:nr.w+nr.U*7-(si+6)%7);return"Z"in nr?(nr.H+=nr.Z/100|0,nr.M+=nr.Z%100,i(nr)):r(nr)}}function se(gr,$r,ga,nr){for(var Ti=0,Ea=$r.length,si=ga.length,fa,In;Ti<Ea;){if(nr>=si)return-1;if(fa=$r.charCodeAt(Ti++),fa===37){if(fa=$r.charAt(Ti++),In=la[fa in l?$r.charAt(Ti++):fa],!In||(nr=In(gr,ga,nr))<0)return-1}else if(fa!=ga.charCodeAt(nr++))return-1}return nr}function te(gr,$r,ga){var nr=Ca.exec($r.slice(ga));return nr?(gr.p=ii[nr[0].toLowerCase()],ga+nr[0].length):-1}function ue(gr,$r,ga){var nr=Fi.exec($r.slice(ga));return nr?(gr.w=Gi[nr[0].toLowerCase()],ga+nr[0].length):-1}function he(gr,$r,ga){var nr=wi.exec($r.slice(ga));return nr?(gr.w=vi[nr[0].toLowerCase()],ga+nr[0].length):-1}function Le(gr,$r,ga){var nr=Ki.exec($r.slice(ga));return nr?(gr.m=ir[nr[0].toLowerCase()],ga+nr[0].length):-1}function Ne(gr,$r,ga){var nr=vn.exec($r.slice(ga));return nr?(gr.m=nn[nr[0].toLowerCase()],ga+nr[0].length):-1}function et(gr,$r,ga){return se(gr,Ve,$r,ga)}function We(gr,$r,ga){return se(gr,bt,$r,ga)}function mt(gr,$r,ga){return se(gr,Tt,$r,ga)}function Pt(gr){return Mr[gr.getDay()]}function Ft(gr){return Ar[gr.getDay()]}function tr(gr){return pa[gr.getMonth()]}function Wt(gr){return Gr[gr.getMonth()]}function Sr(gr){return mr[+(gr.getHours()>=12)]}function Zr(gr){return 1+~~(gr.getMonth()/3)}function Or(gr){return Mr[gr.getUTCDay()]}function ca(gr){return Ar[gr.getUTCDay()]}function ua(gr){return pa[gr.getUTCMonth()]}function qa(gr){return Gr[gr.getUTCMonth()]}function ri(gr){return mr[+(gr.getUTCHours()>=12)]}function Yr(gr){return 1+~~(gr.getUTCMonth()/3)}return{format:function(gr){var $r=Ci(gr+="",oi);return $r.toString=function(){return gr},$r},parse:function(gr){var $r=ma(gr+="",!1);return $r.toString=function(){return gr},$r},utcFormat:function(gr){var $r=Ci(gr+="",Sa);return $r.toString=function(){return gr},$r},utcParse:function(gr){var $r=ma(gr+="",!0);return $r.toString=function(){return gr},$r}}}var l={"-":"",_:" ",0:"0"},f=/^\s*\d+/,h=/^%/,v=/[\\^$*+?|[\]().{}]/g;function m(Fe,Ve,bt){var Tt=Fe<0?"-":"",mr=(Tt?-Fe:Fe)+"",Ar=mr.length;return Tt+(Ar<bt?new Array(bt-Ar+1).join(Ve)+mr:mr)}function _(Fe){return Fe.replace(v,"\\$&")}function T(Fe){return new RegExp("^(?:"+Fe.map(_).join("|")+")","i")}function M(Fe){for(var Ve={},bt=-1,Tt=Fe.length;++bt<Tt;)Ve[Fe[bt].toLowerCase()]=bt;return Ve}function C(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+1));return Tt?(Fe.w=+Tt[0],bt+Tt[0].length):-1}function E(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+1));return Tt?(Fe.u=+Tt[0],bt+Tt[0].length):-1}function L(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.U=+Tt[0],bt+Tt[0].length):-1}function I(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.V=+Tt[0],bt+Tt[0].length):-1}function O(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.W=+Tt[0],bt+Tt[0].length):-1}function q(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+4));return Tt?(Fe.y=+Tt[0],bt+Tt[0].length):-1}function z(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.y=+Tt[0]+(+Tt[0]>68?1900:2e3),bt+Tt[0].length):-1}function N(Fe,Ve,bt){var Tt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ve.slice(bt,bt+6));return Tt?(Fe.Z=Tt[1]?0:-(Tt[2]+(Tt[3]||"00")),bt+Tt[0].length):-1}function H(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+1));return Tt?(Fe.q=Tt[0]*3-3,bt+Tt[0].length):-1}function V(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.m=Tt[0]-1,bt+Tt[0].length):-1}function W(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.d=+Tt[0],bt+Tt[0].length):-1}function J(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+3));return Tt?(Fe.m=0,Fe.d=+Tt[0],bt+Tt[0].length):-1}function ee(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.H=+Tt[0],bt+Tt[0].length):-1}function ie(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.M=+Tt[0],bt+Tt[0].length):-1}function oe(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+2));return Tt?(Fe.S=+Tt[0],bt+Tt[0].length):-1}function fe(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+3));return Tt?(Fe.L=+Tt[0],bt+Tt[0].length):-1}function le(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt,bt+6));return Tt?(Fe.L=Math.floor(Tt[0]/1e3),bt+Tt[0].length):-1}function Te(Fe,Ve,bt){var Tt=h.exec(Ve.slice(bt,bt+1));return Tt?bt+Tt[0].length:-1}function Se(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt));return Tt?(Fe.Q=+Tt[0],bt+Tt[0].length):-1}function Me(Fe,Ve,bt){var Tt=f.exec(Ve.slice(bt));return Tt?(Fe.s=+Tt[0],bt+Tt[0].length):-1}function Ae(Fe,Ve){return m(Fe.getDate(),Ve,2)}function pe(Fe,Ve){return m(Fe.getHours(),Ve,2)}function ke(Fe,Ve){return m(Fe.getHours()%12||12,Ve,2)}function Ee(Fe,Ve){return m(1+t.timeDay.count(t.timeYear(Fe),Fe),Ve,3)}function Xe(Fe,Ve){return m(Fe.getMilliseconds(),Ve,3)}function lt(Fe,Ve){return Xe(Fe,Ve)+"000"}function it(Fe,Ve){return m(Fe.getMonth()+1,Ve,2)}function _t(Fe,Ve){return m(Fe.getMinutes(),Ve,2)}function Ye(Fe,Ve){return m(Fe.getSeconds(),Ve,2)}function kt(Fe){var Ve=Fe.getDay();return Ve===0?7:Ve}function st(Fe,Ve){return m(t.timeSunday.count(t.timeYear(Fe)-1,Fe),Ve,2)}function dt(Fe,Ve){var bt=Fe.getDay();return Fe=bt>=4||bt===0?t.timeThursday(Fe):t.timeThursday.ceil(Fe),m(t.timeThursday.count(t.timeYear(Fe),Fe)+(t.timeYear(Fe).getDay()===4),Ve,2)}function It(Fe){return Fe.getDay()}function yt(Fe,Ve){return m(t.timeMonday.count(t.timeYear(Fe)-1,Fe),Ve,2)}function de(Fe,Ve){return m(Fe.getFullYear()%100,Ve,2)}function ze(Fe,Ve){return m(Fe.getFullYear()%1e4,Ve,4)}function _e(Fe){var Ve=Fe.getTimezoneOffset();return(Ve>0?"-":(Ve*=-1,"+"))+m(Ve/60|0,"0",2)+m(Ve%60,"0",2)}function Ue(Fe,Ve){return m(Fe.getUTCDate(),Ve,2)}function at(Fe,Ve){return m(Fe.getUTCHours(),Ve,2)}function Je(Fe,Ve){return m(Fe.getUTCHours()%12||12,Ve,2)}function Ct(Fe,Ve){return m(1+t.utcDay.count(t.utcYear(Fe),Fe),Ve,3)}function wt(Fe,Ve){return m(Fe.getUTCMilliseconds(),Ve,3)}function xt(Fe,Ve){return wt(Fe,Ve)+"000"}function qt(Fe,Ve){return m(Fe.getUTCMonth()+1,Ve,2)}function Ut(Fe,Ve){return m(Fe.getUTCMinutes(),Ve,2)}function Dt(Fe,Ve){return m(Fe.getUTCSeconds(),Ve,2)}function Mt(Fe){var Ve=Fe.getUTCDay();return Ve===0?7:Ve}function Zt(Fe,Ve){return m(t.utcSunday.count(t.utcYear(Fe)-1,Fe),Ve,2)}function Yt(Fe,Ve){var bt=Fe.getUTCDay();return Fe=bt>=4||bt===0?t.utcThursday(Fe):t.utcThursday.ceil(Fe),m(t.utcThursday.count(t.utcYear(Fe),Fe)+(t.utcYear(Fe).getUTCDay()===4),Ve,2)}function Be(Fe){return Fe.getUTCDay()}function ut(Fe,Ve){return m(t.utcMonday.count(t.utcYear(Fe)-1,Fe),Ve,2)}function sr(Fe,Ve){return m(Fe.getUTCFullYear()%100,Ve,2)}function Pr(Fe,Ve){return m(Fe.getUTCFullYear()%1e4,Ve,4)}function Et(){return"+0000"}function ht(){return"%"}function pt(Fe){return+Fe}function Ot(Fe){return Math.floor(+Fe/1e3)}var er;Ht({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ht(Fe){return er=s(Fe),e.timeFormat=er.format,e.timeParse=er.parse,e.utcFormat=er.utcFormat,e.utcParse=er.utcParse,er}var Kt="%Y-%m-%dT%H:%M:%S.%LZ";function pr(Fe){return Fe.toISOString()}var yr=Date.prototype.toISOString?pr:e.utcFormat(Kt);function ur(Fe){var Ve=new Date(Fe);return isNaN(Ve)?null:Ve}var Lt=+new Date("2000-01-01T00:00:00.000Z")?ur:e.utcParse(Kt);e.isoFormat=yr,e.isoParse=Lt,e.timeFormatDefaultLocale=Ht,e.timeFormatLocale=s,Object.defineProperty(e,"__esModule",{value:!0})})});var Y3=me((o_,D7)=>{(function(e,t){typeof o_=="object"&&typeof D7!="undefined"?t(o_):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.d3=e.d3||{}))})(o_,function(e){"use strict";function t(V){return Math.abs(V=Math.round(V))>=1e21?V.toLocaleString("en").replace(/,/g,""):V.toString(10)}function r(V,W){if((J=(V=W?V.toExponential(W-1):V.toExponential()).indexOf("e"))<0)return null;var J,ee=V.slice(0,J);return[ee.length>1?ee[0]+ee.slice(2):ee,+V.slice(J+1)]}function i(V){return V=r(Math.abs(V)),V?V[1]:NaN}function a(V,W){return function(J,ee){for(var ie=J.length,oe=[],fe=0,le=V[0],Te=0;ie>0&&le>0&&(Te+le+1>ee&&(le=Math.max(1,ee-Te)),oe.push(J.substring(ie-=le,ie+le)),!((Te+=le+1)>ee));)le=V[fe=(fe+1)%V.length];return oe.reverse().join(W)}}function s(V){return function(W){return W.replace(/[0-9]/g,function(J){return V[+J]})}}var l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function f(V){if(!(W=l.exec(V)))throw new Error("invalid format: "+V);var W;return new h({fill:W[1],align:W[2],sign:W[3],symbol:W[4],zero:W[5],width:W[6],comma:W[7],precision:W[8]&&W[8].slice(1),trim:W[9],type:W[10]})}f.prototype=h.prototype;function h(V){this.fill=V.fill===void 0?" ":V.fill+"",this.align=V.align===void 0?">":V.align+"",this.sign=V.sign===void 0?"-":V.sign+"",this.symbol=V.symbol===void 0?"":V.symbol+"",this.zero=!!V.zero,this.width=V.width===void 0?void 0:+V.width,this.comma=!!V.comma,this.precision=V.precision===void 0?void 0:+V.precision,this.trim=!!V.trim,this.type=V.type===void 0?"":V.type+""}h.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(V){e:for(var W=V.length,J=1,ee=-1,ie;J<W;++J)switch(V[J]){case".":ee=ie=J;break;case"0":ee===0&&(ee=J),ie=J;break;default:if(!+V[J])break e;ee>0&&(ee=0);break}return ee>0?V.slice(0,ee)+V.slice(ie+1):V}var m;function _(V,W){var J=r(V,W);if(!J)return V+"";var ee=J[0],ie=J[1],oe=ie-(m=Math.max(-8,Math.min(8,Math.floor(ie/3)))*3)+1,fe=ee.length;return oe===fe?ee:oe>fe?ee+new Array(oe-fe+1).join("0"):oe>0?ee.slice(0,oe)+"."+ee.slice(oe):"0."+new Array(1-oe).join("0")+r(V,Math.max(0,W+oe-1))[0]}function T(V,W){var J=r(V,W);if(!J)return V+"";var ee=J[0],ie=J[1];return ie<0?"0."+new Array(-ie).join("0")+ee:ee.length>ie+1?ee.slice(0,ie+1)+"."+ee.slice(ie+1):ee+new Array(ie-ee.length+2).join("0")}var M={"%":function(V,W){return(V*100).toFixed(W)},b:function(V){return Math.round(V).toString(2)},c:function(V){return V+""},d:t,e:function(V,W){return V.toExponential(W)},f:function(V,W){return V.toFixed(W)},g:function(V,W){return V.toPrecision(W)},o:function(V){return Math.round(V).toString(8)},p:function(V,W){return T(V*100,W)},r:T,s:_,X:function(V){return Math.round(V).toString(16).toUpperCase()},x:function(V){return Math.round(V).toString(16)}};function C(V){return V}var E=Array.prototype.map,L=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function I(V){var W=V.grouping===void 0||V.thousands===void 0?C:a(E.call(V.grouping,Number),V.thousands+""),J=V.currency===void 0?"":V.currency[0]+"",ee=V.currency===void 0?"":V.currency[1]+"",ie=V.decimal===void 0?".":V.decimal+"",oe=V.numerals===void 0?C:s(E.call(V.numerals,String)),fe=V.percent===void 0?"%":V.percent+"",le=V.minus===void 0?"-":V.minus+"",Te=V.nan===void 0?"NaN":V.nan+"";function Se(Ae){Ae=f(Ae);var pe=Ae.fill,ke=Ae.align,Ee=Ae.sign,Xe=Ae.symbol,lt=Ae.zero,it=Ae.width,_t=Ae.comma,Ye=Ae.precision,kt=Ae.trim,st=Ae.type;st==="n"?(_t=!0,st="g"):M[st]||(Ye===void 0&&(Ye=12),kt=!0,st="g"),(lt||pe==="0"&&ke==="=")&&(lt=!0,pe="0",ke="=");var dt=Xe==="$"?J:Xe==="#"&&/[boxX]/.test(st)?"0"+st.toLowerCase():"",It=Xe==="$"?ee:/[%p]/.test(st)?fe:"",yt=M[st],de=/[defgprs%]/.test(st);Ye=Ye===void 0?6:/[gprs]/.test(st)?Math.max(1,Math.min(21,Ye)):Math.max(0,Math.min(20,Ye));function ze(_e){var Ue=dt,at=It,Je,Ct,wt;if(st==="c")at=yt(_e)+at,_e="";else{_e=+_e;var xt=_e<0||1/_e<0;if(_e=isNaN(_e)?Te:yt(Math.abs(_e),Ye),kt&&(_e=v(_e)),xt&&+_e==0&&Ee!=="+"&&(xt=!1),Ue=(xt?Ee==="("?Ee:le:Ee==="-"||Ee==="("?"":Ee)+Ue,at=(st==="s"?L[8+m/3]:"")+at+(xt&&Ee==="("?")":""),de){for(Je=-1,Ct=_e.length;++Je<Ct;)if(wt=_e.charCodeAt(Je),48>wt||wt>57){at=(wt===46?ie+_e.slice(Je+1):_e.slice(Je))+at,_e=_e.slice(0,Je);break}}}_t&&!lt&&(_e=W(_e,1/0));var qt=Ue.length+_e.length+at.length,Ut=qt<it?new Array(it-qt+1).join(pe):"";switch(_t&&lt&&(_e=W(Ut+_e,Ut.length?it-at.length:1/0),Ut=""),ke){case"<":_e=Ue+_e+at+Ut;break;case"=":_e=Ue+Ut+_e+at;break;case"^":_e=Ut.slice(0,qt=Ut.length>>1)+Ue+_e+at+Ut.slice(qt);break;default:_e=Ut+Ue+_e+at;break}return oe(_e)}return ze.toString=function(){return Ae+""},ze}function Me(Ae,pe){var ke=Se((Ae=f(Ae),Ae.type="f",Ae)),Ee=Math.max(-8,Math.min(8,Math.floor(i(pe)/3)))*3,Xe=Math.pow(10,-Ee),lt=L[8+Ee/3];return function(it){return ke(Xe*it)+lt}}return{format:Se,formatPrefix:Me}}var O;q({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function q(V){return O=I(V),e.format=O.format,e.formatPrefix=O.formatPrefix,O}function z(V){return Math.max(0,-i(Math.abs(V)))}function N(V,W){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i(W)/3)))*3-i(Math.abs(V)))}function H(V,W){return V=Math.abs(V),W=Math.abs(W)-V,Math.max(0,i(W)-i(V))+1}e.FormatSpecifier=h,e.formatDefaultLocale=q,e.formatLocale=I,e.formatSpecifier=f,e.precisionFixed=z,e.precisionPrefix=N,e.precisionRound=H,Object.defineProperty(e,"__esModule",{value:!0})})});var z7=me((jme,P7)=>{"use strict";P7.exports=function(e){for(var t=e.length,r,i=0;i<t;i++)if(r=e.charCodeAt(i),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}});var Da=me((Jme,I7)=>{"use strict";var pj=z7();I7.exports=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&pj(r))return!1}else if(t!=="number")return!1;return e-e<1}});var Zi=me((Kme,R7)=>{"use strict";R7.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}});var W3=me((s_,F7)=>{(function(e,t){typeof s_=="object"&&typeof F7!="undefined"?t(s_):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(s_,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<t.length;i++)r[t.charCodeAt(i)]=i;var a=function(l){var f=new Uint8Array(l),h,v=f.length,m="";for(h=0;h<v;h+=3)m+=t[f[h]>>2],m+=t[(f[h]&3)<<4|f[h+1]>>4],m+=t[(f[h+1]&15)<<2|f[h+2]>>6],m+=t[f[h+2]&63];return v%3===2?m=m.substring(0,m.length-1)+"=":v%3===1&&(m=m.substring(0,m.length-2)+"=="),m},s=function(l){var f=l.length*.75,h=l.length,v,m=0,_,T,M,C;l[l.length-1]==="="&&(f--,l[l.length-2]==="="&&f--);var E=new ArrayBuffer(f),L=new Uint8Array(E);for(v=0;v<h;v+=4)_=r[l.charCodeAt(v)],T=r[l.charCodeAt(v+1)],M=r[l.charCodeAt(v+2)],C=r[l.charCodeAt(v+3)],L[m++]=_<<2|T>>4,L[m++]=(T&15)<<4|M>>2,L[m++]=(M&3)<<6|C&63;return E};e.decode=s,e.encode=a,Object.defineProperty(e,"__esModule",{value:!0})})});var yc=me((Qme,q7)=>{"use strict";q7.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}});var al=me(zu=>{"use strict";var mj=W3().decode,yj=yc(),X3=Array.isArray,gj=ArrayBuffer,_j=DataView;function N7(e){return gj.isView(e)&&!(e instanceof _j)}zu.isTypedArray=N7;function l_(e){return X3(e)||N7(e)}zu.isArrayOrTypedArray=l_;function xj(e){return!l_(e[0])}zu.isArray1D=xj;zu.ensureArray=function(e,t){return X3(e)||(e=[]),e.length=t,e};var ho={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};ho.uint8c=ho.u1c;ho.uint8=ho.u1;ho.int8=ho.i1;ho.uint16=ho.u2;ho.int16=ho.i2;ho.uint32=ho.u4;ho.int32=ho.i4;ho.float32=ho.f4;ho.float64=ho.f8;function j3(e){return e.constructor===ArrayBuffer}zu.isArrayBuffer=j3;zu.decodeTypedArraySpec=function(e){var t=[],r=bj(e),i=r.dtype,a=ho[i];if(!a)throw new Error('Error in dtype: "'+i+'"');var s=a.BYTES_PER_ELEMENT,l=r.bdata;j3(l)||(l=mj(l));var f=r.shape===void 0?[l.byteLength/s]:(""+r.shape).split(",");f.reverse();var h=f.length,v,m,_=+f[0],T=s*_,M=0;if(h===1)t=new a(l);else if(h===2)for(v=+f[1],m=0;m<v;m++)t[m]=new a(l,M,_),M+=T;else if(h===3){v=+f[1];for(var C=+f[2],E=0;E<C;E++)for(t[E]=[],m=0;m<v;m++)t[E][m]=new a(l,M,_),M+=T}else throw new Error("ndim: "+h+'is not supported with the shape:"'+r.shape+'"');return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=f.reverse().join(","),e._inputArray=t,t};zu.isTypedArraySpec=function(e){return yj(e)&&e.hasOwnProperty("dtype")&&typeof e.dtype=="string"&&e.hasOwnProperty("bdata")&&(typeof e.bdata=="string"||j3(e.bdata))&&(e.shape===void 0||e.hasOwnProperty("shape")&&(typeof e.shape=="string"||typeof e.shape=="number"))};function bj(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}zu.concat=function(){var e=[],t=!0,r=0,i,a,s,l,f,h,v,m;for(s=0;s<arguments.length;s++)l=arguments[s],h=l.length,h&&(a?e.push(l):(a=l,f=h),X3(l)?i=!1:(t=!1,r?i!==l.constructor&&(i=!1):i=l.constructor),r+=h);if(!r)return[];if(!e.length)return a;if(t)return a.concat.apply(a,e);if(i){for(v=new i(r),v.set(a),s=0;s<e.length;s++)l=e[s],v.set(l,f),f+=l.length;return v}for(v=new Array(r),m=0;m<a.length;m++)v[m]=a[m];for(s=0;s<e.length;s++){for(l=e[s],m=0;m<l.length;m++)v[f+m]=l[m];f+=m}return v};zu.maxRowLength=function(e){return B7(e,Math.max,0)};zu.minRowLength=function(e){return B7(e,Math.min,1/0)};function B7(e,t,r){if(l_(e))if(l_(e[0])){for(var i=r,a=0;a<e.length;a++)i=t(i,e[a].length);return i}else return e.length;return 0}});var Ey=me((eye,G7)=>{"use strict";var O7=Da(),K3=al().isArrayOrTypedArray;G7.exports=function(t,r){if(O7(r))r=String(r);else if(typeof r!="string"||r.slice(-4)==="[-1]")throw"bad property string";var i=r.split("."),a,s,l,f;for(f=0;f<i.length;f++)if(String(i[f]).slice(0,2)==="__")throw"bad property string";for(f=0;f<i.length;){if(a=String(i[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),a){if(a[1])i[f]=a[1];else if(f===0)i.splice(0,1);else throw"bad property string";for(s=a[2].slice(1,-1).split("]["),l=0;l<s.length;l++)f++,i.splice(f,0,Number(s[l]))}f++}return typeof t!="object"?Mj(t,r,i):{set:V7(t,i,r),get:U7(t,i),astr:r,parts:i,obj:t}};function U7(e,t){return function(r){var i=e,a,s,l,f,h;for(f=0;f<t.length-1;f++){if(a=t[f],a===-1){for(s=!0,l=[],h=0;h<i.length;h++)l[h]=U7(i[h],t.slice(f+1))(r),l[h]!==l[0]&&(s=!1);return s?l[0]:l}if(typeof a=="number"&&!K3(i)||(i=i[a],typeof i!="object"||i===null))return}if(!(typeof i!="object"||i===null)&&(l=i[t[f]],!(!r&&l===null)))return l}}var wj=/(^|\.)args\[/;function J3(e,t){return e===void 0||e===null&&!t.match(wj)}function V7(e,t,r){return function(i){var a=e,s="",l=[[e,s]],f=J3(i,r),h,v;for(v=0;v<t.length-1;v++){if(h=t[v],typeof h=="number"&&!K3(a))throw"array index but container is not an array";if(h===-1){if(f=!Aj(a,t.slice(v+1),i,r),f)break;return}if(!H7(a,h,t[v+1],f))break;if(a=a[h],typeof a!="object"||a===null)throw"container is not an object";s=Tj(s,h),l.push([a,s])}if(f){if(v===t.length-1&&(delete a[t[v]],Array.isArray(a)&&+t[v]===a.length-1))for(;a.length&&a[a.length-1]===void 0;)a.pop()}else a[t[v]]=i}}function Tj(e,t){var r=t;return O7(t)?r="["+t+"]":e&&(r="."+t),e+r}function Aj(e,t,r,i){var a=K3(r),s=!0,l=r,f=i.replace("-1",0),h=a?!1:J3(r,f),v=t[0],m;for(m=0;m<e.length;m++)f=i.replace("-1",m),a&&(l=r[m%r.length],h=J3(l,f)),h&&(s=!1),H7(e,m,v,h)&&V7(e[m],t,i.replace("-1",m))(l);return s}function H7(e,t,r,i){if(e[t]===void 0){if(i)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function Mj(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}});var X7=me((tye,W7)=>{"use strict";var g0=Ey(),Sj=/^\w*$/,kj=0,Z7=1,u_=2,Y7=3,ld=4;W7.exports=function(t,r,i,a){i=i||"name",a=a||"value";var s,l,f,h={};r&&r.length?(f=g0(t,r),l=f.get()):l=t,r=r||"";var v={};if(l)for(s=0;s<l.length;s++)v[l[s][i]]=s;var m=Sj.test(a),_={set:function(T,M){var C=M===null?ld:kj;if(!l){if(!f||C===ld)return;l=[],f.set(l)}var E=v[T];if(E===void 0){if(C===ld)return;C=C|Y7,E=l.length,v[T]=E}else M!==(m?l[E][a]:g0(l[E],a).get())&&(C=C|u_);var L=l[E]=l[E]||{};return L[i]=T,m?L[a]=M:g0(L,a).set(M),M!==null&&(C=C&~ld),h[E]=h[E]|C,_},get:function(T){if(l){var M=v[T];if(M!==void 0)return m?l[M][a]:g0(l[M],a).get()}},rename:function(T,M){var C=v[T];return C===void 0||(h[C]=h[C]|Z7,v[M]=C,delete v[T],l[C][i]=M),_},remove:function(T){var M=v[T];if(M===void 0)return _;var C=l[M];if(Object.keys(C).length>2)return h[M]=h[M]|u_,_.set(T,null);if(m){for(s=M;s<l.length;s++)h[s]=h[s]|Y7;for(s=M;s<l.length;s++)v[l[s][i]]--;l.splice(M,1),delete v[T]}else g0(C,a).set(null),h[M]=h[M]|u_|ld;return _},constructUpdate:function(){for(var T,M,C={},E=Object.keys(h),L=0;L<E.length;L++)M=E[L],T=r+"["+M+"]",l[M]?(h[M]&Z7&&(C[T+"."+i]=l[M][i]),h[M]&u_&&(m?C[T+"."+a]=h[M]&ld?null:l[M][a]:C[T+"."+a]=h[M]&ld?null:g0(l[M],a).get())):C[T]=null;return C}};return _}});var J7=me((rye,j7)=>{"use strict";var Cj=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,Ej=/^[^\.\[\]]+$/;j7.exports=function(e,t){for(;t;){var r=e.match(Cj);if(r)e=r[1];else if(e.match(Ej))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t}});var f_=me((aye,K7)=>{"use strict";var Lj=Da();K7.exports=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(r[0],r[1]))/Math.LN10;return Lj(i)||(i=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),i}});var e8=me((iye,$7)=>{"use strict";var Q7=al().isArrayOrTypedArray,Ly=yc();$7.exports=function e(t,r){for(var i in r){var a=r[i],s=t[i];if(s!==a)if(i.charAt(0)==="_"||typeof a=="function"){if(i in t)continue;t[i]=a}else if(Q7(a)&&Q7(s)&&Ly(a[0])){if(i==="customdata"||i==="ids")continue;for(var l=Math.min(a.length,s.length),f=0;f<l;f++)s[f]!==a[f]&&Ly(a[f])&&Ly(s[f])&&e(s[f],a[f])}else Ly(a)&&Ly(s)&&(e(s,a),Object.keys(s).length||delete t[i])}}});var _0=me((nye,t8)=>{"use strict";function Dj(e,t){var r=e%t;return r<0?r+t:r}function Pj(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}t8.exports={mod:Dj,modHalf:Pj}});var Mf=me((oye,c_)=>{(function(e){var t=/^\s+/,r=/\s+$/,i=0,a=e.round,s=e.min,l=e.max,f=e.random;function h(de,ze){if(de=de||"",ze=ze||{},de instanceof h)return de;if(!(this instanceof h))return new h(de,ze);var _e=v(de);this._originalInput=de,this._r=_e.r,this._g=_e.g,this._b=_e.b,this._a=_e.a,this._roundA=a(100*this._a)/100,this._format=ze.format||_e.format,this._gradientType=ze.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=_e.ok,this._tc_id=i++}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var de=this.toRgb();return(de.r*299+de.g*587+de.b*114)/1e3},getLuminance:function(){var de=this.toRgb(),ze,_e,Ue,at,Je,Ct;return ze=de.r/255,_e=de.g/255,Ue=de.b/255,ze<=.03928?at=ze/12.92:at=e.pow((ze+.055)/1.055,2.4),_e<=.03928?Je=_e/12.92:Je=e.pow((_e+.055)/1.055,2.4),Ue<=.03928?Ct=Ue/12.92:Ct=e.pow((Ue+.055)/1.055,2.4),.2126*at+.7152*Je+.0722*Ct},setAlpha:function(de){return this._a=Ae(de),this._roundA=a(100*this._a)/100,this},toHsv:function(){var de=M(this._r,this._g,this._b);return{h:de.h*360,s:de.s,v:de.v,a:this._a}},toHsvString:function(){var de=M(this._r,this._g,this._b),ze=a(de.h*360),_e=a(de.s*100),Ue=a(de.v*100);return this._a==1?"hsv("+ze+", "+_e+"%, "+Ue+"%)":"hsva("+ze+", "+_e+"%, "+Ue+"%, "+this._roundA+")"},toHsl:function(){var de=_(this._r,this._g,this._b);return{h:de.h*360,s:de.s,l:de.l,a:this._a}},toHslString:function(){var de=_(this._r,this._g,this._b),ze=a(de.h*360),_e=a(de.s*100),Ue=a(de.l*100);return this._a==1?"hsl("+ze+", "+_e+"%, "+Ue+"%)":"hsla("+ze+", "+_e+"%, "+Ue+"%, "+this._roundA+")"},toHex:function(de){return E(this._r,this._g,this._b,de)},toHexString:function(de){return"#"+this.toHex(de)},toHex8:function(de){return L(this._r,this._g,this._b,this._a,de)},toHex8String:function(de){return"#"+this.toHex8(de)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(pe(this._r,255)*100)+"%",g:a(pe(this._g,255)*100)+"%",b:a(pe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(pe(this._r,255)*100)+"%, "+a(pe(this._g,255)*100)+"%, "+a(pe(this._b,255)*100)+"%)":"rgba("+a(pe(this._r,255)*100)+"%, "+a(pe(this._g,255)*100)+"%, "+a(pe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Se[E(this._r,this._g,this._b,!0)]||!1},toFilter:function(de){var ze="#"+I(this._r,this._g,this._b,this._a),_e=ze,Ue=this._gradientType?"GradientType = 1, ":"";if(de){var at=h(de);_e="#"+I(at._r,at._g,at._b,at._a)}return"progid:DXImageTransform.Microsoft.gradient("+Ue+"startColorstr="+ze+",endColorstr="+_e+")"},toString:function(de){var ze=!!de;de=de||this._format;var _e=!1,Ue=this._a<1&&this._a>=0,at=!ze&&Ue&&(de==="hex"||de==="hex6"||de==="hex3"||de==="hex4"||de==="hex8"||de==="name");return at?de==="name"&&this._a===0?this.toName():this.toRgbString():(de==="rgb"&&(_e=this.toRgbString()),de==="prgb"&&(_e=this.toPercentageRgbString()),(de==="hex"||de==="hex6")&&(_e=this.toHexString()),de==="hex3"&&(_e=this.toHexString(!0)),de==="hex4"&&(_e=this.toHex8String(!0)),de==="hex8"&&(_e=this.toHex8String()),de==="name"&&(_e=this.toName()),de==="hsl"&&(_e=this.toHslString()),de==="hsv"&&(_e=this.toHsvString()),_e||this.toHexString())},clone:function(){return h(this.toString())},_applyModification:function(de,ze){var _e=de.apply(null,[this].concat([].slice.call(ze)));return this._r=_e._r,this._g=_e._g,this._b=_e._b,this.setAlpha(_e._a),this},lighten:function(){return this._applyModification(N,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification(V,arguments)},desaturate:function(){return this._applyModification(O,arguments)},saturate:function(){return this._applyModification(q,arguments)},greyscale:function(){return this._applyModification(z,arguments)},spin:function(){return this._applyModification(W,arguments)},_applyCombination:function(de,ze){return de.apply(null,[this].concat([].slice.call(ze)))},analogous:function(){return this._applyCombination(fe,arguments)},complement:function(){return this._applyCombination(J,arguments)},monochromatic:function(){return this._applyCombination(le,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(ee,arguments)},tetrad:function(){return this._applyCombination(ie,arguments)}},h.fromRatio=function(de,ze){if(typeof de=="object"){var _e={};for(var Ue in de)de.hasOwnProperty(Ue)&&(Ue==="a"?_e[Ue]=de[Ue]:_e[Ue]=_t(de[Ue]));de=_e}return h(de,ze)};function v(de){var ze={r:0,g:0,b:0},_e=1,Ue=null,at=null,Je=null,Ct=!1,wt=!1;return typeof de=="string"&&(de=It(de)),typeof de=="object"&&(dt(de.r)&&dt(de.g)&&dt(de.b)?(ze=m(de.r,de.g,de.b),Ct=!0,wt=String(de.r).substr(-1)==="%"?"prgb":"rgb"):dt(de.h)&&dt(de.s)&&dt(de.v)?(Ue=_t(de.s),at=_t(de.v),ze=C(de.h,Ue,at),Ct=!0,wt="hsv"):dt(de.h)&&dt(de.s)&&dt(de.l)&&(Ue=_t(de.s),Je=_t(de.l),ze=T(de.h,Ue,Je),Ct=!0,wt="hsl"),de.hasOwnProperty("a")&&(_e=de.a)),_e=Ae(_e),{ok:Ct,format:de.format||wt,r:s(255,l(ze.r,0)),g:s(255,l(ze.g,0)),b:s(255,l(ze.b,0)),a:_e}}function m(de,ze,_e){return{r:pe(de,255)*255,g:pe(ze,255)*255,b:pe(_e,255)*255}}function _(de,ze,_e){de=pe(de,255),ze=pe(ze,255),_e=pe(_e,255);var Ue=l(de,ze,_e),at=s(de,ze,_e),Je,Ct,wt=(Ue+at)/2;if(Ue==at)Je=Ct=0;else{var xt=Ue-at;switch(Ct=wt>.5?xt/(2-Ue-at):xt/(Ue+at),Ue){case de:Je=(ze-_e)/xt+(ze<_e?6:0);break;case ze:Je=(_e-de)/xt+2;break;case _e:Je=(de-ze)/xt+4;break}Je/=6}return{h:Je,s:Ct,l:wt}}function T(de,ze,_e){var Ue,at,Je;de=pe(de,360),ze=pe(ze,100),_e=pe(_e,100);function Ct(qt,Ut,Dt){return Dt<0&&(Dt+=1),Dt>1&&(Dt-=1),Dt<1/6?qt+(Ut-qt)*6*Dt:Dt<1/2?Ut:Dt<2/3?qt+(Ut-qt)*(2/3-Dt)*6:qt}if(ze===0)Ue=at=Je=_e;else{var wt=_e<.5?_e*(1+ze):_e+ze-_e*ze,xt=2*_e-wt;Ue=Ct(xt,wt,de+1/3),at=Ct(xt,wt,de),Je=Ct(xt,wt,de-1/3)}return{r:Ue*255,g:at*255,b:Je*255}}function M(de,ze,_e){de=pe(de,255),ze=pe(ze,255),_e=pe(_e,255);var Ue=l(de,ze,_e),at=s(de,ze,_e),Je,Ct,wt=Ue,xt=Ue-at;if(Ct=Ue===0?0:xt/Ue,Ue==at)Je=0;else{switch(Ue){case de:Je=(ze-_e)/xt+(ze<_e?6:0);break;case ze:Je=(_e-de)/xt+2;break;case _e:Je=(de-ze)/xt+4;break}Je/=6}return{h:Je,s:Ct,v:wt}}function C(de,ze,_e){de=pe(de,360)*6,ze=pe(ze,100),_e=pe(_e,100);var Ue=e.floor(de),at=de-Ue,Je=_e*(1-ze),Ct=_e*(1-at*ze),wt=_e*(1-(1-at)*ze),xt=Ue%6,qt=[_e,Ct,Je,Je,wt,_e][xt],Ut=[wt,_e,_e,Ct,Je,Je][xt],Dt=[Je,Je,wt,_e,_e,Ct][xt];return{r:qt*255,g:Ut*255,b:Dt*255}}function E(de,ze,_e,Ue){var at=[it(a(de).toString(16)),it(a(ze).toString(16)),it(a(_e).toString(16))];return Ue&&at[0].charAt(0)==at[0].charAt(1)&&at[1].charAt(0)==at[1].charAt(1)&&at[2].charAt(0)==at[2].charAt(1)?at[0].charAt(0)+at[1].charAt(0)+at[2].charAt(0):at.join("")}function L(de,ze,_e,Ue,at){var Je=[it(a(de).toString(16)),it(a(ze).toString(16)),it(a(_e).toString(16)),it(Ye(Ue))];return at&&Je[0].charAt(0)==Je[0].charAt(1)&&Je[1].charAt(0)==Je[1].charAt(1)&&Je[2].charAt(0)==Je[2].charAt(1)&&Je[3].charAt(0)==Je[3].charAt(1)?Je[0].charAt(0)+Je[1].charAt(0)+Je[2].charAt(0)+Je[3].charAt(0):Je.join("")}function I(de,ze,_e,Ue){var at=[it(Ye(Ue)),it(a(de).toString(16)),it(a(ze).toString(16)),it(a(_e).toString(16))];return at.join("")}h.equals=function(de,ze){return!de||!ze?!1:h(de).toRgbString()==h(ze).toRgbString()},h.random=function(){return h.fromRatio({r:f(),g:f(),b:f()})};function O(de,ze){ze=ze===0?0:ze||10;var _e=h(de).toHsl();return _e.s-=ze/100,_e.s=ke(_e.s),h(_e)}function q(de,ze){ze=ze===0?0:ze||10;var _e=h(de).toHsl();return _e.s+=ze/100,_e.s=ke(_e.s),h(_e)}function z(de){return h(de).desaturate(100)}function N(de,ze){ze=ze===0?0:ze||10;var _e=h(de).toHsl();return _e.l+=ze/100,_e.l=ke(_e.l),h(_e)}function H(de,ze){ze=ze===0?0:ze||10;var _e=h(de).toRgb();return _e.r=l(0,s(255,_e.r-a(255*-(ze/100)))),_e.g=l(0,s(255,_e.g-a(255*-(ze/100)))),_e.b=l(0,s(255,_e.b-a(255*-(ze/100)))),h(_e)}function V(de,ze){ze=ze===0?0:ze||10;var _e=h(de).toHsl();return _e.l-=ze/100,_e.l=ke(_e.l),h(_e)}function W(de,ze){var _e=h(de).toHsl(),Ue=(_e.h+ze)%360;return _e.h=Ue<0?360+Ue:Ue,h(_e)}function J(de){var ze=h(de).toHsl();return ze.h=(ze.h+180)%360,h(ze)}function ee(de){var ze=h(de).toHsl(),_e=ze.h;return[h(de),h({h:(_e+120)%360,s:ze.s,l:ze.l}),h({h:(_e+240)%360,s:ze.s,l:ze.l})]}function ie(de){var ze=h(de).toHsl(),_e=ze.h;return[h(de),h({h:(_e+90)%360,s:ze.s,l:ze.l}),h({h:(_e+180)%360,s:ze.s,l:ze.l}),h({h:(_e+270)%360,s:ze.s,l:ze.l})]}function oe(de){var ze=h(de).toHsl(),_e=ze.h;return[h(de),h({h:(_e+72)%360,s:ze.s,l:ze.l}),h({h:(_e+216)%360,s:ze.s,l:ze.l})]}function fe(de,ze,_e){ze=ze||6,_e=_e||30;var Ue=h(de).toHsl(),at=360/_e,Je=[h(de)];for(Ue.h=(Ue.h-(at*ze>>1)+720)%360;--ze;)Ue.h=(Ue.h+at)%360,Je.push(h(Ue));return Je}function le(de,ze){ze=ze||6;for(var _e=h(de).toHsv(),Ue=_e.h,at=_e.s,Je=_e.v,Ct=[],wt=1/ze;ze--;)Ct.push(h({h:Ue,s:at,v:Je})),Je=(Je+wt)%1;return Ct}h.mix=function(de,ze,_e){_e=_e===0?0:_e||50;var Ue=h(de).toRgb(),at=h(ze).toRgb(),Je=_e/100,Ct={r:(at.r-Ue.r)*Je+Ue.r,g:(at.g-Ue.g)*Je+Ue.g,b:(at.b-Ue.b)*Je+Ue.b,a:(at.a-Ue.a)*Je+Ue.a};return h(Ct)},h.readability=function(de,ze){var _e=h(de),Ue=h(ze);return(e.max(_e.getLuminance(),Ue.getLuminance())+.05)/(e.min(_e.getLuminance(),Ue.getLuminance())+.05)},h.isReadable=function(de,ze,_e){var Ue=h.readability(de,ze),at,Je;switch(Je=!1,at=yt(_e),at.level+at.size){case"AAsmall":case"AAAlarge":Je=Ue>=4.5;break;case"AAlarge":Je=Ue>=3;break;case"AAAsmall":Je=Ue>=7;break}return Je},h.mostReadable=function(de,ze,_e){var Ue=null,at=0,Je,Ct,wt,xt;_e=_e||{},Ct=_e.includeFallbackColors,wt=_e.level,xt=_e.size;for(var qt=0;qt<ze.length;qt++)Je=h.readability(de,ze[qt]),Je>at&&(at=Je,Ue=h(ze[qt]));return h.isReadable(de,Ue,{level:wt,size:xt})||!Ct?Ue:(_e.includeFallbackColors=!1,h.mostReadable(de,["#fff","#000"],_e))};var Te=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Se=h.hexNames=Me(Te);function Me(de){var ze={};for(var _e in de)de.hasOwnProperty(_e)&&(ze[de[_e]]=_e);return ze}function Ae(de){return de=parseFloat(de),(isNaN(de)||de<0||de>1)&&(de=1),de}function pe(de,ze){Xe(de)&&(de="100%");var _e=lt(de);return de=s(ze,l(0,parseFloat(de))),_e&&(de=parseInt(de*ze,10)/100),e.abs(de-ze)<1e-6?1:de%ze/parseFloat(ze)}function ke(de){return s(1,l(0,de))}function Ee(de){return parseInt(de,16)}function Xe(de){return typeof de=="string"&&de.indexOf(".")!=-1&&parseFloat(de)===1}function lt(de){return typeof de=="string"&&de.indexOf("%")!=-1}function it(de){return de.length==1?"0"+de:""+de}function _t(de){return de<=1&&(de=de*100+"%"),de}function Ye(de){return e.round(parseFloat(de)*255).toString(16)}function kt(de){return Ee(de)/255}var st=function(){var de="[-\\+]?\\d+%?",ze="[-\\+]?\\d*\\.\\d+%?",_e="(?:"+ze+")|(?:"+de+")",Ue="[\\s|\\(]+("+_e+")[,|\\s]+("+_e+")[,|\\s]+("+_e+")\\s*\\)?",at="[\\s|\\(]+("+_e+")[,|\\s]+("+_e+")[,|\\s]+("+_e+")[,|\\s]+("+_e+")\\s*\\)?";return{CSS_UNIT:new RegExp(_e),rgb:new RegExp("rgb"+Ue),rgba:new RegExp("rgba"+at),hsl:new RegExp("hsl"+Ue),hsla:new RegExp("hsla"+at),hsv:new RegExp("hsv"+Ue),hsva:new RegExp("hsva"+at),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function dt(de){return!!st.CSS_UNIT.exec(de)}function It(de){de=de.replace(t,"").replace(r,"").toLowerCase();var ze=!1;if(Te[de])de=Te[de],ze=!0;else if(de=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var _e;return(_e=st.rgb.exec(de))?{r:_e[1],g:_e[2],b:_e[3]}:(_e=st.rgba.exec(de))?{r:_e[1],g:_e[2],b:_e[3],a:_e[4]}:(_e=st.hsl.exec(de))?{h:_e[1],s:_e[2],l:_e[3]}:(_e=st.hsla.exec(de))?{h:_e[1],s:_e[2],l:_e[3],a:_e[4]}:(_e=st.hsv.exec(de))?{h:_e[1],s:_e[2],v:_e[3]}:(_e=st.hsva.exec(de))?{h:_e[1],s:_e[2],v:_e[3],a:_e[4]}:(_e=st.hex8.exec(de))?{r:Ee(_e[1]),g:Ee(_e[2]),b:Ee(_e[3]),a:kt(_e[4]),format:ze?"name":"hex8"}:(_e=st.hex6.exec(de))?{r:Ee(_e[1]),g:Ee(_e[2]),b:Ee(_e[3]),format:ze?"name":"hex"}:(_e=st.hex4.exec(de))?{r:Ee(_e[1]+""+_e[1]),g:Ee(_e[2]+""+_e[2]),b:Ee(_e[3]+""+_e[3]),a:kt(_e[4]+""+_e[4]),format:ze?"name":"hex8"}:(_e=st.hex3.exec(de))?{r:Ee(_e[1]+""+_e[1]),g:Ee(_e[2]+""+_e[2]),b:Ee(_e[3]+""+_e[3]),format:ze?"name":"hex"}:!1}function yt(de){var ze,_e;return de=de||{level:"AA",size:"small"},ze=(de.level||"AA").toUpperCase(),_e=(de.size||"small").toLowerCase(),ze!=="AA"&&ze!=="AAA"&&(ze="AA"),_e!=="small"&&_e!=="large"&&(_e="small"),{level:ze,size:_e}}typeof c_!="undefined"&&c_.exports?c_.exports=h:window.tinycolor=h})(Math)});var yn=me(zy=>{"use strict";var r8=yc(),Dy=Array.isArray;function zj(e,t){var r,i;for(r=0;r<e.length;r++){if(i=e[r],i!==null&&typeof i=="object")return!1;i!==void 0&&(t[r]=i)}return!0}zy.extendFlat=function(){return Py(arguments,!1,!1,!1)};zy.extendDeep=function(){return Py(arguments,!0,!1,!1)};zy.extendDeepAll=function(){return Py(arguments,!0,!0,!1)};zy.extendDeepNoArrays=function(){return Py(arguments,!0,!1,!0)};function Py(e,t,r,i){var a=e[0],s=e.length,l,f,h,v,m,_,T;if(s===2&&Dy(a)&&Dy(e[1])&&a.length===0){if(T=zj(e[1],a),T)return a;a.splice(0,a.length)}for(var M=1;M<s;M++){l=e[M];for(f in l)h=a[f],v=l[f],i&&Dy(v)?a[f]=v:t&&v&&(r8(v)||(m=Dy(v)))?(m?(m=!1,_=h&&Dy(h)?h:[]):_=h&&r8(h)?h:{},a[f]=Py([_,v],t,r,i)):(typeof v!="undefined"||r)&&(a[f]=v)}return a}});var qo=me((lye,a8)=>{"use strict";a8.exports=function(e){var t=e.variantValues,r=e.editType,i=e.colorEditType;i===void 0&&(i=r);var a={editType:r,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};e.noNumericWeightValues&&(a.valType="enumerated",a.values=a.extras,a.extras=void 0,a.min=void 0,a.max=void 0);var s={family:{valType:"string",noBlank:!0,strict:!0,editType:r},size:{valType:"number",min:1,editType:r},color:{valType:"color",editType:i},weight:a,style:{editType:r,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:e.noFontVariant?void 0:{editType:r,valType:"enumerated",values:t||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:e.noFontTextcase?void 0:{editType:r,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:e.noFontLineposition?void 0:{editType:r,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:e.noFontShadow?void 0:{editType:r,valType:"string",dflt:e.autoShadowDflt?"auto":"none"},editType:r};return e.autoSize&&(s.size.dflt="auto"),e.autoColor&&(s.color.dflt="auto"),e.arrayOk&&(s.family.arrayOk=!0,s.weight.arrayOk=!0,s.style.arrayOk=!0,e.noFontVariant||(s.variant.arrayOk=!0),e.noFontTextcase||(s.textcase.arrayOk=!0),e.noFontLineposition||(s.lineposition.arrayOk=!0),e.noFontShadow||(s.shadow.arrayOk=!0),s.size.arrayOk=!0,s.color.arrayOk=!0),s}});var Iy=me((uye,i8)=>{"use strict";i8.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}});var x0=me((fye,s8)=>{"use strict";var n8=Iy(),o8=qo(),Q3=o8({editType:"none"});Q3.family.dflt=n8.HOVERFONT;Q3.size.dflt=n8.HOVERFONTSIZE;s8.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:Q3,grouptitlefont:o8({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}});var h_=me((cye,l8)=>{"use strict";var Ij=qo(),Ry=x0().hoverlabel,Fy=yn().extendFlat;l8.exports={hoverlabel:{bgcolor:Fy({},Ry.bgcolor,{arrayOk:!0}),bordercolor:Fy({},Ry.bordercolor,{arrayOk:!0}),font:Ij({arrayOk:!0,editType:"none"}),align:Fy({},Ry.align,{arrayOk:!0}),namelength:Fy({},Ry.namelength,{arrayOk:!0}),showarrow:Fy({},Ry.showarrow),editType:"none"}}});var ys=me((hye,u8)=>{"use strict";var Rj=qo(),Fj=h_();u8.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:Rj({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:Fj.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}});var ud=me((vye,h8)=>{"use strict";var qj=Mf(),v_={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},f8=v_.RdBu;function Nj(e,t){if(t||(t=f8),!e)return t;function r(){try{e=v_[e]||JSON.parse(e)}catch(i){e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),c8(e)?e:t}function c8(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t||!qj(i[1]).isValid())return!1;t=+i[0]}return!0}function Bj(e){return v_[e]!==void 0?!0:c8(e)}h8.exports={scales:v_,defaultScale:f8,get:Nj,isValid:Bj}});var Sf=me(fd=>{"use strict";fd.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];fd.defaultLine="#444";fd.lightLine="#eee";fd.background="#fff";fd.borderLine="#BEC8D9";fd.lightFraction=100*10/11});var Oa=me((pye,v8)=>{"use strict";var Fs=Mf(),Oj=Da(),Uj=al().isTypedArray,$n=v8.exports={},d_=Sf();$n.defaults=d_.defaults;var Vj=$n.defaultLine=d_.defaultLine;$n.lightLine=d_.lightLine;var ew=$n.background=d_.background;$n.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};$n.rgb=function(e){return $n.tinyRGB(Fs(e))};$n.opacity=function(e){return e?Fs(e).getAlpha():0};$n.addOpacity=function(e,t){var r=Fs(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};$n.combine=function(e,t){var r=Fs(e).toRgb();if(r.a===1)return Fs(e).toRgbString();var i=Fs(t||ew).toRgb(),a=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},s={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return Fs(s).toRgbString()};$n.interpolate=function(e,t,r){var i=Fs(e).toRgb(),a=Fs(t).toRgb(),s={r:r*i.r+(1-r)*a.r,g:r*i.g+(1-r)*a.g,b:r*i.b+(1-r)*a.b};return Fs(s).toRgbString()};$n.contrast=function(e,t,r){var i=Fs(e);i.getAlpha()!==1&&(i=Fs($n.combine(e,ew)));var a=i.isDark()?t?i.lighten(t):ew:r?i.darken(r):Vj;return a.toString()};$n.stroke=function(e,t){var r=Fs(t);e.style({stroke:$n.tinyRGB(r),"stroke-opacity":r.getAlpha()})};$n.fill=function(e,t){var r=Fs(t);e.style({fill:$n.tinyRGB(r),"fill-opacity":r.getAlpha()})};$n.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,i,a,s;for(r=0;r<t.length;r++)if(a=t[r],s=e[a],a.slice(-5)==="color")if(Array.isArray(s))for(i=0;i<s.length;i++)s[i]=$3(s[i]);else e[a]=$3(s);else if(a.slice(-10)==="colorscale"&&Array.isArray(s))for(i=0;i<s.length;i++)Array.isArray(s[i])&&(s[i][1]=$3(s[i][1]));else if(Array.isArray(s)){var l=s[0];if(!Array.isArray(l)&&l&&typeof l=="object")for(i=0;i<s.length;i++)$n.clean(s[i])}else s&&typeof s=="object"&&!Uj(s)&&$n.clean(s)}};function $3(e){if(Oj(e)||typeof e!="string")return e;var t=e.trim();if(t.slice(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var i=r[1].trim().split(/\s*[\s,]\s*/),a=t.charAt(3)==="a"&&i.length===4;if(!a&&i.length!==3)return e;for(var s=0;s<i.length;s++){if(!i[s].length||(i[s]=Number(i[s]),!(i[s]>=0)))return e;if(s===3)i[s]>1&&(i[s]=1);else if(i[s]>=1)return e}var l=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return a?"rgba("+l+", "+i[3]+")":"rgb("+l+")"}});var p_=me((mye,d8)=>{"use strict";d8.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}});var b0=me(p8=>{"use strict";p8.counter=function(e,t,r,i){var a=(t||"")+(r?"":"$"),s=i===!1?"":"^";return e==="xy"?new RegExp(s+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a):new RegExp(s+e+"([2-9]|[1-9][0-9]+)?"+a)}});var _8=me(qs=>{"use strict";var tw=Da(),m8=Mf(),y8=yn().extendFlat,Hj=ys(),Gj=ud(),Zj=Oa(),Yj=p_().DESELECTDIM,w0=Ey(),g8=b0().counter,Wj=_0().modHalf,Iu=al().isArrayOrTypedArray,Ch=al().isTypedArraySpec,Eh=al().decodeTypedArraySpec;qs.valObjectMeta={data_array:{coerceFunction:function(e,t,r){t.set(Iu(e)?e:Ch(e)?Eh(e):r)}},enumerated:{coerceFunction:function(e,t,r,i){i.coerceNumber&&(e=+e),i.values.indexOf(e)===-1?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,i=0;i<r.length;i++){var a=String(r[i]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var s=new RegExp(a.slice(1,-1));if(s.test(e))return!0}else if(e===r[i])return!0}return!1}},boolean:{coerceFunction:function(e,t,r,i){let a=s=>s===!0||s===!1;a(e)||i.arrayOk&&Array.isArray(e)&&e.length>0&&e.every(a)?t.set(e):t.set(r)}},number:{coerceFunction:function(e,t,r,i){Ch(e)&&(e=Eh(e)),!tw(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},integer:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}Ch(e)&&(e=Eh(e)),e%1||!tw(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},string:{coerceFunction:function(e,t,r,i){if(typeof e!="string"){var a=typeof e=="number";i.strict===!0||!a?t.set(r):t.set(String(e))}else i.noBlank&&!e?t.set(r):t.set(e)}},color:{coerceFunction:function(e,t,r){Ch(e)&&(e=Eh(e)),m8(e).isValid()?t.set(e):t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function i(a){return m8(a).isValid()}!Array.isArray(e)||!e.length?t.set(r):e.every(i)?t.set(e):t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(Gj.get(e,r))}},angle:{coerceFunction:function(e,t,r){Ch(e)&&(e=Eh(e)),e==="auto"?t.set("auto"):tw(e)?t.set(Wj(+e,360)):t.set(r)}},subplotid:{coerceFunction:function(e,t,r,i){var a=i.regex||g8(r);let s=l=>typeof l=="string"&&a.test(l);s(e)||i.arrayOk&&Iu(e)&&e.length>0&&e.every(s)?t.set(e):t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r?!0:typeof e!="string"?!1:!!g8(r).test(e)}},flaglist:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!="string"){t.set(r);return}for(var a=e.split("+"),s=0;s<a.length;){var l=a[s];i.flags.indexOf(l)===-1||a.indexOf(l)<s?a.splice(s,1):s++}a.length?t.set(a.join("+")):t.set(r)}},any:{coerceFunction:function(e,t,r){e===void 0?t.set(r):t.set(Ch(e)?Eh(e):e)}},info_array:{coerceFunction:function(e,t,r,i){function a(O,q,z){var N,H={set:function(V){N=V}};return z===void 0&&(z=q.dflt),qs.valObjectMeta[q.valType].coerceFunction(O,H,z,q),N}if(Ch(e)&&(e=Eh(e)),!Iu(e)){t.set(r);return}var s=i.dimensions===2||i.dimensions==="1-2"&&Array.isArray(e)&&Iu(e[0]),l=i.items,f=[],h=Array.isArray(l),v=h&&s&&Iu(l[0]),m=s&&h&&!v,_=h&&!m?l.length:e.length,T,M,C,E,L,I;if(r=Array.isArray(r)?r:[],s)for(T=0;T<_;T++)for(f[T]=[],C=Iu(e[T])?e[T]:[],m?L=l.length:h?L=l[T].length:L=C.length,M=0;M<L;M++)m?E=l[M]:h?E=l[T][M]:E=l,I=a(C[M],E,(r[T]||[])[M]),I!==void 0&&(f[T][M]=I);else for(T=0;T<_;T++)I=a(e[T],h?l[T]:l,r[T]),I!==void 0&&(f[T]=I);t.set(f)},validateFunction:function(e,t){if(!Iu(e))return!1;var r=t.items,i=Array.isArray(r),a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return!1;for(var s=0;s<e.length;s++)if(a){if(!Iu(e[s])||!t.freeLength&&e[s].length!==r[s].length)return!1;for(var l=0;l<e[s].length;l++)if(!m_(e[s][l],i?r[s][l]:r))return!1}else if(!m_(e[s],i?r[s]:r))return!1;return!0}}};qs.coerce=function(e,t,r,i,a){var s=w0(r,i).get(),l=w0(e,i),f=w0(t,i),h=l.get(),v=t._template;if(h===void 0&&v&&(h=w0(v,i).get(),v=0),a===void 0&&(a=s.dflt),s.arrayOk){if(Iu(h))return f.set(h),h;if(Ch(h))return h=Eh(h),f.set(h),h}var m=qs.valObjectMeta[s.valType].coerceFunction;m(h,f,a,s);var _=f.get();return v&&_===a&&!m_(h,s)&&(h=w0(v,i).get(),m(h,f,a,s),_=f.get()),_};qs.coerce2=function(e,t,r,i,a){var s=w0(e,i),l=qs.coerce(e,t,r,i,a),f=s.get();return f!=null?l:!1};qs.coerceFont=function(e,t,r,i){i||(i={}),r=y8({},r),r=y8(r,i.overrideDflt||{});var a={family:e(t+".family",r.family),size:e(t+".size",r.size),color:e(t+".color",r.color),weight:e(t+".weight",r.weight),style:e(t+".style",r.style)};if(i.noFontVariant||(a.variant=e(t+".variant",r.variant)),i.noFontLineposition||(a.lineposition=e(t+".lineposition",r.lineposition)),i.noFontTextcase||(a.textcase=e(t+".textcase",r.textcase)),!i.noFontShadow){var s=r.shadow;s==="none"&&i.autoShadowDflt&&(s="auto"),a.shadow=e(t+".shadow",s)}return a};qs.coercePattern=function(e,t,r,i){var a=e(t+".shape"),s;if(a||(s=e(t+".path")),a||s){a&&e(t+".solidity"),e(t+".size");var l=e(t+".fillmode"),f=l==="overlay";if(!i){var h=e(t+".bgcolor",f?r:void 0);e(t+".fgcolor",f?Zj.contrast(h):r)}e(t+".fgopacity",f?.5:1)}};qs.coerceHoverinfo=function(e,t,r){var i=t._module.attributes,a=i.hoverinfo?i:Hj,s=a.hoverinfo,l;if(r._dataLength===1){var f=s.dflt==="all"?s.flags.slice():s.dflt.split("+");f.splice(f.indexOf("name"),1),l=f.join("+")}return qs.coerce(e,t,a,"hoverinfo",l)};qs.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r=e.marker.opacity;if(r!==void 0){var i,a;!Iu(r)&&!e.selected&&!e.unselected&&(i=r,a=Yj*r),t("selected.marker.opacity",i),t("unselected.marker.opacity",a)}}};function m_(e,t){var r=qs.valObjectMeta[t.valType];if(t.arrayOk&&Iu(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},a=i,s={set:function(l){a=l}};return r.coerceFunction(e,s,i,t),a!==i}qs.validate=m_});var cd=me((_ye,T8)=>{"use strict";var x8={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},b8={};function w8(e,t){for(var r in e){var i=e[r];i.valType?t[r]=i.dflt:(t[r]||(t[r]={}),w8(i,t[r]))}}w8(x8,b8);T8.exports={configAttributes:x8,dfltConfig:b8}});var aw=me((xye,A8)=>{"use strict";var rw=ja(),Xj=Da(),qy=[];A8.exports=function(e,t){if(qy.indexOf(e)!==-1)return;qy.push(e);var r=1e3;Xj(t)?r=t:t==="long"&&(r=3e3);var i=rw.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var a=i.selectAll(".notifier-note").data(qy);function s(l){l.duration(700).style("opacity",0).each("end",function(f){var h=qy.indexOf(f);h!==-1&&qy.splice(h,1),rw.select(this).remove()})}a.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var f=rw.select(this);f.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){f.transition().call(s)});for(var h=f.append("p"),v=l.split(/<br\s*\/?>/g),m=0;m<v.length;m++)m&&h.append("br"),h.append("span").text(v[m]);t==="stick"?f.transition().duration(350).style("opacity",1):f.transition().duration(700).style("opacity",1).transition().delay(r).call(s)})}});var Lh=me((bye,M8)=>{"use strict";var T0=cd().dfltConfig,iw=aw(),nw=M8.exports={};nw.log=function(){var e;if(T0.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(T0.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);iw(r.join("<br>"),"long")}};nw.warn=function(){var e;if(T0.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(T0.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);iw(r.join("<br>"),"stick")}};nw.error=function(){var e;if(T0.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(T0.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);iw(r.join("<br>"),"stick")}}});var y_=me((wye,S8)=>{"use strict";S8.exports=function(){}});var ow=me((Tye,k8)=>{"use strict";k8.exports=function(t,r){if(r instanceof RegExp){for(var i=r.toString(),a=0;a<t.length;a++)if(t[a]instanceof RegExp&&t[a].toString()===i)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t}});var E8=me((Aye,C8)=>{C8.exports=jj;function jj(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var D8=me((Mye,L8)=>{L8.exports=Jj;function Jj(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}});var z8=me((Sye,P8)=>{P8.exports=Kj;function Kj(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var sw=me((kye,I8)=>{I8.exports=Qj;function Qj(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var F8=me((Cye,R8)=>{R8.exports=$j;function $j(e,t){if(e===t){var r=t[1],i=t[2],a=t[3],s=t[6],l=t[7],f=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=a,e[13]=l,e[14]=f}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}});var N8=me((Eye,q8)=>{q8.exports=eJ;function eJ(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],f=t[5],h=t[6],v=t[7],m=t[8],_=t[9],T=t[10],M=t[11],C=t[12],E=t[13],L=t[14],I=t[15],O=r*f-i*l,q=r*h-a*l,z=r*v-s*l,N=i*h-a*f,H=i*v-s*f,V=a*v-s*h,W=m*E-_*C,J=m*L-T*C,ee=m*I-M*C,ie=_*L-T*E,oe=_*I-M*E,fe=T*I-M*L,le=O*fe-q*oe+z*ie+N*ee-H*J+V*W;return le?(le=1/le,e[0]=(f*fe-h*oe+v*ie)*le,e[1]=(a*oe-i*fe-s*ie)*le,e[2]=(E*V-L*H+I*N)*le,e[3]=(T*H-_*V-M*N)*le,e[4]=(h*ee-l*fe-v*J)*le,e[5]=(r*fe-a*ee+s*J)*le,e[6]=(L*z-C*V-I*q)*le,e[7]=(m*V-T*z+M*q)*le,e[8]=(l*oe-f*ee+v*W)*le,e[9]=(i*ee-r*oe-s*W)*le,e[10]=(C*H-E*z+I*O)*le,e[11]=(_*z-m*H-M*O)*le,e[12]=(f*J-l*ie-h*W)*le,e[13]=(r*ie-i*J+a*W)*le,e[14]=(E*q-C*N-L*O)*le,e[15]=(m*N-_*q+T*O)*le,e):null}});var O8=me((Lye,B8)=>{B8.exports=tJ;function tJ(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],f=t[5],h=t[6],v=t[7],m=t[8],_=t[9],T=t[10],M=t[11],C=t[12],E=t[13],L=t[14],I=t[15];return e[0]=f*(T*I-M*L)-_*(h*I-v*L)+E*(h*M-v*T),e[1]=-(i*(T*I-M*L)-_*(a*I-s*L)+E*(a*M-s*T)),e[2]=i*(h*I-v*L)-f*(a*I-s*L)+E*(a*v-s*h),e[3]=-(i*(h*M-v*T)-f*(a*M-s*T)+_*(a*v-s*h)),e[4]=-(l*(T*I-M*L)-m*(h*I-v*L)+C*(h*M-v*T)),e[5]=r*(T*I-M*L)-m*(a*I-s*L)+C*(a*M-s*T),e[6]=-(r*(h*I-v*L)-l*(a*I-s*L)+C*(a*v-s*h)),e[7]=r*(h*M-v*T)-l*(a*M-s*T)+m*(a*v-s*h),e[8]=l*(_*I-M*E)-m*(f*I-v*E)+C*(f*M-v*_),e[9]=-(r*(_*I-M*E)-m*(i*I-s*E)+C*(i*M-s*_)),e[10]=r*(f*I-v*E)-l*(i*I-s*E)+C*(i*v-s*f),e[11]=-(r*(f*M-v*_)-l*(i*M-s*_)+m*(i*v-s*f)),e[12]=-(l*(_*L-T*E)-m*(f*L-h*E)+C*(f*T-h*_)),e[13]=r*(_*L-T*E)-m*(i*L-a*E)+C*(i*T-a*_),e[14]=-(r*(f*L-h*E)-l*(i*L-a*E)+C*(i*h-a*f)),e[15]=r*(f*T-h*_)-l*(i*T-a*_)+m*(i*h-a*f),e}});var V8=me((Dye,U8)=>{U8.exports=rJ;function rJ(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],f=e[6],h=e[7],v=e[8],m=e[9],_=e[10],T=e[11],M=e[12],C=e[13],E=e[14],L=e[15],I=t*l-r*s,O=t*f-i*s,q=t*h-a*s,z=r*f-i*l,N=r*h-a*l,H=i*h-a*f,V=v*C-m*M,W=v*E-_*M,J=v*L-T*M,ee=m*E-_*C,ie=m*L-T*C,oe=_*L-T*E;return I*oe-O*ie+q*ee+z*J-N*W+H*V}});var G8=me((Pye,H8)=>{H8.exports=aJ;function aJ(e,t,r){var i=t[0],a=t[1],s=t[2],l=t[3],f=t[4],h=t[5],v=t[6],m=t[7],_=t[8],T=t[9],M=t[10],C=t[11],E=t[12],L=t[13],I=t[14],O=t[15],q=r[0],z=r[1],N=r[2],H=r[3];return e[0]=q*i+z*f+N*_+H*E,e[1]=q*a+z*h+N*T+H*L,e[2]=q*s+z*v+N*M+H*I,e[3]=q*l+z*m+N*C+H*O,q=r[4],z=r[5],N=r[6],H=r[7],e[4]=q*i+z*f+N*_+H*E,e[5]=q*a+z*h+N*T+H*L,e[6]=q*s+z*v+N*M+H*I,e[7]=q*l+z*m+N*C+H*O,q=r[8],z=r[9],N=r[10],H=r[11],e[8]=q*i+z*f+N*_+H*E,e[9]=q*a+z*h+N*T+H*L,e[10]=q*s+z*v+N*M+H*I,e[11]=q*l+z*m+N*C+H*O,q=r[12],z=r[13],N=r[14],H=r[15],e[12]=q*i+z*f+N*_+H*E,e[13]=q*a+z*h+N*T+H*L,e[14]=q*s+z*v+N*M+H*I,e[15]=q*l+z*m+N*C+H*O,e}});var Y8=me((zye,Z8)=>{Z8.exports=iJ;function iJ(e,t,r){var i=r[0],a=r[1],s=r[2],l,f,h,v,m,_,T,M,C,E,L,I;return t===e?(e[12]=t[0]*i+t[4]*a+t[8]*s+t[12],e[13]=t[1]*i+t[5]*a+t[9]*s+t[13],e[14]=t[2]*i+t[6]*a+t[10]*s+t[14],e[15]=t[3]*i+t[7]*a+t[11]*s+t[15]):(l=t[0],f=t[1],h=t[2],v=t[3],m=t[4],_=t[5],T=t[6],M=t[7],C=t[8],E=t[9],L=t[10],I=t[11],e[0]=l,e[1]=f,e[2]=h,e[3]=v,e[4]=m,e[5]=_,e[6]=T,e[7]=M,e[8]=C,e[9]=E,e[10]=L,e[11]=I,e[12]=l*i+m*a+C*s+t[12],e[13]=f*i+_*a+E*s+t[13],e[14]=h*i+T*a+L*s+t[14],e[15]=v*i+M*a+I*s+t[15]),e}});var X8=me((Iye,W8)=>{W8.exports=nJ;function nJ(e,t,r){var i=r[0],a=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var J8=me((Rye,j8)=>{j8.exports=oJ;function oJ(e,t,r,i){var a=i[0],s=i[1],l=i[2],f=Math.sqrt(a*a+s*s+l*l),h,v,m,_,T,M,C,E,L,I,O,q,z,N,H,V,W,J,ee,ie,oe,fe,le,Te;return Math.abs(f)<1e-6?null:(f=1/f,a*=f,s*=f,l*=f,h=Math.sin(r),v=Math.cos(r),m=1-v,_=t[0],T=t[1],M=t[2],C=t[3],E=t[4],L=t[5],I=t[6],O=t[7],q=t[8],z=t[9],N=t[10],H=t[11],V=a*a*m+v,W=s*a*m+l*h,J=l*a*m-s*h,ee=a*s*m-l*h,ie=s*s*m+v,oe=l*s*m+a*h,fe=a*l*m+s*h,le=s*l*m-a*h,Te=l*l*m+v,e[0]=_*V+E*W+q*J,e[1]=T*V+L*W+z*J,e[2]=M*V+I*W+N*J,e[3]=C*V+O*W+H*J,e[4]=_*ee+E*ie+q*oe,e[5]=T*ee+L*ie+z*oe,e[6]=M*ee+I*ie+N*oe,e[7]=C*ee+O*ie+H*oe,e[8]=_*fe+E*le+q*Te,e[9]=T*fe+L*le+z*Te,e[10]=M*fe+I*le+N*Te,e[11]=C*fe+O*le+H*Te,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}});var Q8=me((Fye,K8)=>{K8.exports=sJ;function sJ(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[4],l=t[5],f=t[6],h=t[7],v=t[8],m=t[9],_=t[10],T=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+v*i,e[5]=l*a+m*i,e[6]=f*a+_*i,e[7]=h*a+T*i,e[8]=v*a-s*i,e[9]=m*a-l*i,e[10]=_*a-f*i,e[11]=T*a-h*i,e}});var eS=me((qye,$8)=>{$8.exports=lJ;function lJ(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],l=t[1],f=t[2],h=t[3],v=t[8],m=t[9],_=t[10],T=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-v*i,e[1]=l*a-m*i,e[2]=f*a-_*i,e[3]=h*a-T*i,e[8]=s*i+v*a,e[9]=l*i+m*a,e[10]=f*i+_*a,e[11]=h*i+T*a,e}});var rS=me((Nye,tS)=>{tS.exports=uJ;function uJ(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],l=t[1],f=t[2],h=t[3],v=t[4],m=t[5],_=t[6],T=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+v*i,e[1]=l*a+m*i,e[2]=f*a+_*i,e[3]=h*a+T*i,e[4]=v*a-s*i,e[5]=m*a-l*i,e[6]=_*a-f*i,e[7]=T*a-h*i,e}});var iS=me((Bye,aS)=>{aS.exports=fJ;function fJ(e,t,r){var i,a,s,l=r[0],f=r[1],h=r[2],v=Math.sqrt(l*l+f*f+h*h);return Math.abs(v)<1e-6?null:(v=1/v,l*=v,f*=v,h*=v,i=Math.sin(t),a=Math.cos(t),s=1-a,e[0]=l*l*s+a,e[1]=f*l*s+h*i,e[2]=h*l*s-f*i,e[3]=0,e[4]=l*f*s-h*i,e[5]=f*f*s+a,e[6]=h*f*s+l*i,e[7]=0,e[8]=l*h*s+f*i,e[9]=f*h*s-l*i,e[10]=h*h*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}});var oS=me((Oye,nS)=>{nS.exports=cJ;function cJ(e,t,r){var i=t[0],a=t[1],s=t[2],l=t[3],f=i+i,h=a+a,v=s+s,m=i*f,_=i*h,T=i*v,M=a*h,C=a*v,E=s*v,L=l*f,I=l*h,O=l*v;return e[0]=1-(M+E),e[1]=_+O,e[2]=T-I,e[3]=0,e[4]=_-O,e[5]=1-(m+E),e[6]=C+L,e[7]=0,e[8]=T+I,e[9]=C-L,e[10]=1-(m+M),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}});var lS=me((Uye,sS)=>{sS.exports=hJ;function hJ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var fS=me((Vye,uS)=>{uS.exports=vJ;function vJ(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});var hS=me((Hye,cS)=>{cS.exports=dJ;function dJ(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var dS=me((Gye,vS)=>{vS.exports=pJ;function pJ(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var mS=me((Zye,pS)=>{pS.exports=mJ;function mJ(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var gS=me((Yye,yS)=>{yS.exports=yJ;function yJ(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=r+r,f=i+i,h=a+a,v=r*l,m=i*l,_=i*f,T=a*l,M=a*f,C=a*h,E=s*l,L=s*f,I=s*h;return e[0]=1-_-C,e[1]=m+I,e[2]=T-L,e[3]=0,e[4]=m-I,e[5]=1-v-C,e[6]=M+E,e[7]=0,e[8]=T+L,e[9]=M-E,e[10]=1-v-_,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var xS=me((Wye,_S)=>{_S.exports=gJ;function gJ(e,t,r,i,a,s,l){var f=1/(r-t),h=1/(a-i),v=1/(s-l);return e[0]=s*2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*h,e[6]=0,e[7]=0,e[8]=(r+t)*f,e[9]=(a+i)*h,e[10]=(l+s)*v,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*s*2*v,e[15]=0,e}});var wS=me((Xye,bS)=>{bS.exports=_J;function _J(e,t,r,i,a){var s=1/Math.tan(t/2),l=1/(i-a);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*i*l,e[15]=0,e}});var AS=me((jye,TS)=>{TS.exports=xJ;function xJ(e,t,r,i){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),h=2/(l+f),v=2/(a+s);return e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=-((l-f)*h*.5),e[9]=(a-s)*v*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}});var SS=me((Jye,MS)=>{MS.exports=bJ;function bJ(e,t,r,i,a,s,l){var f=1/(t-r),h=1/(i-a),v=1/(s-l);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*v,e[11]=0,e[12]=(t+r)*f,e[13]=(a+i)*h,e[14]=(l+s)*v,e[15]=1,e}});var CS=me((Kye,kS)=>{var wJ=sw();kS.exports=TJ;function TJ(e,t,r,i){var a,s,l,f,h,v,m,_,T,M,C=t[0],E=t[1],L=t[2],I=i[0],O=i[1],q=i[2],z=r[0],N=r[1],H=r[2];return Math.abs(C-z)<1e-6&&Math.abs(E-N)<1e-6&&Math.abs(L-H)<1e-6?wJ(e):(m=C-z,_=E-N,T=L-H,M=1/Math.sqrt(m*m+_*_+T*T),m*=M,_*=M,T*=M,a=O*T-q*_,s=q*m-I*T,l=I*_-O*m,M=Math.sqrt(a*a+s*s+l*l),M?(M=1/M,a*=M,s*=M,l*=M):(a=0,s=0,l=0),f=_*l-T*s,h=T*a-m*l,v=m*s-_*a,M=Math.sqrt(f*f+h*h+v*v),M?(M=1/M,f*=M,h*=M,v*=M):(f=0,h=0,v=0),e[0]=a,e[1]=f,e[2]=m,e[3]=0,e[4]=s,e[5]=h,e[6]=_,e[7]=0,e[8]=l,e[9]=v,e[10]=T,e[11]=0,e[12]=-(a*C+s*E+l*L),e[13]=-(f*C+h*E+v*L),e[14]=-(m*C+_*E+T*L),e[15]=1,e)}});var LS=me((Qye,ES)=>{ES.exports=AJ;function AJ(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}});var lw=me(($ye,DS)=>{DS.exports={create:E8(),clone:D8(),copy:z8(),identity:sw(),transpose:F8(),invert:N8(),adjoint:O8(),determinant:V8(),multiply:G8(),translate:Y8(),scale:X8(),rotate:J8(),rotateX:Q8(),rotateY:eS(),rotateZ:rS(),fromRotation:iS(),fromRotationTranslation:oS(),fromScaling:lS(),fromTranslation:fS(),fromXRotation:hS(),fromYRotation:dS(),fromZRotation:mS(),fromQuat:gS(),frustum:xS(),perspective:wS(),perspectiveFromFieldOfView:AS(),ortho:SS(),lookAt:CS(),str:LS()}});var g_=me(Cn=>{"use strict";var MJ=lw();Cn.init2dArray=function(e,t){for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(t);return r};Cn.transposeRagged=function(e){var t=0,r=e.length,i,a;for(i=0;i<r;i++)t=Math.max(t,e[i].length);var s=new Array(t);for(i=0;i<t;i++)for(s[i]=new Array(r),a=0;a<r;a++)s[i][a]=e[a][i];return s};Cn.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length,i,a;if(e[0].length)for(i=new Array(r),a=0;a<r;a++)i[a]=Cn.dot(e[a],t);else if(t[0].length){var s=Cn.transposeRagged(t);for(i=new Array(s.length),a=0;a<s.length;a++)i[a]=Cn.dot(e,s[a])}else for(i=0,a=0;a<r;a++)i+=e[a]*t[a];return i};Cn.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};Cn.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};Cn.rotationXYMatrix=function(e,t,r){return Cn.dot(Cn.dot(Cn.translationMatrix(t,r),Cn.rotationMatrix(e)),Cn.translationMatrix(-t,-r))};Cn.apply3DTransform=function(e){return function(){var t=arguments,r=arguments.length===1?t[0]:[t[0],t[1],t[2]||0];return Cn.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}};Cn.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return Cn.dot(e,[r[0],r[1],1]).slice(0,2)}};Cn.apply2DTransform2=function(e){var t=Cn.apply2DTransform(e);return function(r){return t(r.slice(0,2)).concat(t(r.slice(2,4)))}};Cn.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};Cn.inverseTransformMatrix=function(e){var t=[];return MJ.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}});var Ny=me((tge,qS)=>{"use strict";var SJ=ja(),PS=Lh(),kJ=g_(),CJ=lw();function EJ(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function LJ(e){var t=SJ.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function zS(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function DJ(e,t){IS("global",e,t)}function IS(e,t,r){var i="plotly.js-style-"+e,a=document.getElementById(i);if(!(a&&a.matches(".no-inline-styles"))){a||(a=document.createElement("style"),a.setAttribute("id",i),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var s=a.sheet;s?s.insertRule?s.insertRule(t+"{"+r+"}",0):s.addRule?s.addRule(t,r,0):PS.warn("addStyleRule failed"):PS.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function PJ(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&zS(r)}function zJ(e,t,r,i,a,s){var l=i.split(":"),f=a.split(":"),h="data-btn-style-event-added";s||(s=document),s.querySelectorAll(e).forEach(function(v){v.getAttribute(h)||(v.addEventListener("mouseenter",function(){var m=this.querySelector(r);m&&(m.style[l[0]]=l[1])}),v.addEventListener("mouseleave",function(){var m=this.querySelector(r);m&&(t&&this.matches(t)?m.style[l[0]]=l[1]:m.style[f[0]]=f[1])}),v.setAttribute(h,!0))})}function IJ(e){var t=FS(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(i){var a=RS(i);if(a){var s=kJ.convertCssMatrix(a);r=CJ.multiply(r,r,s)}}),r}function RS(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function FS(e){for(var t=[];RJ(e);)t.push(e),e=e.parentNode,typeof ShadowRoot=="function"&&e instanceof ShadowRoot&&(e=e.host);return t}function RJ(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function FJ(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}qS.exports={getGraphDiv:EJ,isPlotDiv:LJ,removeElement:zS,addStyleRule:DJ,addRelatedStyleRule:IS,deleteRelatedStyleRule:PJ,setStyleOnHover:zJ,getFullTransformMatrix:IJ,getElementTransformMatrix:RS,getElementAndAncestors:FS,equalDomRects:FJ}});var By=me((rge,NS)=>{"use strict";NS.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}});var il=me((age,ZS)=>{"use strict";var OS=yn().extendFlat,qJ=yc(),US={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},VS={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},NJ=US.flags.slice().concat(["fullReplot"]),BJ=VS.flags.slice().concat("layoutReplot");ZS.exports={traces:US,layout:VS,traceFlags:function(){return BS(NJ)},layoutFlags:function(){return BS(BJ)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var i=r.split("+"),a=0;a<i.length;a++)e[i[a]]=!0},overrideAll:HS};function BS(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function HS(e,t,r){var i=OS({},e);for(var a in i){var s=i[a];qJ(s)&&(i[a]=GS(s,t,r,a))}return r==="from-root"&&(i.editType=t),i}function GS(e,t,r,i){if(e.valType){var a=OS({},e);if(a.editType=t,Array.isArray(e.items)){a.items=new Array(e.items.length);for(var s=0;s<e.items.length;s++)a.items[s]=GS(e.items[s],t,"from-root")}return a}else return HS(e,t,i.charAt(0)==="_"?"nested":"from-root")}});var gc=me(uw=>{"use strict";uw.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};uw.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}});var fw=me((nge,YS)=>{"use strict";YS.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}});var kf=me(A0=>{"use strict";var{DATE_FORMAT_LINK:OJ,FORMAT_LINK:UJ}=fw(),VJ=["Variables that can't be found will be replaced with the specifier.",'For example, a template of "data: %{x}, %{y}" will result in a value of "data: 1, %{y}" if x is 1 and y is missing.',"Variables with an undefined value will be replaced with the fallback value."].join(" ");function HJ({supportOther:e}={}){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(e?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,UJ,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,OJ,"for details on the date formatting syntax.",VJ].join(" ")}A0.templateFormatStringDescription=HJ;A0.hovertemplateAttrs=({editType:e="none",arrayOk:t}={},r={})=>sd({valType:"string",dflt:"",editType:e},t!==!1?{arrayOk:!0}:{});A0.texttemplateAttrs=({editType:e="calc",arrayOk:t}={},r={})=>sd({valType:"string",dflt:"",editType:e},t!==!1?{arrayOk:!0}:{});A0.shapeTexttemplateAttrs=({editType:e="arraydraw",newshape:t}={},r={})=>({valType:"string",dflt:"",editType:e});A0.templatefallbackAttrs=({editType:e="none"}={})=>({valType:"any",dflt:"-",editType:e})});var b_=me((lge,QS)=>{"use strict";function Dh(e,t){return t?t.d2l(e):e}function WS(e,t){return t?t.l2d(e):e}function GJ(e){return e.x0}function ZJ(e){return e.x1}function YJ(e){return e.y0}function WJ(e){return e.y1}function XS(e){return e.x0shift||0}function jS(e){return e.x1shift||0}function JS(e){return e.y0shift||0}function KS(e){return e.y1shift||0}function __(e,t){return Dh(e.x1,t)+jS(e)-Dh(e.x0,t)-XS(e)}function x_(e,t,r){return Dh(e.y1,r)+KS(e)-Dh(e.y0,r)-JS(e)}function XJ(e,t){return Math.abs(__(e,t))}function jJ(e,t,r){return Math.abs(x_(e,t,r))}function JJ(e,t,r){return e.type!=="line"?void 0:Math.sqrt(Math.pow(__(e,t),2)+Math.pow(x_(e,t,r),2))}function KJ(e,t){return WS((Dh(e.x1,t)+jS(e)+Dh(e.x0,t)+XS(e))/2,t)}function QJ(e,t,r){return WS((Dh(e.y1,r)+KS(e)+Dh(e.y0,r)+JS(e))/2,r)}function $J(e,t,r){return e.type!=="line"?void 0:x_(e,t,r)/__(e,t)}var eK=["x0","x1","y0","y1","dy","height","ycenter"],tK=["x0","x1","y0","y1","dx","width","xcenter"];QS.exports={x0:GJ,x1:ZJ,y0:YJ,y1:WJ,slope:$J,dx:__,dy:x_,width:XJ,height:jJ,length:JJ,xcenter:KJ,ycenter:QJ,simpleXVariables:eK,simpleYVariables:tK}});var t9=me((uge,e9)=>{"use strict";var rK=il().overrideAll,hd=ys(),$S=qo(),aK=gc().dash,Ph=yn().extendFlat,{shapeTexttemplateAttrs:iK,templatefallbackAttrs:nK}=kf(),oK=b_();e9.exports=rK({newshape:{visible:Ph({},hd.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:Ph({},hd.legend,{}),legendgroup:Ph({},hd.legendgroup,{}),legendgrouptitle:{text:Ph({},hd.legendgrouptitle.text,{}),font:$S({})},legendrank:Ph({},hd.legendrank,{}),legendwidth:Ph({},hd.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:Ph({},aK,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:Ph({},hd.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:iK({newshape:!0},{keys:Object.keys(oK)}),texttemplatefallback:nK({editType:"arraydraw"}),font:$S({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")});var a9=me((fge,r9)=>{"use strict";var sK=gc().dash,lK=yn().extendFlat;r9.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:lK({},sK,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}});var w_=me((cge,i9)=>{"use strict";i9.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}});var M0=me((hge,l9)=>{"use strict";var cw=qo(),uK=By(),T_=Sf(),n9=t9(),o9=a9(),fK=w_(),s9=yn().extendFlat,A_=cw({editType:"calc"});A_.family.dflt='"Open Sans", verdana, arial, sans-serif';A_.size.dflt=12;A_.color.dflt=T_.defaultLine;l9.exports={font:A_,title:{text:{valType:"string",editType:"layoutstyle"},font:cw({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:cw({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s9(fK({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:T_.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:T_.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:T_.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:n9.newshape,activeshape:n9.activeshape,newselection:o9.newselection,activeselection:o9.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s9({},uK.transition,{editType:"none"})}});var u9=me(()=>{(function(){if(!document.getElementById("a75c73da1cd7a97e8992659f6aed556255838daadea9ca0c9fc3af7f1ddf63c0")){var e=document.createElement("style");e.id="a75c73da1cd7a97e8992659f6aed556255838daadea9ca0c9fc3af7f1ddf63c0",e.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(e)}})()});var sa=me(Pa=>{"use strict";var S0=Lh(),f9=y_(),c9=ow(),cK=yc(),hK=Ny().addStyleRule,h9=yn(),vK=ys(),dK=M0(),pK=h9.extendFlat,hw=h9.extendDeepAll;Pa.modules={};Pa.allCategories={};Pa.allTypes=[];Pa.subplotsRegistry={};Pa.componentsRegistry={};Pa.layoutArrayContainers=[];Pa.layoutArrayRegexes=[];Pa.traceLayoutAttributes={};Pa.localeRegistry={};Pa.apiMethodRegistry={};Pa.collectableSubplotTypes=null;Pa.register=function(t){if(Pa.collectableSubplotTypes=null,t)t&&!Array.isArray(t)&&(t=[t]);else throw new Error("No argument passed to Plotly.register.");for(var r=0;r<t.length;r++){var i=t[r];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":mK(i);break;case"transform":_K(i);break;case"component":gK(i);break;case"locale":xK(i);break;case"apiMethod":var a=i.name;Pa.apiMethodRegistry[a]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};Pa.getModule=function(e){var t=Pa.modules[m9(e)];return t?t._module:!1};Pa.traceIs=function(e,t){if(e=m9(e),e==="various")return!1;var r=Pa.modules[e];return r||(e&&S0.log("Unrecognized trace type "+e+"."),r=Pa.modules[vK.type.dflt]),!!r.categories[t]};Pa.getComponentMethod=function(e,t){var r=Pa.componentsRegistry[e];return r&&r[t]||f9};Pa.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return Pa.apiMethodRegistry[e].apply(null,t)};function mK(e){var t=e.name,r=e.categories,i=e.meta;if(Pa.modules[t]){S0.log("Type "+t+" already registered");return}Pa.subplotsRegistry[e.basePlotModule.name]||yK(e.basePlotModule);for(var a={},s=0;s<r.length;s++)a[r[s]]=!0,Pa.allCategories[r[s]]=!0;Pa.modules[t]={_module:e,categories:a},i&&Object.keys(i).length&&(Pa.modules[t].meta=i),Pa.allTypes.push(t);for(var l in Pa.componentsRegistry)d9(l,t);e.layoutAttributes&&pK(Pa.traceLayoutAttributes,e.layoutAttributes);var f=e.basePlotModule,h=f.name;if(h==="mapbox"){var v=f.constants.styleRules;for(var m in v)hK(".js-plotly-plot .plotly .mapboxgl-"+m,v[m])}h==="map"&&u9(),(h==="geo"||h==="mapbox"||h==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function yK(e){var t=e.name;if(Pa.subplotsRegistry[t]){S0.log("Plot type "+t+" already registered.");return}v9(e),Pa.subplotsRegistry[t]=e;for(var r in Pa.componentsRegistry)p9(r,e.name)}function gK(e){if(typeof e.name!="string")throw new Error("Component module *name* must be a string.");var t=e.name;Pa.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&c9(Pa.layoutArrayContainers,t),v9(e));for(var r in Pa.modules)d9(t,r);for(var i in Pa.subplotsRegistry)p9(t,i);e.schema&&e.schema.layout&&hw(dK,e.schema.layout)}function _K(e){if(typeof e.name!="string")throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,r=typeof e.transform=="function",i=typeof e.calcTransform=="function";if(!r&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");r&&i&&S0.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),cK(e.attributes)||S0.log(t+" registered without an *attributes* object."),typeof e.supplyDefaults!="function"&&S0.log(t+" registered without a *supplyDefaults* method.")}function xK(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,a=e.format,s=i&&Object.keys(i).length,l=a&&Object.keys(a).length,f=Pa.localeRegistry,h=f[t];if(h||(f[t]=h={}),r!==t){var v=f[r];v||(f[r]=v={}),s&&v.dictionary===h.dictionary&&(v.dictionary=i),l&&v.format===h.format&&(v.format=a)}s&&(h.dictionary=i),l&&(h.format=a)}function v9(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)c9(Pa.layoutArrayRegexes,t[r])}}function d9(e,t){var r=Pa.componentsRegistry[e].schema;if(!(!r||!r.traces)){var i=r.traces[t];i&&hw(Pa.modules[t]._module.attributes,i)}}function p9(e,t){var r=Pa.componentsRegistry[e].schema;if(!(!r||!r.subplots)){var i=Pa.subplotsRegistry[t],a=i.layoutAttributes,s=i.attr==="subplot"?i.name:i.attr;Array.isArray(s)&&(s=s[0]);var l=r.subplots[s];a&&l&&hw(a,l)}}function m9(e){return typeof e=="object"&&(e=e.type),e}});var M9=me(En=>{"use strict";var bK=y0().timeFormat,T9=Da(),vw=Lh(),Ih=_0().mod,E0=Zi(),Gl=E0.BADNUM,Ns=E0.ONEDAY,Oy=E0.ONEHOUR,zh=E0.ONEMIN,C0=E0.ONESEC,Uy=E0.EPOCHJD,_c=sa(),y9=y0().utcFormat,wK=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,TK=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g9=new Date().getFullYear()-70;function xc(e){return e&&_c.componentsRegistry.calendars&&typeof e=="string"&&e!=="gregorian"}En.dateTick0=function(e,t){var r=AK(e,!!t);if(t<2)return r;var i=En.dateTime2ms(r,e);return i+=Ns*(t-1),En.ms2DateTime(i,0,e)};function AK(e,t){return xc(e)?t?_c.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:_c.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}En.dfltRange=function(e){return xc(e)?_c.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]};En.isJSDate=function(e){return typeof e=="object"&&e!==null&&typeof e.getTime=="function"};var S_,k_;En.dateTime2ms=function(e,t){if(En.isJSDate(e)){var r=e.getTimezoneOffset()*zh,i=(e.getUTCMinutes()-e.getMinutes())*zh+(e.getUTCSeconds()-e.getSeconds())*C0+(e.getUTCMilliseconds()-e.getMilliseconds());if(i){var a=3*zh;r=r-a/2+Ih(i-r+a/2,a)}return e=Number(e)-r,e>=S_&&e<=k_?e:Gl}if(typeof e!="string"&&typeof e!="number")return Gl;e=String(e);var s=xc(t),l=e.charAt(0);s&&(l==="G"||l==="g")&&(e=e.slice(1),t="");var f=s&&t.slice(0,7)==="chinese",h=e.match(f?TK:wK);if(!h)return Gl;var v=h[1],m=h[3]||"1",_=Number(h[5]||1),T=Number(h[7]||0),M=Number(h[9]||0),C=Number(h[11]||0);if(s){if(v.length===2)return Gl;v=Number(v);var E;try{var L=_c.getComponentMethod("calendars","getCal")(t);if(f){var I=m.charAt(m.length-1)==="i";m=parseInt(m,10),E=L.newDate(v,L.toMonthIndex(v,m,I),_)}else E=L.newDate(v,Number(m),_)}catch(q){return Gl}return E?(E.toJD()-Uy)*Ns+T*Oy+M*zh+C*C0:Gl}v.length===2?v=(Number(v)+2e3-g9)%100+g9:v=Number(v),m-=1;var O=new Date(Date.UTC(2e3,m,_,T,M));return O.setUTCFullYear(v),O.getUTCMonth()!==m||O.getUTCDate()!==_?Gl:O.getTime()+C*C0};S_=En.MIN_MS=En.dateTime2ms("-9999");k_=En.MAX_MS=En.dateTime2ms("9999-12-31 23:59:59.9999");En.isDateTime=function(e,t){return En.dateTime2ms(e,t)!==Gl};function k0(e,t){return String(e+Math.pow(10,t)).slice(1)}var M_=90*Ns,_9=3*Oy,x9=5*zh;En.ms2DateTime=function(e,t,r){if(typeof e!="number"||!(e>=S_&&e<=k_))return Gl;t||(t=0);var i=Math.floor(Ih(e+.05,1)*10),a=Math.round(e-i/10),s,l,f,h,v,m;if(xc(r)){var _=Math.floor(a/Ns)+Uy,T=Math.floor(Ih(e,Ns));try{s=_c.getComponentMethod("calendars","getCal")(r).fromJD(_).formatDate("yyyy-mm-dd")}catch(M){s=y9("G%Y-%m-%d")(new Date(a))}if(s.charAt(0)==="-")for(;s.length<11;)s="-0"+s.slice(1);else for(;s.length<10;)s="0"+s;l=t<M_?Math.floor(T/Oy):0,f=t<M_?Math.floor(T%Oy/zh):0,h=t<_9?Math.floor(T%zh/C0):0,v=t<x9?T%C0*10+i:0}else m=new Date(a),s=y9("%Y-%m-%d")(m),l=t<M_?m.getUTCHours():0,f=t<M_?m.getUTCMinutes():0,h=t<_9?m.getUTCSeconds():0,v=t<x9?m.getUTCMilliseconds()*10+i:0;return A9(s,l,f,h,v)};En.ms2DateTimeLocal=function(e){if(!(e>=S_+Ns&&e<=k_-Ns))return Gl;var t=Math.floor(Ih(e+.05,1)*10),r=new Date(Math.round(e-t/10)),i=bK("%Y-%m-%d")(r),a=r.getHours(),s=r.getMinutes(),l=r.getSeconds(),f=r.getUTCMilliseconds()*10+t;return A9(i,a,s,l,f)};function A9(e,t,r,i,a){if((t||r||i||a)&&(e+=" "+k0(t,2)+":"+k0(r,2),(i||a)&&(e+=":"+k0(i,2),a))){for(var s=4;a%10===0;)s-=1,a/=10;e+="."+k0(a,s)}return e}En.cleanDate=function(e,t,r){if(e===Gl)return t;if(En.isJSDate(e)||typeof e=="number"&&isFinite(e)){if(xc(r))return vw.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=En.ms2DateTimeLocal(+e),!e&&t!==void 0)return t}else if(!En.isDateTime(e,r))return vw.error("unrecognized date",e),t;return e};var MK=/%\d?f/g,SK=/%h/g,kK={1:"1",2:"1",3:"2",4:"2"};function b9(e,t,r,i){e=e.replace(MK,function(s){var l=Math.min(+s.charAt(1)||6,6),f=(t/1e3%1+2).toFixed(l).slice(2).replace(/0+$/,"")||"0";return f});var a=new Date(Math.floor(t+.05));if(e=e.replace(SK,function(){return kK[r("%q")(a)]}),xc(i))try{e=_c.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(s){return"Invalid"}return r(e)(a)}var CK=[59,59.9,59.99,59.999,59.9999];function EK(e,t){var r=Ih(e+.05,Ns),i=k0(Math.floor(r/Oy),2)+":"+k0(Ih(Math.floor(r/zh),60),2);if(t!=="M"){T9(t)||(t=0);var a=Math.min(Ih(e/C0,60),CK[t]),s=(100+a).toFixed(t).slice(1);t>0&&(s=s.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+s}return i}En.formatDate=function(e,t,r,i,a,s){if(a=xc(a)&&a,!t)if(r==="y")t=s.year;else if(r==="m")t=s.month;else if(r==="d")t=s.dayMonth+`
`+s.year;else return EK(e,r)+`
`+b9(s.dayMonthYear,e,i,a);return b9(t,e,i,a)};var w9=3*Ns;En.incrementMonth=function(e,t,r){r=xc(r)&&r;var i=Ih(e,Ns);if(e=Math.round(e-i),r)try{var a=Math.round(e/Ns)+Uy,s=_c.getComponentMethod("calendars","getCal")(r),l=s.fromJD(a);return t%12?s.add(l,t,"m"):s.add(l,t/12,"y"),(l.toJD()-Uy)*Ns+i}catch(h){vw.error("invalid ms "+e+" in calendar "+r)}var f=new Date(e+w9);return f.setUTCMonth(f.getUTCMonth()+t)+i-w9};En.findExactDates=function(e,t){for(var r=0,i=0,a=0,s=0,l,f,h=xc(t)&&_c.getComponentMethod("calendars","getCal")(t),v=0;v<e.length;v++){if(f=e[v],!T9(f)){s++;continue}if(!(f%Ns))if(h)try{l=h.fromJD(f/Ns+Uy),l.day()===1?l.month()===1?r++:i++:a++}catch(_){}else l=new Date(f),l.getUTCDate()===1?l.getUTCMonth()===0?r++:i++:a++}i+=r,a+=i;var m=e.length-s;return{exactYears:r/m,exactMonths:i/m,exactDays:a/m}}});var C_=me((yge,S9)=>{"use strict";S9.exports=function(t){return t}});var pw=me(bc=>{"use strict";var LK=Da(),DK=Lh(),PK=C_(),zK=Zi().BADNUM,dw=1e-9;bc.findBin=function(e,t,r){if(LK(t.start))return r?Math.ceil((e-t.start)/t.size-dw)-1:Math.floor((e-t.start)/t.size+dw);var i=0,a=t.length,s=0,l=a>1?(t[a-1]-t[0])/(a-1):1,f,h;for(l>=0?h=r?IK:RK:h=r?qK:FK,e+=l*dw*(r?-1:1)*(l>=0?1:-1);i<a&&s++<100;)f=Math.floor((i+a)/2),h(t[f],e)?i=f+1:a=f;return s>90&&DK.log("Long binary search..."),i-1};function IK(e,t){return e<t}function RK(e,t){return e<=t}function FK(e,t){return e>t}function qK(e,t){return e>=t}bc.sorterAsc=function(e,t){return e-t};bc.sorterDes=function(e,t){return t-e};bc.distinctVals=function(e){var t=e.slice();t.sort(bc.sorterAsc);var r;for(r=t.length-1;r>-1&&t[r]===zK;r--);for(var i=t[r]-t[0]||1,a=i/(r||1)/1e4,s=[],l,f=0;f<=r;f++){var h=t[f],v=h-l;l===void 0?(s.push(h),l=h):v>a&&(i=Math.min(i,v),s.push(h),l=h)}return{vals:s,minDiff:i}};bc.roundUp=function(e,t,r){for(var i=0,a=t.length-1,s,l=0,f=r?0:1,h=r?1:0,v=r?Math.ceil:Math.floor;i<a&&l++<100;)s=v((i+a)/2),t[s]<=e?i=s+f:a=s-h;return t[i]};bc.sort=function(e,t){for(var r=0,i=0,a=1;a<e.length;a++){var s=t(e[a],e[a-1]);if(s<0?r=1:s>0&&(i=1),r&&i)return e.sort(t)}return i?e:e.reverse()};bc.findIndexOfMin=function(e,t){t=t||PK;for(var r=1/0,i,a=0;a<e.length;a++){var s=t(e[a]);s<r&&(r=s,i=a)}return i}});var E_=me((_ge,k9)=>{"use strict";k9.exports=function(t){return Object.keys(t).sort()}});var C9=me(Ln=>{"use strict";var Vy=Da(),NK=al().isArrayOrTypedArray;Ln.aggNums=function(e,t,r,i){var a,s;if((!i||i>r.length)&&(i=r.length),Vy(t)||(t=!1),NK(r[0])){for(s=new Array(i),a=0;a<i;a++)s[a]=Ln.aggNums(e,t,r[a]);r=s}for(a=0;a<i;a++)Vy(t)?Vy(r[a])&&(t=e(+t,+r[a])):t=r[a];return t};Ln.len=function(e){return Ln.aggNums(function(t){return t+1},0,e)};Ln.mean=function(e,t){return t||(t=Ln.len(e)),Ln.aggNums(function(r,i){return r+i},0,e)/t};Ln.geometricMean=function(e,t){return t||(t=Ln.len(e)),Math.pow(Ln.aggNums(function(r,i){return r*i},1,e),1/t)};Ln.midRange=function(e){if(!(e===void 0||e.length===0))return(Ln.aggNums(Math.max,null,e)+Ln.aggNums(Math.min,null,e))/2};Ln.variance=function(e,t,r){return t||(t=Ln.len(e)),Vy(r)||(r=Ln.mean(e,t)),Ln.aggNums(function(i,a){return i+Math.pow(a-r,2)},0,e)/t};Ln.stdev=function(e,t,r){return Math.sqrt(Ln.variance(e,t,r))};Ln.median=function(e){var t=e.slice().sort();return Ln.interp(t,.5)};Ln.interp=function(e,t){if(!Vy(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}});var z9=me((bge,P9)=>{"use strict";var E9=_0(),mw=E9.mod,BK=E9.modHalf,Hy=Math.PI,Rh=2*Hy;function OK(e){return e/180*Hy}function UK(e){return e/Hy*180}function yw(e){return Math.abs(e[1]-e[0])>Rh-1e-14}function L9(e,t){return BK(t-e,Rh)}function VK(e,t){return Math.abs(L9(e,t))}function D9(e,t){if(yw(t))return!0;var r,i;t[0]<t[1]?(r=t[0],i=t[1]):(r=t[1],i=t[0]),r=mw(r,Rh),i=mw(i,Rh),r>i&&(i+=Rh);var a=mw(e,Rh),s=a+Rh;return a>=r&&a<=i||s>=r&&s<=i}function HK(e,t,r,i){if(!D9(t,i))return!1;var a,s;return r[0]<r[1]?(a=r[0],s=r[1]):(a=r[1],s=r[0]),e>=a&&e<=s}function gw(e,t,r,i,a,s,l){a=a||0,s=s||0;var f=yw([r,i]),h,v,m,_,T;f?(h=0,v=Hy,m=Rh):r<i?(h=r,m=i):(h=i,m=r),e<t?(_=e,T=t):(_=t,T=e);function M(I,O){return[I*Math.cos(O)+a,s-I*Math.sin(O)]}var C=Math.abs(m-h)<=Hy?0:1;function E(I,O,q){return"A"+[I,I]+" "+[0,C,q]+" "+M(I,O)}var L;return f?_===null?L="M"+M(T,h)+E(T,v,0)+E(T,m,0)+"Z":L="M"+M(_,h)+E(_,v,0)+E(_,m,0)+"ZM"+M(T,h)+E(T,v,1)+E(T,m,1)+"Z":_===null?(L="M"+M(T,h)+E(T,m,0),l&&(L+="L0,0Z")):L="M"+M(_,h)+"L"+M(T,h)+E(T,m,0)+"L"+M(_,m)+E(_,h,1)+"Z",L}function GK(e,t,r,i,a){return gw(null,e,t,r,i,a,0)}function ZK(e,t,r,i,a){return gw(null,e,t,r,i,a,1)}function YK(e,t,r,i,a,s){return gw(e,t,r,i,a,s,1)}P9.exports={deg2rad:OK,rad2deg:UK,angleDelta:L9,angleDist:VK,isFullCircle:yw,isAngleInsideSector:D9,isPtInsideSector:HK,pathArc:GK,pathSector:ZK,pathAnnulus:YK}});var I9=me(vd=>{"use strict";vd.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};vd.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};vd.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};vd.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};vd.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};vd.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}});var q9=me(dd=>{"use strict";var _w=_0().mod;dd.segmentsIntersect=F9;function F9(e,t,r,i,a,s,l,f){var h=r-e,v=a-e,m=l-a,_=i-t,T=s-t,M=f-s,C=h*M-m*_;if(C===0)return null;var E=(v*M-m*T)/C,L=(v*_-h*T)/C;return L<0||L>1||E<0||E>1?null:{x:e+h*E,y:t+_*E}}dd.segmentDistance=function(t,r,i,a,s,l,f,h){if(F9(t,r,i,a,s,l,f,h))return 0;var v=i-t,m=a-r,_=f-s,T=h-l,M=v*v+m*m,C=_*_+T*T,E=Math.min(L_(v,m,M,s-t,l-r),L_(v,m,M,f-t,h-r),L_(_,T,C,t-s,r-l),L_(_,T,C,i-s,a-l));return Math.sqrt(E)};function L_(e,t,r,i,a){var s=i*e+a*t;if(s<0)return i*i+a*a;if(s>r){var l=i-e,f=a-t;return l*l+f*f}else{var h=i*t-a*e;return h*h/r}}var D_,xw,R9;dd.getTextLocation=function(t,r,i,a){if((t!==xw||a!==R9)&&(D_={},xw=t,R9=a),D_[i])return D_[i];var s=t.getPointAtLength(_w(i-a/2,r)),l=t.getPointAtLength(_w(i+a/2,r)),f=Math.atan((l.y-s.y)/(l.x-s.x)),h=t.getPointAtLength(_w(i,r)),v=(h.x*4+s.x+l.x)/6,m=(h.y*4+s.y+l.y)/6,_={x:v,y:m,theta:f};return D_[i]=_,_};dd.clearLocationCache=function(){xw=null};dd.getVisibleSegment=function(t,r,i){var a=r.left,s=r.right,l=r.top,f=r.bottom,h=0,v=t.getTotalLength(),m=v,_,T;function M(E){var L=t.getPointAtLength(E);E===0?_=L:E===v&&(T=L);var I=L.x<a?a-L.x:L.x>s?L.x-s:0,O=L.y<l?l-L.y:L.y>f?L.y-f:0;return Math.sqrt(I*I+O*O)}for(var C=M(h);C;){if(h+=C+i,h>m)return;C=M(h)}for(C=M(m);C;){if(m-=C+i,h>m)return;C=M(m)}return{min:h,max:m,len:m-h,total:v,isClosed:h===0&&m===v&&Math.abs(_.x-T.x)<.1&&Math.abs(_.y-T.y)<.1}};dd.findPointOnPath=function(t,r,i,a){a=a||{};for(var s=a.pathLength||t.getTotalLength(),l=a.tolerance||.001,f=a.iterationLimit||30,h=t.getPointAtLength(0)[i]>t.getPointAtLength(s)[i]?-1:1,v=0,m=0,_=s,T,M,C;v<f;){if(T=(m+_)/2,M=t.getPointAtLength(T),C=M[i]-r,Math.abs(C)<l)return M;h*C>0?_=T:m=T,v++}return M}});var P_=me(Gy=>{"use strict";var wc={};Gy.throttle=function(t,r,i){var a=wc[t],s=Date.now();if(!a){for(var l in wc)wc[l].ts<s-6e4&&delete wc[l];a=wc[t]={ts:0,timer:null}}N9(a);function f(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(s>a.ts+r){f();return}a.timer=setTimeout(function(){f(),a.timer=null},r)};Gy.done=function(e){var t=wc[e];return!t||!t.timer?Promise.resolve():new Promise(function(r){var i=t.onDone;t.onDone=function(){i&&i(),r(),t.onDone=null}})};Gy.clear=function(e){if(e)N9(wc[e]),delete wc[e];else for(var t in wc)Gy.clear(t)};function N9(e){e&&e.timer!==null&&(clearTimeout(e.timer),e.timer=null)}});var O9=me((Mge,B9)=>{"use strict";B9.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}});var U9=me((Sge,z_)=>{"use strict";z_.exports=bw;z_.exports.isMobile=bw;z_.exports.default=bw;var WK=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,XK=/CrOS/,jK=/android|ipad|playbook|silk/i;function bw(e){e||(e={});let t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=WK.test(t)&&!XK.test(t)||!!e.tablet&&jK.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}});var H9=me((kge,V9)=>{"use strict";var JK=Da(),KK=U9();V9.exports=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=QK(),typeof r!="string")return!0;var i=KK({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!i)for(var a=r.split(" "),s=1;s<a.length;s++){var l=a[s];if(l.indexOf("Safari")!==-1)for(var f=s-1;f>-1;f--){var h=a[f];if(h.slice(0,8)==="Version/"){var v=h.slice(8).split(".")[0];if(JK(v)&&(v=+v),v>=13)return!0}}}return i};function QK(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}});var Z9=me((Cge,G9)=>{"use strict";var $K=ja();G9.exports=function(t,r,i){var a=t.selectAll("g."+i.replace(/\s/g,".")).data(r,function(l){return l[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",i),a.order();var s=t.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(l){l[0][s]=$K.select(this)}),a}});var W9=me((Ege,Y9)=>{"use strict";var eQ=sa();Y9.exports=function(t,r){for(var i=t._context.locale,a=0;a<2;a++){for(var s=t._context.locales,l=0;l<2;l++){var f=(s[i]||{}).dictionary;if(f){var h=f[r];if(h)return h}s=eQ.localeRegistry}var v=i.split("-")[0];if(v===i)break;i=v}return r}});var j9=me((Lge,X9)=>{"use strict";X9.exports=function(t){for(var r={},i=[],a=0,s=0;s<t.length;s++){var l=t[s];r[l]!==1&&(r[l]=1,i[a++]=l)}return i}});var K9=me((Dge,J9)=>{"use strict";J9.exports=function(t){for(var r=aQ(t)?rQ:tQ,i=[],a=0;a<t.length;a++){var s=t[a];r(s)&&i.push(s)}return i};function tQ(e){return e.visible===!0}function rQ(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function aQ(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}});var $9=me((Pge,Q9)=>{"use strict";Q9.exports=function(t,r){if(!r)return t;var i=1/Math.abs(r),a=i>1?(i*t+i*r)/i:t+r,s=String(a).length;if(s>16){var l=String(r).length,f=String(t).length;if(s>=f+l){var h=parseFloat(a).toPrecision(12);h.indexOf("e+")===-1&&(a=+h)}}return a}});var tk=me((zge,ek)=>{"use strict";var iQ=Da(),nQ=Zi().BADNUM,oQ=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ek.exports=function(t){return typeof t=="string"&&(t=t.replace(oQ,"")),iQ(t)?Number(t):nQ}});var Bt=me((Ige,dk)=>{"use strict";var Zy=ja(),sQ=y0().utcFormat,lQ=Y3().format,sk=Da(),lk=Zi(),uk=lk.FP_SAFE,uQ=-uk,rk=lk.BADNUM,rt=dk.exports={};rt.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var ak={};rt.warnBadFormat=function(e){var t=String(e);ak[t]||(ak[t]=1,rt.warn('encountered bad format: "'+t+'"'))};rt.noFormat=function(e){return String(e)};rt.numberFormat=function(e){var t;try{t=lQ(rt.adjustFormat(e))}catch(r){return rt.warnBadFormat(e),rt.noFormat}return t};rt.nestedProperty=Ey();rt.keyedContainer=X7();rt.relativeAttr=J7();rt.isPlainObject=yc();rt.toLogRange=f_();rt.relinkPrivateKeys=e8();var Fh=al();rt.isArrayBuffer=Fh.isArrayBuffer;rt.isTypedArray=Fh.isTypedArray;rt.isArrayOrTypedArray=Fh.isArrayOrTypedArray;rt.isArray1D=Fh.isArray1D;rt.ensureArray=Fh.ensureArray;rt.concat=Fh.concat;rt.maxRowLength=Fh.maxRowLength;rt.minRowLength=Fh.minRowLength;var fk=_0();rt.mod=fk.mod;rt.modHalf=fk.modHalf;var qh=_8();rt.valObjectMeta=qh.valObjectMeta;rt.coerce=qh.coerce;rt.coerce2=qh.coerce2;rt.coerceFont=qh.coerceFont;rt.coercePattern=qh.coercePattern;rt.coerceHoverinfo=qh.coerceHoverinfo;rt.coerceSelectionMarkerOpacity=qh.coerceSelectionMarkerOpacity;rt.validate=qh.validate;var nl=M9();rt.dateTime2ms=nl.dateTime2ms;rt.isDateTime=nl.isDateTime;rt.ms2DateTime=nl.ms2DateTime;rt.ms2DateTimeLocal=nl.ms2DateTimeLocal;rt.cleanDate=nl.cleanDate;rt.isJSDate=nl.isJSDate;rt.formatDate=nl.formatDate;rt.incrementMonth=nl.incrementMonth;rt.dateTick0=nl.dateTick0;rt.dfltRange=nl.dfltRange;rt.findExactDates=nl.findExactDates;rt.MIN_MS=nl.MIN_MS;rt.MAX_MS=nl.MAX_MS;var pd=pw();rt.findBin=pd.findBin;rt.sorterAsc=pd.sorterAsc;rt.sorterDes=pd.sorterDes;rt.distinctVals=pd.distinctVals;rt.roundUp=pd.roundUp;rt.sort=pd.sort;rt.findIndexOfMin=pd.findIndexOfMin;rt.sortObjectKeys=E_();var Tc=C9();rt.aggNums=Tc.aggNums;rt.len=Tc.len;rt.mean=Tc.mean;rt.geometricMean=Tc.geometricMean;rt.median=Tc.median;rt.midRange=Tc.midRange;rt.variance=Tc.variance;rt.stdev=Tc.stdev;rt.interp=Tc.interp;var Ru=g_();rt.init2dArray=Ru.init2dArray;rt.transposeRagged=Ru.transposeRagged;rt.dot=Ru.dot;rt.translationMatrix=Ru.translationMatrix;rt.rotationMatrix=Ru.rotationMatrix;rt.rotationXYMatrix=Ru.rotationXYMatrix;rt.apply3DTransform=Ru.apply3DTransform;rt.apply2DTransform=Ru.apply2DTransform;rt.apply2DTransform2=Ru.apply2DTransform2;rt.convertCssMatrix=Ru.convertCssMatrix;rt.inverseTransformMatrix=Ru.inverseTransformMatrix;var Cf=z9();rt.deg2rad=Cf.deg2rad;rt.rad2deg=Cf.rad2deg;rt.angleDelta=Cf.angleDelta;rt.angleDist=Cf.angleDist;rt.isFullCircle=Cf.isFullCircle;rt.isAngleInsideSector=Cf.isAngleInsideSector;rt.isPtInsideSector=Cf.isPtInsideSector;rt.pathArc=Cf.pathArc;rt.pathSector=Cf.pathSector;rt.pathAnnulus=Cf.pathAnnulus;var D0=I9();rt.isLeftAnchor=D0.isLeftAnchor;rt.isCenterAnchor=D0.isCenterAnchor;rt.isRightAnchor=D0.isRightAnchor;rt.isTopAnchor=D0.isTopAnchor;rt.isMiddleAnchor=D0.isMiddleAnchor;rt.isBottomAnchor=D0.isBottomAnchor;var P0=q9();rt.segmentsIntersect=P0.segmentsIntersect;rt.segmentDistance=P0.segmentDistance;rt.getTextLocation=P0.getTextLocation;rt.clearLocationCache=P0.clearLocationCache;rt.getVisibleSegment=P0.getVisibleSegment;rt.findPointOnPath=P0.findPointOnPath;var F_=yn();rt.extendFlat=F_.extendFlat;rt.extendDeep=F_.extendDeep;rt.extendDeepAll=F_.extendDeepAll;rt.extendDeepNoArrays=F_.extendDeepNoArrays;var ww=Lh();rt.log=ww.log;rt.warn=ww.warn;rt.error=ww.error;var fQ=b0();rt.counterRegex=fQ.counter;var Tw=P_();rt.throttle=Tw.throttle;rt.throttleDone=Tw.done;rt.clearThrottle=Tw.clear;var Fu=Ny();rt.getGraphDiv=Fu.getGraphDiv;rt.isPlotDiv=Fu.isPlotDiv;rt.removeElement=Fu.removeElement;rt.addStyleRule=Fu.addStyleRule;rt.addRelatedStyleRule=Fu.addRelatedStyleRule;rt.deleteRelatedStyleRule=Fu.deleteRelatedStyleRule;rt.setStyleOnHover=Fu.setStyleOnHover;rt.getFullTransformMatrix=Fu.getFullTransformMatrix;rt.getElementTransformMatrix=Fu.getElementTransformMatrix;rt.getElementAndAncestors=Fu.getElementAndAncestors;rt.equalDomRects=Fu.equalDomRects;rt.clearResponsive=O9();rt.preserveDrawingBuffer=H9();rt.makeTraceGroups=Z9();rt._=W9();rt.notifier=aw();rt.filterUnique=j9();rt.filterVisible=K9();rt.pushUnique=ow();rt.increment=$9();rt.cleanNumber=tk();rt.ensureNumber=function(t){return sk(t)?(t=Number(t),t>uk||t<uQ?rk:t):rk};rt.isIndex=function(e,t){return t!==void 0&&e>=t?!1:sk(e)&&e>=0&&e%1===0};rt.noop=y_();rt.identity=C_();rt.repeat=function(e,t){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r};rt.swapAttrs=function(e,t,r,i){r||(r="x"),i||(i="y");for(var a=0;a<t.length;a++){var s=t[a],l=rt.nestedProperty(e,s.replace("?",r)),f=rt.nestedProperty(e,s.replace("?",i)),h=l.get();l.set(f.get()),f.set(h)}};rt.raiseToTop=function(t){t.parentNode.appendChild(t)};rt.cancelTransition=function(e){return e.transition().duration(0)};rt.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};rt.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};rt.simpleMap=function(e,t,r,i,a){for(var s=e.length,l=new Array(s),f=0;f<s;f++)l[f]=t(e[f],r,i,a);return l};rt.randstr=function e(t,r,i,a){if(i||(i=16),r===void 0&&(r=24),r<=0)return"0";var s=Math.log(Math.pow(2,r))/Math.log(i),l="",f,h,v;for(f=2;s===1/0;f*=2)s=Math.log(Math.pow(2,r/f))/Math.log(i)*f;var m=s-Math.floor(s);for(f=0;f<Math.floor(s);f++)v=Math.floor(Math.random()*i).toString(i),l=v+l;m&&(h=Math.pow(i,m),v=Math.floor(Math.random()*h).toString(i),l=v+l);var _=parseInt(l,i);return t&&t[l]||_!==1/0&&_>=Math.pow(2,r)?a>10?(rt.warn("randstr failed uniqueness"),l):e(t,r,i,(a||0)+1):l};rt.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(i){i[t]=e,r[i.name]=i,r.optionList.push(i)},r["_"+t]=e,r};rt.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,i=2*r,a=2*t-1,s=new Array(a),l=new Array(r),f,h,v,m;for(f=0;f<a;f++)s[f]=(1-Math.cos(Math.PI*(f+1)/t))/(2*t);for(f=0;f<r;f++){for(m=0,h=0;h<a;h++)v=f+h+1-t,v<-r?v-=i*Math.round(v/i):v>=i&&(v-=i*Math.floor(v/i)),v<0?v=-1-v:v>=r&&(v=i-1-v),m+=e[v]*s[h];l[f]=m}return l};rt.syncOrAsync=function(e,t,r){var i,a;function s(){return rt.syncOrAsync(e,t,r)}for(;e.length;)if(a=e.splice(0,1)[0],i=a(t),i&&i.then)return i.then(s);return r&&r(t)};rt.stripTrailingSlash=function(e){return e.slice(-1)==="/"?e.slice(0,-1):e};rt.noneOrAll=function(e,t,r){if(e){var i=!1,a=!0,s,l;for(s=0;s<r.length;s++)l=e[r[s]],l!=null?i=!0:a=!1;if(i&&!a)for(s=0;s<r.length;s++)e[r[s]]=t[r[s]]}};rt.mergeArray=function(e,t,r,i){var a=typeof i=="function";if(rt.isArrayOrTypedArray(e))for(var s=Math.min(e.length,t.length),l=0;l<s;l++){var f=e[l];t[l][r]=a?i(f):f}};rt.mergeArrayCastPositive=function(e,t,r){return rt.mergeArray(e,t,r,function(i){var a=+i;return isFinite(a)&&a>0?a:0})};rt.fillArray=function(e,t,r,i){if(i=i||rt.identity,rt.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][r]=i(e[a])};rt.castOption=function(e,t,r,i){i=i||rt.identity;var a=rt.nestedProperty(e,r).get();return rt.isArrayOrTypedArray(a)?Array.isArray(t)&&rt.isArrayOrTypedArray(a[t[0]])?i(a[t[0]][t[1]]):i(a[t]):a};rt.extractOption=function(e,t,r,i){if(r in e)return e[r];var a=rt.nestedProperty(t,i).get();if(!Array.isArray(a))return a};function ck(e){var t={};for(var r in e)for(var i=e[r],a=0;a<i.length;a++)t[i[a]]=+r;return t}rt.tagSelected=function(e,t,r){var i=t.selectedpoints,a=t._indexToPoints,s;a&&(s=ck(a));function l(_){return _!==void 0&&_<e.length}for(var f=0;f<i.length;f++){var h=i[f];if(rt.isIndex(h)||rt.isArrayOrTypedArray(h)&&rt.isIndex(h[0])&&rt.isIndex(h[1])){var v=s?s[h]:h,m=r?r[v]:v;l(m)&&(e[m].selected=1)}}};rt.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var i=ck(r),a=[],s=0;s<t.length;s++){var l=t[s];if(rt.isIndex(l)){var f=i[l];rt.isIndex(f)&&a.push(f)}}return a}else return t};rt.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var i=rt.nestedProperty(e,r).get();return rt.isArrayOrTypedArray(i)?i:!1}else if(rt.isArrayOrTypedArray(r))return r;return!1};function hk(e,t,r){var i={};typeof t!="object"&&(t={});var a=r==="pieLike"?-1:3,s=Object.keys(e),l,f,h;for(l=0;l<s.length;l++)f=s[l],h=e[f],!(f.charAt(0)==="_"||typeof h=="function")&&(f==="module"?i[f]=h:Array.isArray(h)?f==="colorscale"||a===-1?i[f]=h.slice():i[f]=h.slice(0,a):rt.isTypedArray(h)?a===-1?i[f]=h.subarray():i[f]=h.subarray(0,a):h&&typeof h=="object"?i[f]=hk(e[f],t[f],r):i[f]=h);for(s=Object.keys(t),l=0;l<s.length;l++)f=s[l],h=t[f],(typeof h!="object"||!(f in i)||typeof i[f]!="object")&&(i[f]=h);return i}rt.minExtend=hk;rt.titleCase=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};rt.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};var cQ=/Version\/[\d\.]+.*Safari/;rt.isSafari=function(){return cQ.test(window.navigator.userAgent)};var hQ=/iPad|iPhone|iPod/;rt.isIOS=function(){return hQ.test(window.navigator.userAgent)};var vQ=/Macintosh.+AppleWebKit.+Gecko\)$/;rt.isMacWKWebView=()=>vQ.test(window.navigator.userAgent);var dQ=/Firefox\/(\d+)\.\d+/;rt.getFirefoxVersion=function(){var e=dQ.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};rt.isD3Selection=function(e){return e instanceof Zy.selection};rt.ensureSingle=function(e,t,r,i){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var s=e.append(t);return r&&s.classed(r,!0),i&&s.call(i),s};rt.ensureSingleById=function(e,t,r,i){var a=e.select(t+"#"+r);if(a.size())return a;var s=e.append(t).attr("id",r);return i&&s.call(i),s};rt.objectFromPath=function(e,t){for(var r=e.split("."),i,a=i={},s=0;s<r.length;s++){var l=r[s],f=null,h=r[s].match(/(.*)\[([0-9]+)\]/);h?(l=h[1],f=h[2],i=i[l]=[],s===r.length-1?i[f]=t:i[f]={},i=i[f]):(s===r.length-1?i[l]=t:i[l]={},i=i[l])}return a};var pQ=/^([^\[\.]+)\.(.+)?/,mQ=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function I_(e){return e.slice(0,2)==="__"}rt.expandObjectPaths=function(e){var t,r,i,a,s,l,f;if(typeof e=="object"&&!Array.isArray(e)){for(r in e)if(e.hasOwnProperty(r))if(t=r.match(pQ)){if(a=e[r],i=t[1],I_(i))continue;delete e[r],e[i]=rt.extendDeepNoArrays(e[i]||{},rt.objectFromPath(r,rt.expandObjectPaths(a))[i])}else if(t=r.match(mQ)){if(a=e[r],i=t[1],I_(i))continue;if(s=parseInt(t[2]),delete e[r],e[i]=e[i]||[],t[3]===".")f=t[4],l=e[i][s]=e[i][s]||{},rt.extendDeepNoArrays(l,rt.objectFromPath(f,rt.expandObjectPaths(a)));else{if(I_(i))continue;e[i][s]=rt.expandObjectPaths(a)}}else{if(I_(r))continue;e[r]=rt.expandObjectPaths(e[r])}}return e};rt.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,a=t.charAt(0),s=t.charAt(1),l=e.split("."),f=l[0],h=l.length>1?a+l[1]:"";if(s&&(l.length>1||f.length>4||r))for(;i.test(f);)f=f.replace(i,"$1"+s+"$2");return f+h};rt.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var vk=/^\w*$/;rt.templateString=function(e,t){var r={};return e.replace(rt.TEMPLATE_STRING_REGEX,function(i,a){var s;return vk.test(a)?s=t[a]:(r[a]=r[a]||rt.nestedProperty(t,a).get,s=r[a](!0)),s!==void 0?s:""})};var yQ={max:10,count:0,name:"hovertemplate"};rt.hovertemplateString=e=>Aw(e_(sd({},e),{opts:yQ}));var gQ={max:10,count:0,name:"texttemplate"};rt.texttemplateString=e=>Aw(e_(sd({},e),{opts:gQ}));var _Q=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function xQ(e){var t=e.match(_Q);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}var bQ={max:10,count:0,name:"texttemplate",parseMultDiv:!0};rt.texttemplateStringForShapes=e=>Aw(e_(sd({},e),{opts:bQ}));var ik=/^[:|\|]/;function Aw({data:e=[],locale:t,fallback:r,labels:i={},opts:a,template:s}){return s.replace(rt.TEMPLATE_STRING_REGEX,(l,f,h)=>{let v=["xother","yother"].includes(f),m=["_xother","_yother"].includes(f),_=["_xother_","_yother_"].includes(f),T=["xother_","yother_"].includes(f),M=v||m||T||_;(m||_)&&(f=f.substring(1)),(T||_)&&(f=f.substring(0,f.length-1));let C=null,E=null;if(a.parseMultDiv){var L=xQ(f);f=L.key,C=L.op,E=L.number}let I;if(M){if(i[f]===void 0)return"";I=i[f]}else for(let N of e)if(N){if(N.hasOwnProperty(f)){I=N[f];break}if(vk.test(f)||(I=rt.nestedProperty(N,f).get(!0)),I!==void 0)break}if(I===void 0){let{count:N,max:H,name:V}=a,W=r===!1?l:r;return N<H&&rt.warn([`Variable '${f}' in ${V} could not be found!`,"Please verify that the template is correct.",`Using value: '${W}'.`].join(" ")),N===H&&rt.warn(`Too many '${V}' warnings - additional warnings will be suppressed.`),a.count++,W}if(C==="*"&&(I*=E),C==="/"&&(I/=E),h){var O;if(h[0]===":"&&(O=t?t.numberFormat:rt.numberFormat,I!==""&&(I=O(h.replace(ik,""))(I))),h[0]==="|"){O=t?t.timeFormat:sQ;var q=rt.dateTime2ms(I);I=rt.formatDate(q,h.replace(ik,""),!1,O)}}else{var z=f+"Label";i.hasOwnProperty(z)&&(I=i[z])}return M&&(I="("+I+")",(m||_)&&(I=" "+I),(T||_)&&(I=I+" ")),I})}var R_=48,nk=57;rt.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,i=0,a=0,s=0;s<r;s++){var l=e.charCodeAt(s)||0,f=t.charCodeAt(s)||0,h=l>=R_&&l<=nk,v=f>=R_&&f<=nk;if(h&&(i=10*i+l-R_),v&&(a=10*a+f-R_),!h||!v){if(i!==a)return i-a;if(l!==f)return l-f}}return a-i};var L0=2e9;rt.seedPseudoRandom=function(){L0=2e9};rt.pseudoRandom=function(){var e=L0;return L0=(69069*L0+1)%4294967296,Math.abs(L0-e)<429496729?rt.pseudoRandom():L0/4294967296};rt.fillText=function(e,t,r){var i=Array.isArray(r)?function(l){r.push(l)}:function(l){r.text=l},a=rt.extractOption(e,t,"htx","hovertext");if(rt.isValidTextValue(a))return i(a);var s=rt.extractOption(e,t,"tx","text");if(rt.isValidTextValue(s))return i(s)};rt.isValidTextValue=function(e){return e||e===0};rt.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};rt.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};rt.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};rt.strRotate=function(e){return e?"rotate("+e+")":""};rt.strScale=function(e){return e!==1?"scale("+e+")":""};rt.getTextTransform=function(e){var t=e.noCenter,r=e.textX,i=e.textY,a=e.targetX,s=e.targetY,l=e.anchorX||0,f=e.anchorY||0,h=e.rotate,v=e.scale;return v?v>1&&(v=1):v=0,rt.strTranslate(a-v*(r+l),s-v*(i+f))+rt.strScale(v)+(h?"rotate("+h+(t?"":" "+r+" "+i)+")":"")};rt.setTransormAndDisplay=function(e,t){e.attr("transform",rt.getTextTransform(t)),e.style("display",t.scale?null:"none")};rt.ensureUniformFontSize=function(e,t){var r=rt.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};rt.join2=function(e,t,r){var i=e.length;return i>1?e.slice(0,-1).join(t)+r+e[i-1]:e.join(t)};rt.bigFont=function(e){return Math.round(1.2*e)};var ok=rt.getFirefoxVersion(),wQ=ok!==null&&ok<86;rt.getPositionFromD3Event=function(){return wQ?[Zy.event.layerX,Zy.event.layerY]:[Zy.event.offsetX,Zy.event.offsetY]}});var yk=me(()=>{"use strict";var TQ=Bt(),pk={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;border:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(Mw in pk)mk=Mw.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),TQ.addStyleRule(mk,pk[Mw]);var mk,Mw});var Sw=me((Nge,gk)=>{gk.exports=!0});var Cw=me((Bge,_k)=>{"use strict";var AQ=Sw(),kw;typeof window.matchMedia=="function"?kw=!window.matchMedia("(hover: none)").matches:kw=AQ;_k.exports=kw});var B_=me((Oge,Ew)=>{"use strict";var z0=typeof Reflect=="object"?Reflect:null,xk=z0&&typeof z0.apply=="function"?z0.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},q_;z0&&typeof z0.ownKeys=="function"?q_=z0.ownKeys:Object.getOwnPropertySymbols?q_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:q_=function(t){return Object.getOwnPropertyNames(t)};function MQ(e){console&&console.warn&&console.warn(e)}var wk=Number.isNaN||function(t){return t!==t};function Yi(){Yi.init.call(this)}Ew.exports=Yi;Ew.exports.once=EQ;Yi.EventEmitter=Yi;Yi.prototype._events=void 0;Yi.prototype._eventsCount=0;Yi.prototype._maxListeners=void 0;var bk=10;function N_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Yi,"defaultMaxListeners",{enumerable:!0,get:function(){return bk},set:function(e){if(typeof e!="number"||e<0||wk(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");bk=e}});Yi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Yi.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||wk(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Tk(e){return e._maxListeners===void 0?Yi.defaultMaxListeners:e._maxListeners}Yi.prototype.getMaxListeners=function(){return Tk(this)};Yi.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var a=t==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var f=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw f.context=l,f}var h=s[t];if(h===void 0)return!1;if(typeof h=="function")xk(h,this,r);else for(var v=h.length,m=Ck(h,v),i=0;i<v;++i)xk(m[i],this,r);return!0};function Ak(e,t,r,i){var a,s,l;if(N_(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),l=s[t]),l===void 0)l=s[t]=r,++e._eventsCount;else if(typeof l=="function"?l=s[t]=i?[r,l]:[l,r]:i?l.unshift(r):l.push(r),a=Tk(e),a>0&&l.length>a&&!l.warned){l.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=l.length,MQ(f)}return e}Yi.prototype.addListener=function(t,r){return Ak(this,t,r,!1)};Yi.prototype.on=Yi.prototype.addListener;Yi.prototype.prependListener=function(t,r){return Ak(this,t,r,!0)};function SQ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Mk(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=SQ.bind(i);return a.listener=r,i.wrapFn=a,a}Yi.prototype.once=function(t,r){return N_(r),this.on(t,Mk(this,t,r)),this};Yi.prototype.prependOnceListener=function(t,r){return N_(r),this.prependListener(t,Mk(this,t,r)),this};Yi.prototype.removeListener=function(t,r){var i,a,s,l,f;if(N_(r),a=this._events,a===void 0)return this;if(i=a[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(s=-1,l=i.length-1;l>=0;l--)if(i[l]===r||i[l].listener===r){f=i[l].listener,s=l;break}if(s<0)return this;s===0?i.shift():kQ(i,s),i.length===1&&(a[t]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",t,f||r)}return this};Yi.prototype.off=Yi.prototype.removeListener;Yi.prototype.removeAllListeners=function(t){var r,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),l;for(a=0;a<s.length;++a)l=s[a],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function Sk(e,t,r){var i=e._events;if(i===void 0)return[];var a=i[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?CQ(a):Ck(a,a.length)}Yi.prototype.listeners=function(t){return Sk(this,t,!0)};Yi.prototype.rawListeners=function(t){return Sk(this,t,!1)};Yi.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):kk.call(e,t)};Yi.prototype.listenerCount=kk;function kk(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Yi.prototype.eventNames=function(){return this._eventsCount>0?q_(this._events):[]};function Ck(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function kQ(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function CQ(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function EQ(e,t){return new Promise(function(r,i){function a(l){e.removeListener(t,s),i(l)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}Ek(e,t,s,{once:!0}),t!=="error"&&LQ(e,a,{once:!0})})}function LQ(e,t,r){typeof e.on=="function"&&Ek(e,"error",t,r)}function Ek(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(s){i.once&&e.removeEventListener(t,a),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var Yy=me((Uge,Lk)=>{"use strict";var Lw=B_().EventEmitter,DQ={init:function(e){if(e._ev instanceof Lw)return e;var t=new Lw,r=new Lw;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,a){t.emit(i,a),r.emit(i,a)},typeof e.addEventListener=="function"&&e.addEventListener("wheel",()=>{},{passive:!0}),e},triggerHandler:function(e,t,r){var i,a=e._ev;if(!a)return;var s=a._events[t];if(!s)return;function l(h){if(h.listener){if(a.removeListener(t,h.listener),!h.fired)return h.fired=!0,h.listener.apply(a,[r])}else return h.apply(a,[r])}s=Array.isArray(s)?s:[s];var f;for(f=0;f<s.length-1;f++)l(s[f]);return i=l(s[f]),i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};Lk.exports=DQ});var zk=me((Vge,Pk)=>{"use strict";var Dk=Bt(),PQ=cd().dfltConfig;function zQ(e,t){for(var r=[],i,a=0;a<t.length;a++)i=t[a],i===e?r[a]=i:typeof i=="object"?r[a]=Array.isArray(i)?Dk.extendDeep([],i):Dk.extendDeepAll({},i):r[a]=i;return r}var Ac={};Ac.add=function(e,t,r,i,a){var s,l;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},l=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(l,e.undoQueue.queue.length-l,s),e.undoQueue.index+=1):s=e.undoQueue.queue[l-1],e.undoQueue.beginSequence=!1,s&&(s.undo.calls.unshift(t),s.undo.args.unshift(r),s.redo.calls.push(i),s.redo.args.push(a)),e.undoQueue.queue.length>PQ.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};Ac.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};Ac.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};Ac.undo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.undo.calls.length;i++)Ac.plotDo(t,r.undo.calls[i],r.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}};Ac.redo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.redo.calls.length;i++)Ac.plotDo(t,r.redo.calls[i],r.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};Ac.plotDo=function(e,t,r){e.autoplay=!0,r=zQ(e,r),t.apply(null,r)};Pk.exports=Ac});var Dw=me((Hge,Ik)=>{"use strict";Ik.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}});var F0=me(Xn=>{"use strict";var Zl=sa(),Wy=Bt(),U_=ys(),Pw=M0(),IQ=Dw(),RQ=By(),FQ=cd().configAttributes,Rk=il(),qu=Wy.extendDeepAll,I0=Wy.isPlainObject,qQ=Wy.isArrayOrTypedArray,V_=Wy.nestedProperty,NQ=Wy.valObjectMeta,zw="_isSubplotObj",H_="_isLinkedToArray",BQ="_arrayAttrRegexps",qk="_deprecated",Iw=[zw,H_,BQ,qk];Xn.IS_SUBPLOT_OBJ=zw;Xn.IS_LINKED_TO_ARRAY=H_;Xn.DEPRECATED=qk;Xn.UNDERSCORE_ATTRS=Iw;Xn.get=function(){var e={};return Zl.allTypes.forEach(function(t){e[t]=UQ(t)}),{defs:{valObjects:NQ,metaKeys:Iw.concat(["description","role","editType","impliedEdits"]),editType:{traces:Rk.traces,layout:Rk.layout},impliedEdits:{}},traces:e,layout:VQ(),frames:HQ(),animation:R0(RQ),config:R0(FQ)}};Xn.crawl=function(e,t,r,i){var a=r||0;i=i||"",Object.keys(e).forEach(function(s){var l=e[s];if(Iw.indexOf(s)===-1){var f=(i?i+".":"")+s;t(l,s,e,a,f),!Xn.isValObject(l)&&I0(l)&&s!=="impliedEdits"&&Xn.crawl(l,t,a+1,f)}})};Xn.isValObject=function(e){return e&&e.valType!==void 0};Xn.findArrayAttributes=function(e){var t=[],r=[],i=[],a,s;function l(h,v,m,_){r=r.slice(0,_).concat([v]),i=i.slice(0,_).concat([h&&h._isLinkedToArray]);var T=h&&(h.valType==="data_array"||h.arrayOk===!0)&&!(r[_-1]==="colorbar"&&(v==="ticktext"||v==="tickvals"));T&&f(a,0,"")}function f(h,v,m){var _=h[r[v]],T=m+r[v];if(v===r.length-1)qQ(_)&&t.push(s+T);else if(i[v]){if(Array.isArray(_))for(var M=0;M<_.length;M++)I0(_[M])&&f(_[M],v+1,T+"["+M+"].")}else I0(_)&&f(_,v+1,T+".")}return a=e,s="",Xn.crawl(U_,l),e._module&&e._module.attributes&&Xn.crawl(e._module.attributes,l),t};Xn.getTraceValObject=function(e,t){var r=t[0],i=1,a,s,l=e._module;if(l||(l=(Zl.modules[e.type||U_.type.dflt]||{})._module),!l)return!1;if(a=l.attributes,s=a&&a[r],!s){var f=l.basePlotModule;f&&f.attributes&&(s=f.attributes[r])}return s||(s=U_[r]),Nk(s,t,i)};Xn.getLayoutValObject=function(e,t){var r=OQ(e,t[0]);return Nk(r,t,1)};function OQ(e,t){var r,i,a,s,l=e._basePlotModules;if(l){var f;for(r=0;r<l.length;r++){if(a=l[r],a.attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!f&&a.layoutAttributes&&(f=a.layoutAttributes)}var h=a.baseLayoutAttrOverrides;if(h&&t in h)return h[t]}if(f)return f}var v=e._modules;if(v){for(r=0;r<v.length;r++)if(s=v[r].layoutAttributes,s&&t in s)return s[t]}for(i in Zl.componentsRegistry){if(a=Zl.componentsRegistry[i],a.name==="colorscale"&&t.indexOf("coloraxis")===0)return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in Pw?Pw[t]:!1}function Nk(e,t,r){if(!e)return!1;if(e._isLinkedToArray){if(O_(t[r]))r++;else if(r<t.length)return!1}for(;r<t.length;r++){var i=e[t[r]];if(I0(i))e=i;else break;if(r===t.length-1)break;if(e._isLinkedToArray){if(r++,!O_(t[r]))return!1}else if(e.valType==="info_array"){r++;var a=t[r];if(!O_(a))return!1;var s=e.items;if(Array.isArray(s)){if(a>=s.length)return!1;if(e.dimensions===2){if(r++,t.length===r)return e;var l=t[r];if(!O_(l))return!1;e=s[a][l]}else e=s[a]}else e=s}}return e}function O_(e){return e===Math.round(e)&&e>=0}function UQ(e){var t,r;t=Zl.modules[e]._module,r=t.basePlotModule;var i={};i.type=null;var a=qu({},U_),s=qu({},t.attributes);Xn.crawl(s,function(h,v,m,_,T){V_(a,T).set(void 0),h===void 0&&V_(s,T).set(void 0)}),qu(i,a),Zl.traceIs(e,"noOpacity")&&delete i.opacity,Zl.traceIs(e,"showLegend")||(delete i.showlegend,delete i.legendgroup),Zl.traceIs(e,"noHover")&&(delete i.hoverinfo,delete i.hoverlabel),t.selectPoints||delete i.selectedpoints,qu(i,s),r.attributes&&qu(i,r.attributes),i.type=e;var l={meta:t.meta||{},categories:t.categories||{},animatable:!!t.animatable,type:e,attributes:R0(i)};if(t.layoutAttributes){var f={};qu(f,t.layoutAttributes),l.layoutAttributes=R0(f)}return t.animatable||Xn.crawl(l,function(h){Xn.isValObject(h)&&"anim"in h&&delete h.anim}),l}function VQ(){var e={},t,r;qu(e,Pw);for(t in Zl.subplotsRegistry)if(r=Zl.subplotsRegistry[t],!!r.layoutAttributes)if(Array.isArray(r.attr))for(var i=0;i<r.attr.length;i++)Fk(e,r,r.attr[i]);else{var a=r.attr==="subplot"?r.name:r.attr;Fk(e,r,a)}for(t in Zl.componentsRegistry){r=Zl.componentsRegistry[t];var s=r.schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis)for(var f in l.xaxis)delete e.yaxis[f];delete e.xaxis.shift,delete e.xaxis.autoshift}else r.name==="colorscale"?qu(e,r.layoutAttributes):r.layoutAttributes&&WQ(e,r.layoutAttributes,r.name)}return{layoutAttributes:R0(e)}}function HQ(){var e={frames:qu({},IQ)};return R0(e),e.frames}function R0(e){return GQ(e),ZQ(e),YQ(e),e}function GQ(e){function t(i){return{valType:"string",editType:"none"}}function r(i,a,s){Xn.isValObject(i)?(i.arrayOk===!0||i.valType==="data_array")&&(s[a+"src"]=t(a)):I0(i)&&(i.role="object")}Xn.crawl(e,r)}function ZQ(e){function t(r,i,a){if(r){var s=r[H_];s&&(delete r[H_],a[i]={items:{}},a[i].items[s]=r,a[i].role="object")}}Xn.crawl(e,t)}function YQ(e){function t(r){for(var i in r)if(I0(r[i]))t(r[i]);else if(Array.isArray(r[i]))for(var a=0;a<r[i].length;a++)t(r[i][a]);else r[i]instanceof RegExp&&(r[i]=r[i].toString())}t(e)}function Fk(e,t,r){var i=V_(e,r),a=qu({},t.layoutAttributes);a[zw]=!0,i.set(a)}function WQ(e,t,r){var i=V_(e,r);i.set(qu(i.get()||{},t))}});var Ii=me(md=>{"use strict";var q0=Bt(),XQ=ys(),Nh="templateitemname",Rw={name:{valType:"string",editType:"none"}};Rw[Nh]={valType:"string",editType:"calc"};md.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=Rw.name,t[Nh]=Rw[Nh],t};md.traceTemplater=function(e){var t={},r,i;for(r in e)i=e[r],Array.isArray(i)&&i.length&&(t[r]=0);function a(s){r=q0.coerce(s,{},XQ,"type");var l={type:r,_template:null};if(r in t){i=e[r];var f=t[r]%i.length;t[r]++,l._template=i[f]}return l}return{newTrace:a}};md.newContainer=function(e,t,r){var i=e._template,a=i&&(i[t]||r&&i[r]);q0.isPlainObject(a)||(a=null);var s=e[t]={_template:a};return s};md.arrayTemplater=function(e,t,r){var i=e._template,a=i&&i[Ok(t)],s=i&&i[t];(!Array.isArray(s)||!s.length)&&(s=[]);var l={};function f(v){var m={name:v.name,_input:v},_=m[Nh]=v[Nh];if(!Bk(_))return m._template=a,m;for(var T=0;T<s.length;T++){var M=s[T];if(M.name===_)return l[_]=1,m._template=M,m}return m[r]=v[r]||!1,m._template=!1,m}function h(){for(var v=[],m=0;m<s.length;m++){var _=s[m],T=_.name;if(Bk(T)&&!l[T]){var M={_template:_,name:T,_input:{_templateitemname:T}};M[Nh]=_[Nh],v.push(M),l[T]=1}}return v}return{newItem:f,defaultItems:h}};function Bk(e){return e&&typeof e=="string"}function Ok(e){var t=e.length-1;return e.charAt(t)!=="s"&&q0.warn("bad argument to arrayDefaultKey: "+e),e.slice(0,-1)+"defaults"}md.arrayDefaultKey=Ok;md.arrayEditor=function(e,t,r){var i=(q0.nestedProperty(e,t).get()||[]).length,a=r._index,s=a>=i&&(r._input||{})._templateitemname;s&&(a=i);var l=t+"["+a+"]",f;function h(){f={},s&&(f[l]={},f[l][Nh]=s)}h();function v(M,C){f[M]=C}function m(M,C){s?q0.nestedProperty(f[l],M).set(C):f[l+"."+M]=C}function _(){var M=f;return h(),M}function T(M,C){M&&m(M,C);var E=_();for(var L in E)q0.nestedProperty(e,L).set(E[L])}return{modifyBase:v,modifyItem:m,getUpdateObj:_,applyUpdate:T}}});var eo=me((Yge,Uk)=>{"use strict";var Xy=b0().counter;Uk.exports={idRegex:{x:Xy("x","( domain)?"),y:Xy("y","( domain)?")},attrRegex:Xy("[xy]axis"),xAxisMatch:Xy("xaxis"),yAxisMatch:Xy("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}});var jn=me(Bs=>{"use strict";var jQ=sa(),Fw=eo();Bs.id2name=function(t){if(!(typeof t!="string"||!t.match(Fw.AX_ID_PATTERN))){var r=t.split(" ")[0].slice(1);return r==="1"&&(r=""),t.charAt(0)+"axis"+r}};Bs.name2id=function(t){if(t.match(Fw.AX_NAME_PATTERN)){var r=t.slice(5);return r==="1"&&(r=""),t.charAt(0)+r}};Bs.cleanId=function(t,r,i){var a=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(Fw.AX_ID_PATTERN))&&!(r&&t.charAt(0)!==r)&&!(a&&!i)){var s=t.split(" ")[0].slice(1).replace(/^0+/,"");return s==="1"&&(s=""),t.charAt(0)+s+(a&&i?" domain":"")}};Bs.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var a=Bs.listIds(e,t),s=new Array(a.length),l;for(l=0;l<a.length;l++){var f=a[l];s[l]=i[f.charAt(0)+"axis"+f.slice(1)]}if(!r){var h=i._subplots.gl3d||[];for(l=0;l<h.length;l++){var v=i[h[l]];t?s.push(v[t+"axis"]):s.push(v.xaxis,v.yaxis,v.zaxis)}}return s};Bs.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var i=r._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)};Bs.getFromId=function(e,t,r){var i=e._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[Bs.id2name(t)]};Bs.getFromTrace=function(e,t,r){var i=e._fullLayout,a=null;if(jQ.traceIs(t,"gl3d")){var s=t.scene;s.slice(0,5)==="scene"&&(a=i[s][r+"axis"])}else a=Bs.getFromId(e,t[r+"axis"]||r);return a};Bs.idSort=function(e,t){var r=e.charAt(0),i=t.charAt(0);return r!==i?r>i?1:-1:+(e.slice(1)||1)-+(t.slice(1)||1)};Bs.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:!1};function Vk(e,t){if(t&&t.length){for(var r=0;r<t.length;r++)if(t[r][e])return!0}return!1}Bs.isLinked=function(e,t){return Vk(t,e._axisMatchGroups)||Vk(t,e._axisConstraintGroups)}});var Bh=me((Xge,Hk)=>{"use strict";function JQ(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function KQ(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}Hk.exports={clearOutlineControllers:JQ,clearOutline:KQ}});var G_=me((jge,Gk)=>{"use strict";Gk.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}});var W_=me(Y_=>{"use strict";var Z_=sa(),Jge=eo().SUBPLOT_PATTERN;Y_.getSubplotCalcData=function(e,t,r){var i=Z_.subplotsRegistry[t];if(!i)return[];for(var a=i.attr,s=[],l=0;l<e.length;l++){var f=e[l],h=f[0].trace;h[a]===r&&s.push(f)}return s};Y_.getModuleCalcData=function(e,t,r){var i=[],a=[],s;if(typeof t=="string"?s=Z_.getModule(t).plot:typeof t=="function"?s=t:s=t.plot,!s)return[i,e];for(var l=r,f=0;f<e.length;f++){var h=e[f],v=h[0].trace,m=v.zorder!==void 0;v.visible!==!0||v._length===0||(v._module&&v._module.plot===s&&(!m||v.zorder===l)?i.push(h):a.push(h))}return[i,a]};Y_.getSubplotData=function(t,r,i){if(!Z_.subplotsRegistry[r])return[];for(var a=Z_.subplotsRegistry[r].attr,s=[],l,f,h,v=0;v<t.length;v++)l=t[v],l[a]===i&&s.push(l);return s}});var Xk=me(yd=>{"use strict";var QQ=sa(),N0=Bt();yd.manageCommandObserver=function(e,t,r,i){var a={},s=!0;t&&t._commandObserver&&(a=t._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var l=yd.hasSimpleAPICommandBindings(e,r,a.lookupTable);if(t&&t._commandObserver){if(l)return a;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,a}if(l){Zk(e,l,a.cache),a.check=function(){if(s){var m=Zk(e,l,a.cache);return m.changed&&i&&a.lookupTable[m.value]!==void 0&&(a.disable(),Promise.resolve(i({value:m.value,type:l.type,prop:l.prop,traces:l.traces,index:a.lookupTable[m.value]})).then(a.enable,a.enable)),m.changed}};for(var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<f.length;h++)e._internalOn(f[h],a.check);a.remove=function(){for(var v=0;v<f.length;v++)e._removeInternalListener(f[v],a.check)}}else N0.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){s=!1},a.enable=function(){s=!0},t&&(t._commandObserver=a),a};yd.hasSimpleAPICommandBindings=function(e,t,r){var i,a=t.length,s;for(i=0;i<a;i++){var l,f=t[i],h=f.method,v=f.args;if(Array.isArray(v)||(v=[]),!h)return!1;var m=yd.computeAPICommandBindings(e,h,v);if(m.length!==1)return!1;if(!s)s=m[0],Array.isArray(s.traces)&&s.traces.sort();else{if(l=m[0],l.type!==s.type||l.prop!==s.prop)return!1;if(Array.isArray(s.traces))if(Array.isArray(l.traces)){l.traces.sort();for(var _=0;_<s.traces.length;_++)if(s.traces[_]!==l.traces[_])return!1}else return!1;else if(l.prop!==s.prop)return!1}l=m[0];var T=l.value;if(Array.isArray(T))if(T.length===1)T=T[0];else return!1;r&&(r[T]=i)}return s};function Zk(e,t,r){var i,a,s,l=!1;if(t.type==="data")i=e._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=e._fullLayout;else return!1;return a=N0.nestedProperty(i,t.prop).get(),s=r[t.type]=r[t.type]||{},s.hasOwnProperty(t.prop)&&s[t.prop]!==a&&(l=!0),s[t.prop]=a,{changed:l,value:a}}yd.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=QQ.apiMethodRegistry[t],a=[e];Array.isArray(r)||(r=[]);for(var s=0;s<r.length;s++)a.push(r[s]);return i.apply(null,a).catch(function(l){return N0.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})};yd.computeAPICommandBindings=function(e,t,r){var i;switch(Array.isArray(r)||(r=[]),t){case"restyle":i=Wk(e,r);break;case"relayout":i=Yk(e,r);break;case"update":i=Wk(e,[r[0],r[2]]).concat(Yk(e,[r[1]]));break;case"animate":i=$Q(e,r);break;default:i=[]}return i};function $Q(e,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function Yk(e,t){var r=[],i=t[0],a={};if(typeof i=="string")a[i]=t[1];else if(N0.isPlainObject(i))a=i;else return r;return qw(a,function(s,l,f){r.push({type:"layout",prop:s,value:f})},"",0),r}function Wk(e,t){var r,i,a,s,l=[];if(i=t[0],a=t[1],r=t[2],s={},typeof i=="string")s[i]=a;else if(N0.isPlainObject(i))s=i,r===void 0&&(r=a);else return l;return r===void 0&&(r=null),qw(s,function(f,h,v){var m,_;if(Array.isArray(v)){_=v.slice();var T=Math.min(_.length,e.data.length);r&&(T=Math.min(T,r.length)),m=[];for(var M=0;M<T;M++)m[M]=r?r[M]:M}else _=v,m=r?r.slice():null;if(m===null)Array.isArray(_)&&(_=_[0]);else if(Array.isArray(m)){if(!Array.isArray(_)){var C=_;_=[];for(var E=0;E<m.length;E++)_[E]=C}_.length=Math.min(m.length,_.length)}l.push({type:"data",prop:f,traces:m,value:_})},"",0),l}function qw(e,t,r,i){Object.keys(e).forEach(function(a){var s=e[a];if(a[0]!=="_"){var l=r+(i>0?".":"")+a;N0.isPlainObject(s)?qw(s,t,l,i+1):t(l,a,s)}})}});var to=me(($ge,lC)=>{"use strict";var tC=ja(),e$=y0().timeFormatLocale,t$=Y3().formatLocale,jy=Da(),r$=W3(),ti=sa(),rC=F0(),a$=Ii(),Dr=Bt(),aC=Oa(),jk=Zi().BADNUM,Os=jn(),i$=Bh().clearOutline,n$=G_(),Nw=By(),o$=Dw(),s$=W_().getModuleCalcData,Jk=Dr.relinkPrivateKeys,gd=Dr._,_r=lC.exports={};Dr.extendFlat(_r,ti);_r.attributes=ys();_r.attributes.type.values=_r.allTypes;_r.fontAttrs=qo();_r.layoutAttributes=M0();var j_=Xk();_r.executeAPICommand=j_.executeAPICommand;_r.computeAPICommandBindings=j_.computeAPICommandBindings;_r.manageCommandObserver=j_.manageCommandObserver;_r.hasSimpleAPICommandBindings=j_.hasSimpleAPICommandBindings;_r.redrawText=function(e){return e=Dr.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(ti.getComponentMethod("annotations","draw")(e),ti.getComponentMethod("legend","draw")(e),ti.getComponentMethod("colorbar","draw")(e),t(_r.previousPromises(e)))},300)})};_r.resize=function(e){e=Dr.getGraphDiv(e);var t,r=new Promise(function(i,a){(!e||Dr.isHidden(e))&&a(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||Dr.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var s=e.changed;e.autoplay=!0,ti.call("relayout",e,{autosize:!0}).then(function(){e.changed=s,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return t&&t(r),r};_r.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};_r.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=Dr.ensureSingle(t._paper,"text","js-plot-link-container",function(h){h.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:aC.defaultLine,"pointer-events":"all"}).each(function(){var v=tC.select(this);v.append("tspan").classed("js-link-to-tool",!0),v.append("tspan").classed("js-link-spacer",!0),v.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),a={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=t._paper.attr("width")-7),r.attr(a);var s=r.select(".js-link-to-tool"),l=r.select(".js-link-spacer"),f=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&l$(e,s),l.text(s.text()&&f.text()?" - ":"")}};function l$(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" \xBB");if(e._context.sendData)r.on("click",function(){_r.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+a})}}_r.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=tC.select(e).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),a=i.append("input").attr({type:"text",name:"data"});return a.node().value=_r.graphJson(e,!1,"keepdata"),i.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var u$=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f$=["year","month","dayMonth","dayMonthYear"];_r.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var a=e._fullLayout={},s=e.layout||{},l=e._fullData||[],f=e._fullData=[],h=e.data||[],v=e.calcdata||[],m=e._context||{},_;e._transitionData||_r.createTransitionData(e),a._dfltTitle={plot:gd(e,"Click to enter Plot title"),subtitle:gd(e,"Click to enter Plot subtitle"),x:gd(e,"Click to enter X axis title"),y:gd(e,"Click to enter Y axis title"),colorbar:gd(e,"Click to enter Colorscale title"),annotation:gd(e,"new text")},a._traceWord=gd(e,"trace");var T=Kk(e,u$);if(a._mapboxAccessToken=m.mapboxAccessToken,i._initialAutoSizeIsDone){var M=i.width,C=i.height;_r.supplyLayoutGlobalDefaults(s,a,T),s.width||(a.width=M),s.height||(a.height=C),_r.sanitizeMargins(a)}else{_r.supplyLayoutGlobalDefaults(s,a,T);var E=!s.width||!s.height,L=a.autosize,I=m.autosizable,O=E&&(L||I);O?_r.plotAutoSize(e,s,a):E&&_r.sanitizeMargins(a),!L&&E&&(s.width=a.width,s.height=a.height)}a._d3locale=v$(T,a.separators),a._extraFormat=Kk(e,f$),a._initialAutoSizeIsDone=!0,a._dataLength=h.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var q=a._subplots=h$(),z=a._splomAxes={x:{},y:{}},N=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=c$(l,h),_r.supplyDataDefaults(h,f,s,a);var H=Object.keys(z.x),V=Object.keys(z.y);if(H.length>1&&V.length>1){for(ti.getComponentMethod("grid","sizeDefaults")(s,a),_=0;_<H.length;_++)Dr.pushUnique(q.xaxis,H[_]);for(_=0;_<V.length;_++)Dr.pushUnique(q.yaxis,V[_]);for(var W in N)Dr.pushUnique(q.cartesian,W)}if(a._has=_r._hasPlotType.bind(a),l.length===f.length)for(_=0;_<f.length;_++)Jk(f[_],l[_]);_r.supplyLayoutModuleDefaults(s,a,f,e._transitionData);var J=a._visibleModules,ee=[];for(_=0;_<J.length;_++){var ie=J[_].crossTraceDefaults;ie&&Dr.pushUnique(ee,ie)}for(_=0;_<ee.length;_++)ee[_](f,a);a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&H.length>15&&V.length>15&&a.shapes.length===0&&a.images.length===0,_r.linkSubplots(f,a,l,i),_r.cleanPlot(f,a,l,i);var oe=!!(i._has&&i._has("cartesian")),fe=!!(a._has&&a._has("cartesian")),le=oe,Te=fe;le&&!Te?i._bgLayer.remove():Te&&!le&&(a._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&i$({_fullLayout:i}),d$(f,a),Jk(a,i),ti.getComponentMethod("colorscale","crossTraceDefaults")(f,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var Se=a._tracePreGUI,Me={},Ae;for(Ae in Se)Me[Ae]="old";for(_=0;_<f.length;_++)Ae=f[_]._fullInput.uid,Me[Ae]||(Se[Ae]={}),Me[Ae]="new";for(Ae in Me)Me[Ae]==="old"&&delete Se[Ae];iC(a),ti.getComponentMethod("rangeslider","makeData")(a),!r&&v.length===f.length&&_r.supplyDefaultsUpdateCalc(v,f)};_r.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=(e[r]||[])[0];if(a&&a.trace){var s=a.trace;if(s._hasCalcTransform){var l=s._arrayAttrs,f,h,v;for(f=0;f<l.length;f++)h=l[f],v=Dr.nestedProperty(s,h).get().slice(),Dr.nestedProperty(i,h).set(v)}a.trace=i}}};function c$(e,t){var r=t.length,i=[],a,s;for(a=0;a<e.length;a++){var l=e[a]._fullInput;l!==s&&i.push(l),s=l}var f=i.length,h=new Array(r),v={};function m(M,C){h[C]=M,v[M]=1}function _(M,C){if(M&&typeof M=="string"&&!v[M])return m(M,C),!0}for(a=0;a<r;a++){var T=t[a].uid;typeof T=="number"&&(T=String(T)),!_(T,a)&&(a<f&&_(i[a].uid,a)||m(Dr.randstr(v),a))}return h}function h$(){var e=ti.collectableSubplotTypes,t={},r,i;if(!e){e=[];var a=ti.subplotsRegistry;for(var s in a){var l=a[s],f=l.attr;if(f&&(e.push(s),Array.isArray(f)))for(i=0;i<f.length;i++)Dr.pushUnique(e,f[i])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function Kk(e,t){var r=e._context.locale;r||(r="en-US");var i=!1,a={};function s(_){for(var T=!0,M=0;M<t.length;M++){var C=t[M];a[C]||(_[C]?a[C]=_[C]:T=!1)}T&&(i=!0)}for(var l=0;l<2;l++){for(var f=e._context.locales,h=0;h<2;h++){var v=(f[r]||{}).format;if(v&&(s(v),i))break;f=ti.localeRegistry}var m=r.split("-")[0];if(i||m===r)break;r=m}return i||s(ti.localeRegistry.en.format),a}function v$(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=t$(e).format(Dr.adjustFormat(r))}catch(i){return Dr.warnBadFormat(r),Dr.noFormat}return r},timeFormat:e$(e).utcFormat}}function d$(e,t){var r,i=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var a=0;a<e.length;a++){var s=e[a];s.meta?i[s.index]=s._meta={meta:s.meta}:t.meta&&(s._meta={meta:t.meta}),t.meta&&(s._meta.layout={meta:t.meta})}i.length&&(r||(r=t._meta={}),r.data=i)}_r.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};_r._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var a=i[t].name;if(a===e)return!0;var s=ti.modules[a];if(s&&s.categories[e])return!0}return!1};_r.cleanPlot=function(e,t,r,i){var a,s,l=i._basePlotModules||[];for(a=0;a<l.length;a++){var f=l[a];f.clean&&f.clean(e,t,r,i)}var h=i._has&&i._has("gl"),v=t._has&&t._has("gl");h&&!v&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var m=!!i._infolayer;e:for(a=0;a<r.length;a++){var _=r[a],T=_.uid;for(s=0;s<e.length;s++){var M=e[s];if(T===M.uid)continue e}m&&i._infolayer.select(".cb"+T).remove()}};_r.linkSubplots=function(e,t,r,i){var a,s,l=i._plots||{},f=t._plots={},h=t._subplots,v={_fullData:e,_fullLayout:t},m=h.cartesian||[];for(a=0;a<m.length;a++){var _=m[a],T=l[_],M=Os.getFromId(v,_,"x"),C=Os.getFromId(v,_,"y"),E;for(T?E=f[_]=T:(E=f[_]={},E.id=_),M._counterAxes.push(C._id),C._counterAxes.push(M._id),M._subplotsWith.push(_),C._subplotsWith.push(_),E.xaxis=M,E.yaxis=C,E._hasClipOnAxisFalse=!1,s=0;s<e.length;s++){var L=e[s];if(L.xaxis===E.xaxis._id&&L.yaxis===E.yaxis._id&&L.cliponaxis===!1){E._hasClipOnAxisFalse=!0;break}}}var I=Os.list(v,null,!0),O;for(a=0;a<I.length;a++){O=I[a];var q=null;O.overlaying&&(q=Os.getFromId(v,O.overlaying),q&&q.overlaying&&(O.overlaying=!1,q=null)),O._mainAxis=q||O,q&&(O.domain=q.domain.slice()),O._anchorAxis=O.anchor==="free"?null:Os.getFromId(v,O.anchor)}for(a=0;a<I.length;a++)if(O=I[a],O._counterAxes.sort(Os.idSort),O._subplotsWith.sort(Dr.subplotSort),O._mainSubplot=p$(O,t),O._counterAxes.length&&(O.spikemode&&O.spikemode.indexOf("across")!==-1||O.automargin&&O.mirror&&O.anchor!=="free"||ti.getComponentMethod("rangeslider","isVisible")(O))){var z=1,N=0;for(s=0;s<O._counterAxes.length;s++){var H=Os.getFromId(v,O._counterAxes[s]);z=Math.min(z,H.domain[0]),N=Math.max(N,H.domain[1])}z<N&&(O._counterDomainMin=z,O._counterDomainMax=N)}};function p$(e,t){var r={_fullLayout:t},i=e._id.charAt(0)==="x",a=e._mainAxis._anchorAxis,s="",l="",f="";if(a&&(f=a._mainAxis._id,s=i?e._id+f:f+e._id),!s||!t._plots[s]){s="";for(var h=e._counterAxes,v=0;v<h.length;v++){var m=h[v],_=i?e._id+m:m+e._id;l||(l=_);var T=Os.getFromId(r,m);if(f&&T.overlaying===f){s=_;break}}}return s||l}_r.clearExpandedTraceDefaultColors=function(e){var t,r,i;function a(l,f,h,v){r[v]=f,r.length=v+1,l.valType==="color"&&l.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],rC.crawl(e._module.attributes,a)),i=0;i<t.length;i++){var s=Dr.nestedProperty(e,"_input."+t[i]);s.get()||Dr.nestedProperty(e,t[i]).set(null)}};_r.supplyDataDefaults=function(e,t,r,i){var a=i._modules,s=i._visibleModules,l=i._basePlotModules,f=0,h=0,v,m,_;i._transformModules=[];function T(O){t.push(O);var q=O._module;q&&(Dr.pushUnique(a,q),O.visible===!0&&Dr.pushUnique(s,q),Dr.pushUnique(l,O._module.basePlotModule),f++,O._input.visible!==!1&&h++)}var M={},C=[],E=(r.template||{}).data||{},L=a$.traceTemplater(E);for(v=0;v<e.length;v++)_=e[v],m=L.newTrace(_),m.uid=i._traceUids[v],_r.supplyTraceDefaults(_,m,h,i,v),m.index=v,m._input=_,m._fullInput=m,T(m),ti.traceIs(m,"carpetAxis")&&(M[m.carpet]=m),ti.traceIs(m,"carpetDependent")&&C.push(v);for(v=0;v<C.length;v++)if(m=t[C[v]],!!m.visible){var I=M[m.carpet];if(m._carpet=I,!I||!I.visible){m.visible=!1;continue}m.xaxis=I.xaxis,m.yaxis=I.yaxis}};_r.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function i(a,s){return Dr.coerce(e||{},r,Nw,a,s)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=_r.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=_r.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=_r.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=_r.supplyAnimationTransitionDefaults(e.transition||{});return r};_r.supplyAnimationFrameDefaults=function(e){var t={};function r(i,a){return Dr.coerce(e||{},t,Nw.frame,i,a)}return r("duration"),r("redraw"),t};_r.supplyAnimationTransitionDefaults=function(e){var t={};function r(i,a){return Dr.coerce(e||{},t,Nw.transition,i,a)}return r("duration"),r("easing"),t};_r.supplyFrameDefaults=function(e){var t={};function r(i,a){return Dr.coerce(e,t,o$,i,a)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};_r.supplyTraceDefaults=function(e,t,r,i,a){var s=i.colorway||aC.defaults,l=s[r%s.length],f;function h(q,z){return Dr.coerce(e,t,_r.attributes,q,z)}var v=h("visible");h("type"),h("name",i._traceWord+" "+a),h("uirevision",i.uirevision);var m=_r.getModule(t);if(t._module=m,m){var _=m.basePlotModule,T=_.attr,M=_.attributes;if(T&&M){var C=i._subplots,E="";if(Array.isArray(T))for(f=0;f<T.length;f++){var L=T[f],I=Dr.coerce(e,t,M,L);C[L]&&Dr.pushUnique(C[L],I),E+=I}else E=Dr.coerce(e,t,M,T);C[_.name]&&Dr.pushUnique(C[_.name],E)}}if(v&&(h("customdata"),h("ids"),h("meta"),ti.traceIs(t,"showLegend")?(Dr.coerce(e,t,m.attributes.showlegend?m.attributes:_r.attributes,"showlegend"),Dr.coerce(e,t,m.attributes.legend?m.attributes:_r.attributes,"legend"),h("legendwidth"),h("legendgroup"),h("legendgrouptitle.text"),h("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,m&&m.supplyDefaults(e,t,l,i),ti.traceIs(t,"noOpacity")||h("opacity"),ti.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),ti.traceIs(t,"noHover")||(t.hovertemplate||Dr.coerceHoverinfo(e,t,i),t.type!=="parcats"&&ti.getComponentMethod("fx","supplyDefaults")(e,t,l,i)),m&&m.selectPoints)){var O=h("selectedpoints");Dr.isTypedArray(O)&&(t.selectedpoints=Array.from(O))}return t};_r.supplyLayoutGlobalDefaults=function(e,t,r){function i(_,T){return Dr.coerce(e,t,_r.layoutAttributes,_,T)}var a=e.template;Dr.isPlainObject(a)&&(t.template=a,t._template=a.layout,t._dataTemplate=a.data),i("autotypenumbers");var s=Dr.coerceFont(i,"font"),l=s.size;Dr.coerceFont(i,"title.font",s,{overrideDflt:{size:Math.round(l*1.4)}}),i("title.text",t._dfltTitle.plot),i("title.xref");var f=i("title.yref");i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var h=i("title.automargin");i("title.x"),i("title.xanchor"),i("title.y"),i("title.yanchor"),i("title.subtitle.text",t._dfltTitle.subtitle),Dr.coerceFont(i,"title.subtitle.font",s,{overrideDflt:{size:Math.round(t.title.font.size*.7)}}),h&&(f==="paper"&&(t.title.y!==0&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y===0?"top":"bottom")),f==="container"&&(t.title.y==="auto"&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y<.5?"bottom":"top")));var v=i("uniformtext.mode");v&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&_r.sanitizeMargins(t),ti.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",r.decimal+r.thousands),i("hidesources"),i("colorway"),i("datarevision");var m=i("uirevision");i("editrevision",m),i("selectionrevision",m),ti.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),ti.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),ti.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,i),i("meta"),Dr.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),ti.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),ti.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i),Dr.coerce(e,t,n$,"scattermode")};function X_(e){return typeof e=="string"&&e.slice(-2)==="px"&&parseFloat(e)}_r.plotAutoSize=function(t,r,i){var a=t._context||{},s=a.frameMargins,l,f,h=Dr.isPlotDiv(t);if(h&&t.emit("plotly_autosize"),a.fillFrame)l=window.innerWidth,f=window.innerHeight,document.body.style.overflow="hidden";else{var v=h?window.getComputedStyle(t):{};if(l=X_(v.width)||X_(v.maxWidth)||i.width,f=X_(v.height)||X_(v.maxHeight)||i.height,jy(s)&&s>0){var m=1-2*s;l=Math.round(m*l),f=Math.round(m*f)}}var _=_r.layoutAttributes.width.min,T=_r.layoutAttributes.height.min;l<_&&(l=_),f<T&&(f=T);var M=!r.width&&Math.abs(i.width-l)>1,C=!r.height&&Math.abs(i.height-f)>1;(C||M)&&(M&&(i.width=l),C&&(i.height=f)),t._initialAutoSize||(t._initialAutoSize={width:l,height:f}),_r.sanitizeMargins(i)};_r.supplyLayoutModuleDefaults=function(e,t,r,i){var a=ti.componentsRegistry,s=t._basePlotModules,l,f,h,v=ti.subplotsRegistry.cartesian;for(l in a)h=a[l],h.includeBasePlot&&h.includeBasePlot(e,t);s.length||s.push(v),t._has("cartesian")&&(ti.getComponentMethod("grid","contentDefaults")(e,t),v.finalizeSubplots(e,t));for(var m in t._subplots)t._subplots[m].sort(Dr.subplotSort);for(f=0;f<s.length;f++)h=s[f],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r);var _=t._modules;for(f=0;f<_.length;f++)h=_[f],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r);var T=t._transformModules;for(f=0;f<T.length;f++)h=T[f],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r,i);for(l in a)h=a[l],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r)};_r.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Dr.clearThrottle(),Dr.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};_r.style=function(e){var t=e._fullLayout._visibleModules,r=[],i;for(i=0;i<t.length;i++){var a=t[i];a.style&&Dr.pushUnique(r,a.style)}for(i=0;i<r.length;i++)r[i](e)};_r.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,i=e.margin,a=t-(i.l+i.r),s=r-(i.t+i.b),l;a<0&&(l=(t-1)/(i.l+i.r),i.l=Math.floor(l*i.l),i.r=Math.floor(l*i.r)),s<0&&(l=(r-1)/(i.t+i.b),i.t=Math.floor(l*i.t),i.b=Math.floor(l*i.b))}};_r.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};_r.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function iC(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}var nC=2,oC=2;_r.autoMargin=function(e,t,r){var i=e._fullLayout,a=i.width,s=i.height,l=i.margin,f=i.minreducedwidth,h=i.minreducedheight,v=Dr.constrain(a-l.l-l.r,nC,f),m=Dr.constrain(s-l.t-l.b,oC,h),_=Math.max(0,a-v),T=Math.max(0,s-m),M=i._pushmargin,C=i._pushmarginIds;if(l.autoexpand!==!1){if(!r)delete M[t],delete C[t];else{var E=r.pad;if(E===void 0&&(E=Math.min(12,l.l,l.r,l.t,l.b)),_){var L=(r.l+r.r)/_;L>1&&(r.l/=L,r.r/=L)}if(T){var I=(r.t+r.b)/T;I>1&&(r.t/=I,r.b/=I)}var O=r.xl!==void 0?r.xl:r.x,q=r.xr!==void 0?r.xr:r.x,z=r.yt!==void 0?r.yt:r.y,N=r.yb!==void 0?r.yb:r.y;M[t]={l:{val:O,size:r.l+E},r:{val:q,size:r.r+E},b:{val:N,size:r.b+E},t:{val:z,size:r.t+E}},C[t]=1}if(!i._replotting)return _r.doAutoMargin(e)}};function m$(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=Os.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}_r.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,i=t.height;t._size||(t._size={}),iC(t);var a=t._size,s=t.margin,l={t:0,b:0,l:0,r:0},f=Dr.extendFlat({},a),h=s.l,v=s.r,m=s.t,_=s.b,T=t._pushmargin,M=t._pushmarginIds,C=t.minreducedwidth,E=t.minreducedheight;if(s.autoexpand!==!1){for(var L in T)M[L]||delete T[L];var I=e._fullLayout._reservedMargin;for(var O in I)for(var q in I[O]){var z=I[O][q];l[q]=Math.max(l[q],z)}T.base={l:{val:0,size:h},r:{val:1,size:v},t:{val:1,size:m},b:{val:0,size:_}};for(var N in l){var H=0;for(var V in T)V!=="base"&&jy(T[V][N].size)&&(H=T[V][N].size>H?T[V][N].size:H);var W=Math.max(0,s[N]-H);l[N]=Math.max(0,l[N]-W)}for(var J in T){var ee=T[J].l||{},ie=T[J].b||{},oe=ee.val,fe=ee.size,le=ie.val,Te=ie.size,Se=r-l.r-l.l,Me=i-l.t-l.b;for(var Ae in T){if(jy(fe)&&T[Ae].r){var pe=T[Ae].r.val,ke=T[Ae].r.size;if(pe>oe){var Ee=(fe*pe+(ke-Se)*oe)/(pe-oe),Xe=(ke*(1-oe)+(fe-Se)*(1-pe))/(pe-oe);Ee+Xe>h+v&&(h=Ee,v=Xe)}}if(jy(Te)&&T[Ae].t){var lt=T[Ae].t.val,it=T[Ae].t.size;if(lt>le){var _t=(Te*lt+(it-Me)*le)/(lt-le),Ye=(it*(1-le)+(Te-Me)*(1-lt))/(lt-le);_t+Ye>_+m&&(_=_t,m=Ye)}}}}}var kt=Dr.constrain(r-s.l-s.r,nC,C),st=Dr.constrain(i-s.t-s.b,oC,E),dt=Math.max(0,r-kt),It=Math.max(0,i-st);if(dt){var yt=(h+v)/dt;yt>1&&(h/=yt,v/=yt)}if(It){var de=(_+m)/It;de>1&&(_/=de,m/=de)}if(a.l=Math.round(h)+l.l,a.r=Math.round(v)+l.r,a.t=Math.round(m)+l.t,a.b=Math.round(_)+l.b,a.p=Math.round(s.pad),a.w=Math.round(r)-a.l-a.r,a.h=Math.round(i)-a.t-a.b,!t._replotting&&(_r.didMarginChange(f,a)||m$(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var ze=3*(1+Object.keys(M).length);if(t._redrawFromAutoMarginCount<ze)return ti.call("_doPlot",e);t._size=f,Dr.warn("Too many auto-margin redraws.")}y$(e)};function y$(e){var t=Os.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<t.length;i++){var a=t[i][r];a&&a()}})}var Qk=["l","r","t","b","p","w","h"];_r.didMarginChange=function(e,t){for(var r=0;r<Qk.length;r++){var i=Qk[r],a=e[i],s=t[i];if(!jy(a)||Math.abs(s-a)>1)return!0}return!1};_r.graphJson=function(e,t,r,i,a,s){(a&&t&&!e._fullData||a&&!t&&!e._fullLayout)&&_r.supplyDefaults(e);var l=a?e._fullData:e.data,f=a?e._fullLayout:e.layout,h=(e._transitionData||{})._frames;function v(T,M){if(typeof T=="function")return M?"_function_":null;if(Dr.isPlainObject(T)){var C={},E;return Object.keys(T).sort().forEach(function(q){if(["_","["].indexOf(q.charAt(0))===-1){if(typeof T[q]=="function"){M&&(C[q]="_function");return}if(r==="keepdata"){if(q.slice(-3)==="src")return}else if(r==="keepstream"){if(E=T[q+"src"],typeof E=="string"&&E.indexOf(":")>0&&!Dr.isPlainObject(T.stream))return}else if(r!=="keepall"&&(E=T[q+"src"],typeof E=="string"&&E.indexOf(":")>0))return;C[q]=v(T[q],M)}}),C}var L=Array.isArray(T),I=Dr.isTypedArray(T);if((L||I)&&T.dtype&&T.shape){var O=T.bdata;return v({dtype:T.dtype,shape:T.shape,bdata:Dr.isArrayBuffer(O)?r$.encode(O):O},M)}return L?T.map(function(q){return v(q,M)}):I?Dr.simpleMap(T,Dr.identity):Dr.isJSDate(T)?Dr.ms2DateTimeLocal(+T):T}var m={data:(l||[]).map(function(T){var M=v(T);return t&&delete M.fit,M})};if(!t&&(m.layout=v(f),a)){var _=f._size;m.layout.computed={margin:{b:_.b,l:_.l,r:_.r,t:_.t}}}return h&&(m.frames=v(h)),s&&(m.config=v(e._context,!0)),i==="object"?m:JSON.stringify(m)};_r.modifyFrames=function(e,t){var r,i,a,s=e._transitionData._frames,l=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(i=t[r],i.type){case"replace":a=i.value;var f=(s[i.index]||{}).name,h=a.name;s[i.index]=l[h]=a,h!==f&&(delete l[f],l[h]=a);break;case"insert":a=i.value,l[a.name]=a,s.splice(i.index,0,a);break;case"delete":a=s[i.index],delete l[a.name],s.splice(i.index,1);break}return Promise.resolve()};_r.computeFrame=function(e,t){var r=e._transitionData._frameHash,i,a,s,l;if(!t)throw new Error("computeFrame must be given a string frame name");var f=r[t.toString()];if(!f)return!1;for(var h=[f],v=[f.name];f.baseframe&&(f=r[f.baseframe.toString()])&&v.indexOf(f.name)===-1;)h.push(f),v.push(f.name);for(var m={};f=h.pop();)if(f.layout&&(m.layout=_r.extendLayout(m.layout,f.layout)),f.data){if(m.data||(m.data=[]),a=f.traces,!a)for(a=[],i=0;i<f.data.length;i++)a[i]=i;for(m.traces||(m.traces=[]),i=0;i<f.data.length;i++)s=a[i],s!=null&&(l=m.traces.indexOf(s),l===-1&&(l=m.data.length,m.traces[l]=s),m.data[l]=_r.extendTrace(m.data[l],f.data[i]))}return m};_r.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,i=0;i<r.length;i++){var a=r[i];a&&a.name&&(t[a.name]=a)}};_r.extendObjectWithContainers=function(e,t,r){var i,a,s,l,f,h,v,m,_=Dr.extendDeepNoArrays({},t||{}),T=Dr.expandObjectPaths(_),M={};if(r&&r.length)for(s=0;s<r.length;s++)i=Dr.nestedProperty(T,r[s]),a=i.get(),a===void 0?Dr.nestedProperty(M,r[s]).set(null):(i.set(null),Dr.nestedProperty(M,r[s]).set(a));if(e=Dr.extendDeepNoArrays(e||{},T),r&&r.length){for(s=0;s<r.length;s++)if(f=Dr.nestedProperty(M,r[s]),v=f.get(),!!v){for(h=Dr.nestedProperty(e,r[s]),m=h.get(),Array.isArray(m)||(m=[],h.set(m)),l=0;l<v.length;l++){var C=v[l];C===null?m[l]=null:m[l]=_r.extendObjectWithContainers(m[l],C)}h.set(m)}}return e};_r.dataArrayContainers=["transforms","dimensions"];_r.layoutArrayContainers=ti.layoutArrayContainers;_r.extendTrace=function(e,t){return _r.extendObjectWithContainers(e,t,_r.dataArrayContainers)};_r.extendLayout=function(e,t){return _r.extendObjectWithContainers(e,t,_r.layoutArrayContainers)};_r.transition=function(e,t,r,i,a,s){var l={redraw:a.redraw},f={},h=[];return l.prepareFn=function(){for(var v=Array.isArray(t)?t.length:0,m=i.slice(0,v),_=0;_<m.length;_++){var T=m[_],M=e._fullData[T],C=M._module;if(C){if(C.animatable){var E=C.basePlotModule.name;f[E]||(f[E]=[]),f[E].push(T)}e.data[m[_]]=_r.extendTrace(e.data[m[_]],t[_])}}var L=Dr.expandObjectPaths(Dr.extendDeepNoArrays({},r)),I=/^[xy]axis[0-9]*$/;for(var O in L)I.test(O)&&delete L[O].range;_r.extendLayout(e.layout,L),delete e.calcdata,_r.supplyDefaults(e),_r.doCalcdata(e);var q=Dr.expandObjectPaths(r);if(q){var z=e._fullLayout._plots;for(var N in z){var H=z[N],V=H.xaxis,W=H.yaxis,J=V.range.slice(),ee=W.range.slice(),ie=null,oe=null,fe=null,le=null;Array.isArray(q[V._name+".range"])?ie=q[V._name+".range"].slice():Array.isArray((q[V._name]||{}).range)&&(ie=q[V._name].range.slice()),Array.isArray(q[W._name+".range"])?oe=q[W._name+".range"].slice():Array.isArray((q[W._name]||{}).range)&&(oe=q[W._name].range.slice()),J&&ie&&(V.r2l(J[0])!==V.r2l(ie[0])||V.r2l(J[1])!==V.r2l(ie[1]))&&(fe={xr0:J,xr1:ie}),ee&&oe&&(W.r2l(ee[0])!==W.r2l(oe[0])||W.r2l(ee[1])!==W.r2l(oe[1]))&&(le={yr0:ee,yr1:oe}),(fe||le)&&h.push(Dr.extendFlat({plotinfo:H},fe,le))}}return Promise.resolve()},l.runFn=function(v){var m,_=e._fullLayout._basePlotModules,T=h.length,M;if(r)for(M=0;M<_.length;M++)_[M].transitionAxes&&_[M].transitionAxes(e,h,s,v);T?(m=Dr.extendFlat({},s),m.duration=0,delete f.cartesian):m=s;for(var C in f){var E=f[C],L=e._fullData[E[0]]._module;L.basePlotModule.plot(e,E,m,v)}},sC(e,s,l)};_r.transitionFromReact=function(e,t,r,i){var a=e._fullLayout,s=a.transition,l={},f=[];return l.prepareFn=function(){var h=a._plots;l.redraw=!1,t.anim==="some"&&(l.redraw=!0),r.anim==="some"&&(l.redraw=!0);for(var v in h){var m=h[v],_=m.xaxis,T=m.yaxis,M=i[_._name].range.slice(),C=i[T._name].range.slice(),E=_.range.slice(),L=T.range.slice();_.setScale(),T.setScale();var I=null,O=null;(_.r2l(M[0])!==_.r2l(E[0])||_.r2l(M[1])!==_.r2l(E[1]))&&(I={xr0:M,xr1:E}),(T.r2l(C[0])!==T.r2l(L[0])||T.r2l(C[1])!==T.r2l(L[1]))&&(O={yr0:C,yr1:L}),(I||O)&&f.push(Dr.extendFlat({plotinfo:m},I,O))}return Promise.resolve()},l.runFn=function(h){for(var v=e._fullData,m=e._fullLayout,_=m._basePlotModules,T,M,C,E=[],L=0;L<v.length;L++)E.push(L);function I(){if(e._fullLayout)for(var q=0;q<_.length;q++)_[q].transitionAxes&&_[q].transitionAxes(e,f,T,h)}function O(){if(e._fullLayout)for(var q=0;q<_.length;q++)_[q].plot(e,C,M,h)}f.length&&t.anim?s.ordering==="traces first"?(T=Dr.extendFlat({},s,{duration:0}),C=E,M=s,setTimeout(I,s.duration),O()):(T=s,C=null,M=Dr.extendFlat({},s,{duration:0}),setTimeout(O,T.duration),I()):f.length?(T=s,I()):t.anim&&(C=E,M=s,O())},sC(e,s,l)};function sC(e,t,r){var i=!1;function a(_){var T=Promise.resolve();if(!_)return T;for(;_.length;)T=T.then(_.shift());return T}function s(_){if(_)for(;_.length;)_.shift()}function l(){return e.emit("plotly_transitioning",[]),new Promise(function(_){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return ti.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var T=0,M=0;function C(){return T++,function(){M++,!i&&M===T&&f(_)}}r.runFn(C),setTimeout(C())})}function f(_){if(e._transitionData)return s(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return ti.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(_)}function h(){if(e._transitionData)return e._transitioning=!1,a(e._transitionData._interruptCallbacks)}var v=[_r.previousPromises,h,r.prepareFn,_r.rehover,_r.reselect,l],m=Dr.syncOrAsync(v,e);return(!m||!m.then)&&(m=Promise.resolve()),m.then(function(){return e})}_r.doCalcdata=function(e,t){var r=Os.list(e),i=e._fullData,a=e._fullLayout,s,l,f,h,v=new Array(i.length),m=(e.calcdata||[]).slice();for(e.calcdata=v,a._numBoxes=0,a._numViolins=0,a._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,a._piecolormap={},a._sunburstcolormap={},a._treemapcolormap={},a._iciclecolormap={},a._funnelareacolormap={},f=0;f<i.length;f++)if(Array.isArray(t)&&t.indexOf(f)===-1){v[f]=m[f];continue}for(f=0;f<i.length;f++)s=i[f],s._arrayAttrs=rC.findArrayAttributes(s),s._extremes={};var _=a._subplots.polar||[];for(f=0;f<_.length;f++)r.push(a[_[f]].radialaxis,a[_[f]].angularaxis);for(var T in a._colorAxes){var M=a[T];M.cauto!==!1&&(delete M.cmin,delete M.cmax)}var C=!1;function E(O){if(s=i[O],l=s._module,s.visible===!0&&s.transforms){if(l&&l.calc){var q=l.calc(e,s);q[0]&&q[0].t&&q[0].t._scene&&delete q[0].t._scene.dirty}for(h=0;h<s.transforms.length;h++){var z=s.transforms[h];l=transformsRegistry[z.type],l&&l.calcTransform&&(s._hasCalcTransform=!0,C=!0,l.calcTransform(e,s,z))}}}function L(O,q){if(s=i[O],l=s._module,!!l.isContainer===q){var z=[];if(s.visible===!0&&s._length!==0){delete s._indexToPoints;var N=s.transforms||[];for(h=N.length-1;h>=0;h--)if(N[h].enabled){s._indexToPoints=N[h]._indexToPoints;break}l&&l.calc&&(z=l.calc(e,s))}(!Array.isArray(z)||!z[0])&&(z=[{x:jk,y:jk}]),z[0].t||(z[0].t={}),z[0].trace=s,v[O]=z}}for($k(r,i,a),f=0;f<i.length;f++)L(f,!0);for(f=0;f<i.length;f++)E(f);for(C&&$k(r,i,a),f=0;f<i.length;f++)L(f,!0);for(f=0;f<i.length;f++)L(f,!1);eC(e);var I=_$(r,e);if(I.length){for(a._numBoxes=0,a._numViolins=0,f=0;f<I.length;f++)L(I[f],!0);for(f=0;f<I.length;f++)L(I[f],!1);eC(e)}ti.getComponentMethod("fx","calc")(e),ti.getComponentMethod("errorbars","calc")(e)};var g$=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function _$(e,t){var r=[],i,a,s,l,f;function h(Ae,pe,ke){var Ee=pe._id.charAt(0);if(Ae==="histogram2dcontour"){var Xe=pe._counterAxes[0],lt=Os.getFromId(t,Xe),it=Ee==="x"||Xe==="x"&&lt.type==="category",_t=Ee==="y"||Xe==="y"&&lt.type==="category";return function(Ye,kt){return Ye===0||kt===0||it&&Ye===ke[kt].length-1||_t&&kt===ke.length-1?-1:(Ee==="y"?kt:Ye)-1}}else return function(Ye,kt){return Ee==="y"?kt:Ye}}var v={min:function(Ae){return Dr.aggNums(Math.min,null,Ae)},max:function(Ae){return Dr.aggNums(Math.max,null,Ae)},sum:function(Ae){return Dr.aggNums(function(pe,ke){return pe+ke},null,Ae)},total:function(Ae){return Dr.aggNums(function(pe,ke){return pe+ke},null,Ae)},mean:function(Ae){return Dr.mean(Ae)},"geometric mean":function(Ae){return Dr.geometricMean(Ae)},median:function(Ae){return Dr.median(Ae)}};function m(Ae,pe){return Ae[1]-pe[1]}function _(Ae,pe){return pe[1]-Ae[1]}for(i=0;i<e.length;i++){var T=e[i];if(T.type==="category"){var M=T.categoryorder.match(g$);if(M){var C=M[1],E=M[2],L=T._id.charAt(0),I=L==="x",O=[];for(a=0;a<T._categories.length;a++)O.push([T._categories[a],[]]);for(a=0;a<T._traceIndices.length;a++){var q=T._traceIndices[a],z=t._fullData[q];if(z.visible===!0){var N=z.type;ti.traceIs(z,"histogram")&&(delete z._xautoBinFinished,delete z._yautoBinFinished);var H=N==="splom",V=N==="scattergl",W=t.calcdata[q];for(s=0;s<W.length;s++){var J=W[s],ee,ie;if(H){var oe=z._axesDim[T._id];if(!I){var fe=z._diag[oe][0];fe&&(T=t._fullLayout[Os.id2name(fe)])}var le=J.trace.dimensions[oe].values;for(l=0;l<le.length;l++)for(ee=T._categoriesMap[le[l]],f=0;f<J.trace.dimensions.length;f++)if(f!==oe){var Te=J.trace.dimensions[f];O[ee][1].push(Te.values[l])}}else if(V){for(l=0;l<J.t.x.length;l++)I?(ee=J.t.x[l],ie=J.t.y[l]):(ee=J.t.y[l],ie=J.t.x[l]),O[ee][1].push(ie);J.t&&J.t._scene&&delete J.t._scene.dirty}else if(J.hasOwnProperty("z")){ie=J.z;var Se=h(z.type,T,ie);for(l=0;l<ie.length;l++)for(f=0;f<ie[l].length;f++)ee=Se(f,l),ee+1&&O[ee][1].push(ie[l][f])}else for(ee=J.p,ee===void 0&&(ee=J[L]),ie=J.s,ie===void 0&&(ie=J.v),ie===void 0&&(ie=I?J.y:J.x),Array.isArray(ie)||(ie===void 0?ie=[]:ie=[ie]),l=0;l<ie.length;l++)O[ee][1].push(ie[l])}}}T._categoriesValue=O;var Me=[];for(a=0;a<O.length;a++)Me.push([O[a][0],v[C](O[a][1])]);Me.sort(E==="descending"?_:m),T._categoriesAggregatedValue=Me,T._initialCategories=Me.map(function(Ae){return Ae[0]}),r=r.concat(T.sortByInitialCategories())}}}return r}function $k(e,t,r){var i={};function a(h){h.clearCalc(),h.type==="multicategory"&&h.setupMultiCategory(t),i[h._id]=1}Dr.simpleMap(e,a);for(var s=r._axisMatchGroups||[],l=0;l<s.length;l++)for(var f in s[l])i[f]||a(r[Os.id2name(f)])}function eC(e){var t=e._fullLayout,r=t._visibleModules,i={},a,s,l;for(s=0;s<r.length;s++){var f=r[s],h=f.crossTraceCalc;if(h){var v=f.basePlotModule.name;i[v]?Dr.pushUnique(i[v],h):i[v]=[h]}}for(l in i){var m=i[l],_=t._subplots[l];if(Array.isArray(_))for(a=0;a<_.length;a++){var T=_[a],M=l==="cartesian"?t._plots[T]:t[T];for(s=0;s<m.length;s++)m[s](e,M,T)}else for(s=0;s<m.length;s++)m[s](e)}}_r.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};_r.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};_r.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,i=t._previousSelections;t._previousSelections=r;var a=t._reselect||JSON.stringify(r)!==JSON.stringify(i);ti.getComponentMethod("selections","reselect")(e,a)};_r.generalUpdatePerTraceModule=function(e,t,r,i){var a=t.traceHash,s={},l;for(l=0;l<r.length;l++){var f=r[l],h=f[0].trace;h.visible&&(s[h.type]=s[h.type]||[],s[h.type].push(f))}for(var v in a)if(!s[v]){var m=a[v][0],_=m[0].trace;_.visible=!1,s[v]=[m]}for(var T in s){var M=s[T],C=M[0][0].trace._module;C.plot(e,t,Dr.filterVisible(M),i)}t.traceHash=s};_r.plotBasePlot=function(e,t,r,i,a){var s=ti.getModule(e),l=s$(t.calcdata,s)[0];s.plot(t,l,i,a)};_r.cleanBasePlot=function(e,t,r,i,a){var s=a._has&&a._has(e),l=r._has&&r._has(e);s&&!l&&a["_"+e+"layer"].selectAll("g.trace").remove()}});var Oh=me(_d=>{"use strict";_d.xmlns="http://www.w3.org/2000/xmlns/";_d.svg="http://www.w3.org/2000/svg";_d.xlink="http://www.w3.org/1999/xlink";_d.svgAttrs={xmlns:_d.svg,"xmlns:xlink":_d.xlink}});var No=me((t1e,uC)=>{"use strict";uC.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}});var ro=me(Yl=>{"use strict";var On=ja(),Mc=Bt(),x$=Mc.strTranslate,Bw=Oh(),b$=No().LINE_SPACING,w$=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Yl.convertToTspans=function(e,t,r){var i=e.text(),a=!e.attr("data-notex")&&t&&t._context.typesetMath&&typeof MathJax!="undefined"&&i.match(w$),s=On.select(e.node().parentNode);if(s.empty())return;var l=e.attr("class")?e.attr("class").split(" ")[0]:"text";l+="-math",s.selectAll("svg."+l).remove(),s.selectAll("g."+l+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function f(){s.empty()||(l=e.attr("class")+"-math",s.select("svg."+l).remove()),e.text("").style("white-space","pre");var h=R$(e.node(),i);h&&e.style("pointer-events","all"),Yl.positionText(e),r&&r.call(e)}return a?(t&&t._promises||[]).push(new Promise(function(h){e.style("display","none");var v=parseInt(e.node().style.fontSize,10),m={fontSize:v};S$(a[2],m,function(_,T,M){s.selectAll("svg."+l).remove(),s.selectAll("g."+l+"-group").remove();var C=_&&_.select("svg");if(!C||!C.node()){f(),h();return}var E=s.append("g").classed(l+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});E.node().appendChild(C.node()),T&&T.node()&&C.node().insertBefore(T.node().cloneNode(!0),C.node().firstChild);var L=M.width,I=M.height;C.attr({class:l,height:I,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var O=e.node().style.fill||"black",q=C.select("g");q.attr({fill:O,stroke:O});var z=q.node().getBoundingClientRect(),N=z.width,H=z.height;(N>L||H>I)&&(C.style("overflow","hidden"),z=C.node().getBoundingClientRect(),N=z.width,H=z.height);var V=+e.attr("x"),W=+e.attr("y"),J=v||e.node().getBoundingClientRect().height,ee=-J/4;if(l[0]==="y")E.attr({transform:"rotate("+[-90,V,W]+")"+x$(-N/2,ee-H/2)});else if(l[0]==="l")W=ee-H/2;else if(l[0]==="a"&&l.indexOf("atitle")!==0)V=0,W=ee;else{var ie=e.attr("text-anchor");V=V-N*(ie==="middle"?.5:ie==="end"?1:0),W=W+ee-H/2}C.attr({x:V,y:W}),r&&r.call(e,E),h(E)})})):f(),e};var T$=/(<|&lt;|&#60;)/g,A$=/(>|&gt;|&#62;)/g;function M$(e){return e.replace(T$,"\\lt ").replace(A$,"\\gt ")}var fC=[["$","$"],["\\(","\\)"]];function S$(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){Mc.warn("No MathJax version:",MathJax.version);return}var a,s,l,f,h=function(){return s=Mc.extendDeepAll({},MathJax.Hub.config),l=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:fC},displayAlign:"left"})},v=function(){s=Mc.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=fC},m=function(){if(a=MathJax.Hub.config.menuSettings.renderer,a!=="SVG")return MathJax.Hub.setRenderer("SVG")},_=function(){a=MathJax.config.startup.output,a!=="svg"&&(MathJax.config.startup.output="svg")},T=function(){var O="math-output-"+Mc.randstr({},64);f=On.select("body").append("div").attr({id:O}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(M$(e));var q=f.node();return i===2?MathJax.Hub.Typeset(q):MathJax.typeset([q])},M=function(){var O=f.select(i===2?".MathJax_SVG":".MathJax"),q=!O.empty()&&f.select("svg").node();if(!q)Mc.log("There was an error in the tex syntax.",e),r();else{var z=q.getBoundingClientRect(),N;i===2?N=On.select("body").select("#MathJax_SVG_glyphs"):N=O.select("defs"),r(O,N,z)}f.remove()},C=function(){if(a!=="SVG")return MathJax.Hub.setRenderer(a)},E=function(){a!=="svg"&&(MathJax.config.startup.output=a)},L=function(){return l!==void 0&&(MathJax.Hub.processSectionDelay=l),MathJax.Hub.Config(s)},I=function(){MathJax.config=s};i===2?MathJax.Hub.Queue(h,m,T,M,C,L):i===3&&(v(),_(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){T(),M(),E(),I()}))}var dC={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k$={sub:"0.3em",sup:"-0.6em"},C$={sub:"-0.21em",sup:"0.42em"},cC="\u200B",hC=["http:","https:","mailto:","",void 0,":"],pC=Yl.NEWLINES=/(\r\n?|\n)/g,Uw=/(<[^<>]*>)/,Vw=/<(\/?)([^ >]*)(\s+(.*))?>/i,E$=/<br(\s+.*)?>/i;Yl.BR_TAG_ALL=/<br(\s+.*)?>/gi;var mC=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,yC=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,gC=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,L$=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function xd(e,t){if(!e)return null;var r=e.match(t),i=r&&(r[3]||r[4]);return i&&J_(i)}var D$=/(^|;)\s*color:/;Yl.plainText=function(e,t){t=t||{};for(var r=t.len!==void 0&&t.len!==-1?t.len:1/0,i=t.allowedTags!==void 0?t.allowedTags:["br"],a="...",s=a.length,l=e.split(Uw),f=[],h="",v=0,m=0;m<l.length;m++){var _=l[m],T=_.match(Vw),M=T&&T[2].toLowerCase();if(M)i.indexOf(M)!==-1&&(f.push(_),h=M);else{var C=_.length;if(v+C<r)f.push(_),v+=C;else if(v<r){var E=r-v;h&&(h!=="br"||E<=s||C<=s)&&f.pop(),r>s?f.push(_.slice(0,Math.max(0,E-s))+a):f.push(_.slice(0,E));break}h=""}}return f.join("")};var P$={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},z$=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function J_(e){return e.replace(z$,function(t,r){var i;return r.charAt(0)==="#"?i=I$(r.charAt(1)==="x"?parseInt(r.slice(2),16):parseInt(r.slice(1),10)):i=P$[r],i||t})}Yl.convertEntities=J_;function I$(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r((e>>10)+55232,e%1024+56320)}}function R$(e,t){t=t.replace(pC," ");var r=!1,i=[],a,s=-1;function l(){s++;var H=document.createElementNS(Bw.svg,"tspan");On.select(H).attr({class:"line",dy:s*b$+"em"}),e.appendChild(H),a=H;var V=i;if(i=[{node:H}],V.length>1)for(var W=1;W<V.length;W++)f(V[W])}function f(H){var V=H.type,W={},J;if(V==="a"){J="a";var ee=H.target,ie=H.href,oe=H.popup;ie&&(W={"xlink:xlink:show":ee==="_blank"||ee.charAt(0)!=="_"?"new":"replace",target:ee,"xlink:xlink:href":ie},oe&&(W.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+oe+'");return false;'))}else J="tspan";H.style&&(W.style=H.style);var fe=document.createElementNS(Bw.svg,J);if(V==="sup"||V==="sub"){h(a,cC),a.appendChild(fe);var le=document.createElementNS(Bw.svg,"tspan");h(le,cC),On.select(le).attr("dy",C$[V]),W.dy=k$[V],a.appendChild(fe),a.appendChild(le)}else a.appendChild(fe);On.select(fe).attr(W),a=H.node=fe,i.push(H)}function h(H,V){H.appendChild(document.createTextNode(V))}function v(H){if(i.length===1){Mc.log("Ignoring unexpected end tag </"+H+">.",t);return}var V=i.pop();H!==V.type&&Mc.log("Start tag <"+V.type+"> doesnt match end tag <"+H+">. Pretending it did match.",t),a=i[i.length-1].node}var m=E$.test(t);m?l():(a=e,i=[{node:e}]);for(var _=t.split(Uw),T=0;T<_.length;T++){var M=_[T],C=M.match(Vw),E=C&&C[2].toLowerCase(),L=dC[E];if(E==="br")l();else if(L===void 0)h(a,J_(M));else if(C[1])v(E);else{var I=C[4],O={type:E},q=xd(I,mC);if(q?(q=q.replace(D$,"$1 fill:"),L&&(q+=";"+L)):L&&(q=L),q&&(O.style=q),E==="a"){r=!0;var z=xd(I,yC);if(z){var N=_C(z);N&&(O.href=N,O.target=xd(I,gC)||"_blank",O.popup=xd(I,L$))}}f(O)}}return r}function _C(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),i=document.createElement("a");r.href=e,i.href=t;var a=r.protocol,s=i.protocol;return hC.indexOf(a)!==-1&&hC.indexOf(s)!==-1?t:""}Yl.sanitizeHTML=function(t){t=t.replace(pC," ");for(var r=document.createElement("p"),i=r,a=[],s=t.split(Uw),l=0;l<s.length;l++){var f=s[l],h=f.match(Vw),v=h&&h[2].toLowerCase();if(v in dC)if(h[1])a.length&&(i=a.pop());else{var m=h[4],_=xd(m,mC),T=_?{style:_}:{};if(v==="a"){var M=xd(m,yC);if(M){var C=_C(M);if(C){T.href=C;var E=xd(m,gC);E&&(T.target=E)}}}var L=document.createElement(v);i.appendChild(L),On.select(L).attr(T),i=L,a.push(L)}else i.appendChild(document.createTextNode(J_(f)))}var I="innerHTML";return r[I]};Yl.lineCount=function(t){return t.selectAll("tspan.line").size()||1};Yl.positionText=function(t,r,i){return t.each(function(){var a=On.select(this);function s(h,v){return v===void 0?(v=a.attr(h),v===null&&(a.attr(h,0),v=0)):a.attr(h,v),v}var l=s("x",r),f=s("y",i);this.nodeName==="text"&&a.selectAll("tspan.line").attr({x:l,y:f})})};function vC(e,t,r){var i=r.horizontalAlign,a=r.verticalAlign||"top",s=e.node().getBoundingClientRect(),l=t.node().getBoundingClientRect(),f,h,v;return a==="bottom"?h=function(){return s.bottom-f.height}:a==="middle"?h=function(){return s.top+(s.height-f.height)/2}:h=function(){return s.top},i==="right"?v=function(){return s.right-f.width}:i==="center"?v=function(){return s.left+(s.width-f.width)/2}:v=function(){return s.left},function(){f=this.node().getBoundingClientRect();var m=v()-l.left,_=h()-l.top,T=r.gd||{};if(r.gd){T._fullLayout._calcInverseTransform(T);var M=Mc.apply3DTransform(T._fullLayout._invTransform)(m,_);m=M[0],_=M[1]}return this.style({top:_+"px",left:m+"px","z-index":1e3}),this}}var Ow="1px ";Yl.makeTextShadow=function(e){var t=Ow,r=Ow,i=Ow;return t+r+i+e+", -"+t+"-"+r+i+e+", "+t+"-"+r+i+e+", -"+t+r+i+e};Yl.makeEditable=function(e,t){var r=t.gd,i=t.delegate,a=On.dispatch("edit","input","cancel"),s=i||e;if(e.style({"pointer-events":i?"none":"all"}),e.size()!==1)throw new Error("boo");function l(){h(),e.style({opacity:0});var v=s.attr("class"),m;v?m="."+v.split(" ")[0]+"-math-group":m="[class*=-math-group]",m&&On.select(e.node().parentNode).select(m).style({opacity:0})}function f(v){var m=v.node(),_=document.createRange();_.selectNodeContents(m);var T=window.getSelection();T.removeAllRanges(),T.addRange(_),m.focus()}function h(){var v=On.select(r),m=v.select(".svg-container"),_=m.append("div"),T=e.node().style,M=parseFloat(T.fontSize||12),C=t.text;C===void 0&&(C=e.attr("data-unformatted")),_.classed("plugin-editable editable",!0).style({position:"absolute","font-family":T.fontFamily||"Arial","font-size":M,color:t.fill||T.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-M/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(C).call(vC(e,m,t)).on("blur",function(){r._editing=!1,e.text(this.textContent).style({opacity:1});var E=On.select(this).attr("class"),L;E?L="."+E.split(" ")[0]+"-math-group":L="[class*=-math-group]",L&&On.select(e.node().parentNode).select(L).style({opacity:0});var I=this.textContent;On.select(this).transition().duration(0).remove(),On.select(document).on("mouseup",null),a.edit.call(e,I)}).on("focus",function(){var E=this;r._editing=!0,On.select(document).on("mouseup",function(){if(On.event.target===E)return!1;document.activeElement===_.node()&&_.node().blur()})}).on("keyup",function(){On.event.which===27?(r._editing=!1,e.style({opacity:1}),On.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),On.select(this).call(vC(e,m,t)))}).on("keydown",function(){On.event.which===13&&this.blur()}).call(f)}return t.immediate?l():s.on("click",l),On.rebind(e,a,"on")}});var Ef=me((a1e,kC)=>{"use strict";var F$=ja(),Q_=Mf(),Ky=Da(),K_=Bt(),xC=Oa(),q$=ud().isValid;function N$(e,t,r){var i=t?K_.nestedProperty(e,t).get()||{}:e,a=i[r||"color"];a&&a._inputArray&&(a=a._inputArray);var s=!1;if(K_.isArrayOrTypedArray(a)){for(var l=0;l<a.length;l++)if(Ky(a[l])){s=!0;break}}return K_.isPlainObject(i)&&(s||i.showscale===!0||Ky(i.cmin)&&Ky(i.cmax)||q$(i.colorscale)||K_.isPlainObject(i.colorbar))}var bC=["showscale","autocolorscale","colorscale","reversescale","colorbar"],Jy=["min","max","mid","auto"];function TC(e){var t=e._colorAx,r=t||e,i={},a,s,l;for(s=0;s<bC.length;s++)l=bC[s],i[l]=r[l];if(t)for(a="c",s=0;s<Jy.length;s++)l=Jy[s],i[l]=r["c"+l];else{var f;for(s=0;s<Jy.length;s++){if(l=Jy[s],f="c"+l,f in r){i[l]=r[f];continue}f="z"+l,f in r&&(i[l]=r[f])}a=f.charAt(0)}return i._sync=function(h,v){var m=Jy.indexOf(h)!==-1?a+h:h;r[m]=r["_"+m]=v},i}function AC(e){for(var t=TC(e),r=t.min,i=t.max,a=t.reversescale?MC(t.colorscale):t.colorscale,s=a.length,l=new Array(s),f=new Array(s),h=0;h<s;h++){var v=a[h];l[h]=r+v[0]*(i-r),f[h]=v[1]}return{domain:l,range:f}}function MC(e){for(var t=e.length,r=new Array(t),i=t-1,a=0;i>=0;i--,a++){var s=e[i];r[a]=[1-s[0],s[1]]}return r}function SC(e,t){t=t||{};for(var r=e.domain,i=e.range,a=i.length,s=new Array(a),l=0;l<a;l++){var f=Q_(i[l]).toRgb();s[l]=[f.r,f.g,f.b,f.a]}var h=F$.scale.linear().domain(r).range(s).clamp(!0),v=t.noNumericCheck,m=t.returnArray,_;return v&&m?_=h:v?_=function(T){return wC(h(T))}:m?_=function(T){return Ky(T)?h(T):Q_(T).isValid()?T:xC.defaultLine}:_=function(T){return Ky(T)?wC(h(T)):Q_(T).isValid()?T:xC.defaultLine},_.domain=h.domain,_.range=function(){return i},_}function B$(e,t){return SC(AC(e),t)}function wC(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return Q_(t).toRgbString()}kC.exports={hasColorscale:N$,extractOpts:TC,extractScale:AC,flipScale:MC,makeColorScaleFunc:SC,makeColorScaleFuncFromTrace:B$}});var Gw=me((i1e,LC)=>{"use strict";var CC=fw(),O$=CC.FORMAT_LINK,U$=CC.DATE_FORMAT_LINK;function V$(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?Hw:EC)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function Hw(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+O$+"."].join(" ")}function EC(e,t){return Hw(e,t)+[" And for dates see: "+U$+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}LC.exports={axisHoverFormat:V$,descriptionOnlyNumbers:Hw,descriptionWithDates:EC}});var Nu=me((o1e,WC)=>{"use strict";var DC=qo(),B0=Sf(),YC=gc().dash,Yw=yn().extendFlat,PC=Ii().templatedArray,n1e=kf().templateFormatStringDescription,zC=Gw().descriptionWithDates,H$=Zi().ONEDAY,Lf=eo(),G$=Lf.HOUR_PATTERN,Z$=Lf.WEEKDAY_PATTERN,Zw={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},Y$=Yw({},Zw,{values:Zw.values.slice().concat(["sync"])});function IC(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var RC={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},FC={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},qC={valType:"data_array",editType:"ticks"},NC={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function BC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function OC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var UC={valType:"color",dflt:B0.defaultLine,editType:"ticks"},VC={valType:"color",dflt:B0.lightLine,editType:"ticks"};function HC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var GC=Yw({},YC,{editType:"ticks"}),ZC={valType:"boolean",editType:"ticks"};WC.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:B0.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:DC({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[Lf.idRegex.x.toString(),Lf.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[Lf.idRegex.x.toString(),Lf.idRegex.y.toString()],editType:"calc"},rangebreaks:PC("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[Z$,G$,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:H$},editType:"calc"}),tickmode:Y$,nticks:IC(),tick0:RC,dtick:FC,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:qC,ticktext:{valType:"data_array",editType:"ticks"},ticks:NC,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:BC(),tickwidth:OC(),tickcolor:UC,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:Yw({},YC,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:DC({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B","SI extended"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:zC("tick label")},tickformatstops:PC("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:zC("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:B0.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:ZC,gridcolor:VC,gridwidth:HC(),griddash:GC,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:B0.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:B0.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",Lf.idRegex.x.toString(),Lf.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",Lf.idRegex.x.toString(),Lf.idRegex.y.toString()],editType:"plot"},minor:{tickmode:Zw,nticks:IC("minor"),tick0:RC,dtick:FC,tickvals:qC,ticks:NC,ticklen:BC("minor"),tickwidth:OC("minor"),tickcolor:UC,gridcolor:VC,gridwidth:HC("minor"),griddash:GC,showgrid:ZC,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}});var $_=me((s1e,JC)=>{"use strict";var Wi=Nu(),XC=qo(),jC=yn().extendFlat,W$=il().overrideAll;JC.exports=W$({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:Wi.linecolor,outlinewidth:Wi.linewidth,bordercolor:Wi.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:Wi.minor.tickmode,nticks:Wi.nticks,tick0:Wi.tick0,dtick:Wi.dtick,tickvals:Wi.tickvals,ticktext:Wi.ticktext,ticks:jC({},Wi.ticks,{dflt:""}),ticklabeloverflow:jC({},Wi.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:Wi.ticklen,tickwidth:Wi.tickwidth,tickcolor:Wi.tickcolor,ticklabelstep:Wi.ticklabelstep,showticklabels:Wi.showticklabels,labelalias:Wi.labelalias,tickfont:XC({}),tickangle:Wi.tickangle,tickformat:Wi.tickformat,tickformatstops:Wi.tickformatstops,tickprefix:Wi.tickprefix,showtickprefix:Wi.showtickprefix,ticksuffix:Wi.ticksuffix,showticksuffix:Wi.showticksuffix,separatethousands:Wi.separatethousands,exponentformat:Wi.exponentformat,minexponent:Wi.minexponent,showexponent:Wi.showexponent,title:{text:{valType:"string"},font:XC({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")});var Sc=me((u1e,QC)=>{"use strict";var X$=$_(),j$=b0().counter,J$=E_(),KC=ud().scales,l1e=J$(KC);function e2(e){return"`"+e+"`"}QC.exports=function(t,r){t=t||"",r=r||{};var i=r.cLetter||"c",a="onlyIfNumerical"in r?r.onlyIfNumerical:!!t,s="noScale"in r?r.noScale:t==="marker.line",l="showScaleDflt"in r?r.showScaleDflt:i==="z",f=typeof r.colorscaleDflt=="string"?KC[r.colorscaleDflt]:null,h=r.editTypeOverride||"",v=t?t+".":"",m,_;"colorAttr"in r?(m=r.colorAttr,_=r.colorAttr):(m={z:"z",c:"color"}[i],_="in "+e2(v+m));var T=a?" Has an effect only if "+_+" is set to a numerical array.":"",M=i+"auto",C=i+"min",E=i+"max",L=i+"mid",I=e2(v+M),O=e2(v+C),q=e2(v+E),z=O+" and "+q,N={};N[C]=N[E]=void 0;var H={};H[M]=!1;var V={};return m==="color"&&(V.color={valType:"color",arrayOk:!0,editType:h||"style"},r.anim&&(V.color.anim=!0)),V[M]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:N},V[C]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:H},V[E]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:H},V[L]={valType:"number",dflt:null,editType:"calc",impliedEdits:N},V.colorscale={valType:"colorscale",editType:"calc",dflt:f,impliedEdits:{autocolorscale:!1}},V.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},V.reversescale={valType:"boolean",dflt:!1,editType:"plot"},s||(V.showscale={valType:"boolean",dflt:l,editType:"calc"},V.colorbar=X$),r.noColorAxis||(V.coloraxis={valType:"subplotid",regex:j$("coloraxis"),dflt:null,editType:"calc"}),V}});var Xw=me((f1e,$C)=>{"use strict";var K$=yn().extendFlat,Q$=Sc(),Ww=ud().scales;$C.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:Ww.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:Ww.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:Ww.RdBu,editType:"calc"}},coloraxis:K$({_isSubplotObj:!0,editType:"calc"},Q$("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}});var jw=me((c1e,eE)=>{"use strict";var $$=Bt();eE.exports=function(t){return $$.isPlainObject(t.colorbar)}});var Qw=me(Kw=>{"use strict";var Jw=Da(),tE=Bt(),rE=Zi(),eee=rE.ONEDAY,tee=rE.ONEWEEK;Kw.dtick=function(e,t){var r=t==="log",i=t==="date",a=t==="category",s=i?eee:1;if(!e)return s;if(Jw(e))return e=Number(e),e<=0?s:a?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||r))return s;var l=e.charAt(0),f=e.slice(1);return f=Jw(f)?Number(f):0,f<=0||!(i&&l==="M"&&f===Math.round(f)||r&&l==="L"||r&&l==="D"&&(f===1||f===2))?s:e};Kw.tick0=function(e,t,r,i){if(t==="date")return tE.cleanDate(e,tE.dateTick0(r,i%tee===0?1:0));if(!(i==="D1"||i==="D2"))return Jw(e)?Number(e):0}});var $w=me((v1e,iE)=>{"use strict";var aE=Qw(),ree=Bt().isArrayOrTypedArray,aee=al().isTypedArraySpec,iee=al().decodeTypedArraySpec;iE.exports=function(t,r,i,a,s){s||(s={});var l=s.isMinor,f=l?t.minor||{}:t,h=l?r.minor:r,v=l?"minor.":"";function m(O){var q=f[O];return aee(q)&&(q=iee(q)),q!==void 0?q:(h._template||{})[O]}var _=m("tick0"),T=m("dtick"),M=m("tickvals"),C=ree(M)?"array":T?"linear":"auto",E=i(v+"tickmode",C);if(E==="auto"||E==="sync")i(v+"nticks");else if(E==="linear"){var L=h.dtick=aE.dtick(T,a);h.tick0=aE.tick0(_,a,r.calendar,L)}else if(a!=="multicategory"){var I=i(v+"tickvals");I===void 0?h.tickmode="auto":l||i("ticktext")}}});var t5=me((d1e,oE)=>{"use strict";var e5=Bt(),nE=Nu();oE.exports=function(t,r,i,a){var s=a.isMinor,l=s?t.minor||{}:t,f=s?r.minor:r,h=s?nE.minor:nE,v=s?"minor.":"",m=e5.coerce2(l,f,h,"ticklen",s?(r.ticklen||5)*.6:void 0),_=e5.coerce2(l,f,h,"tickwidth",s?r.tickwidth||1:void 0),T=e5.coerce2(l,f,h,"tickcolor",(s?r.tickcolor:void 0)||f.color),M=i(v+"ticks",!s&&a.outerTicks||m||_||T?"outside":"");M||(delete f.ticklen,delete f.tickwidth,delete f.tickcolor)}});var r5=me((p1e,sE)=>{"use strict";sE.exports=function(t){var r=["showexponent","showtickprefix","showticksuffix"],i=r.filter(function(s){return t[s]!==void 0}),a=function(s){return t[s]===t[i[0]]};if(i.every(a)||i.length===1)return t[i[0]]}});var Wl=me((m1e,lE)=>{"use strict";var t2=Bt(),nee=Ii();lE.exports=function(t,r,i){var a=i.name,s=i.inclusionAttr||"visible",l=r[a],f=t2.isArrayOrTypedArray(t[a])?t[a]:[],h=r[a]=[],v=nee.arrayTemplater(r,a,s),m,_;for(m=0;m<f.length;m++){var T=f[m];t2.isPlainObject(T)?_=v.newItem(T):(_=v.newItem({}),_[s]=!1),_._index=m,_[s]!==!1&&i.handleItemDefaults(T,_,r,i),h.push(_)}var M=v.defaultItems();for(m=0;m<M.length;m++)_=M[m],_._index=h.length,i.handleItemDefaults({},_,r,i,{}),h.push(_);if(t2.isArrayOrTypedArray(l)){var C=Math.min(l.length,h.length);for(m=0;m<C;m++)t2.relinkPrivateKeys(h[m],l[m])}return h}});var i5=me((y1e,fE)=>{"use strict";var a5=Bt(),oee=Oa().contrast,uE=Nu(),see=r5(),lee=Wl();fE.exports=function(t,r,i,a,s){s||(s={});var l=i("labelalias");a5.isPlainObject(l)||delete r.labelalias;var f=see(t),h=i("showticklabels");if(h){s.noTicklabelshift||i("ticklabelshift"),s.noTicklabelstandoff||i("ticklabelstandoff");var v=s.font||{},m=r.color,_=r.ticklabelposition||"",T=_.indexOf("inside")!==-1?oee(s.bgColor):m&&m!==uE.color.dflt?m:v.color;if(a5.coerceFont(i,"tickfont",v,{overrideDflt:{color:T}}),!s.noTicklabelstep&&a!=="multicategory"&&a!=="log"&&i("ticklabelstep"),!s.noAng){var M=i("tickangle");!s.noAutotickangles&&M==="auto"&&i("autotickangles")}if(a!=="category"){var C=i("tickformat");lee(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:uee}),r.tickformatstops.length||delete r.tickformatstops,!s.noExp&&!C&&a!=="date"&&(i("showexponent",f),i("exponentformat"),i("minexponent"),i("separatethousands"))}!s.noMinorloglabels&&a==="log"&&i("minorloglabels")}};function uee(e,t){function r(a,s){return a5.coerce(e,t,uE.tickformatstops,a,s)}var i=r("enabled");i&&(r("dtickrange"),r("value"))}});var n5=me((g1e,cE)=>{"use strict";var fee=r5();cE.exports=function(t,r,i,a,s){s||(s={});var l=s.tickSuffixDflt,f=fee(t),h=i("tickprefix");h&&i("showtickprefix",f);var v=i("ticksuffix",l);v&&i("showticksuffix",f)}});var o5=me((_1e,hE)=>{"use strict";var Uh=Bt(),cee=Ii(),hee=$w(),vee=t5(),dee=i5(),pee=n5(),mee=$_();hE.exports=function(t,r,i){var a=cee.newContainer(r,"colorbar"),s=t.colorbar||{};function l(ie,oe){return Uh.coerce(s,a,mee,ie,oe)}var f=i.margin||{t:0,b:0,l:0,r:0},h=i.width-f.l-f.r,v=i.height-f.t-f.b,m=l("orientation"),_=m==="v",T=l("thicknessmode");l("thickness",T==="fraction"?30/(_?h:v):30);var M=l("lenmode");l("len",M==="fraction"?1:_?v:h);var C=l("yref"),E=l("xref"),L=C==="paper",I=E==="paper",O,q,z,N="left";_?(z="middle",N=I?"left":"right",O=I?1.02:1,q=.5):(z=L?"bottom":"top",N="center",O=.5,q=L?1.02:1),Uh.coerce(s,a,{x:{valType:"number",min:I?-2:0,max:I?3:1,dflt:O}},"x"),Uh.coerce(s,a,{y:{valType:"number",min:L?-2:0,max:L?3:1,dflt:q}},"y"),l("xanchor",N),l("xpad"),l("yanchor",z),l("ypad"),Uh.noneOrAll(s,a,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var H=Uh.coerce(s,a,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:_?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",H.indexOf("inside")!==-1?"hide past domain":"hide past div"),hee(s,a,l,"linear");var V=i.font,W={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:V};H.indexOf("inside")!==-1&&(W.bgColor="black"),pee(s,a,l,"linear",W),dee(s,a,l,"linear",W),vee(s,a,l,"linear",W),l("title.text",i._dfltTitle.colorbar);var J=a.showticklabels?a.tickfont:V,ee=Uh.extendFlat({},V,{family:J.family,size:Uh.bigFont(J.size)});Uh.coerceFont(l,"title.font",ee),l("title.side",_?"top":"right")}});var bd=me((x1e,pE)=>{"use strict";var vE=Da(),l5=Bt(),yee=jw(),gee=o5(),dE=ud().isValid,_ee=sa().traceIs;function s5(e,t){var r=t.slice(0,t.length-1);return t?l5.nestedProperty(e,r).get()||{}:e}pE.exports=function e(t,r,i,a,s){var l=s.prefix,f=s.cLetter,h="_module"in r,v=s5(t,l),m=s5(r,l),_=s5(r._template||{},l)||{},T=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,i,a,s)};if(h){var M=i._colorAxes||{},C=a(l+"coloraxis");if(C){var E=_ee(r,"contour")&&l5.nestedProperty(r,"contours.coloring").get()||"heatmap",L=M[C];L?(L[2].push(T),L[0]!==E&&(L[0]=!1,l5.warn(["Ignoring coloraxis:",C,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[C]=[E,r,[T]];return}}var I=v[f+"min"],O=v[f+"max"],q=vE(I)&&vE(O)&&I<O,z=a(l+f+"auto",!q);z?a(l+f+"mid"):(a(l+f+"min"),a(l+f+"max"));var N=v.colorscale,H=_.colorscale,V;if(N!==void 0&&(V=!dE(N)),H!==void 0&&(V=!dE(H)),a(l+"autocolorscale",V),a(l+"colorscale"),a(l+"reversescale"),l!=="marker.line."){var W;l&&h&&(W=yee(v));var J=a(l+"showscale",W);J&&(l&&_&&(m._template=_),gee(v,m,i))}}});var _E=me((b1e,gE)=>{"use strict";var mE=Bt(),xee=Ii(),yE=Xw(),bee=bd();gE.exports=function(t,r){function i(_,T){return mE.coerce(t,r,yE,_,T)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var a=r._colorAxes,s,l;function f(_,T){return mE.coerce(s,l,yE.coloraxis,_,T)}for(var h in a){var v=a[h];if(v[0])s=t[h]||{},l=xee.newContainer(r,h,"coloraxis"),l._name=h,bee(s,l,r,f,{prefix:"",cLetter:"c"});else{for(var m=0;m<v[2].length;m++)v[2][m]();delete r._colorAxes[h]}}}});var bE=me((w1e,xE)=>{"use strict";var wee=Bt(),Tee=Ef().hasColorscale,Aee=Ef().extractOpts;xE.exports=function(t,r){function i(m,_){var T=m["_"+_];T!==void 0&&(m[_]=T)}function a(m,_){var T=_.container?wee.nestedProperty(m,_.container).get():m;if(T)if(T.coloraxis)T._colorAx=r[T.coloraxis];else{var M=Aee(T),C=M.auto;(C||M.min===void 0)&&i(T,_.min),(C||M.max===void 0)&&i(T,_.max),M.autocolorscale&&i(T,"colorscale")}}for(var s=0;s<t.length;s++){var l=t[s],f=l._module.colorbar;if(f)if(Array.isArray(f))for(var h=0;h<f.length;h++)a(l,f[h]);else a(l,f);Tee(l,"marker.line")&&a(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var v in r._colorAxes)a(r[v],{min:"cmin",max:"cmax"})}});var Qy=me((T1e,TE)=>{"use strict";var wE=Da(),u5=Bt(),Mee=Ef().extractOpts;TE.exports=function(t,r,i){var a=t._fullLayout,s=i.vals,l=i.containerStr,f=l?u5.nestedProperty(r,l).get():r,h=Mee(f),v=h.auto!==!1,m=h.min,_=h.max,T=h.mid,M=function(){return u5.aggNums(Math.min,null,s)},C=function(){return u5.aggNums(Math.max,null,s)};if(m===void 0?m=M():v&&(f._colorAx&&wE(m)?m=Math.min(m,M()):m=M()),_===void 0?_=C():v&&(f._colorAx&&wE(_)?_=Math.max(_,C()):_=C()),v&&T!==void 0&&(_-T>T-m?m=T-(_-T):_-T<T-m&&(_=T+(T-m))),m===_&&(m-=.5,_+=.5),h._sync("min",m),h._sync("max",_),h.autocolorscale){var E;m*_<0?E=a.colorscale.diverging:m>=0?E=a.colorscale.sequential:E=a.colorscale.sequentialminus,h._sync("colorscale",E)}}});var U0=me((A1e,AE)=>{"use strict";var r2=ud(),O0=Ef();AE.exports={moduleType:"component",name:"colorscale",attributes:Sc(),layoutAttributes:Xw(),supplyLayoutDefaults:_E(),handleDefaults:bd(),crossTraceDefaults:bE(),calc:Qy(),scales:r2.scales,defaultScale:r2.defaultScale,getScale:r2.get,isValidScale:r2.isValid,hasColorscale:O0.hasColorscale,extractOpts:O0.extractOpts,extractScale:O0.extractScale,flipScale:O0.flipScale,makeColorScaleFunc:O0.makeColorScaleFunc,makeColorScaleFuncFromTrace:O0.makeColorScaleFuncFromTrace}});var rs=me((M1e,SE)=>{"use strict";var ME=Bt(),See=al().isTypedArraySpec;SE.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){var t=e.marker;return ME.isPlainObject(t)&&(ME.isArrayOrTypedArray(t.size)||See(t.size))}}});var f5=me((S1e,kE)=>{"use strict";var kee=Da();kE.exports=function(t,r){r||(r=2);var i=t.marker,a=i.sizeref||1,s=i.sizemin||0,l=i.sizemode==="area"?function(f){return Math.sqrt(f/a)}:function(f){return f/a};return function(f){var h=l(f/r);return kee(h)&&h>0?Math.max(h,s):0}}});var kc=me(Bo=>{"use strict";var a2=Bt();Bo.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};Bo.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var r=e.xaxes||[],i=e.yaxes||[],a=0;a<r.length;a++)for(var s=0;s<i.length;s++)if(t.indexOf(r[a]+i[s])!==-1)return!0;return!1}return t.indexOf(Bo.getSubplot(e))!==-1};Bo.flat=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t;return r};Bo.p2c=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=e[i].p2c(t);return r};Bo.getDistanceFunction=function(e,t,r,i){return e==="closest"?i||Bo.quadrature(t,r):e.charAt(0)==="x"?t:r};Bo.getClosest=function(e,t,r){if(r.index!==!1)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var i=1/0,a=e.length,s=0;s<a;s++)i=t(e[s]),i<=r.distance&&(r.index=s,r.distance=i);return r};Bo.inbox=function(e,t,r){return e*t<0||e===0?r:1/0};Bo.quadrature=function(e,t){return function(r){var i=e(r),a=t(r);return Math.sqrt(i*i+a*a)}};Bo.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var s=t._indexToPoints[i];s.length===1?a.pointIndex=s[0]:a.pointIndices=s}else a.pointIndex=i;return t._module.eventData?a=t._module.eventData(a,e,t,r,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),e.zLabelVal!==void 0&&(a.z=e.zLabelVal)),Bo.appendArrayPointValue(a,t,i),a};Bo.appendArrayPointValue=function(e,t,r){var i=t._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=CE(s);if(e[l]===void 0){var f=a2.nestedProperty(t,s).get(),h=EE(f,r);h!==void 0&&(e[l]=h)}}};Bo.appendArrayMultiPointValues=function(e,t,r){var i=t._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=CE(s);if(e[l]===void 0){for(var f=a2.nestedProperty(t,s).get(),h=new Array(r.length),v=0;v<r.length;v++)h[v]=EE(f,r[v]);e[l]=h}}};var Cee={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function CE(e){return Cee[e]||e}function EE(e,t){if(Array.isArray(t)){if(a2.isArrayOrTypedArray(e)&&a2.isArrayOrTypedArray(e[t[0]]))return e[t[0]][t[1]]}else return e[t]}var Eee={x:!0,y:!0},Lee={"x unified":!0,"y unified":!0};Bo.isUnifiedHover=function(e){return typeof e!="string"?!1:!!Lee[e]};Bo.isXYhover=function(e){return typeof e!="string"?!1:!!Eee[e]}});var h5=me((C1e,LE)=>{LE.exports=Pee;var c5={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Dee=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Pee(e){var t=[];return e.replace(Dee,function(r,i,a){var s=i.toLowerCase();for(a=Iee(a),s=="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(a.length==c5[s])return a.unshift(i),t.push(a);if(a.length<c5[s])throw new Error("malformed path data");t.push([i].concat(a.splice(0,c5[s])))}}),t}var zee=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function Iee(e){var t=e.match(zee);return t?t.map(Number):[]}});var qE=me((E1e,FE)=>{"use strict";var Ree=h5(),lr=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},ha="M0,0Z",DE=Math.sqrt(2),Vh=Math.sqrt(3),v5=Math.PI,d5=Math.cos,p5=Math.sin;FE.exports={circle:{n:0,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a="M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z";return r?da(t,r,a):a}},square:{n:1,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")}},diamond:{n:2,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.3,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"Z")}},cross:{n:3,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.4,2),a=lr(e*1.2,2);return da(t,r,"M"+a+","+i+"H"+i+"V"+a+"H-"+i+"V"+i+"H-"+a+"V-"+i+"H-"+i+"V-"+a+"H"+i+"V-"+i+"H"+a+"Z")}},x:{n:4,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.8/DE,2),a="l"+i+","+i,s="l"+i+",-"+i,l="l-"+i+",-"+i,f="l-"+i+","+i;return da(t,r,"M0,"+i+a+s+l+s+l+f+l+f+a+f+a+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2/Vh,2),a=lr(e/2,2),s=lr(e,2);return da(t,r,"M-"+i+","+a+"H"+i+"L0,-"+s+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2/Vh,2),a=lr(e/2,2),s=lr(e,2);return da(t,r,"M-"+i+",-"+a+"H"+i+"L0,"+s+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2/Vh,2),a=lr(e/2,2),s=lr(e,2);return da(t,r,"M"+a+",-"+i+"V"+i+"L-"+s+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2/Vh,2),a=lr(e/2,2),s=lr(e,2);return da(t,r,"M-"+a+",-"+i+"V"+i+"L"+s+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.6,2),a=lr(e*1.2,2);return da(t,r,"M-"+a+",-"+i+"H"+i+"V"+a+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.6,2),a=lr(e*1.2,2);return da(t,r,"M"+i+",-"+a+"V"+i+"H-"+a+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.6,2),a=lr(e*1.2,2);return da(t,r,"M"+a+","+i+"H-"+i+"V-"+a+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.6,2),a=lr(e*1.2,2);return da(t,r,"M-"+i+","+a+"V-"+i+"H"+a+"Z")}},pentagon:{n:13,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.951,2),a=lr(e*.588,2),s=lr(-e,2),l=lr(e*-.309,2),f=lr(e*.809,2);return da(t,r,"M"+i+","+l+"L"+a+","+f+"H-"+a+"L-"+i+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e/2,2),s=lr(e*Vh/2,2);return da(t,r,"M"+s+",-"+a+"V"+a+"L0,"+i+"L-"+s+","+a+"V-"+a+"L0,-"+i+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e/2,2),s=lr(e*Vh/2,2);return da(t,r,"M-"+a+","+s+"H"+a+"L"+i+",0L"+a+",-"+s+"H-"+a+"L-"+i+",0Z")}},octagon:{n:16,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.924,2),a=lr(e*.383,2);return da(t,r,"M-"+a+",-"+i+"H"+a+"L"+i+",-"+a+"V"+a+"L"+a+","+i+"H-"+a+"L-"+i+","+a+"V-"+a+"Z")}},star:{n:17,f:function(e,t,r){if(va(t))return ha;var i=e*1.4,a=lr(i*.225,2),s=lr(i*.951,2),l=lr(i*.363,2),f=lr(i*.588,2),h=lr(-i,2),v=lr(i*-.309,2),m=lr(i*.118,2),_=lr(i*.809,2),T=lr(i*.382,2);return da(t,r,"M"+a+","+v+"H"+s+"L"+l+","+m+"L"+f+","+_+"L0,"+T+"L-"+f+","+_+"L-"+l+","+m+"L-"+s+","+v+"H-"+a+"L0,"+h+"Z")}},hexagram:{n:18,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.66,2),a=lr(e*.38,2),s=lr(e*.76,2);return da(t,r,"M-"+s+",0l-"+a+",-"+i+"h"+s+"l"+a+",-"+i+"l"+a+","+i+"h"+s+"l-"+a+","+i+"l"+a+","+i+"h-"+s+"l-"+a+","+i+"l-"+a+",-"+i+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(va(t))return ha;var i=lr(e*Vh*.8,2),a=lr(e*.8,2),s=lr(e*1.6,2),l=lr(e*4,2),f="A "+l+","+l+" 0 0 1 ";return da(t,r,"M-"+i+","+a+f+i+","+a+f+"0,-"+s+f+"-"+i+","+a+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(va(t))return ha;var i=lr(e*Vh*.8,2),a=lr(e*.8,2),s=lr(e*1.6,2),l=lr(e*4,2),f="A "+l+","+l+" 0 0 1 ";return da(t,r,"M"+i+",-"+a+f+"-"+i+",-"+a+f+"0,"+s+f+i+",-"+a+"Z")}},"star-square":{n:21,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.1,2),a=lr(e*2,2),s="A "+a+","+a+" 0 0 1 ";return da(t,r,"M-"+i+",-"+i+s+"-"+i+","+i+s+i+","+i+s+i+",-"+i+s+"-"+i+",-"+i+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.4,2),a=lr(e*1.9,2),s="A "+a+","+a+" 0 0 1 ";return da(t,r,"M-"+i+",0"+s+"0,"+i+s+i+",0"+s+"0,-"+i+s+"-"+i+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(va(t))return ha;var i=lr(e*.7,2),a=lr(e*1.4,2);return da(t,r,"M0,"+a+"L"+i+",0L0,-"+a+"L-"+i+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.4,2),a=lr(e*.7,2);return da(t,r,"M0,"+a+"L"+i+",0L0,-"+a+"L-"+i+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+","+i+"H-"+i+"L"+i+",-"+i+"H-"+i+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+","+i+"V-"+i+"L-"+i+","+i+"V-"+i+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e/DE,2);return da(t,r,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.3,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM0,-"+i+"V"+i+"M-"+i+",0H"+i)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.3,2),a=lr(e*.65,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.4,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.2,2),a=lr(e*.85,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(va(t))return ha;var i=lr(e/2,2),a=lr(e,2);return da(t,r,"M"+i+","+a+"V-"+a+"M"+(i-a)+",-"+a+"V"+a+"M"+a+","+i+"H-"+a+"M-"+a+","+(i-a)+"H"+a)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.2,2),a=lr(e*1.6,2),s=lr(e*.8,2);return da(t,r,"M-"+i+","+s+"L0,0M"+i+","+s+"L0,0M0,-"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.2,2),a=lr(e*1.6,2),s=lr(e*.8,2);return da(t,r,"M-"+i+",-"+s+"L0,0M"+i+",-"+s+"L0,0M0,"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.2,2),a=lr(e*1.6,2),s=lr(e*.8,2);return da(t,r,"M"+s+","+i+"L0,0M"+s+",-"+i+"L0,0M-"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.2,2),a=lr(e*1.6,2),s=lr(e*.8,2);return da(t,r,"M-"+s+","+i+"L0,0M-"+s+",-"+i+"L0,0M"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.4,2);return da(t,r,"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(va(t))return ha;var i=lr(e*1.4,2);return da(t,r,"M0,"+i+"V-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e*2,2);return da(t,r,"M0,0L-"+i+","+a+"H"+i+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e*2,2);return da(t,r,"M0,0L-"+i+",-"+a+"H"+i+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2,2),a=lr(e,2);return da(t,r,"M0,0L"+i+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2,2),a=lr(e,2);return da(t,r,"M0,0L-"+i+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e*2,2);return da(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+","+a+"H"+i+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(va(t))return ha;var i=lr(e,2),a=lr(e*2,2);return da(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+",-"+a+"H"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2,2),a=lr(e,2);return da(t,r,"M0,-"+a+"V"+a+"M0,0L"+i+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(va(t))return ha;var i=lr(e*2,2),a=lr(e,2);return da(t,r,"M0,-"+a+"V"+a+"M0,0L-"+i+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(va(t))return ha;var i=v5/2.5,a=2*e*d5(i),s=2*e*p5(i);return da(t,r,"M0,0L"+-a+","+s+"L"+a+","+s+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(va(t))return ha;var i=v5/4,a=2*e*d5(i),s=2*e*p5(i);return da(t,r,"M0,0L"+-a+","+s+"A "+2*e+","+2*e+" 0 0 1 "+a+","+s+"Z")},backoff:.4,noDot:!0}};function va(e){return e===null}var PE,zE,IE,RE;function da(e,t,r){if((!e||e%360===0)&&!t)return r;if(IE===e&&RE===t&&PE===r)return zE;IE=e,RE=t,PE=r;function i(L,I){var O=d5(L),q=p5(L),z=I[0],N=I[1]+(t||0);return[z*O-N*q,z*q+N*O]}for(var a=e/180*v5,s=0,l=0,f=Ree(r),h="",v=0;v<f.length;v++){var m=f[v],_=m[0],T=s,M=l;if(_==="M"||_==="L")s=+m[1],l=+m[2];else if(_==="m"||_==="l")s+=+m[1],l+=+m[2];else if(_==="H")s=+m[1];else if(_==="h")s+=+m[1];else if(_==="V")l=+m[1];else if(_==="v")l+=+m[1];else if(_==="A"){s=+m[1],l=+m[2];var C=i(a,[+m[6],+m[7]]);m[6]=C[0],m[7]=C[1],m[3]=+m[3]+e}(_==="H"||_==="V")&&(_="L"),(_==="h"||_==="v")&&(_="l"),(_==="m"||_==="l")&&(s-=T,l-=M);var E=i(a,[s,l]);(_==="H"||_==="V")&&(_="L"),(_==="M"||_==="L"||_==="m"||_==="l")&&(m[1]=E[0],m[2]=E[1]),m[0]=_,h+=m[0]+m.slice(1).join(",")}return zE=h,h}});var xi=me((L1e,aL)=>{"use strict";var ao=ja(),_i=Bt(),Fee=_i.numberFormat,Md=Da(),b5=Mf(),n2=sa(),Ao=Oa(),qee=U0(),eg=_i.strTranslate,o2=ro(),Nee=Oh(),Bee=No(),Oee=Bee.LINE_SPACING,WE=p_().DESELECTDIM,Uee=rs(),Vee=f5(),Hee=kc().appendArrayPointValue,xr=aL.exports={};xr.font=function(e,t){var r=t.variant,i=t.style,a=t.weight,s=t.color,l=t.size,f=t.family,h=t.shadow,v=t.lineposition,m=t.textcase;f&&e.style("font-family",f),l+1&&e.style("font-size",l+"px"),s&&e.call(Ao.fill,s),a&&e.style("font-weight",a),i&&e.style("font-style",i),r&&e.style("font-variant",r),m&&e.style("text-transform",m5(Zee(m))),h&&e.style("text-shadow",h==="auto"?o2.makeTextShadow(Ao.contrast(s)):m5(h)),v&&e.style("text-decoration-line",m5(Yee(v)))};function m5(e){return e==="none"?void 0:e}var Gee={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function Zee(e){return Gee[e]}function Yee(e){return e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}xr.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};xr.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};xr.setRect=function(e,t,r,i,a){e.call(xr.setPosition,t,r).call(xr.setSize,i,a)};xr.translatePoint=function(e,t,r,i){var a=r.c2p(e.x),s=i.c2p(e.y);if(Md(a)&&Md(s)&&t.node())t.node().nodeName==="text"?t.attr("x",a).attr("y",s):t.attr("transform",eg(a,s));else return!1;return!0};xr.translatePoints=function(e,t,r){e.each(function(i){var a=ao.select(this);xr.translatePoint(i,a,t,r)})};xr.hideOutsideRangePoint=function(e,t,r,i,a,s){t.attr("display",r.isPtWithinRange(e,a)&&i.isPtWithinRange(e,s)?null:"none")};xr.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,i=t.yaxis;e.each(function(a){var s=a[0].trace,l=s.xcalendar,f=s.ycalendar,h=n2.traceIs(s,"bar-like")?".bartext":".point,.textpoint";e.selectAll(h).each(function(v){xr.hideOutsideRangePoint(v,ao.select(this),r,i,l,f)})})}};xr.crispRound=function(e,t,r){return!t||!Md(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};xr.singleLineStyle=function(e,t,r,i,a){t.style("fill","none");var s=(((e||[])[0]||{}).trace||{}).line||{},l=r||s.width||0,f=a||s.dash||"";Ao.stroke(t,i||s.color),xr.dashLine(t,f,l)};xr.lineGroupStyle=function(e,t,r,i){e.style("fill","none").each(function(a){var s=(((a||[])[0]||{}).trace||{}).line||{},l=t||s.width||0,f=i||s.dash||"";ao.select(this).call(Ao.stroke,r||s.color).call(xr.dashLine,f,l)})};xr.dashLine=function(e,t,r){r=+r||0,t=xr.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};xr.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};function XE(e,t,r,i){var a=t.fillpattern,s=t.fillgradient,l=xr.getPatternAttr,f=a&&(l(a.shape,0,"")||l(a.path,0,""));if(f){var h=l(a.bgcolor,0,null),v=l(a.fgcolor,0,null),m=a.fgopacity,_=l(a.size,0,8),T=l(a.solidity,0,.3),M=t.uid;xr.pattern(e,"point",r,M,f,_,T,void 0,a.fillmode,h,v,m)}else if(s&&s.type!=="none"){var C=s.type,E="scatterfill-"+t.uid;if(i&&(E="legendfill-"+t.uid),!i&&(s.start!==void 0||s.stop!==void 0)){var L,I;C==="horizontal"?(L={x:s.start,y:0},I={x:s.stop,y:0}):C==="vertical"&&(L={x:0,y:s.start},I={x:0,y:s.stop}),L.x=t._xA.c2p(L.x===void 0?t._extremes.x.min[0].val:L.x,!0),L.y=t._yA.c2p(L.y===void 0?t._extremes.y.min[0].val:L.y,!0),I.x=t._xA.c2p(I.x===void 0?t._extremes.x.max[0].val:I.x,!0),I.y=t._yA.c2p(I.y===void 0?t._extremes.y.max[0].val:I.y,!0),e.call(KE,r,E,"linear",s.colorscale,"fill",L,I,!0,!1)}else C==="horizontal"&&(C=C+"reversed"),e.call(xr.gradient,r,E,C,s.colorscale,"fill")}else t.fillcolor&&e.call(Ao.fill,t.fillcolor)}xr.singleFillStyle=function(e,t){var r=ao.select(e.node()),i=r.data(),a=((i[0]||[])[0]||{}).trace||{};XE(e,a,t,!1)};xr.fillGroupStyle=function(e,t,r){e.style("stroke-width",0).each(function(i){var a=ao.select(this);i[0].trace&&XE(a,i[0].trace,t,r)})};var NE=qE();xr.symbolNames=[];xr.symbolFuncs=[];xr.symbolBackOffs=[];xr.symbolNeedLines={};xr.symbolNoDot={};xr.symbolNoFill={};xr.symbolList=[];Object.keys(NE).forEach(function(e){var t=NE[e],r=t.n;xr.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),xr.symbolNames[r]=e,xr.symbolFuncs[r]=t.f,xr.symbolBackOffs[r]=t.backoff||0,t.needLine&&(xr.symbolNeedLines[r]=!0),t.noDot?xr.symbolNoDot[r]=!0:xr.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(xr.symbolNoFill[r]=!0)});var Wee=xr.symbolNames.length,Xee="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";xr.symbolNumber=function(e){if(Md(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=xr.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=Wee||e>=400?0:Math.floor(Math.max(e,0))};function jE(e,t,r,i){var a=e%100;return xr.symbolFuncs[a](t,r,i)+(e>=200?Xee:"")}var BE=Fee("~f"),JE={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};xr.gradient=function(e,t,r,i,a,s){var l=JE[i];return KE(e,t,r,l.type,a,s,l.start,l.stop,!1,l.reversed)};function KE(e,t,r,i,a,s,l,f,h,v){var m=a.length,_;i==="linear"?_={node:"linearGradient",attrs:{x1:l.x,y1:l.y,x2:f.x,y2:f.y,gradientUnits:h?"userSpaceOnUse":"objectBoundingBox"},reversed:v}:i==="radial"&&(_={node:"radialGradient",reversed:v});for(var T=new Array(m),M=0;M<m;M++)_.reversed?T[m-1-M]=[BE((1-a[M][0])*100),a[M][1]]:T[M]=[BE(a[M][0]*100),a[M][1]];var C=t._fullLayout,E="g"+C._uid+"-"+r,L=C._defs.select(".gradients").selectAll("#"+E).data([i+T.join(";")],_i.identity);L.exit().remove(),L.enter().append(_.node).each(function(){var I=ao.select(this);_.attrs&&I.attr(_.attrs),I.attr("id",E);var O=I.selectAll("stop").data(T);O.exit().remove(),O.enter().append("stop"),O.each(function(q){var z=b5(q[1]);ao.select(this).attr({offset:q[0]+"%","stop-color":Ao.tinyRGB(z),"stop-opacity":z.getAlpha()})})}),e.style(s,w5(E,t)).style(s+"-opacity",null),e.classed("gradient_filled",!0)}xr.pattern=function(e,t,r,i,a,s,l,f,h,v,m,_){var T=t==="legend";f&&(h==="overlay"?(v=f,m=Ao.contrast(v)):(v=void 0,m=f));var M=r._fullLayout,C="p"+M._uid+"-"+i,E,L,I=function(fe,le,Te,Se,Me){return Se+(Me-Se)*(fe-le)/(Te-le)},O,q,z,N,H={},V=b5(m),W=Ao.tinyRGB(V),J=V.getAlpha(),ee=_*J;switch(a){case"/":E=s*Math.sqrt(2),L=s*Math.sqrt(2),O="M-"+E/4+","+L/4+"l"+E/2+",-"+L/2+"M0,"+L+"L"+E+",0M"+E/4*3+","+L/4*5+"l"+E/2+",-"+L/2,q=l*s,N="path",H={d:O,opacity:ee,stroke:W,"stroke-width":q+"px"};break;case"\\":E=s*Math.sqrt(2),L=s*Math.sqrt(2),O="M"+E/4*3+",-"+L/4+"l"+E/2+","+L/2+"M0,0L"+E+","+L+"M-"+E/4+","+L/4*3+"l"+E/2+","+L/2,q=l*s,N="path",H={d:O,opacity:ee,stroke:W,"stroke-width":q+"px"};break;case"x":E=s*Math.sqrt(2),L=s*Math.sqrt(2),O="M-"+E/4+","+L/4+"l"+E/2+",-"+L/2+"M0,"+L+"L"+E+",0M"+E/4*3+","+L/4*5+"l"+E/2+",-"+L/2+"M"+E/4*3+",-"+L/4+"l"+E/2+","+L/2+"M0,0L"+E+","+L+"M-"+E/4+","+L/4*3+"l"+E/2+","+L/2,q=s-s*Math.sqrt(1-l),N="path",H={d:O,opacity:ee,stroke:W,"stroke-width":q+"px"};break;case"|":E=s,L=s,N="path",O="M"+E/2+",0L"+E/2+","+L,q=l*s,N="path",H={d:O,opacity:ee,stroke:W,"stroke-width":q+"px"};break;case"-":E=s,L=s,N="path",O="M0,"+L/2+"L"+E+","+L/2,q=l*s,N="path",H={d:O,opacity:ee,stroke:W,"stroke-width":q+"px"};break;case"+":E=s,L=s,N="path",O="M"+E/2+",0L"+E/2+","+L+"M0,"+L/2+"L"+E+","+L/2,q=s-s*Math.sqrt(1-l),N="path",H={d:O,opacity:ee,stroke:W,"stroke-width":q+"px"};break;case".":E=s,L=s,l<Math.PI/4?z=Math.sqrt(l*s*s/Math.PI):z=I(l,Math.PI/4,1,s/2,s/Math.sqrt(2)),N="circle",H={cx:E/2,cy:L/2,r:z,opacity:ee,fill:W};break;default:E=s,L=s,N="path",H={d:a,opacity:ee,fill:W};break}var ie=[a||"noSh",v||"noBg",m||"noFg",s,l].join(";"),oe=M._defs.select(".patterns").selectAll("#"+C).data([ie],_i.identity);oe.exit().remove(),oe.enter().append("pattern").each(function(){var fe=ao.select(this);if(fe.attr({id:C,width:E+"px",height:L+"px",patternUnits:"userSpaceOnUse",patternTransform:T?"scale(0.8)":""}),v){var le=b5(v),Te=Ao.tinyRGB(le),Se=le.getAlpha(),Me=fe.selectAll("rect").data([0]);Me.exit().remove(),Me.enter().append("rect").attr({width:E+"px",height:L+"px",fill:Te,"fill-opacity":Se})}var Ae=fe.selectAll(N).data([0]);Ae.exit().remove(),Ae.enter().append(N).attr(H)}),e.style("fill",w5(C,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)};xr.initGradients=function(e){var t=e._fullLayout,r=_i.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),ao.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};xr.initPatterns=function(e){var t=e._fullLayout,r=_i.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),ao.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};xr.getPatternAttr=function(e,t,r){return e&&_i.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};xr.pointStyle=function(e,t,r,i){if(e.size()){var a=xr.makePointStyleFns(t);e.each(function(s){xr.singlePointStyle(s,ao.select(this),t,a,r,i)})}};xr.singlePointStyle=function(e,t,r,i,a,s){var l=r.marker,f=l.line;if(s&&s.i>=0&&e.i===void 0&&(e.i=s.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?l.opacity:e.mo),i.ms2mrc){var h;e.ms==="various"||l.size==="various"?h=3:h=i.ms2mrc(e.ms),e.mrc=h,i.selectedSizeFn&&(h=e.mrc=i.selectedSizeFn(e));var v=xr.symbolNumber(e.mx||l.symbol)||0;e.om=v%200>=100;var m=A5(e,r),_=T5(e,r);t.attr("d",jE(v,h,m,_))}var T=!1,M,C,E;if(e.so)E=f.outlierwidth,C=f.outliercolor,M=l.outliercolor;else{var L=(f||{}).width;E=(e.mlw+1||L+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?C=e.mlcc=i.lineScale(e.mlc):_i.isArrayOrTypedArray(f.color)?C=Ao.defaultLine:C=f.color,_i.isArrayOrTypedArray(l.color)&&(M=Ao.defaultLine,T=!0),"mc"in e?M=e.mcc=i.markerScale(e.mc):M=l.color||l.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(M=i.selectedColorFn(e))}let I=e.mld||(f||{}).dash;if(I&&xr.dashLine(t,I,E),e.om)t.call(Ao.stroke,M).style({"stroke-width":(E||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:E)+"px");var O=l.gradient,q=e.mgt;q?T=!0:q=O&&O.type,_i.isArrayOrTypedArray(q)&&(q=q[0],JE[q]||(q=0));var z=l.pattern,N=xr.getPatternAttr,H=z&&(N(z.shape,e.i,"")||N(z.path,e.i,""));if(q&&q!=="none"){var V=e.mgc;V?T=!0:V=O.color;var W=r.uid;T&&(W+="-"+e.i),xr.gradient(t,a,W,q,[[0,V],[1,M]],"fill")}else if(H){var J=!1,ee=z.fgcolor;!ee&&s&&s.color&&(ee=s.color,J=!0);var ie=N(ee,e.i,s&&s.color||null),oe=N(z.bgcolor,e.i,null),fe=z.fgopacity,le=N(z.size,e.i,8),Te=N(z.solidity,e.i,.3);J=J||e.mcc||_i.isArrayOrTypedArray(z.shape)||_i.isArrayOrTypedArray(z.path)||_i.isArrayOrTypedArray(z.bgcolor)||_i.isArrayOrTypedArray(z.fgcolor)||_i.isArrayOrTypedArray(z.size)||_i.isArrayOrTypedArray(z.solidity);var Se=r.uid;J&&(Se+="-"+e.i),xr.pattern(t,"point",a,Se,H,le,Te,e.mcc,z.fillmode,oe,ie,fe)}else _i.isArrayOrTypedArray(M)?Ao.fill(t,M[e.i]):Ao.fill(t,M);E&&Ao.stroke(t,C)}};xr.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=xr.tryColorscale(r,""),t.lineScale=xr.tryColorscale(r,"line"),n2.traceIs(e,"symbols")&&(t.ms2mrc=Uee.isBubble(e)?Vee(e):function(){return(r.size||6)/2}),e.selectedpoints&&_i.extendFlat(t,xr.makeSelectedPointStyleFns(e)),t};xr.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},a=e.marker||{},s=r.marker||{},l=i.marker||{},f=a.opacity,h=s.opacity,v=l.opacity,m=h!==void 0,_=v!==void 0;(_i.isArrayOrTypedArray(f)||m||_)&&(t.selectedOpacityFn=function(z){var N=z.mo===void 0?a.opacity:z.mo;return z.selected?m?h:N:_?v:WE*N});var T=a.color,M=s.color,C=l.color;(M||C)&&(t.selectedColorFn=function(z){var N=z.mcc||T;return z.selected?M||N:C||N});var E=a.size,L=s.size,I=l.size,O=L!==void 0,q=I!==void 0;return n2.traceIs(e,"symbols")&&(O||q)&&(t.selectedSizeFn=function(z){var N=z.mrc||E/2;return z.selected?O?L/2:N:q?I/2:N}),t};xr.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},a=e.textfont||{},s=r.textfont||{},l=i.textfont||{},f=a.color,h=s.color,v=l.color;return t.selectedTextColorFn=function(m){var _=m.tc||f;return m.selected?h||_:v||(h?_:Ao.addOpacity(_,WE))},t};xr.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=xr.makeSelectedPointStyleFns(t),i=t.marker||{},a=[];r.selectedOpacityFn&&a.push(function(s,l){s.style("opacity",r.selectedOpacityFn(l))}),r.selectedColorFn&&a.push(function(s,l){Ao.fill(s,r.selectedColorFn(l))}),r.selectedSizeFn&&a.push(function(s,l){var f=l.mx||i.symbol||0,h=r.selectedSizeFn(l);s.attr("d",jE(xr.symbolNumber(f),h,A5(l,t),T5(l,t))),l.mrc2=h}),a.length&&e.each(function(s){for(var l=ao.select(this),f=0;f<a.length;f++)a[f](l,s)})}};xr.tryColorscale=function(e,t){var r=t?_i.nestedProperty(e,t).get():e;if(r){var i=r.color;if((r.colorscale||r._colorAx)&&_i.isArrayOrTypedArray(i))return qee.makeColorScaleFuncFromTrace(r)}return _i.identity};var y5={start:1,end:-1,middle:0,bottom:1,top:-1};function QE(e,t,r,i,a){var s=ao.select(e.node().parentNode),l=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",f=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",h=i?i/.8+1:0,v=(o2.lineCount(e)-1)*Oee+1,m=y5[f]*h,_=r*.75+y5[l]*h+(y5[l]-1)*v*r/2;e.attr("text-anchor",f),a||s.attr("transform",eg(m,_))}function $E(e,t){var r=e.ts||t.textfont.size;return Md(r)&&r>0?r:0}xr.textPointStyle=function(e,t,r){if(e.size()){var i;if(t.selectedpoints){var a=xr.makeSelectedTextStyleFns(t);i=a.selectedTextColorFn}var s=t.texttemplate,l=r._fullLayout;e.each(function(f){var h=ao.select(this),v=s?_i.extractOption(f,t,"txt","texttemplate"):_i.extractOption(f,t,"tx","text");if(!v&&v!==0){h.remove();return}if(s){var m=t._module.formatLabels,_=m?m(f,t,l):{},T={};Hee(T,t,f.i),v=_i.texttemplateString({data:[T,f,t._meta],fallback:t.texttemplatefallback,labels:_,locale:l._d3locale,template:v})}var M=f.tp||t.textposition,C=$E(f,t),E=i?i(f):f.tc||t.textfont.color;h.call(xr.font,{family:f.tf||t.textfont.family,weight:f.tw||t.textfont.weight,style:f.ty||t.textfont.style,variant:f.tv||t.textfont.variant,textcase:f.tC||t.textfont.textcase,lineposition:f.tE||t.textfont.lineposition,shadow:f.tS||t.textfont.shadow,size:C,color:E}).text(v).call(o2.convertToTspans,r).call(QE,M,C,f.mrc)})}};xr.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=xr.makeSelectedTextStyleFns(t);e.each(function(i){var a=ao.select(this),s=r.selectedTextColorFn(i),l=i.tp||t.textposition,f=$E(i,t);Ao.fill(a,s);var h=n2.traceIs(t,"bar-like");QE(a,l,f,i.mrc2||i.mrc,h)})}};var OE=.5;xr.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],i=[],a;for(a=1;a<e.length-1;a++)i.push(i2(e[a-1],e[a],e[a+1],t));for(r+="Q"+i[0][0]+" "+e[1],a=2;a<e.length-1;a++)r+="C"+i[a-2][1]+" "+i[a-1][0]+" "+e[a];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1],r};xr.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],i=e.length-1,a=[i2(e[i],e[0],e[1],t)],s;for(s=1;s<i;s++)a.push(i2(e[s-1],e[s],e[s+1],t));for(a.push(i2(e[i-1],e[i],e[0],t)),s=1;s<=i;s++)r+="C"+a[s-1][1]+" "+a[s][0]+" "+e[s];return r+="C"+a[i][1]+" "+a[0][0]+" "+e[0]+"Z",r};var eL,tL;function V0(e,t,r){return r&&(e=rL(e)),t?Ad(e[1]):Td(e[0])}function Td(e){var t=ao.round(e,2);return eL=t,t}function Ad(e){var t=ao.round(e,2);return tL=t,t}function i2(e,t,r,i){var a=e[0]-t[0],s=e[1]-t[1],l=r[0]-t[0],f=r[1]-t[1],h=Math.pow(a*a+s*s,OE/2),v=Math.pow(l*l+f*f,OE/2),m=(v*v*a-h*h*l)*i,_=(v*v*s-h*h*f)*i,T=3*v*(h+v),M=3*h*(h+v);return[[Td(t[0]+(T&&m/T)),Ad(t[1]+(T&&_/T))],[Td(t[0]-(M&&m/M)),Ad(t[1]-(M&&_/M))]]}var jee={hv:function(e,t,r){return"H"+Td(t[0])+"V"+V0(t,1,r)},vh:function(e,t,r){return"V"+Ad(t[1])+"H"+V0(t,0,r)},hvh:function(e,t,r){return"H"+Td((e[0]+t[0])/2)+"V"+Ad(t[1])+"H"+V0(t,0,r)},vhv:function(e,t,r){return"V"+Ad((e[1]+t[1])/2)+"H"+Td(t[0])+"V"+V0(t,1,r)}},Jee=function(e,t,r){return"L"+V0(t,0,r)+","+V0(t,1,r)};xr.steps=function(e){var t=jee[e]||Jee;return function(r){for(var i="M"+Td(r[0][0])+","+Ad(r[0][1]),a=r.length,s=1;s<a;s++)i+=t(r[s-1],r[s],s===a-1);return i}};function rL(e,t){var r=e.backoff,i=e.trace,a=e.d,s=e.i;if(r&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var l=_i.isArrayOrTypedArray(r),f=e,h=t?t[0]:eL||0,v=t?t[1]:tL||0,m=f[0],_=f[1],T=m-h,M=_-v,C=Math.atan2(M,T),E=l?r[s]:r;if(E==="auto"){var L=f.i;i.type==="scatter"&&L--;var I=f.marker,O=I.symbol;_i.isArrayOrTypedArray(O)&&(O=O[L]);var q=I.size;_i.isArrayOrTypedArray(q)&&(q=q[L]),E=I?xr.symbolBackOffs[xr.symbolNumber(O)]*q:0,E+=xr.getMarkerStandoff(a[L],i)||0}var z=m-E*Math.cos(C),N=_-E*Math.sin(C);(z<=m&&z>=h||z>=m&&z<=h)&&(N<=_&&N>=v||N>=_&&N<=v)&&(e=[z,N])}return e}xr.applyBackoff=rL;xr.makeTester=function(){var e=_i.ensureSingleById(ao.select("body"),"svg","js-plotly-tester",function(r){r.attr(Nee.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=_i.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});xr.tester=e,xr.testref=t};xr.savedBBoxes={};var g5=0,Kee=1e4;xr.bBox=function(e,t,r){r||(r=UE(e));var i;if(r){if(i=xr.savedBBoxes[r],i)return _i.extendFlat({},i)}else if(e.childNodes.length===1){var a=e.childNodes[0];if(r=UE(a),r){var s=+a.getAttribute("x")||0,l=+a.getAttribute("y")||0,f=a.getAttribute("transform");if(!f){var h=xr.bBox(a,!1,r);return s&&(h.left+=s,h.right+=s),l&&(h.top+=l,h.bottom+=l),h}if(r+="~"+s+"~"+l+"~"+f,i=xr.savedBBoxes[r],i)return _i.extendFlat({},i)}}var v,m;t?v=e:(m=xr.tester.node(),v=e.cloneNode(!0),m.appendChild(v)),ao.select(v).attr("transform",null).call(o2.positionText,0,0);var _=v.getBoundingClientRect(),T=xr.testref.node().getBoundingClientRect();t||m.removeChild(v);var M={height:_.height,width:_.width,left:_.left-T.left,top:_.top-T.top,right:_.right-T.left,bottom:_.bottom-T.top};return g5>=Kee&&(xr.savedBBoxes={},g5=0),r&&(xr.savedBBoxes[r]=M),g5++,_i.extendFlat({},M)};function UE(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}xr.setClipUrl=function(e,t,r){e.attr("clip-path",w5(t,r))};function w5(e,t){if(!e)return null;var r=t._context,i=r._exportedPlot?"":r._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}xr.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",a=i.replace(t,function(s,l,f){return[l,f].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};xr.setTranslate=function(e,t,r){var i=/(\btranslate\(.*?\);?)/,a=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",l=e[a]("transform")||"";return t=t||0,r=r||0,l=l.replace(i,"").trim(),l+=eg(t,r),l=l.trim(),e[s]("transform",l),l};xr.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",a=i.replace(t,function(s,l,f){return[l,f].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};xr.setScale=function(e,t,r){var i=/(\bscale\(.*?\);?)/,a=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",l=e[a]("transform")||"";return t=t||1,r=r||1,l=l.replace(i,"").trim(),l+="scale("+t+","+r+")",l=l.trim(),e[s]("transform",l),l};var Qee=/\s*sc.*/;xr.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var i=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var a=(this.getAttribute("transform")||"").replace(Qee,"");a+=i,a=a.trim(),this.setAttribute("transform",a)})}};var $ee=/translate\([^)]*\)\s*$/;xr.setTextPointsScale=function(e,t,r){e&&e.each(function(){var i,a=ao.select(this),s=a.select("text");if(s.node()){var l=parseFloat(s.attr("x")||0),f=parseFloat(s.attr("y")||0),h=(a.attr("transform")||"").match($ee);t===1&&r===1?i=[]:i=[eg(l,f),"scale("+t+","+r+")",eg(-l,-f)],h&&i.push(h),a.attr("transform",i.join(""))}})};function T5(e,t){var r;return e&&(r=e.mf),r===void 0&&(r=t.marker&&t.marker.standoff||0),!t._geo&&!t._xA?-r:r}xr.getMarkerStandoff=T5;var $y=Math.atan2,wd=Math.cos,H0=Math.sin;function VE(e,t){var r=t[0],i=t[1];return[r*wd(e)-i*H0(e),r*H0(e)+i*wd(e)]}var HE,GE,ZE,YE,_5,x5;function A5(e,t){var r=e.ma;r===void 0&&(r=t.marker.angle,(!r||_i.isArrayOrTypedArray(r))&&(r=0));var i,a,s=t.marker.angleref;if(s==="previous"||s==="north"){if(t._geo){var l=t._geo.project(e.lonlat);i=l[0],a=l[1]}else{var f=t._xA,h=t._yA;if(f&&h)i=f.c2p(e.x),a=h.c2p(e.y);else return 90}if(t._geo){var v=e.lonlat[0],m=e.lonlat[1],_=t._geo.project([v,m+1e-5]),T=t._geo.project([v+1e-5,m]),M=$y(T[1]-a,T[0]-i),C=$y(_[1]-a,_[0]-i),E;if(s==="north")E=r/180*Math.PI;else if(s==="previous"){var L=v/180*Math.PI,I=m/180*Math.PI,O=HE/180*Math.PI,q=GE/180*Math.PI,z=O-L,N=wd(q)*H0(z),H=H0(q)*wd(I)-wd(q)*H0(I)*wd(z);E=-$y(N,H)-Math.PI,HE=v,GE=m}var V=VE(M,[wd(E),0]),W=VE(C,[H0(E),0]);r=$y(V[1]+W[1],V[0]+W[0])/Math.PI*180,s==="previous"&&!(x5===t.uid&&e.i===_5+1)&&(r=null)}if(s==="previous"&&!t._geo)if(x5===t.uid&&e.i===_5+1&&Md(i)&&Md(a)){var J=i-ZE,ee=a-YE,ie=t.line&&t.line.shape||"",oe=ie.slice(ie.length-1);oe==="h"&&(ee=0),oe==="v"&&(J=0),r+=$y(ee,J)/Math.PI*180+90}else r=null}return ZE=i,YE=a,_5=e.i,x5=t.uid,r}xr.getMarkerAngle=A5});var tg=me((D1e,sL)=>{"use strict";var G0=ja(),ete=Da(),tte=to(),M5=sa(),Sd=Bt(),iL=Sd.strTranslate,s2=xi(),l2=Oa(),Z0=ro(),nL=p_(),rte=No().OPPOSITE_SIDE,oL=/ [XY][0-9]* /,S5=1.6,k5=1.6;function ate(e,t,r){var i=e._fullLayout,a=r.propContainer,s=r.propName,l=r.placeholder,f=r.traceIndex,h=r.avoid||{},v=r.attributes,m=r.transform,_=r.containerGroup,T=1,M=a.title,C=(M&&M.text?M.text:"").trim(),E=!1,L=M&&M.font?M.font:{},I=L.family,O=L.size,q=L.color,z=L.weight,N=L.style,H=L.variant,V=L.textcase,W=L.lineposition,J=L.shadow,ee=r.subtitlePropName,ie=!!ee,oe=r.subtitlePlaceholder,fe=(a.title||{}).subtitle||{text:"",font:{}},le=(fe.text||"").trim(),Te=!1,Se=1,Me=fe.font,Ae=Me.family,pe=Me.size,ke=Me.color,Ee=Me.weight,Xe=Me.style,lt=Me.variant,it=Me.textcase,_t=Me.lineposition,Ye=Me.shadow,kt;s==="title.text"?kt="titleText":s.indexOf("axis")!==-1?kt="axisTitleText":s.indexOf("colorbar")!==-1&&(kt="colorbarTitleText");var st=e._context.edits[kt];function dt(Ut,Dt){return Ut===void 0||Dt===void 0?!1:Ut.replace(oL," % ")===Dt.replace(oL," % ")}C===""?T=0:dt(C,l)&&(st||(C=""),T=.2,E=!0),ie&&(le===""?Se=0:dt(le,oe)&&(st||(le=""),Se=.2,Te=!0)),r._meta?C=Sd.templateString(C,r._meta):i._meta&&(C=Sd.templateString(C,i._meta));var It=C||le||st,yt;_||(_=Sd.ensureSingle(i._infolayer,"g","g-"+t),yt=i._hColorbarMoveTitle);var de=_.selectAll("text."+t).data(It?[0]:[]);de.enter().append("text"),de.text(C).attr("class",t),de.exit().remove();var ze=null,_e=t+"-subtitle",Ue=le||st;if(ie&&(ze=_.selectAll("text."+_e).data(Ue?[0]:[]),ze.enter().append("text"),ze.text(le).attr("class",_e),ze.exit().remove()),!It)return _;function at(Ut,Dt){Sd.syncOrAsync([Je,Ct],{title:Ut,subtitle:Dt})}function Je(Ut){var Dt=Ut.title,Mt=Ut.subtitle,Zt;!m&&yt&&(m={}),m?(Zt="",m.rotate&&(Zt+="rotate("+[m.rotate,v.x,v.y]+")"),(m.offset||yt)&&(Zt+=iL(0,(m.offset||0)-(yt||0)))):Zt=null,Dt.attr("transform",Zt);function Yt(ht){if(ht){var pt=G0.select(ht.node().parentNode).select("."+_e);if(!pt.empty()){var Ot=ht.node().getBBox();if(Ot.height){var er=Ot.y+Ot.height+S5*pe;pt.attr("y",er)}}}}if(Dt.style("opacity",T*l2.opacity(q)).call(s2.font,{color:l2.rgb(q),size:G0.round(O,2),family:I,weight:z,style:N,variant:H,textcase:V,shadow:J,lineposition:W}).attr(v).call(Z0.convertToTspans,e,Yt),Mt&&!Mt.empty()){var Be=_.select("."+t+"-math-group"),ut=Dt.node().getBBox(),sr=Be.node()?Be.node().getBBox():void 0,Pr=sr?sr.y+sr.height+S5*pe:ut.y+ut.height+k5*pe,Et=Sd.extendFlat({},v,{y:Pr});Mt.attr("transform",Zt),Mt.style("opacity",Se*l2.opacity(ke)).call(s2.font,{color:l2.rgb(ke),size:G0.round(pe,2),family:Ae,weight:Ee,style:Xe,variant:lt,textcase:it,shadow:Ye,lineposition:_t}).attr(Et).call(Z0.convertToTspans,e)}return tte.previousPromises(e)}function Ct(Ut){var Dt=Ut.title,Mt=G0.select(Dt.node().parentNode);if(h&&h.selection&&h.side&&C){Mt.attr("transform",null);var Zt=rte[h.side],Yt=h.side==="left"||h.side==="top"?-1:1,Be=ete(h.pad)?h.pad:2,ut=s2.bBox(Mt.node()),sr={t:0,b:0,l:0,r:0},Pr=e._fullLayout._reservedMargin;for(var Et in Pr)for(var ht in Pr[Et]){var pt=Pr[Et][ht];sr[ht]=Math.max(sr[ht],pt)}var Ot={left:sr.l,top:sr.t,right:i.width-sr.r,bottom:i.height-sr.b},er=h.maxShift||Yt*(Ot[h.side]-ut[h.side]),Ht=0;if(er<0)Ht=er;else{var Kt=h.offsetLeft||0,pr=h.offsetTop||0;ut.left-=Kt,ut.right-=Kt,ut.top-=pr,ut.bottom-=pr,h.selection.each(function(){var ur=s2.bBox(this);Sd.bBoxIntersect(ut,ur,Be)&&(Ht=Math.max(Ht,Yt*(ur[h.side]-ut[Zt])+Be))}),Ht=Math.min(er,Ht),a._titleScoot=Math.abs(Ht)}if(Ht>0||er<0){var yr={left:[-Ht,0],right:[Ht,0],top:[0,-Ht],bottom:[0,Ht]}[h.side];Mt.attr("transform",iL(yr[0],yr[1]))}}}de.call(at,ze);function wt(Ut,Dt){Ut.text(Dt).on("mouseover.opacity",function(){G0.select(this).transition().duration(nL.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){G0.select(this).transition().duration(nL.HIDE_PLACEHOLDER).style("opacity",0)})}if(st&&(C?de.on(".opacity",null):(wt(de,l),E=!0),de.call(Z0.makeEditable,{gd:e}).on("edit",function(Ut){f!==void 0?M5.call("_guiRestyle",e,s,Ut,f):M5.call("_guiRelayout",e,s,Ut)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(at)}).on("input",function(Ut){this.text(Ut||" ").call(Z0.positionText,v.x,v.y)}),ie)){if(ie&&!C){var xt=de.node().getBBox(),qt=xt.y+xt.height+k5*pe;ze.attr("y",qt)}le?ze.on(".opacity",null):(wt(ze,oe),Te=!0),ze.call(Z0.makeEditable,{gd:e}).on("edit",function(Ut){M5.call("_guiRelayout",e,"title.subtitle.text",Ut)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(at)}).on("input",function(Ut){this.text(Ut||" ").call(Z0.positionText,ze.attr("x"),ze.attr("y"))})}return de.classed("js-placeholder",E),ze&&!ze.empty()&&ze.classed("js-placeholder",Te),_}sL.exports={draw:ate,SUBTITLE_PADDING_EM:k5,SUBTITLE_PADDING_MATHJAX_EM:S5}});var m2=me((P1e,hL)=>{"use strict";var ite=ja(),nte=y0().utcFormat,Ri=Bt(),ote=Ri.numberFormat,Df=Da(),Hh=Ri.cleanNumber,ste=Ri.ms2DateTime,lL=Ri.dateTime2ms,Pf=Ri.ensureNumber,uL=Ri.isArrayOrTypedArray,Gh=Zi(),u2=Gh.FP_SAFE,Bu=Gh.BADNUM,lte=Gh.LOG_CLIP,ute=Gh.ONEWEEK,f2=Gh.ONEDAY,c2=Gh.ONEHOUR,fL=Gh.ONEMIN,cL=Gh.ONESEC,h2=jn(),p2=eo(),v2=p2.HOUR_PATTERN,d2=p2.WEEKDAY_PATTERN;function rg(e){return Math.pow(10,e)}function C5(e){return e!=null}hL.exports=function(t,r){r=r||{};var i=t._id||"x",a=i.charAt(0);function s(z,N){if(z>0)return Math.log(z)/Math.LN10;if(z<=0&&N&&t.range&&t.range.length===2){var H=t.range[0],V=t.range[1];return .5*(H+V-2*lte*Math.abs(H-V))}else return Bu}function l(z,N,H,V){if((V||{}).msUTC&&Df(z))return+z;var W=lL(z,H||t.calendar);if(W===Bu)if(Df(z)){z=+z;var J=Math.floor(Ri.mod(z+.05,1)*10),ee=Math.round(z-J/10);W=lL(new Date(ee))+J/10}else return Bu;return W}function f(z,N,H){return ste(z,N,H||t.calendar)}function h(z){return t._categories[Math.round(z)]}function v(z){if(C5(z)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[z]!==void 0)return t._categoriesMap[z];t._categories.push(typeof z=="number"?String(z):z);var N=t._categories.length-1;return t._categoriesMap[z]=N,N}return Bu}function m(z,N){for(var H=new Array(N),V=0;V<N;V++){var W=(z[0]||[])[V],J=(z[1]||[])[V];H[V]=_([W,J])}return H}function _(z){if(t._categoriesMap)return t._categoriesMap[z]}function T(z){var N=_(z);if(N!==void 0)return N;if(Df(z))return+z}function M(z){return Df(z)?+z:_(z)}function C(z,N,H){return ite.round(H+N*z,2)}function E(z,N,H){return(z-H)/N}var L=function(N){return Df(N)?C(N,t._m,t._b):Bu},I=function(z){return E(z,t._m,t._b)};if(t.rangebreaks){var O=a==="y";L=function(z){if(!Df(z))return Bu;var N=t._rangebreaks.length;if(!N)return C(z,t._m,t._b);var H=O;t.range[0]>t.range[1]&&(H=!H);for(var V=H?-1:1,W=V*z,J=0,ee=0;ee<N;ee++){var ie=V*t._rangebreaks[ee].min,oe=V*t._rangebreaks[ee].max;if(W<ie)break;if(W>oe)J=ee+1;else{J=W<(ie+oe)/2?ee:ee+1;break}}var fe=t._B[J]||0;return isFinite(fe)?C(z,t._m2,fe):0},I=function(z){var N=t._rangebreaks.length;if(!N)return E(z,t._m,t._b);for(var H=0,V=0;V<N&&!(z<t._rangebreaks[V].pmin);V++)z>t._rangebreaks[V].pmax&&(H=V+1);return E(z,t._m2,t._B[H])}}t.c2l=t.type==="log"?s:Pf,t.l2c=t.type==="log"?rg:Pf,t.l2p=L,t.p2l=I,t.c2p=t.type==="log"?function(z,N){return L(s(z,N))}:L,t.p2c=t.type==="log"?function(z){return rg(I(z))}:I,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=Hh,t.c2d=t.c2r=t.l2d=t.l2r=Pf,t.d2p=t.r2p=function(z){return t.l2p(Hh(z))},t.p2d=t.p2r=I,t.cleanPos=Pf):t.type==="log"?(t.d2r=t.d2l=function(z,N){return s(Hh(z),N)},t.r2d=t.r2c=function(z){return rg(Hh(z))},t.d2c=t.r2l=Hh,t.c2d=t.l2r=Pf,t.c2r=s,t.l2d=rg,t.d2p=function(z,N){return t.l2p(t.d2r(z,N))},t.p2d=function(z){return rg(I(z))},t.r2p=function(z){return t.l2p(Hh(z))},t.p2r=I,t.cleanPos=Pf):t.type==="date"?(t.d2r=t.r2d=Ri.identity,t.d2c=t.r2c=t.d2l=t.r2l=l,t.c2d=t.c2r=t.l2d=t.l2r=f,t.d2p=t.r2p=function(z,N,H){return t.l2p(l(z,0,H))},t.p2d=t.p2r=function(z,N,H){return f(I(z),N,H)},t.cleanPos=function(z){return Ri.cleanDate(z,Bu,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=v,t.r2d=t.c2d=t.l2d=h,t.d2r=t.d2l_noadd=T,t.r2c=function(z){var N=M(z);return N!==void 0?N:t.fraction2r(.5)},t.l2r=t.c2r=Pf,t.r2l=M,t.d2p=function(z){return t.l2p(t.r2c(z))},t.p2d=function(z){return h(I(z))},t.r2p=t.d2p,t.p2r=I,t.cleanPos=function(z){return typeof z=="string"&&z!==""?z:Pf(z)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=h,t.d2r=t.d2l_noadd=T,t.r2c=function(z){var N=T(z);return N!==void 0?N:t.fraction2r(.5)},t.r2c_just_indices=_,t.l2r=t.c2r=Pf,t.r2l=T,t.d2p=function(z){return t.l2p(t.r2c(z))},t.p2d=function(z){return h(I(z))},t.r2p=t.d2p,t.p2r=I,t.cleanPos=function(z){return Array.isArray(z)||typeof z=="string"&&z!==""?z:Pf(z)},t.setupMultiCategory=function(z){var N=t._traceIndices,H,V,W=t._matchGroup;if(W&&t._categories.length===0){for(var J in W)if(J!==i){var ee=r[h2.id2name(J)];N=N.concat(ee._traceIndices)}}var ie=[[0,{}],[0,{}]],oe=[];for(H=0;H<N.length;H++){var fe=z[N[H]];if(a in fe){var le=fe[a],Te=fe._length||Ri.minRowLength(le);if(uL(le[0])&&uL(le[1]))for(V=0;V<Te;V++){var Se=le[0][V],Me=le[1][V];C5(Se)&&C5(Me)&&(oe.push([Se,Me]),Se in ie[0][1]||(ie[0][1][Se]=ie[0][0]++),Me in ie[1][1]||(ie[1][1][Me]=ie[1][0]++))}}}for(oe.sort(function(Ae,pe){var ke=ie[0][1],Ee=ke[Ae[0]]-ke[pe[0]];if(Ee)return Ee;var Xe=ie[1][1];return Xe[Ae[1]]-Xe[pe[1]]}),H=0;H<oe.length;H++)v(oe[H])}),t.fraction2r=function(z){var N=t.r2l(t.range[0]),H=t.r2l(t.range[1]);return t.l2r(N+z*(H-N))},t.r2fraction=function(z){var N=t.r2l(t.range[0]),H=t.r2l(t.range[1]);return(t.r2l(z)-N)/(H-N)},t.limitRange=function(z){var N=t.minallowed,H=t.maxallowed;if(!(N===void 0&&H===void 0)){z||(z="range");var V=Ri.nestedProperty(t,z).get(),W=Ri.simpleMap(V,t.r2l),J=W[1]<W[0];J&&W.reverse();var ee=Ri.simpleMap([N,H],t.r2l);if(N!==void 0&&W[0]<ee[0]&&(V[J?1:0]=N),H!==void 0&&W[1]>ee[1]&&(V[J?0:1]=H),V[0]===V[1]){var ie=t.l2r(N),oe=t.l2r(H);if(N!==void 0){var fe=ie+1;H!==void 0&&(fe=Math.min(fe,oe)),V[J?1:0]=fe}if(H!==void 0){var le=oe+1;N!==void 0&&(le=Math.max(le,ie)),V[J?0:1]=le}}}},t.cleanRange=function(z,N){t._cleanRange(z,N),t.limitRange(z)},t._cleanRange=function(z,N){N||(N={}),z||(z="range");var H=Ri.nestedProperty(t,z).get(),V,W;if(t.type==="date"?W=Ri.dfltRange(t.calendar):a==="y"?W=p2.DFLTRANGEY:t._name==="realaxis"?W=[0,1]:W=N.dfltRange||p2.DFLTRANGEX,W=W.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(W[0]=0),!H||H.length!==2){Ri.nestedProperty(t,z).set(W);return}var J=H[0]===null,ee=H[1]===null;for(t.type==="date"&&!t.autorange&&(H[0]=Ri.cleanDate(H[0],Bu,t.calendar),H[1]=Ri.cleanDate(H[1],Bu,t.calendar)),V=0;V<2;V++)if(t.type==="date"){if(!Ri.isDateTime(H[V],t.calendar)){t[z]=W;break}if(t.r2l(H[0])===t.r2l(H[1])){var ie=Ri.constrain(t.r2l(H[0]),Ri.MIN_MS+1e3,Ri.MAX_MS-1e3);H[0]=t.l2r(ie-1e3),H[1]=t.l2r(ie+1e3);break}}else{if(!Df(H[V]))if(!(J||ee)&&Df(H[1-V]))H[V]=H[1-V]*(V?10:.1);else{t[z]=W;break}if(H[V]<-u2?H[V]=-u2:H[V]>u2&&(H[V]=u2),H[0]===H[1]){var oe=Math.max(1,Math.abs(H[0]*1e-6));H[0]-=oe,H[1]+=oe}}},t.setScale=function(z){var N=r._size;if(t.overlaying){var H=h2.getFromId({_fullLayout:r},t.overlaying);t.domain=H.domain}var V=z&&t._r?"_r":"range",W=t.calendar;t.cleanRange(V);var J=t.r2l(t[V][0],W),ee=t.r2l(t[V][1],W),ie=a==="y";if(ie?(t._offset=N.t+(1-t.domain[1])*N.h,t._length=N.h*(t.domain[1]-t.domain[0]),t._m=t._length/(J-ee),t._b=-t._m*ee):(t._offset=N.l+t.domain[0]*N.w,t._length=N.w*(t.domain[1]-t.domain[0]),t._m=t._length/(ee-J),t._b=-t._m*J),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var oe,fe;if(t._rangebreaks=t.locateBreaks(Math.min(J,ee),Math.max(J,ee)),t._rangebreaks.length){for(oe=0;oe<t._rangebreaks.length;oe++)fe=t._rangebreaks[oe],t._lBreaks+=Math.abs(fe.max-fe.min);var le=ie;J>ee&&(le=!le),le&&t._rangebreaks.reverse();var Te=le?-1:1;for(t._m2=Te*t._length/(Math.abs(ee-J)-t._lBreaks),t._B.push(-t._m2*(ie?ee:J)),oe=0;oe<t._rangebreaks.length;oe++)fe=t._rangebreaks[oe],t._B.push(t._B[t._B.length-1]-Te*t._m2*(fe.max-fe.min));for(oe=0;oe<t._rangebreaks.length;oe++)fe=t._rangebreaks[oe],fe.pmin=L(fe.min),fe.pmax=L(fe.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(z){var N=t.rangebreaks||[],H,V,W,J,ee;N._cachedPatterns||(N._cachedPatterns=N.map(function(ke){return ke.enabled&&ke.bounds?Ri.simpleMap(ke.bounds,ke.pattern?Hh:t.d2c):null})),N._cachedValues||(N._cachedValues=N.map(function(ke){return ke.enabled&&ke.values?Ri.simpleMap(ke.values,t.d2c).sort(Ri.sorterAsc):null}));for(var ie=0;ie<N.length;ie++){var oe=N[ie];if(oe.enabled){if(oe.bounds){var fe=oe.pattern;switch(H=N._cachedPatterns[ie],V=H[0],W=H[1],fe){case d2:ee=new Date(z),J=ee.getUTCDay(),V>W&&(W+=7,J<V&&(J+=7));break;case v2:ee=new Date(z);var le=ee.getUTCHours(),Te=ee.getUTCMinutes(),Se=ee.getUTCSeconds(),Me=ee.getUTCMilliseconds();J=le+(Te/60+Se/3600+Me/36e5),V>W&&(W+=24,J<V&&(J+=24));break;case"":J=z;break}if(J>=V&&J<W)return Bu}else for(var Ae=N._cachedValues[ie],pe=0;pe<Ae.length;pe++)if(V=Ae[pe],W=V+oe.dvalue,z>=V&&z<W)return Bu}}return z},t.locateBreaks=function(z,N){var H,V,W,J,ee=[];if(!t.rangebreaks)return ee;var ie=t.rangebreaks.slice().sort(function(Xe,lt){return Xe.pattern===d2&&lt.pattern===v2?-1:lt.pattern===d2&&Xe.pattern===v2?1:0}),oe=function(Xe,lt){if(Xe=Ri.constrain(Xe,z,N),lt=Ri.constrain(lt,z,N),Xe!==lt){for(var it=!0,_t=0;_t<ee.length;_t++){var Ye=ee[_t];Xe<Ye.max&&lt>=Ye.min&&(Xe<Ye.min&&(Ye.min=Xe),lt>Ye.max&&(Ye.max=lt),it=!1)}it&&ee.push({min:Xe,max:lt})}};for(H=0;H<ie.length;H++){var fe=ie[H];if(fe.enabled)if(fe.bounds){var le=z,Te=N;fe.pattern&&(le=Math.floor(le)),V=Ri.simpleMap(fe.bounds,fe.pattern?Hh:t.r2l),W=V[0],J=V[1];var Se=new Date(le),Me,Ae;switch(fe.pattern){case d2:Ae=ute,Me=((J<W?7:0)+(J-W))*f2,le+=W*f2-(Se.getUTCDay()*f2+Se.getUTCHours()*c2+Se.getUTCMinutes()*fL+Se.getUTCSeconds()*cL+Se.getUTCMilliseconds());break;case v2:Ae=f2,Me=((J<W?24:0)+(J-W))*c2,le+=W*c2-(Se.getUTCHours()*c2+Se.getUTCMinutes()*fL+Se.getUTCSeconds()*cL+Se.getUTCMilliseconds());break;default:le=Math.min(V[0],V[1]),Te=Math.max(V[0],V[1]),Ae=Te-le,Me=Ae}for(var pe=le;pe<Te;pe+=Ae)oe(pe,pe+Me)}else for(var ke=Ri.simpleMap(fe.values,t.d2c),Ee=0;Ee<ke.length;Ee++)W=ke[Ee],J=W+fe.dvalue,oe(W,J)}return ee.sort(function(Xe,lt){return Xe.min-lt.min}),ee},t.makeCalcdata=function(z,N,H){var V,W,J,ee,ie=t.type,oe=ie==="date"&&z[N+"calendar"];if(N in z){if(V=z[N],ee=z._length||Ri.minRowLength(V),Ri.isTypedArray(V)&&(ie==="linear"||ie==="log")){if(ee===V.length)return V;if(V.subarray)return V.subarray(0,ee)}if(ie==="multicategory")return m(V,ee);for(W=new Array(ee),J=0;J<ee;J++)W[J]=t.d2c(V[J],0,oe,H)}else{var fe=N+"0"in z?t.d2c(z[N+"0"],0,oe):0,le=z["d"+N]?Number(z["d"+N]):1;for(V=z[{x:"y",y:"x"}[N]],ee=z._length||V.length,W=new Array(ee),J=0;J<ee;J++)W[J]=fe+J*le}if(t.rangebreaks)for(J=0;J<ee;J++)W[J]=t.maskBreaks(W[J]);return W},t.isValidRange=function(z,N){return Array.isArray(z)&&z.length===2&&(N&&z[0]===null||Df(t.r2l(z[0])))&&(N&&z[1]===null||Df(t.r2l(z[1])))},t.getAutorangeDflt=function(z,N){var H=!t.isValidRange(z,"nullOk");return H&&N&&N.reverseDflt?H="reversed":z&&(z[0]===null&&z[1]===null?H=!0:z[0]===null&&z[1]!==null?H="min":z[0]!==null&&z[1]===null&&(H="max")),H},t.isReversed=function(){var z=t.autorange;return z==="reversed"||z==="min reversed"||z==="max reversed"},t.isPtWithinRange=function(z,N){var H=t.c2l(z[a],null,N),V=t.r2l(t.range[0]),W=t.r2l(t.range[1]);return V<W?V<=H&&H<=W:W<=H&&H<=V},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var z=t._matchGroup;if(z){var N=null,H=null;for(var V in z){var W=r[h2.id2name(V)];if(W._categories){N=W._categories,H=W._categoriesMap;break}}N&&H?(t._categories=N,t._categoriesMap=H):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var J=0;J<t._initialCategories.length;J++)v(t._initialCategories[J])},t.sortByInitialCategories=function(){var z=[];if(t._emptyCategories(),t._initialCategories)for(var N=0;N<t._initialCategories.length;N++)v(t._initialCategories[N]);z=z.concat(t._traceIndices);var H=t._matchGroup;for(var V in H)if(i!==V){var W=r[h2.id2name(V)];W._categories=t._categories,W._categoriesMap=t._categoriesMap,z=z.concat(W._traceIndices)}return z};var q=r._d3locale;t.type==="date"&&(t._dateFormat=q?q.timeFormat:nte,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=q?q.numberFormat:ote,delete t._minDtick,delete t._forceTick0}});var L5=me((z1e,mL)=>{"use strict";var vL=Da(),E5=Bt(),fte=Zi().BADNUM,y2=E5.isArrayOrTypedArray,cte=E5.isDateTime,hte=E5.cleanNumber,dL=Math.round;mL.exports=function(t,r,i){var a=t,s=i.noMultiCategory;if(y2(a)&&!a.length)return"-";if(!s&&yte(a))return"multicategory";if(s&&Array.isArray(a[0])){for(var l=[],f=0;f<a.length;f++)if(y2(a[f]))for(var h=0;h<a[f].length;h++)l.push(a[f][h]);a=l}if(pte(a,r))return"date";var v=i.autotypenumbers!=="strict";return mte(a,v)?"category":dte(a,v)?"linear":"-"};function vte(e,t){return t?vL(e):typeof e=="number"}function dte(e,t){for(var r=e.length,i=0;i<r;i++)if(vte(e[i],t))return!0;return!1}function pte(e,t){for(var r=e.length,i=pL(r),a=0,s=0,l={},f=0;f<r;f+=i){var h=dL(f),v=e[h],m=String(v);l[m]||(l[m]=1,cte(v,t)&&a++,vL(v)&&s++)}return a>s*2}function pL(e){return Math.max(1,(e-1)/1e3)}function mte(e,t){for(var r=e.length,i=pL(r),a=0,s=0,l={},f=0;f<r;f+=i){var h=dL(f),v=e[h],m=String(v);if(!l[m]){l[m]=1;var _=typeof v;_==="boolean"?s++:(t?hte(v)!==fte:_==="number")?a++:_==="string"&&s++}}return s>a*2}function yte(e){return y2(e[0])&&y2(e[1])}});var ag=me((I1e,AL)=>{"use strict";var gte=ja(),xL=Da(),Zh=Bt(),g2=Zi().FP_SAFE,_te=sa(),xte=xi(),bL=jn(),bte=bL.getFromId,wte=bL.isLinked;AL.exports={applyAutorangeOptions:TL,getAutoRange:D5,makePadFn:P5,doAutoRange:Ate,findExtremes:Mte,concatExtremes:R5};function D5(e,t){var r,i,a=[],s=e._fullLayout,l=P5(s,t,0),f=P5(s,t,1),h=R5(e,t),v=h.min,m=h.max;if(v.length===0||m.length===0)return Zh.simpleMap(t.range,t.r2l);var _=v[0].val,T=m[0].val;for(r=1;r<v.length&&_===T;r++)_=Math.min(_,v[r].val);for(r=1;r<m.length&&_===T;r++)T=Math.max(T,m[r].val);var M=t.autorange,C=M==="reversed"||M==="min reversed"||M==="max reversed";if(!C&&t.range){var E=Zh.simpleMap(t.range,t.r2l);C=E[1]<E[0]}t.autorange==="reversed"&&(t.autorange=!0);var L=t.rangemode,I=L==="tozero",O=L==="nonnegative",q=t._length,z=q/10,N=0,H,V,W,J,ee,ie;for(r=0;r<v.length;r++)for(H=v[r],i=0;i<m.length;i++)V=m[i],ie=V.val-H.val-yL(t,H.val,V.val),ie>0&&(ee=q-l(H)-f(V),ee>z?ie/ee>N&&(W=H,J=V,N=ie/ee):ie/q>N&&(W={val:H.val,nopad:1},J={val:V.val,nopad:1},N=ie/q));function oe(Me,Ae){return Math.max(Me,f(Ae))}if(_===T){var fe=_-1,le=_+1;if(I)if(_===0)a=[0,1];else{var Te=(_>0?m:v).reduce(oe,0),Se=_/(1-Math.min(.5,Te/q));a=_>0?[0,Se]:[Se,0]}else O?a=[Math.max(0,fe),Math.max(1,le)]:a=[fe,le]}else I?(W.val>=0&&(W={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):O&&(W.val-N*l(W)<0&&(W={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),N=(J.val-W.val-yL(t,H.val,V.val))/(q-l(W)-f(J)),a=[W.val-N*l(W),J.val+N*f(J)];return a=TL(a,t),t.limitRange&&t.limitRange(),C&&a.reverse(),Zh.simpleMap(a,t.l2r||Number)}function yL(e,t,r){var i=0;if(e.rangebreaks)for(var a=e.locateBreaks(t,r),s=0;s<a.length;s++){var l=a[s];i+=l.max-l.min}return i}function P5(e,t,r){var i=.05*t._length,a=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(a.ticklabelposition||"").indexOf("inside")!==-1){var s=t.isReversed();if(!s){var l=Zh.simpleMap(t.range,t.r2l);s=l[1]<l[0]}s&&(r=!r)}var f=0;return wte(e,t._id)||(f=Tte(e,t,r)),i=Math.max(f,i),t.constrain==="domain"&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(v){return v.nopad?0:v.pad+(v.extrapad?i:f)}}var gL=3;function Tte(e,t,r){var i=0,a=t._id.charAt(0)==="x";for(var s in e._plots){var l=e._plots[s];if(!(t._id!==l.xaxis._id&&t._id!==l.yaxis._id)){var f=(a?l.yaxis:l.xaxis)||{};if((f.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(f.side==="left"||f.side==="bottom")||r&&(f.side==="top"||f.side==="right"))){if(f._vals){var h=Zh.deg2rad(f._tickAngles[f._id+"tick"]||0),v=Math.abs(Math.cos(h)),m=Math.abs(Math.sin(h));if(!f._vals[0].bb){var _=f._id+"tick",T=f._selections[_];T.each(function(O){var q=gte.select(this),z=q.select(".text-math-group");z.empty()&&(O.bb=xte.bBox(q.node()))})}for(var M=0;M<f._vals.length;M++){var C=f._vals[M],E=C.bb;if(E){var L=2*gL+E.width,I=2*gL+E.height;i=Math.max(i,a?Math.max(L*v,I*m):Math.max(I*v,L*m))}}}f.ticks==="inside"&&f.ticklabelposition==="inside"&&(i+=f.ticklen||0)}}}return i}function R5(e,t,r){var i=t._id,a=e._fullData,s=e._fullLayout,l=[],f=[],h,v,m;function _(L,I){for(h=0;h<I.length;h++){var O=L[I[h]],q=(O._extremes||{})[i];if(O.visible===!0&&q){for(v=0;v<q.min.length;v++)m=q.min[v],z5(l,m.val,m.pad,{extrapad:m.extrapad});for(v=0;v<q.max.length;v++)m=q.max[v],I5(f,m.val,m.pad,{extrapad:m.extrapad})}}}if(_(a,t._traceIndices),_(s.annotations||[],t._annIndices||[]),_(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var T in t._matchGroup)if(T!==t._id){var M=bte(e,T),C=R5(e,M,!0),E=t._length/M._length;for(v=0;v<C.min.length;v++)m=C.min[v],z5(l,m.val,m.pad*E,{extrapad:m.extrapad});for(v=0;v<C.max.length;v++)m=C.max[v],I5(f,m.val,m.pad*E,{extrapad:m.extrapad})}}return{min:l,max:f}}function Ate(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():D5(e,t),t._r=t.range.slice(),t._rl=Zh.simpleMap(t._r,t.r2l);var i=t._input,a={};a[t._attr+".range"]=t.range,a[t._attr+".autorange"]=t.autorange,_te.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a),i.range=t.range.slice(),i.autorange=t.autorange}var s=t._anchorAxis;if(s&&s.rangeslider){var l=s.rangeslider[t._name];l&&l.rangemode==="auto"&&(l.range=D5(e,t)),s._input.rangeslider[t._name]=Zh.extendFlat({},l)}}function Mte(e,t,r){r||(r={}),e._m||e.setScale();var i=[],a=[],s=t.length,l=r.padded||!1,f=r.tozero&&(e.type==="linear"||e.type==="-"),h=e.type==="log",v=!1,m=r.vpadLinearized||!1,_,T,M,C,E,L,I,O,q;function z(oe){if(Array.isArray(oe))return v=!0,function(le){return Math.max(Number(oe[le]||0),0)};var fe=Math.max(Number(oe||0),0);return function(){return fe}}var N=z((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),H=z((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),V=z(r.vpadplus||r.vpad),W=z(r.vpadminus||r.vpad);if(!v){if(O=1/0,q=-1/0,h)for(_=0;_<s;_++)T=t[_],T<O&&T>0&&(O=T),T>q&&T<g2&&(q=T);else for(_=0;_<s;_++)T=t[_],T<O&&T>-g2&&(O=T),T>q&&T<g2&&(q=T);t=[O,q],s=2}var J={tozero:f,extrapad:l};function ee(oe){M=t[oe],xL(M)&&(L=N(oe),I=H(oe),m?(C=e.c2l(M)-W(oe),E=e.c2l(M)+V(oe)):(O=M-W(oe),q=M+V(oe),h&&O<q/10&&(O=q/10),C=e.c2l(O),E=e.c2l(q)),f&&(C=Math.min(0,C),E=Math.max(0,E)),_L(C)&&z5(i,C,I,J),_L(E)&&I5(a,E,L,J))}var ie=Math.min(6,s);for(_=0;_<ie;_++)ee(_);for(_=s-1;_>=ie;_--)ee(_);return{min:i,max:a,opts:r}}function z5(e,t,r,i){wL(e,t,r,i,Ste)}function I5(e,t,r,i){wL(e,t,r,i,kte)}function wL(e,t,r,i,a){for(var s=i.tozero,l=i.extrapad,f=!0,h=0;h<e.length&&f;h++){var v=e[h];if(a(v.val,t)&&v.pad>=r&&(v.extrapad||!l)){f=!1;break}else a(t,v.val)&&v.pad<=r&&(l||!v.extrapad)&&(e.splice(h,1),h--)}if(f){var m=s&&t===0;e.push({val:t,pad:m?0:r,extrapad:m?!1:l})}}function _L(e){return xL(e)&&Math.abs(e)<g2}function Ste(e,t){return e<=t}function kte(e,t){return e>=t}function Cte(e,t){var r=t.autorangeoptions;return r&&r.minallowed!==void 0&&_2(t,r.minallowed,r.maxallowed)?r.minallowed:r&&r.clipmin!==void 0&&_2(t,r.clipmin,r.clipmax)?Math.max(e,t.d2l(r.clipmin)):e}function Ete(e,t){var r=t.autorangeoptions;return r&&r.maxallowed!==void 0&&_2(t,r.minallowed,r.maxallowed)?r.maxallowed:r&&r.clipmax!==void 0&&_2(t,r.clipmin,r.clipmax)?Math.min(e,t.d2l(r.clipmax)):e}function _2(e,t,r){return t!==void 0&&r!==void 0?(t=e.d2l(t),r=e.d2l(r),t<r):!0}function TL(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0],i=e[1],a=t.autorangeoptions.include;if(a!==void 0){var s=t.d2l(r),l=t.d2l(i);Zh.isArrayOrTypedArray(a)||(a=[a]);for(var f=0;f<a.length;f++){var h=t.d2l(a[f]);s>=h&&(s=h,r=h),l<=h&&(l=h,i=h)}}return r=Cte(r,t),i=Ete(i,t),[r,i]}});var Xi=me((F1e,WL)=>{"use strict";var Xl=ja(),Un=Da(),Y0=to(),ng=sa(),jr=Bt(),W0=jr.strTranslate,kd=ro(),Lte=tg(),og=Oa(),ol=xi(),Dte=Nu(),ML=Qw(),R1e=eo(),Mo=Zi(),Pte=Mo.ONEMAXYEAR,w2=Mo.ONEAVGYEAR,T2=Mo.ONEMINYEAR,zte=Mo.ONEMAXQUARTER,B5=Mo.ONEAVGQUARTER,A2=Mo.ONEMINQUARTER,Ite=Mo.ONEMAXMONTH,X0=Mo.ONEAVGMONTH,M2=Mo.ONEMINMONTH,sl=Mo.ONEWEEK,as=Mo.ONEDAY,Yh=as/2,If=Mo.ONEHOUR,sg=Mo.ONEMIN,S2=Mo.ONESEC,Rte=Mo.ONEMILLI,Fte=Mo.ONEMICROSEC,Cd=Mo.MINUS_SIGN,C2=Mo.BADNUM,O5={K:"zeroline"},U5={K:"gridline",L:"path"},V5={K:"minor-gridline",L:"path"},FL={K:"tick",L:"path"},SL={K:"tick",L:"text"},kL={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},E2=No(),ig=E2.MID_SHIFT,Ed=E2.CAP_SHIFT,lg=E2.LINE_SPACING,qte=E2.OPPOSITE_SIDE,k2=3,$t=WL.exports={};$t.setConvert=m2();var Nte=L5(),Rf=jn(),Bte=Rf.idSort,Ote=Rf.isLinked;$t.id2name=Rf.id2name;$t.name2id=Rf.name2id;$t.cleanId=Rf.cleanId;$t.list=Rf.list;$t.listIds=Rf.listIds;$t.getFromId=Rf.getFromId;$t.getFromTrace=Rf.getFromTrace;var qL=ag();$t.getAutoRange=qL.getAutoRange;$t.findExtremes=qL.findExtremes;var Ute=1e-4;function Y5(e){var t=(e[1]-e[0])*Ute;return[e[0]-t,e[1]+t]}$t.coerceRef=function(e,t,r,i,a,s){var l=i.charAt(i.length-1),f=r._fullLayout._subplots[l+"axis"],h=i+"ref",v={};return a||(a=f[0]||(typeof s=="string"?s:s[0])),s||(s=a),f=f.concat(f.map(function(m){return m+" domain"})),v[h]={valType:"enumerated",values:f.concat(s?typeof s=="string"?[s]:s:[]),dflt:a},jr.coerce(e,t,v,h)};$t.coerceRefArray=function(e,t,r,i,a,s,l){let f=i.charAt(i.length-1);var h=r._fullLayout._subplots[f+"axis"];let v=i+"ref";var m=e[v];a||(a=h[0]||(typeof s=="string"?s:s[0])),h=h.concat(h.map(T=>T+" domain")),h=h.concat(s||[]),m.length>l?(jr.warn("Array attribute "+v+" has more entries than expected, truncating to "+l),m=m.slice(0,l)):m.length<l&&(jr.warn("Array attribute "+v+" has fewer entries than expected, extending with default value"),m=m.concat(Array(l-m.length).fill(a)));for(var _=0;_<m.length;_++)m[_]=Rf.cleanId(m[_],f,!0)||m[_],h.includes(m[_])||(m[_]=a);return t[v]=m,m};$t.getRefType=function(e){return e===void 0?e:Array.isArray(e)?"array":e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};$t.coercePosition=function(e,t,r,i,a,s){var l,f,h=$t.getRefType(i);if(h!=="range")l=jr.ensureNumber,f=r(a,s);else{var v=$t.getFromId(t,i);s=v.fraction2r(s),f=r(a,s),l=v.cleanPos}e[a]=l(f)};$t.cleanPosition=function(e,t,r){var i=r==="paper"||r==="pixel"?jr.ensureNumber:$t.getFromId(t,r).cleanPos;return i(e)};$t.redrawComponents=function(e,t){t=t||$t.listIds(e);var r=e._fullLayout;function i(a,s,l,f){for(var h=ng.getComponentMethod(a,s),v={},m=0;m<t.length;m++)for(var _=r[$t.id2name(t[m])],T=_[l],M=0;M<T.length;M++){var C=T[M];if(!v[C]&&(h(e,C),v[C]=1,f))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0),i("selections","drawOne","_selectionIndices")};var Vte=$t.getDataConversions=function(e,t,r,i){var a,s=r==="x"||r==="y"||r==="z"?r:i;if(jr.isArrayOrTypedArray(s)){if(a={type:Nte(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},$t.setConvert(a),a.type==="category")for(var l=0;l<i.length;l++)a.d2c(i[l])}else a=$t.getFromTrace(e,t,s);return a?{d2c:a.d2c,c2d:a.c2d}:s==="ids"?{d2c:EL,c2d:EL}:{d2c:CL,c2d:CL}};function CL(e){return+e}function EL(e){return String(e)}$t.getDataToCoordFunc=function(e,t,r,i){return Vte(e,t,r,i).d2c};$t.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};$t.minDtick=function(e,t,r,i){["log","category","multicategory"].indexOf(e.type)!==-1||!i?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};$t.saveRangeInitial=function(e,t){for(var r=$t.list(e,"",!0),i=!1,a=0;a<r.length;a++){var s=r[a],l=s._rangeInitial0===void 0&&s._rangeInitial1===void 0,f=l||s.range[0]!==s._rangeInitial0||s.range[1]!==s._rangeInitial1,h=s.autorange;(l&&h!==!0||t&&f)&&(s._rangeInitial0=h==="min"||h==="max reversed"?void 0:s.range[0],s._rangeInitial1=h==="max"||h==="min reversed"?void 0:s.range[1],s._autorangeInitial=h,i=!0)}return i};$t.saveShowSpikeInitial=function(e,t){for(var r=$t.list(e,"",!0),i=!1,a="on",s=0;s<r.length;s++){var l=r[s],f=l._showSpikeInitial===void 0,h=f||l.showspikes!==l._showspikes;(f||t&&h)&&(l._showSpikeInitial=l.showspikes,i=!0),a==="on"&&!l.showspikes&&(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,i};$t.autoBin=function(e,t,r,i,a,s){var l=jr.aggNums(Math.min,null,e),f=jr.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:l-.5,end:f+.5,size:Math.max(1,Math.round(s)||1),_dataSpan:f-l};a||(a=t.calendar);var h;if(t.type==="log"?h={type:"linear",range:[l,f]}:h={type:t.type,range:jr.simpleMap([l,f],t.c2r,0,a),calendar:a},$t.setConvert(h),s=s&&ML.dtick(s,h.type),s)h.dtick=s,h.tick0=ML.tick0(void 0,h.type,a);else{var v;if(r)v=(f-l)/r;else{var m=jr.distinctVals(e),_=Math.pow(10,Math.floor(Math.log(m.minDiff)/Math.LN10)),T=_*jr.roundUp(m.minDiff/_,[.9,1.9,4.9,9.9],!0);v=Math.max(T,2*jr.stdev(e)/Math.pow(e.length,i?.25:.4)),Un(v)||(v=1)}$t.autoTicks(h,v)}var M=h.dtick,C=$t.tickIncrement($t.tickFirst(h),M,"reverse",a),E,L;if(typeof M=="number")C=Hte(C,e,h,l,f),L=1+Math.floor((f-C)/M),E=C+L*M;else for(h.dtick.charAt(0)==="M"&&(C=Gte(C,e,M,l,a)),E=C,L=0;E<=f;)E=$t.tickIncrement(E,M,!1,a),L++;return{start:t.c2r(C,0,a),end:t.c2r(E,0,a),size:M,_dataSpan:f-l}};function Hte(e,t,r,i,a){var s=0,l=0,f=0,h=0;function v(M){return(1+(M-e)*100/r.dtick)%100<2}for(var m=0;m<t.length;m++)t[m]%1===0?f++:Un(t[m])||h++,v(t[m])&&s++,v(t[m]+r.dtick/2)&&l++;var _=t.length-h;if(f===_&&r.type!=="date")r.dtick<1?e=i-.5*r.dtick:(e-=.5,e+r.dtick<i&&(e+=r.dtick));else if(l<_*.1&&(s>_*.3||v(i)||v(a))){var T=r.dtick/2;e+=e+T<i?T:-T}return e}function Gte(e,t,r,i,a){var s=jr.findExactDates(t,a),l=.8;if(s.exactDays>l){var f=Number(r.slice(1));s.exactYears>l&&f%12===0?e=$t.tickIncrement(e,"M6","reverse")+as*1.5:s.exactMonths>l?e=$t.tickIncrement(e,"M1","reverse")+as*15.5:e-=Yh;var h=$t.tickIncrement(e,r);if(h<=i)return h}return e}$t.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var i=t.dtick&&Un(t._tmin),a;if(i){var s=$t.tickIncrement(t._tmin,t.dtick,!0);a=[t._tmin,s*.99+t._tmin*.01]}else{var l=jr.simpleMap(t.range,t.r2l);a=[l[0],.8*l[0]+.2*l[1]]}if(e.range=jr.simpleMap(a,t.l2r),e._isMinor=!0,$t.prepTicks(e,r),i){var f=Un(t.dtick),h=Un(e.dtick),v=f?t.dtick:+t.dtick.substring(1),m=h?e.dtick:+e.dtick.substring(1);f&&h?F5(v,m)?v===2*sl&&m===2*as&&(e.dtick=sl):v===2*sl&&m===3*as?e.dtick=sl:v===sl&&!(t._input.minor||{}).nticks?e.dtick=as:LL(v/m,2.5)?e.dtick=v/2:e.dtick=v:String(t.dtick).charAt(0)==="M"?h?e.dtick="M1":F5(v,m)?v>=12&&m===2&&(e.dtick="M3"):e.dtick=t.dtick:String(e.dtick).charAt(0)==="L"?String(t.dtick).charAt(0)==="L"?F5(v,m)||(e.dtick=LL(v/m,2.5)?t.dtick/2:t.dtick):e.dtick="D1":e.dtick==="D2"&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}t.minor._tick0Init===void 0&&(e.tick0=t.tick0)};function F5(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function LL(e,t){return Math.abs(e/t-1)<.001}$t.prepTicks=function(e,t){var r=jr.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e.tickmode==="auto"||!e.dtick){var i=e.nticks,a;i||(e.type==="category"||e.type==="multicategory"?(a=e.tickfont?jr.bigFont(e.tickfont.size||12):15,i=e._length/a):(a=e._id.charAt(0)==="y"?40:80,i=jr.constrain(e._length/a,4,9)+1),e._name==="radialaxis"&&(i*=2)),e.minor&&e.minor.tickmode!=="array"||e.tickmode==="array"&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,$t.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&Zte(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),UL(e)};function q5(e){return+e.substring(1)}function Zte(e){var t;function r(){return!(Un(e.dtick)||e.dtick.charAt(0)!=="M")}var i=r(),a=$t.getTickFormat(e);if(a){var s=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(t=If,s&&!i&&e.dtick<If&&(e.dtick=If)):/%p/.test(a)?(t=Yh,s&&!i&&e.dtick<Yh&&(e.dtick=Yh)):/%[Aadejuwx]/.test(a)?(t=as,s&&!i&&e.dtick<as&&(e.dtick=as)):/%[UVW]/.test(a)?(t=sl,s&&!i&&e.dtick<sl&&(e.dtick=sl)):/%[Bbm]/.test(a)?(t=X0,s&&(i?q5(e.dtick)<1:e.dtick<M2)&&(e.dtick="M1")):/%[q]/.test(a)?(t=B5,s&&(i?q5(e.dtick)<3:e.dtick<A2)&&(e.dtick="M3")):/%[Yy]/.test(a)&&(t=w2,s&&(i?q5(e.dtick)<12:e.dtick<T2)&&(e.dtick="M12")))}i=r(),i&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function Yte(e,t,r){for(var i=0;i<e.length;i++){var a=e[i].value,s=i,l=i+1;i<e.length-1?(s=i,l=i+1):i>0?(s=i-1,l=i):(s=i,l=i);var f=e[s].value,h=e[l].value,v=Math.abs(h-f),m=r||v,_=0;m>=T2?v>=T2&&v<=Pte?_=v:_=w2:r===B5&&m>=A2?v>=A2&&v<=zte?_=v:_=B5:m>=M2?v>=M2&&v<=Ite?_=v:_=X0:r===sl&&m>=sl?_=sl:m>=as?_=as:r===Yh&&m>=Yh?_=Yh:r===If&&m>=If&&(_=If);var T;_>=v&&(_=v,T=!0);var M=a+_;if(t.rangebreaks&&_>0){for(var C=84,E=0,L=0;L<C;L++){var I=(L+.5)/C;t.maskBreaks(a*(1-I)+I*M)!==C2&&E++}_*=E/C,_||(e[i].drop=!0),T&&v>sl&&(_=v)}(_>0||i===0)&&(e[i].periodX=a+_/2)}}$t.calcTicks=function(t,r){for(var i=t.type,a=t.calendar,s=t.ticklabelstep,l=t.ticklabelmode==="period",f=t.range[0]>t.range[1],h=!t.ticklabelindex||jr.isArrayOrTypedArray(t.ticklabelindex)?t.ticklabelindex:[t.ticklabelindex],v=jr.simpleMap(t.range,t.r2l,void 0,void 0,r),m=v[1]<v[0],_=Math.min(v[0],v[1]),T=Math.max(v[0],v[1]),M=Math.max(1e3,t._length||0),C=[],E=[],L=[],I=[],O=[],q=t.minor&&(t.minor.ticks||t.minor.showgrid),z=1;z>=(q?0:1);z--){var N=!z;z?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var H=z?t:jr.extendFlat({},t,t.minor);if(N?$t.prepMinorTicks(H,t,r):$t.prepTicks(H,r),H.tickmode==="array"){z?(L=[],C=DL(t,!N)):(I=[],E=DL(t,!N));continue}if(H.tickmode==="sync"){L=[],C=Wte(t);continue}var V=Y5(v),W=V[0],J=V[1],ee=Un(H.dtick),ie=i==="log"&&!(ee||H.dtick.charAt(0)==="L"),oe=$t.tickFirst(H,r);if(z){if(t._tmin=oe,oe<W!==m)break;(i==="category"||i==="multicategory")&&(J=m?Math.max(-.5,J):Math.min(t._categories.length-.5,J))}var fe=null,le=oe,Te;if(z){var Se;ee?Se=t.dtick:i==="date"?typeof t.dtick=="string"&&t.dtick.charAt(0)==="M"&&(Se=X0*t.dtick.substring(1)):Se=t._roughDTick,Te=Math.round((t.r2l(le)-t.r2l(t.tick0))/Se)-1}var Me=H.dtick;for(H.rangebreaks&&H._tick0Init!==H.tick0&&(le=N5(le,t),m||(le=$t.tickIncrement(le,Me,!m,a))),z&&l&&(le=$t.tickIncrement(le,Me,!m,a),Te--);m?le>=J:le<=J;le=$t.tickIncrement(le,Me,m,a)){if(z&&Te++,H.rangebreaks&&!m){if(le<W)continue;if(H.maskBreaks(le)===C2&&N5(le,H)>=T)break}if(L.length>M||le===fe)break;fe=le;var Ae={value:le};z?(ie&&le!==(le|0)&&(Ae.simpleLabel=!0),s>1&&Te%s&&(Ae.skipLabel=!0),L.push(Ae)):(Ae.minor=!0,I.push(Ae))}}if(!I||I.length<2)h=!1;else{var pe=(I[1].value-I[0].value)*(f?-1:1);gre(pe,t.tickformat)||(h=!1)}if(!h)O=L;else{var ke=L.concat(I);l&&L.length&&(ke=ke.slice(1)),ke=ke.sort(function(qt,Ut){return qt.value-Ut.value}).filter(function(qt,Ut,Dt){return Ut===0||qt.value!==Dt[Ut-1].value});var Ee=ke.map(function(qt,Ut){return qt.minor===void 0&&!qt.skipLabel?Ut:null}).filter(function(qt){return qt!==null});Ee.forEach(function(qt){h.map(function(Ut){var Dt=qt+Ut;Dt>=0&&Dt<ke.length&&jr.pushUnique(O,ke[Dt])})})}if(q){var Xe=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!Xe){for(var lt=L.map(function(qt){return qt.value}),it=[],_t=0;_t<I.length;_t++){var Ye=I[_t],kt=Ye.value;if(lt.indexOf(kt)===-1){for(var st=!1,dt=0;!st&&dt<L.length;dt++)1e7+L[dt].value===1e7+kt&&(st=!0);st||it.push(Ye)}}I=it}}l&&Yte(O,t,t._definedDelta);var It;if(t.rangebreaks){var yt=t._id.charAt(0)==="y",de=1;t.tickmode==="auto"&&(de=t.tickfont?t.tickfont.size:12);var ze=NaN;for(It=L.length-1;It>-1;It--){if(L[It].drop){L.splice(It,1);continue}L[It].value=N5(L[It].value,t);var _e=t.c2p(L[It].value);(yt?ze>_e-de:ze<_e+de)?L.splice(m?It+1:It,1):ze=_e}}J5(t)&&Math.abs(v[1]-v[0])===360&&L.pop(),t._tmax=(L[L.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var Ue,at=function(qt){qt.text="",t._prevDateHead=Ue};L=L.concat(I);function Je(qt,Ut){var Dt=$t.tickText(qt,Ut.value,!1,Ut.simpleLabel),Mt=Ut.periodX;return Mt!==void 0&&(Dt.periodX=Mt,(Mt>T||Mt<_)&&(Mt>T&&(Dt.periodX=T),Mt<_&&(Dt.periodX=_),at(Dt))),Dt}var Ct;for(It=0;It<L.length;It++){var wt=L[It].minor,xt=L[It].value;wt?(h&&O.indexOf(L[It])!==-1?Ct=Je(t,L[It]):Ct={x:xt},Ct.minor=!0,E.push(Ct)):(Ue=t._prevDateHead,Ct=Je(t,L[It]),(L[It].skipLabel||h&&O.indexOf(L[It])===-1)&&at(Ct),C.push(Ct))}return C=C.concat(E),t._inCalcTicks=!1,l&&C.length&&(C[0].noTick=!0),C};function NL(e,t){return e.rangebreaks&&(t=t.filter(function(r){return e.maskBreaks(r.x)!==C2})),t}function Wte(e){var t=e._mainAxis,r=[];if(t._vals){for(var i=0;i<t._vals.length;i++)if(!t._vals[i].noTick){var a=t.l2p(t._vals[i].x),s=e.p2l(a),l=$t.tickText(e,s);t._vals[i].minor&&(l.minor=!0,l.text=""),r.push(l)}}return r=NL(e,r),r}function DL(e,t){var r=jr.simpleMap(e.range,e.r2l),i=Y5(r),a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]),l=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var f=[],h=0;h<=1;h++)if(!(t!==void 0&&(t&&h||t===!1&&!h))&&!(h&&!e.minor)){var v=h?e.minor.tickvals:e.tickvals,m=h?[]:e.ticktext;if(v){jr.isArrayOrTypedArray(m)||(m=[]);for(var _=0;_<v.length;_++){var T=l(v[_]);if(T>a&&T<s){var M=$t.tickText(e,T,!1,String(m[_]));h&&(M.minor=!0,M.text=""),f.push(M)}}}}return f=NL(e,f),f}var x2=[2,5,10],PL=[1,2,3,6,12],zL=[1,2,5,10,15,30],Xte=[1,2,3,7,14],BL=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],OL=[-.301,0,.301,.699,1],jte=[15,30,45,90,180];function zf(e,t,r){return t*jr.roundUp(e/t,r)}$t.autoTicks=function(e,t,r){var i;function a(_){return Math.pow(_,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=jr.dateTick0(e.calendar,0);var s=2*t;if(s>w2)t/=w2,i=a(10),e.dtick="M"+12*zf(t,i,x2);else if(s>X0)t/=X0,e.dtick="M"+zf(t,1,PL);else if(s>as){if(e.dtick=zf(t,as,e._hasDayOfWeekBreaks?[1,2,7,14]:Xte),!r){var l=$t.getTickFormat(e),f=e.ticklabelmode==="period";f&&(e._rawTick0=e.tick0),/%[uVW]/.test(l)?e.tick0=jr.dateTick0(e.calendar,2):e.tick0=jr.dateTick0(e.calendar,1),f&&(e._dowTick0=e.tick0)}}else s>If?e.dtick=zf(t,If,PL):s>sg?e.dtick=zf(t,sg,zL):s>S2?e.dtick=zf(t,S2,zL):(i=a(10),e.dtick=zf(t,i,x2))}else if(e.type==="log"){e.tick0=0;var h=jr.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(h[1]-h[0])<1){var v=1.5*Math.abs((h[1]-h[0])/t);t=Math.abs(Math.pow(10,h[1])-Math.pow(10,h[0]))/v,i=a(10),e.dtick="L"+zf(t,i,x2)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):J5(e)?(e.tick0=0,i=1,e.dtick=zf(t,i,jte)):(e.tick0=0,i=a(10),e.dtick=zf(t,i,x2));if(e.dtick===0&&(e.dtick=1),!Un(e.dtick)&&typeof e.dtick!="string"){var m=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(m)}};function UL(e){var t=e.dtick;if(e._tickexponent=0,!Un(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),i=e.l2r(r).replace(/(^-|i)/g,""),a=i.length;if(String(t).charAt(0)==="M")a>10||i.slice(5)!=="01-01"?e._tickround="d":e._tickround=+t.slice(1)%12===0?"y":"m";else if(t>=as&&a<=10||t>=as*15)e._tickround="d";else if(t>=sg&&a<=16||t>=If)e._tickround="M";else if(t>=S2&&a<=19||t>=sg)e._tickround="S";else{var s=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(a,s)-20,e._tickround<0&&(e._tickround=4)}}else if(Un(t)||t.charAt(0)==="L"){var l=e.range.map(e.r2d||Number);Un(t)||(t=Number(t.slice(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var f=Math.max(Math.abs(l[0]),Math.abs(l[1])),h=Math.floor(Math.log(f)/Math.LN10+.01),v=e.minexponent===void 0?3:e.minexponent;Math.abs(h)>v&&(j0(e.exponentformat)&&e.exponentformat!=="SI extended"&&!W5(h)||j0(e.exponentformat)&&e.exponentformat==="SI extended"&&!X5(h)?e._tickexponent=3*Math.round((h-1)/3):e._tickexponent=h)}else e._tickround=null}$t.tickIncrement=function(e,t,r,i){var a=r?-1:1;if(Un(t))return jr.increment(e,a*t);var s=t.charAt(0),l=a*Number(t.slice(1));if(s==="M")return jr.incrementMonth(e,l,i);if(s==="L")return Math.log(Math.pow(10,e)+l)/Math.LN10;if(s==="D"){var f=t==="D2"?OL:BL,h=e+a*.01,v=jr.roundUp(jr.mod(h,1),f,r);return Math.floor(h)+Math.log(Xl.round(Math.pow(10,v),1))/Math.LN10}throw"unrecognized dtick "+String(t)};$t.tickFirst=function(e,t){var r=e.r2l||Number,i=jr.simpleMap(e.range,r,void 0,void 0,t),a=i[1]<i[0],s=a?Math.floor:Math.ceil,l=Y5(i)[0],f=e.dtick,h=r(e.tick0);if(Un(f)){var v=s((l-h)/f)*f+h;return(e.type==="category"||e.type==="multicategory")&&(v=jr.constrain(v,0,e._categories.length-1)),v}var m=f.charAt(0),_=Number(f.slice(1));if(m==="M"){for(var T=0,M=h,C,E,L;T<10;){if(C=$t.tickIncrement(M,f,a,e.calendar),(C-l)*(M-l)<=0)return a?Math.min(M,C):Math.max(M,C);E=(l-(M+C)/2)/(C-M),L=m+(Math.abs(Math.round(E))||1)*_,M=$t.tickIncrement(M,L,E<0?!a:a,e.calendar),T++}return jr.error("tickFirst did not converge",e),M}else{if(m==="L")return Math.log(s((Math.pow(10,l)-h)/_)*_+h)/Math.LN10;if(m==="D"){var I=f==="D2"?OL:BL,O=jr.roundUp(jr.mod(l,1),I,a);return Math.floor(l)+Math.log(Xl.round(Math.pow(10,O),1))/Math.LN10}else throw"unrecognized dtick "+String(f)}};$t.tickText=function(e,t,r,i){var a=VL(e,t),s=e.tickmode==="array",l=r||s,f=e.type,h=f==="category"?e.d2l_noadd:e.d2l,v,m=function(L){var I=e.l2p(L);return I>=0&&I<=e._length?L:null};if(s&&jr.isArrayOrTypedArray(e.ticktext)){var _=jr.simpleMap(e.range,e.r2l),T=(Math.abs(_[1]-_[0])-(e._lBreaks||0))/1e4;for(v=0;v<e.ticktext.length&&!(Math.abs(t-h(e.tickvals[v]))<T);v++);if(v<e.ticktext.length)return a.text=String(e.ticktext[v]),a.xbnd=[m(a.x-.5),m(a.x+e.dtick-.5)],a}function M(L){if(L===void 0)return!0;if(r)return L==="none";var I={first:e._tmin,last:e._tmax}[L];return L!=="all"&&t!==I}var C=r?"never":e.exponentformat!=="none"&&M(e.showexponent)?"hide":"";if(f==="date"?Jte(e,a,r,l):f==="log"?Kte(e,a,r,l,C):f==="category"?Qte(e,a):f==="multicategory"?$te(e,a,r):J5(e)?tre(e,a,r,l,C):ere(e,a,r,l,C),i||(e.tickprefix&&!M(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!M(e.showticksuffix)&&(a.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(a.text)){var E=e.labelalias[a.text];typeof E=="string"&&(a.text=E)}return(e.tickson==="boundaries"||e.showdividers)&&(a.xbnd=[m(a.x-.5),m(a.x+e.dtick-.5)]),a};$t.hoverLabelText=function(e,t,r){r&&(e=jr.extendFlat({},e,{hoverformat:r}));var i=jr.isArrayOrTypedArray(t)?t[0]:t,a=jr.isArrayOrTypedArray(t)?t[1]:void 0;if(a!==void 0&&a!==i)return $t.hoverLabelText(e,i,r)+" - "+$t.hoverLabelText(e,a,r);var s=e.type==="log"&&i<=0,l=$t.tickText(e,e.c2l(s?-i:i),"hover").text;return s?i===0?"0":Cd+l:l};function VL(e,t,r){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:i.size,font:i.family,fontWeight:i.weight,fontStyle:i.style,fontVariant:i.variant,fontTextcase:i.textcase,fontLineposition:i.lineposition,fontShadow:i.shadow,fontColor:i.color}}function Jte(e,t,r,i){var a=e._tickround,s=r&&e.hoverformat||$t.getTickFormat(e);i=!s&&i,i&&(Un(a)?a=4:a={y:"m",m:"d",d:"M",M:"S",S:4}[a]);var l=jr.formatDate(t.x,s,a,e._dateFormat,e.calendar,e._extraFormat),f,h=l.indexOf(`
`);if(h!==-1&&(f=l.slice(h+1),l=l.slice(0,h)),i&&(f!==void 0&&(l==="00:00:00"||l==="00:00")?(l=f,f=""):l.length===8&&(l=l.replace(/:00$/,""))),f)if(r)a==="d"?l+=", "+f:l=f+(l?", "+l:"");else if(!e._inCalcTicks||e._prevDateHead!==f)e._prevDateHead=f,l+="<br>"+f;else{var v=fg(e),m=e._trueSide||e.side;(!v&&m==="top"||v&&m==="bottom")&&(l+="<br> ")}t.text=l}function Kte(e,t,r,i,a){var s=e.dtick,l=t.x,f=e.tickformat,h=typeof s=="string"&&s.charAt(0);if(a==="never"&&(a=""),i&&h!=="L"&&(s="L3",h="L"),f||h==="L")t.text=ug(Math.pow(10,l),e,a,i);else if(Un(s)||h==="D"&&(e.minorloglabels==="complete"||jr.mod(l+.01,1)<.1)){var v;e.minorloglabels==="complete"&&!(jr.mod(l+.01,1)<.1)&&(v=!0,t.fontSize*=.75);var m=Math.pow(10,l).toExponential(0),_=m.split("e"),T=+_[1],M=Math.abs(T),C=e.exponentformat;C==="power"||j0(C)&&C!=="SI extended"&&W5(T)||j0(C)&&C==="SI extended"&&X5(T)?(t.text=_[0],M>0&&(t.text+="x10"),t.text==="1x10"&&(t.text="10"),T!==0&&T!==1&&(t.text+="<sup>"+(T>0?"":Cd)+M+"</sup>"),t.fontSize*=1.25):(C==="e"||C==="E")&&M>2?t.text=_[0]+C+(T>0?"+":Cd)+M:(t.text=ug(Math.pow(10,l),e,"","fakehover"),s==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(h==="D")t.text=e.minorloglabels==="none"?"":String(Math.round(Math.pow(10,jr.mod(l,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(s);if(e.dtick==="D1"){var E=String(t.text).charAt(0);(E==="0"||E==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}function Qte(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function $te(e,t,r){var i=Math.round(t.x),a=e._categories[i]||[],s=a[1]===void 0?"":String(a[1]),l=a[0]===void 0?"":String(a[0]);r?t.text=l+" - "+s:(t.text=s,t.text2=l)}function ere(e,t,r,i,a){a==="never"?a="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(a="hide"),t.text=ug(t.x,e,a,i)}function tre(e,t,r,i,a){if(e.thetaunit==="radians"&&!r){var s=t.x/180;if(s===0)t.text="0";else{var l=rre(s);if(l[1]>=100)t.text=ug(jr.deg2rad(t.x),e,a,i);else{var f=t.x<0;l[1]===1?l[0]===1?t.text="\u03C0":t.text=l[0]+"\u03C0":t.text=["<sup>",l[0],"</sup>","\u2044","<sub>",l[1],"</sub>","\u03C0"].join(""),f&&(t.text=Cd+t.text)}}}else t.text=ug(t.x,e,a,i)}function rre(e){function t(f,h){return Math.abs(f-h)<=1e-6}function r(f,h){return t(h,0)?f:r(h,f%h)}function i(f){for(var h=1;!t(Math.round(f*h)/h,f);)h*=10;return h}var a=i(e),s=e*a,l=Math.abs(r(s,a));return[Math.round(s/l),Math.round(a/l)]}var HL=["f","p","n","\u03BC","m","","k","M","G","T"],are=["q","r","y","z","a",...HL,"P","E","Z","Y","R","Q"],j0=e=>["SI","SI extended","B"].includes(e);function W5(e){return e>14||e<-15}function X5(e){return e>32||e<-30}function ire(e,t){return j0(t)?!!(t==="SI extended"&&X5(e)||t!=="SI extended"&&W5(e)):!1}function ug(e,t,r,i){var a=e<0,s=t._tickround,l=r||t.exponentformat||"B",f=t._tickexponent,h=$t.getTickFormat(t),v=t.separatethousands;if(i){var m={exponentformat:l,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:Un(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};UL(m),s=(Number(m._tickround)||0)+4,f=m._tickexponent,t.hoverformat&&(h=t.hoverformat)}if(h)return t._numFormat(h)(e).replace(/-/g,Cd);var _=Math.pow(10,-s)/2;if(l==="none"&&(f=0),e=Math.abs(e),e<_)e="0",a=!1;else{if(e+=_,f&&(e*=Math.pow(10,-f),s+=f),s===0)e=String(Math.floor(e));else if(s<0){e=String(Math.round(e)),e=e.slice(0,Math.max(0,e.length+s));for(var T=s;T<0;T++)e+="0"}else{e=String(e);var M=e.indexOf(".")+1;M&&(e=e.slice(0,M+s).replace(/\.?0+$/,""))}e=jr.numSeparate(e,t._separators,v)}if(f&&l!=="hide"){ire(f,l)&&(l="power");var C;f<0?C=Cd+-f:l!=="power"?C="+"+f:C=String(f),l==="e"||l==="E"?e+=l+C:l==="power"?e+="\xD710<sup>"+C+"</sup>":l==="B"&&f===9?e+="B":j0(l)&&(e+=l==="SI extended"?are[f/3+10]:HL[f/3+5])}return a?Cd+e:e}$t.getTickFormat=function(e){var t;function r(h){return typeof h!="string"?h:Number(h.replace("M",""))*X0}function i(h,v){var m=["L","D"];if(typeof h==typeof v){if(typeof h=="number")return h-v;var _=m.indexOf(h.charAt(0)),T=m.indexOf(v.charAt(0));return _===T?Number(h.replace(/(L|D)/g,""))-Number(v.replace(/(L|D)/g,"")):_-T}else return typeof h=="number"?1:-1}function a(h,v,m){var _=m||function(C){return C},T=v[0],M=v[1];return(!T&&typeof T!="number"||_(T)<=_(h))&&(!M&&typeof M!="number"||_(M)>=_(h))}function s(h,v){var m=v[0]===null,_=v[1]===null,T=i(h,v[0])>=0,M=i(h,v[1])<=0;return(m||T)&&(_||M)}var l,f;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(f=e.tickformatstops[t],f.enabled&&a(e.dtick,f.dtickrange,r)){l=f;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(f=e.tickformatstops[t],f.enabled&&s(e.dtick,f.dtickrange)){l=f;break}break}default:}return l?l.value:e.tickformat};$t.getSubplots=function(e,t){var r=e._fullLayout._subplots,i=r.cartesian.concat(r.gl2d||[]),a=t?$t.findSubplotsWithAxis(i,t):i;return a.sort(function(s,l){var f=s.slice(1).split("y"),h=l.slice(1).split("y");return f[0]===h[0]?+f[1]-+h[1]:+f[0]-+h[0]}),a};$t.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),i=[],a=0;a<e.length;a++){var s=e[a];r.test(s)&&i.push(s)}return i};$t.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},a=$t.list(e,"x",!0),s=$t.list(e,"y",!0),l=[],f,h;for(f=0;f<a.length;f++)for(l.push({x:a[f],y:i}),h=0;h<s.length;h++)f===0&&l.push({x:r,y:s[h]}),l.push({x:a[f],y:s[h]});var v=t._clips.selectAll(".axesclip").data(l,function(m){return m.x._id+m.y._id});v.enter().append("clipPath").classed("axesclip",!0).attr("id",function(m){return"clip"+t._uid+m.x._id+m.y._id}).append("rect"),v.exit().remove(),v.each(function(m){Xl.select(this).select("rect").attr({x:m.x._offset||0,y:m.y._offset||0,width:m.x._length||1,height:m.y._length||1})})}};$t.draw=function(e,t,r){var i=e._fullLayout;t==="redraw"&&i._paper.selectAll("g.subplot").each(function(h){var v=h[0],m=i._plots[v];if(m){var _=m.xaxis,T=m.yaxis;m.xaxislayer.selectAll("."+_._id+"tick").remove(),m.yaxislayer.selectAll("."+T._id+"tick").remove(),m.xaxislayer.selectAll("."+_._id+"tick2").remove(),m.yaxislayer.selectAll("."+T._id+"tick2").remove(),m.xaxislayer.selectAll("."+_._id+"divider").remove(),m.yaxislayer.selectAll("."+T._id+"divider").remove(),m.minorGridlayer&&m.minorGridlayer.selectAll("path").remove(),m.gridlayer&&m.gridlayer.selectAll("path").remove(),m.zerolinelayer&&m.zerolinelayer.selectAll("path").remove(),m.zerolinelayerAbove&&m.zerolinelayerAbove.selectAll("path").remove(),i._infolayer.select(".g-"+_._id+"title").remove(),i._infolayer.select(".g-"+T._id+"title").remove()}});var a=!t||t==="redraw"?$t.listIds(e):t,s=$t.list(e),l=s.filter(function(h){return h.autoshift}).map(function(h){return h.overlaying});a.map(function(h){var v=$t.getFromId(e,h);if(v.tickmode==="sync"&&v.overlaying){var m=a.findIndex(function(_){return _===v.overlaying});m>=0&&a.unshift(a.splice(m,1).shift())}});var f={false:{left:0,right:0}};return jr.syncOrAsync(a.map(function(h){return function(){if(h){var v=$t.getFromId(e,h);r||(r={}),r.axShifts=f,r.overlayingShiftedAx=l;var m=$t.drawOne(e,v,r);return v._shiftPusher&&Z5(v,v._fullDepth||0,f,!0),v._r=v.range.slice(),v._rl=jr.simpleMap(v._r,v.r2l),m}}}))};$t.drawOne=function(e,t,r){r=r||{};var i=r.axShifts||{},a=r.overlayingShiftedAx||[],s,l,f;t.setScale();var h=e._fullLayout,v=t._id,m=v.charAt(0),_=$t.counterLetter(v),T=h._plots[t._mainSubplot],M=t.zerolinelayer==="above traces";if(!T)return;if(t._shiftPusher=t.autoshift||a.indexOf(t._id)!==-1||a.indexOf(t.overlaying)!==-1,t._shiftPusher&t.anchor==="free"){var C=t.linewidth/2||0;t.ticks==="inside"&&(C+=t.ticklen),Z5(t,C,i,!0),Z5(t,t.shift||0,i,!1)}(r.skipTitle!==!0||t._shift===void 0)&&(t._shift=yre(t,i));var E=T[m+"axislayer"],L=t._mainLinePosition,I=L+=t._shift,O=t._mainMirrorPosition,q=t._vals=$t.calcTicks(t),z=[t.mirror,I,O].join("_");for(s=0;s<q.length;s++)q[s].axInfo=z;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var N={};function H(xt){var qt=v+(xt||"tick");return N[qt]||(N[qt]=lre(t,qt,I)),N[qt]}if(t.visible){var V=$t.makeTransTickFn(t),W=$t.makeTransTickLabelFn(t),J,ee,ie=t.ticks==="inside",oe=t.ticks==="outside";if(t.tickson==="boundaries"){var fe=nre(t,q);ee=$t.clipEnds(t,fe),J=ie?ee:fe}else ee=$t.clipEnds(t,q),J=ie&&t.ticklabelmode!=="period"?ee:q;var le=t._gridVals=ee,Te=sre(t,q);if(!h._hasOnlyLargeSploms){var Se=t._subplotsWith,Me={};for(s=0;s<Se.length;s++){l=Se[s],f=h._plots[l];var Ae=f[_+"axis"],pe=Ae._mainAxis._id;if(!Me[pe]){Me[pe]=1;var ke=m==="x"?"M0,"+Ae._offset+"v"+Ae._length:"M"+Ae._offset+",0h"+Ae._length;$t.drawGrid(e,t,{vals:le,counterAxis:Ae,layer:f.gridlayer.select("."+v),minorLayer:f.minorGridlayer.select("."+v),path:ke,transFn:V}),$t.drawZeroLine(e,t,{counterAxis:Ae,layer:M?f.zerolinelayerAbove:f.zerolinelayer,path:ke,transFn:V})}}}var Ee,Xe=$t.getTickSigns(t),lt=$t.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var it=$t.makeTickPath(t,I,Xe[2]),_t=$t.makeTickPath(t,I,lt[2],{minor:!0}),Ye,kt,st,dt;if(t._anchorAxis&&t.mirror&&t.mirror!==!0?(Ye=$t.makeTickPath(t,O,Xe[3]),kt=$t.makeTickPath(t,O,lt[3],{minor:!0}),st=it+Ye,dt=_t+kt):(Ye="",kt="",st=it,dt=_t),t.showdividers&&oe&&t.tickson==="boundaries"){var It={};for(s=0;s<Te.length;s++)It[Te[s].x]=1;Ee=function(xt){return It[xt.x]?Ye:st}}else Ee=function(xt){return xt.minor?dt:st}}if($t.drawTicks(e,t,{vals:J,layer:E,path:Ee,transFn:V}),t.mirror==="allticks"){var yt=Object.keys(t._linepositions||{});for(s=0;s<yt.length;s++){l=yt[s],f=h._plots[l];var de=t._linepositions[l]||[],ze=de[0],_e=de[1],Ue=de[2],at=$t.makeTickPath(t,ze,Ue?Xe[0]:lt[0],{minor:Ue})+$t.makeTickPath(t,_e,Ue?Xe[1]:lt[1],{minor:Ue});$t.drawTicks(e,t,{vals:J,layer:f[m+"axislayer"],path:at,transFn:V})}}var Je=[];if(Je.push(function(){return $t.drawLabels(e,t,{vals:q,layer:E,plotinfo:f,transFn:W,labelFns:$t.makeLabelFns(t,I)})}),t.type==="multicategory"){var Ct={x:2,y:10}[m];Je.push(function(){var xt={x:"height",y:"width"}[m],qt=H()[xt]+Ct+(t._tickAngles[v+"tick"]?t.tickfont.size*lg:0);return $t.drawLabels(e,t,{vals:ore(t,q),layer:E,cls:v+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:V,labelFns:$t.makeLabelFns(t,I+qt*Xe[4])})}),Je.push(function(){return t._depth=Xe[4]*(H("tick2")[t.side]-I),fre(e,t,{vals:Te,layer:E,path:$t.makeTickPath(t,I,Xe[4],{len:t._depth}),transFn:V})})}else t.title.hasOwnProperty("standoff")&&Je.push(function(){t._depth=Xe[4]*(H()[t.side]-I)});var wt=ng.getComponentMethod("rangeslider","isVisible")(t);return!r.skipTitle&&!(wt&&t.side==="bottom")&&Je.push(function(){return cre(e,t)}),Je.push(function(){var xt=t.side.charAt(0),qt=qte[t.side].charAt(0),Ut=$t.getPxPosition(e,t),Dt=oe?t.ticklen:0,Mt,Zt,Yt,Be;(t.automargin||wt||t._shiftPusher)&&(t.type==="multicategory"?Mt=H("tick2"):(Mt=H(),m==="x"&&xt==="b"&&(t._depth=Math.max(Mt.width>0?Mt.bottom-Ut:0,Dt))));var ut=0,sr=0;if(t._shiftPusher&&(ut=Math.max(Dt,Mt.height>0?xt==="l"?Ut-Mt.left:Mt.right-Ut:0),t.title.text!==h._dfltTitle[m]&&(sr=(t._titleStandoff||0)+(t._titleScoot||0),xt==="l"&&(sr+=RL(t))),t._fullDepth=Math.max(ut,sr)),t.automargin){Zt={x:0,y:0,r:0,l:0,t:0,b:0};var Pr=[0,1],Et=typeof t._shift=="number"?t._shift:0;if(m==="x"){if(xt==="b"?Zt[xt]=t._depth:(Zt[xt]=t._depth=Math.max(Mt.width>0?Ut-Mt.top:0,Dt),Pr.reverse()),Mt.width>0){var ht=Mt.right-(t._offset+t._length);ht>0&&(Zt.xr=1,Zt.r=ht);var pt=t._offset-Mt.left;pt>0&&(Zt.xl=0,Zt.l=pt)}}else if(xt==="l"?(t._depth=Math.max(Mt.height>0?Ut-Mt.left:0,Dt),Zt[xt]=t._depth-Et):(t._depth=Math.max(Mt.height>0?Mt.right-Ut:0,Dt),Zt[xt]=t._depth+Et,Pr.reverse()),Mt.height>0){var Ot=Mt.bottom-(t._offset+t._length);Ot>0&&(Zt.yb=0,Zt.b=Ot);var er=t._offset-Mt.top;er>0&&(Zt.yt=1,Zt.t=er)}Zt[_]=t.anchor==="free"?t.position:t._anchorAxis.domain[Pr[0]],t.title.text!==h._dfltTitle[m]&&(Zt[xt]+=RL(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(Yt={x:0,y:0,r:0,l:0,t:0,b:0},Yt[qt]=t.linewidth,t.mirror&&t.mirror!==!0&&(Yt[qt]+=Dt),t.mirror===!0||t.mirror==="ticks"?Yt[_]=t._anchorAxis.domain[Pr[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(Yt[_]=[t._counterDomainMin,t._counterDomainMax][Pr[1]]))}wt&&(Be=ng.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),typeof t.automargin=="string"&&(IL(Zt,t.automargin),IL(Yt,t.automargin)),Y0.autoMargin(e,j5(t),Zt),Y0.autoMargin(e,ZL(t),Yt),Y0.autoMargin(e,YL(t),Be)}),jr.syncOrAsync(Je)}};function IL(e,t){if(e){var r=Object.keys(kL).reduce(function(i,a){return t.indexOf(a)!==-1&&kL[a].forEach(function(s){i[s]=1}),i},{});Object.keys(e).forEach(function(i){r[i]||(i.length===1?e[i]=0:delete e[i])})}}function nre(e,t){var r=[],i,a=function(s,l){var f=s.xbnd[l];f!==null&&r.push(jr.extendFlat({},s,{x:f}))};if(t.length){for(i=0;i<t.length;i++)a(t[i],0);a(t[i-1],1)}return r}function ore(e,t){for(var r=[],i={},a=0;a<t.length;a++){var s=t[a];i[s.text2]?i[s.text2].push(s.x):i[s.text2]=[s.x]}for(var l in i)r.push(VL(e,jr.interp(i[l],.5),l));return r}function sre(e,t){var r=[],i,a,s=t.length&&t[t.length-1].x<t[0].x,l=function(h,v){var m=h.xbnd[v];m!==null&&r.push(jr.extendFlat({},h,{x:m}))};if(e.showdividers&&t.length){for(i=0;i<t.length;i++){var f=t[i];f.text2!==a&&l(f,s?1:0),a=f.text2}l(t[i-1],s?0:1)}return r}function lre(e,t,r){var i,a,s,l;if(e._selections[t].size())i=1/0,a=-1/0,s=1/0,l=-1/0,e._selections[t].each(function(){var h=G5(this);if(h.node().style.display!=="none"){var v=ol.bBox(h.node().parentNode);i=Math.min(i,v.top),a=Math.max(a,v.bottom),s=Math.min(s,v.left),l=Math.max(l,v.right)}});else{var f=$t.makeLabelFns(e,r);i=a=f.yFn({dx:0,dy:0,fontSize:0}),s=l=f.xFn({dx:0,dy:0,fontSize:0})}return{top:i,bottom:a,left:s,right:l,height:a-i,width:l-s}}$t.getTickSigns=function(e,t){var r=e._id.charAt(0),i={x:"top",y:"right"}[r],a=e.side===i?1:-1,s=[-1,1,a,-a],l=t?(e.minor||{}).ticks:e.ticks;return l!=="inside"==(r==="x")&&(s=s.map(function(f){return-f})),e.side&&s.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),s};$t.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return W0(e._offset+e.l2p(t.x),0)}:function(t){return W0(0,e._offset+e.l2p(t.x))}};$t.makeTransTickLabelFn=function(e){var t=ure(e),r=e.ticklabelshift||0,i=e.ticklabelstandoff||0,a=t[0],s=t[1],l=e.range[0]>e.range[1],f=e.ticklabelposition&&e.ticklabelposition.indexOf("inside")!==-1,h=!f;if(r){var v=l?-1:1;r=r*v}if(i){var m=e.side,_=f&&(m==="top"||m==="left")||h&&(m==="bottom"||m==="right")?1:-1;i=i*_}return e._id.charAt(0)==="x"?function(T){return W0(a+e._offset+e.l2p(H5(T))+r,s+i)}:function(T){return W0(s+i,a+e._offset+e.l2p(H5(T))+r)}};function H5(e){return e.periodX!==void 0?e.periodX:e.x}function ure(e){var t=e.ticklabelposition||"",r=e.tickson||"",i=function(C){return t.indexOf(C)!==-1},a=i("top"),s=i("left"),l=i("right"),f=i("bottom"),h=i("inside"),v=r!=="boundaries"&&(f||s||a||l);if(!v&&!h)return[0,0];var m=e.side,_=v?(e.tickwidth||0)/2:0,T=k2,M=e.tickfont?e.tickfont.size:12;return(f||a)&&(_+=M*Ed,T+=(e.linewidth||0)/2),(s||l)&&(_+=(e.linewidth||0)/2,T+=k2),h&&m==="top"&&(T-=M*(1-Ed)),(s||a)&&(_=-_),(m==="bottom"||m==="right")&&(T=-T),[v?_:0,h?T:0]}$t.makeTickPath=function(e,t,r,i){i||(i={});var a=i.minor;if(a&&!e.minor)return"";var s=i.len!==void 0?i.len:a?e.minor.ticklen:e.ticklen,l=e._id.charAt(0),f=(e.linewidth||1)/2;return l==="x"?"M0,"+(t+f*r)+"v"+s*r:"M"+(t+f*r)+",0h"+s*r};$t.makeLabelFns=function(e,t,r){var i=e.ticklabelposition||"",a=e.tickson||"",s=function(fe){return i.indexOf(fe)!==-1},l=s("top"),f=s("left"),h=s("right"),v=s("bottom"),m=a!=="boundaries"&&(v||f||l||h),_=s("inside"),T=i==="inside"&&e.ticks==="inside"||!_&&e.ticks==="outside"&&a!=="boundaries",M=0,C=0,E=T?e.ticklen:0;if(_?E*=-1:m&&(E=0),T&&(M+=E,r)){var L=jr.deg2rad(r);M=E*Math.cos(L)+1,C=E*Math.sin(L)}e.showticklabels&&(T||e.showline)&&(M+=.2*e.tickfont.size),M+=(e.linewidth||1)/2*(_?-1:1);var I={labelStandoff:M,labelShift:C},O,q,z,N,H=0,V=e.side,W=e._id.charAt(0),J=e.tickangle,ee;if(W==="x")ee=!_&&V==="bottom"||_&&V==="top",N=ee?1:-1,_&&(N*=-1),O=C*N,q=t+M*N,z=ee?1:-.2,Math.abs(J)===90&&(_?z+=ig:J===-90&&V==="bottom"?z=Ed:J===90&&V==="top"?z=ig:z=.5,H=ig/2*(J/90)),I.xFn=function(fe){return fe.dx+O+H*fe.fontSize},I.yFn=function(fe){return fe.dy+q+fe.fontSize*z},I.anchorFn=function(fe,le){if(m){if(f)return"end";if(h)return"start"}return!Un(le)||le===0||le===180?"middle":le*N<0!==_?"end":"start"},I.heightFn=function(fe,le,Te){return le<-60||le>60?-.5*Te:e.side==="top"!==_?-Te:0};else if(W==="y"){if(ee=!_&&V==="left"||_&&V==="right",N=ee?1:-1,_&&(N*=-1),O=M,q=C*N,z=0,!_&&Math.abs(J)===90&&(J===-90&&V==="left"||J===90&&V==="right"?z=Ed:z=.5),_){var ie=Un(J)?+J:0;if(ie!==0){var oe=jr.deg2rad(ie);H=Math.abs(Math.sin(oe))*Ed*N,z=0}}I.xFn=function(fe){return fe.dx+t-(O+fe.fontSize*z)*N+H*fe.fontSize},I.yFn=function(fe){return fe.dy+q+fe.fontSize*ig},I.anchorFn=function(fe,le){return Un(le)&&Math.abs(le)===90?"middle":ee?"end":"start"},I.heightFn=function(fe,le,Te){return e.side==="right"&&(le*=-1),le<-30?-Te:le<30?-.5*Te:0}}return I};function L2(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}$t.drawTicks=function(e,t,r){r=r||{};var i=t._id+"tick",a=[].concat(t.minor&&t.minor.ticks?r.vals.filter(function(l){return l.minor&&!l.noTick}):[]).concat(t.ticks?r.vals.filter(function(l){return!l.minor&&!l.noTick}):[]),s=r.layer.selectAll("path."+i).data(a,L2);s.exit().remove(),s.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",r.crisp!==!1).each(function(l){return og.stroke(Xl.select(this),l.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(l){return ol.crispRound(e,l.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",r.path).style("display",null),D2(t,[FL]),s.attr("transform",r.transFn)};$t.drawGrid=function(e,t,r){if(r=r||{},t.tickmode!=="sync"){var i=t._id+"grid",a=t.minor&&t.minor.showgrid,s=a?r.vals.filter(function(I){return I.minor}):[],l=t.showgrid?r.vals.filter(function(I){return!I.minor}):[],f=r.counterAxis;if(f&&$t.shouldShowZeroLine(e,t,f))for(var h=t.tickmode==="array",v=0;v<l.length;v++){var m=l[v].x;if(h?!m:Math.abs(m)<t.dtick/100)if(l=l.slice(0,v).concat(l.slice(v+1)),h)v--;else break}t._gw=ol.crispRound(e,t.gridwidth,1);for(var _=a?ol.crispRound(e,t.minor.gridwidth,1):0,T=r.layer,M=r.minorLayer,C=1;C>=0;C--){var E=C?T:M;if(E){var L=E.selectAll("path."+i).data(C?l:s,L2);L.exit().remove(),L.enter().append("path").classed(i,1).classed("crisp",r.crisp!==!1),L.attr("transform",r.transFn).attr("d",r.path).each(function(I){return og.stroke(Xl.select(this),I.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(I){return ol.dashStyle(I.minor?t.minor.griddash:t.griddash,I.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(I){return(I.minor?_:t._gw)+"px"}).style("display",null),typeof r.path=="function"&&L.attr("d",r.path)}}D2(t,[U5,V5])}};$t.drawZeroLine=function(e,t,r){r=r||r;var i=t._id+"zl",a=$t.shouldShowZeroLine(e,t,r.counterAxis),s=r.layer.selectAll("path."+i).data(a?[{x:0,id:t._id}]:[]);s.exit().remove(),s.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(l,f){return Bte(l.id,f.id)})}),s.attr("transform",r.transFn).attr("d",r.path).call(og.stroke,t.zerolinecolor||og.defaultLine).style("stroke-width",ol.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),D2(t,[O5])};$t.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout,a=t._id,s=t.zerolinelayer==="above traces",l=r.cls||a+"tick",f=r.vals.filter(function(pe){return pe.text}),h=r.labelFns,v=r.secondary?0:t.tickangle,m=(t._prevTickAngles||{})[l],_=r.layer.selectAll("g."+l).data(t.showticklabels?f:[],L2),T=[];_.enter().append("g").classed(l,1).append("text").attr("text-anchor","middle").each(function(pe){var ke=Xl.select(this),Ee=e._promises.length;ke.call(kd.positionText,h.xFn(pe),h.yFn(pe)).call(ol.font,{family:pe.font,size:pe.fontSize,color:pe.fontColor,weight:pe.fontWeight,style:pe.fontStyle,variant:pe.fontVariant,textcase:pe.fontTextcase,lineposition:pe.fontLineposition,shadow:pe.fontShadow}).text(pe.text).call(kd.convertToTspans,e),e._promises[Ee]?T.push(e._promises.pop().then(function(){M(ke,v)})):M(ke,v)}),D2(t,[SL]),_.exit().remove(),r.repositionOnUpdate&&_.each(function(pe){Xl.select(this).select("text").call(kd.positionText,h.xFn(pe),h.yFn(pe))});function M(pe,ke){pe.each(function(Ee){var Xe=Xl.select(this),lt=Xe.select(".text-math-group"),it=h.anchorFn(Ee,ke),_t=r.transFn.call(Xe.node(),Ee)+(Un(ke)&&+ke!=0?" rotate("+ke+","+h.xFn(Ee)+","+(h.yFn(Ee)-Ee.fontSize/2)+")":""),Ye=kd.lineCount(Xe),kt=lg*Ee.fontSize,st=h.heightFn(Ee,Un(ke)?+ke:0,(Ye-1)*kt);if(st&&(_t+=W0(0,st)),lt.empty()){var dt=Xe.select("text");dt.attr({transform:_t,"text-anchor":it}),dt.style("display",null),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var It=ol.bBox(lt.node()).width,yt=It*{end:-.5,start:.5}[it];lt.attr("transform",_t+W0(yt,0))}})}t._adjustTickLabelsOverflow=function(){var pe=t.ticklabeloverflow;if(!(!pe||pe==="allow")){var ke=pe.indexOf("hide")!==-1,Ee=t._id.charAt(0)==="x",Xe=0,lt=Ee?e._fullLayout.width:e._fullLayout.height;if(pe.indexOf("domain")!==-1){var it=jr.simpleMap(t.range,t.r2l);Xe=t.l2p(it[0])+t._offset,lt=t.l2p(it[1])+t._offset}var _t=Math.min(Xe,lt),Ye=Math.max(Xe,lt),kt=t.side,st=1/0,dt=-1/0;_.each(function(ze){var _e=Xl.select(this),Ue=_e.select(".text-math-group");if(Ue.empty()){var at=ol.bBox(_e.node()),Je=0;Ee?(at.right>Ye||at.left<_t)&&(Je=1):(at.bottom>Ye||at.top+(t.tickangle?0:ze.fontSize/4)<_t)&&(Je=1);var Ct=_e.select("text");Je?ke&&Ct.style("display","none"):Ct.node().style.display!=="none"&&(Ct.style("display",null),kt==="bottom"||kt==="right"?st=Math.min(st,Ee?at.top:at.left):st=-1/0,kt==="top"||kt==="left"?dt=Math.max(dt,Ee?at.bottom:at.right):dt=1/0)}});for(var It in i._plots){var yt=i._plots[It];if(!(t._id!==yt.xaxis._id&&t._id!==yt.yaxis._id)){var de=Ee?yt.yaxis:yt.xaxis;de&&(de["_visibleLabelMin_"+t._id]=st,de["_visibleLabelMax_"+t._id]=dt)}}}},t._hideCounterAxisInsideTickLabels=function(pe){var ke=t._id.charAt(0)==="x",Ee=[];for(var Xe in i._plots){var lt=i._plots[Xe];t._id!==lt.xaxis._id&&t._id!==lt.yaxis._id||Ee.push(ke?lt.yaxis:lt.xaxis)}Ee.forEach(function(it,_t){it&&fg(it)&&(pe||[O5,V5,U5,FL,SL]).forEach(function(Ye){var kt=Ye.K==="tick"&&Ye.L==="text"&&t.ticklabelmode==="period",st=i._plots[t._mainSubplot],dt;if(Ye.K===O5.K){var It=s?st.zerolinelayerAbove:st.zerolinelayer;dt=It.selectAll("."+t._id+"zl")}else Ye.K===V5.K?dt=st.minorGridlayer.selectAll("."+t._id):Ye.K===U5.K?dt=st.gridlayer.selectAll("."+t._id):dt=st[t._id.charAt(0)+"axislayer"];dt.each(function(){var yt=Xl.select(this);Ye.L&&(yt=yt.selectAll(Ye.L)),yt.each(function(de){var ze=t.l2p(kt?H5(de):de.x)+t._offset,_e=Xl.select(this);ze<t["_visibleLabelMax_"+it._id]&&ze>t["_visibleLabelMin_"+it._id]?_e.style("display","none"):Ye.K==="tick"&&!_t&&_e.node().style.display!=="none"&&_e.style("display",null)})})})})},M(_,m+1?m:v);function C(){return T.length&&Promise.all(T)}var E=null;function L(){if(M(_,v),f.length&&t.autotickangles&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){E=t.autotickangles[0];var pe=0,ke=[],Ee,Xe=1;_.each(function(Zt){pe=Math.max(pe,Zt.fontSize);var Yt=t.l2p(Zt.x),Be=G5(this),ut=ol.bBox(Be.node());Xe=Math.max(Xe,kd.lineCount(Be)),ke.push({top:0,bottom:10,height:10,left:Yt-ut.width/2,right:Yt+ut.width/2+2,width:ut.width+2})});var lt=(t.tickson==="boundaries"||t.showdividers)&&!r.secondary,it=f.length,_t=Math.abs((f[it-1].x-f[0].x)*t._m)/(it-1),Ye=lt?_t/2:_t,kt=lt?t.ticklen:pe*1.25*Xe,st=Math.sqrt(Math.pow(Ye,2)+Math.pow(kt,2)),dt=Ye/st,It=t.autotickangles.map(function(Zt){return Zt*Math.PI/180}),yt=It.find(function(Zt){return Math.abs(Math.cos(Zt))<=dt});yt===void 0&&(yt=It.reduce(function(Zt,Yt){return Math.abs(Math.cos(Zt))<Math.abs(Math.cos(Yt))?Zt:Yt},It[0]));var de=yt*(180/Math.PI);if(lt){var ze=2;for(t.ticks&&(ze+=t.tickwidth/2),Ee=0;Ee<ke.length;Ee++){var _e=f[Ee].xbnd,Ue=ke[Ee];if(_e[0]!==null&&Ue.left-t.l2p(_e[0])<ze||_e[1]!==null&&t.l2p(_e[1])-Ue.right<ze){E=de;break}}}else{var at=t.ticklabelposition||"",Je=t.tickson||"",Ct=function(Zt){return at.indexOf(Zt)!==-1},wt=Ct("top"),xt=Ct("left"),qt=Ct("right"),Ut=Ct("bottom"),Dt=Je!=="boundaries"&&(Ut||xt||wt||qt),Mt=Dt?(t.tickwidth||0)+2*k2:0;for(Ee=0;Ee<ke.length-1;Ee++)if(jr.bBoxIntersect(ke[Ee],ke[Ee+1],Mt)){E=de;break}}E&&M(_,E)}}t._selections&&(t._selections[l]=_);var I=[C];t.automargin&&i._redrawFromAutoMarginCount&&m===90?(E=m,I.push(function(){M(_,m)})):I.push(L),t._tickAngles&&I.push(function(){t._tickAngles[l]=E===null?Un(v)?v:0:E});var O=function(){var pe=0,ke=0;return _.each(function(Ee,Xe){var lt=G5(this),it=lt.select(".text-math-group");if(it.empty()){var _t;t._vals[Xe]&&(_t=t._vals[Xe].bb||ol.bBox(lt.node()),t._vals[Xe].bb=_t),pe=Math.max(pe,_t.width),ke=Math.max(ke,_t.height)}}),{labelsMaxW:pe,labelsMaxH:ke}},q=t._anchorAxis;if(q&&(q.autorange||q.insiderange)&&fg(t)&&!Ote(i,t._id)&&(i._insideTickLabelsUpdaterange||(i._insideTickLabelsUpdaterange={}),q.autorange&&(i._insideTickLabelsUpdaterange[q._name+".autorange"]=q.autorange,I.push(O)),q.insiderange)){var z=O(),N=t._id.charAt(0)==="y"?z.labelsMaxW:z.labelsMaxH;N+=2*k2,t.ticklabelposition==="inside"&&(N+=t.ticklen||0);var H=t.side==="right"||t.side==="top"?1:-1,V=H===1?1:0,W=H===1?0:1,J=[];J[W]=q.range[W];var ee=q.range,ie=q.r2p(ee[V]),oe=q.r2p(ee[W]),fe=i._insideTickLabelsUpdaterange[q._name+".range"];if(fe){var le=q.r2p(fe[V]),Te=q.r2p(fe[W]),Se=H*(t._id.charAt(0)==="y"?1:-1);Se*ie<Se*le&&(ie=le,J[V]=ee[V]=fe[V]),Se*oe>Se*Te&&(oe=Te,J[W]=ee[W]=fe[W])}var Me=Math.abs(oe-ie);Me-N>0?(Me-=N,N*=1+N/Me):N=0,t._id.charAt(0)!=="y"&&(N=-N),J[V]=q.p2r(q.r2p(ee[V])+H*N),q.autorange==="min"||q.autorange==="max reversed"?(J[0]=null,q._rangeInitial0=void 0,q._rangeInitial1=void 0):(q.autorange==="max"||q.autorange==="min reversed")&&(J[1]=null,q._rangeInitial0=void 0,q._rangeInitial1=void 0),i._insideTickLabelsUpdaterange[q._name+".range"]=J}var Ae=jr.syncOrAsync(I);return Ae&&Ae.then&&e._promises.push(Ae),Ae};function fre(e,t,r){var i=t._id+"divider",a=r.vals,s=r.layer.selectAll("path."+i).data(a,L2);s.exit().remove(),s.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(og.stroke,t.dividercolor).style("stroke-width",ol.crispRound(e,t.dividerwidth,1)+"px"),s.attr("transform",r.transFn).attr("d",r.path)}$t.getPxPosition=function(e,t){var r=e._fullLayout._size,i=t._id.charAt(0),a=t.side,s;if(t.anchor!=="free"?s=t._anchorAxis:i==="x"?s={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:i==="y"&&(s={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),a==="top"||a==="left")return s._offset;if(a==="bottom"||a==="right")return s._offset+s._length};function RL(e){var t=e.title.font.size,r=(e.title.text.match(kd.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?t*(Ed+r*lg):r?t*(r+1)*lg:t}function cre(e,t){var r=e._fullLayout,i=t._id,a=i.charAt(0),s=t.title.font.size,l,f=(t.title.text.match(kd.BR_TAG_ALL)||[]).length;if(t.title.hasOwnProperty("standoff"))t.side==="bottom"||t.side==="right"?l=t._depth+t.title.standoff+s*Ed:(t.side==="top"||t.side==="left")&&(l=t._depth+t.title.standoff+s*(ig+f*lg));else{var h=fg(t);if(t.type==="multicategory")l=t._depth;else{var v=1.5*s;h&&(v=.5*s,t.ticks==="outside"&&(v+=t.ticklen)),l=10+v+(t.linewidth?t.linewidth-1:0)}h||(a==="x"?l+=t.side==="top"?s*(t.showticklabels?1:0):s*(t.showticklabels?1.5:.5):l+=t.side==="right"?s*(t.showticklabels?1:.5):s*(t.showticklabels?.5:0))}var m=$t.getPxPosition(e,t),_,T,M;a==="x"?(T=t._offset+t._length/2,M=t.side==="top"?m-l:m+l):(M=t._offset+t._length/2,T=t.side==="right"?m+l:m-l,_={rotate:"-90",offset:0});var C;if(t.type!=="multicategory"){var E=t._selections[t._id+"tick"];if(C={selection:E,side:t.side},E&&E.node()&&E.node().parentNode){var L=ol.getTranslate(E.node().parentNode);C.offsetLeft=L.x,C.offsetTop=L.y}t.title.hasOwnProperty("standoff")&&(C.pad=0)}return t._titleStandoff=l,Lte.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:C,transform:_,attributes:{x:T,y:M,"text-anchor":"middle"}})}$t.shouldShowZeroLine=function(e,t,r){var i=jr.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===C2)&&(GL(t,0)||!hre(e,t,r,i)||vre(e,t))};$t.clipEnds=function(e,t){return t.filter(function(r){return GL(e,r.x)})};function GL(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function hre(e,t,r,i){var a=r._mainAxis;if(!a)return;var s=e._fullLayout,l=t._id.charAt(0),f=$t.counterLetter(t._id),h=t._offset+(Math.abs(i[0])<Math.abs(i[1])==(l==="x")?0:t._length);function v(C){if(!C.showline||!C.linewidth)return!1;var E=Math.max((C.linewidth+t.zerolinewidth)/2,1);function L(q){return typeof q=="number"&&Math.abs(q-h)<E}if(L(C._mainLinePosition)||L(C._mainMirrorPosition))return!0;var I=C._linepositions||{};for(var O in I)if(L(I[O][0])||L(I[O][1]))return!0}var m=s._plots[r._mainSubplot];if(!(m.mainplotinfo||m).overlays.length)return v(r,h);for(var _=$t.list(e,f),T=0;T<_.length;T++){var M=_[T];if(M._mainAxis===a&&v(M,h))return!0}}function vre(e,t){for(var r=e._fullData,i=t._mainSubplot,a=t._id.charAt(0),s=0;s<r.length;s++){var l=r[s];if(l.visible===!0&&l.xaxis+l.yaxis===i&&(ng.traceIs(l,"bar-like")&&l.orientation==={x:"h",y:"v"}[a]||l.fill&&l.fill.charAt(l.fill.length-1)===a))return!0}return!1}function G5(e){var t=Xl.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}$t.allowAutoMargin=function(e){for(var t=$t.list(e,"",!0),r=0;r<t.length;r++){var i=t[r];i.automargin&&(Y0.allowAutoMargin(e,j5(i)),i.mirror&&Y0.allowAutoMargin(e,ZL(i))),ng.getComponentMethod("rangeslider","isVisible")(i)&&Y0.allowAutoMargin(e,YL(i))}};function j5(e){return e._id+".automargin"}function ZL(e){return j5(e)+".mirror"}function YL(e){return e._id+".rangeslider"}$t.swap=function(e,t){for(var r=dre(e,t),i=0;i<r.length;i++)pre(e,r[i].x,r[i].y)};function dre(e,t){var r=[],i,a;for(i=0;i<t.length;i++){var s=[],l=e._fullData[t[i]].xaxis,f=e._fullData[t[i]].yaxis;if(!(!l||!f)){for(a=0;a<r.length;a++)(r[a].x.indexOf(l)!==-1||r[a].y.indexOf(f)!==-1)&&s.push(a);if(!s.length){r.push({x:[l],y:[f]});continue}var h=r[s[0]],v;if(s.length>1)for(a=1;a<s.length;a++)v=r[s[a]],b2(h.x,v.x),b2(h.y,v.y);b2(h.x,[l]),b2(h.y,[f])}}return r}function b2(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function pre(e,t,r){var i=[],a=[],s=e.layout,l,f;for(l=0;l<t.length;l++)i.push($t.getFromId(e,t[l]));for(l=0;l<r.length;l++)a.push($t.getFromId(e,r[l]));var h=Object.keys(Dte),v=["anchor","domain","overlaying","position","side","tickangle","editType"],m=["linear","log"];for(l=0;l<h.length;l++){var _=h[l],T=i[0][_],M=a[0][_],C=!0,E=!1,L=!1;if(!(_.charAt(0)==="_"||typeof T=="function"||v.indexOf(_)!==-1)){for(f=1;f<i.length&&C;f++){var I=i[f][_];_==="type"&&m.indexOf(T)!==-1&&m.indexOf(I)!==-1&&T!==I?E=!0:I!==T&&(C=!1)}for(f=1;f<a.length&&C;f++){var O=a[f][_];_==="type"&&m.indexOf(M)!==-1&&m.indexOf(O)!==-1&&M!==O?L=!0:a[f][_]!==M&&(C=!1)}C&&(E&&(s[i[0]._name].type="linear"),L&&(s[a[0]._name].type="linear"),mre(s,_,i,a,e._fullLayout._dfltTitle))}}for(l=0;l<e._fullLayout.annotations.length;l++){var q=e._fullLayout.annotations[l];t.indexOf(q.xref)!==-1&&r.indexOf(q.yref)!==-1&&jr.swapAttrs(s.annotations[l],["?"])}}function mre(e,t,r,i,a){var s=jr.nestedProperty,l=s(e[r[0]._name],t).get(),f=s(e[i[0]._name],t).get(),h;for(t==="title"&&(l&&l.text===a.x&&(l.text=a.y),f&&f.text===a.y&&(f.text=a.x)),h=0;h<r.length;h++)s(e,r[h]._name+"."+t).set(f);for(h=0;h<i.length;h++)s(e,i[h]._name+"."+t).set(l)}function J5(e){return e._id==="angularaxis"}function N5(e,t){for(var r=t._rangebreaks.length,i=0;i<r;i++){var a=t._rangebreaks[i];if(e>=a.min&&e<a.max)return a.max}return e}function fg(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function D2(e,t){fg(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function Z5(e,t,r,i){var a=e.anchor!=="free"&&(e.overlaying===void 0||e.overlaying===!1)?e._id:e.overlaying,s;i?s=e.side==="right"?t:-t:s=t,a in r||(r[a]={}),e.side in r[a]||(r[a][e.side]=0),r[a][e.side]+=s}function yre(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}function gre(e,t){return/%f/.test(t)?e>=Fte:/%L/.test(t)?e>=Rte:/%[SX]/.test(t)?e>=S2:/%M/.test(t)?e>=sg:/%[HI]/.test(t)?e>=If:/%p/.test(t)?e>=Yh:/%[Aadejuwx]/.test(t)?e>=as:/%[UVW]/.test(t)?e>=sl:/%[Bbm]/.test(t)?e>=M2:/%[q]/.test(t)?e>=A2:/%[Yy]/.test(t)?e>=T2:!0}});var jL=me((q1e,XL)=>{"use strict";XL.exports=function(t,r,i){var a,s;if(i){var l=r==="reversed"||r==="min reversed"||r==="max reversed";a=i[l?1:0],s=i[l?0:1]}var f=t("autorangeoptions.minallowed",s===null?a:void 0),h=t("autorangeoptions.maxallowed",a===null?s:void 0);f===void 0&&t("autorangeoptions.clipmin"),h===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}});var K5=me((N1e,JL)=>{"use strict";var _re=jL();JL.exports=function(t,r,i,a){var s=r._template||{},l=r.type||s.type||"-";i("minallowed"),i("maxallowed");var f=i("range");if(!f){var h;!a.noInsiderange&&l!=="log"&&(h=i("insiderange"),h&&(h[0]===null||h[1]===null)&&(r.insiderange=!1,h=void 0),h&&(f=i("range",h)))}var v=r.getAutorangeDflt(f,a),m=i("autorange",v),_;f&&(f[0]===null&&f[1]===null||(f[0]===null||f[1]===null)&&(m==="reversed"||m===!0)||f[0]!==null&&(m==="min"||m==="max reversed")||f[1]!==null&&(m==="max"||m==="min reversed"))&&(f=void 0,delete r.range,r.autorange=!0,_=!0),_||(v=r.getAutorangeDflt(f,a),m=i("autorange",v)),m&&(_re(i,m,f),(l==="linear"||l==="-")&&i("rangemode")),r.cleanRange()}});var QL=me((B1e,KL)=>{var xre={left:0,top:0};KL.exports=bre;function bre(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,a=e.clientY||0,s=wre(t);return r[0]=i-s.left,r[1]=a-s.top,r}function wre(e){return e===window||e===document||e===document.body?xre:e.getBoundingClientRect()}});var Q5=me((O1e,$L)=>{"use strict";var Tre=Sw();function Are(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){e=!1}return e}$L.exports=Tre&&Are()});var tD=me((U1e,eD)=>{"use strict";eD.exports=function(t,r,i,a,s){var l=(t-i)/(a-i),f=l+r/(a-i),h=(l+f)/2;return s==="left"||s==="bottom"?l:s==="center"||s==="middle"?h:s==="right"||s==="top"?f:l<2/3-h?l:f>4/3-h?f:h}});var iD=me((V1e,aD)=>{"use strict";var rD=Bt(),Mre=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];aD.exports=function(t,r,i,a){return i==="left"?t=0:i==="center"?t=1:i==="right"?t=2:t=rD.constrain(Math.floor(t*3),0,2),a==="bottom"?r=0:a==="middle"?r=1:a==="top"?r=2:r=rD.constrain(Math.floor(r*3),0,2),Mre[r][t]}});var oD=me((H1e,nD)=>{"use strict";var Sre=Yy(),kre=P_(),Cre=Ny().getGraphDiv,Ere=Iy(),$5=nD.exports={};$5.wrapped=function(e,t,r){e=Cre(e),e._fullLayout&&kre.clear(e._fullLayout._uid+Ere.HOVERID),$5.raw(e,t,r)};$5.raw=function(t,r){var i=t._fullLayout,a=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&Sre.triggerHandler(t,"plotly_beforehover",r)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&a&&t.emit("plotly_unhover",{event:r,points:a}))}});var jl=me((G1e,fD)=>{"use strict";var Lre=QL(),e4=Cw(),Dre=Q5(),Pre=Bt().removeElement,zre=eo(),Ld=fD.exports={};Ld.align=tD();Ld.getCursor=iD();var lD=oD();Ld.unhover=lD.wrapped;Ld.unhoverRaw=lD.raw;Ld.init=function(t){var r=t.gd,i=1,a=r._context.doubleClickDelay,s=t.element,l,f,h,v,m,_,T,M;r._mouseDownTime||(r._mouseDownTime=0),s.style.pointerEvents="all",s.onmousedown=L,Dre?(s._ontouchstart&&s.removeEventListener("touchstart",s._ontouchstart),s._ontouchstart=L,s.addEventListener("touchstart",L,{passive:!1})):s.ontouchstart=L;function C(q,z,N){return Math.abs(q)<N&&(q=0),Math.abs(z)<N&&(z=0),[q,z]}var E=t.clampFn||C;function L(q){r._dragged=!1,r._dragging=!0;var z=sD(q);l=z[0],f=z[1],T=q.target,_=q,M=q.buttons===2||q.ctrlKey,typeof q.clientX=="undefined"&&typeof q.clientY=="undefined"&&(q.clientX=l,q.clientY=f),h=new Date().getTime(),h-r._mouseDownTime<a?i+=1:(i=1,r._mouseDownTime=h),t.prepFn&&t.prepFn(q,l,f),e4&&!M?(m=uD(),m.style.cursor=window.getComputedStyle(s).cursor):e4||(m=document,v=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(s).cursor),document.addEventListener("mouseup",O),document.addEventListener("touchend",O),t.dragmode!==!1&&(q.preventDefault(),document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}))}function I(q){q.preventDefault();var z=sD(q),N=t.minDrag||zre.MINDRAG,H=E(z[0]-l,z[1]-f,N),V=H[0],W=H[1];(V||W)&&(r._dragged=!0,Ld.unhover(r,q)),r._dragged&&t.moveFn&&!M&&(r._dragdata={element:s,dx:V,dy:W},t.moveFn(V,W))}function O(q){if(delete r._dragdata,t.dragmode!==!1&&(q.preventDefault(),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I)),document.removeEventListener("mouseup",O),document.removeEventListener("touchend",O),e4?Pre(m):v&&(m.documentElement.style.cursor=v,v=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>a&&(i=Math.max(i-1,1)),r._dragged)t.doneFn&&t.doneFn();else{var z;_.target===T?z=_:(z={target:T,srcElement:T,toElement:T},Object.keys(_).concat(Object.keys(_.__proto__)).forEach(N=>{var H=_[N];!z[N]&&typeof H!="function"&&(z[N]=H)})),t.clickFn&&t.clickFn(i,z),M||T.dispatchEvent(new MouseEvent("click",q))}r._dragging=!1,r._dragged=!1}};function uD(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}Ld.coverSlip=uD;function sD(e){return Lre(e.changedTouches?e.changedTouches[0]:e,document.body)}});var Wh=me((Z1e,cD)=>{"use strict";cD.exports=function(t,r){(t.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&t.classed(i,!1)}),r&&t.classed("cursor-"+r,!0)}});var dD=me((Y1e,vD)=>{"use strict";var t4=Wh(),cg="data-savedcursor",hD="!!";vD.exports=function(t,r){var i=t.attr(cg);if(r){if(!i){for(var a=(t.attr("class")||"").split(" "),s=0;s<a.length;s++){var l=a[s];l.indexOf("cursor-")===0&&t.attr(cg,l.slice(7)).classed(l,!1)}t.attr(cg)||t.attr(cg,hD)}t4(t,r)}else i&&(t.attr(cg,null),i===hD?t4(t):t4(t,i))}});var a4=me((W1e,pD)=>{"use strict";var r4=qo(),Ire=Sf();pD.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:Ire.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r4({editType:"legend"}),grouptitlefont:r4({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},titleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],editType:"legend"},titledoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r4({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}});var vg=me(hg=>{"use strict";hg.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};hg.isVertical=function(t){return t.orientation!=="h"};hg.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1};hg.getId=function(t){return t._id||"legend"}});var n4=me((j1e,mD)=>{"use strict";var P2=sa(),ll=Bt(),Rre=Ii(),Fre=ys(),qre=a4(),Nre=M0(),i4=vg();function Bre(e,t,r,i,a){var s=t[e]||{},l=Rre.newContainer(r,e);function f(pe,ke){return ll.coerce(s,l,qre,pe,ke)}var h=ll.coerceFont(f,"font",r.font);f("bgcolor",r.paper_bgcolor),f("bordercolor");var v=f("visible");if(!v)return;var m,_=function(pe,ke){var Ee=m._input,Xe=m;return ll.coerce(Ee,Xe,Fre,pe,ke)},T=r.font||{},M=ll.coerceFont(f,"grouptitlefont",T,{overrideDflt:{size:Math.round(T.size*1.1)}}),C=0,E=!1,L="normal",I=(r.shapes||[]).filter(function(pe){return pe.showlegend});function O(pe){return P2.traceIs(pe,"pie-like")&&pe._length!=null&&(Array.isArray(pe.legend)||Array.isArray(pe.showlegend))}i.filter(O).forEach(function(pe){pe.visible&&C++;for(var ke=0;ke<pe._length;ke++){var Ee=(Array.isArray(pe.legend)?pe.legend[ke]:pe.legend)||"legend";Ee===e&&((Array.isArray(pe.showlegend)?pe.showlegend[ke]:pe.showlegend)||pe._dfltShowLegend)&&(E=!0,C++)}if(e==="legend"&&pe._length>pe.legend.length)for(var Xe=pe.legend.length;Xe<pe._length;Xe++)E=!0,C++});for(var q=i.concat(I).filter(function(pe){return!O(m)&&e===(pe.legend||"legend")}),z=0;z<q.length;z++)if(m=q[z],!!m.visible){var N=m._isShape;(m.showlegend||m._dfltShowLegend&&!(m._module&&m._module.attributes&&m._module.attributes.showlegend&&m._module.attributes.showlegend.dflt===!1))&&(C++,m.showlegend&&(E=!0,(!N&&P2.traceIs(m,"pie-like")||m._input.showlegend===!0)&&C++),ll.coerceFont(_,"legendgrouptitle.font",M)),(!N&&P2.traceIs(m,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(m.fill)!==-1)&&(L=i4.isGrouped({traceorder:L})?"grouped+reversed":"reversed"),m.legendgroup!==void 0&&m.legendgroup!==""&&(L=i4.isReversed({traceorder:L})?"reversed+grouped":"grouped")}var H=ll.coerce(t,r,Nre,"showlegend",r.showlegend||E&&C>(e==="legend"?1:0));if(H===!1&&(r[e]=void 0),!(H===!1&&!s.uirevision)&&(f("uirevision",r.uirevision),H!==!1)){f("borderwidth");var V=f("orientation"),W=f("yref"),J=f("xref"),ee=V==="h",ie=W==="paper",oe=J==="paper",fe,le,Te,Se="left";ee?(fe=0,P2.getComponentMethod("rangeslider","isVisible")(t.xaxis)?ie?(le=1.1,Te="bottom"):(le=1,Te="top"):ie?(le=-.1,Te="top"):(le=0,Te="bottom")):(le=1,Te="auto",oe?fe=1.02:(fe=1,Se="right")),ll.coerce(s,l,{x:{valType:"number",editType:"legend",min:oe?-2:0,max:oe?3:1,dflt:fe}},"x"),ll.coerce(s,l,{y:{valType:"number",editType:"legend",min:ie?-2:0,max:ie?3:1,dflt:le}},"y"),f("traceorder",L),i4.isGrouped(r[e])&&f("tracegroupgap"),f("entrywidth"),f("entrywidthmode"),f("indentation"),f("itemsizing"),f("itemwidth"),f("itemclick"),f("itemdoubleclick"),f("groupclick"),f("xanchor",Se),f("yanchor",Te),f("maxheight"),f("valign"),ll.noneOrAll(s,l,["x","y"]);var Me=f("title.text");if(Me){f("title.side",ee?"left":"top");var Ae=ll.extendFlat({},h,{size:ll.bigFont(h.size)});ll.coerceFont(f,"title.font",Ae);let pe=a>1;f("titleclick",pe?"toggle":!1),f("titledoubleclick",pe?"toggleothers":!1)}}}mD.exports=function(t,r,i){var a,s=i.slice(),l=r.shapes;if(l)for(a=0;a<l.length;a++){var f=l[a];if(f.showlegend){var h={_input:f._input,visible:f.visible,showlegend:f.showlegend,legend:f.legend};s.push(h)}}var v=["legend"];for(a=0;a<s.length;a++)Array.isArray(s[a].legend)?v=v.concat(s[a].legend):ll.pushUnique(v,s[a].legend);for(r._legends=[],a=0;a<v.length;a++){var m=v[a];Bre(m,t,r,s,v.length),r[m]&&(r[m]._id=m),r._legends.push(m)}}});var l4=me(s4=>{"use strict";var Xh=sa(),o4=Bt(),Ore=o4.pushUnique,Ure=vg(),yD=!0;s4.handleItemClick=function(t,r,i,a){var s=r._fullLayout;if(r._dragged||r._editing)return;var l=t.data()[0][0];if(l.groupTitle&&l.noClick)return;var f=i.groupclick;a==="toggle"&&i.itemdoubleclick==="toggleothers"&&yD&&r.data&&r._context.showTips&&(o4.notifier(o4._(r,"Double-click on legend to isolate one trace"),"long"),yD=!1);var h=f==="togglegroup",v=s.hiddenlabels?s.hiddenlabels.slice():[],m=r._fullData,_=(s.shapes||[]).filter(function(wt){return wt.showlegend}),T=m.concat(_),M=l.trace;M._isShape&&(M=M._fullInput);var C=M.legendgroup,E,L,I,O,q,z,N={},H=[],V=[],W=[];function J(wt,xt){var qt=H.indexOf(wt),Ut=N.visible;return Ut||(Ut=N.visible=[]),H.indexOf(wt)===-1&&(H.push(wt),qt=H.length-1),Ut[qt]=xt,qt}var ee=(s.shapes||[]).map(function(wt){return wt._input}),ie=!1;function oe(wt,xt){ee[wt].visible=xt,ie=!0}function fe(wt,xt){if(!(l.groupTitle&&!h)){var qt=wt._fullInput||wt,Ut=qt._isShape,Dt=qt.index;Dt===void 0&&(Dt=qt._index);var Mt=qt.visible===!1?!1:xt;Ut?oe(Dt,Mt):J(Dt,Mt)}}var le=M.legend,Te=M._fullInput,Se=Te&&Te._isShape;if(!Se&&Xh.traceIs(M,"pie-like")){var Me=l.label,Ae=v.indexOf(Me);if(a==="toggle")Ae===-1?v.push(Me):v.splice(Ae,1);else if(a==="toggleothers"){var pe=Ae!==-1,ke=[];for(E=0;E<r.calcdata.length;E++){var Ee=r.calcdata[E];for(L=0;L<Ee.length;L++){var Xe=Ee[L],lt=Xe.label;le===Ee[0].trace.legend&&Me!==lt&&(v.indexOf(lt)===-1&&(pe=!0),Ore(v,lt),ke.push(lt))}}if(!pe)for(var it=0;it<ke.length;it++){var _t=v.indexOf(ke[it]);_t!==-1&&v.splice(_t,1)}}Xh.call("_guiRelayout",r,"hiddenlabels",v)}else{var Ye=C&&C.length,kt=[],st;if(Ye)for(E=0;E<T.length;E++)st=T[E],st.visible&&st.legendgroup===C&&kt.push(E);if(a==="toggle"){var dt;switch(M.visible){case!0:dt="legendonly";break;case!1:dt=!1;break;case"legendonly":dt=!0;break}if(Ye)if(h)for(E=0;E<T.length;E++){var It=T[E];It.visible!==!1&&It.legendgroup===C&&fe(It,dt)}else fe(M,dt);else fe(M,dt)}else if(a==="toggleothers"){var yt,de,ze,_e,Ue,at=!0;for(E=0;E<T.length;E++)if(Ue=T[E],yt=Ue===M,ze=Ue.showlegend!==!0,!(yt||ze)&&(de=Ye&&Ue.legendgroup===C,!de&&Ue.legend===le&&Ue.visible===!0&&!Xh.traceIs(Ue,"notLegendIsolatable"))){at=!1;break}for(E=0;E<T.length;E++)if(Ue=T[E],!(Ue.visible===!1||Ue.legend!==le)&&!Xh.traceIs(Ue,"notLegendIsolatable"))switch(M.visible){case"legendonly":fe(Ue,!0);break;case!0:_e=at?!0:"legendonly",yt=Ue===M,ze=Ue.showlegend!==!0&&!Ue.legendgroup,de=yt||Ye&&Ue.legendgroup===C,fe(Ue,de||ze?!0:_e);break}}for(E=0;E<V.length;E++)if(I=V[E],!!I){var Je=I.constructUpdate(),Ct=Object.keys(Je);for(L=0;L<Ct.length;L++)O=Ct[L],z=N[O]=N[O]||[],z[W[E]]=Je[O]}for(q=Object.keys(N),E=0;E<q.length;E++)for(O=q[E],L=0;L<H.length;L++)N[O].hasOwnProperty(L)||(N[O][L]=void 0);ie?Xh.call("_guiUpdate",r,N,{shapes:ee},H):Xh.call("_guiRestyle",r,N,H)}};s4.handleTitleClick=function(t,r,i){let a=t._fullLayout,s=t._fullData,l=Ure.getId(r),f=(a.shapes||[]).filter(function(I){return I.showlegend}),h=s.concat(f);function v(I){return(I.legend||"legend")===l}var m,_;if(i==="toggle")m=!h.some(function(O){return v(O)&&O.visible===!0}),_=!1;else{let I=h.some(function(O){return!v(O)&&O.visible===!0&&O.showlegend!==!1});m=!0,_=!I}let T={visible:[]},M=[],C=(a.shapes||[]).map(function(I){return I._input});for(var E=!1,L=0;L<h.length;L++){let I=h[L],O=v(I);if(!O){let N=I.showlegend!==!0&&!I.legendgroup;if(i==="toggle"||N)continue}let z=(O?m:_)?!0:"legendonly";I.visible!==!1&&I.visible!==z&&(I._isShape?(C[I._index].visible=z,E=!0):(M.push(I.index),T.visible.push(z)))}E?Xh.call("_guiUpdate",t,T,{shapes:C},M):M.length&&Xh.call("_guiRestyle",t,T,M)}});var u4=me((K1e,gD)=>{"use strict";gD.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}});var bD=me((Q1e,xD)=>{"use strict";var _D=sa(),f4=vg();xD.exports=function(t,r,i){var a=r._inHover,s=f4.isGrouped(r),l=f4.isReversed(r),f={},h=[],v=!1,m={},_=0,T=0,M,C;function E(pe,ke,Ee){if(r.visible!==!1&&!(i&&pe!==r._id))if(ke===""||!f4.isGrouped(r)){var Xe="~~i"+_;h.push(Xe),f[Xe]=[Ee],_++}else h.indexOf(ke)===-1?(h.push(ke),v=!0,f[ke]=[Ee]):f[ke].push(Ee)}for(M=0;M<t.length;M++){var L=t[M],I=L[0],O=I.trace,q=O.legend,z=O.legendgroup;if(!(!a&&(!O.visible||!O.showlegend)))if(_D.traceIs(O,"pie-like")){var N=Array.isArray(O.legend),H=Array.isArray(O.showlegend);for(m[z]||(m[z]={}),C=0;C<L.length;C++)if(!(H&&O.showlegend[L[C].i]===!1)){N&&(q=O.legend[L[C].i]||"legend");var V=L[C].label;m[z][V]||(E(q,z,{label:V,color:L[C].color,i:L[C].i,trace:O,pts:L[C].pts}),m[z][V]=!0,T=Math.max(T,(V||"").length))}}else E(q,z,I),T=Math.max(T,(O.name||"").length)}if(!h.length)return[];var W=!v||!s,J=[];for(M=0;M<h.length;M++){var ee=f[h[M]];W?J.push(ee[0]):J.push(ee)}for(W&&(J=[J]),M=0;M<J.length;M++){var ie=1/0;for(C=0;C<J[M].length;C++){var oe=J[M][C].trace.legendrank;ie>oe&&(ie=oe)}J[M][0]._groupMinRank=ie,J[M][0]._preGroupSort=M}var fe=function(pe,ke){return pe[0]._groupMinRank-ke[0]._groupMinRank||pe[0]._preGroupSort-ke[0]._preGroupSort},le=function(pe,ke){return pe.trace.legendrank-ke.trace.legendrank||pe._preSort-ke._preSort};for(J.forEach(function(pe,ke){pe[0]._preGroupSort=ke}),J.sort(fe),M=0;M<J.length;M++){J[M].forEach(function(pe,ke){pe._preSort=ke}),J[M].sort(le);var Te=J[M][0].trace,Se=null;for(C=0;C<J[M].length;C++){var Me=J[M][C].trace.legendgrouptitle;if(Me&&Me.text){Se=Me,a&&(Me.font=r._groupTitleFont);break}}if(l&&J[M].reverse(),Se){var Ae=!1;for(C=0;C<J[M].length;C++)if(_D.traceIs(J[M][C].trace,"pie-like")){Ae=!0;break}J[M].unshift({i:-1,groupTitle:Se,noClick:Ae,trace:{showlegend:Te.showlegend,legendgroup:Te.legendgroup,legend:Te.legend,visible:r.groupclick==="toggleitem"?!0:Te.visible}})}for(C=0;C<J[M].length;C++)J[M][C]=[J[M][C]]}return r._lgroupsLength=J.length,r._maxNameLength=T,J}});var c4=me(Dd=>{"use strict";var z2=Bt();function wD(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}Dd.formatPiePercent=function(t,r){var i=wD((t*100).toPrecision(3));return z2.numSeparate(i,r)+"%"};Dd.formatPieValue=function(t,r){var i=wD(t.toPrecision(10));return z2.numSeparate(i,r)};Dd.getFirstFilled=function(t,r){if(z2.isArrayOrTypedArray(t))for(var i=0;i<r.length;i++){var a=t[r[i]];if(a||a===0||a==="")return a}};Dd.castOption=function(t,r){if(z2.isArrayOrTypedArray(t))return Dd.getFirstFilled(t,r);if(t)return t};Dd.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}});var AD=me((e_e,TD)=>{"use strict";var Vre=xi(),Hre=Oa();TD.exports=function(t,r,i,a){var s=i.marker.pattern;s&&s.shape?Vre.pointStyle(t,i,a,r):Hre.fill(t,r.color)}});var CD=me((t_e,kD)=>{"use strict";var MD=Oa(),SD=c4().castOption,Gre=AD();kD.exports=function(t,r,i,a){var s=i.marker.line,l=SD(s.color,r.pts)||MD.defaultLine,f=SD(s.width,r.pts)||0;t.call(Gre,r,i,a).style("stroke-width",f).call(MD.stroke,l)}});var p4=me((r_e,ID)=>{"use strict";var is=ja(),h4=sa(),Oo=Bt(),ED=Oo.strTranslate,ul=xi(),Jl=Oa(),v4=Ef().extractOpts,I2=rs(),Zre=CD(),Yre=c4().castOption,Wre=u4(),LD=12,DD=5,Pd=2,Xre=10,J0=5;ID.exports=function(t,r,i){var a=r._fullLayout;i||(i=a.legend);var s=i.itemsizing==="constant",l=i.itemwidth,f=(l+Wre.itemGap*2)/2,h=ED(f,0),v=function(V,W,J,ee){var ie;if(V+1)ie=V;else if(W&&W.width>0)ie=W.width;else return 0;return s?ee:Math.min(ie,J)};t.each(function(V){var W=is.select(this),J=Oo.ensureSingle(W,"g","layers");J.style("opacity",V[0].trace.opacity);var ee=i.indentation,ie=i.valign,oe=V[0].lineHeight,fe=V[0].height;if(ie==="middle"&&ee===0||!oe||!fe)J.attr("transform",null);else{var le={top:1,bottom:-1}[ie],Te=le*(.5*(oe-fe+3))||0,Se=i.indentation;J.attr("transform",ED(Se,Te))}var Me=J.selectAll("g.legendfill").data([V]);Me.enter().append("g").classed("legendfill",!0);var Ae=J.selectAll("g.legendlines").data([V]);Ae.enter().append("g").classed("legendlines",!0);var pe=J.selectAll("g.legendsymbols").data([V]);pe.enter().append("g").classed("legendsymbols",!0),pe.selectAll("g.legendpoints").data([V]).enter().append("g").classed("legendpoints",!0)}).each(H).each(T).each(C).each(M).each(L).each(z).each(q).each(m).each(_).each(I).each(O);function m(V){var W=PD(V),J=W.showFill,ee=W.showLine,ie=W.showGradientLine,oe=W.showGradientFill,fe=W.anyFill,le=W.anyLine,Te=V[0],Se=Te.trace,Me,Ae,pe=v4(Se),ke=pe.colorscale,Ee=pe.reversescale,Xe=function(dt){if(dt.size())if(J)ul.fillGroupStyle(dt,r,!0);else{var It="legendfill-"+Se.uid;ul.gradient(dt,r,It,d4(Ee),ke,"fill")}},lt=function(dt){if(dt.size()){var It="legendline-"+Se.uid;ul.lineGroupStyle(dt),ul.gradient(dt,r,It,d4(Ee),ke,"stroke")}},it=I2.hasMarkers(Se)||!fe?"M5,0":le?"M5,-2":"M5,-3",_t=is.select(this),Ye=_t.select(".legendfill").selectAll("path").data(J||oe?[V]:[]);if(Ye.enter().append("path").classed("js-fill",!0),Ye.exit().remove(),Ye.attr("d",it+"h"+l+"v6h-"+l+"z").call(Xe),ee||ie){var kt=v(void 0,Se.line,Xre,DD);Ae=Oo.minExtend(Se,{line:{width:kt}}),Me=[Oo.minExtend(Te,{trace:Ae})]}var st=_t.select(".legendlines").selectAll("path").data(ee||ie?[Me]:[]);st.enter().append("path").classed("js-line",!0),st.exit().remove(),st.attr("d",it+(ie?"l"+l+",0.0001":"h"+l)).call(ee?ul.lineGroupStyle:lt)}function _(V){var W=PD(V),J=W.anyFill,ee=W.anyLine,ie=W.showLine,oe=W.showMarker,fe=V[0],le=fe.trace,Te=!oe&&!ee&&!J&&I2.hasText(le),Se,Me;function Ae(Ye,kt,st,dt){var It=Oo.nestedProperty(le,Ye).get(),yt=Oo.isArrayOrTypedArray(It)&&kt?kt(It):It;if(s&&yt&&dt!==void 0&&(yt=dt),st){if(yt<st[0])return st[0];if(yt>st[1])return st[1]}return yt}function pe(Ye){return fe._distinct&&fe.index&&Ye[fe.index]?Ye[fe.index]:Ye[0]}if(oe||Te||ie){var ke={},Ee={};if(oe){ke.mc=Ae("marker.color",pe),ke.mx=Ae("marker.symbol",pe),ke.mo=Ae("marker.opacity",Oo.mean,[.2,1]),ke.mlc=Ae("marker.line.color",pe),ke.mlw=Ae("marker.line.width",Oo.mean,[0,5],Pd),ke.mld=le._isShape?"solid":Ae("marker.line.dash",pe),Ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Xe=Ae("marker.size",Oo.mean,[2,16],LD);ke.ms=Xe,Ee.marker.size=Xe}ie&&(Ee.line={width:Ae("line.width",pe,[0,10],DD)}),Te&&(ke.tx="Aa",ke.tp=Ae("textposition",pe),ke.ts=10,ke.tc=Ae("textfont.color",pe),ke.tf=Ae("textfont.family",pe),ke.tw=Ae("textfont.weight",pe),ke.ty=Ae("textfont.style",pe),ke.tv=Ae("textfont.variant",pe),ke.tC=Ae("textfont.textcase",pe),ke.tE=Ae("textfont.lineposition",pe),ke.tS=Ae("textfont.shadow",pe)),Se=[Oo.minExtend(fe,ke)],Me=Oo.minExtend(le,Ee),Me.selectedpoints=null,Me.texttemplate=null}var lt=is.select(this).select("g.legendpoints"),it=lt.selectAll("path.scatterpts").data(oe?Se:[]);it.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",h),it.exit().remove(),it.call(ul.pointStyle,Me,r),oe&&(Se[0].mrc=3);var _t=lt.selectAll("g.pointtext").data(Te?Se:[]);_t.enter().append("g").classed("pointtext",!0).append("text").attr("transform",h),_t.exit().remove(),_t.selectAll("text").call(ul.textPointStyle,Me,r)}function T(V){var W=V[0].trace,J=W.type==="waterfall";if(V[0]._distinct&&J){var ee=V[0].trace[V[0].dir].marker;return V[0].mc=ee.color,V[0].mlw=ee.line.width,V[0].mlc=ee.line.color,E(V,this,"waterfall")}var ie=[];W.visible&&J&&(ie=V[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var oe=is.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ie);oe.enter().append("path").classed("legendwaterfall",!0).attr("transform",h).style("stroke-miterlimit",1),oe.exit().remove(),oe.each(function(fe){var le=is.select(this),Te=W[fe[0]].marker,Se=v(void 0,Te.line,J0,Pd);le.attr("d",fe[1]).style("stroke-width",Se+"px").call(Jl.fill,Te.color),Se&&le.call(Jl.stroke,Te.line.color)})}function M(V){E(V,this)}function C(V){E(V,this,"funnel")}function E(V,W,J){var ee=V[0].trace,ie=ee.marker||{},oe=ie.line||{},fe=ie.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",le=J?ee.visible&&ee.type===J:h4.traceIs(ee,"bar"),Te=is.select(W).select("g.legendpoints").selectAll("path.legend"+J).data(le?[V]:[]);Te.enter().append("path").classed("legend"+J,!0).attr("d",fe).attr("transform",h),Te.exit().remove(),Te.each(function(Se){var Me=is.select(this),Ae=Se[0],pe=v(Ae.mlw,ie.line,J0,Pd);Me.style("stroke-width",pe+"px");var ke=Ae.mcc;if(!i._inHover&&"mc"in Ae){var Ee=v4(ie),Xe=Ee.mid;Xe===void 0&&(Xe=(Ee.max+Ee.min)/2),ke=ul.tryColorscale(ie,"")(Xe)}var lt=ke||Ae.mc||ie.color,it=ie.pattern,_t=ul.getPatternAttr,Ye=it&&(_t(it.shape,0,"")||_t(it.path,0,""));if(Ye){var kt=_t(it.bgcolor,0,null),st=_t(it.fgcolor,0,null),dt=it.fgopacity,It=zD(it.size,8,10),yt=zD(it.solidity,.5,1),de="legend-"+ee.uid;Me.call(ul.pattern,"legend",r,de,Ye,It,yt,ke,it.fillmode,kt,st,dt)}else Me.call(Jl.fill,lt);pe&&Jl.stroke(Me,Ae.mlc||oe.color)})}function L(V){var W=V[0].trace,J=is.select(this).select("g.legendpoints").selectAll("path.legendbox").data(W.visible&&h4.traceIs(W,"box-violin")?[V]:[]);J.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),J.exit().remove(),J.each(function(){var ee=is.select(this);if((W.boxpoints==="all"||W.points==="all")&&Jl.opacity(W.fillcolor)===0&&Jl.opacity((W.line||{}).color)===0){var ie=Oo.minExtend(W,{marker:{size:s?LD:Oo.constrain(W.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});J.call(ul.pointStyle,ie,r)}else{var oe=v(void 0,W.line,J0,Pd);ee.style("stroke-width",oe+"px").call(Jl.fill,W.fillcolor),oe&&Jl.stroke(ee,W.line.color)}})}function I(V){var W=V[0].trace,J=is.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(W.visible&&W.type==="candlestick"?[V,V]:[]);J.enter().append("path").classed("legendcandle",!0).attr("d",function(ee,ie){return ie?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",h).style("stroke-miterlimit",1),J.exit().remove(),J.each(function(ee,ie){var oe=is.select(this),fe=W[ie?"increasing":"decreasing"],le=v(void 0,fe.line,J0,Pd);oe.style("stroke-width",le+"px").call(Jl.fill,fe.fillcolor),le&&Jl.stroke(oe,fe.line.color)})}function O(V){var W=V[0].trace,J=is.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(W.visible&&W.type==="ohlc"?[V,V]:[]);J.enter().append("path").classed("legendohlc",!0).attr("d",function(ee,ie){return ie?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",h).style("stroke-miterlimit",1),J.exit().remove(),J.each(function(ee,ie){var oe=is.select(this),fe=W[ie?"increasing":"decreasing"],le=v(void 0,fe.line,J0,Pd);oe.style("fill","none").call(ul.dashLine,fe.line.dash,le),le&&Jl.stroke(oe,fe.line.color)})}function q(V){N(V,this,"pie")}function z(V){N(V,this,"funnelarea")}function N(V,W,J){var ee=V[0],ie=ee.trace,oe=J?ie.visible&&ie.type===J:h4.traceIs(ie,J),fe=is.select(W).select("g.legendpoints").selectAll("path.legend"+J).data(oe?[V]:[]);if(fe.enter().append("path").classed("legend"+J,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),fe.exit().remove(),fe.size()){var le=ie.marker||{},Te=v(Yre(le.line.width,ee.pts),le.line,J0,Pd),Se="pieLike",Me=Oo.minExtend(ie,{marker:{line:{width:Te}}},Se),Ae=Oo.minExtend(ee,{trace:Me},Se);Zre(fe,Ae,Me,r)}}function H(V){var W=V[0].trace,J,ee=[];if(W.visible)switch(W.type){case"histogram2d":case"heatmap":ee=[["M-15,-2V4H15V-2Z"]],J=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":ee=[["M-6,-6V6H6V-6Z"]],J=!0;break;case"densitymapbox":case"densitymap":ee=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],J="radial";break;case"cone":ee=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],J=!1;break;case"streamtube":ee=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],J=!1;break;case"surface":ee=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],J=!0;break;case"mesh3d":ee=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],J=!1;break;case"volume":ee=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],J=!0;break;case"isosurface":ee=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],J=!1;break}var ie=is.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(ee);ie.enter().append("path").classed("legend3dandfriends",!0).attr("transform",h).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(oe,fe){var le=is.select(this),Te=v4(W),Se=Te.colorscale,Me=Te.reversescale,Ae=function(Xe){if(Xe.size()){var lt="legendfill-"+W.uid;ul.gradient(Xe,r,lt,d4(Me,J==="radial"),Se,"fill")}},pe;if(Se){if(!J){var Ee=Se.length;pe=fe===0?Se[Me?Ee-1:0][1]:fe===1?Se[Me?0:Ee-1][1]:Se[Math.floor((Ee-1)/2)][1]}}else{var ke=W.vertexcolor||W.facecolor||W.color;pe=Oo.isArrayOrTypedArray(ke)?ke[fe]||ke[0]:ke}le.attr("d",oe[0]),pe?le.call(Jl.fill,pe):le.call(Ae)})}};function d4(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function PD(e){var t=e[0].trace,r=t.contours,i=I2.hasLines(t),a=I2.hasMarkers(t),s=t.visible&&t.fill&&t.fill!=="none",l=!1,f=!1;if(r){var h=r.coloring;h==="lines"?l=!0:i=h==="none"||h==="heatmap"||r.showlines,r.type==="constraint"?s=r._operation!=="=":(h==="fill"||h==="heatmap")&&(f=!0)}return{showMarker:a,showLine:i,showFill:s,showGradientLine:l,showGradientFill:f,anyLine:i||l,anyFill:s||f}}function zD(e,t,r){return e&&Oo.isArrayOrTypedArray(e)?t:e>r?r:e}});var _4=me((a_e,HD)=>{"use strict";var gs=ja(),Dn=Bt(),y4=to(),zd=sa(),q2=Yy(),m4=jl(),Pn=xi(),dg=Oa(),Id=ro(),RD=l4().handleItemClick,FD=l4().handleTitleClick,Vn=u4(),g4=No(),UD=g4.LINE_SPACING,Q0=g4.FROM_TL,qD=g4.FROM_BR,ND=bD(),jre=p4(),$0=vg(),K0=1,Jre=/^legend[0-9]*$/;HD.exports=function(t,r){if(r)BD(t,r);else{var i=t._fullLayout,a=i._legends,s=i._infolayer.selectAll('[class^="legend"]');s.each(function(){var v=gs.select(this),m=v.attr("class"),_=m.split(" ")[0];_.match(Jre)&&a.indexOf(_)===-1&&v.remove()});for(var l=0;l<a.length;l++){var f=a[l],h=t._fullLayout[f];BD(t,h)}}};function Kre(e,t,r){if(!(t.title.side!=="top center"&&t.title.side!=="top right")){var i=t.title.font,a=i.size*UD,s=0,l=e.node(),f=Pn.bBox(l).width;t.title.side==="top center"?s=.5*(t._width-2*r-2*Vn.titlePad-f):t.title.side==="top right"&&(s=t._width-2*r-2*Vn.titlePad-f),Id.positionText(e,r+Vn.titlePad+s,r+a)}}function BD(e,t){var r=t||{},i=e._fullLayout,a=$0.getId(r),s,l,f=r._inHover;if(f?(l=r.layer,s="hover"):(l=i._infolayer,s=a),!!l){s+=i._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0);var h;if(f){if(!r.entries)return;h=ND(r.entries,r)}else{for(var v=(e.calcdata||[]).slice(),m=i.shapes,_=0;_<m.length;_++){var T=m[_];if(T.showlegend){var M={_isShape:!0,_fullInput:T,index:T._index,name:T.name||T.label.text||"shape "+T._index,legend:T.legend,legendgroup:T.legendgroup,legendgrouptitle:T.legendgrouptitle,legendrank:T.legendrank,legendwidth:T.legendwidth,showlegend:T.showlegend,visible:T.visible,opacity:T.opacity,mode:T.type==="line"?"lines":"markers",line:T.line,marker:{line:T.line,color:T.fillcolor,size:12,symbol:T.type==="rect"?"square":T.type==="circle"?"circle":"hexagon2"}};v.push([{trace:M}])}}h=i.showlegend&&ND(v,r,i._legends.length>1)}var C=i.hiddenlabels||[];if(!f&&(!i.showlegend||!h.length))return l.selectAll("."+a).remove(),i._topdefs.select("#"+s).remove(),y4.autoMargin(e,a);var E=Dn.ensureSingle(l,"g",a,function(W){f||W.attr("pointer-events","all")}),L=Dn.ensureSingleById(i._topdefs,"clipPath",s,function(W){W.append("rect")}),I=Dn.ensureSingle(E,"rect","bg",function(W){W.attr("shape-rendering","crispEdges")});I.call(dg.stroke,r.bordercolor).call(dg.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var O=Dn.ensureSingle(E,"g","scrollbox"),q=r.title;r._titleWidth=0,r._titleHeight=0;var z;q.text?(z=Dn.ensureSingle(O,"text",a+"titletext"),z.attr("text-anchor","start").call(Pn.font,q.font).text(q.text),F2(z,O,e,r,K0),!f&&(r.titleclick||r.titledoubleclick)&&eae(O,e,r,a)):(O.selectAll("."+a+"titletext").remove(),O.selectAll("."+a+"titletoggle").remove());var N=Dn.ensureSingle(E,"rect","scrollbar",function(W){W.attr(Vn.scrollBarEnterAttrs).call(dg.fill,Vn.scrollBarColor)}),H=O.selectAll("g.groups").data(h);H.enter().append("g").attr("class","groups"),H.exit().remove();var V=H.selectAll("g.traces").data(Dn.identity);V.enter().append("g").attr("class","traces"),V.exit().remove(),V.style("opacity",function(W){let J=W[0],ee=J.trace;if(J.groupTitle){let ie=ee.legendgroup,oe=(i.shapes||[]).filter(function(le){return le.showlegend});return e._fullData.concat(oe).some(function(le){return le.legendgroup===ie&&(le.legend||"legend")===a&&le.visible===!0})?1:.5}return zd.traceIs(ee,"pie-like")?C.indexOf(W[0].label)!==-1?.5:1:ee.visible==="legendonly"?.5:1}).each(function(){gs.select(this).call(Qre,e,r)}).call(jre,e,r).each(function(W){f||W[0].groupTitle&&r.groupclick==="toggleitem"||gs.select(this).call($re,e,a)}),Dn.syncOrAsync([y4.previousPromises,function(){return aae(e,H,V,r,O)},function(){var W=i._size,J=r.borderwidth,ee=r.xref==="paper",ie=r.yref==="paper";if(q.text){let Ue=(i.shapes||[]).filter(function(Je){return Je.showlegend}),at=e._fullData.concat(Ue).some(function(Je){let Ct=Je.legend||"legend";var wt=Array.isArray(Ct)?Ct.includes(a):Ct===a;return wt&&Je.visible===!0});z.style("opacity",at?1:.5)}if(!f){var oe,fe;ee?oe=W.l+W.w*r.x-Q0[N2(r)]*r._width:oe=i.width*r.x-Q0[N2(r)]*r._width,ie?fe=W.t+W.h*(1-r.y)-Q0[B2(r)]*r._effHeight:fe=i.height*(1-r.y)-Q0[B2(r)]*r._effHeight;var le=iae(e,a,oe,fe);if(le)return;if(i.margin.autoexpand){var Te=oe,Se=fe;oe=ee?Dn.constrain(oe,0,i.width-r._width):Te,fe=ie?Dn.constrain(fe,0,i.height-r._effHeight):Se,oe!==Te&&Dn.log("Constrain "+a+".x to make legend fit inside graph"),fe!==Se&&Dn.log("Constrain "+a+".y to make legend fit inside graph")}Pn.setTranslate(E,oe,fe)}if(N.on(".drag",null),E.on("wheel",null),f||r._height<=r._maxHeight||e._context.staticPlot){var Me=r._effHeight;f&&(Me=r._height),I.attr({width:r._width-J,height:Me-J,x:J/2,y:J/2}),Pn.setTranslate(O,0,0),L.select("rect").attr({width:r._width-2*J,height:Me-2*J,x:J,y:J}),Pn.setClipUrl(O,s,e),Pn.setRect(N,0,0,0,0),delete r._scrollY}else{var Ae=Math.max(Vn.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),pe=r._effHeight-Ae-2*Vn.scrollBarMargin,ke=r._height-r._effHeight,Ee=pe/ke,Xe=Math.min(r._scrollY||0,ke);I.attr({width:r._width-2*J+Vn.scrollBarWidth+Vn.scrollBarMargin,height:r._effHeight-J,x:J/2,y:J/2}),L.select("rect").attr({width:r._width-2*J+Vn.scrollBarWidth+Vn.scrollBarMargin,height:r._effHeight-2*J,x:J,y:J+Xe}),Pn.setClipUrl(O,s,e),It(Xe,Ae,Ee),E.on("wheel",function(){Xe=Dn.constrain(r._scrollY+gs.event.deltaY/ke*pe,0,ke),It(Xe,Ae,Ee),Xe!==0&&Xe!==ke&&gs.event.preventDefault()});var lt,it,_t,Ye=function(Ue,at,Je){var Ct=(Je-at)/Ee+Ue;return Dn.constrain(Ct,0,ke)},kt=function(Ue,at,Je){var Ct=(at-Je)/Ee+Ue;return Dn.constrain(Ct,0,ke)},st=gs.behavior.drag().on("dragstart",function(){var Ue=gs.event.sourceEvent;Ue.type==="touchstart"?lt=Ue.changedTouches[0].clientY:lt=Ue.clientY,_t=Xe}).on("drag",function(){var Ue=gs.event.sourceEvent;Ue.buttons===2||Ue.ctrlKey||(Ue.type==="touchmove"?it=Ue.changedTouches[0].clientY:it=Ue.clientY,Xe=Ye(_t,lt,it),It(Xe,Ae,Ee))});N.call(st);var dt=gs.behavior.drag().on("dragstart",function(){var Ue=gs.event.sourceEvent;Ue.type==="touchstart"&&(lt=Ue.changedTouches[0].clientY,_t=Xe)}).on("drag",function(){var Ue=gs.event.sourceEvent;Ue.type==="touchmove"&&(it=Ue.changedTouches[0].clientY,Xe=kt(_t,lt,it),It(Xe,Ae,Ee))});O.call(dt)}function It(Ue,at,Je){r._scrollY=e._fullLayout[a]._scrollY=Ue,Pn.setTranslate(O,0,-Ue),Pn.setRect(N,r._width,Vn.scrollBarMargin+Ue*Je,Vn.scrollBarWidth,at),L.select("rect").attr("y",J+Ue)}if(e._context.edits.legendPosition){var yt,de,ze,_e;E.classed("cursor-move",!0),m4.init({element:E.node(),gd:e,prepFn:function(Ue){if(Ue.target!==N.node()){var at=Pn.getTranslate(E);ze=at.x,_e=at.y}},moveFn:function(Ue,at){if(ze!==void 0&&_e!==void 0){var Je=ze+Ue,Ct=_e+at;Pn.setTranslate(E,Je,Ct),yt=m4.align(Je,r._width,W.l,W.l+W.w,r.xanchor),de=m4.align(Ct+r._height,-r._height,W.t+W.h,W.t,r.yanchor)}},doneFn:function(){if(yt!==void 0&&de!==void 0){var Ue={};Ue[a+".x"]=yt,Ue[a+".y"]=de,zd.call("_guiRelayout",e,Ue)}},clickFn:function(Ue,at){var Je=l.selectAll("g.traces").filter(function(){var Ct=this.getBoundingClientRect();return at.clientX>=Ct.left&&at.clientX<=Ct.right&&at.clientY>=Ct.top&&at.clientY<=Ct.bottom});Je.size()>0&&VD(e,r,Je,Ue,at)}})}}],e)}}function R2(e,t,r){var i=e[0],a=i.width,s=t.entrywidthmode,l=i.trace.legendwidth||t.entrywidth;return s==="fraction"?t._maxWidth*l:r+(l||a)}function VD(e,t,r,i,a){var s=e._fullLayout,l=r.data()[0][0].trace,f=t.itemclick,h=t.itemdoubleclick,v={event:a,node:r.node(),curveNumber:l.index,expandedIndex:l.index,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:s};l._group&&(v.group=l._group),zd.traceIs(l,"pie-like")&&(v.label=r.datum()[0].label);var m=q2.triggerHandler(e,"plotly_legendclick",v);if(i===1){if(m===!1)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&f&&RD(r,e,t,f)},e._context.doubleClickDelay)}else if(i===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var _=q2.triggerHandler(e,"plotly_legenddoubleclick",v);_!==!1&&m!==!1&&h&&RD(r,e,t,h)}}function Qre(e,t,r){var i=$0.getId(r),a=e.data()[0][0],s=a.trace,l=zd.traceIs(s,"pie-like"),f=!r._inHover&&t._context.edits.legendText&&!l,h=r._maxNameLength,v,m;a.groupTitle?(v=a.groupTitle.text,m=a.groupTitle.font):(m=r.font,r.entries?v=a.text:(v=l?a.label:s.name,s._meta&&(v=Dn.templateString(v,s._meta))));var _=Dn.ensureSingle(e,"text",i+"text");_.attr("text-anchor","start").call(Pn.font,m).text(f?OD(v,h):v);var T=r.indentation+r.itemwidth+Vn.itemGap*2;Id.positionText(_,T,0),f?_.call(Id.makeEditable,{gd:t,text:v}).call(F2,e,t,r).on("edit",function(M){this.text(OD(M,h)).call(F2,e,t,r);var C=a.trace._fullInput||{},E={};return E.name=M,C._isShape?zd.call("_guiRelayout",t,"shapes["+s.index+"].name",E.name):zd.call("_guiRestyle",t,E,s.index)}):F2(_,e,t,r)}function OD(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var i=r-e.length;i>0;i--)e+=" ";return e}function $re(e,t,r){var i=t._context.doubleClickDelay,a,s=1,l=Dn.ensureSingle(e,"rect",r+"toggle",function(f){t._context.staticPlot||f.style("cursor","pointer").attr("pointer-events","all"),f.call(dg.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(l.on("mousedown",function(){a=new Date().getTime(),a-t._legendMouseDownTime<i?s+=1:(s=1,t._legendMouseDownTime=a)}),l.on("mouseup",function(){if(!(t._dragged||t._editing)){var f=t._fullLayout[r];new Date().getTime()-t._legendMouseDownTime>i&&(s=Math.max(s-1,1)),VD(t,f,e,s,gs.event)}}))}function eae(e,t,r,i){if(t._fullData.some(function(v){let m=v.legend||"legend";return(Array.isArray(m)?m.includes(i):m===i)&&zd.traceIs(v,"pie-like")}))return;let s=t._context.doubleClickDelay;var l,f=1;let h=Dn.ensureSingle(e,"rect",i+"titletoggle",function(v){t._context.staticPlot||v.style("cursor","pointer").attr("pointer-events","all"),v.call(dg.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(h.on("mousedown",function(){l=new Date().getTime(),l-t._legendMouseDownTime<s?f+=1:(f=1,t._legendMouseDownTime=l)}),h.on("mouseup",function(){if(t._dragged||t._editing)return;new Date().getTime()-t._legendMouseDownTime>s&&(f=Math.max(f-1,1));let v={event:gs.event,legendId:i,data:t.data,layout:t.layout,fullData:t._fullData,fullLayout:t._fullLayout};if(f===1&&r.titleclick){if(q2.triggerHandler(t,"plotly_legendtitleclick",v)===!1)return;r._titleClickTimeout=setTimeout(function(){t._fullLayout&&FD(t,r,r.titleclick)},s)}else f===2&&(r._titleClickTimeout&&clearTimeout(r._titleClickTimeout),t._legendMouseDownTime=0,q2.triggerHandler(t,"plotly_legendtitledoubleclick",v)!==!1&&r.titledoubleclick&&FD(t,r,r.titledoubleclick))}))}function F2(e,t,r,i,a){i._inHover&&e.attr("data-notex",!0),Id.convertToTspans(e,r,function(){tae(t,r,i,a)})}function tae(e,t,r,i){var a=e.data()[0][0],s=a&&a.trace.showlegend;if(Array.isArray(s)&&(s=s[a.i]!==!1),!r._inHover&&a&&!s){e.remove();return}var l=e.select("g[class*=math-group]"),f=l.node(),h=$0.getId(r);r||(r=t._fullLayout[h]);var v=r.borderwidth,m;i===K0?m=r.title.font:a.groupTitle?m=a.groupTitle.font:m=r.font;var _=m.size*UD,T,M;if(f){var C=Pn.bBox(f);T=C.height,M=C.width,i===K0?Pn.setTranslate(l,v,v+T*.75):Pn.setTranslate(l,0,T*.25)}else{var E="."+h+(i===K0?"title":"")+"text",L=e.select(E),I=Id.lineCount(L),O=L.node();if(T=_*I,M=O?Pn.bBox(O).width:0,i===K0)r.title.side==="left"&&(M+=Vn.itemGap*2),Id.positionText(L,v+Vn.titlePad,v+_);else{var q=Vn.itemGap*2+r.indentation+r.itemwidth;a.groupTitle&&(q=Vn.itemGap,M-=r.indentation+r.itemwidth),Id.positionText(L,q,-_*((I-1)/2-.3))}}i===K0?(r._titleWidth=M,r._titleHeight=T):(a.lineHeight=_,a.height=Math.max(T,16)+3,a.width=M)}function rae(e){var t=0,r=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(t=e._titleWidth),i.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function aae(e,t,r,i,a){var s=e._fullLayout,l=$0.getId(i);i||(i=s[l]);var f=s._size,h=$0.isVertical(i),v=$0.isGrouped(i),m=i.entrywidthmode==="fraction",_=i.borderwidth,T=2*_,M=Vn.itemGap,C=i.indentation+i.itemwidth+M*2,E=2*(_+M),L=B2(i),I=i.y<0||i.y===0&&L==="top",O=i.y>1||i.y===1&&L==="bottom",q=i.tracegroupgap,z={};let{orientation:N,yref:H}=i,{maxheight:V}=i,W=I||O||N!=="v"||H!=="paper";V||(V=W?.5:1);let J=W?s.height:f.h;i._maxHeight=Math.max(V>1?V:V*J,30);var ee=0;i._width=0,i._height=0;var ie=rae(i);if(h)r.each(function(Ue){var at=Ue[0].height;Pn.setTranslate(this,_+ie[0],_+ie[1]+i._height+at/2+M),i._height+=at,i._width=Math.max(i._width,Ue[0].width)}),ee=C+i._width,i._width+=M+C+T,i._height+=E,v&&(t.each(function(Ue,at){Pn.setTranslate(this,0,at*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var oe=N2(i),fe=i.x<0||i.x===0&&oe==="right",le=i.x>1||i.x===1&&oe==="left",Te=O||I,Se=s.width/2;i._maxWidth=Math.max(fe?Te&&oe==="left"?f.l+f.w:Se:le?Te&&oe==="right"?f.r+f.w:Se:f.w,2*C);var Me=0,Ae=0;r.each(function(Ue){var at=R2(Ue,i,C);Me=Math.max(Me,at),Ae+=at}),ee=null;var pe=0;if(v){var ke=0,Ee=0,Xe=0;t.each(function(){var Ue=0,at=0;gs.select(this).selectAll("g.traces").each(function(Ct){var wt=R2(Ct,i,C),xt=Ct[0].height;Pn.setTranslate(this,ie[0],ie[1]+_+M+xt/2+at),at+=xt,Ue=Math.max(Ue,wt),z[Ct[0].trace.legendgroup]=Ue});var Je=Ue+M;Ee>0&&Je+_+Ee>i._maxWidth?(pe=Math.max(pe,Ee),Ee=0,Xe+=ke+q,ke=at):ke=Math.max(ke,at),Pn.setTranslate(this,Ee,Xe),Ee+=Je}),i._width=Math.max(pe,Ee)+_,i._height=Xe+ke+E}else{var lt=r.size(),it=Ae+T+(lt-1)*M<i._maxWidth,_t=0,Ye=0,kt=0,st=0;r.each(function(Ue){var at=Ue[0].height,Je=R2(Ue,i,C,v),Ct=it?Je:Me;m||(Ct+=M),Ct+_+Ye-M>=i._maxWidth&&(pe=Math.max(pe,st),Ye=0,kt+=_t,i._height+=_t,_t=0),Pn.setTranslate(this,ie[0]+_+Ye,ie[1]+_+kt+at/2+M),st=Ye+Je+M,Ye+=Ct,_t=Math.max(_t,at)}),it?(i._width=Ye+T,i._height=_t+E):(i._width=Math.max(pe,st)+T,i._height+=_t+E)}}i._width=Math.ceil(Math.max(i._width+ie[0],i._titleWidth+2*(_+Vn.titlePad))),i._height=Math.ceil(Math.max(i._height+ie[1],i._titleHeight+2*(_+Vn.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var dt=e._context.edits,It=dt.legendText||dt.legendPosition;r.each(function(Ue){var at=gs.select(this).select("."+l+"toggle"),Je=Ue[0].height,Ct=Ue[0].trace.legendgroup,wt=R2(Ue,i,C);v&&Ct!==""&&(wt=z[Ct]);var xt=It?C:ee||wt;!h&&!m&&(xt+=M/2),Pn.setRect(at,0,-Je/2,xt,Je)});var yt=a.select("."+l+"titletext");yt.node()&&Kre(yt,i,_);var de=a.select("."+l+"titletoggle");if(de.size()&&yt.node()){var ze=yt.attr("x")||0,_e=Vn.titlePad;Pn.setRect(de,ze-_e,_,i._titleWidth+2*_e,i._titleHeight+2*_e)}}function iae(e,t,r,i){var a=e._fullLayout,s=a[t],l=N2(s),f=B2(s),h=s.xref==="paper",v=s.yref==="paper";e._fullLayout._reservedMargin[t]={};var m=s.y<.5?"b":"t",_=s.x<.5?"l":"r",T={r:a.width-r,l:r+s._width,b:a.height-i,t:i+s._effHeight};if(h&&v)return y4.autoMargin(e,t,{x:s.x,y:s.y,l:s._width*Q0[l],r:s._width*qD[l],b:s._effHeight*qD[f],t:s._effHeight*Q0[f]});h?e._fullLayout._reservedMargin[t][m]=T[m]:v||s.orientation==="v"?e._fullLayout._reservedMargin[t][_]=T[_]:e._fullLayout._reservedMargin[t][m]=T[m]}function N2(e){return Dn.isRightAnchor(e)?"right":Dn.isCenterAnchor(e)?"center":"left"}function B2(e){return Dn.isBottomAnchor(e)?"bottom":Dn.isMiddleAnchor(e)?"middle":"top"}});var T4=me(w4=>{"use strict";var Rd=ja(),Cc=Da(),GD=Mf(),cn=Bt(),nae=cn.pushUnique,x4=cn.strTranslate,oae=cn.strRotate,sae=Yy(),Kl=ro(),lae=dD(),Ff=xi(),io=Oa(),O2=jl(),qf=Xi(),uae=eo().zindexSeparator,tm=sa(),Ou=kc(),Fd=Iy(),fae=n4(),cae=_4(),QD=Fd.YANGLE,b4=Math.PI*QD/180,hae=1/Math.sin(b4),vae=Math.cos(b4),dae=Math.sin(b4),ji=Fd.HOVERARROWSIZE,Fa=Fd.HOVERTEXTPAD,ZD={box:!0,ohlc:!0,violin:!0,candlestick:!0},pae={scatter:!0,scattergl:!0,splom:!0};function YD(e,t){return e.distance-t.distance}w4.hover=function(t,r,i,a){t=cn.getGraphDiv(t);var s=r.target;cn.throttle(t._fullLayout._uid+Fd.HOVERID,Fd.HOVERMINTIME,function(){mae(t,r,i,a,s)})};w4.loneHover=function(t,r){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var a=r.gd,s=aP(a),l=iP(a),f=t.map(function(L){var I=L._x0||L.x0||L.x||0,O=L._x1||L.x1||L.x||0,q=L._y0||L.y0||L.y||0,z=L._y1||L.y1||L.y||0,N=L.eventData;if(N){var H=Math.min(I,O),V=Math.max(I,O),W=Math.min(q,z),J=Math.max(q,z),ee=L.trace;if(tm.traceIs(ee,"gl3d")){var ie=a._fullLayout[ee.scene]._scene.container,oe=ie.offsetLeft,fe=ie.offsetTop;H+=oe,V+=oe,W+=fe,J+=fe}N.bbox={x0:H+l,x1:V+l,y0:W+s,y1:J+s},r.inOut_bbox&&r.inOut_bbox.push(N.bbox)}else N=!1;return{color:L.color||io.defaultLine,x0:L.x0||L.x||0,x1:L.x1||L.x||0,y0:L.y0||L.y||0,y1:L.y1||L.y||0,xLabel:L.xLabel,yLabel:L.yLabel,zLabel:L.zLabel,text:L.text,name:L.name,idealAlign:L.idealAlign,borderColor:L.borderColor,fontFamily:L.fontFamily,fontSize:L.fontSize,fontColor:L.fontColor,fontWeight:L.fontWeight,fontStyle:L.fontStyle,fontVariant:L.fontVariant,nameLength:L.nameLength,textAlign:L.textAlign,trace:L.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:L.hovertemplate||!1,hovertemplateLabels:L.hovertemplateLabels||!1,eventData:N}}),h=!1,v=eP(f,{gd:a,hovermode:"closest",rotateLabels:h,bgColor:r.bgColor||io.background,container:Rd.select(r.container),outerContainer:r.outerContainer||r.container}),m=v.hoverLabels,_=5,T=0,M=0;m.sort(function(L,I){return L.y0-I.y0}).each(function(L,I){var O=L.y0-L.by/2;O-_<T?L.offset=T-O+_:L.offset=0,T=O+L.by+L.offset,I===r.anchorIndex&&(M=L.offset)}).each(function(L){L.offset-=M});var C=a._fullLayout._invScaleX,E=a._fullLayout._invScaleY;return rP(m,h,C,E),i?m:m.node()};function mae(e,t,r,i,a){r||(r="xy"),typeof r=="string"&&(r=r.split(uae)[0]);var s=Array.isArray(r)?r:[r],l,f=e._fullLayout,h=f.hoversubplots,v=f._plots||[],m=v[r],_=f._has("cartesian"),T=t.hovermode||f.hovermode,M=(T||"").charAt(0)==="x",C=(T||"").charAt(0)==="y",E,L;if(_&&(M||C)&&h==="axis"){for(var I=s.length,O=0;O<I;O++)if(l=s[O],v[l]){E=qf.getFromId(e,l,"x"),L=qf.getFromId(e,l,"y");var q=(M?E:L)._subplotsWith;if(q&&q.length)for(var z=0;z<q.length;z++)nae(s,q[z])}}if(m&&h!=="single"){var N=m.overlays.map(function(ir){return ir.id});s=s.concat(N)}for(var H=s.length,V=new Array(H),W=new Array(H),J=!1,ee=0;ee<H;ee++)if(l=s[ee],v[l])J=!0,V[ee]=v[l].xaxis,W[ee]=v[l].yaxis;else if(f[l]&&f[l]._subplot){var ie=f[l]._subplot;V[ee]=ie.xaxis,W[ee]=ie.yaxis}else{cn.warn("Unrecognized subplot: "+l);return}if(T&&!J&&(T="closest"),["x","y","closest","x unified","y unified"].indexOf(T)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return O2.unhoverRaw(e,t);var oe=f.hoverdistance;oe===-1&&(oe=1/0);var fe=f.spikedistance;fe===-1&&(fe=1/0);var le=[],Te=[],Se,Me,Ae,pe,ke,Ee,Xe,lt,it,_t,Ye,kt,st,dt={hLinePoint:null,vLinePoint:null},It=!1;if(Array.isArray(t))for(T="array",Ae=0;Ae<t.length;Ae++)ke=e.calcdata[t[Ae].curveNumber||0],ke&&(Ee=ke[0].trace,ke[0].trace.hoverinfo!=="skip"&&(Te.push(ke),Ee.orientation==="h"&&(It=!0)));else{var yt=e.calcdata.slice();for(yt.sort(function(ir,oi){var Sa=ir[0].trace.zorder||0,la=oi[0].trace.zorder||0;return Sa-la}),pe=0;pe<yt.length;pe++)ke=yt[pe],Ee=ke[0].trace,Ee.hoverinfo!=="skip"&&Ou.isTraceInSubplots(Ee,s)&&(Te.push(ke),Ee.orientation==="h"&&(It=!0));var de=!a,ze,_e;if(de)"xpx"in t?ze=t.xpx:ze=V[0]._length/2,"ypx"in t?_e=t.ypx:_e=W[0]._length/2;else{if(sae.triggerHandler(e,"plotly_beforehover",t)===!1)return;var Ue=a.getBoundingClientRect();ze=t.clientX-Ue.left,_e=t.clientY-Ue.top,f._calcInverseTransform(e);var at=cn.apply3DTransform(f._invTransform)(ze,_e);if(ze=at[0],_e=at[1],ze<0||ze>V[0]._length||_e<0||_e>W[0]._length)return O2.unhoverRaw(e,t)}if(t.pointerX=ze+V[0]._offset,t.pointerY=_e+W[0]._offset,"xval"in t?Se=Ou.flat(s,t.xval):Se=Ou.p2c(V,ze),"yval"in t?Me=Ou.flat(s,t.yval):Me=Ou.p2c(W,_e),!Cc(Se[0])||!Cc(Me[0]))return cn.warn("Fx.hover failed",t,e),O2.unhoverRaw(e,t)}var Je=1/0;function Ct(ir,oi){for(pe=0;pe<Te.length;pe++)if(ke=Te[pe],!(!ke||!ke[0]||!ke[0].trace)&&(Ee=ke[0].trace,!(Ee.visible!==!0||Ee._length===0)&&["carpet","contourcarpet"].indexOf(Ee._module.name)===-1)){if(it=T,Ou.isUnifiedHover(it)&&(it=it.charAt(0)),Ee.type==="splom"?(lt=0,Xe=s[lt]):(Xe=Ou.getSubplot(Ee),lt=s.indexOf(Xe)),kt={cd:ke,trace:Ee,xa:V[lt],ya:W[lt],maxHoverDistance:oe,maxSpikeDistance:fe,index:!1,distance:Math.min(Je,oe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:io.defaultLine,name:Ee.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},f[Xe]&&(kt.subplot=f[Xe]._subplot),f._splomScenes&&f._splomScenes[Ee.uid]&&(kt.scene=f._splomScenes[Ee.uid]),it==="array"){var Sa=t[pe];"pointNumber"in Sa?(kt.index=Sa.pointNumber,it="closest"):(it="","xval"in Sa&&(_t=Sa.xval,it="x"),"yval"in Sa&&(Ye=Sa.yval,it=it?"closest":"y"))}else ir!==void 0&&oi!==void 0?(_t=ir,Ye=oi):(_t=Se[lt],Ye=Me[lt]);if(st=le.length,oe!==0)if(Ee._module&&Ee._module.hoverPoints){var la=Ee._module.hoverPoints(kt,_t,Ye,it,{finiteRange:!0,hoverLayer:f._hoverlayer,hoversubplots:h,gd:e});if(la)for(var Ci,ma=0;ma<la.length;ma++)Ci=la[ma],Cc(Ci.x0)&&Cc(Ci.y0)&&le.push(xae(Ci,T))}else cn.log("Unrecognized trace type in hover:",Ee);if(T==="closest"&&le.length>st&&(le.splice(0,st),Je=le[0].distance),_&&fe!==0&&le.length===0){kt.distance=fe,kt.index=!1;var se=Ee._module.hoverPoints(kt,_t,Ye,"closest",{hoverLayer:f._hoverlayer});if(se&&(se=se.filter(function(et){return et.spikeDistance<=fe})),se&&se.length){var te,ue=se.filter(function(et){return et.xa.showspikes&&et.xa.spikesnap!=="hovered data"});if(ue.length){var he=ue[0];Cc(he.x0)&&Cc(he.y0)&&(te=xt(he),(!dt.vLinePoint||dt.vLinePoint.spikeDistance>te.spikeDistance)&&(dt.vLinePoint=te))}var Le=se.filter(function(et){return et.ya.showspikes&&et.ya.spikesnap!=="hovered data"});if(Le.length){var Ne=Le[0];Cc(Ne.x0)&&Cc(Ne.y0)&&(te=xt(Ne),(!dt.hLinePoint||dt.hLinePoint.spikeDistance>te.spikeDistance)&&(dt.hLinePoint=te))}}}}}Ct();function wt(ir,oi,Sa){for(var la=null,Ci=1/0,ma,se=0;se<ir.length;se++)E&&E._id!==ir[se].xa._id||L&&L._id!==ir[se].ya._id||(ma=ir[se].spikeDistance,Sa&&se===0&&(ma=-1/0),ma<=Ci&&ma<=oi&&(la=ir[se],Ci=ma));return la}function xt(ir){return ir?{xa:ir.xa,ya:ir.ya,x:ir.xSpike!==void 0?ir.xSpike:(ir.x0+ir.x1)/2,y:ir.ySpike!==void 0?ir.ySpike:(ir.y0+ir.y1)/2,distance:ir.distance,spikeDistance:ir.spikeDistance,curveNumber:ir.trace.index,color:ir.color,pointNumber:ir.index}:null}var qt={fullLayout:f,container:f._hoverlayer,event:t},Ut=e._spikepoints,Dt={vLinePoint:dt.vLinePoint,hLinePoint:dt.hLinePoint};e._spikepoints=Dt;var Mt=function(){var ir=le.filter(function(Sa){return E&&E._id===Sa.xa._id&&L&&L._id===Sa.ya._id}),oi=le.filter(function(Sa){return!(E&&E._id===Sa.xa._id&&L&&L._id===Sa.ya._id)});ir.sort(YD),oi.sort(YD),le=ir.concat(oi),le=wae(le,T)};Mt();var Zt=T.charAt(0),Yt=(Zt==="x"||Zt==="y")&&le[0]&&pae[le[0].trace.type];if(_&&fe!==0&&le.length!==0){var Be=le.filter(function(ir){return ir.ya.showspikes}),ut=wt(Be,fe,Yt);dt.hLinePoint=xt(ut);var sr=le.filter(function(ir){return ir.xa.showspikes}),Pr=wt(sr,fe,Yt);dt.vLinePoint=xt(Pr)}if(le.length===0){var Et=O2.unhoverRaw(e,t);return _&&(dt.hLinePoint!==null||dt.vLinePoint!==null)&&jD(Ut)&&XD(e,dt,qt),Et}if(_&&jD(Ut)&&XD(e,dt,qt),Ou.isXYhover(it)&&le[0].length!==0&&le[0].trace.type!=="splom"){var ht=le[0];ZD[ht.trace.type]?le=le.filter(ir=>ir.trace.index===ht.trace.index):le=[ht];var pt=le.length,Ot=KD("x",ht,f),er=KD("y",ht,f);Ct(Ot,er);var Ht=[],Kt={},pr=0,yr=function(ir){var oi=ZD[ir.trace.type]?$D(ir):ir.trace.index;if(!Kt[oi])pr++,Kt[oi]=pr,Ht.push(ir);else{var Sa=Kt[oi]-1,la=Ht[Sa];Sa>0&&Math.abs(ir.distance)<Math.abs(la.distance)&&(Ht[Sa]=ir)}},ur;for(ur=0;ur<pt;ur++)yr(le[ur]);for(ur=le.length-1;ur>pt-1;ur--)yr(le[ur]);le=Ht,Mt()}var Lt=e._hoverdata,Fe=[],Ve=aP(e),bt=iP(e);for(let ir of le){var Tt=Ou.makeEventData(ir,ir.trace,ir.cd);if(ir.hovertemplate!==!1){var mr=!1;ir.cd[ir.index]&&ir.cd[ir.index].ht&&(mr=ir.cd[ir.index].ht),ir.hovertemplate=mr||ir.trace.hovertemplate||!1}if(ir.xa&&ir.ya){var Ar=ir.x0+ir.xa._offset,Mr=ir.x1+ir.xa._offset,Gr=ir.y0+ir.ya._offset,pa=ir.y1+ir.ya._offset,Ca=Math.min(Ar,Mr),ii=Math.max(Ar,Mr),wi=Math.min(Gr,pa),vi=Math.max(Gr,pa);Tt.bbox={x0:Ca+bt,x1:ii+bt,y0:wi+Ve,y1:vi+Ve}}ir.eventData=[Tt],Fe.push(Tt)}e._hoverdata=Fe;var Fi=T==="y"&&(Te.length>1||le.length>1)||T==="closest"&&It&&le.length>1,Gi=io.combine(f.plot_bgcolor||io.background,f.paper_bgcolor),vn=eP(le,{gd:e,hovermode:T,rotateLabels:Fi,bgColor:Gi,container:f._hoverlayer,outerContainer:f._paper.node(),commonLabelOpts:f.hoverlabel,hoverdistance:f.hoverdistance}),nn=vn.hoverLabels;if(Ou.isUnifiedHover(T)||(gae(nn,Fi,f,vn.commonLabelBoundingBox),rP(nn,Fi,f._invScaleX,f._invScaleY)),a&&a.tagName){var Ki=tm.getComponentMethod("annotations","hasClickToShow")(e,Fe);lae(Rd.select(a),Ki?"pointer":"")}!a||i||!bae(e,t,Lt)||(Lt&&e.emit("plotly_unhover",{event:t,points:Lt}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:V,yaxes:W,xvals:Se,yvals:Me}))}function $D(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var yae=/<extra>([\s\S]*)<\/extra>/;function eP(e,t){var r=t.gd,i=r._fullLayout,a=t.hovermode,s=t.rotateLabels,l=t.bgColor,f=t.container,h=t.outerContainer,v=t.commonLabelOpts||{};if(e.length===0)return[[]];var m=t.fontFamily||Fd.HOVERFONT,_=t.fontSize||Fd.HOVERFONTSIZE,T=t.fontWeight||i.font.weight,M=t.fontStyle||i.font.style,C=t.fontVariant||i.font.variant,E=t.fontTextcase||i.font.textcase,L=t.fontLineposition||i.font.lineposition,I=t.fontShadow||i.font.shadow,O=e[0],q=O.xa,z=O.ya,N=a.charAt(0),H=N+"Label",V=O[H];if(V===void 0&&q.type==="multicategory")for(var W=0;W<e.length&&(V=e[W][H],V===void 0);W++);var J=em(r,h),ee=J.top,ie=J.width,oe=J.height,fe=V!==void 0&&O.distance<=t.hoverdistance&&(a==="x"||a==="y");if(fe){var le=!0,Te,Se;for(Te=0;Te<e.length;Te++)if(le&&e[Te].zLabel===void 0&&(le=!1),Se=e[Te].hoverinfo||e[Te].trace.hoverinfo,Se){var Me=Array.isArray(Se)?Se:Se.split("+");if(Me.indexOf("all")===-1&&Me.indexOf(a)===-1){fe=!1;break}}le&&(fe=!1)}var Ae=f.selectAll("g.axistext").data(fe?[0]:[]);Ae.enter().append("g").classed("axistext",!0),Ae.exit().remove();var pe={minX:0,maxX:0,minY:0,maxY:0};if(Ae.each(function(){var Et=Rd.select(this),ht=cn.ensureSingle(Et,"path","",function(vi){vi.style({"stroke-width":"1px"})}),pt=cn.ensureSingle(Et,"text","",function(vi){vi.attr("data-notex",1)}),Ot=v.bgcolor||io.defaultLine,er=v.bordercolor||io.contrast(Ot),Ht=io.contrast(Ot),Kt=v.font,pr={weight:Kt.weight||T,style:Kt.style||M,variant:Kt.variant||C,textcase:Kt.textcase||E,lineposition:Kt.lineposition||L,shadow:Kt.shadow||I,family:Kt.family||m,size:Kt.size||_,color:Kt.color||Ht};ht.style({fill:Ot,stroke:er}),pt.text(V).call(Ff.font,pr).call(Kl.positionText,0,0).call(Kl.convertToTspans,r),Et.attr("transform","");var yr=em(r,pt.node()),ur,Lt;if(a==="x"){var Fe=q.side==="top"?"-":"";pt.attr("text-anchor","middle").call(Kl.positionText,0,q.side==="top"?ee-yr.bottom-ji-Fa:ee-yr.top+ji+Fa),ur=q._offset+(O.x0+O.x1)/2,Lt=z._offset+(q.side==="top"?0:z._length);var Ve=yr.width/2+Fa,bt=ur;ur<Ve?bt=Ve:ur>i.width-Ve&&(bt=i.width-Ve),ht.attr("d","M"+(ur-bt)+",0L"+(ur-bt+ji)+","+Fe+ji+"H"+Ve+"v"+Fe+(Fa*2+yr.height)+"H"+-Ve+"V"+Fe+ji+"H"+(ur-bt-ji)+"Z"),ur=bt,pe.minX=ur-Ve,pe.maxX=ur+Ve,q.side==="top"?(pe.minY=Lt-(Fa*2+yr.height),pe.maxY=Lt-Fa):(pe.minY=Lt+Fa,pe.maxY=Lt+(Fa*2+yr.height))}else{var Tt,mr,Ar;z.side==="right"?(Tt="start",mr=1,Ar="",ur=q._offset+q._length):(Tt="end",mr=-1,Ar="-",ur=q._offset),Lt=z._offset+(O.y0+O.y1)/2,pt.attr("text-anchor",Tt),ht.attr("d","M0,0L"+Ar+ji+","+ji+"V"+(Fa+yr.height/2)+"h"+Ar+(Fa*2+yr.width)+"V-"+(Fa+yr.height/2)+"H"+Ar+ji+"V-"+ji+"Z"),pe.minY=Lt-(Fa+yr.height/2),pe.maxY=Lt+(Fa+yr.height/2),z.side==="right"?(pe.minX=ur+ji,pe.maxX=ur+ji+(Fa*2+yr.width)):(pe.minX=ur-ji-(Fa*2+yr.width),pe.maxX=ur-ji);var Mr=yr.height/2,Gr=ee-yr.top-Mr,pa="clip"+i._uid+"commonlabel"+z._id,Ca;if(ur<yr.width+2*Fa+ji){Ca="M-"+(ji+Fa)+"-"+Mr+"h-"+(yr.width-Fa)+"V"+Mr+"h"+(yr.width-Fa)+"Z";var ii=yr.width-ur+Fa;Kl.positionText(pt,ii,Gr),Tt==="end"&&pt.selectAll("tspan").each(function(){var vi=Rd.select(this),Fi=Ff.tester.append("text").text(vi.text()).call(Ff.font,pr),Gi=em(r,Fi.node());Math.round(Gi.width)<Math.round(yr.width)&&vi.attr("x",ii-Gi.width),Fi.remove()})}else Kl.positionText(pt,mr*(Fa+ji),Gr),Ca=null;var wi=i._topclips.selectAll("#"+pa).data(Ca?[0]:[]);wi.enter().append("clipPath").attr("id",pa).append("path"),wi.exit().remove(),wi.select("path").attr("d",Ca),Ff.setClipUrl(pt,Ca?pa:null,r)}Et.attr("transform",x4(ur,Lt))}),Ou.isUnifiedHover(a)){f.selectAll("g.hovertext").remove();let Et=e.filter(ht=>ht.hoverinfo!=="none");if(Et.length===0)return[];var ke=i.hoverlabel,Ee=ke.font,Xe=Et[0],lt=((a==="x unified"?Xe.xa:Xe.ya).unifiedhovertitle||{}).text,it=lt?cn.hovertemplateString({data:a==="x unified"?[{xa:Xe.xa,x:Xe.xVal}]:[{ya:Xe.ya,y:Xe.yVal}],fallback:Xe.trace.hovertemplatefallback,locale:i._d3locale,template:lt}):V,_t={showlegend:!0,legend:{title:{text:it,font:Ee},font:Ee,bgcolor:ke.bgcolor,bordercolor:ke.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},Ye={font:Ee};fae(_t,Ye,r._fullData);var kt=Ye.legend;kt.entries=[];for(var st=0;st<Et.length;st++){var dt=Et[st];if(dt.hoverinfo!=="none"){var It=WD(dt,!0,a,i,V),yt=It[0],de=It[1];dt.name=de,de!==""?dt.text=de+" : "+yt:dt.text=yt;var ze=dt.cd[dt.index];ze&&(ze.mc&&(dt.mc=ze.mc),ze.mcc&&(dt.mc=ze.mcc),ze.mlc&&(dt.mlc=ze.mlc),ze.mlcc&&(dt.mlc=ze.mlcc),ze.mlw&&(dt.mlw=ze.mlw),ze.mrc&&(dt.mrc=ze.mrc),ze.dir&&(dt.dir=ze.dir)),dt._distinct=!0,kt.entries.push([dt])}}kt.entries.sort(function(ht,pt){return ht[0].trace.index-pt[0].trace.index}),kt.layer=f,kt._inHover=!0,kt._groupTitleFont=ke.grouptitlefont,cae(r,kt);var _e=f.select("g.legend"),Ue=em(r,_e.node()),at=Ue.width+2*Fa,Je=Ue.height+2*Fa,Ct=Et[0],wt=(Ct.x0+Ct.x1)/2,xt=(Ct.y0+Ct.y1)/2,qt=!(tm.traceIs(Ct.trace,"bar-like")||tm.traceIs(Ct.trace,"box-violin")),Ut,Dt;N==="y"?qt?(Dt=xt-Fa,Ut=xt+Fa):(Dt=Math.min.apply(null,Et.map(function(ht){return Math.min(ht.y0,ht.y1)})),Ut=Math.max.apply(null,Et.map(function(ht){return Math.max(ht.y0,ht.y1)}))):Dt=Ut=cn.mean(Et.map(function(ht){return(ht.y0+ht.y1)/2}))-Je/2;var Mt,Zt;N==="x"?qt?(Mt=wt+Fa,Zt=wt-Fa):(Mt=Math.max.apply(null,Et.map(function(ht){return Math.max(ht.x0,ht.x1)})),Zt=Math.min.apply(null,Et.map(function(ht){return Math.min(ht.x0,ht.x1)}))):Mt=Zt=cn.mean(Et.map(function(ht){return(ht.x0+ht.x1)/2}))-at/2;var Yt=q._offset,Be=z._offset;Ut+=Be,Mt+=Yt,Zt+=Yt-at,Dt+=Be-Je;var ut,sr;return Mt+at<ie&&Mt>=0?ut=Mt:Zt+at<ie&&Zt>=0?ut=Zt:Yt+at<ie?ut=Yt:Mt-wt<wt-Zt+at?ut=ie-at:ut=0,ut+=Fa,Ut+Je<oe&&Ut>=0?sr=Ut:Dt+Je<oe&&Dt>=0?sr=Dt:Be+Je<oe?sr=Be:Ut-xt<xt-Dt+Je?sr=oe-Je:sr=0,sr+=Fa,_e.attr("transform",x4(ut-1,sr-1)),_e}var Pr=f.selectAll("g.hovertext").data(e,function(Et){return $D(Et)});return Pr.enter().append("g").classed("hovertext",!0).each(function(){var Et=Rd.select(this);Et.append("rect").call(io.fill,io.addOpacity(l,.8)),Et.append("text").classed("name",!0),Et.append("path").style("stroke-width","1px"),Et.append("text").classed("nums",!0).call(Ff.font,{weight:T,style:M,variant:C,textcase:E,lineposition:L,shadow:I,family:m,size:_})}),Pr.exit().remove(),Pr.each(function(Et){var ht=Rd.select(this).attr("transform",""),pt=Et.color;Array.isArray(pt)&&(pt=pt[Et.eventData[0].pointNumber]);var Ot=Et.bgcolor||pt,er=io.combine(io.opacity(Ot)?Ot:io.defaultLine,l),Ht=io.combine(io.opacity(pt)?pt:io.defaultLine,l),Kt=Et.borderColor||io.contrast(er),pr=WD(Et,fe,a,i,V,ht),yr=pr[0],ur=pr[1],Lt=ht.select("text.nums").call(Ff.font,{family:Et.fontFamily||m,size:Et.fontSize||_,color:Et.fontColor||Kt,weight:Et.fontWeight||T,style:Et.fontStyle||M,variant:Et.fontVariant||C,textcase:Et.fontTextcase||E,lineposition:Et.fontLineposition||L,shadow:Et.fontShadow||I}).text(yr).attr("data-notex",1).call(Kl.positionText,0,0).call(Kl.convertToTspans,r),Fe=ht.select("text.name"),Ve=0,bt=0;if(ur&&ur!==yr){Fe.call(Ff.font,{family:Et.fontFamily||m,size:Et.fontSize||_,color:Ht,weight:Et.fontWeight||T,style:Et.fontStyle||M,variant:Et.fontVariant||C,textcase:Et.fontTextcase||E,lineposition:Et.fontLineposition||L,shadow:Et.fontShadow||I}).text(ur).attr("data-notex",1).call(Kl.positionText,0,0).call(Kl.convertToTspans,r);var Tt=em(r,Fe.node());Ve=Tt.width+2*Fa,bt=Tt.height+2*Fa}else Fe.remove(),ht.select("rect").remove();ht.select("path").style({fill:er,stroke:Kt});var mr=Et.xa._offset+(Et.x0+Et.x1)/2,Ar=Et.ya._offset+(Et.y0+Et.y1)/2,Mr=Math.abs(Et.x1-Et.x0),Gr=Math.abs(Et.y1-Et.y0),pa=em(r,Lt.node()),Ca=pa.width/i._invScaleX,ii=pa.height/i._invScaleY;Et.ty0=(ee-pa.top)/i._invScaleY,Et.bx=Ca+2*Fa,Et.by=Math.max(ii+2*Fa,bt),Et.anchor="start",Et.txwidth=Ca,Et.tx2width=Ve,Et.offset=0;var wi=(Ca+ji+Fa+Ve)*i._invScaleX,vi,Fi;if(s)Et.pos=mr,vi=Ar+Gr/2+wi<=oe,Fi=Ar-Gr/2-wi>=0,(Et.idealAlign==="top"||!vi)&&Fi?(Ar-=Gr/2,Et.anchor="end"):vi?(Ar+=Gr/2,Et.anchor="start"):Et.anchor="middle",Et.crossPos=Ar;else{if(Et.pos=Ar,vi=mr+Mr/2+wi<=ie,Fi=mr-Mr/2-wi>=0,(Et.idealAlign==="left"||!vi)&&Fi)mr-=Mr/2,Et.anchor="end";else if(vi)mr+=Mr/2,Et.anchor="start";else{Et.anchor="middle";var Gi=wi/2,vn=mr+Gi-ie,nn=mr-Gi;vn>0&&(mr-=vn),nn<0&&(mr+=-nn)}Et.crossPos=mr}Lt.attr("text-anchor",Et.anchor),Ve&&Fe.attr("text-anchor",Et.anchor),ht.attr("transform",x4(mr,Ar)+(s?oae(QD):""))}),{hoverLabels:Pr,commonLabelBoundingBox:pe}}function WD(e,t,r,i,a,s){var _,T;var l="",f="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=cn.templateString(e.name,e.trace._meta)),l=JD(e.name,e.nameLength));var h=r.charAt(0),v=h==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(f+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(f+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&e.trace.type!=="choroplethmap"&&(f+=(f?"z: ":"")+e.zLabel)):t&&e[h+"Label"]===a?f=e[v+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(f=e.yLabel):e.yLabel===void 0?f=e.xLabel:f="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(f+=(f?"<br>":"")+e.text),e.extraText!==void 0&&(f+=(f?"<br>":"")+e.extraText),s&&f===""&&!e.hovertemplate&&(l===""&&s.remove(),f=l),(T=(_=e.trace)==null?void 0:_.hoverlabel)!=null&&T.split&&(e.hovertemplate="");let{hovertemplate:m=!1}=e;if(m){let M=e.hovertemplateLabels||e;e[h+"Label"]!==a&&(M[h+"other"]=M[h+"Val"],M[h+"otherLabel"]=M[h+"Label"]),f=cn.hovertemplateString({data:[e.eventData[0]||{},e.trace._meta],fallback:e.trace.hovertemplatefallback,labels:M,locale:i._d3locale,template:m}),f=f.replace(yae,(C,E)=>(l=JD(E,e.nameLength),""))}return[f,l]}function gae(e,t,r,i){var a=t?"xa":"ya",s=t?"ya":"xa",l=0,f=1,h=e.size(),v=new Array(h),m=0,_=i.minX,T=i.maxX,M=i.minY,C=i.maxY,E=function(Se){return Se*r._invScaleX},L=function(Se){return Se*r._invScaleY};e.each(function(Se){var Me=Se[a],Ae=Se[s],pe=Me._id.charAt(0)==="x",ke=Me.range;m===0&&ke&&ke[0]>ke[1]!==pe&&(f=-1);var Ee=0,Xe=pe?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var lt=tP(Se,t),it=Se.anchor,_t=it==="end"?-1:1,Ye,kt;if(it==="middle")Ye=Se.crossPos+(pe?L(lt.y-Se.by/2):E(Se.bx/2+Se.tx2width/2)),kt=Ye+(pe?L(Se.by):E(Se.bx));else if(pe)Ye=Se.crossPos+L(ji+lt.y)-L(Se.by/2-ji),kt=Ye+L(Se.by);else{var st=E(_t*ji+lt.x),dt=st+E(_t*Se.bx);Ye=Se.crossPos+Math.min(st,dt),kt=Se.crossPos+Math.max(st,dt)}pe?M!==void 0&&C!==void 0&&Math.min(kt,C)-Math.max(Ye,M)>1&&(Ae.side==="left"?(Ee=Ae._mainLinePosition,Xe=r.width):Xe=Ae._mainLinePosition):_!==void 0&&T!==void 0&&Math.min(kt,T)-Math.max(Ye,_)>1&&(Ae.side==="top"?(Ee=Ae._mainLinePosition,Xe=r.height):Xe=Ae._mainLinePosition)}v[m++]=[{datum:Se,traceIndex:Se.trace.index,dp:0,pos:Se.pos,posref:Se.posref,size:Se.by*(pe?hae:1)/2,pmin:Ee,pmax:Xe}]}),v.sort(function(Se,Me){return Se[0].posref-Me[0].posref||f*(Me[0].traceIndex-Se[0].traceIndex)});var I,O,q,z,N,H,V;function W(Se){var Me=Se[0],Ae=Se[Se.length-1];if(O=Me.pmin-Me.pos-Me.dp+Me.size,q=Ae.pos+Ae.dp+Ae.size-Me.pmax,O>.01){for(N=Se.length-1;N>=0;N--)Se[N].dp+=O;I=!1}if(!(q<.01)){if(O<-.01){for(N=Se.length-1;N>=0;N--)Se[N].dp-=q;I=!1}if(I){var pe=0;for(z=0;z<Se.length;z++)H=Se[z],H.pos+H.dp+H.size>Me.pmax&&pe++;for(z=Se.length-1;z>=0&&!(pe<=0);z--)H=Se[z],H.pos>Me.pmax-1&&(H.del=!0,pe--);for(z=0;z<Se.length&&!(pe<=0);z++)if(H=Se[z],H.pos<Me.pmin+1)for(H.del=!0,pe--,q=H.size*2,N=Se.length-1;N>=0;N--)Se[N].dp-=q;for(z=Se.length-1;z>=0&&!(pe<=0);z--)H=Se[z],H.pos+H.dp+H.size>Me.pmax&&(H.del=!0,pe--)}}}for(;!I&&l<=h;){for(l++,I=!0,z=0;z<v.length-1;){var J=v[z],ee=v[z+1],ie=J[J.length-1],oe=ee[0];if(O=ie.pos+ie.dp+ie.size-oe.pos-oe.dp+oe.size,O>.01){for(N=ee.length-1;N>=0;N--)ee[N].dp+=O;for(J.push.apply(J,ee),v.splice(z+1,1),V=0,N=J.length-1;N>=0;N--)V+=J[N].dp;for(q=V/J.length,N=J.length-1;N>=0;N--)J[N].dp-=q;I=!1}else z++}v.forEach(W)}for(z=v.length-1;z>=0;z--){var fe=v[z];for(N=fe.length-1;N>=0;N--){var le=fe[N],Te=le.datum;Te.offset=le.dp,Te.del=le.del}}}function tP(e,t){var r=0,i=e.offset;return t&&(i*=-dae,r=e.offset*vae),{x:r,y:i}}function _ae(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(ji+Fa),i=r+t*(e.txwidth+Fa),a=e.anchor==="middle";return a&&(r-=e.tx2width/2,i+=e.txwidth/2+Fa),{alignShift:t,textShiftX:r,text2ShiftX:i}}function rP(e,t,r,i){var a=function(l){return l*r},s=function(l){return l*i};e.each(function(l){var f=Rd.select(this);if(l.del)return f.remove();var h=f.select("text.nums"),v=l.anchor,m=v==="end"?-1:1,_=_ae(l),T=tP(l,t),M=T.x,C=T.y,E=v==="middle",L="hoverlabel"in l.trace?l.trace.hoverlabel.showarrow:!0,I;E?I="M-"+a(l.bx/2+l.tx2width/2)+","+s(C-l.by/2)+"h"+a(l.bx)+"v"+s(l.by)+"h-"+a(l.bx)+"Z":L?I="M0,0L"+a(m*ji+M)+","+s(ji+C)+"v"+s(l.by/2-ji)+"h"+a(m*l.bx)+"v-"+s(l.by)+"H"+a(m*ji+M)+"V"+s(C-ji)+"Z":I="M"+a(m*ji+M)+","+s(C-l.by/2)+"h"+a(m*l.bx)+"v"+s(l.by)+"h"+a(-m*l.bx)+"Z",f.select("path").attr("d",I);var O=M+_.textShiftX,q=C+l.ty0-l.by/2+Fa,z=l.textAlign||"auto";z!=="auto"&&(z==="left"&&v!=="start"?(h.attr("text-anchor","start"),O=E?-l.bx/2-l.tx2width/2+Fa:-l.bx-Fa):z==="right"&&v!=="end"&&(h.attr("text-anchor","end"),O=E?l.bx/2-l.tx2width/2-Fa:l.bx+Fa)),h.call(Kl.positionText,a(O),s(q)),l.tx2width&&(f.select("text.name").call(Kl.positionText,a(_.text2ShiftX+_.alignShift*Fa+M),s(C+l.ty0-l.by/2+Fa)),f.select("rect").call(Ff.setRect,a(_.text2ShiftX+(_.alignShift-1)*l.tx2width/2+M),s(C-l.by/2-1),a(l.tx2width),s(l.by+2)))})}function xae(e,t){var r=e.index,i=e.trace||{},a=e.cd[0],s=e.cd[r]||{};function l(T){return T||Cc(T)&&T===0}var f=Array.isArray(r)?function(T,M){var C=cn.castOption(a,r,T);return l(C)?C:cn.extractOption({},i,"",M)}:function(T,M){return cn.extractOption(s,i,T,M)};function h(T,M,C){var E=f(M,C);l(E)&&(e[T]=E)}if(h("hoverinfo","hi","hoverinfo"),h("bgcolor","hbg","hoverlabel.bgcolor"),h("borderColor","hbc","hoverlabel.bordercolor"),h("fontFamily","htf","hoverlabel.font.family"),h("fontSize","hts","hoverlabel.font.size"),h("fontColor","htc","hoverlabel.font.color"),h("fontWeight","htw","hoverlabel.font.weight"),h("fontStyle","hty","hoverlabel.font.style"),h("fontVariant","htv","hoverlabel.font.variant"),h("nameLength","hnl","hoverlabel.namelength"),h("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=cn.constrain(e.x0,0,e.xa._length),e.x1=cn.constrain(e.x1,0,e.xa._length),e.y0=cn.constrain(e.y0,0,e.ya._length),e.y1=cn.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:qf.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:qf.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var v=qf.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+v+" / -"+qf.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+v,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var m=qf.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+m+" / -"+qf.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+m,t==="y"&&(e.distance+=1)}var _=e.hoverinfo||e.trace.hoverinfo;return _&&_!=="all"&&(_=Array.isArray(_)?_:_.split("+"),_.indexOf("x")===-1&&(e.xLabel=void 0),_.indexOf("y")===-1&&(e.yLabel=void 0),_.indexOf("z")===-1&&(e.zLabel=void 0),_.indexOf("text")===-1&&(e.text=void 0),_.indexOf("name")===-1&&(e.name=void 0)),e}function XD(e,t,r){var i=r.container,a=r.fullLayout,s=a._size,l=r.event,f=!!t.hLinePoint,h=!!t.vLinePoint,v,m;if(i.selectAll(".spikeline").remove(),!!(h||f)){var _=io.combine(a.plot_bgcolor,a.paper_bgcolor);if(f){var T=t.hLinePoint,M,C;v=T&&T.xa,m=T&&T.ya;var E=m.spikesnap;E==="cursor"?(M=l.pointerX,C=l.pointerY):(M=v._offset+T.x,C=m._offset+T.y);var L=GD.readability(T.color,_)<1.5?io.contrast(_):T.color,I=m.spikemode,O=m.spikethickness,q=m.spikecolor||L,z=qf.getPxPosition(e,m),N,H;if(I.indexOf("toaxis")!==-1||I.indexOf("across")!==-1){if(I.indexOf("toaxis")!==-1&&(N=z,H=M),I.indexOf("across")!==-1){var V=m._counterDomainMin,W=m._counterDomainMax;m.anchor==="free"&&(V=Math.min(V,m.position),W=Math.max(W,m.position)),N=s.l+V*s.w,H=s.l+W*s.w}i.insert("line",":first-child").attr({x1:N,x2:H,y1:C,y2:C,"stroke-width":O,stroke:q,"stroke-dasharray":Ff.dashStyle(m.spikedash,O)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:N,x2:H,y1:C,y2:C,"stroke-width":O+2,stroke:_}).classed("spikeline",!0).classed("crisp",!0)}I.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:z+(m.side!=="right"?O:-O),cy:C,r:O,fill:q}).classed("spikeline",!0)}if(h){var J=t.vLinePoint,ee,ie;v=J&&J.xa,m=J&&J.ya;var oe=v.spikesnap;oe==="cursor"?(ee=l.pointerX,ie=l.pointerY):(ee=v._offset+J.x,ie=m._offset+J.y);var fe=GD.readability(J.color,_)<1.5?io.contrast(_):J.color,le=v.spikemode,Te=v.spikethickness,Se=v.spikecolor||fe,Me=qf.getPxPosition(e,v),Ae,pe;if(le.indexOf("toaxis")!==-1||le.indexOf("across")!==-1){if(le.indexOf("toaxis")!==-1&&(Ae=Me,pe=ie),le.indexOf("across")!==-1){var ke=v._counterDomainMin,Ee=v._counterDomainMax;v.anchor==="free"&&(ke=Math.min(ke,v.position),Ee=Math.max(Ee,v.position)),Ae=s.t+(1-Ee)*s.h,pe=s.t+(1-ke)*s.h}i.insert("line",":first-child").attr({x1:ee,x2:ee,y1:Ae,y2:pe,"stroke-width":Te,stroke:Se,"stroke-dasharray":Ff.dashStyle(v.spikedash,Te)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:ee,x2:ee,y1:Ae,y2:pe,"stroke-width":Te+2,stroke:_}).classed("spikeline",!0).classed("crisp",!0)}le.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:ee,cy:Me-(v.side!=="top"?Te:-Te),r:Te,fill:Se}).classed("spikeline",!0)}}}function bae(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var i=r.length-1;i>=0;i--){var a=r[i],s=e._hoverdata[i];if(a.curveNumber!==s.curveNumber||String(a.pointNumber)!==String(s.pointNumber)||String(a.pointNumbers)!==String(s.pointNumbers)||a.binNumber!==s.binNumber)return!0}return!1}function jD(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function JD(e,t){return Kl.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function wae(e,t){for(var r=t.charAt(0),i=[],a=[],s=[],l=0;l<e.length;l++){var f=e[l];tm.traceIs(f.trace,"bar-like")||tm.traceIs(f.trace,"box-violin")?s.push(f):f.trace[r+"period"]?a.push(f):i.push(f)}return i.concat(a).concat(s)}function KD(e,t,r){var i=t[e+"a"],a=t[e+"Val"],s=t.cd[0];if(i.type==="category"||i.type==="multicategory")a=i._categoriesMap[a];else if(i.type==="date"){var l=t.trace[e+"periodalignment"];if(l){var f=t.cd[t.index],h=f[e+"Start"];h===void 0&&(h=f[e]);var v=f[e+"End"];v===void 0&&(v=f[e]);var m=v-h;l==="end"?a+=m:l==="middle"&&(a+=m/2)}a=i.d2c(a)}return s&&s.t&&s.t.posLetter===i._id&&(r.boxmode==="group"||r.violinmode==="group")&&(a+=s.t.dPos),a}var aP=e=>e.offsetTop+e.clientTop,iP=e=>e.offsetLeft+e.clientLeft;function em(e,t){var r=e._fullLayout,i=t.getBoundingClientRect(),a=i.left,s=i.top,l=a+i.width,f=s+i.height,h=cn.apply3DTransform(r._invTransform)(a,s),v=cn.apply3DTransform(r._invTransform)(l,f),m=h[0],_=h[1],T=v[0],M=v[1];return{x:m,y:_,width:T-m,height:M-_,top:Math.min(_,M),left:Math.min(m,T),right:Math.max(m,T),bottom:Math.max(_,M)}}});var U2=me((n_e,nP)=>{"use strict";var Tae=Bt(),Aae=Oa(),Mae=kc().isUnifiedHover;nP.exports=function(t,r,i,a){a=a||{};var s=r.legend;function l(f){a.font[f]||(a.font[f]=s?r.legend.font[f]:r.font[f])}r&&Mae(r.hovermode)&&(a.font||(a.font={}),l("size"),l("family"),l("color"),l("weight"),l("style"),l("variant"),s?(a.bgcolor||(a.bgcolor=Aae.combine(r.legend.bgcolor,r.paper_bgcolor)),a.bordercolor||(a.bordercolor=r.legend.bordercolor)):a.bgcolor||(a.bgcolor=r.paper_bgcolor)),i("hoverlabel.bgcolor",a.bgcolor),i("hoverlabel.bordercolor",a.bordercolor),i("hoverlabel.namelength",a.namelength),i("hoverlabel.showarrow",a.showarrow),Tae.coerceFont(i,"hoverlabel.font",a.font),i("hoverlabel.align",a.align)}});var sP=me((o_e,oP)=>{"use strict";var Sae=Bt(),kae=U2(),Cae=x0();oP.exports=function(t,r){function i(a,s){return Sae.coerce(t,r,Cae,a,s)}kae(t,r,i)}});var fP=me((s_e,uP)=>{"use strict";var lP=Bt(),Eae=h_(),Lae=U2();uP.exports=function(t,r,i,a){function s(f,h){return lP.coerce(t,r,Eae,f,h)}var l=lP.extendFlat({},a.hoverlabel);r.hovertemplate&&(l.namelength=-1),Lae(t,r,s,l)}});var A4=me((l_e,cP)=>{"use strict";var Dae=Bt(),Pae=x0();cP.exports=function(t,r){function i(a,s){return r[a]!==void 0?r[a]:Dae.coerce(t,r,Pae,a,s)}return i("clickmode"),i("hoversubplots"),i("hovermode")}});var dP=me((u_e,vP)=>{"use strict";var hP=Bt(),zae=x0(),Iae=A4(),Rae=U2();vP.exports=function(t,r){function i(m,_){return hP.coerce(t,r,zae,m,_)}var a=Iae(t,r);a&&(i("hoverdistance"),i("spikedistance"));var s=i("dragmode");s==="select"&&i("selectdirection");var l=r._has("mapbox"),f=r._has("map"),h=r._has("geo"),v=r._basePlotModules.length;r.dragmode==="zoom"&&((l||f||h)&&v===1||(l||f)&&h&&v===2)&&(r.dragmode="pan"),Rae(t,r,i),hP.coerceFont(i,"hoverlabel.grouptitlefont",r.hoverlabel.font)}});var yP=me((f_e,mP)=>{"use strict";var M4=Bt(),pP=sa();mP.exports=function(t){var r=t.calcdata,i=t._fullLayout;function a(v){return function(m){return M4.coerceHoverinfo({hoverinfo:m},{_module:v._module},i)}}for(var s=0;s<r.length;s++){var l=r[s],f=l[0].trace;if(!pP.traceIs(f,"pie-like")){var h=pP.traceIs(f,"2dMap")?Fae:M4.fillArray;h(f.hoverinfo,l,"hi",a(f)),f.hovertemplate&&h(f.hovertemplate,l,"ht"),f.hoverlabel&&(h(f.hoverlabel.bgcolor,l,"hbg"),h(f.hoverlabel.bordercolor,l,"hbc"),h(f.hoverlabel.font.size,l,"hts"),h(f.hoverlabel.font.color,l,"htc"),h(f.hoverlabel.font.family,l,"htf"),h(f.hoverlabel.font.weight,l,"htw"),h(f.hoverlabel.font.style,l,"hty"),h(f.hoverlabel.font.variant,l,"htv"),h(f.hoverlabel.namelength,l,"hnl"),h(f.hoverlabel.align,l,"hta"),h(f.hoverlabel.showarrow,l,"htsa"))}}};function Fae(e,t,r,i){i=i||M4.identity,Array.isArray(e)&&(t[0][r]=i(e))}});var _P=me((c_e,gP)=>{"use strict";var qae=sa(),Nae=T4().hover;gP.exports=function(t,r,i){var a=qae.getComponentMethod("annotations","onClick")(t,t._hoverdata);i!==void 0&&Nae(t,r,i,!0);function s(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(a&&a.then?a.then(s):s(),r.stopImmediatePropagation&&r.stopImmediatePropagation())}});var Nf=me((h_e,wP)=>{"use strict";var Bae=ja(),V2=Bt(),Oae=jl(),pg=kc(),xP=x0(),bP=T4();wP.exports={moduleType:"component",name:"fx",constants:Iy(),schema:{layout:xP},attributes:h_(),layoutAttributes:xP,supplyLayoutGlobalDefaults:sP(),supplyDefaults:fP(),supplyLayoutDefaults:dP(),calc:yP(),getDistanceFunction:pg.getDistanceFunction,getClosest:pg.getClosest,inbox:pg.inbox,quadrature:pg.quadrature,appendArrayPointValue:pg.appendArrayPointValue,castHoverOption:Vae,castHoverinfo:Hae,hover:bP.hover,unhover:Oae.unhover,loneHover:bP.loneHover,loneUnhover:Uae,click:_P()};function Uae(e){var t=V2.isD3Selection(e)?e:Bae.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function Vae(e,t,r){return V2.castOption(e,t,"hoverlabel."+r)}function Hae(e,t,r){function i(a){return V2.coerceHoverinfo({hoverinfo:a},{_module:e._module},t)}return V2.castOption(e,r,"hoverinfo",i)}});var qd=me(Ec=>{"use strict";Ec.selectMode=function(e){return e==="lasso"||e==="select"};Ec.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Ec.openMode=function(e){return e==="drawline"||e==="drawopenpath"};Ec.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Ec.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};Ec.selectingOrDrawing=function(e){return Ec.freeMode(e)||Ec.rectMode(e)}});var H2=me((d_e,TP)=>{"use strict";TP.exports=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}});var G2=me((p_e,AP)=>{"use strict";AP.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}});var Y2=me((m_e,MP)=>{"use strict";var Z2=32;MP.exports={CIRCLE_SIDES:Z2,i000:0,i090:Z2/4,i180:Z2/2,i270:Z2/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}});var W2=me((y_e,kP)=>{"use strict";var Gae=Bt().strTranslate;function SP(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function Zae(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function Yae(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return SP(e,r[t])}}function Wae(e){return Gae(e.xaxis._offset,e.yaxis._offset)}kP.exports={p2r:SP,r2p:Zae,axValue:Yae,getTransform:Wae}});var jh=me(Lc=>{"use strict";var Xae=h5(),LP=Y2(),rm=LP.CIRCLE_SIDES,S4=LP.SQRT2,DP=W2(),CP=DP.p2r,EP=DP.r2p,jae=[0,3,4,5,6,1,2],Jae=[0,3,4,1,2];Lc.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",i=0;i<t;i++)for(var a=e[i].length,s=0;s<a;s++){var l=e[i][s][0];if(l==="Z")r+="Z";else for(var f=e[i][s].length,h=0;h<f;h++){var v=h;l==="Q"||l==="S"?v=Jae[h]:l==="C"&&(v=jae[h]),r+=e[i][s][v],h>0&&h<f-1&&(r+=",")}}return r};Lc.readPaths=function(e,t,r,i){var a=Xae(e),s=[],l=-1,f=function(){l++,s[l]=[]},h,v=0,m=0,_,T,M=function(){_=v,T=m};M();for(var C=0;C<a.length;C++){var E=[],L,I,O,q,z=a[C][0],N=z;switch(z){case"M":f(),v=+a[C][1],m=+a[C][2],E.push([N,v,m]),M();break;case"Q":case"S":L=+a[C][1],O=+a[C][2],v=+a[C][3],m=+a[C][4],E.push([N,v,m,L,O]);break;case"C":L=+a[C][1],O=+a[C][2],I=+a[C][3],q=+a[C][4],v=+a[C][5],m=+a[C][6],E.push([N,v,m,L,O,I,q]);break;case"T":case"L":v=+a[C][1],m=+a[C][2],E.push([N,v,m]);break;case"H":N="L",v=+a[C][1],E.push([N,v,m]);break;case"V":N="L",m=+a[C][1],E.push([N,v,m]);break;case"A":N="L";var H=+a[C][1],V=+a[C][2];+a[C][4]||(H=-H,V=-V);var W=v-H,J=m;for(h=1;h<=rm/2;h++){var ee=2*Math.PI*h/rm;E.push([N,W+H*Math.cos(ee),J+V*Math.sin(ee)])}break;case"Z":(v!==_||m!==T)&&(v=_,m=T,E.push([N,v,m]));break}for(var ie=(r||{}).domain,oe=t._fullLayout._size,fe=r&&r.xsizemode==="pixel",le=r&&r.ysizemode==="pixel",Te=i===!1,Se=0;Se<E.length;Se++){for(h=0;h+2<7;h+=2){var Me=E[Se][h+1],Ae=E[Se][h+2];Me===void 0||Ae===void 0||(v=Me,m=Ae,r&&(r.xaxis&&r.xaxis.p2r?(Te&&(Me-=r.xaxis._offset),fe?Me=EP(r.xaxis,r.xanchor)+Me:Me=CP(r.xaxis,Me)):(Te&&(Me-=oe.l),ie?Me=ie.x[0]+Me/oe.w:Me=Me/oe.w),r.yaxis&&r.yaxis.p2r?(Te&&(Ae-=r.yaxis._offset),le?Ae=EP(r.yaxis,r.yanchor)-Ae:Ae=CP(r.yaxis,Ae)):(Te&&(Ae-=oe.t),ie?Ae=ie.y[1]-Ae/oe.h:Ae=1-Ae/oe.h)),E[Se][h+1]=Me,E[Se][h+2]=Ae)}s[l].push(E[Se].slice())}}return s};function mg(e,t){return Math.abs(e-t)<=1e-6}function X2(e,t){var r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+i*i)}Lc.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return!1;for(var r=1;r<3;r++){var i=e[0][r]-e[1][r],a=e[3][r]-e[2][r];if(!mg(i,a))return!1;var s=e[0][r]-e[3][r],l=e[1][r]-e[2][r];if(!mg(s,l))return!1}return!mg(e[0][1],e[1][1])&&!mg(e[0][1],e[3][1])?!1:!!(X2(e[0],e[1])*X2(e[0],e[3]))};Lc.pointsOnEllipse=function(e){var t=e.length;if(t!==rm+1)return!1;t=rm;for(var r=0;r<t;r++){var i=(t*2-r)%t,a=(t/2+i)%t,s=(t/2+r)%t;if(!mg(X2(e[r],e[s]),X2(e[i],e[a])))return!1}return!0};Lc.handleEllipse=function(e,t,r){if(!e)return[t,r];var i=Lc.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]}),a=(i.x1+i.x0)/2,s=(i.y1+i.y0)/2,l=(i.x1-i.x0)/2,f=(i.y1-i.y0)/2;l||(l=f=f/S4),f||(f=l=l/S4);for(var h=[],v=0;v<rm;v++){var m=v*2*Math.PI/rm;h.push([a+l*Math.cos(m),s+f*Math.sin(m)])}return h};Lc.ellipseOver=function(e){var t=e.x0,r=e.y0,i=e.x1,a=e.y1,s=i-t,l=a-r;t-=s,r-=l;var f=(t+i)/2,h=(r+a)/2,v=S4;return s*=v,l*=v,{x0:f-s,y0:h-l,x1:f+s,y1:h+l}};Lc.fixDatesForPaths=function(e,t,r){var i=t.type==="date",a=r.type==="date";if(!i&&!a)return e;for(var s=0;s<e.length;s++)for(var l=0;l<e[s].length;l++)for(var f=0;f+2<e[s][l].length;f+=2)i&&(e[s][l][f+1]=e[s][l][f+1].replace(" ","_")),a&&(e[s][l][f+2]=e[s][l][f+2].replace(" ","_"));return e}});var K2=me((__e,OP)=>{"use strict";var PP=jn(),qP=qd(),Kae=qP.drawMode,Qae=qP.openMode,am=Y2(),zP=am.i000,IP=am.i090,RP=am.i180,FP=am.i270,$ae=am.cos45,eie=am.sin45,NP=W2(),j2=NP.p2r,Jh=NP.r2p,tie=Bh(),rie=tie.clearOutline,J2=jh(),aie=J2.readPaths,iie=J2.writePaths,nie=J2.ellipseOver,oie=J2.fixDatesForPaths;function sie(e,t){if(e.length){var r=e[0][0];if(r){var i=t.gd,a=t.isActiveShape,s=t.dragmode,l=(i.layout||{}).shapes||[];if(!Kae(s)&&a!==void 0){var f=i._fullLayout._activeShapeIndex;if(f<l.length)switch(i._fullLayout.shapes[f].type){case"rect":s="drawrect";break;case"circle":s="drawcircle";break;case"line":s="drawline";break;case"path":var h=l[f].path||"";h[h.length-1]==="Z"?s="drawclosedpath":s="drawopenpath";break}}var v=BP(e,t,s);rie(i);for(var m=t.editHelpers,_=(m||{}).modifyItem,T=[],M=0;M<l.length;M++){var C=i._fullLayout.shapes[M];if(T[M]=C._input,a!==void 0&&M===i._fullLayout._activeShapeIndex){var E=v;switch(C.type){case"line":case"rect":case"circle":var L=PP.getFromId(i,C.xref);C.xref.charAt(0)==="x"&&L.type.includes("category")?(_("x0",E.x0-(C.x0shift||0)),_("x1",E.x1-(C.x1shift||0))):(_("x0",E.x0),_("x1",E.x1));var I=PP.getFromId(i,C.yref);C.yref.charAt(0)==="y"&&I.type.includes("category")?(_("y0",E.y0-(C.y0shift||0)),_("y1",E.y1-(C.y1shift||0))):(_("y0",E.y0),_("y1",E.y1));break;case"path":_("path",E.path);break}}}return a===void 0?(T.push(v),T):m?m.getUpdateObj():{}}}}function BP(e,t,r){var i=e[0][0],a=t.gd,s=i.getAttribute("d"),l=a._fullLayout.newshape,f=t.plotinfo,h=t.isActiveShape,v=f.xaxis,m=f.yaxis,_=!!f.domain||!f.xaxis,T=!!f.domain||!f.yaxis,M=Qae(r),C=aie(s,a,f,h),E={editable:!0,visible:l.visible,name:l.name,showlegend:l.showlegend,legend:l.legend,legendwidth:l.legendwidth,legendgroup:l.legendgroup,legendgrouptitle:{text:l.legendgrouptitle.text,font:l.legendgrouptitle.font},legendrank:l.legendrank,label:l.label,xref:_?"paper":v._id,yref:T?"paper":m._id,layer:l.layer,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}};M||(E.fillcolor=l.fillcolor,E.fillrule=l.fillrule);var L;if(C.length===1&&(L=C[0]),L&&L.length===5&&r==="drawrect")E.type="rect",E.x0=L[0][1],E.y0=L[0][2],E.x1=L[2][1],E.y1=L[2][2];else if(L&&r==="drawline")E.type="line",E.x0=L[0][1],E.y0=L[0][2],E.x1=L[1][1],E.y1=L[1][2];else if(L&&r==="drawcircle"){E.type="circle";var I=L[zP][1],O=L[IP][1],q=L[RP][1],z=L[FP][1],N=L[zP][2],H=L[IP][2],V=L[RP][2],W=L[FP][2],J=f.xaxis&&(f.xaxis.type==="date"||f.xaxis.type==="log"),ee=f.yaxis&&(f.yaxis.type==="date"||f.yaxis.type==="log");J&&(I=Jh(f.xaxis,I),O=Jh(f.xaxis,O),q=Jh(f.xaxis,q),z=Jh(f.xaxis,z)),ee&&(N=Jh(f.yaxis,N),H=Jh(f.yaxis,H),V=Jh(f.yaxis,V),W=Jh(f.yaxis,W));var ie=(O+z)/2,oe=(N+V)/2,fe=(z-O+q-I)/2,le=(W-H+V-N)/2,Te=nie({x0:ie,y0:oe,x1:ie+fe*$ae,y1:oe+le*eie});J&&(Te.x0=j2(f.xaxis,Te.x0),Te.x1=j2(f.xaxis,Te.x1)),ee&&(Te.y0=j2(f.yaxis,Te.y0),Te.y1=j2(f.yaxis,Te.y1)),E.x0=Te.x0,E.y0=Te.y0,E.x1=Te.x1,E.y1=Te.y1}else E.type="path",v&&m&&oie(C,v,m),E.path=iie(C),L=null;return E}OP.exports={newShapes:sie,createShapeObj:BP}});var C4=me((x_e,UP)=>{"use strict";var lie=qd(),uie=lie.selectMode,fie=Bh(),cie=fie.clearOutline,k4=jh(),hie=k4.readPaths,vie=k4.writePaths,die=k4.fixDatesForPaths;UP.exports=function(t,r){if(t.length){var i=t[0][0];if(i){var a=i.getAttribute("d"),s=r.gd,l=s._fullLayout.newselection,f=r.plotinfo,h=f.xaxis,v=f.yaxis,m=r.isActiveSelection,_=r.dragmode,T=(s.layout||{}).selections||[];if(!uie(_)&&m!==void 0){var M=s._fullLayout._activeSelectionIndex;if(M<T.length)switch(s._fullLayout.selections[M].type){case"rect":_="select";break;case"path":_="lasso";break}}var C=hie(a,s,f,m),E={xref:h._id,yref:v._id,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}},L;C.length===1&&(L=C[0]),L&&L.length===5&&_==="select"?(E.type="rect",E.x0=L[0][1],E.y0=L[0][2],E.x1=L[2][1],E.y1=L[2][2]):(E.type="path",h&&v&&die(C,h,v),E.path=vie(C),L=null),cie(s);for(var I=r.editHelpers,O=(I||{}).modifyItem,q=[],z=0;z<T.length;z++){var N=s._fullLayout.selections[z];if(!N){q[z]=N;continue}if(q[z]=N._input,m!==void 0&&z===s._fullLayout._activeSelectionIndex){var H=E;switch(N.type){case"rect":O("x0",H.x0),O("x1",H.x1),O("y0",H.y0),O("y1",H.y1);break;case"path":O("path",H.path);break}}}return m===void 0?(q.push(E),q):I?I.getUpdateObj():{}}}}});var yg=me((b_e,VP)=>{"use strict";VP.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:3},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}});var Qh=me(So=>{"use strict";var Bf=yg(),HP=Bt(),Kh=Xi();So.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(t){return t}};So.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(t){return t}};So.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}};So.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};So.extractPathCoords=function(e,t,r){var i=[],a=e.match(Bf.segmentRE);return a.forEach(function(s){var l=t[s.charAt(0)].drawn;if(l!==void 0){var f=s.slice(1).match(Bf.paramRE);if(!(!f||f.length<l)){var h=f[l],v=r?h:HP.cleanNumber(h);i.push(v)}}}),i};So.countDefiningCoords=function(e,t,r){if(e!=="path")return 2;if(!t)return 0;let i=t.match(Bf.segmentRE);if(!i)return 0;let a=r==="x"?Bf.paramIsX:Bf.paramIsY;return i.reduce((s,l)=>{let f=l.charAt(0),h=a[f].drawn!==void 0;return s+(h?1:0)},0)};So.getDataToPixel=function(e,t,r,i,a){var s=e._fullLayout._size,l;if(t)if(a==="domain")l=function(h){return t._length*(i?1-h:h)+t._offset};else{var f=So.shapePositionToRange(t);l=function(h){var v=Dc(t,r);return t._offset+t.r2p(f(h,!0))+v},t.type==="date"&&(l=So.decodeDate(l))}else i?l=function(h){return s.t+s.h*(1-h)}:l=function(h){return s.l+s.w*h};return l};So.getPixelToData=function(e,t,r,i){var a=e._fullLayout._size,s;if(t)if(i==="domain")s=function(f){var h=(f-t._offset)/t._length;return r?1-h:h};else{var l=So.rangeToShapePosition(t);s=function(f){return l(t.p2r(f-t._offset))}}else r?s=function(f){return 1-(f-a.t)/a.h}:s=function(f){return(f-a.l)/a.w};return s};So.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1,i=Math.round(e);return r?i+.5:i};So.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[r.xref+r.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},r.xref&&r.xref!=="paper"&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(i.yaxis=e._fullLayout[r.yref+"axis"])),i.xsizemode=r.xsizemode,i.ysizemode=r.ysizemode,i.xanchor=r.xanchor,i.yanchor=r.yanchor,{options:r,plotinfo:i}};So.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},i=e._fullLayout._plots[r.xref+r.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},r.xref&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(i.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:i}};So.getPathString=function(e,t){let r=t.type,i=Kh.getRefType(t.xref),a=Kh.getRefType(t.yref),s=e._fullLayout._size;var l,f,h,v,m,_,T,M,C,E,L,I;function O(ee,ie,oe,fe){var le;if(ee)if(ie==="domain")fe?le=function(Te){return ee._offset+ee._length*(1-Te)}:le=function(Te){return ee._offset+ee._length*Te};else{let Te=So.shapePositionToRange(ee);le=function(Se){return ee._offset+ee.r2p(Te(Se,!0))},oe==="path"&&ee.type==="date"&&(le=So.decodeDate(le))}else fe?le=function(Te){return s.t+s.h*(1-Te)}:le=function(Te){return s.l+s.w*Te};return le}if(i==="array"?(T=[],l=t.xref.map(function(ee){return Kh.getFromId(e,ee)}),T=t.xref.map(function(ee,ie){return O(l[ie],Kh.getRefType(ee),r,!1)})):(l=Kh.getFromId(e,t.xref),T=O(l,i,r,!1)),a==="array"?(M=[],f=t.yref.map(function(ee){return Kh.getFromId(e,ee)}),M=t.yref.map(function(ee,ie){return O(f[ie],Kh.getRefType(ee),r,!0)})):(f=Kh.getFromId(e,t.yref),M=O(f,a,r,!0)),r==="path")return pie(t,T,M);if(i==="array")h=Dc(l[0],t.x0shift),v=Dc(l[1],t.x1shift),C=T[0](t.x0)+h,E=T[1](t.x1)+v;else if(h=Dc(l,t.x0shift),v=Dc(l,t.x1shift),t.xsizemode==="pixel"){let ee=T(t.xanchor);C=ee+t.x0+h,E=ee+t.x1+v}else C=T(t.x0)+h,E=T(t.x1)+v;if(a==="array")m=Dc(f[0],t.y0shift),_=Dc(f[1],t.y1shift),L=M[0](t.y0)+m,I=M[1](t.y1)+_;else if(m=Dc(f,t.y0shift),_=Dc(f,t.y1shift),t.ysizemode==="pixel"){let ee=M(t.yanchor);L=ee-t.y0+m,I=ee-t.y1+_}else L=M(t.y0)+m,I=M(t.y1)+_;if(r==="line")return"M"+C+","+L+"L"+E+","+I;if(r==="rect")return"M"+C+","+L+"H"+E+"V"+I+"H"+C+"Z";var q=(C+E)/2,z=(L+I)/2,N=Math.abs(q-C),H=Math.abs(z-L),V="A"+N+","+H,W=q+N+","+z,J=q+","+(z-H);return"M"+W+V+" 0 1,1 "+J+V+" 0 0,1 "+W+"Z"};function pie(e,t,r){let i=e.path,a=e.xsizemode,s=e.ysizemode,l=e.xanchor,f=e.yanchor,h=Array.isArray(e.xref),v=Array.isArray(e.yref);var m=0,_=0;return i.replace(Bf.segmentRE,function(T){var M=0,C=T.charAt(0),E=Bf.paramIsX[C],L=Bf.paramIsY[C],I=Bf.numParams[C];let O=E.drawn!==void 0,q=L.drawn!==void 0,z=h?t[m]:t,N=v?r[_]:r;var H=T.slice(1).replace(Bf.paramRE,function(V){return E[M]?a==="pixel"?V=z(l)+Number(V):V=z(V):L[M]&&(s==="pixel"?V=N(f)-Number(V):V=N(V)),M++,M>I&&(V="X"),V});return M>I&&(H=H.replace(/[\s,]*X.*/,""),HP.log("Ignoring extra params in segment "+T)),O&&m++,q&&_++,C+H})}function Dc(e,t){t=t||0;var r=0;return t&&e&&(e.type==="category"||e.type==="multicategory")&&(r=(e.r2p(1)-e.r2p(0))*t),r}});var L4=me((T_e,YP)=>{"use strict";var mie=Bt(),Of=Xi(),GP=ro(),ZP=xi(),yie=jh().readPaths,E4=Qh(),gie=E4.getPathString,gg=b_(),_ie=No().FROM_TL;YP.exports=function(t,r,i,a){if(a.selectAll(".shape-label").remove(),!!(i.label.text||i.label.texttemplate)){var s;if(i.label.texttemplate){var l={};if(i.type!=="path"){var f=Of.getFromId(t,i.xref),h=Of.getFromId(t,i.yref);let Ee=Array.isArray(i.xref),Xe=Array.isArray(i.yref);for(var v in gg){var m=typeof gg[v]=="function",_=!Ee||gg.simpleXVariables.includes(v),T=!Xe||gg.simpleYVariables.includes(v);if(m&&_&&T){var M=gg[v](i,f,h);M!==void 0&&(l[v]=M)}}}s=mie.texttemplateStringForShapes({data:[l],fallback:i.label.texttemplatefallback,locale:t._fullLayout._d3locale,template:i.label.texttemplate})}else s=i.label.text;var C={"data-index":r},E=i.label.font,L={"data-notex":1},I=a.append("g").attr(C).classed("shape-label",!0),O=I.append("text").attr(L).classed("shape-label-text",!0).text(s),q,z,N,H;if(i.path){var V=gie(t,i),W=yie(V,t);q=1/0,N=1/0,z=-1/0,H=-1/0;for(var J=0;J<W.length;J++)for(var ee=0;ee<W[J].length;ee++)for(var ie=W[J][ee],oe=1;oe<ie.length;oe+=2){var fe=ie[oe],le=ie[oe+1];q=Math.min(q,fe),z=Math.max(z,fe),N=Math.min(N,le),H=Math.max(H,le)}}else{let Ee=Array.isArray(i.xref),Xe=Array.isArray(i.yref),lt=Of.getFromId(t,Ee?i.xref[0]:i.xref),it=Of.getFromId(t,Ee?i.xref[1]:i.xref),_t=Of.getFromId(t,Xe?i.yref[0]:i.yref),Ye=Of.getFromId(t,Xe?i.yref[1]:i.yref),kt=Of.getRefType(Ee?i.xref[0]:i.xref),st=Of.getRefType(Ee?i.xref[1]:i.xref),dt=Of.getRefType(Xe?i.yref[0]:i.yref),It=Of.getRefType(Xe?i.yref[1]:i.yref),yt=function(ze,_e,Ue,at){return E4.getDataToPixel(t,Ue,_e,!1,at)(ze)},de=function(ze,_e,Ue,at){return E4.getDataToPixel(t,Ue,_e,!0,at)(ze)};q=yt(i.x0,i.x0shift,lt,kt),z=yt(i.x1,i.x1shift,it,st),N=de(i.y0,i.y0shift,_t,dt),H=de(i.y1,i.y1shift,Ye,It)}var Te=i.label.textangle;Te==="auto"&&(i.type==="line"?Te=xie(q,N,z,H):Te=0),O.call(function(Ee){return Ee.call(ZP.font,E).attr({}),GP.convertToTspans(Ee,t),Ee});var Se=ZP.bBox(O.node()),Me=bie(q,N,z,H,i,Te,Se),Ae=Me.textx,pe=Me.texty,ke=Me.xanchor;O.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ke],y:pe,x:Ae,transform:"rotate("+Te+","+Ae+","+pe+")"}).call(GP.positionText,Ae,pe)}};function xie(e,t,r,i){var a,s;return s=Math.abs(r-e),r>=e?a=t-i:a=i-t,-180/Math.PI*Math.atan2(a,s)}function bie(e,t,r,i,a,s,l){var f=a.label.textposition,h=a.label.textangle,v=a.label.padding,m=a.type,_=Math.PI/180*s,T=Math.sin(_),M=Math.cos(_),C=a.label.xanchor,E=a.label.yanchor,L,I,O,q;if(m==="line"){f==="start"?(L=e,I=t):f==="end"?(L=r,I=i):(L=(e+r)/2,I=(t+i)/2),C==="auto"&&(f==="start"?h==="auto"?r>e?C="left":r<e?C="right":C="center":r>e?C="right":r<e?C="left":C="center":f==="end"?h==="auto"?r>e?C="right":r<e?C="left":C="center":r>e?C="left":r<e?C="right":C="center":C="center");var z={left:1,center:0,right:-1},N={bottom:-1,middle:0,top:1};if(h==="auto"){var H=N[E];O=-v*T*H,q=v*M*H}else{var V=z[C],W=N[E];O=v*V,q=v*W}L=L+O,I=I+q}else O=v+3,f.indexOf("right")!==-1?(L=Math.max(e,r)-O,C==="auto"&&(C="right")):f.indexOf("left")!==-1?(L=Math.min(e,r)+O,C==="auto"&&(C="left")):(L=(e+r)/2,C==="auto"&&(C="center")),f.indexOf("top")!==-1?I=Math.min(t,i):f.indexOf("bottom")!==-1?I=Math.max(t,i):I=(t+i)/2,q=v,E==="bottom"?I=I-q:E==="top"&&(I=I+q);var J=_ie[E],ee=a.label.font.size,ie=l.height,oe=(ie*J-ee)*T,fe=-(ie*J-ee)*M;return{textx:L+oe,texty:I+fe,xanchor:C}}});var ex=me((A_e,ez)=>{"use strict";var wie=Bt(),Tie=wie.strTranslate,WP=jl(),JP=qd(),Aie=JP.drawMode,KP=JP.selectMode,QP=sa(),XP=Oa(),$2=Y2(),Mie=$2.i000,Sie=$2.i090,kie=$2.i180,Cie=$2.i270,Eie=Bh(),$P=Eie.clearOutlineControllers,P4=jh(),Q2=P4.pointsOnRectangle,D4=P4.pointsOnEllipse,Lie=P4.writePaths,Die=K2().newShapes,Pie=K2().createShapeObj,zie=C4(),Iie=L4();ez.exports=function e(t,r,i,a){a||(a=0);var s=i.gd;function l(){e(t,r,i,a++),(D4(t[0])||i.hasText)&&f({redrawing:!0})}function f(Me){var Ae={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,Ae=Die(r,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,Ae=zie(r,i),s._fullLayout._reselect=!0),Object.keys(Ae).length&&QP.call((Me||{}).redrawing?"relayout":"_guiRelayout",s,Ae)}var h=s._fullLayout,v=h._zoomlayer,m=i.dragmode,_=Aie(m),T=KP(m);(_||T)&&(s._fullLayout._outlining=!0),$P(s),r.attr("d",Lie(t));var M,C,E,L,I;if(!a&&(i.isActiveShape||i.isActiveSelection)){I=Rie([],t);var O=v.append("g").attr("class","outline-controllers");ee(O),Se()}if(_&&i.hasText){var q=v.select(".label-temp"),z=Pie(r,i,i.dragmode);Iie(s,"label-temp",z,q)}function N(Me){E=+Me.srcElement.getAttribute("data-i"),L=+Me.srcElement.getAttribute("data-j"),M[E][L].moveFn=H}function H(Me,Ae){if(t.length){var pe=I[E][L][1],ke=I[E][L][2],Ee=t[E],Xe=Ee.length;if(Q2(Ee)){var lt=Me,it=Ae;if(i.isActiveSelection){var _t=jP(Ee,L);_t[1]===Ee[L][1]?it=0:lt=0}for(var Ye=0;Ye<Xe;Ye++)if(Ye!==L){var kt=Ee[Ye];kt[1]===Ee[L][1]&&(kt[1]=pe+lt),kt[2]===Ee[L][2]&&(kt[2]=ke+it)}if(Ee[L][1]=pe+lt,Ee[L][2]=ke+it,!Q2(Ee))for(var st=0;st<Xe;st++)for(var dt=0;dt<Ee[st].length;dt++)Ee[st][dt]=I[E][st][dt]}else Ee[L][1]=pe+Me,Ee[L][2]=ke+Ae;l()}}function V(){f()}function W(){if(t.length&&t[E]&&t[E].length){for(var Me=[],Ae=0;Ae<t[E].length;Ae++)Ae!==L&&Me.push(t[E][Ae]);Me.length>1&&!(Me.length===2&&Me[1][0]==="Z")&&(L===0&&(Me[0][0]="M"),t[E]=Me,l(),f())}}function J(Me,Ae){if(Me===2){E=+Ae.srcElement.getAttribute("data-i"),L=+Ae.srcElement.getAttribute("data-j");var pe=t[E];!Q2(pe)&&!D4(pe)&&W()}}function ee(Me){M=[];for(var Ae=0;Ae<t.length;Ae++){var pe=t[Ae],ke=Q2(pe),Ee=!ke&&D4(pe);M[Ae]=[];for(var Xe=pe.length,lt=0;lt<Xe;lt++)if(pe[lt][0]!=="Z"&&!(Ee&&lt!==Mie&&lt!==Sie&&lt!==kie&&lt!==Cie)){var it=ke&&i.isActiveSelection,_t;it&&(_t=jP(pe,lt));var Ye=pe[lt][1],kt=pe[lt][2],st=Me.append(it?"rect":"circle").attr("data-i",Ae).attr("data-j",lt).style({fill:XP.background,stroke:XP.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(it){var dt=_t[1]-Ye,It=_t[2]-kt,yt=It?5:Math.max(Math.min(25,Math.abs(dt)-5),5),de=dt?5:Math.max(Math.min(25,Math.abs(It)-5),5);st.classed(It?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",yt).attr("height",de).attr("x",Ye-yt/2).attr("y",kt-de/2).attr("transform",Tie(dt/2,It/2))}else st.classed("cursor-grab",!0).attr("r",5).attr("cx",Ye).attr("cy",kt);M[Ae][lt]={element:st.node(),gd:s,prepFn:N,doneFn:V,clickFn:J},WP.init(M[Ae][lt])}}}function ie(Me,Ae){if(t.length)for(var pe=0;pe<t.length;pe++)for(var ke=0;ke<t[pe].length;ke++)for(var Ee=0;Ee+2<t[pe][ke].length;Ee+=2)t[pe][ke][Ee+1]=I[pe][ke][Ee+1]+Me,t[pe][ke][Ee+2]=I[pe][ke][Ee+2]+Ae}function oe(Me,Ae){ie(Me,Ae),l()}function fe(Me){E=+Me.srcElement.getAttribute("data-i"),E||(E=0),C[E].moveFn=oe}function le(){f()}function Te(Me){Me===2&&Fie(s)}function Se(){if(C=[],!!t.length){var Me=0;C[Me]={element:r[0][0],gd:s,prepFn:fe,doneFn:le,clickFn:Te},WP.init(C[Me])}}};function Rie(e,t){for(var r=0;r<t.length;r++){var i=t[r];e[r]=[];for(var a=0;a<i.length;a++){e[r][a]=[];for(var s=0;s<i[a].length;s++)e[r][a][s]=i[a][s]}}return e}function jP(e,t){var r=e[t][1],i=e[t][2],a=e.length,s,l,f;return s=(t+1)%a,l=e[s][1],f=e[s][2],l===r&&f===i&&(s=(t+2)%a,l=e[s][1],f=e[s][2]),[s,l,f]}function Fie(e){if(KP(e._fullLayout.dragmode)){$P(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var i=[],a=0;a<r.length;a++)a!==t&&i.push(r[a]);delete e._fullLayout._activeSelectionIndex;var s=e._fullLayout.selections[t];e._fullLayout._deselect={xref:s.xref,yref:s.yref},QP.call("_guiRelayout",e,{selections:i})}}}});var nx=me((M_e,uz)=>{"use strict";var qie=ja(),nz=sa(),I4=Bt(),Nd=Xi(),Nie=jh().readPaths,Bie=ex(),rx=L4(),oz=Bh().clearOutlineControllers,z4=Oa(),ax=xi(),Oie=Ii().arrayEditor,tz=jl(),rz=Wh(),Bd=yg(),Us=Qh(),R4=Us.getPathString;uz.exports={draw:F4,drawOne:sz,eraseActiveShape:Gie,drawLabel:rx};function F4(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var i=t._plots[r].shapelayer;i&&(i.selectAll("path").remove(),i.selectAll("text").remove())}for(var a=0;a<t.shapes.length;a++)t.shapes[a].visible===!0&&sz(e,a)}function tx(e){return!!e._fullLayout._outlining}function ix(e){return!e._context.edits.shapePosition}function sz(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=Us.makeShapesOptionsAndPlotinfo(e,t),i=r.options,a=r.plotinfo;if(!i._input||i.visible!==!0)return;let s=Array.isArray(i.xref)||Array.isArray(i.yref);if(i.layer==="above")f(e._fullLayout._shapeUpperLayer);else if(i.xref.includes("paper")||i.yref.includes("paper"))f(e._fullLayout._shapeLowerLayer);else if(i.layer==="between"&&!s)f(a.shapelayerBetween);else if(a._hadPlotinfo){var l=a.mainplotinfo||a;f(l.shapelayer)}else f(e._fullLayout._shapeLowerLayer);function f(h){var v=R4(e,i),m={"data-index":t,"fill-rule":i.fillrule,d:v},_=i.opacity,T=i.fillcolor,M=i.line.width?i.line.color:"rgba(0,0,0,0)",C=i.line.width,E=i.line.dash;!C&&i.editable===!0&&(C=5,E="solid");var L=v[v.length-1]!=="Z",I=ix(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;I&&(T=L?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,_=e._fullLayout.activeshape.opacity);var O=h.append("g").classed("shape-group",!0).attr({"data-index":t}),q=O.append("path").attr(m).style("opacity",_).call(z4.stroke,M).call(z4.fill,T).call(ax.dashLine,E,C);lz(O,e,i),rx(e,t,i,O);var z;if((I||e._context.edits.shapePosition)&&(z=Oie(e.layout,"shapes",i)),I){q.style({cursor:"move"});var N={element:q.node(),plotinfo:a,gd:e,editHelpers:z,hasText:i.label.text||i.label.texttemplate,isActiveShape:!0},H=Nie(v,e);Bie(H,q,N)}else e._context.edits.shapePosition?Vie(e,q,i,t,h,z):i.editable===!0&&q.style("pointer-events",L||z4.opacity(T)*_<=.5?"stroke":"all");q.node().addEventListener("click",function(){return Hie(e,q)})}}function lz(e,t,r){let i=r.xref,a=r.yref;if(Array.isArray(i)||Array.isArray(a)){let s="clip"+t._fullLayout._uid+"shape"+r._index,l=Uie(t,i,a);I4.ensureSingleById(t._fullLayout._clips,"clipPath",s,function(f){f.append("rect")}).select("rect").attr(l),ax.setClipUrl(e,s,t)}else{let s=(i+a).replace(/paper/g,"").replace(/[xyz][0-9]* *domain/g,"");ax.setClipUrl(e,s?"clip"+t._fullLayout._uid+s:null,t)}}function Uie(e,t,r){let i=e._fullLayout._size;function a(f,h){let v=(Array.isArray(f)?f:[f]).map(T=>Nd.getFromId(e,T)).filter(Boolean);if(!v.length)return h?[i.t,i.t+i.h]:[i.l,i.l+i.w];let m=v.map(function(T){return T._offset}),_=v.map(function(T){return T._offset+T._length});return[Math.min(...m),Math.max(..._)]}let s=a(t,!1),l=a(r,!0);return{x:s[0],y:l[0],width:s[1]-s[0],height:l[1]-l[0]}}function Vie(e,t,r,i,a,s){var l=10,f=10,h=r.xsizemode==="pixel",v=r.ysizemode==="pixel",m=r.type==="line",_=r.type==="path",T=s.modifyItem,M,C,E,L,I,O,q,z,N,H,V,W,J,ee,ie,oe=qie.select(t.node().parentNode),fe=Nd.getFromId(e,r.xref),le=Nd.getRefType(r.xref),Te=Nd.getFromId(e,r.yref),Se=Nd.getRefType(r.yref),Me=r.x0shift,Ae=r.x1shift,pe=r.y0shift,ke=r.y1shift,Ee=function(wt,xt){var qt=Us.getDataToPixel(e,fe,xt,!1,le);return qt(wt)},Xe=function(wt,xt){var qt=Us.getDataToPixel(e,Te,xt,!0,Se);return qt(wt)},lt=Us.getPixelToData(e,fe,!1,le),it=Us.getPixelToData(e,Te,!0,Se),_t=st(),Ye={element:_t.node(),gd:e,prepFn:yt,doneFn:de,clickFn:ze},kt;tz.init(Ye),_t.node().onmousemove=It;function st(){return m?dt():t}function dt(){var wt=10,xt=Math.max(r.line.width,wt),qt=a.append("g").attr("data-index",i).attr("drag-helper",!0);qt.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":xt,"stroke-opacity":"0"});var Ut={"fill-opacity":"0"},Dt=Math.max(xt/2,wt);return qt.append("circle").attr({"data-line-point":"start-point",cx:h?Ee(r.xanchor)+r.x0:Ee(r.x0,Me),cy:v?Xe(r.yanchor)-r.y0:Xe(r.y0,pe),r:Dt}).style(Ut).classed("cursor-grab",!0),qt.append("circle").attr({"data-line-point":"end-point",cx:h?Ee(r.xanchor)+r.x1:Ee(r.x1,Ae),cy:v?Xe(r.yanchor)-r.y1:Xe(r.y1,ke),r:Dt}).style(Ut).classed("cursor-grab",!0),qt}function It(wt){if(tx(e)){kt=null;return}if(m)wt.target.tagName==="path"?kt="move":kt=wt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var xt=Ye.element.getBoundingClientRect(),qt=xt.right-xt.left,Ut=xt.bottom-xt.top,Dt=wt.clientX-xt.left,Mt=wt.clientY-xt.top,Zt=!_&&qt>l&&Ut>f&&!wt.shiftKey?tz.getCursor(Dt/qt,1-Mt/Ut):"move";rz(t,Zt),kt=Zt.split("-")[0]}}function yt(wt){tx(e)||(h&&(I=Ee(r.xanchor)),v&&(O=Xe(r.yanchor)),r.type==="path"?ie=r.path:(M=h?r.x0:Ee(r.x0),C=v?r.y0:Xe(r.y0),E=h?r.x1:Ee(r.x1),L=v?r.y1:Xe(r.y1)),M<E?(N=M,J="x0",H=E,ee="x1"):(N=E,J="x1",H=M,ee="x0"),!v&&C<L||v&&C>L?(q=C,V="y0",z=L,W="y1"):(q=L,V="y1",z=C,W="y0"),It(wt),at(a,r),Ct(t,r,e),Ye.moveFn=kt==="move"?_e:Ue,Ye.altKey=wt.altKey)}function de(){tx(e)||(rz(t),Je(a),lz(t,e,r),nz.call("_guiRelayout",e,s.getUpdateObj()))}function ze(){tx(e)||Je(a)}function _e(wt,xt){if(r.type==="path"){var qt=function(Mt){return Mt},Ut=qt,Dt=qt;h?T("xanchor",r.xanchor=lt(I+wt)):(Ut=function(Zt){return lt(Ee(Zt)+wt)},fe&&fe.type==="date"&&(Ut=Us.encodeDate(Ut))),v?T("yanchor",r.yanchor=it(O+xt)):(Dt=function(Zt){return it(Xe(Zt)+xt)},Te&&Te.type==="date"&&(Dt=Us.encodeDate(Dt))),T("path",r.path=az(ie,Ut,Dt))}else h?T("xanchor",r.xanchor=lt(I+wt)):(T("x0",r.x0=lt(M+wt)),T("x1",r.x1=lt(E+wt))),v?T("yanchor",r.yanchor=it(O+xt)):(T("y0",r.y0=it(C+xt)),T("y1",r.y1=it(L+xt)));t.attr("d",R4(e,r)),at(a,r),rx(e,i,r,oe)}function Ue(wt,xt){if(_){var qt=function(Kt){return Kt},Ut=qt,Dt=qt;h?T("xanchor",r.xanchor=lt(I+wt)):(Ut=function(pr){return lt(Ee(pr)+wt)},fe&&fe.type==="date"&&(Ut=Us.encodeDate(Ut))),v?T("yanchor",r.yanchor=it(O+xt)):(Dt=function(pr){return it(Xe(pr)+xt)},Te&&Te.type==="date"&&(Dt=Us.encodeDate(Dt))),T("path",r.path=az(ie,Ut,Dt))}else if(m){if(kt==="resize-over-start-point"){var Mt=M+wt,Zt=v?C-xt:C+xt;T("x0",r.x0=h?Mt:lt(Mt)),T("y0",r.y0=v?Zt:it(Zt))}else if(kt==="resize-over-end-point"){var Yt=E+wt,Be=v?L-xt:L+xt;T("x1",r.x1=h?Yt:lt(Yt)),T("y1",r.y1=v?Be:it(Be))}}else{var ut=function(Kt){return kt.indexOf(Kt)!==-1},sr=ut("n"),Pr=ut("s"),Et=ut("w"),ht=ut("e"),pt=sr?q+xt:q,Ot=Pr?z+xt:z,er=Et?N+wt:N,Ht=ht?H+wt:H;v&&(sr&&(pt=q-xt),Pr&&(Ot=z-xt)),(!v&&Ot-pt>f||v&&pt-Ot>f)&&(T(V,r[V]=v?pt:it(pt)),T(W,r[W]=v?Ot:it(Ot))),Ht-er>l&&(T(J,r[J]=h?er:lt(er)),T(ee,r[ee]=h?Ht:lt(Ht)))}t.attr("d",R4(e,r)),at(a,r),rx(e,i,r,oe)}function at(wt,xt){(h||v)&&qt();function qt(){var Ut=xt.type!=="path",Dt=wt.selectAll(".visual-cue").data([0]),Mt=1;Dt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Mt}).classed("visual-cue",!0);var Zt=Ee(h?xt.xanchor:I4.midRange(Ut?[xt.x0,xt.x1]:Us.extractPathCoords(xt.path,Bd.paramIsX))),Yt=Xe(v?xt.yanchor:I4.midRange(Ut?[xt.y0,xt.y1]:Us.extractPathCoords(xt.path,Bd.paramIsY)));if(Zt=Us.roundPositionForSharpStrokeRendering(Zt,Mt),Yt=Us.roundPositionForSharpStrokeRendering(Yt,Mt),h&&v){var Be="M"+(Zt-1-Mt)+","+(Yt-1-Mt)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Dt.attr("d",Be)}else if(h){var ut="M"+(Zt-1-Mt)+","+(Yt-9-Mt)+"v18 h2 v-18 Z";Dt.attr("d",ut)}else{var sr="M"+(Zt-9-Mt)+","+(Yt-1-Mt)+"h18 v2 h-18 Z";Dt.attr("d",sr)}}}function Je(wt){wt.selectAll(".visual-cue").remove()}function Ct(wt,xt,qt){var Ut=xt.xref,Dt=xt.yref,Mt=Nd.getFromId(qt,Ut),Zt=Nd.getFromId(qt,Dt),Yt="";Ut!=="paper"&&!Mt.autorange&&(Yt+=Ut),Dt!=="paper"&&!Zt.autorange&&(Yt+=Dt),ax.setClipUrl(wt,Yt?"clip"+qt._fullLayout._uid+Yt:null,qt)}}function az(e,t,r){return e.replace(Bd.segmentRE,function(i){var a=0,s=i.charAt(0),l=Bd.paramIsX[s],f=Bd.paramIsY[s],h=Bd.numParams[s],v=i.slice(1).replace(Bd.paramRE,function(m){return a>=h||(l[a]?m=t(m):f[a]&&(m=r(m)),a++),m});return s+v})}function Hie(e,t){if(ix(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeShapeIndex){iz(e);return}e._fullLayout._activeShapeIndex=i,e._fullLayout._deactivateShape=iz,F4(e)}}}function iz(e){if(ix(e)){var t=e._fullLayout._activeShapeIndex;t>=0&&(oz(e),delete e._fullLayout._activeShapeIndex,F4(e))}}function Gie(e){if(ix(e)){oz(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var i=[],a=0;a<r.length;a++)a!==t&&i.push(r[a]);return delete e._fullLayout._activeShapeIndex,nz.call("_guiRelayout",e,{shapes:i})}}}});var B4=me((S_e,gz)=>{"use strict";var Ql=sa(),fz=to(),cz=jn(),Ja=G2(),Zie=nx().eraseActiveShape,ox=Bt(),za=ox._,Ka=gz.exports={};Ka.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?za(e,"Download plot as a PNG"):za(e,"Download plot")},icon:Ja.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};ox.notifier(za(e,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(i){i in t&&(r[i]=t[i])}),Ql.call("downloadImage",e,r).then(function(i){ox.notifier(za(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){ox.notifier(za(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Ka.sendDataToCloud={name:"sendDataToCloud",title:function(e){return za(e,"Edit in Chart Studio")},icon:Ja.disk,click:function(e){fz.sendDataToCloud(e)}};Ka.editInChartStudio={name:"editInChartStudio",title:function(e){return za(e,"Edit in Chart Studio")},icon:Ja.pencil,click:function(e){fz.sendDataToCloud(e)}};Ka.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return za(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Ja.zoombox,click:ns};Ka.pan2d={name:"pan2d",_cat:"pan",title:function(e){return za(e,"Pan")},attr:"dragmode",val:"pan",icon:Ja.pan,click:ns};Ka.select2d={name:"select2d",_cat:"select",title:function(e){return za(e,"Box Select")},attr:"dragmode",val:"select",icon:Ja.selectbox,click:ns};Ka.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return za(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Ja.lasso,click:ns};Ka.drawclosedpath={name:"drawclosedpath",title:function(e){return za(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Ja.drawclosedpath,click:ns};Ka.drawopenpath={name:"drawopenpath",title:function(e){return za(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Ja.drawopenpath,click:ns};Ka.drawline={name:"drawline",title:function(e){return za(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Ja.drawline,click:ns};Ka.drawrect={name:"drawrect",title:function(e){return za(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Ja.drawrect,click:ns};Ka.drawcircle={name:"drawcircle",title:function(e){return za(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Ja.drawcircle,click:ns};Ka.eraseshape={name:"eraseshape",title:function(e){return za(e,"Erase active shape")},icon:Ja.eraseshape,click:Zie};Ka.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return za(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:ns};Ka.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return za(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:ns};Ka.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return za(e,"Autoscale")},attr:"zoom",val:"auto",icon:Ja.autoscale,click:ns};Ka.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return za(e,"Reset axes")},attr:"zoom",val:"reset",icon:Ja.home,click:ns};Ka.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return za(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Ja.tooltip_basic,gravity:"ne",click:ns};Ka.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return za(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Ja.tooltip_compare,gravity:"ne",click:ns};function ns(e,t){var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout,l={},f=cz.list(e,null,!0),h=s._cartesianSpikesEnabled,v,m;if(i==="zoom"){var _=a==="in"?.5:2,T=(1+_)/2,M=(1-_)/2,C,E;for(m=0;m<f.length;m++)if(v=f[m],E=v.modebardisable==="none"||v.modebardisable.indexOf(a==="auto"||a==="reset"?"autoscale":"zoominout")===-1,E&&!v.fixedrange)if(C=v._name,a==="auto")l[C+".autorange"]=!0;else if(a==="reset")v._rangeInitial0===void 0&&v._rangeInitial1===void 0?l[C+".autorange"]=!0:v._rangeInitial0===void 0?(l[C+".autorange"]=v._autorangeInitial,l[C+".range"]=[null,v._rangeInitial1]):v._rangeInitial1===void 0?(l[C+".range"]=[v._rangeInitial0,null],l[C+".autorange"]=v._autorangeInitial):l[C+".range"]=[v._rangeInitial0,v._rangeInitial1],v._showSpikeInitial!==void 0&&(l[C+".showspikes"]=v._showSpikeInitial,h==="on"&&!v._showSpikeInitial&&(h="off"));else{var L=[v.r2l(v.range[0]),v.r2l(v.range[1])],I=[T*L[0]+M*L[1],T*L[1]+M*L[0]];l[C+".range[0]"]=v.l2r(I[0]),l[C+".range[1]"]=v.l2r(I[1])}}else i==="hovermode"&&(a==="x"||a==="y")&&(a=s._isHoriz?"y":"x",r.setAttribute("data-val",a)),l[i]=a;s._cartesianSpikesEnabled=h,Ql.call("_guiRelayout",e,l)}Ka.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return za(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Ja.zoombox,click:sx};Ka.pan3d={name:"pan3d",_cat:"pan",title:function(e){return za(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Ja.pan,click:sx};Ka.orbitRotation={name:"orbitRotation",title:function(e){return za(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Ja["3d_rotate"],click:sx};Ka.tableRotation={name:"tableRotation",title:function(e){return za(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Ja["z-axis"],click:sx};function sx(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout._subplots.gl3d||[],l={},f=i.split("."),h=0;h<s.length;h++)l[s[h]+"."+f[1]]=a;var v=a==="pan"?a:"zoom";l.dragmode=v,Ql.call("_guiRelayout",e,l)}Ka.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return za(e,"Reset camera to default")},attr:"resetDefault",icon:Ja.home,click:q4};Ka.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return za(e,"Reset camera to last save")},attr:"resetLastSave",icon:Ja.movie,click:q4};function q4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=i==="resetLastSave",s=i==="resetDefault",l=e._fullLayout,f=l._subplots.gl3d||[],h={},v=0;v<f.length;v++){var m=f[v],_=m+".camera",T=m+".aspectratio",M=m+".aspectmode",C=l[m]._scene,E;a?(h[_+".up"]=C.viewInitial.up,h[_+".eye"]=C.viewInitial.eye,h[_+".center"]=C.viewInitial.center,E=!0):s&&(h[_+".up"]=null,h[_+".eye"]=null,h[_+".center"]=null,E=!0),E&&(h[T+".x"]=C.viewInitial.aspectratio.x,h[T+".y"]=C.viewInitial.aspectratio.y,h[T+".z"]=C.viewInitial.aspectratio.z,h[M]=C.viewInitial.aspectmode)}Ql.call("_guiRelayout",e,h)}Ka.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return za(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ja.tooltip_basic,gravity:"ne",click:Yie};function hz(e,t){var r=t.currentTarget,i=r._previousVal,a=e._fullLayout,s=a._subplots.gl3d||[],l=["xaxis","yaxis","zaxis"],f={},h={};if(i)h=i,r._previousVal=null;else{for(var v=0;v<s.length;v++){var m=s[v],_=a[m],T=m+".hovermode";f[T]=_.hovermode,h[T]=!1;for(var M=0;M<3;M++){var C=l[M],E=m+"."+C+".showspikes";h[E]=!1,f[E]=_[C].showspikes}}r._previousVal=f}return h}function Yie(e,t){var r=hz(e,t);Ql.call("_guiRelayout",e,r)}Ka.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return za(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:N4};Ka.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return za(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:N4};Ka.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return za(e,"Reset")},attr:"reset",val:null,icon:Ja.autoscale,click:N4};Ka.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return za(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ja.tooltip_basic,gravity:"ne",click:dz};function N4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout,l=s._subplots.geo||[],f=0;f<l.length;f++){var h=l[f],v=s[h];if(i==="zoom"){var m=v.projection.scale,_=a==="in"?2*m:.5*m;Ql.call("_guiRelayout",e,h+".projection.scale",_)}}i==="reset"&&im(e,"geo")}Ka.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return za(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Ja.tooltip_basic,gravity:"ne",click:dz};function vz(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function dz(e){var t=vz(e);Ql.call("_guiRelayout",e,"hovermode",t)}Ka.resetViewSankey={name:"resetSankeyGroup",title:function(e){return za(e,"Reset view")},icon:Ja.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var i=e._fullData[r]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}Ql.call("restyle",e,t)}};Ka.toggleHover={name:"toggleHover",title:function(e){return za(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ja.tooltip_basic,gravity:"ne",click:function(e,t){var r=hz(e,t);r.hovermode=vz(e),Ql.call("_guiRelayout",e,r)}};Ka.resetViews={name:"resetViews",title:function(e){return za(e,"Reset views")},icon:Ja.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),ns(e,t),r.setAttribute("data-attr","resetLastSave"),q4(e,t),im(e,"geo"),im(e,"mapbox"),im(e,"map")}};Ka.toggleSpikelines={name:"toggleSpikelines",title:function(e){return za(e,"Toggle Spike Lines")},icon:Ja.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",Ql.call("_guiRelayout",e,Wie(e))}};function Wie(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",i=cz.list(e,null,!0),a={},s=0;s<i.length;s++){var l=i[s];a[l._name+".showspikes"]=r?!0:l._showSpikeInitial}return a}Ka.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return za(e,"Reset view")},attr:"reset",icon:Ja.home,click:function(e){im(e,"mapbox")}};Ka.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(e){return za(e,"Reset view")},attr:"reset",icon:Ja.home,click:function(e){im(e,"map")}};Ka.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return za(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:pz};Ka.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(e){return za(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:mz};Ka.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return za(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:pz};Ka.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(e){return za(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:mz};function pz(e,t){yz(e,t,"mapbox")}function mz(e,t){yz(e,t,"map")}function yz(e,t,r){for(var i=t.currentTarget,a=i.getAttribute("data-val"),s=e._fullLayout,l=s._subplots[r]||[],f=1.05,h={},v=0;v<l.length;v++){var m=l[v],_=s[m].zoom,T=a==="in"?f*_:_/f;h[m+".zoom"]=T}Ql.call("_guiRelayout",e,h)}function im(e,t){for(var r=e._fullLayout,i=r._subplots[t]||[],a={},s=0;s<i.length;s++)for(var l=i[s],f=r[l]._subplot,h=f.viewInitial,v=Object.keys(h),m=0;m<v.length;m++){var _=v[m];a[l+"."+_]=h[_]}Ql.call("_guiRelayout",e,a)}});var O4=me((k_e,wz)=>{"use strict";var _z=B4(),Xie=Object.keys(_z),xz=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],bz=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(xz),nm=[],jie=function(e){if(bz.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();nm.indexOf(t)===-1&&nm.push(t),nm.indexOf(r)===-1&&nm.push(r)}};Xie.forEach(function(e){jie(_z[e])});nm.sort();wz.exports={DRAW_MODES:xz,backButtons:bz,foreButtons:nm}});var U4=me((E_e,Tz)=>{"use strict";var C_e=O4();Tz.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}});var Mz=me((L_e,Az)=>{"use strict";var Jie=Bt(),_g=Oa(),Kie=Ii(),Qie=U4();Az.exports=function(t,r){var i=t.modebar||{},a=Kie.newContainer(r,"modebar");function s(f,h){return Jie.coerce(i,a,Qie,f,h)}s("orientation"),s("bgcolor",_g.addOpacity(r.paper_bgcolor,.5));var l=_g.contrast(_g.rgb(r.modebar.bgcolor));s("color",_g.addOpacity(l,.3)),s("activecolor",_g.addOpacity(l,.7)),s("uirevision",r.uirevision),s("add"),s("remove")}});var Ez=me((D_e,Cz)=>{"use strict";var V4=ja(),$ie=Da(),lx=Bt(),Sz=G2(),ene=t_().version,tne=new DOMParser;function kz(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var Uf=kz.prototype;Uf.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,a="modebar-"+i._uid;this.element.setAttribute("id",a),this.element.setAttribute("role","toolbar"),this._uid=a,this.element.className="modebar modebar--custom",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var s=i.modebar,l="#"+a+" .modebar-group";document.querySelectorAll(l).forEach(function(_){_.style.backgroundColor=s.bgcolor});var f=!this.hasButtons(t),h=this.hasLogo!==r.displaylogo,v=this.locale!==r.locale;if(this.locale=r.locale,(f||h||v)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var m=this.getLogo();r.watermark&&(m.className=m.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(m,this.element.childNodes[0]):this.element.appendChild(m),this.hasLogo=!0}this.updateActiveButton(),lx.setStyleOnHover("#"+a+" .modebar-btn",".active",".icon path","fill: "+s.activecolor,"fill: "+s.color,this.element)};Uf.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=t.createGroup();r.forEach(function(a){var s=a.name;if(!s)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(s)!==-1)throw new Error("button name '"+s+"' is taken");t.buttonsNames.push(s);var l=t.createButton(a);t.buttonElements.push(l),i.appendChild(l)}),t.element.appendChild(i)})};Uf.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";var t=this.graphInfo._fullLayout.modebar;return e.style.backgroundColor=t.bgcolor,e};Uf.createButton=function(e){var t=this,r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&(r.setAttribute("data-title",i),r.setAttribute("aria-label",i)),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var a=e.val;a!==void 0&&(typeof a=="function"&&(a=a(this.graphInfo)),r.setAttribute("data-val",a));var s=e.click;if(typeof s!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(f){e.click(t.graphInfo,f),t.updateActiveButton(f.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&V4.select(r).classed("active",!0);var l=e.icon;return typeof l=="function"?r.appendChild(l()):r.appendChild(this.createIcon(l||Sz.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};Uf.createIcon=function(e){var t=$ie(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(r,"svg"),i.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",e.path),e.transform?a.setAttribute("transform",e.transform):e.ascent!==void 0&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(a)}if(e.svg){var s=tne.parseFromString(e.svg,"application/xml");i=s.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};Uf.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var a=i.getAttribute("data-val")||!0,s=i.getAttribute("data-attr"),l=i.getAttribute("data-toggle")==="true",f=V4.select(i),h=function(_,T){var M=t.modebar,C=_.querySelector(".icon path");C&&(T||_.matches(":hover")?C.style.fill=M.activecolor:C.style.fill=M.color)};if(l){if(s===r){var v=!f.classed("active");f.classed("active",v),h(i,v)}}else{var m=s===null?s:lx.nestedProperty(t,s).get();f.classed("active",m===a),h(i,m===a)}})};Uf.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var i=0;i<e[r].length;i++)if(e[r][i].name!==t[r][i].name)return!1}return!0};function rne(e){return e+" (v"+ene+")"}Uf.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",rne(lx._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(Sz.newplotlylogo)),e.appendChild(t),e};Uf.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};Uf.destroy=function(){lx.removeElement(this.container.querySelector(".modebar"))};function ane(e,t){var r=e._fullLayout,i=new kz({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&V4.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}Cz.exports=ane});var Pz=me((P_e,Dz)=>{"use strict";var ine=jn(),Lz=rs(),H4=sa(),nne=kc().isUnifiedHover,one=Ez(),ux=B4(),sne=O4().DRAW_MODES,lne=Bt().extendDeep;Dz.exports=function(t){var r=t._fullLayout,i=t._context,a=r._modeBar;if(!i.displayModeBar&&!i.watermark){a&&(a.destroy(),delete r._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s=i.modeBarButtons,l;Array.isArray(s)&&s.length?l=dne(s):!i.displayModeBar&&i.watermark?l=[]:l=une(t),a?a.update(t,l):r._modeBar=one(t,l)};function une(e){var t=e._fullLayout,r=e._fullData,i=e._context;function a(Ae,pe){if(typeof pe=="string"){if(pe.toLowerCase()===Ae.toLowerCase())return!0}else{var ke=pe.name,Ee=pe._cat||pe.name;if(ke===Ae||Ee===Ae.toLowerCase())return!0}return!1}var s=t.modebar.add;typeof s=="string"&&(s=[s]);var l=t.modebar.remove;typeof l=="string"&&(l=[l]);var f=i.modeBarButtonsToAdd.concat(s.filter(function(Ae){for(var pe=0;pe<i.modeBarButtonsToRemove.length;pe++)if(a(Ae,i.modeBarButtonsToRemove[pe]))return!1;return!0})),h=i.modeBarButtonsToRemove.concat(l.filter(function(Ae){for(var pe=0;pe<i.modeBarButtonsToAdd.length;pe++)if(a(Ae,i.modeBarButtonsToAdd[pe]))return!1;return!0})),v=t._has("cartesian"),m=t._has("gl3d"),_=t._has("geo"),T=t._has("pie"),M=t._has("funnelarea"),C=t._has("ternary"),E=t._has("mapbox"),L=t._has("map"),I=t._has("polar"),O=t._has("smith"),q=t._has("sankey"),z=fne(t),N=nne(t.hovermode),H=[];function V(Ae){if(Ae.length){for(var pe=[],ke=0;ke<Ae.length;ke++){for(var Ee=Ae[ke],Xe=ux[Ee],lt=Xe.name.toLowerCase(),it=(Xe._cat||Xe.name).toLowerCase(),_t=!1,Ye=0;Ye<h.length;Ye++){var kt=h[Ye].toLowerCase();if(kt===lt||kt===it){_t=!0;break}}_t||pe.push(ux[Ee])}H.push(pe)}}var W=["toImage"];i.showEditInChartStudio?W.push("editInChartStudio"):i.showSendToCloud&&W.push("sendDataToCloud"),V(W);var J=[],ee=[],ie=[],oe=[];(v||T||M||C)+_+m+E+L+I+O>1?(ee=["toggleHover"],ie=["resetViews"]):_?(J=["zoomInGeo","zoomOutGeo"],ee=["hoverClosestGeo"],ie=["resetGeo"]):m?(ee=["hoverClosest3d"],ie=["resetCameraDefault3d","resetCameraLastSave3d"]):E?(J=["zoomInMapbox","zoomOutMapbox"],ee=["toggleHover"],ie=["resetViewMapbox"]):L?(J=["zoomInMap","zoomOutMap"],ee=["toggleHover"],ie=["resetViewMap"]):T?ee=["hoverClosestPie"]:q?(ee=["hoverClosestCartesian","hoverCompareCartesian"],ie=["resetViewSankey"]):ee=["toggleHover"],v&&ee.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(hne(r)||N)&&(ee=[]),v&&!z&&(J=["zoomIn2d","zoomOut2d","autoScale2d"],ie[0]!=="resetViews"&&(ie=["resetScale2d"])),m?oe=["zoom3d","pan3d","orbitRotation","tableRotation"]:v&&!z||C?oe=["zoom2d","pan2d"]:E||L||_?oe=["pan2d"]:I&&(oe=["zoom2d"]),cne(r)&&oe.push("select2d","lasso2d");var fe=[],le=function(Ae){fe.indexOf(Ae)===-1&&ee.indexOf(Ae)!==-1&&fe.push(Ae)};if(Array.isArray(f)){for(var Te=[],Se=0;Se<f.length;Se++){var Me=f[Se];typeof Me=="string"?(Me=Me.toLowerCase(),sne.indexOf(Me)!==-1?(t._has("mapbox")||t._has("map")||t._has("cartesian"))&&oe.push(Me):Me==="togglespikelines"?le("toggleSpikelines"):Me==="togglehover"?le("toggleHover"):Me==="hovercompare"?le("hoverCompareCartesian"):Me==="hoverclosest"?(le("hoverClosestCartesian"),le("hoverClosestGeo"),le("hoverClosest3d"),le("hoverClosestPie")):Me==="v1hovermode"&&(le("hoverClosestCartesian"),le("hoverCompareCartesian"),le("hoverClosestGeo"),le("hoverClosest3d"),le("hoverClosestPie"))):Te.push(Me)}f=Te}return V(oe),V(J.concat(ie)),V(fe),vne(H,f)}function fne(e){for(var t=ine.list({_fullLayout:e},null,!0),r=0;r<t.length;r++){var i=t[r].modebardisable;if(!t[r].fixedrange&&i!=="autoscale+zoominout"&&i!=="zoominout+autoscale")return!1}return!0}function cne(e){for(var t=!1,r=0;r<e.length&&!t;r++){var i=e[r];!i._module||!i._module.selectPoints||(H4.traceIs(i,"scatter-like")?(Lz.hasMarkers(i)||Lz.hasText(i))&&(t=!0):H4.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(t=!0):t=!0)}return t}function hne(e){for(var t=0;t<e.length;t++)if(!H4.traceIs(e[t],"noHover"))return!1;return!0}function vne(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function dne(e){for(var t=lne([],e),r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var s=i[a];if(typeof s=="string")if(ux[s]!==void 0)t[r][a]=ux[s];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return t}});var G4=me((z_e,zz)=>{"use strict";zz.exports={moduleType:"component",name:"modebar",layoutAttributes:U4(),supplyLayoutDefaults:Mz(),manage:Pz()}});var Z4=me((I_e,Iz)=>{"use strict";var pne=No().FROM_BL;Iz.exports=function(t,r,i){i===void 0&&(i=pne[t.constraintoward||"center"]);var a=[t.r2l(t.range[0]),t.r2l(t.range[1])],s=a[0]+(a[1]-a[0])*i;t.range=t._input.range=[t.l2r(s+(a[0]-s)*r),t.l2r(s+(a[1]-s)*r)],t.setScale()}});var bg=me(xg=>{"use strict";var Od=Bt(),Y4=ag(),Uu=jn().id2name,mne=Nu(),Rz=Z4(),yne=m2(),gne=Zi().ALMOST_EQUAL,_ne=No().FROM_BL;xg.handleDefaults=function(e,t,r){var i=r.axIds,a=r.axHasImage,s=t._axisConstraintGroups=[],l=t._axisMatchGroups=[],f,h,v,m,_,T,M,C;for(f=0;f<i.length;f++)m=Uu(i[f]),_=e[m],T=t[m],xne(_,T,{axIds:i,layoutOut:t,hasImage:a[m]});function E(W,J){for(f=0;f<W.length;f++){h=W[f];for(v in h)t[Uu(v)][J]=h}}for(E(l,"_matchGroup"),f=0;f<s.length;f++){h=s[f];for(v in h)if(T=t[Uu(v)],T.fixedrange){for(var L in h){var I=Uu(L);(e[I]||{}).fixedrange===!1&&Od.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),t[I].fixedrange=!0}break}}for(f=0;f<s.length;){h=s[f];for(v in h){T=t[Uu(v)],T._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(h).length&&(s.splice(f,1),f--);break}f++}E(s,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],q=!1,z=!1;function N(){C=T[M],M==="rangebreaks"&&(z=T._hasDayOfWeekBreaks)}for(f=0;f<l.length;f++){h=l[f];for(var H=0;H<O.length;H++){M=O[H],C=null;var V;for(v in h)if(m=Uu(v),_=e[m],T=t[m],M in T){if(!T.matches&&(V=T,M in _)){N();break}C===null&&M in _&&N()}if(M==="range"&&C&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(q=!0),M==="autorange"&&C===null&&q&&(C=!1),C===null&&M in V&&(C=V[M]),C!==null)for(v in h)T=t[Uu(v)],T[M]=M==="range"?C.slice():C,M==="rangebreaks"&&(T._hasDayOfWeekBreaks=z,yne(T,t))}}};function xne(e,t,r){var i=r.axIds,a=r.layoutOut,s=r.hasImage,l=a._axisConstraintGroups,f=a._axisMatchGroups,h=t._id,v=h.charAt(0),m=((a._splomAxes||{})[v]||{})[h]||{},_=t._id,T=_.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function M(oe,fe){return Od.coerce(e,t,mne,oe,fe)}M("constrain",s?"domain":"range"),Od.coerce(e,t,{constraintoward:{valType:"enumerated",values:T?["left","center","right"]:["bottom","middle","top"],dflt:T?"center":"middle"}},"constraintoward");var C=t.type,E,L,I=[];for(E=0;E<i.length;E++)if(L=i[E],L!==_){var O=a[Uu(L)];O.type===C&&I.push(L)}var q=Nz(l,_);if(q){var z=[];for(E=0;E<I.length;E++)L=I[E],q[L]||z.push(L);I=z}var N=I.length,H,V;N&&(e.matches||m.matches)&&(H=Od.coerce(e,t,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(m.matches)!==-1?m.matches:void 0}},"matches"));var W=s&&!T?t.anchor:void 0;if(N&&!H&&(e.scaleanchor||W)&&(V=Od.coerce(e,t,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",W)),H){t._matchGroup=W4(f,_,H,1);var J=a[Uu(H)],ee=Fz(a,t)/Fz(a,J);T!==(H.charAt(0)==="x")&&(ee=(T?"x":"y")+ee),W4(l,_,H,ee)}else e.matches&&i.indexOf(e.matches)!==-1&&Od.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(V){var ie=M("scaleratio");ie||(ie=t.scaleratio=1),W4(l,_,V,ie)}else e.scaleanchor&&i.indexOf(e.scaleanchor)!==-1&&Od.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function Fz(e,t){var r=t.domain;return r||(r=e[Uu(t.overlaying)].domain),r[1]-r[0]}function Nz(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function W4(e,t,r,i){var a,s,l,f,h,v=Nz(e,t);v===null?(v={},v[t]=1,h=e.length,e.push(v)):h=e.indexOf(v);var m=Object.keys(v);for(a=0;a<e.length;a++)if(l=e[a],a!==h&&l[r]){var _=l[r];for(s=0;s<m.length;s++)f=m[s],l[f]=X4(_,X4(i,v[f]));e.splice(h,1);return}if(i!==1)for(s=0;s<m.length;s++){var T=m[s];v[T]=X4(i,v[T])}v[r]=1}function X4(e,t){var r="",i="",a,s;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],a=r.length,e=+e.slice(a)),typeof t=="string"&&(i=t.match(/^[xy]*/)[0],s=i.length,t=+t.slice(s));var l=e*t;return!a&&!s?l:!a||!s||r.charAt(0)===i.charAt(0)?r+i+e*t:a===s?l:(a>s?r.slice(s):i.slice(a))+l}function bne(e,t){for(var r=t._size,i=r.h/r.w,a={},s=Object.keys(e),l=0;l<s.length;l++){var f=s[l],h=e[f];if(typeof h=="string"){var v=h.match(/^[xy]*/)[0],m=v.length;h=+h.slice(m);for(var _=v.charAt(0)==="y"?i:1/i,T=0;T<m;T++)h*=_}a[f]=h}return a}xg.enforce=function(t){var r=t._fullLayout,i=r._axisConstraintGroups||[],a,s,l,f,h,v,m,_;for(a=0;a<i.length;a++){l=bne(i[a],r);var T=Object.keys(l),M=1/0,C=0,E=1/0,L={},I={},O=!1;for(s=0;s<T.length;s++)f=T[s],I[f]=h=r[Uu(f)],h._inputDomain?h.domain=h._inputDomain.slice():h._inputDomain=h.domain.slice(),h._inputRange||(h._inputRange=h.range.slice()),h.setScale(),L[f]=v=Math.abs(h._m)/l[f],M=Math.min(M,v),(h.constrain==="domain"||!h._constraintShrinkable)&&(E=Math.min(E,v)),delete h._constraintShrinkable,C=Math.max(C,v),h.constrain==="domain"&&(O=!0);if(!(M>gne*C&&!O)){for(s=0;s<T.length;s++)if(f=T[s],v=L[f],h=I[f],m=h.constrain,v!==E||m==="domain")if(_=v/E,m==="range")Rz(h,_);else{var q=h._inputDomain,z=(h.domain[1]-h.domain[0])/(q[1]-q[0]),N=(h.r2l(h.range[1])-h.r2l(h.range[0]))/(h.r2l(h._inputRange[1])-h.r2l(h._inputRange[0]));if(_/=z,_*N<1){h.domain=h._input.domain=q.slice(),Rz(h,_);continue}if(N<1&&(h.range=h._input.range=h._inputRange.slice(),_*=N),h.autorange){var H=h.r2l(h.range[0]),V=h.r2l(h.range[1]),W=(H+V)/2,J=W,ee=W,ie=Math.abs(V-W),oe=W-ie*_*1.0001,fe=W+ie*_*1.0001,le=Y4.makePadFn(r,h,0),Te=Y4.makePadFn(r,h,1);qz(h,_);var Se=Math.abs(h._m),Me=Y4.concatExtremes(t,h),Ae=Me.min,pe=Me.max,ke,Ee;for(Ee=0;Ee<Ae.length;Ee++)ke=Ae[Ee].val-le(Ae[Ee])/Se,ke>oe&&ke<J&&(J=ke);for(Ee=0;Ee<pe.length;Ee++)ke=pe[Ee].val+Te(pe[Ee])/Se,ke<fe&&ke>ee&&(ee=ke);var Xe=(ee-J)/(2*ie);_/=Xe,J=h.l2r(J),ee=h.l2r(ee),h.range=h._input.range=H<V?[J,ee]:[ee,J]}qz(h,_)}}}};xg.getAxisGroup=function(t,r){for(var i=t._axisMatchGroups,a=0;a<i.length;a++){var s=i[a];if(s[r])return"g"+a}return r};xg.clean=function(t,r){if(r._inputDomain){for(var i=!1,a=r._id,s=t._fullLayout._axisConstraintGroups,l=0;l<s.length;l++)if(s[l][a]){i=!0;break}(!i||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function qz(e,t){var r=e._inputDomain,i=_ne[e.constraintoward],a=r[0]+(r[1]-r[0])*i;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t],e.setScale()}});var hx=me(no=>{"use strict";var cx=ja(),os=sa(),fl=to(),$l=Bt(),j4=ro(),J4=H2(),wg=Oa(),om=xi(),Bz=tg(),Gz=G4(),Tg=Xi(),Pc=No(),Zz=bg(),wne=Zz.enforce,Tne=Zz.clean,Oz=ag().doAutoRange,Yz="start",Ane="middle",Wz="end",Mne=eo().zindexSeparator;no.layoutStyles=function(e){return $l.syncOrAsync([fl.doAutoMargin,kne],e)};function Sne(e,t,r){for(var i=0;i<r.length;i++){var a=r[i][0],s=r[i][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&s[0]<t[1]&&s[1]>t[0])return!0}return!1}function kne(e){var t=e._fullLayout,r=t._size,i=r.p,a=Tg.list(e,"",!0),s,l,f,h,v,m;if(t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(om.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor),no.drawMainTitle(e),Gz.manage(e),!t._has("cartesian"))return fl.previousPromises(e);function _(yt,de,ze){var _e=yt._lw/2;if(yt._id.charAt(0)==="x"){if(de){if(ze==="top")return de._offset-i-_e}else return r.t+r.h*(1-(yt.position||0))+_e%1;return de._offset+de._length+i+_e}if(de){if(ze==="right")return de._offset+de._length+i+_e}else return r.l+r.w*(yt.position||0)+_e%1;return de._offset-i-_e}for(s=0;s<a.length;s++){h=a[s];var T=h._anchorAxis;h._linepositions={},h._lw=om.crispRound(e,h.linewidth,1),h._mainLinePosition=_(h,T,h.side),h._mainMirrorPosition=h.mirror&&T?_(h,T,Pc.OPPOSITE_SIDE[h.side]):null}var M=[],C=[],E=[],L=wg.opacity(t.paper_bgcolor)===1&&wg.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(l in t._plots)if(f=t._plots[l],f.mainplot)f.bg&&f.bg.remove(),f.bg=void 0;else{var I=f.xaxis.domain,O=f.yaxis.domain,q=f.plotgroup;if(Sne(I,O,E)&&l.indexOf(Mne)===-1){var z=q.node(),N=f.bg=$l.ensureSingle(q,"rect","bg");z.insertBefore(N.node(),z.childNodes[0]),C.push(l)}else q.select("rect.bg").remove(),E.push([I,O]),L||(M.push(l),C.push(l))}var H=t._bgLayer.selectAll(".bg").data(M);for(H.enter().append("rect").classed("bg",!0),H.exit().remove(),H.each(function(yt){t._plots[yt].bg=cx.select(this)}),s=0;s<C.length;s++)f=t._plots[C[s]],v=f.xaxis,m=f.yaxis,f.bg&&v._offset!==void 0&&m._offset!==void 0&&f.bg.call(om.setRect,v._offset-i,m._offset-i,v._length+2*i,m._length+2*i).call(wg.fill,t.plot_bgcolor).style("stroke-width",0);if(!t._hasOnlyLargeSploms)for(l in t._plots){f=t._plots[l],v=f.xaxis,m=f.yaxis;var V=f.clipId="clip"+t._uid+l+"plot",W=$l.ensureSingleById(t._clips,"clipPath",V,function(yt){yt.classed("plotclip",!0).append("rect")});f.clipRect=W.select("rect").attr({width:v._length,height:m._length}),om.setTranslate(f.plot,v._offset,m._offset);var J,ee;f._hasClipOnAxisFalse?(J=null,ee=V):(J=V,ee=null),om.setClipUrl(f.plot,J,e),f.layerClipId=ee}var ie,oe,fe,le,Te,Se,Me,Ae,pe,ke,Ee,Xe,lt;function it(yt){return"M"+ie+","+yt+"H"+oe}function _t(yt){return"M"+v._offset+","+yt+"h"+v._length}function Ye(yt){return"M"+yt+","+Ae+"V"+Me}function kt(yt){return m._shift!==void 0&&(yt+=m._shift),"M"+yt+","+m._offset+"v"+m._length}function st(yt,de,ze){if(!yt.showline||l!==yt._mainSubplot)return"";if(!yt._anchorAxis)return ze(yt._mainLinePosition);var _e=de(yt._mainLinePosition);return yt.mirror&&(_e+=de(yt._mainMirrorPosition)),_e}for(l in t._plots){f=t._plots[l],v=f.xaxis,m=f.yaxis;var dt="M0,0";Uz(v,l)&&(Te=fx(v,"left",m,a),ie=v._offset-(Te?i+Te:0),Se=fx(v,"right",m,a),oe=v._offset+v._length+(Se?i+Se:0),fe=_(v,m,"bottom"),le=_(v,m,"top"),lt=!v._anchorAxis||l!==v._mainSubplot,lt&&(v.mirror==="allticks"||v.mirror==="all")&&(v._linepositions[l]=[fe,le]),dt=st(v,it,_t),lt&&v.showline&&(v.mirror==="all"||v.mirror==="allticks")&&(dt+=it(fe)+it(le)),f.xlines.style("stroke-width",v._lw+"px").call(wg.stroke,v.showline?v.linecolor:"rgba(0,0,0,0)")),f.xlines.attr("d",dt);var It="M0,0";Uz(m,l)&&(Ee=fx(m,"bottom",v,a),Me=m._offset+m._length+(Ee?i:0),Xe=fx(m,"top",v,a),Ae=m._offset-(Xe?i:0),pe=_(m,v,"left"),ke=_(m,v,"right"),lt=!m._anchorAxis||l!==m._mainSubplot,lt&&(m.mirror==="allticks"||m.mirror==="all")&&(m._linepositions[l]=[pe,ke]),It=st(m,Ye,kt),lt&&m.showline&&(m.mirror==="all"||m.mirror==="allticks")&&(It+=Ye(pe)+Ye(ke)),f.ylines.style("stroke-width",m._lw+"px").call(wg.stroke,m.showline?m.linecolor:"rgba(0,0,0,0)")),f.ylines.attr("d",It)}return Tg.makeClipPaths(e),fl.previousPromises(e)}function Uz(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function Vz(e,t,r){if(!r.showline||!r._lw)return!1;if(r.mirror==="all"||r.mirror==="allticks")return!0;var i=r._anchorAxis;if(!i)return!1;var a=Pc.FROM_BL[t];return r.side===t?i.domain[a]===e.domain[a]:r.mirror&&i.domain[1-a]===e.domain[1-a]}function fx(e,t,r,i){if(Vz(e,t,r))return r._lw;for(var a=0;a<i.length;a++){var s=i[a];if(s._mainAxis===r._mainAxis&&Vz(e,t,s))return s._lw}return 0}no.drawMainTitle=function(e){var t=e._fullLayout.title,r=e._fullLayout,i=Ine(r),a=Rne(r),s=zne(r,a),l=Pne(r,i);if(Bz.draw(e,"gtitle",{propContainer:r,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:r._dfltTitle.plot,subtitlePlaceholder:r._dfltTitle.subtitle,attributes:{x:l,y:s,"text-anchor":i,dy:a}}),t.text&&t.automargin){var f=cx.select(e).selectAll(".gtitle"),h=om.bBox(cx.select(e).selectAll(".g-gtitle").node()).height,v=Lne(e,t,h);if(v>0){Dne(e,s,v,h),f.attr({x:l,y:s,"text-anchor":i,dy:Hz(t.yanchor)}).call(j4.positionText,l,s);var m=(t.text.match(j4.BR_TAG_ALL)||[]).length;if(m){var _=Pc.LINE_SPACING*m+Pc.MID_SHIFT;t.y===0&&(_=-_),f.selectAll(".line").each(function(){var L=+this.getAttribute("dy").slice(0,-2)-_+"em";this.setAttribute("dy",L)})}var T=cx.select(e).selectAll(".gtitle-subtitle");if(T.node()){var M=f.node().getBBox(),C=M.y+M.height,E=C+Bz.SUBTITLE_PADDING_EM*t.subtitle.font.size;T.attr({x:l,y:E,"text-anchor":i,dy:Hz(t.yanchor)}).call(j4.positionText,l,E)}}}};function Cne(e,t,r,i,a){var s=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height,l=$l.isTopAnchor(t)?i:i-a,f=r==="b"?s-l:l;return $l.isTopAnchor(t)&&r==="t"||$l.isBottomAnchor(t)&&r==="b"?!1:f<a}function Ene(e,t,r,i,a){var s=0;return r==="middle"&&(s+=a/2),e==="t"?(r==="top"&&(s+=a),s+=i-t*i):(r==="bottom"&&(s+=a),s+=t*i),s}function Lne(e,t,r){var i=t.y,a=t.yanchor,s=i>.5?"t":"b",l=e._fullLayout.margin[s],f=0;return t.yref==="paper"?f=r+t.pad.t+t.pad.b:t.yref==="container"&&(f=Ene(s,i,a,e._fullLayout.height,r)+t.pad.t+t.pad.b),f>l?f:0}function Dne(e,t,r,i){var a="title.automargin",s=e._fullLayout.title,l=s.y>.5?"t":"b",f={x:s.x,y:s.y,t:0,b:0},h={};s.yref==="paper"&&Cne(e,s,l,t,i)?f[l]=r:s.yref==="container"&&(h[l]=r,e._fullLayout._reservedMargin[a]=h),fl.allowAutoMargin(e,a),fl.autoMargin(e,a,f)}function Pne(e,t){var r=e.title,i=e._size,a=0;switch(t===Yz?a=r.pad.l:t===Wz&&(a=-r.pad.r),r.xref){case"paper":return i.l+i.w*r.x+a;case"container":default:return e.width*r.x+a}}function zne(e,t){var r=e.title,i=e._size,a=0;if(t==="0em"||!t?a=-r.pad.b:t===Pc.CAP_SHIFT+"em"&&(a=r.pad.t),r.y==="auto")return i.t/2;switch(r.yref){case"paper":return i.t+i.h-i.h*r.y+a;case"container":default:return e.height-e.height*r.y+a}}function Hz(e){return e==="top"?Pc.CAP_SHIFT+.3+"em":e==="bottom"?"-0.3em":Pc.MID_SHIFT+"em"}function Ine(e){var t=e.title,r=Ane;return $l.isRightAnchor(t)?r=Wz:$l.isLeftAnchor(t)&&(r=Yz),r}function Rne(e){var t=e.title,r="0em";return $l.isTopAnchor(t)?r=Pc.CAP_SHIFT+"em":$l.isMiddleAnchor(t)&&(r=Pc.MID_SHIFT+"em"),r}no.doTraceStyle=function(e){var t=e.calcdata,r=[],i;for(i=0;i<t.length;i++){var a=t[i],s=a[0]||{},l=s.trace||{},f=l._module||{},h=f.arraysToCalcdata;h&&h(a,l);var v=f.editStyle;v&&r.push({fn:v,cd0:s})}if(r.length){for(i=0;i<r.length;i++){var m=r[i];m.fn(e,m.cd0)}J4(e),no.redrawReglTraces(e)}return fl.style(e),os.getComponentMethod("legend","draw")(e),fl.previousPromises(e)};no.doColorBars=function(e){return os.getComponentMethod("colorbar","draw")(e),fl.previousPromises(e)};no.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,os.call("_doPlot",e,"",t)};no.doLegend=function(e){return os.getComponentMethod("legend","draw")(e),fl.previousPromises(e)};no.doTicksRelayout=function(e){return Tg.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(os.subplotsRegistry.splom.updateGrid(e),J4(e),no.redrawReglTraces(e)),no.drawMainTitle(e),fl.previousPromises(e)};no.doModeBar=function(e){var t=e._fullLayout;Gz.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return fl.previousPromises(e)};no.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,i=0;i<r.length;i++){var a=t[r[i]],s=a._scene;s.setViewport(a)}};no.drawData=function(e){var t=e._fullLayout;J4(e);for(var r=t._basePlotModules,i=0;i<r.length;i++)r[i].plot(e);return no.redrawReglTraces(e),fl.style(e),os.getComponentMethod("selections","draw")(e),os.getComponentMethod("shapes","draw")(e),os.getComponentMethod("annotations","draw")(e),os.getComponentMethod("images","draw")(e),t._replotting=!1,fl.previousPromises(e)};no.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData,i=[],a=[],s,l;for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),s=0;s<r.length;s++){var f=r[s];f.visible===!0&&f._length!==0&&(f.type==="splom"?t._splomScenes[f.uid].draw():f.type==="scattergl"?$l.pushUnique(i,f.xaxis+f.yaxis):f.type==="scatterpolargl"&&$l.pushUnique(a,f.subplot))}for(s=0;s<i.length;s++)l=t._plots[i[s]],l._scene&&l._scene.draw();for(s=0;s<a.length;s++)l=t[a[s]]._subplot,l._scene&&l._scene.draw()}};no.doAutoRangeAndConstraints=function(e){for(var t=Tg.list(e,"",!0),r,i={},a=0;a<t.length;a++)if(r=t[a],!i[r._id]){i[r._id]=1,Tne(e,r),Oz(e,r);var s=r._matchGroup;if(s)for(var l in s){var f=Tg.getFromId(e,l);Oz(e,f,r.range),i[l]=1}}wne(e)};no.finalDraw=function(e){os.getComponentMethod("rangeslider","draw")(e),os.getComponentMethod("rangeselector","draw")(e)};no.drawMarginPushers=function(e){os.getComponentMethod("legend","draw")(e),os.getComponentMethod("rangeselector","draw")(e),os.getComponentMethod("sliders","draw")(e),os.getComponentMethod("updatemenus","draw")(e),os.getComponentMethod("colorbar","draw")(e)}});var $4=me((q_e,Qz)=>{"use strict";var Fne=jh().readPaths,qne=ex(),Xz=Bh().clearOutlineControllers,K4=Oa(),jz=xi(),Nne=Ii().arrayEditor,Jz=Qh(),Bne=Jz.getPathString;Qz.exports={draw:vx,drawOne:Kz,activateLastSelection:Vne};function vx(e){var t=e._fullLayout;Xz(e),t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var i=t._plots[r].selectionLayer;i&&i.selectAll("path").remove()}for(var a=0;a<t.selections.length;a++)Kz(e,a)}function dx(e){return e._context.editSelection}function Kz(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=Jz.makeSelectionsOptionsAndPlotinfo(e,t),i=r.options,a=r.plotinfo;if(!i._input)return;s(e._fullLayout._selectionLayer);function s(l){var f=Bne(e,i),h={"data-index":t,"fill-rule":"evenodd",d:f},v=i.opacity,m="rgba(0,0,0,0)",_=i.line.color||K4.contrast(e._fullLayout.plot_bgcolor),T=i.line.width,M=i.line.dash;T||(T=5,M="solid");var C=dx(e)&&e._fullLayout._activeSelectionIndex===t;C&&(m=e._fullLayout.activeselection.fillcolor,v=e._fullLayout.activeselection.opacity);for(var E=[],L=1;L>=0;L--){var I=l.append("path").attr(h).style("opacity",L?.1:v).call(K4.stroke,_).call(K4.fill,m).call(jz.dashLine,L?"solid":M,L?4+T:T);if(One(I,e,i),C){var O=Nne(e.layout,"selections",i);I.style({cursor:"move"});var q={element:I.node(),plotinfo:a,gd:e,editHelpers:O,isActiveSelection:!0},z=Fne(f,e);qne(z,I,q)}else I.style("pointer-events",L?"all":"none");E[L]=I}var N=E[0],H=E[1];H.node().addEventListener("click",function(){return Une(e,N)})}}function One(e,t,r){var i=r.xref+r.yref;jz.setClipUrl(e,"clip"+t._fullLayout._uid+i,t)}function Une(e,t){if(dx(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){Q4(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=Q4,vx(e)}}}function Vne(e){if(dx(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=Q4,vx(e)}}function Q4(e){if(dx(e)){var t=e._fullLayout._activeSelectionIndex;t>=0&&(Xz(e),delete e._fullLayout._activeSelectionIndex,vx(e))}}});var eI=me((N_e,$z)=>{function Hne(){var e,t=0,r=!1;function i(a,s){return e.list.push({type:a,data:s?JSON.parse(JSON.stringify(s)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(a,s){return i("check",{seg1:a,seg2:s})},segmentChop:function(a,s){return i("div_seg",{seg:a,pt:s}),i("chop",{seg:a,pt:s})},statusRemove:function(a){return i("pop_seg",{seg:a})},segmentUpdate:function(a){return i("seg_update",{seg:a})},segmentNew:function(a,s){return i("new_seg",{seg:a,primary:s})},segmentRemove:function(a){return i("rem_seg",{seg:a})},tempStatus:function(a,s,l){return i("temp_status",{seg:a,above:s,below:l})},rewind:function(a){return i("rewind",{seg:a})},status:function(a,s,l){return i("status",{seg:a,above:s,below:l})},vert:function(a){return a===r?e:(r=a,i("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),i("log",{txt:a})},reset:function(){return i("reset")},selected:function(a){return i("selected",{segs:a})},chainStart:function(a){return i("chain_start",{seg:a})},chainRemoveHead:function(a,s){return i("chain_rem_head",{index:a,pt:s})},chainRemoveTail:function(a,s){return i("chain_rem_tail",{index:a,pt:s})},chainNew:function(a,s){return i("chain_new",{pt1:a,pt2:s})},chainMatch:function(a){return i("chain_match",{index:a})},chainClose:function(a){return i("chain_close",{index:a})},chainAddHead:function(a,s){return i("chain_add_head",{index:a,pt:s})},chainAddTail:function(a,s){return i("chain_add_tail",{index:a,pt:s})},chainConnect:function(a,s){return i("chain_con",{index1:a,index2:s})},chainReverse:function(a){return i("chain_rev",{index:a})},chainJoin:function(a,s){return i("chain_join",{index1:a,index2:s})},done:function(){return i("done")}},e}$z.exports=Hne});var rI=me((B_e,tI)=>{function Gne(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,i,a){var s=i[0],l=i[1],f=a[0],h=a[1],v=r[0],m=r[1];return(f-s)*(m-l)-(h-l)*(v-s)>=-e},pointBetween:function(r,i,a){var s=r[1]-i[1],l=a[0]-i[0],f=r[0]-i[0],h=a[1]-i[1],v=f*l+s*h;if(v<e)return!1;var m=l*l+h*h;return!(v-m>-e)},pointsSameX:function(r,i){return Math.abs(r[0]-i[0])<e},pointsSameY:function(r,i){return Math.abs(r[1]-i[1])<e},pointsSame:function(r,i){return t.pointsSameX(r,i)&&t.pointsSameY(r,i)},pointsCompare:function(r,i){return t.pointsSameX(r,i)?t.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(r,i,a){var s=r[0]-i[0],l=r[1]-i[1],f=i[0]-a[0],h=i[1]-a[1];return Math.abs(s*h-f*l)<e},linesIntersect:function(r,i,a,s){var l=i[0]-r[0],f=i[1]-r[1],h=s[0]-a[0],v=s[1]-a[1],m=l*v-f*h;if(Math.abs(m)<e)return!1;var _=r[0]-a[0],T=r[1]-a[1],M=(h*T-v*_)/m,C=(l*T-f*_)/m,E={alongA:0,alongB:0,pt:[r[0]+M*l,r[1]+M*f]};return M<=-e?E.alongA=-2:M<e?E.alongA=-1:M-1<=-e?E.alongA=0:M-1<e?E.alongA=1:E.alongA=2,C<=-e?E.alongB=-2:C<e?E.alongB=-1:C-1<=-e?E.alongB=0:C-1<e?E.alongB=1:E.alongB=2,E},pointInsideRegion:function(r,i){for(var a=r[0],s=r[1],l=i[i.length-1][0],f=i[i.length-1][1],h=!1,v=0;v<i.length;v++){var m=i[v][0],_=i[v][1];_-s>e!=f-s>e&&(l-m)*(s-_)/(f-_)+m-a>e&&(h=!h),l=m,f=_}return h}};return t}tI.exports=Gne});var iI=me((O_e,aI)=>{var Zne={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var i=e.root,a=e.root.next;a!==null;){if(r(a)){t.prev=a.prev,t.next=a,a.prev.next=t,a.prev=t;return}i=a,a=a.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var r=e.root,i=e.root.next;i!==null&&!t(i);)r=i,i=i.next;return{before:r===e.root?null:r,after:i,insert:function(a){return a.prev=r,a.next=i,r.next=a,i!==null&&(i.prev=a),a}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};aI.exports=Zne});var oI=me((U_e,nI)=>{var Ag=iI();function Yne(e,t,r){function i(C,E){return{id:r?r.segmentId():-1,start:C,end:E,myFill:{above:null,below:null},otherFill:null}}function a(C,E,L){return{id:r?r.segmentId():-1,start:C,end:E,myFill:{above:L.myFill.above,below:L.myFill.below},otherFill:null}}var s=Ag.create();function l(C,E,L,I,O,q){var z=t.pointsCompare(E,O);return z!==0?z:t.pointsSame(L,q)?0:C!==I?C?1:-1:t.pointAboveOrOnLine(L,I?O:q,I?q:O)?1:-1}function f(C,E){s.insertBefore(C,function(L){var I=l(C.isStart,C.pt,E,L.isStart,L.pt,L.other.pt);return I<0})}function h(C,E){var L=Ag.node({isStart:!0,pt:C.start,seg:C,primary:E,other:null,status:null});return f(L,C.end),L}function v(C,E,L){var I=Ag.node({isStart:!1,pt:E.end,seg:E,primary:L,other:C,status:null});C.other=I,f(I,C.pt)}function m(C,E){var L=h(C,E);return v(L,C,E),L}function _(C,E){r&&r.segmentChop(C.seg,E),C.other.remove(),C.seg.end=E,C.other.pt=E,f(C.other,C.pt)}function T(C,E){var L=a(E,C.seg.end,C.seg);return _(C,E),m(L,C.primary)}function M(C,E){var L=Ag.create();function I(Te,Se){var Me=Te.seg.start,Ae=Te.seg.end,pe=Se.seg.start,ke=Se.seg.end;return t.pointsCollinear(Me,pe,ke)?t.pointsCollinear(Ae,pe,ke)||t.pointAboveOrOnLine(Ae,pe,ke)?1:-1:t.pointAboveOrOnLine(Me,pe,ke)?1:-1}function O(Te){return L.findTransition(function(Se){var Me=I(Te,Se.ev);return Me>0})}function q(Te,Se){var Me=Te.seg,Ae=Se.seg,pe=Me.start,ke=Me.end,Ee=Ae.start,Xe=Ae.end;r&&r.checkIntersection(Me,Ae);var lt=t.linesIntersect(pe,ke,Ee,Xe);if(lt===!1){if(!t.pointsCollinear(pe,ke,Ee)||t.pointsSame(pe,Xe)||t.pointsSame(ke,Ee))return!1;var it=t.pointsSame(pe,Ee),_t=t.pointsSame(ke,Xe);if(it&&_t)return Se;var Ye=!it&&t.pointBetween(pe,Ee,Xe),kt=!_t&&t.pointBetween(ke,Ee,Xe);if(it)return kt?T(Se,ke):T(Te,Xe),Se;Ye&&(_t||(kt?T(Se,ke):T(Te,Xe)),T(Se,pe))}else lt.alongA===0&&(lt.alongB===-1?T(Te,Ee):lt.alongB===0?T(Te,lt.pt):lt.alongB===1&&T(Te,Xe)),lt.alongB===0&&(lt.alongA===-1?T(Se,pe):lt.alongA===0?T(Se,lt.pt):lt.alongA===1&&T(Se,ke));return!1}for(var z=[];!s.isEmpty();){var N=s.getHead();if(r&&r.vert(N.pt[0]),N.isStart){let Te=function(){if(V){var Se=q(N,V);if(Se)return Se}return W?q(N,W):!1};var le=Te;r&&r.segmentNew(N.seg,N.primary);var H=O(N),V=H.before?H.before.ev:null,W=H.after?H.after.ev:null;r&&r.tempStatus(N.seg,V?V.seg:!1,W?W.seg:!1);var J=Te();if(J){if(e){var ee;N.seg.myFill.below===null?ee=!0:ee=N.seg.myFill.above!==N.seg.myFill.below,ee&&(J.seg.myFill.above=!J.seg.myFill.above)}else J.seg.otherFill=N.seg.myFill;r&&r.segmentUpdate(J.seg),N.other.remove(),N.remove()}if(s.getHead()!==N){r&&r.rewind(N.seg);continue}if(e){var ee;N.seg.myFill.below===null?ee=!0:ee=N.seg.myFill.above!==N.seg.myFill.below,W?N.seg.myFill.below=W.seg.myFill.above:N.seg.myFill.below=C,ee?N.seg.myFill.above=!N.seg.myFill.below:N.seg.myFill.above=N.seg.myFill.below}else if(N.seg.otherFill===null){var ie;W?N.primary===W.primary?ie=W.seg.otherFill.above:ie=W.seg.myFill.above:ie=N.primary?E:C,N.seg.otherFill={above:ie,below:ie}}r&&r.status(N.seg,V?V.seg:!1,W?W.seg:!1),N.other.status=H.insert(Ag.node({ev:N}))}else{var oe=N.status;if(oe===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(L.exists(oe.prev)&&L.exists(oe.next)&&q(oe.prev.ev,oe.next.ev),r&&r.statusRemove(oe.ev.seg),oe.remove(),!N.primary){var fe=N.seg.myFill;N.seg.myFill=N.seg.otherFill,N.seg.otherFill=fe}z.push(N.seg)}s.getHead().remove()}return r&&r.done(),z}return e?{addRegion:function(C){for(var E,L=C[C.length-1],I=0;I<C.length;I++){E=L,L=C[I];var O=t.pointsCompare(E,L);O!==0&&m(i(O<0?E:L,O<0?L:E),!0)}},calculate:function(C){return M(C,!1)}}:{calculate:function(C,E,L,I){return C.forEach(function(O){m(a(O.start,O.end,O),!0)}),L.forEach(function(O){m(a(O.start,O.end,O),!1)}),M(E,I)}}}nI.exports=Yne});var lI=me((V_e,sI)=>{function Wne(e,t,r){var i=[],a=[];return e.forEach(function(s){var l=s.start,f=s.end;if(t.pointsSame(l,f)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(s);var h={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},m=h;function _(le,Te,Se){return m.index=le,m.matches_head=Te,m.matches_pt1=Se,m===h?(m=v,!1):(m=null,!0)}for(var T=0;T<i.length;T++){var M=i[T],C=M[0],E=M[1],L=M[M.length-1],I=M[M.length-2];if(t.pointsSame(C,l)){if(_(T,!0,!0))break}else if(t.pointsSame(C,f)){if(_(T,!0,!1))break}else if(t.pointsSame(L,l)){if(_(T,!1,!0))break}else if(t.pointsSame(L,f)&&_(T,!1,!1))break}if(m===h){i.push([l,f]),r&&r.chainNew(l,f);return}if(m===v){r&&r.chainMatch(h.index);var O=h.index,q=h.matches_pt1?f:l,z=h.matches_head,M=i[O],N=z?M[0]:M[M.length-1],H=z?M[1]:M[M.length-2],V=z?M[M.length-1]:M[0],W=z?M[M.length-2]:M[1];if(t.pointsCollinear(H,N,q)&&(z?(r&&r.chainRemoveHead(h.index,q),M.shift()):(r&&r.chainRemoveTail(h.index,q),M.pop()),N=H),t.pointsSame(V,q)){i.splice(O,1),t.pointsCollinear(W,V,N)&&(z?(r&&r.chainRemoveTail(h.index,N),M.pop()):(r&&r.chainRemoveHead(h.index,N),M.shift())),r&&r.chainClose(h.index),a.push(M);return}z?(r&&r.chainAddHead(h.index,q),M.unshift(q)):(r&&r.chainAddTail(h.index,q),M.push(q));return}function J(le){r&&r.chainReverse(le),i[le].reverse()}function ee(le,Te){var Se=i[le],Me=i[Te],Ae=Se[Se.length-1],pe=Se[Se.length-2],ke=Me[0],Ee=Me[1];t.pointsCollinear(pe,Ae,ke)&&(r&&r.chainRemoveTail(le,Ae),Se.pop(),Ae=pe),t.pointsCollinear(Ae,ke,Ee)&&(r&&r.chainRemoveHead(Te,ke),Me.shift()),r&&r.chainJoin(le,Te),i[le]=Se.concat(Me),i.splice(Te,1)}var ie=h.index,oe=v.index;r&&r.chainConnect(ie,oe);var fe=i[ie].length<i[oe].length;h.matches_head?v.matches_head?fe?(J(ie),ee(ie,oe)):(J(oe),ee(oe,ie)):ee(oe,ie):v.matches_head?ee(ie,oe):fe?(J(ie),ee(oe,ie)):(J(oe),ee(ie,oe))}),a}sI.exports=Wne});var fI=me((H_e,uI)=>{function Mg(e,t,r){var i=[];return e.forEach(function(a){var s=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);t[s]!==0&&i.push({id:r?r.segmentId():-1,start:a.start,end:a.end,myFill:{above:t[s]===1,below:t[s]===2},otherFill:null})}),r&&r.selected(i),i}var Xne={union:function(e,t){return Mg(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return Mg(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return Mg(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return Mg(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return Mg(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};uI.exports=Xne});var hI=me((G_e,cI)=>{var jne={toPolygon:function(e,t){function r(s){if(s.length<=0)return e.segments({inverted:!1,regions:[]});function l(v){var m=v.slice(0,v.length-1);return e.segments({inverted:!1,regions:[m]})}for(var f=l(s[0]),h=1;h<s.length;h++)f=e.selectDifference(e.combine(f,l(s[h])));return f}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),a=0;a<t.coordinates.length;a++)i=e.selectUnion(e.combine(i,r(t.coordinates[a])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function i(M,C){return t.pointInsideRegion([(M[0][0]+M[1][0])*.5,(M[0][1]+M[1][1])*.5],C)}function a(M){return{region:M,children:[]}}var s=a(null);function l(M,C){for(var E=0;E<M.children.length;E++){var L=M.children[E];if(i(C,L.region)){l(L,C);return}}for(var I=a(C),E=0;E<M.children.length;E++){var L=M.children[E];i(L.region,C)&&(I.children.push(L),M.children.splice(E,1),E--)}M.children.push(I)}for(var f=0;f<r.regions.length;f++){var h=r.regions[f];h.length<3||l(s,h)}function v(M,C){for(var E=0,L=M[M.length-1][0],I=M[M.length-1][1],O=[],q=0;q<M.length;q++){var z=M[q][0],N=M[q][1];O.push([z,N]),E+=N*L-z*I,L=z,I=N}var H=E<0;return H!==C&&O.reverse(),O.push([O[0][0],O[0][1]]),O}var m=[];function _(M){var C=[v(M.region,!1)];m.push(C);for(var E=0;E<M.children.length;E++)C.push(T(M.children[E]))}function T(M){for(var C=0;C<M.children.length;C++)_(M.children[C]);return v(M.region,!0)}for(var f=0;f<s.children.length;f++)_(s.children[f]);return m.length<=0?{type:"Polygon",coordinates:[]}:m.length==1?{type:"Polygon",coordinates:m[0]}:{type:"MultiPolygon",coordinates:m}}};cI.exports=jne});var mI=me((Z_e,pI)=>{var Jne=eI(),Kne=rI(),vI=oI(),Qne=lI(),Sg=fI(),dI=hI(),eu=!1,kg=Kne(),Vs;Vs={buildLog:function(e){return e===!0?eu=Jne():e===!1&&(eu=!1),eu===!1?!1:eu.list},epsilon:function(e){return kg.epsilon(e)},segments:function(e){var t=vI(!0,kg,eu);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=vI(!1,kg,eu);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:Sg.union(e.combined,eu),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:Sg.intersect(e.combined,eu),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:Sg.difference(e.combined,eu),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:Sg.differenceRev(e.combined,eu),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:Sg.xor(e.combined,eu),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:Qne(e.segments,kg,eu),inverted:e.inverted}},polygonFromGeoJSON:function(e){return dI.toPolygon(Vs,e)},polygonToGeoJSON:function(e){return dI.fromPolygon(Vs,kg,e)},union:function(e,t){return Cg(e,t,Vs.selectUnion)},intersect:function(e,t){return Cg(e,t,Vs.selectIntersect)},difference:function(e,t){return Cg(e,t,Vs.selectDifference)},differenceRev:function(e,t){return Cg(e,t,Vs.selectDifferenceRev)},xor:function(e,t){return Cg(e,t,Vs.selectXor)}};function Cg(e,t,r){var i=Vs.segments(e),a=Vs.segments(t),s=Vs.combine(i,a),l=r(s);return Vs.polygon(l)}typeof window=="object"&&(window.PolyBool=Vs);pI.exports=Vs});var gI=me((Y_e,yI)=>{yI.exports=function(t,r,i,a){var s=t[0],l=t[1],f=!1;i===void 0&&(i=0),a===void 0&&(a=r.length);for(var h=a-i,v=0,m=h-1;v<h;m=v++){var _=r[v+i][0],T=r[v+i][1],M=r[m+i][0],C=r[m+i][1],E=T>l!=C>l&&s<(M-_)*(l-T)/(C-T)+_;E&&(f=!f)}return f}});var yx=me((W_e,_I)=>{"use strict";var e6=g_().dot,px=Zi().BADNUM,mx=_I.exports={};mx.tester=function(t){var r=t.slice(),i=r[0][0],a=i,s=r[0][1],l=s,f;for((r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),f=1;f<r.length;f++)i=Math.min(i,r[f][0]),a=Math.max(a,r[f][0]),s=Math.min(s,r[f][1]),l=Math.max(l,r[f][1]);var h=!1,v;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(h=!0,v=function(C){return C[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(h=!0,v=function(C){return C[1]===r[0][1]}));function m(C,E){var L=C[0],I=C[1];return!(L===px||L<i||L>a||I===px||I<s||I>l||E&&v(C))}function _(C,E){var L=C[0],I=C[1];if(L===px||L<i||L>a||I===px||I<s||I>l)return!1;var O=r.length,q=r[0][0],z=r[0][1],N=0,H,V,W,J,ee;for(H=1;H<O;H++)if(V=q,W=z,q=r[H][0],z=r[H][1],J=Math.min(V,q),!(L<J||L>Math.max(V,q)||I>Math.max(W,z)))if(I<Math.min(W,z))L!==J&&N++;else{if(q===V?ee=I:ee=W+(L-V)*(z-W)/(q-V),I===ee)return!(H===1&&E);I<=ee&&L!==J&&N++}return N%2===1}var T=!0,M=r[0];for(f=1;f<r.length;f++)if(M[0]!==r[f][0]||M[1]!==r[f][1]){T=!1;break}return{xmin:i,xmax:a,ymin:s,ymax:l,pts:r,contains:h?m:_,isRect:h,degenerate:T}};mx.isSegmentBent=function(t,r,i,a){var s=t[r],l=[t[i][0]-s[0],t[i][1]-s[1]],f=e6(l,l),h=Math.sqrt(f),v=[-l[1]/h,l[0]/h],m,_,T;for(m=r+1;m<i;m++)if(_=[t[m][0]-s[0],t[m][1]-s[1]],T=e6(_,l),T<0||T>f||Math.abs(e6(_,v))>a)return!0;return!1};mx.filter=function(t,r){var i=[t[0]],a=0,s=0;function l(h){t.push(h);var v=i.length,m=a;i.splice(s+1);for(var _=m+1;_<t.length;_++)(_===t.length-1||mx.isSegmentBent(t,m,_+1,r))&&(i.push(t[_]),i.length<v-2&&(a=_,s=i.length-1),m=_)}if(t.length>1){var f=t.pop();l(f)}return{addPt:l,raw:t,filtered:i}}});var bI=me((X_e,xI)=>{"use strict";xI.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}});var HI=me((j_e,VI)=>{"use strict";var wI=mI(),$ne=gI(),Dg=sa(),eoe=xi().dashStyle,Eg=Oa(),toe=Nf(),roe=kc().makeEventData,Fg=qd(),aoe=Fg.freeMode,ioe=Fg.rectMode,Pg=Fg.drawMode,i6=Fg.openMode,n6=Fg.selectMode,TI=Qh(),AI=yg(),EI=ex(),LI=Bh().clearOutline,DI=jh(),t6=DI.handleEllipse,noe=DI.readPaths,ooe=K2().newShapes,soe=C4(),loe=$4().activateLastSelection,_x=Bt(),uoe=_x.sorterAsc,PI=yx(),Lg=P_(),tu=jn().getFromId,foe=H2(),coe=hx().redrawReglTraces,xx=bI(),Vf=xx.MINSELECT,hoe=PI.filter,o6=PI.tester,s6=W2(),MI=s6.p2r,voe=s6.axValue,doe=s6.getTransform;function l6(e){return e.subplot!==void 0}function poe(e,t,r,i,a){var s=!l6(i),l=aoe(a),f=ioe(a),h=i6(a),v=Pg(a),m=n6(a),_=a==="drawline",T=a==="drawcircle",M=_||T,C=i.gd,E=C._fullLayout,L=m&&E.newselection.mode==="immediate"&&s,I=E._zoomlayer,O=i.element.getBoundingClientRect(),q=i.plotinfo,z=doe(q),N=t-O.left,H=r-O.top;E._calcInverseTransform(C);var V=_x.apply3DTransform(E._invTransform)(N,H);N=V[0],H=V[1];var W=E._invScaleX,J=E._invScaleY,ee=N,ie=H,oe="M"+N+","+H,fe=i.xaxes[0],le=i.yaxes[0],Te=fe._length,Se=le._length,Me=e.altKey&&!(Pg(a)&&h),Ae,pe,ke,Ee,Xe,lt,it;II(e,C,i),l&&(Ae=hoe([[N,H]],xx.BENDPX));var _t=I.selectAll("path.select-outline-"+q.id).data([1]),Ye=v?E.newshape:E.newselection;v&&(i.hasText=Ye.label.text||Ye.label.texttemplate);var kt=v&&!h?Ye.fillcolor:"rgba(0,0,0,0)",st=Ye.line.color||(s?Eg.contrast(C._fullLayout.plot_bgcolor):"#7f7f7f");_t.enter().append("path").attr("class","select-outline select-outline-"+q.id).style({opacity:v?Ye.opacity/2:1,"stroke-dasharray":eoe(Ye.line.dash,Ye.line.width),"stroke-width":Ye.line.width+"px","shape-rendering":"crispEdges"}).call(Eg.stroke,st).call(Eg.fill,kt).attr("fill-rule","evenodd").classed("cursor-move",!!v).attr("transform",z).attr("d",oe+"Z");var dt=I.append("path").attr("class","zoombox-corners").style({fill:Eg.background,stroke:Eg.defaultLine,"stroke-width":1}).attr("transform",z).attr("d","M0,0Z");if(v&&i.hasText){var It=I.select(".label-temp");It.empty()&&(It=I.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var yt=E._uid+xx.SELECTID,de=[],ze=bx(C,i.xaxes,i.yaxes,i.subplot);L&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(s){var Ue=fe._id,at=le._id;BI(C,Ue,at,ze);for(var Je=(C.layout||{}).selections||[],Ct=[],wt=!1,xt=0;xt<Je.length;xt++){var qt=E.selections[xt];!qt||qt.xref!==Ue||qt.yref!==at?Ct.push(Je[xt]):wt=!0}wt&&(C._fullLayout._noEmitSelectedAtStart=!0,Dg.call("_guiRelayout",C,{selections:Ct}))}});var _e=Eoe(i);i.moveFn=function(Ue,at){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),ee=Math.max(0,Math.min(Te,W*Ue+N)),ie=Math.max(0,Math.min(Se,J*at+H));var Je=Math.abs(ee-N),Ct=Math.abs(ie-H);if(f){var wt,xt,qt;if(m){var Ut=E.selectdirection;switch(Ut==="any"?Ct<Math.min(Je*.6,Vf)?wt="h":Je<Math.min(Ct*.6,Vf)?wt="v":wt="d":wt=Ut,wt){case"h":xt=T?Se/2:0,qt=Se;break;case"v":xt=T?Te/2:0,qt=Te;break}}if(v)switch(E.newshape.drawdirection){case"vertical":wt="h",xt=T?Se/2:0,qt=Se;break;case"horizontal":wt="v",xt=T?Te/2:0,qt=Te;break;case"ortho":Je<Ct?(wt="h",xt=H,qt=ie):(wt="v",xt=N,qt=ee);break;default:wt="d"}wt==="h"?(Ee=M?t6(T,[ee,xt],[ee,qt]):[[N,xt],[N,qt],[ee,qt],[ee,xt]],Ee.xmin=M?ee:Math.min(N,ee),Ee.xmax=M?ee:Math.max(N,ee),Ee.ymin=Math.min(xt,qt),Ee.ymax=Math.max(xt,qt),dt.attr("d","M"+Ee.xmin+","+(H-Vf)+"h-4v"+2*Vf+"h4ZM"+(Ee.xmax-1)+","+(H-Vf)+"h4v"+2*Vf+"h-4Z")):wt==="v"?(Ee=M?t6(T,[xt,ie],[qt,ie]):[[xt,H],[xt,ie],[qt,ie],[qt,H]],Ee.xmin=Math.min(xt,qt),Ee.xmax=Math.max(xt,qt),Ee.ymin=M?ie:Math.min(H,ie),Ee.ymax=M?ie:Math.max(H,ie),dt.attr("d","M"+(N-Vf)+","+Ee.ymin+"v-4h"+2*Vf+"v4ZM"+(N-Vf)+","+(Ee.ymax-1)+"v4h"+2*Vf+"v-4Z")):wt==="d"&&(Ee=M?t6(T,[N,H],[ee,ie]):[[N,H],[N,ie],[ee,ie],[ee,H]],Ee.xmin=Math.min(N,ee),Ee.xmax=Math.max(N,ee),Ee.ymin=Math.min(H,ie),Ee.ymax=Math.max(H,ie),dt.attr("d","M0,0Z"))}else l&&(Ae.addPt([ee,ie]),Ee=Ae.filtered);if(i.selectionDefs&&i.selectionDefs.length?(ke=RI(i.mergedPolygons,Ee,Me),Ee.subtract=Me,pe=u6(i.selectionDefs.concat([Ee]))):(ke=[Ee],pe=o6(Ee)),EI(qI(ke,h),_t,i),m){var Dt=a6(C,!1),Mt=Dt.eventData?Dt.eventData.points.slice():[];Dt=a6(C,!1,pe,ze,i),pe=Dt.selectionTesters,it=Dt.eventData;var Zt;Ae?Zt=Ae.filtered:Zt=OI(ke),Lg.throttle(yt,xx.SELECTDELAY,function(){de=NI(pe,ze);for(var Yt=de.slice(),Be=0;Be<Mt.length;Be++){for(var ut=Mt[Be],sr=!1,Pr=0;Pr<Yt.length;Pr++)if(Yt[Pr].curveNumber===ut.curveNumber&&Yt[Pr].pointNumber===ut.pointNumber){sr=!0;break}sr||Yt.push(ut)}Yt.length&&(it||(it={}),it.points=Yt),_e(it,Zt),Loe(C,it)})}},i.clickFn=function(Ue,at){if(dt.remove(),C._fullLayout._activeShapeIndex>=0){C._fullLayout._deactivateShape(C);return}if(!v){var Je=E.clickmode;Lg.done(yt).then(function(){if(Lg.clear(yt),Ue===2){for(_t.remove(),Xe=0;Xe<ze.length;Xe++)lt=ze[Xe],lt._module.selectPoints(lt,!1);if(Ig(C,ze),zg(i),c6(C),ze.length){var Ct=ze[0].xaxis,wt=ze[0].yaxis;if(Ct&&wt){for(var xt=[],qt=C._fullLayout.selections,Ut=0;Ut<qt.length;Ut++){var Dt=qt[Ut];Dt&&(Dt.xref!==Ct._id||Dt.yref!==wt._id)&&xt.push(Dt)}xt.length<qt.length&&(C._fullLayout._noEmitSelectedAtStart=!0,Dg.call("_guiRelayout",C,{selections:xt}))}}}else Je.indexOf("select")>-1&&zI(at,C,i.xaxes,i.yaxes,i.subplot,i,_t),Je==="event"&&Rg(C,void 0);toe.click(C,at,q.id)}).catch(_x.error)}},i.doneFn=function(){dt.remove(),Lg.done(yt).then(function(){Lg.clear(yt),!L&&Ee&&i.selectionDefs&&(Ee.subtract=Me,i.selectionDefs.push(Ee),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,ke)),(L||v)&&zg(i,L),i.doneFnCompleted&&i.doneFnCompleted(de),m&&Rg(C,it)}).catch(_x.error)}}function zI(e,t,r,i,a,s,l){var f=t._hoverdata,h=t._fullLayout,v=h.clickmode,m=v.indexOf("event")>-1,_=[],T,M,C,E,L,I,O,q,z,N;if(xoe(f)){II(e,t,s),T=bx(t,r,i,a);var H=boe(f,T),V=H.pointNumbers.length>0;if(V?woe(T,H):Toe(T)&&(O=kI(H))){for(l&&l.remove(),N=0;N<T.length;N++)M=T[N],M._module.selectPoints(M,!1);Ig(t,T),zg(s),m&&c6(t)}else{q=e.shiftKey&&(O!==void 0?O:kI(H)),C=moe(H.pointNumber,H.searchInfo,q);var W=s.selectionDefs.concat([C]);for(E=u6(W,E),N=0;N<T.length;N++)if(L=T[N]._module.selectPoints(T[N],E),I=FI(L,T[N]),_.length)for(var J=0;J<I.length;J++)_.push(I[J]);else _=I;if(z={points:_},Ig(t,T,z),C&&s&&s.selectionDefs.push(C),l){var ee=s.mergedPolygons,ie=i6(s.dragmode);EI(qI(ee,ie),l,s)}m&&Rg(t,z)}}}function moe(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function r6(e){return"pointNumber"in e&&"searchInfo"in e}function yoe(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,i,a){var s=e.searchInfo.cd[0].trace.index,l=a.cd[0].trace.index;return l===s&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function u6(e){if(!e.length)return;for(var t=[],r=r6(e[0])?0:e[0][0][0],i=r,a=r6(e[0])?0:e[0][0][1],s=a,l=0;l<e.length;l++)if(r6(e[l]))t.push(yoe(e[l]));else{var f=o6(e[l]);f.subtract=!!e[l].subtract,t.push(f),r=Math.min(r,f.xmin),i=Math.max(i,f.xmax),a=Math.min(a,f.ymin),s=Math.max(s,f.ymax)}function h(v,m,_,T){for(var M=!1,C=0;C<t.length;C++)t[C].contains(v,m,_,T)&&(M=!t[C].subtract);return M}return{xmin:r,xmax:i,ymin:a,ymax:s,pts:[],contains:h,isRect:!1,degenerate:!1}}function II(e,t,r){var i=t._fullLayout,a=r.plotinfo,s=r.dragmode,l=i._lastSelectedSubplot&&i._lastSelectedSubplot===a.id,f=(e.shiftKey||e.altKey)&&!(Pg(s)&&i6(s));l&&f&&a.selection&&a.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=a.selection.selectionDefs,r.mergedPolygons=a.selection.mergedPolygons):(!f||!a.selection)&&zg(r),l||(LI(t),i._lastSelectedSubplot=a.id)}function goe(e){return e._fullLayout._activeShapeIndex>=0}function _oe(e){return e._fullLayout._activeSelectionIndex>=0}function zg(e,t){var r=e.dragmode,i=e.plotinfo,a=e.gd;goe(a)&&a._fullLayout._deactivateShape(a),_oe(a)&&a._fullLayout._deactivateSelection(a);var s=a._fullLayout,l=s._zoomlayer,f=Pg(r),h=n6(r);if(f||h){var v=l.selectAll(".select-outline-"+i.id);if(v&&a._fullLayout._outlining){var m;f&&(m=ooe(v,e)),m&&Dg.call("_guiRelayout",a,{shapes:m});var _;h&&!l6(e)&&(_=soe(v,e)),_&&(a._fullLayout._noEmitSelectedAtStart=!0,Dg.call("_guiRelayout",a,{selections:_}).then(function(){t&&loe(a)})),a._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}function SI(e){return e._id}function bx(e,t,r,i){if(!e.calcdata)return[];var a=[],s=t.map(SI),l=r.map(SI),f,h,v;for(v=0;v<e.calcdata.length;v++)if(f=e.calcdata[v],h=f[0].trace,!(h.visible!==!0||!h._module||!h._module.selectPoints))if(l6({subplot:i})&&(h.subplot===i||h.geo===i))a.push(gx(h._module,f,t[0],r[0]));else if(h.type==="splom"){if(h._xaxes[s[0]]&&h._yaxes[l[0]]){var m=gx(h._module,f,t[0],r[0]);m.scene=e._fullLayout._splomScenes[h.uid],a.push(m)}}else if(h.type==="sankey"){var _=gx(h._module,f,t[0],r[0]);a.push(_)}else{if(s.indexOf(h.xaxis)===-1&&(!h._xA||!h._xA.overlaying)||l.indexOf(h.yaxis)===-1&&(!h._yA||!h._yA.overlaying))continue;a.push(gx(h._module,f,tu(e,h.xaxis),tu(e,h.yaxis)))}return a}function gx(e,t,r,i){return{_module:e,cd:t,xaxis:r,yaxis:i}}function xoe(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function boe(e,t){var r=e[0],i=-1,a=[],s,l;for(l=0;l<t.length;l++)if(s=t[l],r.fullData.index===s.cd[0].trace.index){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?i=r.pointNumber:r.binNumber!==void 0&&(i=r.binNumber,a=r.pointNumbers);break}return{pointNumber:i,pointNumbers:a,searchInfo:s}}function kI(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,i=e.pointNumbers,a=i.length>0,s=a?i[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(s)>-1:!1}function woe(e,t){var r=[],i,a,s,l;for(l=0;l<e.length;l++)i=e[l],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&r.push(i);if(r.length===1&&(s=r[0]===t.searchInfo,s&&(a=t.searchInfo.cd[0].trace,a.selectedpoints.length===t.pointNumbers.length))){for(l=0;l<t.pointNumbers.length;l++)if(a.selectedpoints.indexOf(t.pointNumbers[l])<0)return!1;return!0}return!1}function Toe(e){var t=0,r,i,a;for(a=0;a<e.length;a++)if(r=e[a],i=r.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(t+=i.selectedpoints.length,t>1)))return!1;return t===1}function Ig(e,t,r){var i;for(i=0;i<t.length;i++){var a=t[i].cd[0].trace._fullInput,s=e._fullLayout._tracePreGUI[a.uid]||{};s.selectedpoints===void 0&&(s.selectedpoints=a._input.selectedpoints||null)}var l;if(r){var f=r.points||[];for(i=0;i<t.length;i++)l=t[i].cd[0].trace,l._input.selectedpoints=l._fullInput.selectedpoints=[],l._fullInput!==l&&(l.selectedpoints=[]);for(var h=0;h<f.length;h++){var v=f[h],m=v.data,_=v.fullData,T=v.pointIndex,M=v.pointIndices;M?([].push.apply(m.selectedpoints,M),l._fullInput!==l&&[].push.apply(_.selectedpoints,M)):(m.selectedpoints.push(T),l._fullInput!==l&&_.selectedpoints.push(T))}}else for(i=0;i<t.length;i++)l=t[i].cd[0].trace,delete l.selectedpoints,delete l._input.selectedpoints,l._fullInput!==l&&delete l._fullInput.selectedpoints;Aoe(e,t)}function Aoe(e,t){for(var r=!1,i=0;i<t.length;i++){var a=t[i],s=a.cd;Dg.traceIs(s[0].trace,"regl")&&(r=!0);var l=a._module,f=l.styleOnSelect||l.style;f&&(f(e,s,s[0].node3),s[0].nodeRangePlot3&&f(e,s,s[0].nodeRangePlot3))}r&&(foe(e),coe(e))}function RI(e,t,r){for(var i=r?wI.difference:wI.union,a=i({regions:e},{regions:[t]}),s=a.regions.reverse(),l=0;l<s.length;l++){var f=s[l];f.subtract=f6(f,s.slice(0,l))}return s}function FI(e,t){if(Array.isArray(e))for(var r=t.cd,i=t.cd[0].trace,a=0;a<e.length;a++)e[a]=roe(e[a],i,r);return e}function qI(e,t){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++){r[i][a]=[],r[i][a][0]=a?"L":"M";for(var s=0;s<e[i][a].length;s++)r[i][a].push(e[i][a][s])}t||r[i].push(["Z",r[i][0][1],r[i][0][2]])}return r}function NI(e,t){for(var r=[],i,a=[],s,l=0;l<t.length;l++){var f=t[l];s=f._module.selectPoints(f,e),a.push(s),i=FI(s,f),r=r.concat(i)}return r}function a6(e,t,r,i,a){var s=!!i,l,f,h;a&&(l=a.plotinfo,f=a.xaxes[0]._id,h=a.yaxes[0]._id);var v=[],m=[],_=CI(e),T=e._fullLayout;if(l){var M=T._zoomlayer,C=T.dragmode,E=Pg(C),L=n6(C);if(E||L){var I=tu(e,f,"x"),O=tu(e,h,"y");if(I&&O){var q=M.selectAll(".select-outline-"+l.id);if(q&&e._fullLayout._outlining&&q.length){for(var z=q[0][0],N=z.getAttribute("d"),H=noe(N,e,l),V=[],W=0;W<H.length;W++){for(var J=H[W],ee=[],ie=0;ie<J.length;ie++)ee.push([$h(I,J[ie][1]),$h(O,J[ie][2])]);ee.xref=f,ee.yref=h,ee.subtract=f6(ee,V),V.push(ee)}_=_.concat(V)}}}}var oe=f&&h?[f+h]:T._subplots.cartesian;Moe(e);for(var fe={},le=0;le<oe.length;le++){var Te=oe[le],Se=Te.indexOf("y"),Me=Te.slice(0,Se),Ae=Te.slice(Se),pe=f&&h?r:void 0;if(pe=koe(_,Me,Ae,pe),pe){var ke=i;if(!s){var Ee=tu(e,Me,"x"),Xe=tu(e,Ae,"y");ke=bx(e,[Ee],[Xe],Te);for(var lt=0;lt<ke.length;lt++){var it=ke[lt],_t=it.cd[0],Ye=_t.trace;if(it._module.name==="scattergl"&&!_t.t.xpx){var kt=Ye.x,st=Ye.y,dt=Ye._length;_t.t.xpx=[],_t.t.ypx=[];for(var It=0;It<dt;It++)_t.t.xpx[It]=Ee.c2p(kt[It]),_t.t.ypx[It]=Xe.c2p(st[It])}it._module.name==="splom"&&(fe[Ye.uid]||(fe[Ye.uid]=!0))}}var yt=NI(pe,ke);v=v.concat(yt),m=m.concat(ke)}}var de={points:v};Ig(e,m,de);var ze=T.clickmode,_e=ze.indexOf("event")>-1&&t;if(!l&&t){var Ue=CI(e,!0);if(Ue.length){var at=Ue[0].xref,Je=Ue[0].yref;if(at&&Je){var Ct=OI(Ue),wt=UI([tu(e,at,"x"),tu(e,Je,"y")]);wt(de,Ct)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:_e&&Rg(e,de),T._reselect=!1}if(!l&&T._deselect){var xt=T._deselect;f=xt.xref,h=xt.yref,Soe(f,h,m)||BI(e,f,h,i),_e&&(de.points.length?Rg(e,de):c6(e)),T._deselect=!1}return{eventData:de,selectionTesters:r}}function Moe(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var i=t[r][0],a=i.trace,s=e._fullLayout._splomScenes;if(s){var l=s[a.uid];l&&(l.selectBatch=[])}}}function Soe(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];if(a.xaxis&&a.xaxis._id===e&&a.yaxis&&a.yaxis._id===t)return!0}return!1}function BI(e,t,r,i){i=bx(e,[tu(e,t,"x")],[tu(e,r,"y")],t+r);for(var a=0;a<i.length;a++){var s=i[a];s._module.selectPoints(s,!1)}Ig(e,i)}function koe(e,t,r,i){for(var a,s=0;s<e.length;s++){var l=e[s];if(!(t!==l.xref||r!==l.yref))if(a){var f=!!l.subtract;a=RI(a,l,f),i=u6(a)}else a=[l],i=o6(l)}return i}function CI(e,t){for(var r=[],i=e._fullLayout,a=i.selections,s=a.length,l=0;l<s;l++)if(!(t&&l!==i._activeSelectionIndex)){var f=a[l];if(f){var h=f.xref,v=f.yref,m=tu(e,h,"x"),_=tu(e,v,"y"),T,M,C,E,L;if(f.type==="rect"){L=[];var I=$h(m,f.x0),O=$h(m,f.x1),q=$h(_,f.y0),z=$h(_,f.y1);L=[[I,q],[I,z],[O,z],[O,q]],T=Math.min(I,O),M=Math.max(I,O),C=Math.min(q,z),E=Math.max(q,z),L.xmin=T,L.xmax=M,L.ymin=C,L.ymax=E,L.xref=h,L.yref=v,L.subtract=!1,L.isRect=!0,r.push(L)}else if(f.type==="path")for(var N=f.path.split("Z"),H=[],V=0;V<N.length;V++){var W=N[V];if(W){W+="Z";var J=TI.extractPathCoords(W,AI.paramIsX,"raw"),ee=TI.extractPathCoords(W,AI.paramIsY,"raw");T=1/0,M=-1/0,C=1/0,E=-1/0,L=[];for(var ie=0;ie<J.length;ie++){var oe=$h(m,J[ie]),fe=$h(_,ee[ie]);L.push([oe,fe]),T=Math.min(oe,T),M=Math.max(oe,M),C=Math.min(fe,C),E=Math.max(fe,E)}L.xmin=T,L.xmax=M,L.ymin=C,L.ymax=E,L.xref=h,L.yref=v,L.subtract=f6(L,H),H.push(L),r.push(L)}}}}return r}function f6(e,t){for(var r=!1,i=0;i<t.length;i++)for(var a=t[i],s=0;s<e.length;s++)if($ne(e[s],a)){r=!r;break}return r}function $h(e,t){return e.type==="date"&&(t=t.replace("_"," ")),e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function OI(e){for(var t=e.length,r=[],i=0;i<t;i++){var a=e[i];r=r.concat(a),r=r.concat([a[0]])}return Coe(r)}function Coe(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function UI(e){return function(t,r){for(var i,a,s=0;s<e.length;s++){var l=e[s],f=l._id,h=f.charAt(0);if(r.isRect){i||(i={});var v=r[h+"min"],m=r[h+"max"];v!==void 0&&m!==void 0&&(i[f]=[MI(l,v),MI(l,m)].sort(uoe))}else a||(a={}),a[f]=r.map(voe(l))}i&&(t.range=i),a&&(t.lassoPoints=a)}}function Eoe(e){var t=e.plotinfo;return t.fillRangeItems||UI(e.xaxes.concat(e.yaxes))}function Loe(e,t){e.emit("plotly_selecting",t)}function Rg(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function c6(e){e.emit("plotly_deselect",null)}VI.exports={reselect:a6,prepSelect:poe,clearOutline:LI,clearSelectionsCache:zg,selectOnClick:zI}});var h6=me((J_e,GI)=>{"use strict";GI.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]});var qg=me((K_e,ZI)=>{"use strict";ZI.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}});var sm=me(($_e,XI)=>{"use strict";var YI=h6(),WI=qo(),wx=eo(),Doe=Ii().templatedArray,Q_e=qg();XI.exports=Doe("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:WI({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:YI.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:YI.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",wx.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",wx.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",wx.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",wx.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:WI({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})});var Tx=me((e2e,jI)=>{"use strict";jI.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}});var Ax=me((t2e,JI)=>{"use strict";JI.exports=function(t){return{valType:"color",editType:"style",anim:!0}}});var zc=me((r2e,iR)=>{"use strict";var KI=Gw().axisHoverFormat,{hovertemplateAttrs:Poe,texttemplateAttrs:zoe,templatefallbackAttrs:QI}=kf(),$I=Sc(),Ioe=qo(),eR=gc().dash,Roe=gc().pattern,Foe=xi(),qoe=Tx(),Ng=yn().extendFlat,Noe=Ax();function tR(e){return{valType:"any",dflt:0,editType:"calc"}}function rR(e){return{valType:"any",editType:"calc"}}function aR(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}iR.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:tR("x"),yperiod:tR("y"),xperiod0:rR("x0"),yperiod0:rR("y0"),xperiodalignment:aR("x"),yperiodalignment:aR("y"),xhoverformat:KI("x"),yhoverformat:KI("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:zoe(),texttemplatefallback:QI({editType:"calc"}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:Poe({},{keys:qoe.eventDataKeys}),hovertemplatefallback:QI(),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:Ng({},eR,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:Noe(!0),fillgradient:Ng({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:Roe,marker:Ng({symbol:{valType:"enumerated",values:Foe.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:Ng({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},dash:Ng({},eR,{arrayOk:!0}),editType:"calc"},$I("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},$I("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:Ioe({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}});var v6=me((i2e,sR)=>{"use strict";var nR=sm(),oR=zc().line,Boe=gc().dash,Mx=yn().extendFlat,Ooe=il().overrideAll,Uoe=Ii().templatedArray,a2e=qg();sR.exports=Ooe(Uoe("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:Mx({},nR.xref,{}),yref:Mx({},nR.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:oR.color,width:Mx({},oR.width,{min:1,dflt:1}),dash:Mx({},Boe,{dflt:"dot"})}}),"arraydraw","from-root")});var cR=me((n2e,fR)=>{"use strict";var lR=Bt(),Sx=Xi(),Voe=Wl(),Hoe=v6(),uR=Qh();fR.exports=function(t,r){Voe(t,r,{name:"selections",handleItemDefaults:Goe});for(var i=r.selections,a=0;a<i.length;a++){var s=i[a];s&&s.path===void 0&&(s.x0===void 0||s.x1===void 0||s.y0===void 0||s.y1===void 0)&&(r.selections[a]=null)}};function Goe(e,t,r){function i(H,V){return lR.coerce(e,t,Hoe,H,V)}var a=i("path"),s=a?"path":"rect",l=i("type",s),f=l!=="path";f&&delete t.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var h=["x","y"],v=0;v<2;v++){var m=h[v],_={_fullLayout:r},T,M,C,E=Sx.coerceRef(e,t,_,m);if(T=Sx.getFromId(_,E),T._selectionIndices.push(t._index),C=uR.rangeToShapePosition(T),M=uR.shapePositionToRange(T),f){var L=m+"0",I=m+"1",O=e[L],q=e[I];e[L]=M(e[L],!0),e[I]=M(e[I],!0),Sx.coercePosition(t,_,i,E,L),Sx.coercePosition(t,_,i,E,I);var z=t[L],N=t[I];z!==void 0&&N!==void 0&&(t[L]=C(z),t[I]=C(N),e[L]=O,e[I]=q)}}f&&lR.noneOrAll(e,t,["x0","x1","y0","y1"])}});var vR=me((o2e,hR)=>{"use strict";hR.exports=function(t,r,i){i("newselection.mode");var a=i("newselection.line.width");a&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}});var Bg=me((s2e,mR)=>{"use strict";var Zoe=sa(),dR=Bt(),pR=jn();mR.exports=function(t){return function(i,a){var s=i[t];if(Array.isArray(s))for(var l=Zoe.subplotsRegistry.cartesian,f=l.idRegex,h=a._subplots,v=h.xaxis,m=h.yaxis,_=h.cartesian,T=a._has("cartesian"),M=0;M<s.length;M++){var C=s[M];if(dR.isPlainObject(C)){var E=pR.cleanId(C.xref,"x",!1),L=pR.cleanId(C.yref,"y",!1),I=f.x.test(E),O=f.y.test(L);if(I||O){T||dR.pushUnique(a._basePlotModules,l);var q=!1;I&&v.indexOf(E)===-1&&(v.push(E),q=!0),O&&m.indexOf(L)===-1&&(m.push(L),q=!0),q&&I&&O&&_.push(E+L)}}}}}});var Hf=me((l2e,gR)=>{"use strict";var yR=$4(),Og=HI();gR.exports={moduleType:"component",name:"selections",layoutAttributes:v6(),supplyLayoutDefaults:cR(),supplyDrawNewSelectionDefaults:vR(),includeBasePlot:Bg()("selections"),draw:yR.draw,drawOne:yR.drawOne,reselect:Og.reselect,prepSelect:Og.prepSelect,clearOutline:Og.clearOutline,clearSelectionsCache:Og.clearSelectionsCache,selectOnClick:Og.selectOnClick}});var BR=me((u2e,NR)=>{"use strict";var g6=ja(),ru=Bt(),_R=ru.numberFormat,Yoe=Mf(),Woe=Q5(),kx=sa(),CR=ru.strTranslate,Xoe=ro(),xR=Oa(),ev=xi(),joe=Nf(),bR=Xi(),Joe=Wh(),Koe=jl(),ER=qd(),Cx=ER.selectingOrDrawing,Qoe=ER.freeMode,$oe=No().FROM_TL,ese=H2(),tse=hx().redrawReglTraces,rse=to(),p6=jn().getFromId,ase=Hf().prepSelect,ise=Hf().clearOutline,nse=Hf().selectOnClick,d6=Z4(),_6=eo(),wR=_6.MINDRAG,_s=_6.MINZOOM,TR=!0;function ose(e,t,r,i,a,s,l,f){var h=e._fullLayout._zoomlayer,v=l+f==="nsew",m=(l+f).length===1,_,T,M,C,E,L,I,O,q,z,N,H,V,W,J,ee,ie,oe,fe,le,Te,Se,Me;r+=t.yaxis._shift;function Ae(){if(_=t.xaxis,T=t.yaxis,q=_._length,z=T._length,I=_._offset,O=T._offset,M={},M[_._id]=_,C={},C[T._id]=T,l&&f)for(var ht=t.overlays,pt=0;pt<ht.length;pt++){var Ot=ht[pt].xaxis;M[Ot._id]=Ot;var er=ht[pt].yaxis;C[er._id]=er}E=kR(M),L=kR(C),V=AR(E,f),W=AR(L,l),J=!W&&!V,H=SR(e,e._fullLayout._axisMatchGroups,M,C),N=SR(e,e._fullLayout._axisConstraintGroups,M,C,H);var Ht=N.isSubplotConstrained||H.isSubplotConstrained;ee=f||Ht,ie=l||Ht;var Kt=e._fullLayout;oe=Kt._has("scattergl"),fe=Kt._has("splom"),le=Kt._has("svg")}Ae();var pe=use(W+V,e._fullLayout.dragmode,v),ke=DR(t,l+f+"drag",pe,r,i,a,s);if(J&&!v)return ke.onmousedown=null,ke.style.pointerEvents="none",ke;var Ee={element:ke,gd:e,plotinfo:t};Ee.prepFn=function(ht,pt,Ot){var er=Ee.dragmode,Ht=e._fullLayout.dragmode;Ht!==er&&(Ee.dragmode=Ht),Ae(),Se=e._fullLayout._invScaleX,Me=e._fullLayout._invScaleY,J||(v?ht.shiftKey?Ht==="pan"?Ht="zoom":Cx(Ht)||(Ht="pan"):ht.ctrlKey&&(Ht="pan"):Ht="pan"),Qoe(Ht)?Ee.minDrag=1:Ee.minDrag=void 0,Cx(Ht)?(Ee.xaxes=E,Ee.yaxes=L,ase(ht,pt,Ot,Ee,Ht)):(Ee.clickFn=lt,Cx(er)&&Xe(),J||(Ht==="zoom"?(Ee.moveFn=Ue,Ee.doneFn=Je,Ee.minDrag=1,_e(ht,pt,Ot)):Ht==="pan"&&(Ee.moveFn=Dt,Ee.doneFn=Be))),e._fullLayout._redrag=function(){var Kt=e._dragdata;if(Kt&&Kt.element===ke){var pr=e._fullLayout.dragmode;Cx(pr)||(Ae(),ut([0,0,q,z]),Ee.moveFn(Kt.dx,Kt.dy))}}};function Xe(){Ee.plotinfo.selection=!1,ise(e)}function lt(ht,pt){var Ot=Ee.gd;if(Ot._fullLayout._activeShapeIndex>=0){Ot._fullLayout._deactivateShape(Ot);return}var er=Ot._fullLayout.clickmode;if(y6(Ot),ht===2&&!m&&Yt(),v)er.indexOf("select")>-1&&nse(pt,Ot,E,L,t.id,Ee),er.indexOf("event")>-1&&joe.click(Ot,pt,t.id);else if(ht===1&&m){var Ht=l?T:_,Kt=l==="s"||f==="w"?0:1,pr=Ht._name+".range["+Kt+"]",yr=sse(Ht,Kt),ur="left",Lt="middle";if(Ht.fixedrange)return;l?(Lt=l==="n"?"top":"bottom",Ht.side==="right"&&(ur="right")):f==="e"&&(ur="right"),Ot._context.showAxisRangeEntryBoxes&&g6.select(ke).call(Xoe.makeEditable,{gd:Ot,immediate:!0,background:Ot._fullLayout.paper_bgcolor,text:String(yr),fill:Ht.tickfont?Ht.tickfont.color:"#444",horizontalAlign:ur,verticalAlign:Lt}).on("edit",function(Fe){var Ve=Ht.d2r(Fe);Ve!==void 0&&kx.call("_guiRelayout",Ot,pr,Ve)})}}Koe.init(Ee);var it,_t,Ye,kt,st,dt,It,yt,de,ze;function _e(ht,pt,Ot){var er=ke.getBoundingClientRect();it=pt-er.left,_t=Ot-er.top,e._fullLayout._calcInverseTransform(e);var Ht=ru.apply3DTransform(e._fullLayout._invTransform)(it,_t);it=Ht[0],_t=Ht[1],Ye={l:it,r:it,w:0,t:_t,b:_t,h:0},kt=e._hmpixcount?e._hmlumcount/e._hmpixcount:Yoe(e._fullLayout.plot_bgcolor).getLuminance(),st="M0,0H"+q+"V"+z+"H0V0",dt=!1,It="xy",ze=!1,yt=PR(h,kt,I,O,st),de=zR(h,I,O)}function Ue(ht,pt){if(e._transitioningWithDuration)return!1;var Ot=Math.max(0,Math.min(q,Se*ht+it)),er=Math.max(0,Math.min(z,Me*pt+_t)),Ht=Math.abs(Ot-it),Kt=Math.abs(er-_t);Ye.l=Math.min(it,Ot),Ye.r=Math.max(it,Ot),Ye.t=Math.min(_t,er),Ye.b=Math.max(_t,er);function pr(){It="",Ye.r=Ye.l,Ye.t=Ye.b,de.attr("d","M0,0Z")}if(N.isSubplotConstrained)Ht>_s||Kt>_s?(It="xy",Ht/q>Kt/z?(Kt=Ht*z/q,_t>er?Ye.t=_t-Kt:Ye.b=_t+Kt):(Ht=Kt*q/z,it>Ot?Ye.l=it-Ht:Ye.r=it+Ht),de.attr("d",Ex(Ye))):pr();else if(H.isSubplotConstrained)if(Ht>_s||Kt>_s){It="xy";var yr=Math.min(Ye.l/q,(z-Ye.b)/z),ur=Math.max(Ye.r/q,(z-Ye.t)/z);Ye.l=yr*q,Ye.r=ur*q,Ye.b=(1-yr)*z,Ye.t=(1-ur)*z,de.attr("d",Ex(Ye))}else pr();else!W||Kt<Math.min(Math.max(Ht*.6,wR),_s)?Ht<wR||!V?pr():(Ye.t=0,Ye.b=z,It="x",de.attr("d",fse(Ye,_t))):!V||Ht<Math.min(Kt*.6,_s)?(Ye.l=0,Ye.r=q,It="y",de.attr("d",cse(Ye,it))):(It="xy",de.attr("d",Ex(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,It&&(ze=!0),e._dragged=ze,IR(yt,de,Ye,st,dt,kt),at(),e.emit("plotly_relayouting",Te),dt=!0}function at(){Te={},(It==="xy"||It==="x")&&(m6(E,Ye.l/q,Ye.r/q,Te,N.xaxes),Mt("x",Te)),(It==="xy"||It==="y")&&(m6(L,(z-Ye.b)/z,(z-Ye.t)/z,Te,N.yaxes),Mt("y",Te))}function Je(){at(),y6(e),Be(),FR(e)}var Ct=[0,0,q,z],wt=null,xt=_6.REDRAWDELAY,qt=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Ut(ht){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(Xe(),e._transitioningWithDuration){ht.preventDefault(),ht.stopPropagation();return}Ae(),clearTimeout(wt);var pt=-ht.deltaY;if(isFinite(pt)||(pt=ht.wheelDelta/10),!isFinite(pt)){ru.log("Did not find wheel motion attributes: ",ht);return}var Ot=Math.exp(-Math.min(Math.max(pt,-20),20)/200),er=qt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Ht=(ht.clientX-er.left)/er.width,Kt=(er.bottom-ht.clientY)/er.height,pr;function yr(ur,Lt,Fe){if(ur.fixedrange)return;var Ve=ru.simpleMap(ur.range,ur.r2l),bt=Ve[0]+(Ve[1]-Ve[0])*Lt;function Tt(mr){return ur.l2r(bt+(mr-bt)*Fe)}ur.range=Ve.map(Tt)}if(ee){for(f||(Ht=.5),pr=0;pr<E.length;pr++)yr(E[pr],Ht,Ot);Mt("x"),Ct[2]*=Ot,Ct[0]+=Ct[2]*Ht*(1/Ot-1)}if(ie){for(l||(Kt=.5),pr=0;pr<L.length;pr++)yr(L[pr],Kt,Ot);Mt("y"),Ct[3]*=Ot,Ct[1]+=Ct[3]*(1-Kt)*(1/Ot-1)}ut(Ct),Zt(),e.emit("plotly_relayouting",Te),wt=setTimeout(function(){e._fullLayout&&(Ct=[0,0,q,z],Be())},xt),ht.preventDefault()}l.length*f.length!==1&&qR(ke,Ut);function Dt(ht,pt){if(ht=ht*Se,pt=pt*Me,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,V==="ew"||W==="ns"){var Ot=V?-ht:0,er=W?-pt:0;if(H.isSubplotConstrained){if(V&&W){var Ht=(ht/q-pt/z)/2;ht=Ht*q,pt=-Ht*z,Ot=-ht,er=-pt}W?Ot=-er*q/z:er=-Ot*z/q}V&&(MR(E,ht),Mt("x")),W&&(MR(L,pt),Mt("y")),ut([Ot,er,q,z]),Zt(),e.emit("plotly_relayouting",Te);return}function Kt(Tt,mr,Ar){for(var Mr=1-mr,Gr,pa,Ca=0;Ca<Tt.length;Ca++){var ii=Tt[Ca];if(!ii.fixedrange){Gr=ii,pa=ii._rl[Mr]+(ii._rl[mr]-ii._rl[Mr])/lse(Ar/ii._length);var wi=ii.l2r(pa);wi!==!1&&wi!==void 0&&(ii.range[mr]=wi)}}return Gr._length*(Gr._rl[mr]-pa)/(Gr._rl[mr]-Gr._rl[Mr])}var pr=V==="w"==(W==="n")?1:-1;if(V&&W&&(N.isSubplotConstrained||H.isSubplotConstrained)){var yr=(ht/q+pr*pt/z)/2;ht=yr*q,pt=pr*yr*z}var ur,Lt;if(V==="w"?ht=Kt(E,0,ht):V==="e"?ht=Kt(E,1,-ht):V||(ht=0),W==="n"?pt=Kt(L,1,pt):W==="s"?pt=Kt(L,0,-pt):W||(pt=0),ur=V==="w"?ht:0,Lt=W==="n"?pt:0,N.isSubplotConstrained&&!H.isSubplotConstrained||H.isSubplotConstrained&&V&&W&&pr>0){var Fe;if(H.isSubplotConstrained||!V&&W.length===1){for(Fe=0;Fe<E.length;Fe++)E[Fe].range=E[Fe]._r.slice(),d6(E[Fe],1-pt/z);ht=pt*q/z,ur=ht/2}if(H.isSubplotConstrained||!W&&V.length===1){for(Fe=0;Fe<L.length;Fe++)L[Fe].range=L[Fe]._r.slice(),d6(L[Fe],1-ht/q);pt=ht*z/q,Lt=pt/2}}(!H.isSubplotConstrained||!W)&&Mt("x"),(!H.isSubplotConstrained||!V)&&Mt("y");var Ve=q-ht,bt=z-pt;H.isSubplotConstrained&&!(V&&W)&&(V?(Lt=ur?0:ht*z/q,bt=Ve*z/q):(ur=Lt?0:pt*q/z,Ve=bt*q/z)),ut([ur,Lt,Ve,bt]),Zt(),e.emit("plotly_relayouting",Te)}function Mt(ht,pt){for(var Ot=H.isSubplotConstrained?{x:L,y:E}[ht]:H[ht+"axes"],er=H.isSubplotConstrained?{x:E,y:L}[ht]:[],Ht=0;Ht<Ot.length;Ht++){var Kt=Ot[Ht],pr=Kt._id,yr=H.xLinks[pr]||H.yLinks[pr],ur=er[0]||M[yr]||C[yr];ur&&(pt?(pt[Kt._name+".range[0]"]=pt[ur._name+".range[0]"],pt[Kt._name+".range[1]"]=pt[ur._name+".range[1]"]):Kt.range=ur.range.slice())}}function Zt(){var ht=[],pt;function Ot(pr){for(pt=0;pt<pr.length;pt++)pr[pt].fixedrange||ht.push(pr[pt]._id)}function er(pr,yr){for(pt=0;pt<pr.length;pt++){var ur=pr[pt],Lt=ur[yr];!ur.fixedrange&&Lt.tickmode==="sync"&&ht.push(Lt._id)}}for(ee&&(Ot(E),Ot(N.xaxes),Ot(H.xaxes),er(t.overlays,"xaxis")),ie&&(Ot(L),Ot(N.yaxes),Ot(H.yaxes),er(t.overlays,"yaxis")),Te={},pt=0;pt<ht.length;pt++){var Ht=ht[pt],Kt=p6(e,Ht);bR.drawOne(e,Kt,{skipTitle:!0}),Te[Kt._name+".range[0]"]=Kt.range[0],Te[Kt._name+".range[1]"]=Kt.range[1]}bR.redrawComponents(e,ht)}function Yt(){if(!e._transitioningWithDuration){var ht=e._context.doubleClick,pt=[];V&&(pt=pt.concat(E)),W&&(pt=pt.concat(L)),H.xaxes&&(pt=pt.concat(H.xaxes)),H.yaxes&&(pt=pt.concat(H.yaxes));var Ot={},er,Ht;if(ht==="reset+autosize")for(ht="autosize",Ht=0;Ht<pt.length;Ht++){er=pt[Ht];var Kt=er._rangeInitial0,pr=er._rangeInitial1,yr=Kt!==void 0||pr!==void 0;if(yr&&(Kt!==void 0&&Kt!==er.range[0]||pr!==void 0&&pr!==er.range[1])||!yr&&er.autorange!==!0){ht="reset";break}}if(ht==="autosize")for(Ht=0;Ht<pt.length;Ht++)er=pt[Ht],er.fixedrange||(Ot[er._name+".autorange"]=!0);else if(ht==="reset"){for((V||N.isSubplotConstrained)&&(pt=pt.concat(N.xaxes)),W&&!N.isSubplotConstrained&&(pt=pt.concat(N.yaxes)),N.isSubplotConstrained&&(V?W||(pt=pt.concat(L)):pt=pt.concat(E)),Ht=0;Ht<pt.length;Ht++)if(er=pt[Ht],!er.fixedrange){var ur=er._name,Lt=er._autorangeInitial;er._rangeInitial0===void 0&&er._rangeInitial1===void 0?Ot[ur+".autorange"]=!0:er._rangeInitial0===void 0?(Ot[ur+".autorange"]=Lt,Ot[ur+".range"]=[null,er._rangeInitial1]):er._rangeInitial1===void 0?(Ot[ur+".range"]=[er._rangeInitial0,null],Ot[ur+".autorange"]=Lt):Ot[ur+".range"]=[er._rangeInitial0,er._rangeInitial1]}}e.emit("plotly_doubleclick",null),kx.call("_guiRelayout",e,Ot)}}function Be(){ut([0,0,q,z]),ru.syncOrAsync([rse.previousPromises,function(){e._fullLayout._replotting=!1,kx.call("_guiRelayout",e,Te)}],e)}function ut(ht){var pt=e._fullLayout,Ot=pt._plots,er=pt._subplots.cartesian,Ht,Kt,pr,yr;if(fe&&kx.subplotsRegistry.splom.drag(e),oe){for(Ht=0;Ht<er.length;Ht++)if(Kt=Ot[er[Ht]],pr=Kt.xaxis,yr=Kt.yaxis,Kt._scene){pr.limitRange&&pr.limitRange(),yr.limitRange&&yr.limitRange();var ur=ru.simpleMap(pr.range,pr.r2l),Lt=ru.simpleMap(yr.range,yr.r2l);Kt._scene.update({range:[ur[0],Lt[0],ur[1],Lt[1]]})}}if((fe||oe)&&(ese(e),tse(e)),le){var Fe=ht[2]/_._length,Ve=ht[3]/T._length;for(Ht=0;Ht<er.length;Ht++){Kt=Ot[er[Ht]],pr=Kt.xaxis,yr=Kt.yaxis;var bt=(ee||H.isSubplotConstrained)&&!pr.fixedrange&&M[pr._id],Tt=(ie||H.isSubplotConstrained)&&!yr.fixedrange&&C[yr._id],mr,Ar,Mr,Gr;if(bt?(mr=Fe,Mr=f||H.isSubplotConstrained?ht[0]:Et(pr,mr)):H.xaHash[pr._id]?(mr=Fe,Mr=ht[0]*pr._length/_._length):H.yaHash[pr._id]?(mr=Ve,Mr=W==="ns"?-ht[1]*pr._length/T._length:Et(pr,mr,{n:"top",s:"bottom"}[W])):(mr=sr(pr,Fe,Ve),Mr=Pr(pr,mr)),mr>1&&(pr.maxallowed!==void 0&&ee===(pr.range[0]<pr.range[1]?"e":"w")||pr.minallowed!==void 0&&ee===(pr.range[0]<pr.range[1]?"w":"e"))&&(mr=1,Mr=0),Tt?(Ar=Ve,Gr=l||H.isSubplotConstrained?ht[1]:Et(yr,Ar)):H.yaHash[yr._id]?(Ar=Ve,Gr=ht[1]*yr._length/T._length):H.xaHash[yr._id]?(Ar=Fe,Gr=V==="ew"?-ht[0]*yr._length/_._length:Et(yr,Ar,{e:"right",w:"left"}[V])):(Ar=sr(yr,Fe,Ve),Gr=Pr(yr,Ar)),Ar>1&&(yr.maxallowed!==void 0&&ie===(yr.range[0]<yr.range[1]?"n":"s")||yr.minallowed!==void 0&&ie===(yr.range[0]<yr.range[1]?"s":"n"))&&(Ar=1,Gr=0),!(!mr&&!Ar)){mr||(mr=1),Ar||(Ar=1);var pa=pr._offset-Mr/mr,Ca=yr._offset-Gr/Ar;Kt.clipRect.call(ev.setTranslate,Mr,Gr).call(ev.setScale,mr,Ar),Kt.plot.call(ev.setTranslate,pa,Ca).call(ev.setScale,1/mr,1/Ar),(mr!==Kt.xScaleFactor||Ar!==Kt.yScaleFactor)&&(ev.setPointGroupScale(Kt.zoomScalePts,mr,Ar),ev.setTextPointsScale(Kt.zoomScaleTxt,mr,Ar)),ev.hideOutsideRangePoints(Kt.clipOnAxisFalseTraces,Kt),Kt.xScaleFactor=mr,Kt.yScaleFactor=Ar}}}}function sr(ht,pt,Ot){return ht.fixedrange?0:ee&&N.xaHash[ht._id]?pt:ie&&(N.isSubplotConstrained?N.xaHash:N.yaHash)[ht._id]?Ot:0}function Pr(ht,pt){return pt?(ht.range=ht._r.slice(),d6(ht,pt),Et(ht,pt)):0}function Et(ht,pt,Ot){return ht._length*(1-pt)*$oe[Ot||ht.constraintoward||"middle"]}return ke}function LR(e,t,r,i){var a=ru.ensureSingle(e.draglayer,t,r,function(s){s.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return a.call(Joe,i),a.node()}function DR(e,t,r,i,a,s,l){var f=LR(e,"rect",t,r);return g6.select(f).call(ev.setRect,i,a,s,l),f}function AR(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function sse(e,t){var r=e.range[t],i=Math.abs(r-e.range[1-t]),a;return e.type==="date"?r:e.type==="log"?(a=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,_R("."+a+"g")(Math.pow(10,r))):(a=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,_R("."+String(a)+"g")(r))}function m6(e,t,r,i,a){for(var s=0;s<e.length;s++){var l=e[s];if(!l.fixedrange)if(l.rangebreaks){var f=l._id.charAt(0)==="y",h=f?1-t:t,v=f?1-r:r;i[l._name+".range[0]"]=l.l2r(l.p2l(h*l._length)),i[l._name+".range[1]"]=l.l2r(l.p2l(v*l._length))}else{var m=l._rl[0],_=l._rl[1]-m;i[l._name+".range[0]"]=l.l2r(m+_*t),i[l._name+".range[1]"]=l.l2r(m+_*r)}}if(a&&a.length){var T=(t+(1-r))/2;m6(a,T,1-T,i,[])}}function MR(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i.fixedrange){if(i.rangebreaks){var a=0,s=i._length,l=i.p2l(a+t)-i.p2l(a),f=i.p2l(s+t)-i.p2l(s),h=(l+f)/2;i.range=[i.l2r(i._rl[0]-h),i.l2r(i._rl[1]-h)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)];i.limitRange&&i.limitRange()}}}function lse(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function use(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function PR(e,t,r,i,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",CR(r,i)).attr("d",a+"Z")}function zR(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:xR.background,stroke:xR.defaultLine,"stroke-width":1,opacity:0}).attr("transform",CR(t,r)).attr("d","M0,0Z")}function IR(e,t,r,i,a,s){e.attr("d",i+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),RR(e,t,a,s)}function RR(e,t,r,i){r||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function y6(e){g6.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function FR(e){TR&&e.data&&e._context.showTips&&(ru.notifier(ru._(e,"Double-click to zoom back out"),"long"),TR=!1)}function fse(e,t){return"M"+(e.l-.5)+","+(t-_s-.5)+"h-3v"+(2*_s+1)+"h3ZM"+(e.r+.5)+","+(t-_s-.5)+"h3v"+(2*_s+1)+"h-3Z"}function cse(e,t){return"M"+(t-_s-.5)+","+(e.t-.5)+"v-3h"+(2*_s+1)+"v3ZM"+(t-_s-.5)+","+(e.b+.5)+"v3h"+(2*_s+1)+"v-3Z"}function Ex(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,_s)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function SR(e,t,r,i,a){for(var s=!1,l={},f={},h,v,m,_,T=(a||{}).xaHash,M=(a||{}).yaHash,C=0;C<t.length;C++){var E=t[C];for(h in r)if(E[h]){for(m in E)!(a&&(T[m]||M[m]))&&!(m.charAt(0)==="x"?r:i)[m]&&(l[m]=h);for(v in i)!(a&&(T[v]||M[v]))&&E[v]&&(s=!0)}for(v in i)if(E[v])for(_ in E)!(a&&(T[_]||M[_]))&&!(_.charAt(0)==="x"?r:i)[_]&&(f[_]=v)}s&&(ru.extendFlat(l,f),f={});var L={},I=[];for(m in l){var O=p6(e,m);I.push(O),L[O._id]=O}var q={},z=[];for(_ in f){var N=p6(e,_);z.push(N),q[N._id]=N}return{xaHash:L,yaHash:q,xaxes:I,yaxes:z,xLinks:l,yLinks:f,isSubplotConstrained:s}}function qR(e,t){if(!Woe)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function kR(e){var t=[];for(var r in e)t.push(e[r]);return t}NR.exports={makeDragBox:ose,makeDragger:LR,makeRectDragger:DR,makeZoombox:PR,makeCorners:zR,updateZoombox:IR,xyCorners:Ex,transitionZoombox:RR,removeZoombox:y6,showDoubleClickNotifier:FR,attachWheelEventHandler:qR}});var x6=me(Dx=>{"use strict";var hse=ja(),Lx=Nf(),vse=jl(),dse=Wh(),Vu=BR().makeDragBox,oo=eo().DRAGGERSIZE;Dx.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){hse.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var i=Object.keys(r._plots||{}).sort(function(s,l){if((r._plots[s].mainplot&&!0)===(r._plots[l].mainplot&&!0)){var f=s.split("y"),h=l.split("y");return f[0]===h[0]?Number(f[1]||1)-Number(h[1]||1):Number(f[0]||1)-Number(h[0]||1)}return r._plots[s].mainplot?1:-1});i.forEach(function(s){var l=r._plots[s],f=l.xaxis,h=l.yaxis;if(!l.mainplot){var v=Vu(t,l,f._offset,h._offset,f._length,h._length,"ns","ew");v.onmousemove=function(T){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===s&&t._fullLayout._plots[s]&&Lx.hover(t,T,s)},Lx.hover(t,T,s),t._fullLayout._lasthover=v,t._fullLayout._hoversubplot=s},v.onmouseout=function(T){t._dragging||(t._fullLayout._hoversubplot=null,vse.unhover(t,T))},t._context.showAxisDragHandles&&(Vu(t,l,f._offset-oo,h._offset-oo,oo,oo,"n","w"),Vu(t,l,f._offset+f._length,h._offset-oo,oo,oo,"n","e"),Vu(t,l,f._offset-oo,h._offset+h._length,oo,oo,"s","w"),Vu(t,l,f._offset+f._length,h._offset+h._length,oo,oo,"s","e"))}if(t._context.showAxisDragHandles){if(s===f._mainSubplot){var m=f._mainLinePosition;f.side==="top"&&(m-=oo),Vu(t,l,f._offset+f._length*.1,m,f._length*.8,oo,"","ew"),Vu(t,l,f._offset,m,f._length*.1,oo,"","w"),Vu(t,l,f._offset+f._length*.9,m,f._length*.1,oo,"","e")}if(s===h._mainSubplot){var _=h._mainLinePosition;h.side!=="right"&&(_-=oo),Vu(t,l,_,h._offset+h._length*.1,oo,h._length*.8,"ns",""),Vu(t,l,_,h._offset+h._length*.9,oo,h._length*.1,"s",""),Vu(t,l,_,h._offset,oo,h._length*.1,"n","")}}});var a=r._hoverlayer.node();a.onmousemove=function(s){s.target=t._fullLayout._lasthover,Lx.hover(t,s,r._hoversubplot)},a.onclick=function(s){s.target=t._fullLayout._lasthover,Lx.click(t,s)},a.onmousedown=function(s){t._fullLayout._lasthover.onmousedown(s)},Dx.updateFx(t)}};Dx.updateFx=function(e){var t=e._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";dse(t._draggers,r)}});var VR=me((c2e,UR)=>{"use strict";var OR=sa();UR.exports=function(t){for(var r=OR.layoutArrayContainers,i=OR.layoutArrayRegexes,a=t.split("[")[0],s,l,f=0;f<i.length;f++)if(l=t.match(i[f]),l&&l.index===0){s=l[0];break}if(s||(s=r[r.indexOf(a)]),!s)return!1;var h=t.slice(s.length);return h?(l=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),l?{array:s,index:Number(l[1]),property:l[3]||""}:!1):{array:s,index:"",property:""}}});var GR=me(Vg=>{"use strict";var pse=yc(),b6=y_(),Ug=Lh(),mse=pw().sorterAsc,w6=sa();Vg.containerArrayMatch=VR();var yse=Vg.isAddVal=function(t){return t==="add"||pse(t)},HR=Vg.isRemoveVal=function(t){return t===null||t==="remove"};Vg.applyContainerArrayChanges=function(t,r,i,a,s){var l=r.astr,f=w6.getComponentMethod(l,"supplyLayoutDefaults"),h=w6.getComponentMethod(l,"draw"),v=w6.getComponentMethod(l,"drawOne"),m=a.replot||a.recalc||f===b6||h===b6,_=t.layout,T=t._fullLayout;if(i[""]){Object.keys(i).length>1&&Ug.warn("Full array edits are incompatible with other edits",l);var M=i[""][""];if(HR(M))r.set(null);else if(Array.isArray(M))r.set(M);else return Ug.warn("Unrecognized full array edit value",l,M),!0;return m?!1:(f(_,T),h(t),!0)}var C=Object.keys(i).map(Number).sort(mse),E=r.get(),L=E||[],I=s(T,l).get(),O=[],q=-1,z=L.length,N,H,V,W,J,ee,ie,oe;for(N=0;N<C.length;N++){if(V=C[N],W=i[V],J=Object.keys(W),ee=W[""],ie=yse(ee),V<0||V>L.length-(ie?0:1)){Ug.warn("index out of range",l,V);continue}if(ee!==void 0)J.length>1&&Ug.warn("Insertion & removal are incompatible with edits to the same index.",l,V),HR(ee)?O.push(V):ie?(ee==="add"&&(ee={}),L.splice(V,0,ee),I&&I.splice(V,0,{})):Ug.warn("Unrecognized full object edit value",l,V,ee),q===-1&&(q=V);else for(H=0;H<J.length;H++)oe=l+"["+V+"].",s(L[V],J[H],oe).set(W[J[H]])}for(N=O.length-1;N>=0;N--)L.splice(O[N],1),I&&I.splice(O[N],1);if(L.length?E||r.set(L):r.set(null),m)return!1;if(f(_,T),v!==b6){var fe;if(q===-1)fe=C;else{for(z=Math.max(L.length,z),fe=[],N=0;N<C.length&&(V=C[N],!(V>=q));N++)fe.push(V);for(N=q;N<z;N++)fe.push(N)}for(N=0;N<fe.length;N++)v(t,fe[N])}else h(t);return!0}});var QR=me(au=>{"use strict";var XR=Da(),jR=sa(),ss=Bt(),Hg=to(),JR=jn(),KR=Oa(),Gg=JR.cleanId,gse=JR.getFromTrace,T6=jR.traceIs,_se=["x","y","z"];au.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&ss.log("Clearing previous rejected promises from queue."),e._promises=[]};au.cleanLayout=function(e){var t,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var i=(Hg.subplotsRegistry.cartesian||{}).attrRegex,a=(Hg.subplotsRegistry.polar||{}).attrRegex,s=(Hg.subplotsRegistry.ternary||{}).attrRegex,l=(Hg.subplotsRegistry.gl3d||{}).attrRegex,f=Object.keys(e);for(t=0;t<f.length;t++){var h=f[t];if(i&&i.test(h)){var v=e[h];v.anchor&&v.anchor!=="free"&&(v.anchor=Gg(v.anchor)),v.overlaying&&(v.overlaying=Gg(v.overlaying)),v.type||(v.isdate?v.type="date":v.islog?v.type="log":v.isdate===!1&&v.islog===!1&&(v.type="linear")),(v.autorange==="withzero"||v.autorange==="tozero")&&(v.autorange=!0,v.rangemode="tozero"),v.insiderange&&delete v.range,delete v.islog,delete v.isdate,delete v.categories,Px(v,"domain")&&delete v.domain}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<m;t++){var _=e.annotations[t];ss.isPlainObject(_)&&(lm(_,"xref"),lm(_,"yref"))}var T=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<T;t++){var M=e.shapes[t];ss.isPlainObject(M)&&(lm(M,"xref",!0),lm(M,"yref",!0))}var C=Array.isArray(e.images)?e.images.length:0;for(t=0;t<C;t++){var E=e.images[t];ss.isPlainObject(E)&&(lm(E,"xref"),lm(E,"yref"))}var L=e.legend;return L&&(L.x>3?(L.x=1.02,L.xanchor="left"):L.x<-2&&(L.x=-.02,L.xanchor="right"),L.y>3?(L.y=1.02,L.yanchor="bottom"):L.y<-2&&(L.y=-.02,L.yanchor="top")),e.dragmode==="rotate"&&(e.dragmode="orbit"),KR.clean(e),e.template&&e.template.layout&&au.cleanLayout(e.template.layout),e};function lm(e,t,r=!1){var i=e[t],a=t.charAt(0);r&&Array.isArray(i)||i&&i!=="paper"&&(e[t]=Gg(i,a,!0))}au.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t],i;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.type==="histogramy"&&au.swapXYData(r),(r.type==="histogramx"||r.type==="histogramy")&&(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=Gg(r.xaxis,"x")),r.yaxis&&(r.yaxis=Gg(r.yaxis,"y")),T6(r,"gl3d")&&r.scene&&(r.scene=Hg.subplotsRegistry.gl3d.cleanId(r.scene)),!T6(r,"pie-like")&&!T6(r,"bar-like"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=YR(r.textposition[i]);else r.textposition&&(r.textposition=YR(r.textposition));var a=jR.getModule(r);if(a&&a.colorbar){var s=a.colorbar.container,l=s?r[s]:r;l&&l.colorscale&&(l.colorscale==="YIGnBu"&&(l.colorscale="YlGnBu"),l.colorscale==="YIOrRd"&&(l.colorscale="YlOrRd"))}if(r.type==="surface"&&ss.isPlainObject(r.contours)){var f=["x","y","z"];for(i=0;i<f.length;i++){var h=r.contours[f[i]];ss.isPlainObject(h)&&(h.highlightColor&&(h.highlightcolor=h.highlightColor,delete h.highlightColor),h.highlightWidth&&(h.highlightwidth=h.highlightWidth,delete h.highlightWidth))}}if(r.type==="candlestick"||r.type==="ohlc"){var v=(r.increasing||{}).showlegend!==!1,m=(r.decreasing||{}).showlegend!==!1,_=ZR(r.increasing),T=ZR(r.decreasing);if(_!==!1&&T!==!1){var M=xse(_,T,v,m);M&&(r.name=M)}else(_||T)&&!r.name&&(r.name=_||T)}Px(r,"line")&&delete r.line,"marker"in r&&(Px(r.marker,"line")&&delete r.marker.line,Px(r,"marker")&&delete r.marker),KR.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins)}};function ZR(e){if(!ss.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,(typeof t=="string"||typeof t=="number")&&String(t)}function xse(e,t,r,i){if(r&&!i)return e;if(i&&!r||!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length),s;for(s=0;s<a&&e.charAt(s)===t.charAt(s);s++);var l=e.slice(0,s);return l.trim()}function YR(e){var t="middle",r="center";return typeof e=="string"&&(e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?r="left":e.indexOf("right")!==-1&&(r="right")),t+" "+r}function Px(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}au.swapXYData=function(e){var t;if(ss.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);ss.swapAttrs(e,["error_?.copy_ystyle"]),i&&ss.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(typeof e.hoverinfo=="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++)a[t]==="x"?a[t]="y":a[t]==="y"&&(a[t]="x");e.hoverinfo=a.join("+")}};au.coerceTraceIndices=function(e,t){if(XR(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(a,s){return s});if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)ss.isIndex(t[i],e.data.length)?r.push(t[i]):ss.warn("trace index (",t[i],") is not a number or is out of bounds");return r}return t};au.manageArrayContainers=function(e,t,r){var i=e.obj,a=e.parts,s=a.length,l=a[s-1],f=XR(l);if(f&&t===null){var h=a.slice(0,s-1).join("."),v=ss.nestedProperty(i,h).get();v.splice(l,1)}else f&&e.get()===void 0&&e.get()===void 0&&(r[e.astr]=null),e.set(t)};var bse=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function WR(e){var t=e.search(bse);if(t>0)return e.slice(0,t)}au.hasParent=function(e,t){for(var r=WR(t);r;){if(r in e)return!0;r=WR(r)}return!1};au.clearAxisTypes=function(e,t,r){for(var i=0;i<t.length;i++)for(var a=e._fullData[i],s=0;s<3;s++){var l=gse(e,a,_se[s]);if(l&&l.type!=="log"){var f=l._name,h=l._id.slice(1);if(h.slice(0,5)==="scene"){if(r[h]!==void 0)continue;f=h+"."+f}var v=f+".type";r[f]===void 0&&r[v]===void 0&&ss.nestedProperty(e.layout,v).set(null)}}};var A6=(e,t)=>{let r=(...i)=>i.every(a=>ss.isPlainObject(a))||i.every(a=>Array.isArray(a));if([e,t].every(i=>Array.isArray(i))){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let a=e[i],s=t[i];if(a!==s&&!(r(a,s)?A6(a,s):!1))return!1}return!0}else if([e,t].every(i=>ss.isPlainObject(i))){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e){if(i.startsWith("_"))continue;let a=e[i],s=t[i];if(a!==s&&!(r(a,s)?A6(a,s):!1))return!1}return!0}return!1};au.collectionsAreEqual=A6});var L6=me(Ha=>{"use strict";var Rx=ja(),wse=Da(),Tse=Cw(),br=Bt(),Bi=br.nestedProperty,k6=Yy(),xs=zk(),iu=sa(),Vx=F0(),ta=to(),ls=Xi(),Ase=K5(),Mse=Nu(),M6=xi(),Sse=Oa(),kse=x6().initInteractions,Cse=Oh(),Ese=Hf().clearOutline,aF=cd().dfltConfig,zx=GR(),zn=QR(),hi=hx(),tv=il(),Lse=eo().AX_NAME_PATTERN,S6=0,$R=5;function Dse(e,t,r,i){var a;if(e=br.getGraphDiv(e),k6.init(e),br.isPlainObject(t)){var s=t;t=s.data,r=s.layout,i=s.config,a=s.frames}var l=k6.triggerHandler(e,"plotly_beforeplot",[t,r,i]);if(l===!1)return Promise.reject();!t&&!r&&!br.isPlotDiv(e)&&br.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e);function f(){if(a)return Ha.addFrames(e,a)}nF(e,i),r||(r={}),Rx.select(e).classed("js-plotly-plot",!0),M6.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var h=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(zn.cleanData(t),h?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||h)&&(e.layout=zn.cleanLayout(r)),ta.supplyDefaults(e);var v=e._fullLayout,m=v._has("cartesian");v._replotting=!0,(h||v._shouldCreateBgLayer)&&(ele(e),v._shouldCreateBgLayer&&delete v._shouldCreateBgLayer),M6.initGradients(e),M6.initPatterns(e),h&&ls.saveShowSpikeInitial(e);var _=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;_&&ta.doCalcdata(e);for(var T=0;T<e.calcdata.length;T++)e.calcdata[T][0].trace=e._fullData[T];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){br.isHidden(e)||ta.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):br.clearResponsive(e);var M=br.extendFlat({},v._size),C=0;function E(){for(var V=v._basePlotModules,W=0;W<V.length;W++)V[W].drawFramework&&V[W].drawFramework(e);!v._glcanvas&&v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(oe){return oe.key}),v._glcanvas.enter().append("canvas").attr("class",function(oe){return"gl-canvas gl-canvas-"+oe.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var J=e._context.plotGlPixelRatio;if(v._glcanvas){v._glcanvas.attr("width",v.width*J).attr("height",v.height*J).style("width",v.width+"px").style("height",v.height+"px");var ee=v._glcanvas.data()[0].regl;if(ee&&(Math.floor(v.width*J)!==ee._gl.drawingBufferWidth||Math.floor(v.height*J)!==ee._gl.drawingBufferHeight)){var ie="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(C)br.error(ie);else return br.log(ie+" Clearing graph and plotting again."),ta.cleanPlot([],{},e._fullData,v),ta.supplyDefaults(e),v=e._fullLayout,ta.doCalcdata(e),C++,E()}}return v.modebar.orientation==="h"?v._modebardiv.style("height",null).style("width","100%"):v._modebardiv.style("width",null).style("height",v.height+"px"),ta.previousPromises(e)}function L(){if(ta.clearAutoMarginIds(e),hi.drawMarginPushers(e),ls.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&ta.allowAutoMargin(e,"title.automargin"),v._has("pie"))for(var V=e._fullData,W=0;W<V.length;W++){var J=V[W];J.type==="pie"&&J.automargin&&ta.allowAutoMargin(e,"pie."+J.uid+".automargin")}return ta.doAutoMargin(e),ta.previousPromises(e)}function I(){if(ta.didMarginChange(M,v._size))return br.syncOrAsync([L,hi.layoutStyles],e)}function O(){if(!_){q();return}return br.syncOrAsync([iu.getComponentMethod("shapes","calcAutorange"),iu.getComponentMethod("annotations","calcAutorange"),q],e)}function q(){e._transitioning||(hi.doAutoRangeAndConstraints(e),h&&ls.saveRangeInitial(e),iu.getComponentMethod("rangeslider","calcAutorange")(e))}function z(){return ls.draw(e,h?"":"redraw")}var N=[ta.previousPromises,f,E,L,I];m&&N.push(O),N.push(hi.layoutStyles),m&&N.push(z,function(W){var J=W._fullLayout._insideTickLabelsUpdaterange;if(J)return W._fullLayout._insideTickLabelsUpdaterange=void 0,Zg(W,J).then(function(){ls.saveRangeInitial(W,!0)})}),N.push(hi.drawData,hi.finalDraw,kse,ta.addLinks,ta.rehover,ta.redrag,ta.reselect,ta.doAutoMargin,ta.previousPromises);var H=br.syncOrAsync(N,e);return(!H||!H.then)&&(H=Promise.resolve()),H.then(function(){return Yg(e),e})}function Yg(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function Pse(e){return br.extendFlat(aF,e)}function iF(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){br.error(r)}}function zse(e,t){var r=Sse.combine(t,"white");iF(e,r)}function nF(e,t){if(!e._context){e._context=br.extendDeep({},aF);var r=Rx.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i=e._context,a,s,l;if(t){for(s=Object.keys(t),a=0;a<s.length;a++)l=s[a],!(l==="editable"||l==="edits")&&l in i&&(l==="setBackground"&&t[l]==="opaque"?i[l]=zse:i[l]=t[l]);var f=t.editable;if(f!==void 0)for(i.editable=f,s=Object.keys(i.edits),a=0;a<s.length;a++)i.edits[s[a]]=f;if(t.edits)for(s=Object.keys(t.edits),a=0;a<s.length;a++)l=s[a],l in i.edits&&(i.edits[l]=t.edits[l]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),i.displayModeBar==="hover"&&!Tse&&(i.displayModeBar=!0),(i.setBackground==="transparent"||typeof i.setBackground!="function")&&(i.setBackground=iF),i._hasZeroHeight=i._hasZeroHeight||e.clientHeight===0,i._hasZeroWidth=i._hasZeroWidth||e.clientWidth===0;var h=i.scrollZoom,v=i._scrollZoom={};if(h===!0)v.cartesian=1,v.gl3d=1,v.geo=1,v.mapbox=1,v.map=1;else if(typeof h=="string"){var m=h.split("+");for(a=0;a<m.length;a++)v[m[a]]=1}else h!==!1&&(v.gl3d=1,v.geo=1,v.mapbox=1,v.map=1)}function Ise(e){if(e=br.getGraphDiv(e),!br.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return zn.cleanData(e.data),zn.cleanLayout(e.layout),e.calcdata=void 0,Ha._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})}function Rse(e,t,r,i){return e=br.getGraphDiv(e),ta.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),ta.purge(e),Ha._doPlot(e,t,r,i)}function Fx(e,t){var r=t+1,i=[],a,s;for(a=0;a<e.length;a++)s=e[a],s<0?i.push(r+s):i.push(s);return i}function qx(e,t,r){var i,a;for(i=0;i<t.length;i++){if(a=t[i],a!==parseInt(a,10))throw new Error("all values in "+r+" must be integers");if(a>=e.data.length||a<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(a,i+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1)throw new Error("each index in "+r+" must be unique.")}}function oF(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),qx(e,t,"currentIndices"),typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&qx(e,r,"newIndices"),typeof r!="undefined"&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function Fse(e,t,r){var i,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)if(a=t[i],typeof a!="object"||Array.isArray(a)||a===null)throw new Error("all values in traces array must be non-array objects");if(typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function qse(e,t,r,i){var a=br.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!br.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof r=="undefined")throw new Error("indices must be an integer or array of integers");qx(e,r,"indices");for(var s in t){if(!Array.isArray(t[s])||t[s].length!==r.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(a&&(!(s in i)||!Array.isArray(i[s])||i[s].length!==t[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function Nse(e,t,r,i){var a=br.isPlainObject(i),s=[],l,f,h,v,m;Array.isArray(r)||(r=[r]),r=Fx(r,e.data.length-1);for(var _ in t)for(var T=0;T<r.length;T++){if(l=e.data[r[T]],h=Bi(l,_),f=h.get(),v=t[_][T],!br.isArrayOrTypedArray(v))throw new Error("attribute: "+_+" index: "+T+" must be an array");if(!br.isArrayOrTypedArray(f))throw new Error("cannot extend missing or non-array attribute: "+_);if(f.constructor!==v.constructor)throw new Error("cannot extend array with an array of a different type: "+_);m=a?i[_][T]:i,wse(m)||(m=-1),s.push({prop:h,target:f,insert:v,maxp:Math.floor(m)})}return s}function sF(e,t,r,i,a){qse(e,t,r,i);for(var s=Nse(e,t,r,i),l={},f={},h=0;h<s.length;h++){var v=s[h].prop,m=s[h].maxp,_=a(s[h].target,s[h].insert,m);v.set(_[0]),Array.isArray(l[v.astr])||(l[v.astr]=[]),l[v.astr].push(_[1]),Array.isArray(f[v.astr])||(f[v.astr]=[]),f[v.astr].push(s[h].target.length)}return{update:l,maxPoints:f}}function lF(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function uF(e,t,r,i){e=br.getGraphDiv(e);function a(h,v,m){var _,T;if(br.isTypedArray(h))if(m<0){var M=new h.constructor(0),C=lF(h,v);m<0?(_=C,T=M):(_=M,T=C)}else if(_=new h.constructor(m),T=new h.constructor(h.length+v.length-m),m===v.length)_.set(v),T.set(h);else if(m<v.length){var E=v.length-m;_.set(v.subarray(E)),T.set(h),T.set(v.subarray(0,E),h.length)}else{var L=m-v.length,I=h.length-L;_.set(h.subarray(I)),_.set(v,L),T.set(h.subarray(0,I))}else _=h.concat(v),T=m>=0&&m<_.length?_.splice(0,_.length-m):[];return[_,T]}var s=sF(e,t,r,i,a),l=Ha.redraw(e),f=[e,s.update,r,s.maxPoints];return xs.add(e,Ha.prependTraces,f,uF,arguments),l}function fF(e,t,r,i){e=br.getGraphDiv(e);function a(h,v,m){var _,T;if(br.isTypedArray(h))if(m<=0){var M=new h.constructor(0),C=lF(v,h);m<0?(_=C,T=M):(_=M,T=C)}else if(_=new h.constructor(m),T=new h.constructor(h.length+v.length-m),m===v.length)_.set(v),T.set(h);else if(m<v.length){var E=v.length-m;_.set(v.subarray(0,E)),T.set(v.subarray(E)),T.set(h,E)}else{var L=m-v.length;_.set(v),_.set(h.subarray(0,L),v.length),T.set(h.subarray(L))}else _=v.concat(h),T=m>=0&&m<_.length?_.splice(m,_.length):[];return[_,T]}var s=sF(e,t,r,i,a),l=Ha.redraw(e),f=[e,s.update,r,s.maxPoints];return xs.add(e,Ha.extendTraces,f,fF,arguments),l}function cF(e,t,r){e=br.getGraphDiv(e);var i=[],a=Ha.deleteTraces,s=cF,l=[e,i],f=[e,t],h,v;for(Fse(e,t,r),Array.isArray(t)||(t=[t]),t=t.map(function(m){return br.extendFlat({},m)}),zn.cleanData(t),h=0;h<t.length;h++)e.data.push(t[h]);for(h=0;h<t.length;h++)i.push(-t.length+h);if(typeof r=="undefined")return v=Ha.redraw(e),xs.add(e,a,l,s,f),v;Array.isArray(r)||(r=[r]);try{oF(e,i,r)}catch(m){throw e.data.splice(e.data.length-t.length,t.length),m}return xs.startSequence(e),xs.add(e,a,l,s,f),v=Ha.moveTraces(e,i,r),xs.stopSequence(e),v}function hF(e,t){e=br.getGraphDiv(e);var r=[],i=Ha.addTraces,a=hF,s=[e,r,t],l=[e,t],f,h;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),qx(e,t,"indices"),t=Fx(t,e.data.length-1),t.sort(br.sorterDes),f=0;f<t.length;f+=1)h=e.data.splice(t[f],1)[0],r.push(h);var v=Ha.redraw(e);return xs.add(e,i,s,a,l),v}function C6(e,t,r){e=br.getGraphDiv(e);var i=[],a=[],s=C6,l=C6,f=[e,r,t],h=[e,t,r],v;if(oF(e,t,r),t=Array.isArray(t)?t:[t],typeof r=="undefined")for(r=[],v=0;v<t.length;v++)r.push(-t.length+v);for(r=Array.isArray(r)?r:[r],t=Fx(t,e.data.length-1),r=Fx(r,e.data.length-1),v=0;v<e.data.length;v++)t.indexOf(v)===-1&&i.push(e.data[v]);for(v=0;v<t.length;v++)a.push({newIndex:r[v],trace:e.data[t[v]]});for(a.sort(function(_,T){return _.newIndex-T.newIndex}),v=0;v<a.length;v+=1)i.splice(a[v].newIndex,0,a[v].trace);e.data=i;var m=Ha.redraw(e);return xs.add(e,s,f,l,h),m}function Nx(e,t,r,i){e=br.getGraphDiv(e),zn.clearPromiseQueue(e);var a={};if(typeof t=="string")a[t]=r;else if(br.isPlainObject(t))a=br.extendFlat({},t),i===void 0&&(i=r);else return br.warn("Restyle fail.",t,r,i),Promise.reject();Object.keys(a).length&&(e.changed=!0);var s=zn.coerceTraceIndices(e,i),l=vF(e,a,s),f=l.flags;f.calc&&(e.calcdata=void 0),f.clearAxisTypes&&zn.clearAxisTypes(e,s,{});var h=[];f.fullReplot?h.push(Ha._doPlot):(h.push(ta.previousPromises),ta.supplyDefaults(e),f.markerSize&&(ta.doCalcdata(e),Hx(h)),f.style&&h.push(hi.doTraceStyle),f.colorbars&&h.push(hi.doColorBars),h.push(Yg)),h.push(ta.rehover,ta.redrag,ta.reselect),xs.add(e,Nx,[e,l.undoit,l.traces],Nx,[e,l.redoit,l.traces]);var v=br.syncOrAsync(h,e);return(!v||!v.then)&&(v=Promise.resolve()),v.then(function(){return e.emit("plotly_restyle",l.eventData),e})}function Ic(e){return e===void 0?null:e}function Ix(e,t){return t?function(r,i,a){var s=Bi(r,i),l=s.set;return s.set=function(f){var h=(a||"")+i;Bx(h,s.get(),f,e),l(f)},s}:Bi}function Bx(e,t,r,i){if(Array.isArray(t)||Array.isArray(r))for(var a=Array.isArray(t)?t:[],s=Array.isArray(r)?r:[],l=Math.max(a.length,s.length),f=0;f<l;f++)Bx(e+"["+f+"]",a[f],s[f],i);else if(br.isPlainObject(t)||br.isPlainObject(r)){var h=br.isPlainObject(t)?t:{},v=br.isPlainObject(r)?r:{},m=br.extendFlat({},h,v);for(var _ in m)Bx(e+"."+_,h[_],v[_],i)}else i[e]===void 0&&(i[e]=Ic(t))}function Bse(e,t,r){for(var i in r){var a=Bi(e,i);Bx(i,a.get(),r[i],t)}}function vF(e,t,r){var i=e._fullLayout,a=e._fullData,s=e.data,l=i._guiEditing,f=Ix(i._preGUI,l),h=br.extendDeepAll({},t),v,m=tv.traceFlags(),_={},T={},M;function C(){return r.map(function(){})}function E(de){var ze=ls.id2name(de);M.indexOf(ze)===-1&&M.push(ze)}function L(de){return"LAYOUT"+de+".autorange"}function I(de){return"LAYOUT"+de+".range"}function O(de){for(var ze=de;ze<a.length;ze++)if(a[ze]._input===s[de])return a[ze]}function q(de,ze,_e){if(Array.isArray(de)){de.forEach(function(Ct){q(Ct,ze,_e)});return}if(!(de in t||zn.hasParent(t,de))){var Ue;if(de.slice(0,6)==="LAYOUT")Ue=f(e.layout,de.replace("LAYOUT",""));else{var at=r[_e],Je=i._tracePreGUI[O(at)._fullInput.uid];Ue=Ix(Je,l)(s[at],de)}de in T||(T[de]=C()),T[de][_e]===void 0&&(T[de][_e]=Ic(Ue.get())),ze!==void 0&&Ue.set(ze)}}function z(de){return function(ze){return a[ze][de]}}function N(de){return function(ze,_e){return ze===!1?a[r[_e]][de]:null}}for(var H in t){if(zn.hasParent(t,H))throw new Error("cannot set "+H+" and a parent attribute simultaneously");var V=t[H],W,J,ee,ie,oe,fe;if((H==="autobinx"||H==="autobiny")&&(H=H.charAt(H.length-1)+"bins",Array.isArray(V)?V=V.map(N(H)):V===!1?V=r.map(z(H)):V=null),_[H]=V,H.slice(0,6)==="LAYOUT"){ee=f(e.layout,H.replace("LAYOUT","")),T[H]=[Ic(ee.get())],ee.set(Array.isArray(V)?V[0]:V),m.calc=!0;continue}for(T[H]=C(),v=0;v<r.length;v++){W=s[r[v]],J=O(r[v]);var le=i._tracePreGUI[J._fullInput.uid];if(ee=Ix(le,l)(W,H),ie=ee.get(),oe=Array.isArray(V)?V[v%V.length]:V,oe!==void 0){var Te=ee.parts[ee.parts.length-1],Se=H.slice(0,H.length-Te.length-1),Me=Se?Se+".":"",Ae=Se?Bi(J,Se).get():J;if(fe=Vx.getTraceValObject(J,ee.parts),fe&&fe.impliedEdits&&oe!==null)for(var pe in fe.impliedEdits)q(br.relativeAttr(H,pe),fe.impliedEdits[pe],v);else if((Te==="thicknessmode"||Te==="lenmode")&&ie!==oe&&(oe==="fraction"||oe==="pixels")&&Ae){var ke=i._size,Ee=Ae.orient,Xe=Ee==="top"||Ee==="bottom";if(Te==="thicknessmode"){var lt=Xe?ke.h:ke.w;q(Me+"thickness",Ae.thickness*(oe==="fraction"?1/lt:lt),v)}else{var it=Xe?ke.w:ke.h;q(Me+"len",Ae.len*(oe==="fraction"?1/it:it),v)}}else if(H==="type"&&(oe==="pie"!=(ie==="pie")||oe==="funnelarea"!=(ie==="funnelarea"))){var _t="x",Ye="y";(oe==="bar"||ie==="bar")&&W.orientation==="h"&&(_t="y",Ye="x"),br.swapAttrs(W,["?","?src"],"labels",_t),br.swapAttrs(W,["d?","?0"],"label",_t),br.swapAttrs(W,["?","?src"],"values",Ye),ie==="pie"||ie==="funnelarea"?(Bi(W,"marker.color").set(Bi(W,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):iu.traceIs(W,"cartesian")&&Bi(W,"marker.colors").set(Bi(W,"marker.color").get())}T[H][v]=Ic(ie);var kt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(kt.indexOf(H)!==-1){if(H==="orientation"){ee.set(oe);var st=W.x&&!W.y?"h":"v";if((ee.get()||st)===J.orientation)continue}else H==="orientationaxes"&&(W.orientation={v:"h",h:"v"}[J.orientation]);zn.swapXYData(W),m.calc=m.clearAxisTypes=!0}else ta.dataArrayContainers.indexOf(ee.parts[0])!==-1?(zn.manageArrayContainers(ee,oe,T),m.calc=!0):(fe?fe.arrayOk&&!iu.traceIs(J,"regl")&&(br.isArrayOrTypedArray(oe)||br.isArrayOrTypedArray(ie))?m.calc=!0:tv.update(m,fe):m.calc=!0,ee.set(oe))}}if(["swapxyaxes","orientationaxes"].indexOf(H)!==-1&&ls.swap(e,r),H==="orientationaxes"){var dt=Bi(e.layout,"hovermode"),It=dt.get();It==="x"?dt.set("y"):It==="y"?dt.set("x"):It==="x unified"?dt.set("y unified"):It==="y unified"&&dt.set("x unified")}if(["orientation","type"].indexOf(H)!==-1){for(M=[],v=0;v<r.length;v++){var yt=s[r[v]];iu.traceIs(yt,"cartesian")&&(E(yt.xaxis||"x"),E(yt.yaxis||"y"))}q(M.map(L),!0,0),q(M.map(I),[0,1],0)}}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:T,redoit:_,traces:r,eventData:br.extendDeepNoArrays([],[h,r])}}function Zg(e,t,r){e=br.getGraphDiv(e),zn.clearPromiseQueue(e);var i={};if(typeof t=="string")i[t]=r;else if(br.isPlainObject(t))i=br.extendFlat({},t);else return br.warn("Relayout fail.",t,r),Promise.reject();Object.keys(i).length&&(e.changed=!0);var a=yF(e,i),s=a.flags;s.calc&&(e.calcdata=void 0);var l=[ta.previousPromises];s.layoutReplot?l.push(hi.layoutReplot):Object.keys(i).length&&(dF(e,s,a)||ta.supplyDefaults(e),s.legend&&l.push(hi.doLegend),s.layoutstyle&&l.push(hi.layoutStyles),s.axrange&&Hx(l,a.rangesAltered),s.ticks&&l.push(hi.doTicksRelayout),s.modebar&&l.push(hi.doModeBar),s.camera&&l.push(hi.doCamera),s.colorbars&&l.push(hi.doColorBars),l.push(Yg)),l.push(ta.rehover,ta.redrag,ta.reselect),xs.add(e,Zg,[e,a.undoit],Zg,[e,a.redoit]);var f=br.syncOrAsync(l,e);return(!f||!f.then)&&(f=Promise.resolve(e)),f.then(function(){return e.emit("plotly_relayout",a.eventData),e})}function dF(e,t,r){var i=e._fullLayout;if(!t.axrange)return!1;for(var a in t)if(a!=="axrange"&&t[a])return!1;var s,l,f=function(M,C){return br.coerce(s,l,Mse,M,C)},h={};for(var v in r.rangesAltered){var m=ls.id2name(v);if(s=e.layout[m],l=i[m],Ase(s,l,f,h),l._matchGroup){for(var _ in l._matchGroup)if(_!==v){var T=i[ls.id2name(_)];T.autorange=l.autorange,T.range=l.range.slice(),T._input.range=l.range.slice()}}}return!0}function Hx(e,t){var r=t?function(i){var a=[],s=!0;for(var l in t){var f=ls.getFromId(i,l);if(a.push(l),(f.ticklabelposition||"").indexOf("inside")!==-1&&f._anchorAxis&&a.push(f._anchorAxis._id),f._matchGroup)for(var h in f._matchGroup)t[h]||a.push(h)}return ls.draw(i,a,{skipTitle:s})}:function(i){return ls.draw(i,"redraw")};e.push(Ese,hi.doAutoRangeAndConstraints,r,hi.drawData,hi.finalDraw)}var pF=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,mF=/^[xyz]axis[0-9]*\.autorange$/,Ose=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function yF(e,t){var r=e.layout,i=e._fullLayout,a=i._guiEditing,s=Ix(i._preGUI,a),l=Object.keys(t),f=ls.list(e),h=br.extendDeepAll({},t),v={},m,_,T;for(l=Object.keys(t),_=0;_<l.length;_++)if(l[_].indexOf("allaxes")===0){for(T=0;T<f.length;T++){var M=f[T]._id.slice(1),C=M.indexOf("scene")!==-1?M+".":"",E=l[_].replace("allaxes",C+f[T]._name);t[E]||(t[E]=t[l[_]])}delete t[l[_]]}var L=tv.layoutFlags(),I={},O={};function q(Je,Ct){if(Array.isArray(Je)){Je.forEach(function(xt){q(xt,Ct)});return}if(!(Je in t||zn.hasParent(t,Je))){var wt=s(r,Je);Je in O||(O[Je]=Ic(wt.get())),Ct!==void 0&&wt.set(Ct)}}var z={},N;function H(Je){var Ct=ls.name2id(Je.split(".")[0]);return z[Ct]=1,Ct}for(var V in t){if(zn.hasParent(t,V))throw new Error("cannot set "+V+" and a parent attribute simultaneously");for(var W=s(r,V),J=t[V],ee=W.parts.length,ie=ee-1;ie>0&&typeof W.parts[ie]!="string";)ie--;var oe=W.parts[ie],fe=W.parts[ie-1]+"."+oe,le=W.parts.slice(0,ie).join("."),Te=Bi(e.layout,le).get(),Se=Bi(i,le).get(),Me=W.get();if(J!==void 0){I[V]=J,O[V]=oe==="reverse"?J:Ic(Me);var Ae=Vx.getLayoutValObject(i,W.parts);if(Ae&&Ae.impliedEdits&&J!==null)for(var pe in Ae.impliedEdits)q(br.relativeAttr(V,pe),Ae.impliedEdits[pe]);if(["width","height"].indexOf(V)!==-1)if(J){q("autosize",null);var ke=V==="height"?"width":"height";q(ke,i[ke])}else i[V]=e._initialAutoSize[V];else if(V==="autosize")q("width",J?null:i.width),q("height",J?null:i.height);else if(fe.match(pF))H(fe),Bi(i,le+"._inputRange").set(null);else if(fe.match(mF)){H(fe),Bi(i,le+"._inputRange").set(null);var Ee=Bi(i,le).get();Ee._inputDomain&&(Ee._input.domain=Ee._inputDomain.slice())}else fe.match(Ose)&&Bi(i,le+"._inputDomain").set(null);if(oe==="type"){N=Te;var Xe=Se.type==="linear"&&J==="log",lt=Se.type==="log"&&J==="linear";if(Xe||lt){if(!N||!N.range)q(le+".autorange",!0);else if(Se.autorange)Xe&&(N.range=N.range[1]>N.range[0]?[1,2]:[2,1]);else{var it=N.range[0],_t=N.range[1];Xe?(it<=0&&_t<=0&&q(le+".autorange",!0),it<=0?it=_t/1e6:_t<=0&&(_t=it/1e6),q(le+".range[0]",Math.log(it)/Math.LN10),q(le+".range[1]",Math.log(_t)/Math.LN10)):(q(le+".range[0]",Math.pow(10,it)),q(le+".range[1]",Math.pow(10,_t)))}Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[W.parts[0]]&&W.parts[1]==="radialaxis"&&delete i[W.parts[0]]._subplot.viewInitial["radialaxis.range"],iu.getComponentMethod("annotations","convertCoords")(e,Se,J,q),iu.getComponentMethod("images","convertCoords")(e,Se,J,q)}else q(le+".autorange",!0),q(le+".range",null);Bi(i,le+"._inputRange").set(null)}else if(oe.match(Lse)){var Ye=Bi(i,V).get(),kt=(J||{}).type;(!kt||kt==="-")&&(kt="linear"),iu.getComponentMethod("annotations","convertCoords")(e,Ye,kt,q),iu.getComponentMethod("images","convertCoords")(e,Ye,kt,q)}var st=zx.containerArrayMatch(V);if(st){m=st.array,_=st.index;var dt=st.property,It=Ae||{editType:"calc"};_!==""&&dt===""&&(zx.isAddVal(J)?O[V]=null:zx.isRemoveVal(J)?O[V]=(Bi(r,m).get()||[])[_]:br.warn("unrecognized full object value",t)),tv.update(L,It),v[m]||(v[m]={});var yt=v[m][_];yt||(yt=v[m][_]={}),yt[dt]=J,delete t[V]}else oe==="reverse"?(Te.range?Te.range.reverse():(q(le+".autorange",!0),Te.range=[1,0]),Se.autorange?L.calc=!0:L.plot=!0):(V==="dragmode"&&(J===!1&&Me!==!1||J!==!1&&Me===!1)||i._has("scatter-like")&&i._has("regl")&&V==="dragmode"&&(J==="lasso"||J==="select")&&!(Me==="lasso"||Me==="select")?L.plot=!0:Ae?tv.update(L,Ae):L.calc=!0,W.set(J))}}for(m in v){var de=zx.applyContainerArrayChanges(e,s(r,m),v[m],L,s);de||(L.plot=!0)}for(var ze in z){N=ls.getFromId(e,ze);var _e=N&&N._constraintGroup;if(_e){L.calc=!0;for(var Ue in _e)z[Ue]||(ls.getFromId(e,Ue)._constraintShrinkable=!0)}}(gF(e)||t.height||t.width)&&(L.plot=!0);var at=i.shapes;for(_=0;_<at.length;_++)if(at[_].showlegend){L.calc=!0;break}return(L.plot||L.calc)&&(L.layoutReplot=!0),{flags:L,rangesAltered:z,undoit:O,redoit:I,eventData:h}}function gF(e){var t=e._fullLayout,r=t.width,i=t.height;return e.layout.autosize&&ta.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==i}function Ox(e,t,r,i){e=br.getGraphDiv(e),zn.clearPromiseQueue(e),br.isPlainObject(t)||(t={}),br.isPlainObject(r)||(r={}),Object.keys(t).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var a=zn.coerceTraceIndices(e,i),s=vF(e,br.extendFlat({},t),a),l=s.flags,f=yF(e,br.extendFlat({},r)),h=f.flags;(l.calc||h.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&zn.clearAxisTypes(e,a,r);var v=[];h.layoutReplot?v.push(hi.layoutReplot):l.fullReplot?v.push(Ha._doPlot):(v.push(ta.previousPromises),dF(e,h,f)||ta.supplyDefaults(e),l.style&&v.push(hi.doTraceStyle),(l.colorbars||h.colorbars)&&v.push(hi.doColorBars),h.legend&&v.push(hi.doLegend),h.layoutstyle&&v.push(hi.layoutStyles),h.axrange&&Hx(v,f.rangesAltered),h.ticks&&v.push(hi.doTicksRelayout),h.modebar&&v.push(hi.doModeBar),h.camera&&v.push(hi.doCamera),v.push(Yg)),v.push(ta.rehover,ta.redrag,ta.reselect),xs.add(e,Ox,[e,s.undoit,f.undoit,s.traces],Ox,[e,s.redoit,f.redoit,s.traces]);var m=br.syncOrAsync(v,e);return(!m||!m.then)&&(m=Promise.resolve(e)),m.then(function(){return e.emit("plotly_update",{data:s.eventData,layout:f.eventData}),e})}function E6(e){return function(r){r._fullLayout._guiEditing=!0;var i=e.apply(null,arguments);return r._fullLayout._guiEditing=!1,i}}var Use=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Vse=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function eF(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=e.match(i.pattern);if(a){var s=a[1]||"";return{head:s,tail:e.slice(s.length+1),attr:i.attr}}}}function tF(e,t){var r=Bi(t,e).get();if(r!==void 0)return r;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),r=Bi(t,i.join(".")+".uirevision").get(),r!==void 0)return r;return t.uirevision}function Hse(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function Gse(e,t,r){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[r]||t[r].uid?-1:r}function rF(e,t){var r=br.isPlainObject(e),i=Array.isArray(e);return r||i?(r&&br.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function Zse(e,t,r,i){var a=i._preGUI,s,l,f,h,v,m,_,T,M,C,E=[],L={},I={};for(s in a){if(v=eF(s,Use),v){if(M=v.head,C=v.tail,l=v.attr||M+".uirevision",f=Bi(i,l).get(),h=f&&tF(l,t),h&&h===f){if(m=a[s],m===null&&(m=void 0),_=Bi(t,s),T=_.get(),rF(T,m)){T===void 0&&C==="autorange"&&E.push(M),_.set(Ic(Bi(i,s).get()));continue}else if(C==="autorange"||C.slice(0,6)==="range["){var O=a[M+".range[0]"],q=a[M+".range[1]"],z=a[M+".autorange"];if(z||z===null&&O===null&&q===null){if(!(M in L)){var N=Bi(t,M).get();L[M]=N&&(N.autorange||N.autorange!==!1&&(!N.range||N.range.length!==2))}if(L[M]){_.set(Ic(Bi(i,s).get()));continue}}}}}else br.warn("unrecognized GUI edit: "+s);delete a[s],v&&v.tail.slice(0,6)==="range["&&(I[v.head]=1)}for(var H=0;H<E.length;H++){var V=E[H];if(I[V]){var W=Bi(t,V).get();W&&delete W.autorange}}var J=i._tracePreGUI;for(var ee in J){var ie=J[ee],oe=null,fe;for(s in ie){if(!oe){var le=Hse(ee,r);if(le<0){delete J[ee];break}var Te=r[le];fe=Te._fullInput;var Se=Gse(ee,e,fe.index);if(Se<0){delete J[ee];break}oe=e[Se]}if(v=eF(s,Vse),v){if(v.attr?(f=Bi(i,v.attr).get(),h=f&&tF(v.attr,t)):(f=fe.uirevision,h=oe.uirevision,h===void 0&&(h=t.uirevision)),h&&h===f&&(m=ie[s],m===null&&(m=void 0),_=Bi(oe,s),T=_.get(),rF(T,m))){_.set(Ic(Bi(fe,s).get()));continue}}else br.warn("unrecognized GUI edit: "+s+" in trace uid "+ee);delete ie[s]}}}function Yse(e,t,r,i){var a,s;function l(){return Ha.addFrames(e,a)}e=br.getGraphDiv(e),zn.clearPromiseQueue(e);var f=e._fullData,h=e._fullLayout;if(!br.isPlotDiv(e)||!f||!h)s=Ha.newPlot(e,t,r,i);else{if(br.isPlainObject(t)){var v=t;t=v.data,r=v.layout,i=v.config,a=v.frames}var m=!1;if(i){let fe=br.extendDeepAll({},e._context);e._context=void 0,nF(e,i),m=!zn.collectionsAreEqual(fe,e._context)}if(m){let fe=e._ev.eventNames().map(le=>[le,e._ev.listeners(le)]);s=Ha.newPlot(e,t,r,i).then(()=>{for(let[le,Te]of fe)Te.forEach(Se=>e.on(le,Se));return Ha.react(e,t,r,i)})}else{e.data=t||[],zn.cleanData(e.data),e.layout=r||{},zn.cleanLayout(e.layout),Zse(e.data,e.layout,f,h),ta.supplyDefaults(e,{skipUpdateCalc:!0});var _=e._fullData,T=e._fullLayout,M=T.datarevision===void 0,C=T.transition,E=Xse(e,h,T,M,C),L=E.newDataRevision,I=Wse(e,f,_,M,C,L);if(gF(e)&&(E.layoutReplot=!0),I.calc||E.calc){e.calcdata=void 0;for(var O=Object.getOwnPropertyNames(T),q=0;q<O.length;q++){var z=O[q],N=z.substring(0,5);if(N==="xaxis"||N==="yaxis"){var H=T[z]._emptyCategories;H&&H()}}}else ta.supplyDefaultsUpdateCalc(e.calcdata,_);var V=[];if(a&&(e._transitionData={},ta.createTransitionData(e),V.push(l)),T.transition&&(I.anim||E.anim))E.ticks&&V.push(hi.doTicksRelayout),ta.doCalcdata(e),hi.doAutoRangeAndConstraints(e),V.push(function(){return ta.transitionFromReact(e,I,E,h)});else if(I.fullReplot||E.layoutReplot)e._fullLayout._skipDefaults=!0,V.push(Ha._doPlot);else{for(var W in E.arrays){var J=E.arrays[W];if(J.length){var ee=iu.getComponentMethod(W,"drawOne");if(ee!==br.noop)for(var ie=0;ie<J.length;ie++)ee(e,J[ie]);else{var oe=iu.getComponentMethod(W,"draw");if(oe===br.noop)throw new Error("cannot draw components: "+W);oe(e)}}}V.push(ta.previousPromises),I.style&&V.push(hi.doTraceStyle),(I.colorbars||E.colorbars)&&V.push(hi.doColorBars),E.legend&&V.push(hi.doLegend),E.layoutstyle&&V.push(hi.layoutStyles),E.axrange&&Hx(V),E.ticks&&V.push(hi.doTicksRelayout),E.modebar&&V.push(hi.doModeBar),E.camera&&V.push(hi.doCamera),V.push(Yg)}V.push(ta.rehover,ta.redrag,ta.reselect),s=br.syncOrAsync(V,e),(!s||!s.then)&&(s=Promise.resolve(e))}}return s.then(()=>(m||e.emit("plotly_react",{config:i,data:t,layout:r}),e))}function Wse(e,t,r,i,a,s){var l=t.length===r.length;if(!a&&!l)return{fullReplot:!0,calc:!0};var f=tv.traceFlags();f.arrays={},f.nChanges=0,f.nChangesAnim=0;var h,v;function m(M){var C=Vx.getTraceValObject(v,M);return!v._module.animatable&&C.anim&&(C.anim=!1),C}var _={getValObject:m,flags:f,immutable:i,transition:a,newDataRevision:s,gd:e},T={};for(h=0;h<t.length;h++)if(r[h]){if(v=r[h]._fullInput,T[v.uid])continue;T[v.uid]=1,Ux(t[h]._fullInput,v,[],_)}return(f.calc||f.plot)&&(f.fullReplot=!0),a&&f.nChanges&&f.nChangesAnim&&(f.anim=f.nChanges===f.nChangesAnim&&l?"all":"some"),f}function Xse(e,t,r,i,a){var s=tv.layoutFlags();s.arrays={},s.rangesAltered={},s.nChanges=0,s.nChangesAnim=0;function l(T){return Vx.getLayoutValObject(r,T)}for(var f in r)if(!(!f.startsWith("xaxis")&&!f.startsWith("yaxis"))&&t[f]){var h=r[f].domain,v=t[f].domain,m=t[f]._inputDomain;t[f]._inputDomain&&(h[0]===m[0]&&h[1]===m[1]?r[f].domain=t[f].domain:(h[0]!==v[0]||h[1]!==v[1])&&(r[f]._inputDomain=null))}var _={getValObject:l,flags:s,immutable:i,transition:a,gd:e};return Ux(t,r,[],_),(s.plot||s.calc)&&(s.layoutReplot=!0),a&&s.nChanges&&s.nChangesAnim&&(s.anim=s.nChanges===s.nChangesAnim?"all":"some"),s}function Ux(e,t,r,i){var a,s,l,f=i.getValObject,h=i.flags,v=i.immutable,m=i.inArray,_=i.arrayIndex;function T(){var le=a.editType;if(m&&le.indexOf("arraydraw")!==-1){br.pushUnique(h.arrays[m],_);return}tv.update(h,a),le!=="none"&&h.nChanges++,i.transition&&a.anim&&h.nChangesAnim++,(pF.test(l)||mF.test(l))&&(h.rangesAltered[r[0]]=1),s==="datarevision"&&(h.newDataRevision=1)}function M(le){return le.valType==="data_array"||le.arrayOk}for(s in e){if(h.calc&&!i.transition)return;var C=e[s],E=t[s],L=r.concat(s);if(l=L.join("."),!(s.charAt(0)==="_"||typeof C=="function"||C===E)){if((s==="tick0"||s==="dtick")&&r[0]!=="geo"){var I=t.tickmode;if(I==="auto"||I==="array"||!I)continue}if(!(s==="range"&&t.autorange)&&!((s==="zmin"||s==="zmax")&&t.type==="contourcarpet")&&(a=f(L),!!a&&!(a._compareAsJSON&&JSON.stringify(C)===JSON.stringify(E)))){var O=a.valType,q,z=M(a),N=Array.isArray(C),H=Array.isArray(E);if(N&&H){var V="_input_"+s,W=e[V],J=t[V];if(Array.isArray(W)&&W===J)continue}if(E===void 0)z&&N?h.calc=!0:T();else if(a._isLinkedToArray){var ee=[],ie=!1;m||(h.arrays[s]=ee);var oe=Math.min(C.length,E.length),fe=Math.max(C.length,E.length);if(oe!==fe)if(a.editType==="arraydraw")ie=!0;else{T();continue}for(q=0;q<oe;q++)Ux(C[q],E[q],L.concat(q),br.extendFlat({inArray:s,arrayIndex:q},i));if(ie)for(q=oe;q<fe;q++)ee.push(q)}else!O&&br.isPlainObject(C)?Ux(C,E,L,i):z?N&&H?(v&&(h.calc=!0),(v||i.newDataRevision)&&T()):N!==H?h.calc=!0:T():N&&H?(C.length!==E.length||String(C)!==String(E))&&T():T()}}}for(s in t)if(!(s in e||s.charAt(0)==="_"||typeof t[s]=="function"))if(a=f(r.concat(s)),M(a)&&Array.isArray(t[s])){h.calc=!0;return}else T()}function jse(e,t,r){if(e=br.getGraphDiv(e),!br.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=e._transitionData;i._frameQueue||(i._frameQueue=[]),r=ta.supplyAnimationDefaults(r);var a=r.transition,s=r.frame;i._frameWaitingCnt===void 0&&(i._frameWaitingCnt=0);function l(v){return Array.isArray(a)?v>=a.length?a[0]:a[v]:a}function f(v){return Array.isArray(s)?v>=s.length?s[0]:s[v]:s}function h(v,m){var _=0;return function(){if(v&&++_===m)return v()}}return new Promise(function(v,m){function _(){if(i._frameQueue.length!==0){for(;i._frameQueue.length;){var oe=i._frameQueue.pop();oe.onInterrupt&&oe.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function T(oe){if(oe.length!==0){for(var fe=0;fe<oe.length;fe++){var le;oe[fe].type==="byname"?le=ta.computeFrame(e,oe[fe].name):le=oe[fe].data;var Te=f(fe),Se=l(fe);Se.duration=Math.min(Se.duration,Te.duration);var Me={frame:le,name:oe[fe].name,frameOpts:Te,transitionOpts:Se};fe===oe.length-1&&(Me.onComplete=h(v,2),Me.onInterrupt=m),i._frameQueue.push(Me)}r.mode==="immediate"&&(i._lastFrameAt=-1/0),i._animationRaf||E()}}function M(){e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function C(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var oe=i._currentFrame=i._frameQueue.shift();if(oe){var fe=oe.name?oe.name.toString():null;e._fullLayout._currentFrame=fe,i._lastFrameAt=Date.now(),i._timeToNext=oe.frameOpts.duration,ta.transition(e,oe.frame.data,oe.frame.layout,zn.coerceTraceIndices(e,oe.frame.traces),oe.frameOpts,oe.transitionOpts).then(function(){oe.onComplete&&oe.onComplete()}),e.emit("plotly_animatingframe",{name:fe,frame:oe.frame,animation:{frame:oe.frameOpts,transition:oe.transitionOpts}})}else M()}function E(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var oe=function(){i._animationRaf=window.requestAnimationFrame(oe),Date.now()-i._lastFrameAt>i._timeToNext&&C()};oe()}var L=0;function I(oe){return Array.isArray(a)?L>=a.length?oe.transitionOpts=a[L]:oe.transitionOpts=a[0]:oe.transitionOpts=a,L++,oe}var O,q,z=[],N=t==null,H=Array.isArray(t),V=!N&&!H&&br.isPlainObject(t);if(V)z.push({type:"object",data:I(br.extendFlat({},t))});else if(N||["string","number"].indexOf(typeof t)!==-1)for(O=0;O<i._frames.length;O++)q=i._frames[O],q&&(N||String(q.group)===String(t))&&z.push({type:"byname",name:String(q.name),data:I({name:q.name})});else if(H)for(O=0;O<t.length;O++){var W=t[O];["number","string"].indexOf(typeof W)!==-1?(W=String(W),z.push({type:"byname",name:W,data:I({name:W})})):br.isPlainObject(W)&&z.push({type:"object",data:I(br.extendFlat({},W))})}for(O=0;O<z.length;O++)if(q=z[O],q.type==="byname"&&!i._frameHash[q.data.name]){br.warn('animate failure: frame not found: "'+q.data.name+'"'),m();return}["next","immediate"].indexOf(r.mode)!==-1&&_(),r.direction==="reverse"&&z.reverse();var J=e._fullLayout._currentFrame;if(J&&r.fromcurrent){var ee=-1;for(O=0;O<z.length;O++)if(q=z[O],q.type==="byname"&&q.name===J){ee=O;break}if(ee>0&&ee<z.length-1){var ie=[];for(O=0;O<z.length;O++)q=z[O],(z[O].type!=="byname"||O>ee)&&ie.push(q);z=ie}}z.length>0?T(z):(e.emit("plotly_animated"),v())})}function Jse(e,t,r){if(e=br.getGraphDiv(e),t==null)return Promise.resolve();if(!br.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,a,s,l,f=e._transitionData._frames,h=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var v=f.length+t.length*2,m=[],_={};for(i=t.length-1;i>=0;i--)if(br.isPlainObject(t[i])){var T=t[i].name,M=(h[T]||_[T]||{}).name,C=t[i].name,E=h[M]||_[M];M&&C&&typeof C=="number"&&E&&S6<$R&&(S6++,br.warn('addFrames: overwriting frame "'+(h[M]||_[M]).name+'" with a frame whose name of type "number" also equates to "'+M+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S6===$R&&br.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),_[T]={name:T},m.push({frame:ta.supplyFrameDefaults(t[i]),index:r&&r[i]!==void 0&&r[i]!==null?r[i]:v+i})}m.sort(function(V,W){return V.index>W.index?-1:V.index<W.index?1:0});var L=[],I=[],O=f.length;for(i=m.length-1;i>=0;i--){if(a=m[i].frame,typeof a.name=="number"&&br.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;h[a.name="frame "+e._transitionData._counter++];);if(h[a.name]){for(s=0;s<f.length&&(f[s]||{}).name!==a.name;s++);L.push({type:"replace",index:s,value:a}),I.unshift({type:"replace",index:s,value:f[s]})}else l=Math.max(0,Math.min(m[i].index,O)),L.push({type:"insert",index:l,value:a}),I.unshift({type:"delete",index:l}),O++}var q=ta.modifyFrames,z=ta.modifyFrames,N=[e,I],H=[e,L];return xs&&xs.add(e,q,N,z,H),ta.modifyFrames(e,L)}function Kse(e,t){if(e=br.getGraphDiv(e),!br.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,i,a=e._transitionData._frames,s=[],l=[];if(!t)for(t=[],r=0;r<a.length;r++)t.push(r);for(t=t.slice(),t.sort(),r=t.length-1;r>=0;r--)i=t[r],s.push({type:"delete",index:i}),l.unshift({type:"insert",index:i,value:a[i]});var f=ta.modifyFrames,h=ta.modifyFrames,v=[e,l],m=[e,s];return xs&&xs.add(e,f,v,h,m),ta.modifyFrames(e,s)}function Qse(e){e=br.getGraphDiv(e);var t=e._fullLayout||{},r=e._fullData||[];return ta.cleanPlot([],{},r,t),ta.purge(e),k6.purge(e),t._container&&t._container.remove(),delete e._context,e}function $se(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!br.equalDomRects(r,t._lastBBox)){var i=t._invTransform=br.inverseTransformMatrix(br.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=r}}function ele(e){var t=Rx.select(e),r=e._fullLayout;if(r._calcInverseTransform=$se,r._calcInverseTransform(e),r._container=t.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};Rx.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=br.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(Cse.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var a=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=a.append("g").classed("imagelayer",!0),r._shapeLowerLayer=a.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var s=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=s.append("g").classed("imagelayer",!0),r._shapeUpperLayer=s.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}Ha.animate=jse;Ha.addFrames=Jse;Ha.deleteFrames=Kse;Ha.addTraces=cF;Ha.deleteTraces=hF;Ha.extendTraces=uF;Ha.moveTraces=C6;Ha.prependTraces=fF;Ha.newPlot=Rse;Ha._doPlot=Dse;Ha.purge=Qse;Ha.react=Yse;Ha.redraw=Ise;Ha.relayout=Zg;Ha.restyle=Nx;Ha.setPlotConfig=Pse;Ha.update=Ox;Ha._guiRelayout=E6(Zg);Ha._guiRestyle=E6(Nx);Ha._guiUpdate=E6(Ox);Ha._storeDirectGUIEdit=Bse});var Ud=me(Gf=>{"use strict";var tle=sa();Gf.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("mapbox")||e._has("map"))?500:0};Gf.getRedrawFunc=function(e){return function(){tle.getComponentMethod("colorbar","draw")(e)}};Gf.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};Gf.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var _F=window.URL||window.webkitURL;Gf.createObjectURL=function(e){return _F.createObjectURL(e)};Gf.revokeObjectURL=function(e){return _F.revokeObjectURL(e)};Gf.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=rle(window.atob(e));return new window.Blob([r],{type:"image/"+t})};Gf.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function rle(e){for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),a=0;a<t;a++)i[a]=e.charCodeAt(a);return r}Gf.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/});var Gx=me((g2e,xF)=>{"use strict";var P6=ja(),m2e=Bt(),ale=xi(),ile=Oa(),y2e=Oh(),D6=/"/g,Wg="TOBESTRIPPED",nle=new RegExp('("'+Wg+")|("+Wg+'")',"g");function ole(e){var t=P6.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":t.html(i).text()});return t.remove(),r}function sle(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}xF.exports=function(t,r,i){var a=t._fullLayout,s=a._paper,l=a._toppaper,f=a.width,h=a.height,v;s.insert("rect",":first-child").call(ale.setRect,0,0,f,h).call(ile.fill,a.paper_bgcolor);var m=a._basePlotModules||[];for(v=0;v<m.length;v++){var _=m[v];_.toSVG&&_.toSVG(t)}if(l){var T=l.node().childNodes,M=Array.prototype.slice.call(T);for(v=0;v<M.length;v++){var C=M[v];C.childNodes.length&&s.node().appendChild(C)}}a._draggers&&a._draggers.remove(),s.node().style.background="",s.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var L=P6.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){L.remove();return}else L.style({visibility:null,display:null});var I=this.style.fontFamily;I&&I.indexOf('"')!==-1&&L.style("font-family",I.replace(D6,Wg));var O=this.style.fontWeight;O&&(O==="normal"||O==="400")&&L.style("font-weight",void 0);var q=this.style.fontStyle;q&&q==="normal"&&L.style("font-style",void 0);var z=this.style.fontVariant;z&&z==="normal"&&L.style("font-variant",void 0)}),s.selectAll(".gradient_filled,.pattern_filled").each(function(){var L=P6.select(this),I=this.style.fill;I&&I.indexOf("url(")!==-1&&L.style("fill",I.replace(D6,Wg));var O=this.style.stroke;O&&O.indexOf("url(")!==-1&&L.style("stroke",O.replace(D6,Wg))}),(r==="pdf"||r==="eps")&&s.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),r==="svg"&&i&&(s.attr("width",i*f),s.attr("height",i*h),s.attr("viewBox","0 0 "+f+" "+h));var E=new window.XMLSerializer().serializeToString(s.node());return E=ole(E),E=sle(E),E=E.replace(nle,"'"),E}});var Zx=me((_2e,bF)=>{"use strict";var lle=Bt(),ule=B_().EventEmitter,Xg=Ud();function fle(e){var t=e.emitter||new ule,r=new Promise(function(i,a){var s=window.Image,l=e.svg,f=e.format||"png",h=e.canvas,v=e.scale||1,m=e.width||300,_=e.height||150,T=v*m,M=v*_,C=h.getContext("2d",{willReadFrequently:!0}),E=new s,L,I;f==="svg"||lle.isSafari()?I=Xg.encodeSVG(l):(L=Xg.createBlob(l,"svg"),I=Xg.createObjectURL(L)),h.width=T,h.height=M,E.onload=function(){var O;switch(L=null,Xg.revokeObjectURL(I),f!=="svg"&&C.drawImage(E,0,0,T,M),f){case"jpeg":O=h.toDataURL("image/jpeg");break;case"png":O=h.toDataURL("image/png");break;case"webp":O=h.toDataURL("image/webp");break;case"svg":O=I;break;default:var q="Image format is not jpeg, png, svg or webp.";if(a(new Error(q)),!e.promise)return t.emit("error",q)}i(O),e.promise||t.emit("success",O)},E.onerror=function(O){if(L=null,Xg.revokeObjectURL(I),a(O),!e.promise)return t.emit("error",O)},E.src=I});return e.promise?r:t}bF.exports=fle});var I6=me((x2e,AF)=>{"use strict";var wF=Da(),TF=L6(),cle=to(),Zf=Bt(),jg=Ud(),hle=Gx(),vle=Zx(),dle=t_().version,z6={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function ple(e,t){t=t||{};var r,i,a,s;Zf.isPlainObject(e)?(r=e.data||[],i=e.layout||{},a=e.config||{},s={}):(e=Zf.getGraphDiv(e),r=Zf.extendDeep([],e.data),i=Zf.extendDeep({},e.layout),a=e._context,s=e._fullLayout||{});function l(H){return!(H in t)||Zf.validate(t[H],z6[H])}if(!l("width")&&t.width!==null||!l("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!l("format"))throw new Error("Export format is not "+Zf.join2(z6.format.values,", "," or ")+".");var f={};function h(H,V){return Zf.coerce(t,f,z6,H,V)}var v=h("format"),m=h("width"),_=h("height"),T=h("scale"),M=h("setBackground"),C=h("imageDataOnly"),E=document.createElement("div");E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);var L=Zf.extendFlat({},i);m?L.width=m:t.width===null&&wF(s.width)&&(L.width=s.width),_?L.height=_:t.height===null&&wF(s.height)&&(L.height=s.height);var I=Zf.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,setBackground:M}),O=jg.getRedrawFunc(E);function q(){return new Promise(function(H){setTimeout(H,jg.getDelay(E._fullLayout))})}function z(){return new Promise(function(H,V){var W=hle(E,v,T),J=E._fullLayout.width,ee=E._fullLayout.height;function ie(){TF.purge(E),document.body.removeChild(E)}if(v==="full-json"){var oe=cle.graphJson(E,!1,"keepdata","object",!0,!0);return oe.version=dle,oe=JSON.stringify(oe),ie(),H(C?oe:jg.encodeJSON(oe))}if(ie(),v==="svg")return H(C?W:jg.encodeSVG(W));var fe=document.createElement("canvas");fe.id=Zf.randstr(),vle({format:v,width:J,height:ee,scale:T,canvas:fe,svg:W,promise:!0}).then(H).catch(V)})}function N(H){return C?H.replace(jg.IMAGE_URL_PREFIX,""):H}return new Promise(function(H,V){TF.newPlot(E,r,L,I).then(O).then(q).then(z).then(function(W){H(N(W))}).catch(function(W){V(W)})})}AF.exports=ple});var kF=me((b2e,SF)=>{"use strict";var nu=Bt(),mle=to(),yle=F0(),gle=cd().dfltConfig,Hu=nu.isPlainObject,Hd=Array.isArray,R6=nu.isArrayOrTypedArray;SF.exports=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var i=yle.get(),a=[],s={_context:nu.extendFlat({},gle)},l,f;Hd(t)?(s.data=nu.extendDeep([],t),l=t):(s.data=[],l=[],a.push(so("array","data"))),Hu(r)?(s.layout=nu.extendDeep({},r),f=r):(s.layout={},f={},arguments.length>1&&a.push(so("object","layout"))),mle.supplyDefaults(s);for(var h=s._fullData,v=l.length,m=0;m<v;m++){var _=l[m],T=["data",m];if(!Hu(_)){a.push(so("object",T));continue}var M=h[m],C=M.type,E=i.traces[C].attributes;E.type={valType:"enumerated",values:[C]},M.visible===!1&&_.visible!==!1&&a.push(so("invisible",T)),Yx(_,M,E,a,T)}var L=s._fullLayout,I=_le(i,h);return Yx(f,L,I,a,"layout"),a.length===0?void 0:a};function Yx(e,t,r,i,a,s){s=s||[];for(var l=Object.keys(e),f=0;f<l.length;f++){var h=l[f],v=s.slice();v.push(h);var m=e[h],_=t[h],T=wle(r,h),M=(T||{}).valType,C=M==="info_array",E=M==="colorscale",L=(T||{}).items;if(!ble(r,h))i.push(so("schema",a,v));else if(Hu(m)&&Hu(_)&&M!=="any")Yx(m,_,T,i,a,v);else if(C&&Hd(m)){m.length>_.length&&i.push(so("unused",a,v.concat(_.length)));var I=_.length,O=Array.isArray(L);O&&(I=Math.min(I,L.length));var q,z,N,H,V;if(T.dimensions===2)for(z=0;z<I;z++)if(Hd(m[z])){m[z].length>_[z].length&&i.push(so("unused",a,v.concat(z,_[z].length)));var W=_[z].length;for(q=0;q<(O?Math.min(W,L[z].length):W);q++)N=O?L[z][q]:L,H=m[z][q],V=_[z][q],nu.validate(H,N)?V!==H&&V!==+H&&i.push(so("dynamic",a,v.concat(z,q),H,V)):i.push(so("value",a,v.concat(z,q),H))}else i.push(so("array",a,v.concat(z),m[z]));else for(z=0;z<I;z++)N=O?L[z]:L,H=m[z],V=_[z],nu.validate(H,N)?V!==H&&V!==+H&&i.push(so("dynamic",a,v.concat(z),H,V)):i.push(so("value",a,v.concat(z),H))}else if(T.items&&!C&&Hd(m)){var J=L[Object.keys(L)[0]],ee=[],ie,oe;for(ie=0;ie<_.length;ie++){var fe=_[ie]._index||ie;if(oe=v.slice(),oe.push(fe),Hu(m[fe])&&Hu(_[ie])){ee.push(fe);var le=m[fe],Te=_[ie];Hu(le)&&le.visible!==!1&&Te.visible===!1?i.push(so("invisible",a,oe)):Yx(le,Te,J,i,a,oe)}}for(ie=0;ie<m.length;ie++)oe=v.slice(),oe.push(ie),Hu(m[ie])?ee.indexOf(ie)===-1&&i.push(so("unused",a,oe)):i.push(so("object",a,oe,m[ie]))}else!Hu(m)&&Hu(_)?i.push(so("object",a,v,m)):!R6(m)&&R6(_)&&!C&&!E?i.push(so("array",a,v,m)):h in t?nu.validate(m,T)?T.valType==="enumerated"&&(T.coerceNumber&&m!==+_||!R6(m)&&m!==_||String(m)!==String(_))&&i.push(so("dynamic",a,v,m,_)):i.push(so("value",a,v,m)):i.push(so("unused",a,v,m))}return i}function _le(e,t){for(var r=e.layout.layoutAttributes,i=0;i<t.length;i++){var a=t[i],s=e.traces[a.type],l=s.layoutAttributes;l&&(a.subplot?nu.extendFlat(r[s.attributes.subplot.dflt],l):nu.extendFlat(r,l))}return r}var xle={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Vd(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Vd(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Vd(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var i=Hu(r)?"container":"key";return Vd(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,r,i){return[Vd(e)+"key",t,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Vd(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Vd(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Vd(e){return Hd(e)?"In data trace "+e[1]+", ":"In "+e+", "}function so(e,t,r,i,a){r=r||"";var s,l;Hd(t)?(s=t[0],l=t[1]):(s=t,l=null);var f=Ale(r),h=xle[e](t,f,i,a);return nu.log(h),{code:e,container:s,trace:l,path:r,astr:f,msg:h}}function ble(e,t){var r=MF(t),i=r.keyMinusId,a=r.id;return i in e&&e[i]._isSubplotObj&&a?!0:t in e}function wle(e,t){if(t in e)return e[t];var r=MF(t);return e[r.keyMinusId]}var Tle=nu.counterRegex("([a-z]+)");function MF(e){var t=e.match(Tle);return{keyMinusId:t&&t[1],id:t&&t[2]}}function Ale(e){if(!Hd(e))return String(e);for(var t="",r=0;r<e.length;r++){var i=e[r];typeof i=="number"?t=t.slice(0,-1)+"["+i+"]":t+=i,r<e.length-1&&(t+=".")}return t}});var EF=me((w2e,CF)=>{"use strict";var Mle=Bt(),Wx=Ud();function Sle(e,t,r){var i=document.createElement("a"),a="download"in i,s=new Promise(function(l,f){var h,v;if(a)return h=Wx.createBlob(e,r),v=Wx.createObjectURL(h),i.href=v,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),Wx.revokeObjectURL(v),h=null,l(t);if(Mle.isSafari()){var m=r==="svg"?",":";base64,";return Wx.octetStream(m+encodeURIComponent(e)),l(t)}f(new Error("download error"))});return s}CF.exports=Sle});var F6=me((A2e,DF)=>{"use strict";var LF=Bt(),kle=I6(),Cle=EF(),T2e=Ud();function Ele(e,t){var r;return LF.isPlainObject(e)||(r=LF.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(i,a){r&&r._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),r&&(r._snapshotInProgress=!0);var s=kle(e,t),l=t.filename||e.fn||"newplot";l+="."+t.format.replace("-","."),s.then(function(f){return r&&(r._snapshotInProgress=!1),Cle(f,l,t.format)}).then(function(f){i(f)}).catch(function(f){r&&(r._snapshotInProgress=!1),a(f)})})}DF.exports=Ele});var FF=me(q6=>{"use strict";var Hs=Bt(),Gs=Hs.isPlainObject,PF=F0(),zF=to(),Lle=ys(),IF=Ii(),RF=cd().dfltConfig;q6.makeTemplate=function(e){e=Hs.isPlainObject(e)?e:Hs.getGraphDiv(e),e=Hs.extendDeep({_context:RF},{data:e.data,layout:e.layout}),zF.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(M){var C={};Jg(M,C,Ple.bind(null,M));var E=Hs.coerce(M,{},Lle,"type"),L=i.data[E];L||(L=i.data[E]=[]),L.push(C)}),Jg(r,i.layout,Dle.bind(null,r)),delete i.layout.template;var a=r.template;if(Gs(a)){var s=a.layout,l,f,h,v,m,_;Gs(s)&&Xx(s,i.layout);var T=a.data;if(Gs(T)){for(f in i.data)if(h=T[f],Array.isArray(h)){for(m=i.data[f],_=m.length,v=h.length,l=0;l<_;l++)Xx(h[l%v],m[l]);for(l=_;l<v;l++)m.push(Hs.extendDeep({},h[l]))}for(f in T)f in i.data||(i.data[f]=Hs.extendDeep([],T[f]))}}return i};function Xx(e,t){e=Hs.extendDeep({},e);var r=Object.keys(e).sort(),i,a;function s(m,_,T){if(Gs(_)&&Gs(m))Xx(m,_);else if(Array.isArray(_)&&Array.isArray(m)){var M=IF.arrayTemplater({_template:e},T);for(a=0;a<_.length;a++){var C=_[a],E=M.newItem(C)._template;E&&Xx(E,C)}var L=M.defaultItems();for(a=0;a<L.length;a++)_.push(L[a]._template);for(a=0;a<_.length;a++)delete _[a].templateitemname}}for(i=0;i<r.length;i++){var l=r[i],f=e[l];if(l in t?s(f,t[l],l):t[l]=f,jx(l)===l)for(var h in t){var v=jx(h);h!==v&&v===l&&!(h in e)&&s(f,t[h],l)}}}function jx(e){return e.replace(/[0-9]+$/,"")}function Jg(e,t,r,i,a){var s=a&&r(a);for(var l in e){var f=e[l],h=ou(e,l,i),v=ou(e,l,a),m=r(v);if(!m){var _=jx(l);_!==l&&(v=ou(e,_,a),m=r(v))}if(!(s&&s===m)&&!(!m||m._noTemplating||m.valType==="data_array"||m.arrayOk&&Array.isArray(f)))if(!m.valType&&Gs(f))Jg(f,t,r,h,v);else if(m._isLinkedToArray&&Array.isArray(f))for(var T=!1,M=0,C={},E=0;E<f.length;E++){var L=f[E];if(Gs(L)){var I=L.name;if(I)C[I]||(Jg(L,t,r,ou(f,M,h),ou(f,M,v)),M++,C[I]=1);else if(!T){var O=IF.arrayDefaultKey(l),q=ou(e,O,i),z=ou(f,M,h);Jg(L,t,r,z,ou(f,M,v));var N=Hs.nestedProperty(t,z),H=Hs.nestedProperty(t,q);H.set(N.get()),N.set(null),T=!0}}}else{var V=Hs.nestedProperty(t,h);V.set(f)}}}function Dle(e,t){return PF.getLayoutValObject(e,Hs.nestedProperty({},t).parts)}function Ple(e,t){return PF.getTraceValObject(e,Hs.nestedProperty({},t).parts)}function ou(e,t,r){var i;return r?Array.isArray(e)?i=r+"["+t+"]":i=r+"."+t:i=t,i}q6.validateTemplate=function(e,t){var r=Hs.extendDeep({},{_context:RF,data:e.data,layout:e.layout}),i=r.layout||{};Gs(t)||(t=i.template||{});var a=t.layout,s=t.data,l=[];r.layout=i,r.layout.template=t,zF.supplyDefaults(r);var f=r._fullLayout,h=r._fullData,v={};function m(q,z){for(var N in q)if(N.charAt(0)!=="_"&&Gs(q[N])){var H=jx(N),V=[],W;for(W=0;W<z.length;W++)V.push(ou(q,N,z[W])),H!==N&&V.push(ou(q,H,z[W]));for(W=0;W<V.length;W++)v[V[W]]=1;m(q[N],V)}}function _(q,z){for(var N in q)if(N.indexOf("defaults")===-1&&Gs(q[N])){var H=ou(q,N,z);v[H]?_(q[N],H):l.push({code:"unused",path:H})}}if(Gs(a)?(m(f,["layout"]),_(a,"layout")):l.push({code:"layout"}),!Gs(s))l.push({code:"data"});else{for(var T={},M,C=0;C<h.length;C++){var E=h[C];M=E.type,T[M]=(T[M]||0)+1,E._fullInput._template||l.push({code:"missing",index:E.index,traceType:M})}for(M in s){var L=s[M].length,I=T[M]||0;L>I?l.push({code:"unused",traceType:M,templateCount:L,dataCount:I}):I>L&&l.push({code:"reused",traceType:M,templateCount:L,dataCount:I})}}function O(q,z){for(var N in q)if(N.charAt(0)!=="_"){var H=q[N],V=ou(q,N,z);Gs(H)?(Array.isArray(q)&&H._template===!1&&H.templateitemname&&l.push({code:"missing",path:V,templateitemname:H.templateitemname}),O(H,V)):Array.isArray(H)&&zle(H)&&O(H,V)}}if(O({data:h,layout:f},""),l.length)return l.map(Ile)};function zle(e){for(var t=0;t<e.length;t++)if(Gs(e[t]))return!0}function Ile(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}});var NF=me(Ji=>{"use strict";var Jn=L6();Ji._doPlot=Jn._doPlot;Ji.newPlot=Jn.newPlot;Ji.restyle=Jn.restyle;Ji.relayout=Jn.relayout;Ji.redraw=Jn.redraw;Ji.update=Jn.update;Ji._guiRestyle=Jn._guiRestyle;Ji._guiRelayout=Jn._guiRelayout;Ji._guiUpdate=Jn._guiUpdate;Ji._storeDirectGUIEdit=Jn._storeDirectGUIEdit;Ji.react=Jn.react;Ji.extendTraces=Jn.extendTraces;Ji.prependTraces=Jn.prependTraces;Ji.addTraces=Jn.addTraces;Ji.deleteTraces=Jn.deleteTraces;Ji.moveTraces=Jn.moveTraces;Ji.purge=Jn.purge;Ji.addFrames=Jn.addFrames;Ji.deleteFrames=Jn.deleteFrames;Ji.animate=Jn.animate;Ji.setPlotConfig=Jn.setPlotConfig;var Rle=Ny().getGraphDiv,Fle=nx().eraseActiveShape;Ji.deleteActiveShape=function(e){return Fle(Rle(e))};Ji.toImage=I6();Ji.validate=kF();Ji.downloadImage=F6();var qF=FF();Ji.makeTemplate=qF.makeTemplate;Ji.validateTemplate=qF.validateTemplate});var OF=me((k2e,BF)=>{"use strict";var N6=Bt(),qle=sa();BF.exports=function(t,r,i,a){var s=a("x"),l=a("y"),f,h=qle.getComponentMethod("calendars","handleTraceDefaults");if(h(t,r,["x","y"],i),s){var v=N6.minRowLength(s);l?f=Math.min(v,N6.minRowLength(l)):(f=v,a("y0"),a("dy"))}else{if(!l)return 0;f=N6.minRowLength(l),a("x0"),a("dx")}return r._length=f,f}});var GF=me((C2e,HF)=>{"use strict";var UF=Bt().dateTick0,Nle=Zi(),Ble=Nle.ONEWEEK;function VF(e,t){return e%Ble===0?UF(t,1):UF(t,0)}HF.exports=function(t,r,i,a,s){if(s||(s={x:!0,y:!0}),s.x){var l=a("xperiod");l&&(a("xperiod0",VF(l,r.xcalendar)),a("xperiodalignment"))}if(s.y){var f=a("yperiod");f&&(a("yperiod0",VF(f,r.ycalendar)),a("yperiodalignment"))}}});var WF=me((E2e,YF)=>{"use strict";var ZF=["orientation","groupnorm","stackgaps"];YF.exports=function(t,r,i,a){var s=i._scatterStackOpts,l=a("stackgroup");if(l){var f=r.xaxis+r.yaxis,h=s[f];h||(h=s[f]={});var v=h[l],m=!1;v?v.traces.push(r):(v=h[l]={traceIndices:[],traces:[r]},m=!0);for(var _={orientation:r.x&&!r.y?"h":"v"},T=0;T<ZF.length;T++){var M=ZF[T],C=M+"Found";if(!v[C]){var E=t[M]!==void 0,L=M==="orientation";if((E||m)&&(v[M]=a(M,_[M]),L&&(v.fillDflt=v[M]==="h"?"tonextx":"tonexty"),E&&(v[C]=!0,!m&&(delete v.traces[0][M],L))))for(var I=0;I<v.traces.length-1;I++){var O=v.traces[I];O._input.fill!==O.fill&&(O.fill=v.fillDflt)}}}return v}}});var B6=me((L2e,KF)=>{"use strict";var XF=Oa(),jF=Ef().hasColorscale,JF=bd(),Ole=rs();KF.exports=function(t,r,i,a,s,l={}){var f=Ole.isBubble(t),h=(t.line||{}).color,v;if(h&&(i=h),s("marker.symbol"),s("marker.opacity",f?.7:1),s("marker.size"),l.noAngle||(s("marker.angle"),l.noAngleRef||s("marker.angleref"),l.noStandOff||s("marker.standoff")),s("marker.color",i),jF(t,"marker")&&JF(t,r,a,s,{prefix:"marker.",cLetter:"c"}),l.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),l.noLine||(h&&!Array.isArray(h)&&r.marker.color!==h?v=h:f?v=XF.background:v=XF.defaultLine,s("marker.line.color",v),jF(t,"marker.line")&&JF(t,r,a,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",f?1:0),l.noLineDash||s("marker.line.dash")),f&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),l.gradient){var m=s("marker.gradient.type");m!=="none"&&s("marker.gradient.color")}}});var O6=me((D2e,QF)=>{"use strict";var Ule=Bt().isArrayOrTypedArray,Vle=Ef().hasColorscale,Hle=bd();QF.exports=function(t,r,i,a,s,l){l||(l={});var f=(t.marker||{}).color;if(f&&f._inputArray&&(f=f._inputArray),s("line.color",i),Vle(t,"line"))Hle(t,r,a,s,{prefix:"line.",cLetter:"c"});else{var h=(Ule(f)?!1:f)||i;s("line.color",h)}s("line.width"),l.noDash||s("line.dash"),l.backoff&&s("line.backoff")}});var eq=me((P2e,$F)=>{"use strict";$F.exports=function(t,r,i){var a=i("line.shape");a==="spline"&&i("line.smoothing")}});var U6=me((z2e,tq)=>{"use strict";var Gle=Bt();tq.exports=function(e,t,r,i,a){a=a||{},i("textposition"),Gle.coerceFont(i,"textfont",a.font||r.font,a),a.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}});var V6=me((I2e,aq)=>{"use strict";var Jx=Oa(),rq=Bt().isArrayOrTypedArray;function Zle(e){for(var t=Jx.interpolate(e[0][1],e[1][1],.5),r=2;r<e.length;r++){var i=Jx.interpolate(e[r-1][1],e[r][1],.5);t=Jx.interpolate(t,i,e[r-1][0]/e[r][0])}return t}aq.exports=function(t,r,i,a,s){s||(s={});var l=!1;if(r.marker){var f=r.marker.color,h=(r.marker.line||{}).color;f&&!rq(f)?l=f:h&&!rq(h)&&(l=h)}var v;if(s.moduleHasFillgradient){var m=a("fillgradient.type");if(m!=="none"){a("fillgradient.start"),a("fillgradient.stop");var _=a("fillgradient.colorscale");_&&(v=Zle(_))}}a("fillcolor",Jx.addOpacity((r.line||{}).color||l||v||i,.5))}});var sq=me((R2e,oq)=>{"use strict";var iq=Bt(),Yle=sa(),Wle=zc(),Xle=Tx(),um=rs(),jle=OF(),Jle=GF(),Kle=WF(),Qle=B6(),$le=O6(),nq=eq(),eue=U6(),tue=V6(),rue=Bt().coercePattern;oq.exports=function(t,r,i,a){function s(M,C){return iq.coerce(t,r,Wle,M,C)}var l=jle(t,r,a,s);if(l||(r.visible=!1),!!r.visible){Jle(t,r,a,s),s("xhoverformat"),s("yhoverformat"),s("zorder");var f=Kle(t,r,a,s);a.scattermode==="group"&&r.orientation===void 0&&s("orientation","v");var h=!f&&l<Xle.PTS_LINESONLY?"lines+markers":"lines";s("text"),s("hovertext"),s("mode",h),um.hasMarkers(r)&&Qle(t,r,i,a,s,{gradient:!0}),um.hasLines(r)&&($le(t,r,i,a,s,{backoff:!0}),nq(t,r,s),s("connectgaps"),s("line.simplify")),um.hasText(r)&&(s("texttemplate"),s("texttemplatefallback"),eue(t,r,a,s));var v=[];(um.hasMarkers(r)||um.hasText(r))&&(s("cliponaxis"),s("marker.maxdisplayed"),v.push("points")),s("fill",f?f.fillDflt:"none"),r.fill!=="none"&&(tue(t,r,i,s,{moduleHasFillgradient:!0}),um.hasLines(r)||nq(t,r,s),rue(s,"fillpattern",r.fillcolor,!1));var m=(r.line||{}).color,_=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&v.push("fills"),s("hoveron",v.join("+")||"points"),r.hoveron!=="fills"&&(s("hovertemplate"),s("hovertemplatefallback"));var T=Yle.getComponentMethod("errorbars","supplyDefaults");T(t,r,m||_||i,{axis:"y"}),T(t,r,m||_||i,{axis:"x",inherit:"y"}),iq.coerceSelectionMarkerOpacity(r,s)}}});var uq=me((F2e,lq)=>{"use strict";var aue=bg().getAxisGroup;lq.exports=function(t,r,i,a,s){var l=r.orientation,f=r[{v:"x",h:"y"}[l]+"axis"],h=aue(i,f)+l,v=i._alignmentOpts||{},m=a("alignmentgroup"),_=v[h];_||(_=v[h]={});var T=_[m];T?T.traces.push(r):T=_[m]={traces:[r],alignmentIndex:Object.keys(_).length,offsetGroups:{}};var M=a("offsetgroup")||"",C=T.offsetGroups,E=C[M];r._offsetIndex=0,(s!=="group"||M)&&(E||(E=C[M]={offsetIndex:Object.keys(C).length}),r._offsetIndex=E.offsetIndex)}});var cq=me((q2e,fq)=>{"use strict";var iue=Bt(),nue=uq(),oue=zc();fq.exports=function(t,r){var i,a,s,l=r.scattermode;function f(T){return iue.coerce(a._input,a,oue,T)}if(r.scattermode==="group")for(s=0;s<t.length;s++)a=t[s],a.type==="scatter"&&(i=a._input,nue(i,a,r,f,l));for(s=0;s<t.length;s++){var h=t[s];if(h.type==="scatter"){var v=h.fill;if(!(v==="none"||v==="toself")&&(h.opacity=void 0,v==="tonexty"||v==="tonextx"))for(var m=s-1;m>=0;m--){var _=t[m];if(_.type==="scatter"&&_.xaxis===h.xaxis&&_.yaxis===h.yaxis){_.opacity=void 0;break}}}}}});var vq=me((N2e,hq)=>{"use strict";var sue=Bt(),lue=G_();hq.exports=function(e,t){function r(a,s){return sue.coerce(e,t,lue,a,s)}var i=t.barmode==="group";t.scattermode==="group"&&r("scattergap",i?t.bargap:.2)}});var mq=me((B2e,pq)=>{"use strict";var uue=Da(),dq=Bt(),fue=dq.dateTime2ms,Kx=dq.incrementMonth,cue=Zi(),hue=cue.ONEAVGMONTH;pq.exports=function(t,r,i,a){if(r.type!=="date")return{vals:a};var s=t[i+"periodalignment"];if(!s)return{vals:a};var l=t[i+"period"],f;if(uue(l)){if(l=+l,l<=0)return{vals:a}}else if(typeof l=="string"&&l.charAt(0)==="M"){var h=+l.substring(1);if(h>0&&Math.round(h)===h)f=h;else return{vals:a}}for(var v=r.calendar,m=s==="start",_=s==="end",T=t[i+"period0"],M=fue(T,v)||0,C=[],E=[],L=[],I=a.length,O=0;O<I;O++){var q=a[O],z,N,H;if(f){for(z=Math.round((q-M)/(f*hue)),H=Kx(M,f*z,v);H>q;)H=Kx(H,-f,v);for(;H<=q;)H=Kx(H,f,v);N=Kx(H,-f,v)}else{for(z=Math.round((q-M)/l),H=M+z*l;H>q;)H-=l;for(;H<=q;)H+=l;N=H-l}C[O]=m?N:_?H:(N+H)/2,E[O]=N,L[O]=H}return{vals:C,starts:E,ends:L}}});var Z6=me((O2e,gq)=>{"use strict";var H6=Ef().hasColorscale,G6=Qy(),yq=rs();gq.exports=function(t,r){yq.hasLines(r)&&H6(r,"line")&&G6(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),yq.hasMarkers(r)&&(H6(r,"marker")&&G6(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),H6(r,"marker.line")&&G6(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}});var Kg=me((U2e,_q)=>{"use strict";var hn=Bt();_q.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;hn.mergeArray(r.text,t,"tx"),hn.mergeArray(r.texttemplate,t,"txt"),hn.mergeArray(r.hovertext,t,"htx"),hn.mergeArray(r.customdata,t,"data"),hn.mergeArray(r.textposition,t,"tp"),r.textfont&&(hn.mergeArrayCastPositive(r.textfont.size,t,"ts"),hn.mergeArray(r.textfont.color,t,"tc"),hn.mergeArray(r.textfont.family,t,"tf"),hn.mergeArray(r.textfont.weight,t,"tw"),hn.mergeArray(r.textfont.style,t,"ty"),hn.mergeArray(r.textfont.variant,t,"tv"),hn.mergeArray(r.textfont.textcase,t,"tC"),hn.mergeArray(r.textfont.lineposition,t,"tE"),hn.mergeArray(r.textfont.shadow,t,"tS"));var a=r.marker;if(a){hn.mergeArrayCastPositive(a.size,t,"ms"),hn.mergeArrayCastPositive(a.opacity,t,"mo"),hn.mergeArray(a.symbol,t,"mx"),hn.mergeArray(a.angle,t,"ma"),hn.mergeArray(a.standoff,t,"mf"),hn.mergeArray(a.color,t,"mc");var s=a.line;a.line&&(hn.mergeArray(s.color,t,"mlc"),hn.mergeArrayCastPositive(s.width,t,"mlw"),hn.mergeArray(s.dash,t,"mld"));var l=a.gradient;l&&l.type!=="none"&&(hn.mergeArray(l.type,t,"mgt"),hn.mergeArray(l.color,t,"mgc"))}}});var Qx=me((V2e,bq)=>{"use strict";var xq=Bt();bq.exports=function(t,r){xq.isArrayOrTypedArray(r.selectedpoints)&&xq.tagSelected(t,r)}});var J6=me((H2e,Cq)=>{"use strict";var wq=Da(),W6=Bt(),Qg=Xi(),Tq=mq(),Y6=Zi().BADNUM,X6=rs(),vue=Z6(),due=Kg(),pue=Qx();function mue(e,t){var r=e._fullLayout,i=t._xA=Qg.getFromId(e,t.xaxis||"x","x"),a=t._yA=Qg.getFromId(e,t.yaxis||"y","y"),s=i.makeCalcdata(t,"x"),l=a.makeCalcdata(t,"y"),f=Tq(t,i,"x",s),h=Tq(t,a,"y",l),v=f.vals,m=h.vals,_=t._length,T=new Array(_),M=t.ids,C=j6(t,r,i,a),E=!1,L,I,O,q,z,N;Sq(r,t);var H="x",V="y",W;if(C)W6.pushUnique(C.traceIndices,t.index),L=C.orientation==="v",L?(V="s",W="x"):(H="s",W="y"),z=C.stackgaps==="interpolate";else{var J=Mq(t,_);Aq(e,t,i,a,v,m,J)}var ee=!!t.xperiodalignment,ie=!!t.yperiodalignment;for(I=0;I<_;I++){var oe=T[I]={},fe=wq(v[I]),le=wq(m[I]);fe&&le?(oe[H]=v[I],oe[V]=m[I],ee&&(oe.orig_x=s[I],oe.xEnd=f.ends[I],oe.xStart=f.starts[I]),ie&&(oe.orig_y=l[I],oe.yEnd=h.ends[I],oe.yStart=h.starts[I])):C&&(L?fe:le)?(oe[W]=L?v[I]:m[I],oe.gap=!0,z?(oe.s=Y6,E=!0):oe.s=0):oe[H]=oe[V]=Y6,M&&(oe.id=String(M[I]))}if(due(T,t),vue(e,t),pue(T,t),C){for(I=0;I<T.length;)T[I][W]===Y6?T.splice(I,1):I++;if(W6.sort(T,function(Ae,pe){return Ae[W]-pe[W]||Ae.i-pe.i}),E){for(I=0;I<T.length-1&&T[I].gap;)I++;for(N=T[I].s,N||(N=T[I].s=0),O=0;O<I;O++)T[O].s=N;for(q=T.length-1;q>I&&T[q].gap;)q--;for(N=T[q].s,O=T.length-1;O>q;O--)T[O].s=N;for(;I<q;)if(I++,T[I].gap){for(O=I+1;T[O].gap;)O++;for(var Te=T[I-1][W],Se=T[I-1].s,Me=(T[O].s-Se)/(T[O][W]-Te);I<O;)T[I].s=Se+(T[I][W]-Te)*Me,I++}}}return T}function Aq(e,t,r,i,a,s,l){var f=t._length,h=e._fullLayout,v=r._id,m=i._id,_=h._firstScatter[kq(t)]===t.uid,T=(j6(t,h,r,i)||{}).orientation,M=t.fill;r._minDtick=0,i._minDtick=0;var C={padded:!0},E={padded:!0};l&&(C.ppad=E.ppad=l);var L=f<2||a[0]!==a[f-1]||s[0]!==s[f-1];L&&(M==="tozerox"||M==="tonextx"&&(_||T==="h"))?C.tozero=!0:!(t.error_y||{}).visible&&(M==="tonexty"||M==="tozeroy"||!X6.hasMarkers(t)&&!X6.hasText(t))&&(C.padded=!1,C.ppad=0),L&&(M==="tozeroy"||M==="tonexty"&&(_||T==="v"))?E.tozero=!0:(M==="tonextx"||M==="tozerox")&&(E.padded=!1),v&&(t._extremes[v]=Qg.findExtremes(r,a,C)),m&&(t._extremes[m]=Qg.findExtremes(i,s,E))}function Mq(e,t){if(X6.hasMarkers(e)){var r=e.marker,i=1.6*(e.marker.sizeref||1),a;if(e.marker.sizemode==="area"?a=function(v){return Math.max(Math.sqrt((v||0)/i),3)}:a=function(v){return Math.max((v||0)/i,3)},W6.isArrayOrTypedArray(r.size)){var s={type:"linear"};Qg.setConvert(s);for(var l=s.makeCalcdata(e.marker,"size"),f=new Array(t),h=0;h<t;h++)f[h]=a(l[h]);return f}else return a(r.size)}}function Sq(e,t){var r=kq(t),i=e._firstScatter;i[r]||(i[r]=t.uid)}function kq(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function j6(e,t,r,i){var a=e.stackgroup;if(a){var s=t._scatterStackOpts[r._id+i._id][a],l=s.orientation==="v"?i:r;if(l.type==="linear"||l.type==="log")return s}}Cq.exports={calc:mue,calcMarkerSize:Mq,calcAxisExpansion:Aq,setFirstScatter:Sq,getStackOpts:j6}});var Lq=me((G2e,Eq)=>{"use strict";Eq.exports=$x;var yue=Bt().distinctVals;function $x(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=t.posAxis._id.charAt(0),a=[],s=0;s<e.length;s++){for(var l=e[s],f=0;f<l.length;f++){var h=l[f],v=h.p;v===void 0&&(v=h[i]),v!==void 0&&a.push(v)}l[0]&&l[0].width1&&(r=Math.min(l[0].width1,r))}this.positions=a;var m=yue(a);this.distinctPositions=m.vals,m.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(m.minDiff,r);var _=(t.posAxis||{}).type;(_==="category"||_==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}$x.prototype.put=function(t,r,i){var a=this.getLabel(t,r,i),s=this.bins[a]||0;return this.bins[a]=s+i,s};$x.prototype.get=function(t,r,i){var a=this.getLabel(t,r,i);return this.bins[a]||0};$x.prototype.getLabel=function(t,r,i){var a=i<0&&this.sepNegVal?"v":"^",s=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+s+"g"+r}});var Pq=me((Z2e,Dq)=>{"use strict";Dq.exports={TEXTPAD:3,eventDataKeys:["value","label"]}});var qq=me((Y2e,Fq)=>{"use strict";var su=Da(),{isArrayOrTypedArray:Rc}=Bt(),{BADNUM:fm}=Zi(),gue=sa(),$g=Xi(),{getAxisGroup:_ue}=bg(),eb=Lq(),{TEXTPAD:xue}=Pq(),{LINE_SPACING:bue}=No(),{BR_TAG_ALL:wue}=ro();function Tue(e,t){for(var r=t.xaxis,i=t.yaxis,a=e._fullLayout,s=e._fullData,l=e.calcdata,f=[],h=[],v=0;v<s.length;v++){var m=s[v];if(m.visible===!0&&gue.traceIs(m,"bar")&&m.xaxis===r._id&&m.yaxis===i._id&&(m.orientation==="h"?f.push(l[v]):h.push(l[v]),m._computePh))for(var _=e.calcdata[v],T=0;T<_.length;T++)typeof _[T].ph0=="function"&&(_[T].ph0=_[T].ph0()),typeof _[T].ph1=="function"&&(_[T].ph1=_[T].ph1())}var M={xCat:r.type==="category"||r.type==="multicategory",yCat:i.type==="category"||i.type==="multicategory",mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};Q6(e,r,i,h,M),Q6(e,i,r,f,M)}function Q6(e,t,r,i,a){if(i.length){var s,l,f,h,v;switch(Sue(r,i),a.mode){case"overlay":K6(e,t,r,i,a);break;case"group":for(s=[],l=[],f=0;f<i.length;f++)h=i[f],v=h[0].trace,v.offset===void 0?l.push(h):s.push(h);l.length&&kue(e,t,r,l,a),s.length&&K6(e,t,r,s,a);break;case"stack":case"relative":for(s=[],l=[],f=0;f<i.length;f++)h=i[f],v=h[0].trace,v.base===void 0?l.push(h):s.push(h);Mue(l),l.length&&Cue(e,t,r,l,a),s.length&&K6(e,t,r,s,a);break}Aue(i),Iue(i,t)}}function Aue(e){var t,r,i,a,s,l,f;for(t=0;t<e.length;t++)r=e[t],i=r[0].trace,a=r[0].t,a.cornerradiusvalue===void 0&&(s=i.marker?i.marker.cornerradius:void 0,s!==void 0&&(l=su(s)?+s:+s.slice(0,-1),f=su(s)?"px":"%",a.cornerradiusvalue=l,a.cornerradiusform=f))}function Mue(e){if(!(e.length<2)){var t,r,i,a,s,l,f;for(t=0;t<e.length&&(r=e[t],i=r[0].trace,s=i.marker?i.marker.cornerradius:void 0,s===void 0);t++);if(s!==void 0)for(l=su(s)?+s:+s.slice(0,-1),f=su(s)?"px":"%",t=0;t<e.length;t++)r=e[t],a=r[0].t,a.cornerradiusvalue=l,a.cornerradiusform=f}}function Sue(e,t){var r,i;for(r=0;r<t.length;r++){var a=t[r],s=a[0].trace,l=s.type==="funnel"?s._base:s.base,f,h=s.orientation==="h"?s.xcalendar:s.ycalendar,v=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(Rc(l)){for(i=0;i<Math.min(l.length,a.length);i++)f=v(l[i],0,h),su(f)?(a[i].b=+f,a[i].hasB=1):a[i].b=0;for(;i<a.length;i++)a[i].b=0}else{f=v(l,0,h);var m=su(f);for(f=m?f:0,i=0;i<a.length;i++)a[i].b=f,m&&(a[i].hasB=1)}}}function K6(e,t,r,i,a){for(var s=0;s<i.length;s++){var l=i[s],f=new eb([l],{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});$6(e,t,f,a),a.norm?(Rq(f),eT(r,f,a)):Iq(r,f)}}function kue(e,t,r,i,a){var s=new eb(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});$6(e,t,s,a),Pue(s,t),a.norm?(Rq(s),eT(r,s,a)):Iq(r,s)}function Cue(e,t,r,i,a){var s=new eb(i,{posAxis:t,sepNegVal:a.mode==="relative",overlapNoMerge:!(a.norm||a.mode==="stack"||a.mode==="relative")});$6(e,t,s,a),Due(r,s,a);for(var l=0;l<i.length;l++)for(var f=i[l],h=f[0].t.offsetindex,v=0;v<f.length;v++){var m=f[v];if(m.s!==fm){var _=m.b+m.s===s.get(m.p,h,m.s);_&&(m._outmost=!0)}}a.norm&&eT(r,s,a)}function $6(e,t,r,i){var a=e._fullLayout,s=r.positions,l=r.distinctPositions,f=r.minDiff,h=r.traces,v=h.length,m=s.length!==l.length,_=f*(1-i.gap),T,M,C,E;if(t._id==="angularaxis")T=_,M=T*(1-(i.groupgap||0)),C=-M/2;else{var L=_ue(a,t._id)+h[0][0].trace.orientation;E=a._alignmentOpts[L]||{}}for(var I=0;I<v;I++){var O=h[I],q=O[0].trace;if(t._id!=="angularaxis"){var z=E[q.alignmentgroup]||{},N=Object.keys(z.offsetGroups||{}).length;N?T=_/N:T=m?_/v:_,M=T*(1-(i.groupgap||0)),N?C=((2*q._offsetIndex+1-N)*T-M)/2:C=m?((2*I+1-v)*T-M)/2:-M/2}var H=O[0].t;H.barwidth=M,H.offsetindex=q._offsetIndex||0,H.poffset=C,H.bargroupwidth=_,H.bardelta=f}r.binWidth=h[0][0].t.barwidth/100,Eue(r),Lue(t,r),t._id==="angularaxis"?zq(t,r):zq(t,r,m)}function Eue(e){var t=e.traces,r,i;for(r=0;r<t.length;r++){var a=t[r],s=a[0],l=s.trace,f=s.t,h=l._offset||l.offset,v=f.poffset,m;if(Rc(h)){for(m=Array.prototype.slice.call(h,0,a.length),i=0;i<m.length;i++)su(m[i])||(m[i]=v);for(i=m.length;i<a.length;i++)m.push(v);f.poffset=m}else h!==void 0&&(f.poffset=h);var _=l._width||l.width,T=f.barwidth;if(Rc(_)){var M=Array.prototype.slice.call(_,0,a.length);for(i=0;i<M.length;i++)su(M[i])||(M[i]=T);for(i=M.length;i<a.length;i++)M.push(T);if(f.barwidth=M,h===void 0){for(m=[],i=0;i<a.length;i++)m.push(v+(T-M[i])/2);f.poffset=m}}else _!==void 0&&(f.barwidth=_,h===void 0&&(f.poffset=v+(T-_)/2))}}function Lue(e,t){for(var r=t.traces,i=cm(e),a=0;a<r.length;a++)for(var s=r[a],l=s[0].t,f=l.poffset,h=Rc(f),v=l.barwidth,m=Rc(v),_=0;_<s.length;_++){var T=s[_],M=T.w=m?v[_]:v;T.p===void 0&&(T.p=T[i],T["orig_"+i]=T[i]);var C=(h?f[_]:f)+M/2;T[i]=T.p+C}}function zq(e,t,r){var i=t.traces,a=t.minDiff,s=a/2;$g.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var l=0;l<i.length;l++){var f=i[l],h=f[0],v=h.trace,m=[],_,T,M,C;for(C=0;C<f.length;C++)_=f[C],T=_.p-s,M=_.p+s,m.push(T,M);if(v.width||v.offset){var E=h.t,L=E.poffset,I=E.barwidth,O=Rc(L),q=Rc(I);for(C=0;C<f.length;C++){_=f[C];var z=O?L[C]:L,N=q?I[C]:I;T=_.p+z,M=T+N,m.push(T,M)}}v._extremes[e._id]=$g.findExtremes(e,m,{padded:!1})}}function Iq(e,t){for(var r=t.traces,i=cm(e),a=0;a<r.length;a++){for(var s=r[a],l=s[0].trace,f=l.type==="scatter",h=l.orientation==="v",v=[],m=!1,_=0;_<s.length;_++){var T=s[_],M=f?0:T.b,C=f?h?T.y:T.x:M+T.s;T[i]=C,v.push(C),T.hasB&&v.push(M),(!T.hasB||!T.b)&&(m=!0)}let{ppadminus:E,ppadplus:L}=tT(l,s);l._extremes[e._id]=$g.findExtremes(e,v,{tozero:m,padded:!0,ppadplus:L,ppadminus:E})}}function Due(e,t,r){var i=cm(e),a=t.traces,s,l,f,h,v,m,_;for(h=0;h<a.length;h++)if(s=a[h],l=s[0].trace,l.type==="funnel")for(_=s[0].t.offsetindex,v=0;v<s.length;v++)m=s[v],m.s!==fm&&t.put(m.p,_,-.5*m.s);for(h=0;h<a.length;h++){s=a[h],l=s[0].trace,f=l.type==="funnel",_=l.type==="barpolar"?0:s[0].t.offsetindex;var T=[];for(v=0;v<s.length;v++)if(m=s[v],m.s!==fm){var M;f?M=m.s:M=m.s+m.b;var C=t.put(m.p,_,M),E=C+M;m.b=C,m[i]=E,r.norm||(T.push(E),m.hasB&&T.push(C))}if(!r.norm){let{ppadminus:L,ppadplus:I}=tT(l,s);l._extremes[e._id]=$g.findExtremes(e,T,{tozero:!0,padded:!0,ppadplus:I,ppadminus:L})}}}function Rq(e){for(var t=e.traces,r=0;r<t.length;r++)for(var i=t[r],a=i[0].t.offsetindex,s=0;s<i.length;s++){var l=i[s];l.s!==fm&&e.put(l.p,a,l.b+l.s)}}function Pue(e,t){for(var r=e.traces,i=0;i<r.length;i++){var a=r[i],s=a[0].trace,l=a[0].t.offsetindex;if(s.base===void 0)for(var f=new eb([a],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),h=0;h<a.length;h++){var v=a[h];if(v.p!==fm){var m=f.put(v.p,l,v.b+v.s);m&&(v.b=m)}}}}function eT(e,t,r){var i=t.traces,a=cm(e),s=r.norm==="fraction"?1:100,l=s/1e9,f=e.l2c(e.c2l(0)),h=r.mode==="stack"?s:f;function v(H){return su(e.c2l(H))&&(H<f-l||H>h+l||!su(f))}for(var m=0;m<i.length;m++){for(var _=i[m],T=_[0].t.offsetindex,M=_[0].trace,C=[],E=!1,L=!1,I=0;I<_.length;I++){var O=_[I];if(O.s!==fm){var q=Math.abs(s/t.get(O.p,T,O.s));O.b*=q,O.s*=q;var z=O.b,N=z+O.s;O[a]=N,C.push(N),L=L||v(N),O.hasB&&(C.push(z),L=L||v(z)),(!O.hasB||!O.b)&&(E=!0)}}let{ppadminus:H,ppadplus:V}=tT(M,_);M._extremes[e._id]=$g.findExtremes(e,C,{tozero:E,padded:L,ppadplus:V,ppadminus:H})}}function tT(e,t){if(e.orientation==="v"&&(e.text||e.texttemplate)&&e.textposition==="outside"&&(e.textangle==="auto"||e.textangle===0)){let i=function(s){return!s||typeof s!="string"?0:(s.match(wue)||[]).length+1};var r;e.texttemplate?r=i(e.texttemplate):r=Rc(e.text)?Math.max(...e.text.map(s=>i(s))):i(e.text);let a=e.outsidetextfont.size*bue*r+xue;return{ppadplus:t.some(s=>s.s<0)?a:0,ppadminus:t.some(s=>s.s>=0)?a:0}}return{ppadplus:void 0,ppadminus:void 0}}function zue(e,t,r,i){for(var a=cm(i),s=0;s<e.length;s++)for(var l=e[s],f=0;f<l.length;f++){var h=l[f],v=h[a];h._sMin=t[v],h._sMax=r[v]}}function Iue(e,t){var r=cm(t),i={},a,s,l,f=1/0,h=-1/0;for(a=0;a<e.length;a++)for(l=e[a],s=0;s<l.length;s++){var v=l[s].p;su(v)&&(f=Math.min(f,v),h=Math.max(h,v))}var m=1e4/(h-f),_=i.round=function(W){return String(Math.round(m*(W-f)))},T={},M={},C=e.some(function(W){var J=W[0].trace;return"marker"in J&&J.marker.cornerradius});for(a=0;a<e.length;a++){l=e[a],l[0].t.extents=i;var E=l[0].t.poffset,L=Rc(E);for(s=0;s<l.length;s++){var I=l[s],O=I[r]-I.w/2;if(su(O)){var q=I[r]+I.w/2,z=_(I.p);i[z]?i[z]=[Math.min(O,i[z][0]),Math.max(q,i[z][1])]:i[z]=[O,q]}if(I.p0=I.p+(L?E[s]:E),I.p1=I.p0+I.w,I.s0=I.b,I.s1=I.s0+I.s,C){var N=Math.min(I.s0,I.s1)||0,H=Math.max(I.s0,I.s1)||0,V=I[r];T[V]=V in T?Math.min(T[V],N):N,M[V]=V in M?Math.max(M[V],H):H}}}C&&zue(e,T,M,t)}function cm(e){return e._id.charAt(0)}Fq.exports={crossTraceCalc:Tue,setGroupPositions:Q6}});var Uq=me((W2e,Oq)=>{"use strict";var Nq=J6(),Bq=qq().setGroupPositions;function Rue(e,t){for(var r=t.xaxis,i=t.yaxis,a=e._fullLayout,s=e._fullData,l=e.calcdata,f=[],h=[],v=0;v<s.length;v++){var m=s[v];m.visible===!0&&m.type==="scatter"&&m.xaxis===r._id&&m.yaxis===i._id&&(m.orientation==="h"?f.push(l[v]):m.orientation==="v"&&h.push(l[v]))}var _={mode:a.scattermode,gap:a.scattergap};Bq(e,r,i,h,_),Bq(e,i,r,f,_)}Oq.exports=function(t,r){t._fullLayout.scattermode==="group"&&Rue(t,r);var i=r.xaxis,a=r.yaxis,s=i._id+a._id,l=t._fullLayout._scatterStackOpts[s];if(l){var f=t.calcdata,h,v,m,_,T,M,C,E,L,I,O,q,z,N,H;for(var V in l){I=l[V];var W=I.traceIndices;if(W.length){for(O=I.stackgaps==="interpolate",q=I.groupnorm,I.orientation==="v"?(z="x",N="y"):(z="y",N="x"),H=new Array(W.length),h=0;h<H.length;h++)H[h]=!1;M=f[W[0]];var J=new Array(M.length);for(h=0;h<M.length;h++)J[h]=M[h][z];for(h=1;h<W.length;h++){for(T=f[W[h]],v=m=0;v<T.length;v++){for(C=T[v][z];C>J[m]&&m<J.length;m++)rT(T,v,J[m],h,H,O,z),v++;if(C!==J[m]){for(_=0;_<h;_++)rT(f[W[_]],m,C,_,H,O,z);J.splice(m,0,C)}m++}for(;m<J.length;m++)rT(T,v,J[m],h,H,O,z),v++}var ee=J.length;for(v=0;v<M.length;v++){for(E=M[v][N]=M[v].s,h=1;h<W.length;h++)T=f[W[h]],T[0].trace._rawLength=T[0].trace._length,T[0].trace._length=ee,E+=T[v].s,T[v][N]=E;if(q)for(L=(q==="fraction"?E:E/100)||1,h=0;h<W.length;h++){var ie=f[W[h]][v];ie[N]/=L,ie.sNorm=ie.s/L}}for(h=0;h<W.length;h++){T=f[W[h]];var oe=T[0].trace,fe=Nq.calcMarkerSize(oe,oe._rawLength),le=Array.isArray(fe);if(fe&&H[h]||le){var Te=fe;for(fe=new Array(ee),v=0;v<ee;v++)fe[v]=T[v].gap?0:le?Te[T[v].i]:Te}var Se=new Array(ee),Me=new Array(ee);for(v=0;v<ee;v++)Se[v]=T[v].x,Me[v]=T[v].y;Nq.calcAxisExpansion(t,oe,i,a,Se,Me,fe),T[0].t.orientation=I.orientation}}}}};function rT(e,t,r,i,a,s,l){a[i]=!0;var f={i:null,gap:!0,s:0};if(f[l]=r,e.splice(t,0,f),t&&r===e[t-1][l]){var h=e[t-1];f.s=h.s,f.i=h.i,f.gap=h.gap}else s&&(f.s=Fue(e,t,r,l));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function Fue(e,t,r,i){var a=e[t-1],s=e[t+1];return s?a?a.s+(s.s-a.s)*(r-a[i])/(s[i]-a[i]):s.s:a.s}});var Xq=me((X2e,Wq)=>{"use strict";var que=xi(),Zq=Zi(),e1=Zq.BADNUM,Yq=Zq.LOG_CLIP,Vq=Yq+.5,Hq=Yq-.5,tb=Bt(),Nue=tb.segmentsIntersect,Gq=tb.constrain,aT=Tx();Wq.exports=function(t,r){var i=r.trace||{},a=r.xaxis,s=r.yaxis,l=a.type==="log",f=s.type==="log",h=a._length,v=s._length,m=r.backoff,_=i.marker,T=r.connectGaps,M=r.baseTolerance,C=r.shape,E=C==="linear",L=i.fill&&i.fill!=="none",I=[],O=aT.minTolerance,q=t.length,z=new Array(q),N=0,H,V,W,J,ee,ie,oe,fe,le,Te,Se,Me,Ae,pe,ke,Ee;function Xe(Lt){var Fe=t[Lt];if(!Fe)return!1;var Ve=r.linearized?a.l2p(Fe.x):a.c2p(Fe.x),bt=r.linearized?s.l2p(Fe.y):s.c2p(Fe.y);if(Ve===e1){if(l&&(Ve=a.c2p(Fe.x,!0)),Ve===e1)return!1;f&&bt===e1&&(Ve*=Math.abs(a._m*v*(a._m>0?Vq:Hq)/(s._m*h*(s._m>0?Vq:Hq)))),Ve*=1e3}if(bt===e1){if(f&&(bt=s.c2p(Fe.y,!0)),bt===e1)return!1;bt*=1e3}return[Ve,bt]}function lt(Lt,Fe,Ve,bt){var Tt=Ve-Lt,mr=bt-Fe,Ar=.5-Lt,Mr=.5-Fe,Gr=Tt*Tt+mr*mr,pa=Tt*Ar+mr*Mr;if(pa>0&&pa<Gr){var Ca=Ar*mr-Mr*Tt;if(Ca*Ca<Gr)return!0}}var it,_t;function Ye(Lt,Fe){var Ve=Lt[0]/h,bt=Lt[1]/v,Tt=Math.max(0,-Ve,Ve-1,-bt,bt-1);return Tt&&it!==void 0&&lt(Ve,bt,it,_t)&&(Tt=0),Tt&&Fe&&lt(Ve,bt,Fe[0]/h,Fe[1]/v)&&(Tt=0),(1+aT.toleranceGrowth*Tt)*M}function kt(Lt,Fe){var Ve=Lt[0]-Fe[0],bt=Lt[1]-Fe[1];return Math.sqrt(Ve*Ve+bt*bt)}var st=aT.maxScreensAway,dt=-h*st,It=h*(1+st),yt=-v*st,de=v*(1+st),ze=[[dt,yt,It,yt],[It,yt,It,de],[It,de,dt,de],[dt,de,dt,yt]],_e,Ue,at,Je,Ct,wt;function xt(Lt,Fe){for(var Ve=[],bt=0,Tt=0;Tt<4;Tt++){var mr=ze[Tt],Ar=Nue(Lt[0],Lt[1],Fe[0],Fe[1],mr[0],mr[1],mr[2],mr[3]);Ar&&(!bt||Math.abs(Ar.x-Ve[0][0])>1||Math.abs(Ar.y-Ve[0][1])>1)&&(Ar=[Ar.x,Ar.y],bt&&kt(Ar,Lt)<kt(Ve[0],Lt)?Ve.unshift(Ar):Ve.push(Ar),bt++)}return Ve}function qt(Lt){if(Lt[0]<dt||Lt[0]>It||Lt[1]<yt||Lt[1]>de)return[Gq(Lt[0],dt,It),Gq(Lt[1],yt,de)]}function Ut(Lt,Fe){if(Lt[0]===Fe[0]&&(Lt[0]===dt||Lt[0]===It)||Lt[1]===Fe[1]&&(Lt[1]===yt||Lt[1]===de))return!0}function Dt(Lt,Fe){var Ve=[],bt=qt(Lt),Tt=qt(Fe);return bt&&Tt&&Ut(bt,Tt)||(bt&&Ve.push(bt),Tt&&Ve.push(Tt)),Ve}function Mt(Lt,Fe,Ve){return function(bt,Tt){var mr=qt(bt),Ar=qt(Tt),Mr=[];if(mr&&Ar&&Ut(mr,Ar))return Mr;mr&&Mr.push(mr),Ar&&Mr.push(Ar);var Gr=2*tb.constrain((bt[Lt]+Tt[Lt])/2,Fe,Ve)-((mr||bt)[Lt]+(Ar||Tt)[Lt]);if(Gr){var pa;mr&&Ar?pa=Gr>0==mr[Lt]>Ar[Lt]?mr:Ar:pa=mr||Ar,pa[Lt]+=Gr}return Mr}}var Zt;C==="linear"||C==="spline"?Zt=xt:C==="hv"||C==="vh"?Zt=Dt:C==="hvh"?Zt=Mt(0,dt,It):C==="vhv"&&(Zt=Mt(1,yt,de));function Yt(Lt,Fe){var Ve=Fe[0]-Lt[0],bt=(Fe[1]-Lt[1])/Ve,Tt=(Lt[1]*Fe[0]-Fe[1]*Lt[0])/Ve;return Tt>0?[bt>0?dt:It,de]:[bt>0?It:dt,yt]}function Be(Lt){var Fe=Lt[0],Ve=Lt[1],bt=Fe===z[N-1][0],Tt=Ve===z[N-1][1];if(!(bt&&Tt))if(N>1){var mr=Fe===z[N-2][0],Ar=Ve===z[N-2][1];bt&&(Fe===dt||Fe===It)&&mr?Ar?N--:z[N-1]=Lt:Tt&&(Ve===yt||Ve===de)&&Ar?mr?N--:z[N-1]=Lt:z[N++]=Lt}else z[N++]=Lt}function ut(Lt){z[N-1][0]!==Lt[0]&&z[N-1][1]!==Lt[1]&&Be([at,Je]),Be(Lt),Ct=null,at=Je=0}var sr=tb.isArrayOrTypedArray(_);function Pr(Lt){if(Lt&&m&&(Lt.i=H,Lt.d=t,Lt.trace=i,Lt.marker=sr?_[Lt.i]:_,Lt.backoff=m),it=Lt[0]/h,_t=Lt[1]/v,_e=Lt[0]<dt?dt:Lt[0]>It?It:0,Ue=Lt[1]<yt?yt:Lt[1]>de?de:0,_e||Ue){if(!N)z[N++]=[_e||Lt[0],Ue||Lt[1]];else if(Ct){var Fe=Zt(Ct,Lt);Fe.length>1&&(ut(Fe[0]),z[N++]=Fe[1])}else wt=Zt(z[N-1],Lt)[0],z[N++]=wt;var Ve=z[N-1];_e&&Ue&&(Ve[0]!==_e||Ve[1]!==Ue)?(Ct&&(at!==_e&&Je!==Ue?Be(at&&Je?Yt(Ct,Lt):[at||_e,Je||Ue]):at&&Je&&Be([at,Je])),Be([_e,Ue])):at-_e&&Je-Ue&&Be([_e||at,Ue||Je]),Ct=Lt,at=_e,Je=Ue}else Ct&&ut(Zt(Ct,Lt)[0]),z[N++]=Lt}for(H=0;H<q;H++)if(V=Xe(H),!!V){for(N=0,Ct=null,Pr(V),H++;H<q;H++){if(J=Xe(H),!J){if(T)continue;break}if(!E||!r.simplify){Pr(J);continue}var Et=Xe(H+1);if(Te=kt(J,V),!(!(L&&(N===0||N===q-1))&&Te<Ye(J,Et)*O)){for(fe=[(J[0]-V[0])/Te,(J[1]-V[1])/Te],ee=V,Se=Te,Me=pe=ke=0,oe=!1,W=J,H++;H<t.length;H++){if(ie=Et,Et=Xe(H+1),!ie){if(T)continue;break}if(le=[ie[0]-V[0],ie[1]-V[1]],Ee=le[0]*fe[1]-le[1]*fe[0],pe=Math.min(pe,Ee),ke=Math.max(ke,Ee),ke-pe>Ye(ie,Et))break;W=ie,Ae=le[0]*fe[0]+le[1]*fe[1],Ae>Se?(Se=Ae,J=ie,oe=!1):Ae<Me&&(Me=Ae,ee=ie,oe=!0)}if(oe?(Pr(J),W!==ee&&Pr(ee)):(ee!==V&&Pr(ee),W!==J&&Pr(J)),Pr(W),H>=t.length||!ie)break;Pr(ie),V=ie}}Ct&&Be([at||Ct[0],Je||Ct[1]]),I.push(z.slice(0,N))}var ht=C.slice(C.length-1);if(m&&ht!=="h"&&ht!=="v"){for(var pt=!1,Ot=-1,er=[],Ht=0;Ht<I.length;Ht++)for(var Kt=0;Kt<I[Ht].length-1;Kt++){var pr=I[Ht][Kt],yr=I[Ht][Kt+1],ur=que.applyBackoff(yr,pr);(ur[0]!==yr[0]||ur[1]!==yr[1])&&(pt=!0),er[Ot+1]||(Ot++,er[Ot]=[pr,[ur[0],ur[1]]])}return pt?er:I}return I}});var Kq=me((j2e,Jq)=>{"use strict";var jq={tonextx:1,tonexty:1,tonext:1};Jq.exports=function(t,r,i){var a,s,l,f,h,v={},m=!1,_=-1,T=0,M=-1;for(s=0;s<i.length;s++)a=i[s][0].trace,l=a.stackgroup||"",l?l in v?h=v[l]:(h=v[l]=T,T++):a.fill in jq&&M>=0?h=M:(h=M=T,T++),h<_&&(m=!0),a._groupIndex=_=h;var C=i.slice();m&&C.sort(function(L,I){var O=L[0].trace,q=I[0].trace;return O._groupIndex-q._groupIndex||O.index-q.index});var E={};for(s=0;s<C.length;s++)a=C[s][0].trace,l=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in jq&&(f=E[l],a._prevtrace=f||null,f&&(f._nexttrace=a)),a._ownfill=a.fill&&(a.fill.slice(0,6)==="tozero"||a.fill==="toself"||a.fill.slice(0,2)==="to"&&!a._prevtrace),E[l]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return C}});var tN=me((J2e,eN)=>{"use strict";var Gu=ja(),Bue=sa(),t1=Bt(),hm=t1.ensureSingle,$q=t1.identity,gn=xi(),vm=rs(),Oue=Xq(),Uue=Kq(),rb=yx().tester;eN.exports=function(t,r,i,a,s,l){var f,h,v=!s,m=!!s&&s.duration>0,_=Uue(t,r,i);if(f=a.selectAll("g.trace").data(_,function(M){return M[0].trace.uid}),f.enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),f.order(),Vue(t,f,r),m){l&&(h=l());var T=Gu.transition().duration(s.duration).ease(s.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()});T.each(function(){a.selectAll("g.trace").each(function(M,C){Qq(t,C,r,M,_,this,s)})})}else f.each(function(M,C){Qq(t,C,r,M,_,this,s)});v&&f.exit().remove(),a.selectAll("path:not([d])").remove()};function Vue(e,t,r){t.each(function(i){var a=hm(Gu.select(this),"g","fills");gn.setClipUrl(a,r.layerClipId,e);var s=i[0].trace;s._ownFill=null,s._nextFill=null;var l=[];s._ownfill&&l.push("_ownFill"),s._nexttrace&&l.push("_nextFill");var f=a.selectAll("g").data(l,$q);f.enter().append("g"),f.exit().remove(),f.order().each(function(h){s[h]=hm(Gu.select(this),"path","js-fill")})})}function Qq(e,t,r,i,a,s,l){var f=e._context.staticPlot,h;Hue(e,t,r,i,a);var v=!!l&&l.duration>0;function m(Mt){return v?Mt.transition():Mt}var _=r.xaxis,T=r.yaxis,M=i[0].trace,C=M.line,E=Gu.select(s),L=hm(E,"g","errorbars"),I=hm(E,"g","lines"),O=hm(E,"g","points"),q=hm(E,"g","text");if(Bue.getComponentMethod("errorbars","plot")(e,L,r,l),M.visible!==!0)return;m(E).style("opacity",M.opacity);var z,N,H=M.fill.charAt(M.fill.length-1);H!=="x"&&H!=="y"&&(H="");var V,W;H==="y"?(V=1,W=T.c2p(0,!0)):H==="x"&&(V=0,W=_.c2p(0,!0)),i[0][r.isRangePlot?"nodeRangePlot3":"node3"]=E;var J="",ee=[],ie=M._prevtrace,oe=null,fe=null;ie&&(J=ie._prevRevpath||"",N=ie._nextFill,ee=ie._ownPolygons,oe=ie._fillsegments,fe=ie._fillElement);var le,Te,Se="",Me="",Ae,pe,ke,Ee,Xe,lt,it=[];M._polygons=[];var _t=[],Ye=[],kt=t1.noop;if(z=M._ownFill,vm.hasLines(M)||M.fill!=="none"){N&&N.datum(i),["hv","vh","hvh","vhv"].indexOf(C.shape)!==-1?(Ae=gn.steps(C.shape),pe=gn.steps(C.shape.split("").reverse().join(""))):C.shape==="spline"?Ae=pe=function(Mt){var Zt=Mt[Mt.length-1];return Mt.length>1&&Mt[0][0]===Zt[0]&&Mt[0][1]===Zt[1]?gn.smoothclosed(Mt.slice(1),C.smoothing):gn.smoothopen(Mt,C.smoothing)}:Ae=pe=function(Mt){return"M"+Mt.join("L")},ke=function(Mt){return pe(Mt.reverse())},Ye=Oue(i,{xaxis:_,yaxis:T,trace:M,connectGaps:M.connectgaps,baseTolerance:Math.max(C.width||1,3)/4,shape:C.shape,backoff:C.backoff,simplify:C.simplify,fill:M.fill}),_t=new Array(Ye.length);var st=0;for(h=0;h<Ye.length;h++){var dt,It=Ye[h];!dt||!H?(dt=It.slice(),_t[st]=dt,st++):dt.push.apply(dt,It)}M._fillElement=null,M._fillExclusionElement=fe,M._fillsegments=_t.slice(0,st),_t=M._fillsegments,Ye.length&&(Ee=Ye[0][0].slice(),Xe=Ye[Ye.length-1],lt=Xe[Xe.length-1].slice()),kt=function(Mt){return function(Zt){if(le=Ae(Zt),Te=ke(Zt),Se?H?(Se+="L"+le.slice(1),Me=Te+("L"+Me.slice(1))):(Se+="Z"+le,Me=Te+"Z"+Me):(Se=le,Me=Te),vm.hasLines(M)){var Yt=Gu.select(this);if(Yt.datum(i),Mt)m(Yt.style("opacity",0).attr("d",le).call(gn.lineGroupStyle)).style("opacity",1);else{var Be=m(Yt);Be.attr("d",le),gn.singleLineStyle(i,Be)}}}}}var yt=I.selectAll(".js-line").data(Ye);m(yt.exit()).style("opacity",0).remove(),yt.each(kt(!1)),yt.enter().append("path").classed("js-line",!0).style("vector-effect",f?"none":"non-scaling-stroke").call(gn.lineGroupStyle).each(kt(!0)),gn.setClipUrl(yt,r.layerClipId,e);function de(Mt){m(Mt).attr("d","M0,0Z")}var ze=function(){var Mt=new Array(_t.length);for(h=0;h<_t.length;h++)Mt[h]=rb(_t[h]);return Mt},_e=function(Mt){var Zt,Yt;if(!Mt||Mt.length===0)for(Zt=new Array(_t.length),Yt=0;Yt<_t.length;Yt++){var Be=_t[Yt][0].slice(),ut=_t[Yt][_t[Yt].length-1].slice();Be[V]=ut[V]=W;var sr=[ut,Be],Pr=sr.concat(_t[Yt]);Zt[Yt]=rb(Pr)}else{for(Zt=new Array(Mt.length-1+_t.length),Yt=0;Yt<Mt.length-1;Yt++)Zt[Yt]=rb(Mt[Yt]);var Et=Mt[Mt.length-1].slice();for(Et.reverse(),Yt=0;Yt<_t.length;Yt++)Zt[Mt.length-1+Yt]=rb(_t[Yt].concat(Et))}return Zt};Ye.length?(z?(z.datum(i),Ee&&lt&&(H?(Ee[V]=lt[V]=W,m(z).attr("d","M"+lt+"L"+Ee+"L"+Se.slice(1)).call(gn.singleFillStyle,e),it=_e(null)):(m(z).attr("d",Se+"Z").call(gn.singleFillStyle,e),it=ze())),M._polygons=it,M._fillElement=z):N&&(M.fill.slice(0,6)==="tonext"&&Se&&J?(M.fill==="tonext"?(m(N).attr("d",Se+"Z"+J+"Z").call(gn.singleFillStyle,e),it=ze(),M._polygons=it.concat(ee)):(m(N).attr("d",Se+"L"+J.slice(1)+"Z").call(gn.singleFillStyle,e),it=_e(oe),M._polygons=it),M._fillElement=N):de(N)),M._prevRevpath=Me):(z?de(z):N&&de(N),M._prevRevpath=null),M._ownPolygons=it;function Ue(Mt){return Mt.filter(function(Zt){return!Zt.gap&&Zt.vis})}function at(Mt){return Mt.filter(function(Zt){return Zt.vis})}function Je(Mt){return Mt.filter(function(Zt){return!Zt.gap})}function Ct(Mt){return Mt.id}function wt(Mt){if(Mt.ids)return Ct}function xt(){return!1}function qt(Mt,Zt,Yt){var Be,ut,sr,Pr=Yt[0].trace,Et=vm.hasMarkers(Pr),ht=vm.hasText(Pr),pt=wt(Pr),Ot=xt,er=xt;if(Et||ht){var Ht=$q,Kt=Pr.stackgroup,pr=Kt&&e._fullLayout._scatterStackOpts[_._id+T._id][Kt].stackgaps==="infer zero";Pr.marker.maxdisplayed||Pr._needsCull?Ht=pr?at:Ue:Kt&&!pr&&(Ht=Je),Et&&(Ot=Ht),ht&&(er=Ht)}ut=Mt.selectAll("path.point"),Be=ut.data(Ot,pt);var yr=Be.enter().append("path").classed("point",!0);v&&yr.call(gn.pointStyle,Pr,e).call(gn.translatePoints,_,T).style("opacity",0).transition().style("opacity",1),Be.order();var ur;Et&&(ur=gn.makePointStyleFns(Pr)),Be.each(function(Lt){var Fe=Gu.select(this),Ve=m(Fe);sr=gn.translatePoint(Lt,Ve,_,T),sr?(gn.singlePointStyle(Lt,Ve,Pr,ur,e),r.layerClipId&&gn.hideOutsideRangePoint(Lt,Ve,_,T,Pr.xcalendar,Pr.ycalendar),Pr.customdata&&Fe.classed("plotly-customdata",Lt.data!==null&&Lt.data!==void 0)):Ve.remove()}),v?Be.exit().transition().style("opacity",0).remove():Be.exit().remove(),ut=Zt.selectAll("g"),Be=ut.data(er,pt),Be.enter().append("g").classed("textpoint",!0).append("text"),Be.order(),Be.each(function(Lt){var Fe=Gu.select(this),Ve=m(Fe.select("text"));sr=gn.translatePoint(Lt,Ve,_,T),sr?r.layerClipId&&gn.hideOutsideRangePoint(Lt,Fe,_,T,Pr.xcalendar,Pr.ycalendar):Fe.remove()}),Be.selectAll("text").call(gn.textPointStyle,Pr,e).each(function(Lt){var Fe=_.c2p(Lt.x),Ve=T.c2p(Lt.y);Gu.select(this).selectAll("tspan.line").each(function(){m(Gu.select(this)).attr({x:Fe,y:Ve})})}),Be.exit().remove()}O.datum(i),q.datum(i),qt(O,q,i);var Ut=M.cliponaxis===!1,Dt=Ut?null:r.layerClipId;gn.setClipUrl(O,Dt,e),gn.setClipUrl(q,Dt,e)}function Hue(e,t,r,i,a){var s=r.xaxis,l=r.yaxis,f=Gu.extent(t1.simpleMap(s.range,s.r2c)),h=Gu.extent(t1.simpleMap(l.range,l.r2c)),v=i[0].trace;if(vm.hasMarkers(v)){var m=v.marker.maxdisplayed;if(m!==0){var _=i.filter(function(E){return E.x>=f[0]&&E.x<=f[1]&&E.y>=h[0]&&E.y<=h[1]}),T=Math.ceil(_.length/m),M=0;a.forEach(function(E,L){var I=E[0].trace;vm.hasMarkers(I)&&I.marker.maxdisplayed>0&&L<t&&M++});var C=Math.round(M*T/3+Math.floor(M/3)*T/7.1);i.forEach(function(E){delete E.vis}),_.forEach(function(E,L){Math.round((L+C)%T)===0&&(E.vis=!0)})}}}});var iT=me((K2e,rN)=>{"use strict";rN.exports={container:"marker",min:"cmin",max:"cmax"}});var iN=me((Q2e,aN)=>{"use strict";var ab=Xi();aN.exports=function(t,r,i){var a={},s={_fullLayout:i},l=ab.getFromTrace(s,r,"x"),f=ab.getFromTrace(s,r,"y"),h=t.orig_x;h===void 0&&(h=t.x);var v=t.orig_y;return v===void 0&&(v=t.y),a.xLabel=ab.tickText(l,l.c2l(h),!0).text,a.yLabel=ab.tickText(f,f.c2l(v),!0).text,a}});var lT=me(($2e,nN)=>{"use strict";var nT=ja(),dm=xi(),Gue=sa();function Zue(e){var t=nT.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var i=nT.select(this),a=r.trace||r[0].trace;oT(i,a,e)}),t.selectAll("g.text").each(function(r){var i=nT.select(this),a=r.trace||r[0].trace;sT(i,a,e)}),t.selectAll("g.trace path.js-line").call(dm.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(dm.fillGroupStyle,e,!1),Gue.getComponentMethod("errorbars","style")(t)}function oT(e,t,r){dm.pointStyle(e.selectAll("path.point"),t,r)}function sT(e,t,r){dm.textPointStyle(e.selectAll("text"),t,r)}function Yue(e,t,r){var i=t[0].trace;i.selectedpoints?(dm.selectedPointStyle(r.selectAll("path.point"),i),dm.selectedTextStyle(r.selectAll("text"),i)):(oT(r,i,e),sT(r,i,e))}nN.exports={style:Zue,stylePoints:oT,styleText:sT,styleOnSelect:Yue}});var uT=me((exe,oN)=>{"use strict";var pm=Oa(),Wue=rs();oN.exports=function(t,r){var i,a;if(t.mode==="lines")return i=t.line.color,i&&pm.opacity(i)?i:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var s=r.mcc||(t.marker||{}).color,l=r.mlcc||((t.marker||{}).line||{}).color;return a=s&&pm.opacity(s)?s:l&&pm.opacity(l)&&(r.mlw||((t.marker||{}).line||{}).width)?l:"",a?pm.opacity(a)<.3?pm.addOpacity(a,.3):a:(i=(t.line||{}).color,i&&pm.opacity(i)&&Wue.hasLines(t)&&t.line.width?i:t.fillcolor)}});var uN=me((txe,lN)=>{"use strict";var ib=Bt(),sN=Nf(),Xue=sa(),jue=uT(),fT=Oa(),Jue=ib.fillText;lN.exports=function(t,r,i,a){var s=t.cd,l=s[0].trace,f=t.xa,h=t.ya,v=f.c2p(r),m=h.c2p(i),_=[v,m],T=l.hoveron||"",M=l.mode.indexOf("markers")!==-1?3:.5,C=!!l.xperiodalignment,E=!!l.yperiodalignment;if(T.indexOf("points")!==-1){var L=function(Me){if(C){var Ae=f.c2p(Me.xStart),pe=f.c2p(Me.xEnd);return v>=Math.min(Ae,pe)&&v<=Math.max(Ae,pe)?0:1/0}var ke=Math.max(3,Me.mrc||0),Ee=1-1/ke,Xe=Math.abs(f.c2p(Me.x)-v);return Xe<ke?Ee*Xe/ke:Xe-ke+Ee},I=function(Me){if(E){var Ae=h.c2p(Me.yStart),pe=h.c2p(Me.yEnd);return m>=Math.min(Ae,pe)&&m<=Math.max(Ae,pe)?0:1/0}var ke=Math.max(3,Me.mrc||0),Ee=1-1/ke,Xe=Math.abs(h.c2p(Me.y)-m);return Xe<ke?Ee*Xe/ke:Xe-ke+Ee},O=function(Me){var Ae=Math.max(M,Me.mrc||0),pe=f.c2p(Me.x)-v,ke=h.c2p(Me.y)-m;return Math.max(Math.sqrt(pe*pe+ke*ke)-Ae,1-M/Ae)},q=sN.getDistanceFunction(a,L,I,O);if(sN.getClosest(s,q,t),t.index!==!1){var z=s[t.index],N=f.c2p(z.x,!0),H=h.c2p(z.y,!0),V=z.mrc||1;t.index=z.i;var W=s[0].t.orientation,J=W&&(z.sNorm||z.s),ee=W==="h"?J:z.orig_x!==void 0?z.orig_x:z.x,ie=W==="v"?J:z.orig_y!==void 0?z.orig_y:z.y;return ib.extendFlat(t,{color:jue(l,z),x0:N-V,x1:N+V,xLabelVal:ee,y0:H-V,y1:H+V,yLabelVal:ie,spikeDistance:O(z),hovertemplate:l.hovertemplate}),Jue(z,l,t),Xue.getComponentMethod("errorbars","hoverInfo")(z,l,t),[t]}}function oe(Me){if(!Me)return!1;var Ae=Me.node();try{var pe=new DOMPoint(_[0],_[1]);return Ae.isPointInFill(pe)}catch(Ee){var ke=Ae.ownerSVGElement.createSVGPoint();return ke.x=_[0],ke.y=_[1],Ae.isPointInFill(ke)}}function fe(Me){var Ae,pe=[],ke=1/0,Ee=-1/0,Xe=1/0,lt=-1/0,it;for(Ae=0;Ae<Me.length;Ae++){var _t=Me[Ae];_t.contains(_)&&(pe.push(_t),Xe=Math.min(Xe,_t.ymin),lt=Math.max(lt,_t.ymax))}if(pe.length===0)return null;Xe=Math.max(Xe,0),lt=Math.min(lt,h._length),it=(Xe+lt)/2;var Ye,kt,st,dt,It,yt,de;for(Ae=0;Ae<pe.length;Ae++)for(kt=pe[Ae].pts,Ye=1;Ye<kt.length;Ye++)yt=kt[Ye-1][1],de=kt[Ye][1],yt>it!=de>=it&&(dt=kt[Ye-1][0],It=kt[Ye][0],de-yt&&(st=dt+(It-dt)*(it-yt)/(de-yt),ke=Math.min(ke,st),Ee=Math.max(Ee,st)));return ke=Math.max(ke,0),Ee=Math.min(Ee,f._length),{x0:ke,x1:Ee,y0:it,y1:it}}if(T.indexOf("fills")!==-1&&l._fillElement){var le=oe(l._fillElement)&&!oe(l._fillExclusionElement);if(le){var Te=fe(l._polygons);Te===null&&(Te={x0:_[0],x1:_[0],y0:_[1],y1:_[1]});var Se=fT.defaultLine;return fT.opacity(l.fillcolor)?Se=l.fillcolor:fT.opacity((l.line||{}).color)&&(Se=l.line.color),ib.extendFlat(t,{distance:t.maxHoverDistance,x0:Te.x0,x1:Te.x1,y0:Te.y0,y1:Te.y1,color:Se,hovertemplate:!1}),delete t.index,l.text&&!ib.isArrayOrTypedArray(l.text)?t.text=String(l.text):t.text=l.name,[t]}}}});var hN=me((rxe,cN)=>{"use strict";var fN=rs();cN.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],f=i[0].trace,h,v,m,_,T=!fN.hasMarkers(f)&&!fN.hasText(f);if(T)return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)v=i[h],m=a.c2p(v.x),_=s.c2p(v.y),v.i!==null&&r.contains([m,_],!1,h,t)?(l.push({pointNumber:v.i,x:a.c2d(v.x),y:s.c2d(v.y)}),v.selected=1):v.selected=0;return l}});var dN=me((axe,vN)=>{"use strict";vN.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}});var gN=me((ixe,yN)=>{"use strict";var r1=sa().traceIs,cT=L5();yN.exports=function(t,r,i,a){i("autotypenumbers",a.autotypenumbersDflt);var s=i("type",(a.splomStash||{}).type);s==="-"&&(Kue(r,a.data),r.type==="-"?r.type="linear":t.type=r.type)};function Kue(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),a;r.indexOf("scene")!==-1&&(r=i);var s=Que(t,r,i);if(s){if(s.type==="histogram"&&i==={v:"y",h:"x"}[s.orientation||"v"]){e.type="linear";return}var l=i+"calendar",f=s[l],h={noMultiCategory:!r1(s,"cartesian")||r1(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&i==={h:"x",v:"y"}[s.orientation||"v"]&&(h.noMultiCategory=!0),h.autotypenumbers=e.autotypenumbers,mN(s,i)){var v=pN(s),m=[];for(a=0;a<t.length;a++){var _=t[a];!r1(_,"box-violin")||(_[i+"axis"]||i)!==r||(_[v]!==void 0?m.push(_[v][0]):_.name!==void 0?m.push(_.name):m.push("text"),_[l]!==f&&(f=void 0))}e.type=cT(m,f,h)}else if(s.type==="splom"){var T=s.dimensions,M=T[s._axesDim[r]];M.visible&&(e.type=cT(M.values,f,h))}else e.type=cT(s[i]||[s[i+"0"]],f,h)}}}function Que(e,t,r){for(var i=0;i<e.length;i++){var a=e[i];if(a.type==="splom"&&a._length>0&&(a["_"+r+"axes"]||{})[t])return a;if((a[r+"axis"]||r)===t){if(mN(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}function pN(e){return{v:"x",h:"y"}[e.orientation||"v"]}function mN(e,t){var r=pN(e),i=r1(e,"box-violin"),a=r1(e._fullInput||{},"candlestick");return i&&!a&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}});var xN=me((nxe,_N)=>{"use strict";var $ue=al().isTypedArraySpec;function efe(e,t){var r=t.dataAttr||e._id.charAt(0),i={},a,s,l;if(t.axData)a=t.axData;else for(a=[],s=0;s<t.data.length;s++){var f=t.data[s];f[r+"axis"]===e._id&&a.push(f)}for(s=0;s<a.length;s++){var h=a[s][r];for(l=0;l<h.length;l++){var v=h[l];v!=null&&(i[v]=1)}}return Object.keys(i)}_N.exports=function(t,r,i,a){if(r.type==="category"){var s=t.categoryarray,l=Array.isArray(s)&&s.length>0||$ue(s),f;l&&(f="array");var h=i("categoryorder",f),v;h==="array"&&(v=i("categoryarray")),!l&&h==="array"&&(h=r.categoryorder="trace"),h==="trace"?r._initialCategories=[]:h==="array"?r._initialCategories=v.slice():(v=efe(r,a).sort(),h==="category ascending"?r._initialCategories=v:h==="category descending"&&(r._initialCategories=v.reverse()))}}});var TN=me((oxe,wN)=>{"use strict";var bN=Mf().mix,tfe=Sf(),rfe=Bt();wN.exports=function(t,r,i,a){a=a||{};var s=a.dfltColor;function l(W,J){return rfe.coerce2(t,r,a.attributes,W,J)}var f=l("linecolor",s),h=l("linewidth"),v=i("showline",a.showLine||!!f||!!h);v||(delete r.linecolor,delete r.linewidth);var m=bN(s,a.bgColor,a.blend||tfe.lightFraction).toRgbString(),_=l("gridcolor",m),T=l("gridwidth"),M=l("griddash"),C=i("showgrid",a.showGrid||!!_||!!T||!!M);if(C||(delete r.gridcolor,delete r.gridwidth,delete r.griddash),a.hasMinor){var E=bN(r.gridcolor,a.bgColor,67).toRgbString(),L=l("minor.gridcolor",E),I=l("minor.gridwidth",r.gridwidth||1),O=l("minor.griddash",r.griddash||"solid"),q=i("minor.showgrid",!!L||!!I||!!O);q||(delete r.minor.gridcolor,delete r.minor.gridwidth,delete r.minor.griddash)}if(!a.noZeroLine){var z=l("zerolinelayer"),N=l("zerolinecolor",s),H=l("zerolinewidth"),V=i("zeroline",a.showGrid||!!N||!!H);V||(delete r.zerolinelayer,delete r.zerolinecolor,delete r.zerolinewidth)}}});var vT=me((sxe,EN)=>{"use strict";var AN=Da(),afe=sa(),a1=Bt(),ife=Ii(),nfe=Wl(),hT=Nu(),MN=$w(),SN=t5(),ofe=i5(),sfe=n5(),lfe=xN(),ufe=TN(),ffe=K5(),kN=m2(),nb=eo().WEEKDAY_PATTERN,cfe=eo().HOUR_PATTERN;EN.exports=function(t,r,i,a,s){var l=a.letter,f=a.font||{},h=a.splomStash||{},v=i("visible",!a.visibleDflt),m=r._template||{},_=r.type||m.type||"-",T;if(_==="date"){var M=afe.getComponentMethod("calendars","handleDefaults");M(t,r,"calendar",a.calendar),a.noTicklabelmode||(T=i("ticklabelmode"))}!a.noTicklabelindex&&(_==="date"||_==="linear")&&i("ticklabelindex");var C="";(!a.noTicklabelposition||_==="multicategory")&&(C=a1.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:T==="period"?["outside","inside"]:l==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),a.noTicklabeloverflow||i("ticklabeloverflow",C.indexOf("inside")!==-1?"hide past domain":_==="category"||_==="multicategory"?"allow":"hide past div"),kN(r,s),ffe(t,r,i,a),lfe(t,r,i,a),a.noHover||(_!=="category"&&i("hoverformat"),a.noUnifiedhovertitle||i("unifiedhovertitle.text"));var E=i("color"),L=E!==hT.color.dflt?E:f.color,I=h.label||s._dfltTitle[l];if(sfe(t,r,i,_,a),!v)return r;i("title.text",I),a1.coerceFont(i,"title.font",f,{overrideDflt:{size:a1.bigFont(f.size),color:L}}),MN(t,r,i,_);var O=a.hasMinor;if(O&&(ife.newContainer(r,"minor"),MN(t,r,i,_,{isMinor:!0})),ofe(t,r,i,_,a),SN(t,r,i,a),O){var q=a.isMinor;a.isMinor=!0,SN(t,r,i,a),a.isMinor=q}ufe(t,r,i,{dfltColor:E,bgColor:a.bgColor,showGrid:a.showGrid,hasMinor:O,attributes:hT}),O&&!r.minor.ticks&&!r.minor.showgrid&&delete r.minor,(r.showline||r.ticks)&&i("mirror");var z=_==="multicategory";if(!a.noTickson&&(_==="category"||z)&&(r.ticks||r.showgrid)&&(z?(i("tickson","boundaries"),delete r.ticklabelposition):i("tickson")),z){var N=i("showdividers");N&&(i("dividercolor"),i("dividerwidth"))}if(_==="date")if(nfe(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:hfe}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var H=0;H<r.rangebreaks.length;H++)if(r.rangebreaks[H].pattern===nb){r._hasDayOfWeekBreaks=!0;break}if(kN(r,s),s._has("scattergl")||s._has("splom"))for(var V=0;V<a.data.length;V++){var W=a.data[V];(W.type==="scattergl"||W.type==="splom")&&(W.visible=!1,a1.warn(W.type+" traces do not work on axes with rangebreaks. Setting trace "+W.index+" to `visible: false`."))}}return r};function hfe(e,t,r){function i(T,M){return a1.coerce(e,t,hT.rangebreaks,T,M)}var a=i("enabled");if(a){var s=i("bounds");if(s&&s.length>=2){var l="",f,h;if(s.length===2){for(f=0;f<2;f++)if(h=CN(s[f]),h){l=nb;break}}var v=i("pattern",l);if(v===nb)for(f=0;f<2;f++)h=CN(s[f]),h&&(t.bounds[f]=s[f]=h-1);if(v)for(f=0;f<2;f++)switch(h=s[f],v){case nb:if(!AN(h)){t.enabled=!1;return}if(h=+h,h!==Math.floor(h)||h<0||h>=7){t.enabled=!1;return}t.bounds[f]=s[f]=h;break;case cfe:if(!AN(h)){t.enabled=!1;return}if(h=+h,h<0||h>24){t.enabled=!1;return}t.bounds[f]=s[f]=h;break}if(r.autorange===!1){var m=r.range;if(m[0]<m[1]){if(s[0]<m[0]&&s[1]>m[1]){t.enabled=!1;return}}else if(s[0]>m[0]&&s[1]<m[1]){t.enabled=!1;return}}}else{var _=i("values");if(_&&_.length)i("dvalue");else{t.enabled=!1;return}}}}var vfe={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function CN(e){if(typeof e=="string")return vfe[e.slice(0,3).toLowerCase()]}});var dT=me((lxe,LN)=>{"use strict";var dfe=Da(),ob=Bt();LN.exports=function(t,r,i,a){var s=a.counterAxes||[],l=a.overlayableAxes||[],f=a.letter,h=a.grid,v=a.overlayingDomain,m,_,T,M,C,E;h&&(_=h._domains[f][h._axisMap[r._id]],m=h._anchors[r._id],_&&(T=h[f+"side"].split(" ")[0],M=h.domain[f][T==="right"||T==="top"?1:0])),_=_||[0,1],m=m||(dfe(t.position)?"free":s[0]||"free"),T=T||(f==="x"?"bottom":"left"),M=M||0,C=0,E=!1;var L=ob.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:m}},"anchor"),I=ob.coerce(t,r,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:T}},"side");if(L==="free"){if(f==="y"){var O=i("autoshift");O&&(M=I==="left"?v[0]:v[1],E=r.automargin?r.automargin:!0,C=I==="left"?-3:3),i("shift",C)}i("position",M)}i("automargin",E);var q=!1;if(l.length&&(q=ob.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!q){var z=i("domain",_);z[0]>z[1]-1/4096&&(r.domain=_),ob.noneOrAll(t.domain,r.domain,_),r.tickmode==="sync"&&(r.tickmode="auto")}return i("layer"),r}});var BN=me((uxe,NN)=>{"use strict";var Gd=Bt(),DN=Oa(),pfe=kc().isUnifiedHover,mfe=A4(),PN=Ii(),yfe=M0(),zN=Nu(),gfe=gN(),IN=vT(),_fe=bg(),RN=dT(),mT=jn(),Yf=mT.id2name,FN=mT.name2id,xfe=eo().AX_ID_PATTERN,qN=sa(),sb=qN.traceIs,pT=qN.getComponentMethod;function lb(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}NN.exports=function(t,r,i){var a=r.autotypenumbers,s={},l={},f={},h={},v={},m={},_={},T={},M={},C={},E,L;for(E=0;E<i.length;E++){var I=i[E];if(sb(I,"cartesian")){var O;if(I.xaxis)O=Yf(I.xaxis),lb(s,O,I);else if(I.xaxes)for(L=0;L<I.xaxes.length;L++)lb(s,Yf(I.xaxes[L]),I);var q;if(I.yaxis)q=Yf(I.yaxis),lb(s,q,I);else if(I.yaxes)for(L=0;L<I.yaxes.length;L++)lb(s,Yf(I.yaxes[L]),I);if(I.type==="funnel"?I.orientation==="h"?(O&&(l[O]=!0),q&&(_[q]=!0)):q&&(f[q]=!0):I.type==="image"?(q&&(T[q]=!0),O&&(T[O]=!0)):(q&&(v[q]=!0,m[q]=!0),(!sb(I,"carpet")||I.type==="carpet"&&!I._cheater)&&O&&(h[O]=!0)),I.type==="carpet"&&I._cheater&&O&&(l[O]=!0),sb(I,"2dMap")&&(M[O]=!0,M[q]=!0),sb(I,"oriented")){var z=I.orientation==="h"?q:O;C[z]=!0}}}var N=r._subplots,H=N.xaxis,V=N.yaxis,W=Gd.simpleMap(H,Yf),J=Gd.simpleMap(V,Yf),ee=W.concat(J),ie=DN.background;H.length&&V.length&&(ie=Gd.coerce(t,r,yfe,"plot_bgcolor"));var oe=DN.combine(ie,r.paper_bgcolor),fe,le,Te,Se,Me;function Ae(){var ut=s[fe]||[];Me._traceIndices=ut.map(function(sr){return sr.index}),Me._annIndices=[],Me._shapeIndices=[],Me._selectionIndices=[],Me._imgIndices=[],Me._subplotsWith=[],Me._counterAxes=[],Me._name=Me._attr=fe,Me._id=le}function pe(ut,sr){return Gd.coerce(Se,Me,zN,ut,sr)}function ke(ut,sr){return Gd.coerce2(Se,Me,zN,ut,sr)}function Ee(ut){return ut==="x"?V:H}function Xe(ut,sr){for(var Pr=ut==="x"?W:J,Et=[],ht=0;ht<Pr.length;ht++){var pt=Pr[ht];pt!==sr&&!(t[pt]||{}).overlaying&&Et.push(FN(pt))}return Et}var lt={x:Ee("x"),y:Ee("y")},it=lt.x.concat(lt.y),_t={},Ye=[];function kt(){var ut=Se.matches;xfe.test(ut)&&it.indexOf(ut)===-1&&(_t[ut]=Se.type,Ye=Object.keys(_t))}var st=mfe(t,r),dt=pfe(st);for(E=0;E<ee.length;E++){fe=ee[E],le=FN(fe),Te=fe.charAt(0),Gd.isPlainObject(t[fe])||(t[fe]={}),Se=t[fe],Me=PN.newContainer(r,fe,Te+"axis"),Ae();var It=Te==="x"&&!h[fe]&&l[fe]||Te==="y"&&!v[fe]&&f[fe],yt=Te==="y"&&(!m[fe]&&_[fe]||T[fe]),de={hasMinor:!0,letter:Te,font:r.font,outerTicks:M[fe],showGrid:!C[fe],data:s[fe]||[],bgColor:oe,calendar:r.calendar,automargin:!0,visibleDflt:It,reverseDflt:yt,autotypenumbersDflt:a,splomStash:((r._splomAxes||{})[Te]||{})[le],noAutotickangles:Te==="y"};pe("uirevision",r.uirevision),gfe(Se,Me,pe,de),IN(Se,Me,pe,de,r);var ze=dt&&Te===st.charAt(0),_e=ke("spikecolor",dt?Me.color:void 0),Ue=ke("spikethickness",dt?1.5:void 0),at=ke("spikedash",dt?"dot":void 0),Je=ke("spikemode",dt?"across":void 0),Ct=ke("spikesnap"),wt=pe("showspikes",!!ze||!!_e||!!Ue||!!at||!!Je||!!Ct);wt||(delete Me.spikecolor,delete Me.spikethickness,delete Me.spikedash,delete Me.spikemode,delete Me.spikesnap);var xt=Yf(Se.overlaying),qt=[0,1];if(r[xt]!==void 0){var Ut=Yf(r[xt].anchor);r[Ut]!==void 0&&(qt=r[Ut].domain)}RN(Se,Me,pe,{letter:Te,counterAxes:lt[Te],overlayableAxes:Xe(Te,fe),grid:r.grid,overlayingDomain:qt}),pe("title.standoff"),kt(),Me._input=Se}for(E=0;E<Ye.length;){le=Ye[E++],fe=Yf(le),Te=fe.charAt(0),Gd.isPlainObject(t[fe])||(t[fe]={}),Se=t[fe],Me=PN.newContainer(r,fe,Te+"axis"),Ae();var Dt={letter:Te,font:r.font,outerTicks:M[fe],showGrid:!C[fe],data:[],bgColor:oe,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:a,splomStash:((r._splomAxes||{})[Te]||{})[le]};pe("uirevision",r.uirevision),Me.type=_t[le]||"linear",IN(Se,Me,pe,Dt,r),RN(Se,Me,pe,{letter:Te,counterAxes:lt[Te],overlayableAxes:Xe(Te,fe),grid:r.grid}),pe("fixedrange"),pe("modebardisable"),kt(),Me._input=Se}var Mt=pT("rangeslider","handleDefaults"),Zt=pT("rangeselector","handleDefaults");for(E=0;E<W.length;E++)fe=W[E],Se=t[fe],Me=r[fe],Mt(t,r,fe),Me.type==="date"&&Zt(Se,Me,r,J,Me.calendar),pe("fixedrange"),pe("modebardisable");for(E=0;E<J.length;E++){fe=J[E],Se=t[fe],Me=r[fe];var Yt=r[Yf(Me.anchor)],Be=pT("rangeslider","isVisible")(Yt);pe("fixedrange",Be),pe("modebardisable")}_fe.handleDefaults(t,r,{axIds:it.concat(Ye).sort(mT.idSort),axHasImage:T})}});var VN=me((fxe,UN)=>{"use strict";var bfe=ja(),ON=sa(),ub=Bt(),cl=xi(),fb=Xi();UN.exports=function(t,r,i,a){var s=t._fullLayout;if(r.length===0){fb.redrawComponents(t);return}function l(L){var I=L.xaxis,O=L.yaxis;s._defs.select("#"+L.clipId+"> rect").call(cl.setTranslate,0,0).call(cl.setScale,1,1),L.plot.call(cl.setTranslate,I._offset,O._offset).call(cl.setScale,1,1);var q=L.plot.selectAll(".scatterlayer .trace");q.selectAll(".point").call(cl.setPointGroupScale,1,1),q.selectAll(".textpoint").call(cl.setTextPointsScale,1,1),q.call(cl.hideOutsideRangePoints,L)}function f(L,I){var O=L.plotinfo,q=O.xaxis,z=O.yaxis,N=q._length,H=z._length,V=!!L.xr1,W=!!L.yr1,J=[];if(V){var ee=ub.simpleMap(L.xr0,q.r2l),ie=ub.simpleMap(L.xr1,q.r2l),oe=ee[1]-ee[0],fe=ie[1]-ie[0];J[0]=(ee[0]*(1-I)+I*ie[0]-ee[0])/(ee[1]-ee[0])*N,J[2]=N*(1-I+I*fe/oe),q.range[0]=q.l2r(ee[0]*(1-I)+I*ie[0]),q.range[1]=q.l2r(ee[1]*(1-I)+I*ie[1])}else J[0]=0,J[2]=N;if(W){var le=ub.simpleMap(L.yr0,z.r2l),Te=ub.simpleMap(L.yr1,z.r2l),Se=le[1]-le[0],Me=Te[1]-Te[0];J[1]=(le[1]*(1-I)+I*Te[1]-le[1])/(le[0]-le[1])*H,J[3]=H*(1-I+I*Me/Se),z.range[0]=q.l2r(le[0]*(1-I)+I*Te[0]),z.range[1]=z.l2r(le[1]*(1-I)+I*Te[1])}else J[1]=0,J[3]=H;fb.drawOne(t,q,{skipTitle:!0}),fb.drawOne(t,z,{skipTitle:!0}),fb.redrawComponents(t,[q._id,z._id]);var Ae=V?N/J[2]:1,pe=W?H/J[3]:1,ke=V?J[0]:0,Ee=W?J[1]:0,Xe=V?J[0]/J[2]*N:0,lt=W?J[1]/J[3]*H:0,it=q._offset-Xe,_t=z._offset-lt;O.clipRect.call(cl.setTranslate,ke,Ee).call(cl.setScale,1/Ae,1/pe),O.plot.call(cl.setTranslate,it,_t).call(cl.setScale,Ae,pe),cl.setPointGroupScale(O.zoomScalePts,1/Ae,1/pe),cl.setTextPointsScale(O.zoomScaleTxt,1/Ae,1/pe)}var h;a&&(h=a());function v(){for(var L={},I=0;I<r.length;I++){var O=r[I],q=O.plotinfo.xaxis,z=O.plotinfo.yaxis;O.xr1&&(L[q._name+".range"]=O.xr1.slice()),O.yr1&&(L[z._name+".range"]=O.yr1.slice())}return h&&h(),ON.call("relayout",t,L).then(function(){for(var N=0;N<r.length;N++)l(r[N].plotinfo)})}function m(){for(var L={},I=0;I<r.length;I++){var O=r[I],q=O.plotinfo.xaxis,z=O.plotinfo.yaxis;O.xr0&&(L[q._name+".range"]=O.xr0.slice()),O.yr0&&(L[z._name+".range"]=O.yr0.slice())}return ON.call("relayout",t,L).then(function(){for(var N=0;N<r.length;N++)l(r[N].plotinfo)})}var _,T,M,C=bfe.ease(i.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(M),M=null,m()});function E(){T=Date.now();for(var L=Math.min(1,(T-_)/i.duration),I=C(L),O=0;O<r.length;O++)f(r[O],I);T-_>i.duration?(v(),M=window.cancelAnimationFrame(E)):M=window.requestAnimationFrame(E)}return _=Date.now(),M=window.requestAnimationFrame(E),Promise.resolve()}});var yT=me(Uo=>{"use strict";var hb=ja(),HN=sa(),Zd=Bt(),wfe=to(),Tfe=xi(),GN=W_().getModuleCalcData,rv=jn(),Zu=eo(),Afe=Oh(),ai=Zd.ensureSingle;function cb(e,t,r){return Zd.ensureSingle(e,t,r,function(i){i.datum(r)})}var Yd=Zu.zindexSeparator;Uo.name="cartesian";Uo.attr=["xaxis","yaxis"];Uo.idRoot=["x","y"];Uo.idRegex=Zu.idRegex;Uo.attrRegex=Zu.attrRegex;Uo.attributes=dN();Uo.layoutAttributes=Nu();Uo.supplyLayoutDefaults=BN();Uo.transitionAxes=VN();Uo.finalizeSubplots=function(e,t){var r=t._subplots,i=r.xaxis,a=r.yaxis,s=r.cartesian,l=s,f={},h={},v,m,_;for(v=0;v<l.length;v++){var T=l[v].split("y");f[T[0]]=1,h["y"+T[1]]=1}for(v=0;v<i.length;v++)m=i[v],f[m]||(_=(e[rv.id2name(m)]||{}).anchor,Zu.idRegex.y.test(_)||(_="y"),s.push(m+_),l.push(m+_),h[_]||(h[_]=1,Zd.pushUnique(a,_)));for(v=0;v<a.length;v++)_=a[v],h[_]||(m=(e[rv.id2name(_)]||{}).anchor,Zu.idRegex.x.test(m)||(m="x"),s.push(m+_),l.push(m+_),f[m]||(f[m]=1,Zd.pushUnique(i,m)));if(!l.length){m="",_="";for(var M in e)if(Zu.attrRegex.test(M)){var C=M.charAt(0);C==="x"?(!m||+M.slice(5)<+m.slice(5))&&(m=M):(!_||+M.slice(5)<+_.slice(5))&&(_=M)}m=m?rv.name2id(m):"x",_=_?rv.name2id(_):"y",i.push(m),a.push(_),s.push(m+_)}};Uo.plot=function(e,t,r,i){var a=e._fullLayout,s=a._subplots.cartesian,l=e.calcdata,f;if(!Array.isArray(t))for(t=[],f=0;f<l.length;f++)t.push(f);for(var h=a._zindices,v=0;v<h.length;v++){var m=h[v];for(f=0;f<s.length;f++){var _=s[f],T=a._plots[_];if(v>0){var M=T.id;if(M.indexOf(Yd)!==-1)continue;M+=Yd+(v+1),T=Zd.extendFlat({},T,{id:M,plot:a._cartesianlayer.selectAll(".subplot").select("."+M)})}for(var C=[],E,L=0;L<l.length;L++){var I=l[L],O=I[0].trace;m===(O.zorder||0)&&O.xaxis+O.yaxis===_&&((t.indexOf(O.index)!==-1||O.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===_&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&C.indexOf(E)===-1&&C.push(E),C.push(I)),E=I)}ZN(e,T,C,r,i)}}};function ZN(e,t,r,i,a){for(var s=Zu.traceLayerClasses,l=e._fullLayout,f=l._zindices,h=l._modules,v,m,_,T=[],M=[],C=0;C<f.length;C++)for(var E=f[C],L=0;L<h.length;L++){v=h[L];var I=v.name,O=HN.modules[I].categories;if(O.svg){var q=v.layerName||I+"layer",z=q+(C?Number(C)+1:""),N=v.plot;m=GN(r,N,E),_=m[0],r=m[1],_.length&&T.push({i:s.indexOf(q),zindex:C,className:z,plotMethod:N,cdModule:_}),O.zoomScale&&M.push("."+z)}}T.sort(function(W,J){return(W.zindex||0)-(J.zindex||0)||W.i-J.i});var H=t.plot.selectAll("g.mlayer").data(T,function(W){return W.className});if(H.enter().append("g").attr("class",function(W){return W.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),H.exit().remove(),H.order(),H.each(function(W){var J=hb.select(this),ee=W.className;W.plotMethod(e,t,W.cdModule,J,i,a),Zu.clipOnAxisFalseQuery.indexOf("."+ee)===-1&&Tfe.setClipUrl(J,t.layerClipId,e)}),l._has("scattergl")&&(v=HN.getModule("scattergl"),_=GN(r,v)[0],v.plot(e,t,_)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(Zu.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),M.length)){var V=t.plot.selectAll(M.join(",")).selectAll(".trace");t.zoomScalePts=V.selectAll("path.point"),t.zoomScaleTxt=V.selectAll(".textpoint")}}Uo.clean=function(e,t,r,i){var a=i._plots||{},s=t._plots||{},l=i._subplots||{},f,h,v;if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(v in a)f=a[v],f.plotgroup&&f.plotgroup.remove();var m=i._has&&i._has("gl"),_=t._has&&t._has("gl");if(m&&!_)for(v in a)f=a[v],f._scene&&f._scene.destroy();if(l.xaxis&&l.yaxis){var T=rv.listIds({_fullLayout:i});for(h=0;h<T.length;h++){var M=T[h];t[rv.id2name(M)]||i._infolayer.selectAll(".g-"+M+"title").remove()}}var C=i._has&&i._has("cartesian"),E=t._has&&t._has("cartesian");if(C&&!E)WN(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(l.cartesian)for(h=0;h<l.cartesian.length;h++){var L=l.cartesian[h];if(L.indexOf(Yd)===-1&&!s[L]){var I="."+L+",."+L+"-x,."+L+"-y";i._cartesianlayer.selectAll(I).remove(),XN(L,i)}}};Uo.drawFramework=function(e){var t=e._fullLayout,r=e.calcdata,i,a={};for(i=0;i<r.length;i++){var s=r[i][0],l=s.trace,f=l.zorder||0;a[f]||(a[f]=[]),a[f].push(s)}var h=Object.keys(a).map(Number).sort(Zd.sorterAsc);h.length||(h=[0]),t._zindices=h;var v=Mfe(e),m=v.length,_=[];for(i=0;i<m;i++)_[i]=v[i].slice();for(var T=1;T<h.length;T++){var M=[];for(i=0;i<m;i++)M[i]=v[i].slice(),M[i][0]+=Yd+(T+1);_=_.concat(M)}var C=t._cartesianlayer.selectAll(".subplot").data(_,String);C.enter().append("g").attr("class",function(E){return"subplot "+E[0]}),C.order(),C.exit().call(WN,t),C.each(function(E){var L=E[0],I=L.indexOf(Yd),O=I!==-1,q=O?L.slice(0,I):L,z=t._plots[L];z||(z=Zd.extendFlat({},t._plots[q]),z&&(z.id=L,t._plots[L]=z,t._subplots.cartesian.push(L))),z&&(z.plotgroup=hb.select(this),YN(e,z),O||(z.draglayer=ai(t._draggers,"g",L)))})};Uo.rangePlot=function(e,t,r){YN(e,t),ZN(e,t,r),wfe.style(e)};function Mfe(e){var t=e._fullLayout,r=t._zindices.length,i=t._subplots.cartesian,a=i.length,s,l,f,h,v,m,_=[],T=[];for(s=0;s<a;s++){f=i[s],h=t._plots[f],v=h.xaxis,m=h.yaxis;var M=v._mainAxis,C=m._mainAxis,E=M._id+C._id,L=t._plots[E];h.overlays=[],E!==f&&L?(h.mainplot=E,h.mainplotinfo=L,T.push(f)):(h.mainplot=void 0,h.mainplotinfo=void 0,_.push(f))}for(s=0;s<T.length;s++)f=T[s],h=t._plots[f],h.mainplotinfo.overlays.push(h);var I=_.concat(T),O=[];for(s=0;s<a;s++){f=I[s],h=t._plots[f],v=h.xaxis,m=h.yaxis;for(var q=[],z=1;z<=r;z++){var N="";for(z>1&&(N+=Yd+z),q.push(f+N),l=0;l<h.overlays.length;l++)q.push(h.overlays[l].id+N)}q=q.concat([v.layer,m.layer,v.overlaying||"",m.overlaying||""]),O.push(q)}return O}function YN(e,t){var r=e._fullLayout,i=t.plotgroup,a=t.id,s=a.indexOf(Yd),l=s!==-1,f=Zu.layerValue2layerClass[t.xaxis.layer],h=Zu.layerValue2layerClass[t.yaxis.layer],v=r._hasOnlyLargeSploms,m=r._zindices.length>1,_=t.mainplotinfo;if(!t.mainplot||m)if(v)t.xlines=ai(i,"path","xlines-above"),t.ylines=ai(i,"path","ylines-above"),t.xaxislayer=ai(i,"g","xaxislayer-above"),t.yaxislayer=ai(i,"g","yaxislayer-above");else{if(!l){var T=ai(i,"g","layer-subplot");t.shapelayer=ai(T,"g","shapelayer"),t.imagelayer=ai(T,"g","imagelayer"),_&&m?(t.minorGridlayer=_.minorGridlayer,t.gridlayer=_.gridlayer,t.zerolinelayer=_.zerolinelayer):(t.minorGridlayer=ai(i,"g","minor-gridlayer"),t.gridlayer=ai(i,"g","gridlayer"),t.zerolinelayer=ai(i,"g","zerolinelayer"));var M=ai(i,"g","layer-between");t.shapelayerBetween=ai(M,"g","shapelayer"),t.imagelayerBetween=ai(M,"g","imagelayer"),ai(i,"path","xlines-below"),ai(i,"path","ylines-below"),t.overlinesBelow=ai(i,"g","overlines-below"),ai(i,"g","xaxislayer-below"),ai(i,"g","yaxislayer-below"),t.overaxesBelow=ai(i,"g","overaxes-below")}t.overplot=ai(i,"g","overplot"),t.plot=ai(t.overplot,"g",a),_&&m?t.zerolinelayerAbove=_.zerolinelayerAbove:t.zerolinelayerAbove=ai(i,"g","zerolinelayer-above"),l||(t.xlines=ai(i,"path","xlines-above"),t.ylines=ai(i,"path","ylines-above"),t.overlinesAbove=ai(i,"g","overlines-above"),ai(i,"g","xaxislayer-above"),ai(i,"g","yaxislayer-above"),t.overaxesAbove=ai(i,"g","overaxes-above"),t.xlines=i.select(".xlines-"+f),t.ylines=i.select(".ylines-"+h),t.xaxislayer=i.select(".xaxislayer-"+f),t.yaxislayer=i.select(".yaxislayer-"+h))}else{var C=_.plotgroup,E=a+"-x",L=a+"-y";t.minorGridlayer=_.minorGridlayer,t.gridlayer=_.gridlayer,t.zerolinelayer=_.zerolinelayer,t.zerolinelayerAbove=_.zerolinelayerAbove,ai(_.overlinesBelow,"path",E),ai(_.overlinesBelow,"path",L),ai(_.overaxesBelow,"g",E),ai(_.overaxesBelow,"g",L),t.plot=ai(_.overplot,"g",a),ai(_.overlinesAbove,"path",E),ai(_.overlinesAbove,"path",L),ai(_.overaxesAbove,"g",E),ai(_.overaxesAbove,"g",L),t.xlines=C.select(".overlines-"+f).select("."+E),t.ylines=C.select(".overlines-"+h).select("."+L),t.xaxislayer=C.select(".overaxes-"+f).select("."+E),t.yaxislayer=C.select(".overaxes-"+h).select("."+L)}l||(v||(cb(t.minorGridlayer,"g",t.xaxis._id),cb(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(I){return I[0]}).sort(rv.idSort),cb(t.gridlayer,"g",t.xaxis._id),cb(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(rv.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0))}function WN(e,t){if(e){var r={};e.each(function(h){var v=h[0],m=hb.select(this);m.remove(),XN(v,t),r[v]=!0});for(var i in t._plots)for(var a=t._plots[i],s=a.overlays||[],l=0;l<s.length;l++){var f=s[l];r[f.id]&&f.plot.selectAll(".trace").remove()}}}function XN(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}Uo.toSVG=function(e){var t=e._fullLayout._glimages,r=hb.select(e).selectAll(".svg-container"),i=r.filter(function(s,l){return l===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function a(){var s=this,l=s.toDataURL("image/png"),f=t.append("svg:image");f.attr({xmlns:Afe.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:s.style.width,height:s.style.height})}i.each(a)};Uo.updateFx=x6().updateFx});var JN=me((hxe,jN)=>{"use strict";var vb=rs();jN.exports={hasLines:vb.hasLines,hasMarkers:vb.hasMarkers,hasText:vb.hasText,isBubble:vb.isBubble,attributes:zc(),layoutAttributes:G_(),supplyDefaults:sq(),crossTraceDefaults:cq(),supplyLayoutDefaults:vq(),calc:J6().calc,crossTraceCalc:Uq(),arraysToCalcdata:Kg(),plot:tN(),colorbar:iT(),formatLabels:iN(),style:lT().style,styleOnSelect:lT().styleOnSelect,hoverPoints:uN(),selectPoints:hN(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:yT(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}});var $N=me((vxe,QN)=>{"use strict";var Sfe=ja(),kfe=Oa(),KN=h6(),gT=Bt(),Cfe=gT.strScale,Efe=gT.strRotate,Lfe=gT.strTranslate;QN.exports=function(t,r,i){var a=t.node(),s=KN[i.arrowhead||0],l=KN[i.startarrowhead||0],f=(i.arrowwidth||1)*(i.arrowsize||1),h=(i.arrowwidth||1)*(i.startarrowsize||1),v=r.indexOf("start")>=0,m=r.indexOf("end")>=0,_=s.backoff*f+i.standoff,T=l.backoff*h+i.startstandoff,M,C,E,L;if(a.nodeName==="line"){M={x:+t.attr("x1"),y:+t.attr("y1")},C={x:+t.attr("x2"),y:+t.attr("y2")};var I=M.x-C.x,O=M.y-C.y;if(E=Math.atan2(O,I),L=E+Math.PI,_&&T&&_+T>Math.sqrt(I*I+O*O)){le();return}if(_){if(_*_>I*I+O*O){le();return}var q=_*Math.cos(E),z=_*Math.sin(E);C.x+=q,C.y+=z,t.attr({x2:C.x,y2:C.y})}if(T){if(T*T>I*I+O*O){le();return}var N=T*Math.cos(E),H=T*Math.sin(E);M.x-=N,M.y-=H,t.attr({x1:M.x,y1:M.y})}}else if(a.nodeName==="path"){var V=a.getTotalLength(),W="";if(V<_+T){le();return}var J=a.getPointAtLength(0),ee=a.getPointAtLength(.1);E=Math.atan2(J.y-ee.y,J.x-ee.x),M=a.getPointAtLength(Math.min(T,V)),W="0px,"+T+"px,";var ie=a.getPointAtLength(V),oe=a.getPointAtLength(V-.1);L=Math.atan2(ie.y-oe.y,ie.x-oe.x),C=a.getPointAtLength(Math.max(0,V-_));var fe=W?T+_:_;W+=V-fe+"px,"+V+"px",t.style("stroke-dasharray",W)}function le(){t.style("stroke-dasharray","0px,100px")}function Te(Se,Me,Ae,pe){Se.path&&(Se.noRotate&&(Ae=0),Sfe.select(a.parentNode).append("path").attr({class:t.attr("class"),d:Se.path,transform:Lfe(Me.x,Me.y)+Efe(Ae*180/Math.PI)+Cfe(pe)}).style({fill:kfe.rgb(i.arrowcolor),"stroke-width":0}))}v&&Te(l,M,E,h),m&&Te(s,C,L,f)}});var db=me((dxe,iB)=>{"use strict";var eB=ja(),_T=sa(),Dfe=to(),iv=Bt(),xT=iv.strTranslate,n1=Xi(),Wd=Oa(),Fc=xi(),tB=Nf(),bT=ro(),wT=Wh(),i1=jl(),Pfe=Ii().arrayEditor,zfe=$N();iB.exports={draw:Ife,drawOne:rB,drawRaw:aB};function Ife(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&rB(e,r);return Dfe.previousPromises(e)}function rB(e,t){var r=e._fullLayout,i=r.annotations[t]||{},a=n1.getFromId(e,i.xref),s=n1.getFromId(e,i.yref);a&&a.setScale(),s&&s.setScale(),aB(e,i,t,!1,a,s)}function av(e,t,r,i,a){var s=a[r],l=a[r+"ref"],f=r.indexOf("y")!==-1,h=n1.getRefType(l)==="domain",v=f?i.h:i.w;return e?h?s+(f?-t:t)/e._length:e.p2r(e.r2p(s)+t):s+(f?-t:t)/v}function aB(e,t,r,i,a,s){var l=e._fullLayout,f=e._fullLayout._size,h=e._context.edits,v,m;i?(v="annotation-"+i,m=i+".annotations"):(v="annotation",m="annotations");var _=Pfe(e.layout,m,t),T=_.modifyBase,M=_.modifyItem,C=_.getUpdateObj;l._infolayer.selectAll("."+v+'[data-index="'+r+'"]').remove();var E="clip"+l._uid+"_ann"+r;if(!t._input||t.visible===!1){eB.selectAll("#"+E).remove();return}var L={x:{},y:{}},I=+t.textangle||0,O=l._infolayer.append("g").classed(v,!0).attr("data-index",String(r)).style("opacity",t.opacity),q=O.append("g").classed("annotation-text-g",!0),z=h[t.showarrow?"annotationTail":"annotationPosition"],N=t.captureevents||h.annotationText||z;function H(pe){var ke={index:r,annotation:t._input,fullAnnotation:t,event:pe};return i&&(ke.subplotId=i),ke}var V=q.append("g").style("pointer-events",N?"all":null).call(wT,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",H(eB.event))});t.hovertext&&V.on("mouseover",function(){var pe=t.hoverlabel,ke=pe.font,Ee=this.getBoundingClientRect(),Xe=e.getBoundingClientRect();tB.loneHover({x0:Ee.left-Xe.left,x1:Ee.right-Xe.left,y:(Ee.top+Ee.bottom)/2-Xe.top,text:t.hovertext,color:pe.bgcolor,borderColor:pe.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color,fontWeight:ke.weight,fontStyle:ke.style,fontVariant:ke.variant,fontShadow:ke.fontShadow,fontLineposition:ke.fontLineposition,fontTextcase:ke.fontTextcase},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:e})}).on("mouseout",function(){tB.loneUnhover(l._hoverlayer.node())});var W=t.borderwidth,J=t.borderpad,ee=W+J,ie=V.append("rect").attr("class","bg").style("stroke-width",W+"px").call(Wd.stroke,t.bordercolor).call(Wd.fill,t.bgcolor),oe=t.width||t.height,fe=l._topclips.selectAll("#"+E).data(oe?[0]:[]);fe.enter().append("clipPath").classed("annclip",!0).attr("id",E).append("rect"),fe.exit().remove();var le=t.font,Te=l._meta?iv.templateString(t.text,l._meta):t.text,Se=V.append("text").classed("annotation-text",!0).text(Te);function Me(pe){return pe.call(Fc.font,le).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),bT.convertToTspans(pe,e,Ae),pe}function Ae(){var pe=Se.selectAll("a");if(pe.size()===1&&pe.text()===Se.text()){var ke=V.insert("a",":first-child").attr({"xlink:xlink:href":pe.attr("xlink:href"),"xlink:xlink:show":pe.attr("xlink:show")}).style({cursor:"pointer"});ke.node().appendChild(ie.node())}var Ee=V.select(".annotation-text-math-group"),Xe=!Ee.empty(),lt=Fc.bBox((Xe?Ee:Se).node()),it=lt.width,_t=lt.height,Ye=t.width||it,kt=t.height||_t,st=Math.round(Ye+2*ee),dt=Math.round(kt+2*ee);function It(bt,Tt){return Tt==="auto"&&(bt<1/3?Tt="left":bt>2/3?Tt="right":Tt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Tt]}for(var yt=!1,de=["x","y"],ze=0;ze<de.length;ze++){var _e=de[ze],Ue=t[_e+"ref"]||_e,at=t["a"+_e+"ref"],Je={x:a,y:s}[_e],Ct=(I+(_e==="x"?0:-90))*Math.PI/180,wt=st*Math.cos(Ct),xt=dt*Math.sin(Ct),qt=Math.abs(wt)+Math.abs(xt),Ut=t[_e+"anchor"],Dt=t[_e+"shift"]*(_e==="x"?1:-1),Mt=L[_e],Zt,Yt,Be,ut,sr,Pr=n1.getRefType(Ue);if(Je&&Pr!=="domain"){var Et=Je.r2fraction(t[_e]);(Et<0||Et>1)&&(at===Ue?(Et=Je.r2fraction(t["a"+_e]),(Et<0||Et>1)&&(yt=!0)):yt=!0),Zt=Je._offset+Je.r2p(t[_e]),ut=.5}else{var ht=Pr==="domain";_e==="x"?(Be=t[_e],Zt=ht?Je._offset+Je._length*Be:Zt=f.l+f.w*Be):(Be=1-t[_e],Zt=ht?Je._offset+Je._length*Be:Zt=f.t+f.h*Be),ut=t.showarrow?.5:Be}if(t.showarrow){Mt.head=Zt;var pt=t["a"+_e];if(sr=wt*It(.5,t.xanchor)-xt*It(.5,t.yanchor),at===Ue){var Ot=n1.getRefType(at);Ot==="domain"?(_e==="y"&&(pt=1-pt),Mt.tail=Je._offset+Je._length*pt):Ot==="paper"?_e==="y"?(pt=1-pt,Mt.tail=f.t+f.h*pt):Mt.tail=f.l+f.w*pt:Mt.tail=Je._offset+Je.r2p(pt),Yt=sr}else Mt.tail=Zt+pt,Yt=sr+pt;Mt.text=Mt.tail+sr;var er=l[_e==="x"?"width":"height"];if(Ue==="paper"&&(Mt.head=iv.constrain(Mt.head,1,er-1)),at==="pixel"){var Ht=-Math.max(Mt.tail-3,Mt.text),Kt=Math.min(Mt.tail+3,Mt.text)-er;Ht>0?(Mt.tail+=Ht,Mt.text+=Ht):Kt>0&&(Mt.tail-=Kt,Mt.text-=Kt)}Mt.tail+=Dt,Mt.head+=Dt}else sr=qt*It(ut,Ut),Yt=sr,Mt.text=Zt+sr;Mt.text+=Dt,sr+=Dt,Yt+=Dt,t["_"+_e+"padplus"]=qt/2+Yt,t["_"+_e+"padminus"]=qt/2-Yt,t["_"+_e+"size"]=qt,t["_"+_e+"shift"]=sr}if(yt){V.remove();return}var pr=0,yr=0;if(t.align!=="left"&&(pr=(Ye-it)*(t.align==="center"?.5:1)),t.valign!=="top"&&(yr=(kt-_t)*(t.valign==="middle"?.5:1)),Xe)Ee.select("svg").attr({x:ee+pr-1,y:ee+yr}).call(Fc.setClipUrl,oe?E:null,e);else{var ur=ee+yr-lt.top,Lt=ee+pr-lt.left;Se.call(bT.positionText,Lt,ur).call(Fc.setClipUrl,oe?E:null,e)}fe.select("rect").call(Fc.setRect,ee,ee,Ye,kt),ie.call(Fc.setRect,W/2,W/2,st-W,dt-W),V.call(Fc.setTranslate,Math.round(L.x.text-st/2),Math.round(L.y.text-dt/2)),q.attr({transform:"rotate("+I+","+L.x.text+","+L.y.text+")"});var Fe=function(bt,Tt){O.selectAll(".annotation-arrow-g").remove();var mr=L.x.head,Ar=L.y.head,Mr=L.x.tail+bt,Gr=L.y.tail+Tt,pa=L.x.text+bt,Ca=L.y.text+Tt,ii=iv.rotationXYMatrix(I,pa,Ca),wi=iv.apply2DTransform(ii),vi=iv.apply2DTransform2(ii),Fi=+ie.attr("width"),Gi=+ie.attr("height"),vn=pa-.5*Fi,nn=vn+Fi,Ki=Ca-.5*Gi,ir=Ki+Gi,oi=[[vn,Ki,vn,ir],[vn,ir,nn,ir],[nn,ir,nn,Ki],[nn,Ki,vn,Ki]].map(vi);if(!oi.reduce(function(We,mt){return We^!!iv.segmentsIntersect(mr,Ar,mr+1e6,Ar+1e6,mt[0],mt[1],mt[2],mt[3])},!1)){oi.forEach(function(We){var mt=iv.segmentsIntersect(Mr,Gr,mr,Ar,We[0],We[1],We[2],We[3]);mt&&(Mr=mt.x,Gr=mt.y)});var Sa=t.arrowwidth,la=t.arrowcolor,Ci=t.arrowside,ma=O.append("g").style({opacity:Wd.opacity(la)}).classed("annotation-arrow-g",!0),se=ma.append("path").attr("d","M"+Mr+","+Gr+"L"+mr+","+Ar).style("stroke-width",Sa+"px").call(Wd.stroke,Wd.rgb(la));if(zfe(se,Ci,t),h.annotationPosition&&se.node().parentNode&&!i){var te=mr,ue=Ar;if(t.standoff){var he=Math.sqrt(Math.pow(mr-Mr,2)+Math.pow(Ar-Gr,2));te+=t.standoff*(Mr-mr)/he,ue+=t.standoff*(Gr-Ar)/he}var Le=ma.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Mr-te)+","+(Gr-ue),transform:xT(te,ue)}).style("stroke-width",Sa+6+"px").call(Wd.stroke,"rgba(0,0,0,0)").call(Wd.fill,"rgba(0,0,0,0)"),Ne,et;i1.init({element:Le.node(),gd:e,prepFn:function(){var We=Fc.getTranslate(V);Ne=We.x,et=We.y,a&&a.autorange&&T(a._name+".autorange",!0),s&&s.autorange&&T(s._name+".autorange",!0)},moveFn:function(We,mt){var Pt=wi(Ne,et),Ft=Pt[0]+We,tr=Pt[1]+mt;V.call(Fc.setTranslate,Ft,tr),M("x",av(a,We,"x",f,t)),M("y",av(s,mt,"y",f,t)),t.axref===t.xref&&M("ax",av(a,We,"ax",f,t)),t.ayref===t.yref&&M("ay",av(s,mt,"ay",f,t)),ma.attr("transform",xT(We,mt)),q.attr({transform:"rotate("+I+","+Ft+","+tr+")"})},doneFn:function(){_T.call("_guiRelayout",e,C());var We=document.querySelector(".js-notes-box-panel");We&&We.redraw(We.selectedObj)}})}}};if(t.showarrow&&Fe(0,0),z){var Ve;i1.init({element:V.node(),gd:e,prepFn:function(){Ve=q.attr("transform")},moveFn:function(bt,Tt){var mr="pointer";if(t.showarrow)t.axref===t.xref?M("ax",av(a,bt,"ax",f,t)):M("ax",t.ax+bt),t.ayref===t.yref?M("ay",av(s,Tt,"ay",f.w,t)):M("ay",t.ay+Tt),Fe(bt,Tt);else{if(i)return;var Ar,Mr;if(a)Ar=av(a,bt,"x",f,t);else{var Gr=t._xsize/f.w,pa=t.x+(t._xshift-t.xshift)/f.w-Gr/2;Ar=i1.align(pa+bt/f.w,Gr,0,1,t.xanchor)}if(s)Mr=av(s,Tt,"y",f,t);else{var Ca=t._ysize/f.h,ii=t.y-(t._yshift+t.yshift)/f.h-Ca/2;Mr=i1.align(ii-Tt/f.h,Ca,0,1,t.yanchor)}M("x",Ar),M("y",Mr),(!a||!s)&&(mr=i1.getCursor(a?.5:Ar,s?.5:Mr,t.xanchor,t.yanchor))}q.attr({transform:xT(bt,Tt)+Ve}),wT(V,mr)},clickFn:function(bt,Tt){t.captureevents&&e.emit("plotly_clickannotation",H(Tt))},doneFn:function(){wT(V),_T.call("_guiRelayout",e,C());var bt=document.querySelector(".js-notes-box-panel");bt&&bt.redraw(bt.selectedObj)}})}}h.annotationText?Se.call(bT.makeEditable,{delegate:V,gd:e}).call(Me).on("edit",function(pe){t.text=pe,this.call(Me),M("text",pe),a&&a.autorange&&T(a._name+".autorange",!0),s&&s.autorange&&T(s._name+".autorange",!0),_T.call("_guiRelayout",e,C())}):Se.call(Me)}});var fB=me((pxe,uB)=>{"use strict";var nB=Bt(),Rfe=sa(),oB=Ii().arrayEditor;uB.exports={hasClickToShow:Ffe,onClick:qfe};function Ffe(e,t){var r=lB(e,t);return r.on.length>0||r.explicitOff.length>0}function qfe(e,t){var r=lB(e,t),i=r.on,a=r.off.concat(r.explicitOff),s={},l=e._fullLayout.annotations,f,h;if(i.length||a.length){for(f=0;f<i.length;f++)h=oB(e.layout,"annotations",l[i[f]]),h.modifyItem("visible",!0),nB.extendFlat(s,h.getUpdateObj());for(f=0;f<a.length;f++)h=oB(e.layout,"annotations",l[a[f]]),h.modifyItem("visible",!1),nB.extendFlat(s,h.getUpdateObj());return Rfe.call("update",e,{},s)}}function lB(e,t){var r=e._fullLayout.annotations,i=[],a=[],s=[],l=(t||[]).length,f,h,v,m,_,T,M,C;for(f=0;f<r.length;f++)if(v=r[f],m=v.clicktoshow,m){for(h=0;h<l;h++)if(_=t[h],T=_.xaxis,M=_.yaxis,T._id===v.xref&&M._id===v.yref&&T.d2r(_.x)===sB(v._xclick,T)&&M.d2r(_.y)===sB(v._yclick,M)){v.visible?m==="onout"?C=a:C=s:C=i,C.push(f);break}h===l&&v.visible&&m==="onout"&&a.push(f)}return{on:i,off:a,explicitOff:s}}function sB(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}});var AT=me((mxe,cB)=>{"use strict";var TT=Bt(),mm=Oa();cB.exports=function(t,r,i,a){a("opacity");var s=a("bgcolor"),l=a("bordercolor"),f=mm.opacity(l);a("borderpad");var h=a("borderwidth"),v=a("showarrow");a("text",v?" ":i._dfltTitle.annotation),a("textangle"),TT.coerceFont(a,"font",i.font),a("width"),a("align");var m=a("height");if(m&&a("valign"),v){var _=a("arrowside"),T,M;_.indexOf("end")!==-1&&(T=a("arrowhead"),M=a("arrowsize")),_.indexOf("start")!==-1&&(a("startarrowhead",T),a("startarrowsize",M)),a("arrowcolor",f?r.bordercolor:mm.defaultLine),a("arrowwidth",(f&&h||1)*2),a("standoff"),a("startstandoff")}var C=a("hovertext"),E=i.hoverlabel||{};if(C){var L=a("hoverlabel.bgcolor",E.bgcolor||(mm.opacity(s)?mm.rgb(s):mm.defaultLine)),I=a("hoverlabel.bordercolor",E.bordercolor||mm.contrast(L)),O=TT.extendFlat({},E.font);O.color||(O.color=I),TT.coerceFont(a,"hoverlabel.font",O)}a("captureevents",!!C)}});var vB=me((yxe,hB)=>{"use strict";var MT=Bt(),Xd=Xi(),Nfe=Wl(),Bfe=AT(),Ofe=sm();hB.exports=function(t,r){Nfe(t,r,{name:"annotations",handleItemDefaults:Ufe})};function Ufe(e,t,r){function i(q,z){return MT.coerce(e,t,Ofe,q,z)}var a=i("visible"),s=i("clicktoshow");if(a||s){Bfe(e,t,r,i);for(var l=t.showarrow,f=["x","y"],h=[-10,-30],v={_fullLayout:r},m=0;m<2;m++){var _=f[m],T=Xd.coerceRef(e,t,v,_,"","paper");if(T!=="paper"){var M=Xd.getFromId(v,T);M._annIndices.push(t._index)}if(Xd.coercePosition(t,v,i,T,_,.5),l){var C="a"+_,E=Xd.coerceRef(e,t,v,C,"pixel",["pixel","paper"]);E!=="pixel"&&E!==T&&(E=t[C]="pixel");var L=E==="pixel"?h[m]:.4;Xd.coercePosition(t,v,i,E,C,L)}i(_+"anchor"),i(_+"shift")}if(MT.noneOrAll(e,t,["x","y"]),l&&MT.noneOrAll(e,t,["ax","ay"]),s){var I=i("xclick"),O=i("yclick");t._xclick=I===void 0?t.x:Xd.cleanPosition(I,v,t.xref),t._yclick=O===void 0?t.y:Xd.cleanPosition(O,v,t.yref)}}}});var mB=me((gxe,pB)=>{"use strict";var ST=Bt(),jd=Xi(),Vfe=db().draw;pB.exports=function(t){var r=t._fullLayout,i=ST.filterVisible(r.annotations);if(i.length&&t._fullData.length)return ST.syncOrAsync([Vfe,Hfe],t)};function Hfe(e){var t=e._fullLayout;ST.filterVisible(t.annotations).forEach(function(r){var i=jd.getFromId(e,r.xref),a=jd.getFromId(e,r.yref),s=jd.getRefType(r.xref),l=jd.getRefType(r.yref);r._extremes={},s==="range"&&dB(r,i),l==="range"&&dB(r,a)})}function dB(e,t){var r=t._id,i=r.charAt(0),a=e[i],s=e["a"+i],l=e[i+"ref"],f=e["a"+i+"ref"],h=e["_"+i+"padplus"],v=e["_"+i+"padminus"],m={x:1,y:-1}[i]*e[i+"shift"],_=3*e.arrowsize*e.arrowwidth||0,T=_+m,M=_-m,C=3*e.startarrowsize*e.arrowwidth||0,E=C+m,L=C-m,I;if(f===l){var O=jd.findExtremes(t,[t.r2c(a)],{ppadplus:T,ppadminus:M}),q=jd.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(h,E),ppadminus:Math.max(v,L)});I={min:[O.min[0],q.min[0]],max:[O.max[0],q.max[0]]}}else E=s?E+s:E,L=s?L-s:L,I=jd.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(h,T,E),ppadminus:Math.max(v,M,L)});e._extremes[r]=I}});var gB=me((_xe,yB)=>{"use strict";var Gfe=Da(),Zfe=f_();yB.exports=function(t,r,i,a){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(!(s||l))return;var f=t._fullLayout.annotations,h=r._id.charAt(0),v,m;function _(M){var C=v[M],E=null;s?E=Zfe(C,r.range):E=Math.pow(10,C),Gfe(E)||(E=null),a(m+M,E)}for(var T=0;T<f.length;T++)v=f[T],m="annotations["+T+"].",v[h+"ref"]===r._id&&_(h),v["a"+h+"ref"]===r._id&&_("a"+h)}});var bB=me((xxe,xB)=>{"use strict";var kT=db(),_B=fB();xB.exports={moduleType:"component",name:"annotations",layoutAttributes:sm(),supplyLayoutDefaults:vB(),includeBasePlot:Bg()("annotations"),calcAutorange:mB(),draw:kT.draw,drawOne:kT.drawOne,drawRaw:kT.drawRaw,hasClickToShow:_B.hasClickToShow,onClick:_B.onClick,convertCoords:gB()}});var pb=me((bxe,wB)=>{"use strict";var Oi=sm(),Yfe=il().overrideAll,Wfe=Ii().templatedArray;wB.exports=Yfe(Wfe("annotation",{visible:Oi.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:Oi.xanchor,xshift:Oi.xshift,yanchor:Oi.yanchor,yshift:Oi.yshift,text:Oi.text,textangle:Oi.textangle,font:Oi.font,width:Oi.width,height:Oi.height,opacity:Oi.opacity,align:Oi.align,valign:Oi.valign,bgcolor:Oi.bgcolor,bordercolor:Oi.bordercolor,borderpad:Oi.borderpad,borderwidth:Oi.borderwidth,showarrow:Oi.showarrow,arrowcolor:Oi.arrowcolor,arrowhead:Oi.arrowhead,startarrowhead:Oi.startarrowhead,arrowside:Oi.arrowside,arrowsize:Oi.arrowsize,startarrowsize:Oi.startarrowsize,arrowwidth:Oi.arrowwidth,standoff:Oi.standoff,startstandoff:Oi.startstandoff,hovertext:Oi.hovertext,hoverlabel:Oi.hoverlabel,captureevents:Oi.captureevents}),"calc","from-root")});var AB=me((wxe,TB)=>{"use strict";var CT=Bt(),Xfe=Xi(),jfe=Wl(),Jfe=AT(),Kfe=pb();TB.exports=function(t,r,i){jfe(t,r,{name:"annotations",handleItemDefaults:Qfe,fullLayout:i.fullLayout})};function Qfe(e,t,r,i){function a(f,h){return CT.coerce(e,t,Kfe,f,h)}function s(f){var h=f+"axis",v={_fullLayout:{}};return v._fullLayout[h]=r[h],Xfe.coercePosition(t,v,a,f,f,.5)}var l=a("visible");l&&(Jfe(e,t,i.fullLayout,a),s("x"),s("y"),s("z"),CT.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",a("ax",-10),a("ay",-30),CT.noneOrAll(e,t,["ax","ay"])))}});var CB=me((Txe,kB)=>{"use strict";var MB=Bt(),SB=Xi();kB.exports=function(t){for(var r=t.fullSceneLayout,i=r.annotations,a=0;a<i.length;a++)$fe(i[a],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function $fe(e,t){var r=t.fullSceneLayout,i=r.domain,a=t.fullLayout._size,s={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},MB.extendFlat(e._xa,s),SB.setConvert(e._xa),e._xa._offset=a.l+i.x[0]*a.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*a.w*(i.x[1]-i.x[0])},e._ya={},MB.extendFlat(e._ya,s),SB.setConvert(e._ya),e._ya._offset=a.t+(1-i.y[1])*a.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*a.h*(i.y[1]-i.y[0])}}});var LB=me((Axe,EB)=>{"use strict";function ET(e,t){var r=[0,0,0,0],i,a;for(i=0;i<4;++i)for(a=0;a<4;++a)r[a]+=e[4*i+a]*t[i];return r}function ece(e,t){var r=ET(e.projection,ET(e.view,ET(e.model,[t[0],t[1],t[2],1])));return r}EB.exports=ece});var PB=me((Mxe,DB)=>{"use strict";var tce=db().drawRaw,rce=LB(),ace=["x","y","z"];DB.exports=function(t){for(var r=t.fullSceneLayout,i=t.dataScale,a=r.annotations,s=0;s<a.length;s++){for(var l=a[s],f=!1,h=0;h<3;h++){var v=ace[h],m=l[v],_=r[v+"axis"],T=_.r2fraction(m);if(T<0||T>1){f=!0;break}}f?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=rce(t.glplot.cameraParams,[r.xaxis.r2l(l.x)*i[0],r.yaxis.r2l(l.y)*i[1],r.zaxis.r2l(l.z)*i[2]]),tce(t.graphDiv,l,s,t.id,l._xa,l._ya))}}});var RB=me((Sxe,IB)=>{"use strict";var ice=sa(),zB=Bt();IB.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:pb()}}},layoutAttributes:pb(),handleDefaults:AB(),includeBasePlot:nce,convert:CB(),draw:PB()};function nce(e,t){var r=ice.subplotsRegistry.gl3d;if(r)for(var i=r.attrRegex,a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];i.test(l)&&(e[l].annotations||[]).length&&(zB.pushUnique(t._basePlotModules,r),zB.pushUnique(t._subplots.gl3d,l))}}});var LT=me((Exe,BB)=>{"use strict";var kxe=eo(),FB=qo(),qB=zc().line,oce=gc().dash,Yu=yn().extendFlat,sce=Ii().templatedArray,Cxe=qg(),ym=ys(),NB=sm(),{shapeTexttemplateAttrs:lce,templatefallbackAttrs:uce}=kf(),fce=b_();BB.exports=sce("shape",{visible:Yu({},ym.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:Yu({},ym.legend,{editType:"calc+arraydraw"}),legendgroup:Yu({},ym.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:Yu({},ym.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:FB({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:Yu({},ym.legendrank,{editType:"calc+arraydraw"}),legendwidth:Yu({},ym.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:Yu({},NB.xref,{arrayOk:!0}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:Yu({},NB.yref,{arrayOk:!0}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:Yu({},qB.color,{editType:"arraydraw"}),width:Yu({},qB.width,{editType:"calc+arraydraw"}),dash:Yu({},oce,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:lce({},{keys:Object.keys(fce)}),texttemplatefallback:uce({editType:"arraydraw"}),font:FB({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})});var UB=me((Lxe,OB)=>{"use strict";var gm=Bt(),hl=Xi(),cce=Wl(),hce=LT(),o1=Qh();OB.exports=function(t,r){cce(t,r,{name:"shapes",handleItemDefaults:dce})};function vce(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function dce(e,t,r){function i(q,z){return gm.coerce(e,t,hce,q,z)}t._isShape=!0;var a=i("visible");if(!a)return;var s=i("showlegend");s&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),gm.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var l=i("path"),f=l?"path":"rect",h=i("type",f),v=h!=="path";v&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var m=i("line.width");m&&(i("line.color"),i("line.dash"));var _=i("xsizemode"),T=i("ysizemode");let M=[.25,.75],C=[0,10];["x","y"].forEach(q=>{var z=q+"anchor",N=q==="x"?_:T,H={_fullLayout:r},V,W,J,ee;let ie=q+"ref",oe=e[ie];if(Array.isArray(oe)&&oe.length>0){let fe=o1.countDefiningCoords(h,l,q);ee=hl.coerceRefArray(e,t,H,q,void 0,"paper",fe),t["_"+q+"refArray"]=!0}else ee=hl.coerceRef(e,t,H,q,void 0,"paper");if(Array.isArray(ee))ee.forEach(function(fe){hl.getRefType(fe)==="range"&&(V=hl.getFromId(H,fe),V&&V._shapeIndices.indexOf(t._index)===-1&&V._shapeIndices.push(t._index))}),v&&[0,1].forEach(function(fe){let le=ee[fe];hl.getRefType(le)==="range"?(V=hl.getFromId(H,le),W=o1.shapePositionToRange(V),J=o1.rangeToShapePosition(V),(V.type==="category"||V.type==="multicategory")&&i(q+fe+"shift")):W=J=gm.identity;let Se=q+fe,Me=e[Se];if(e[Se]=W(e[Se],!0),N==="pixel"?i(Se,C[fe]):hl.coercePosition(t,H,i,le,Se,M[fe]),t[Se]=J(t[Se]),e[Se]=Me,fe===0&&N==="pixel"){let Ae=e[z];e[z]=W(e[z],!0),hl.coercePosition(t,H,i,le,z,.25),t[z]=J(t[z]),e[z]=Ae}});else{if(hl.getRefType(ee)==="range"?(V=hl.getFromId(H,ee),V._shapeIndices.push(t._index),J=o1.rangeToShapePosition(V),W=o1.shapePositionToRange(V),v&&(V.type==="category"||V.type==="multicategory")&&(i(q+"0shift"),i(q+"1shift"))):W=J=gm.identity,v){let le=q+"0",Te=q+"1",Se=e[le],Me=e[Te];e[le]=W(e[le],!0),e[Te]=W(e[Te],!0),N==="pixel"?(i(le,C[0]),i(Te,C[1])):(hl.coercePosition(t,H,i,ee,le,M[0]),hl.coercePosition(t,H,i,ee,Te,M[1])),t[le]=J(t[le]),t[Te]=J(t[Te]),e[le]=Se,e[Te]=Me}if(N==="pixel"){let le=e[z];e[z]=W(e[z],!0),hl.coercePosition(t,H,i,ee,z,.25),t[z]=J(t[z]),e[z]=le}}}),v&&gm.noneOrAll(e,t,["x0","x1","y0","y1"]);var E=h==="line",L,I;if(v&&(L=i("label.texttemplate"),i("label.texttemplatefallback")),L||(I=i("label.text")),I||L){i("label.textangle");var O=i("label.textposition",E?"middle":"middle center");i("label.xanchor"),i("label.yanchor",vce(E,O)),i("label.padding"),gm.coerceFont(i,"label.font",r.font)}}});var GB=me((Dxe,HB)=>{"use strict";var pce=Oa(),VB=Bt();function mce(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}HB.exports=function(t,r,i){i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),VB.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var a=i("newshape.line.width");if(a){var s=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",pce.contrast(s)),i("newshape.line.dash")}var l=t.dragmode==="drawline",f=i("newshape.label.text"),h=i("newshape.label.texttemplate");if(i("newshape.label.texttemplatefallback"),f||h){i("newshape.label.textangle");var v=i("newshape.label.textposition",l?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",mce(l,v)),i("newshape.label.padding"),VB.coerceFont(i,"newshape.label.font",r.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}});var KB=me((Pxe,JB)=>{"use strict";var DT=Bt(),lu=Xi(),Wf=yg(),PT=Qh();JB.exports=function(t){var r=t._fullLayout,i=DT.filterVisible(r.shapes);if(!(!i.length||!t._fullData.length))for(var a=0;a<i.length;a++){var s=i[a];s._extremes={};var l,f,h=lu.getRefType(s.xref),v=lu.getRefType(s.yref);if(h==="array"){let m=ZB(t,s,"x");Object.entries(m).forEach(([_,T])=>{l=lu.getFromId(t,_),s._extremes[l._id]=lu.findExtremes(l,T,YB(s))})}else s.xref!=="paper"&&h!=="domain"&&(l=lu.getFromId(t,s.xref),f=XB(l,s,Wf.paramIsX),f&&(s._extremes[l._id]=lu.findExtremes(l,f,YB(s))));if(v==="array"){let m=ZB(t,s,"y");Object.entries(m).forEach(([_,T])=>{l=lu.getFromId(t,_),s._extremes[l._id]=lu.findExtremes(l,T,WB(s))})}else s.yref!=="paper"&&v!=="domain"&&(l=lu.getFromId(t,s.yref),f=XB(l,s,Wf.paramIsY),f&&(s._extremes[l._id]=lu.findExtremes(l,f,WB(s))))}};function ZB(e,t,r){let i=t[r+"ref"],a=r==="x"?Wf.paramIsX:Wf.paramIsY;function s(_,T){_==="paper"||lu.getRefType(_)==="domain"||(l[_]||(l[_]=[]),l[_].push(T))}let l={};if(t.type==="path"&&t.path){let _=t.path.match(Wf.segmentRE)||[];for(var f=0,h=0;h<_.length;h++){let T=_[h],M=T.charAt(0),C=a[M].drawn;if(C===void 0)continue;let E=T.slice(1).match(Wf.paramRE);E&&E.length>C&&(s(i[f],E[C]),f++)}}else s(i[0],t[r+"0"]),s(i[1],t[r+"1"]);let v={};for(let _ in l){let T=lu.getFromId(e,_);if(T){var m=T.type==="category"||T.type==="multicategory"?T.r2c:T.d2c;T.type==="date"&&(m=PT.decodeDate(m)),v[T._id]=l[_].map(m)}}return v}function YB(e){return jB(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function WB(e){return jB(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function jB(e,t,r,i,a,s){var l=e/2,f=s;if(t==="pixel"){var h=a?PT.extractPathCoords(a,s?Wf.paramIsY:Wf.paramIsX):[r,i],v=DT.aggNums(Math.max,null,h),m=DT.aggNums(Math.min,null,h),_=m<0?Math.abs(m)+l:l,T=v>0?v+l:l;return{ppad:l,ppadplus:f?_:T,ppadminus:f?T:_}}else return{ppad:l}}function XB(e,t,r){var i=e._id.charAt(0)==="x"?"x":"y",a=e.type==="category"||e.type==="multicategory",s,l,f=0,h=0,v=a?e.r2c:e.d2c,m=t[i+"sizemode"]==="scaled";if(m?(s=t[i+"0"],l=t[i+"1"],a&&(f=t[i+"0shift"],h=t[i+"1shift"])):(s=t[i+"anchor"],l=t[i+"anchor"]),s!==void 0)return[v(s)+f,v(l)+h];if(t.path){var _=1/0,T=-1/0,M=t.path.match(Wf.segmentRE),C,E,L,I,O;for(e.type==="date"&&(v=PT.decodeDate(v)),C=0;C<M.length;C++)E=M[C],L=r[E.charAt(0)].drawn,L!==void 0&&(I=M[C].slice(1).match(Wf.paramRE),!(!I||I.length<L)&&(O=v(I[L]),O<_&&(_=O),O>T&&(T=O)));if(T>=_)return[_,T]}}});var eO=me((zxe,$B)=>{"use strict";var QB=nx();$B.exports={moduleType:"component",name:"shapes",layoutAttributes:LT(),supplyLayoutDefaults:UB(),supplyDrawNewShapeDefaults:GB(),includeBasePlot:Bg()("shapes"),calcAutorange:KB(),draw:QB.draw,drawOne:QB.drawOne}});var zT=me((Rxe,rO)=>{"use strict";var tO=eo(),yce=Ii().templatedArray,Ixe=qg();rO.exports=yce("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",tO.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",tO.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})});var iO=me((Fxe,aO)=>{"use strict";var gce=Bt(),IT=Xi(),_ce=Wl(),xce=zT(),bce="images";aO.exports=function(t,r){var i={name:bce,handleItemDefaults:wce};_ce(t,r,i)};function wce(e,t,r){function i(T,M){return gce.coerce(e,t,xce,T,M)}var a=i("source"),s=i("visible",!!a);if(!s)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var l={_fullLayout:r},f=["x","y"],h=0;h<2;h++){var v=f[h],m=IT.coerceRef(e,t,l,v,"paper",void 0);if(m!=="paper"){var _=IT.getFromId(l,m);_._imgIndices.push(t._index)}IT.coercePosition(t,l,i,m,v,0)}return t}});var lO=me((qxe,sO)=>{"use strict";var nO=ja(),Tce=xi(),_m=Xi(),oO=jn(),Ace=Oh();sO.exports=function(t){var r=t._fullLayout,i=[],a={},s=[],l,f;for(f=0;f<r.images.length;f++){var h=r.images[f];if(h.visible)if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){l=oO.ref2id(h.xref)+oO.ref2id(h.yref);var v=r._plots[l];if(!v){s.push(h);continue}v.mainplot&&(l=v.mainplot.id),a[l]||(a[l]=[]),a[l].push(h)}else h.layer==="above"?i.push(h):s.push(h)}var m={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function _(z){var N=nO.select(this);if(this._imgSrc!==z.source)if(N.attr("xmlns",Ace.svg),!t._context.staticPlot||z.source&&z.source.slice(0,5)==="data:")N.attr("xlink:href",z.source),this._imgSrc=z.source;else{var H=new Promise(function(V){var W=new Image;this.img=W,W.setAttribute("crossOrigin","anonymous"),W.onerror=J,W.onload=function(){var ee=document.createElement("canvas");ee.width=this.width,ee.height=this.height;var ie=ee.getContext("2d",{willReadFrequently:!0});ie.drawImage(this,0,0);var oe=ee.toDataURL("image/png");N.attr("xlink:href",oe),V()},N.on("error",J),W.src=z.source,this._imgSrc=z.source;function J(){N.remove(),V()}}.bind(this));t._promises.push(H)}}function T(z){var N=nO.select(this),H=_m.getFromId(t,z.xref),V=_m.getFromId(t,z.yref),W=_m.getRefType(z.xref)==="domain",J=_m.getRefType(z.yref)==="domain",ee=r._size,ie,oe;H!==void 0?ie=typeof z.xref=="string"&&W?H._length*z.sizex:Math.abs(H.l2p(z.sizex)-H.l2p(0)):ie=z.sizex*ee.w,V!==void 0?oe=typeof z.yref=="string"&&J?V._length*z.sizey:Math.abs(V.l2p(z.sizey)-V.l2p(0)):oe=z.sizey*ee.h;var fe=ie*m.x[z.xanchor].offset,le=oe*m.y[z.yanchor].offset,Te=m.x[z.xanchor].sizing+m.y[z.yanchor].sizing,Se,Me;switch(H!==void 0?Se=typeof z.xref=="string"&&W?H._length*z.x+H._offset:H.r2p(z.x)+H._offset:Se=z.x*ee.w+ee.l,Se+=fe,V!==void 0?Me=typeof z.yref=="string"&&J?V._length*(1-z.y)+V._offset:V.r2p(z.y)+V._offset:Me=ee.h-z.y*ee.h+ee.t,Me+=le,z.sizing){case"fill":Te+=" slice";break;case"stretch":Te="none";break}N.attr({x:Se,y:Me,width:ie,height:oe,preserveAspectRatio:Te,opacity:z.opacity});var Ae=H&&_m.getRefType(z.xref)!=="domain"?H._id:"",pe=V&&_m.getRefType(z.yref)!=="domain"?V._id:"",ke=Ae+pe;Tce.setClipUrl(N,ke?"clip"+r._uid+ke:null,t)}function M(z){return[z.xref,z.x,z.sizex,z.yref,z.y,z.sizey].join("_")}function C(z,N){return z._index-N._index}var E=r._imageLowerLayer.selectAll("image").data(s,M),L=r._imageUpperLayer.selectAll("image").data(i,M);E.enter().append("image"),L.enter().append("image"),E.exit().remove(),L.exit().remove(),E.each(function(z){_.bind(this)(z),T.bind(this)(z)}),L.each(function(z){_.bind(this)(z),T.bind(this)(z)}),E.sort(C),L.sort(C);var I=Object.keys(r._plots);for(f=0;f<I.length;f++){l=I[f];var O=r._plots[l];if(O.imagelayer){var q=O.imagelayer.selectAll("image").data(a[l]||[],M);q.enter().append("image"),q.exit().remove(),q.each(function(z){_.bind(this)(z),T.bind(this)(z)}),q.sort(C)}}}});var cO=me((Nxe,fO)=>{"use strict";var uO=Da(),Mce=f_();fO.exports=function(t,r,i,a){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(s||l){for(var f=t._fullLayout.images,h=r._id.charAt(0),v,m,_=0;_<f.length;_++)if(v=f[_],m="images["+_+"].",v[h+"ref"]===r._id){var T=v[h],M=v["size"+h],C=null,E=null;if(s){C=Mce(T,r.range);var L=M/Math.pow(10,C)/2;E=2*Math.log(L+Math.sqrt(1+L*L))/Math.LN10}else C=Math.pow(10,T),E=C*(Math.pow(10,M/2)-Math.pow(10,-M/2));uO(C)?uO(E)||(E=null):(C=null,E=null),a(m+h,C),a(m+"size"+h,E)}}}});var vO=me((Bxe,hO)=>{"use strict";hO.exports={moduleType:"component",name:"images",layoutAttributes:zT(),supplyLayoutDefaults:iO(),includeBasePlot:Bg()("images"),draw:lO(),convertCoords:cO()}});var mb=me((Oxe,dO)=>{"use strict";dO.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}});var RT=me((Uxe,mO)=>{"use strict";var Sce=qo(),kce=Sf(),Cce=yn().extendFlat,Ece=il().overrideAll,Lce=w_(),pO=Ii().templatedArray,Dce=pO("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});mO.exports=Ece(pO("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:Dce,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Cce(Lce({editType:"arraydraw"}),{}),font:Sce({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:kce.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")});var xO=me((Vxe,_O)=>{"use strict";var yb=Bt(),yO=Wl(),gO=RT(),Pce=mb(),zce=Pce.name,Ice=gO.buttons;_O.exports=function(t,r){var i={name:zce,handleItemDefaults:Rce};yO(t,r,i)};function Rce(e,t,r){function i(l,f){return yb.coerce(e,t,gO,l,f)}var a=yO(e,t,{name:"buttons",handleItemDefaults:Fce}),s=i("visible",a.length>0);s&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),yb.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),yb.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function Fce(e,t){function r(a,s){return yb.coerce(e,t,Ice,a,s)}var i=r("visible",e.method==="skip"||Array.isArray(e.args));i&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}});var TO=me((Hxe,wO)=>{"use strict";wO.exports=an;var Wu=ja(),bO=Oa(),xm=xi(),gb=Bt();function an(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}an.barWidth=2;an.barLength=20;an.barRadius=2;an.barPad=1;an.barColor="#808BA4";an.prototype.enable=function(t,r,i){var a=this.gd._fullLayout,s=a.width,l=a.height;this.position=t;var f=this.position.l,h=this.position.w,v=this.position.t,m=this.position.h,_=this.position.direction,T=_==="down",M=_==="left",C=_==="right",E=_==="up",L=h,I=m,O,q,z,N;!T&&!M&&!C&&!E&&(this.position.direction="down",T=!0);var H=T||E;H?(O=f,q=O+L,T?(z=v,N=Math.min(z+I,l),I=N-z):(N=v+I,z=Math.max(N-I,0),I=N-z)):(z=v,N=z+I,M?(q=f+L,O=Math.max(q-L,0),L=q-O):(O=f,q=Math.min(O+L,s),L=q-O)),this._box={l:O,t:z,w:L,h:I};var V=h>L,W=an.barLength+2*an.barPad,J=an.barWidth+2*an.barPad,ee=f,ie=v+m;ie+J>l&&(ie=l-J);var oe=this.container.selectAll("rect.scrollbar-horizontal").data(V?[0]:[]);oe.exit().on(".drag",null).remove(),oe.enter().append("rect").classed("scrollbar-horizontal",!0).call(bO.fill,an.barColor),V?(this.hbar=oe.attr({rx:an.barRadius,ry:an.barRadius,x:ee,y:ie,width:W,height:J}),this._hbarXMin=ee+W/2,this._hbarTranslateMax=L-W):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var fe=m>I,le=an.barWidth+2*an.barPad,Te=an.barLength+2*an.barPad,Se=f+h,Me=v;Se+le>s&&(Se=s-le);var Ae=this.container.selectAll("rect.scrollbar-vertical").data(fe?[0]:[]);Ae.exit().on(".drag",null).remove(),Ae.enter().append("rect").classed("scrollbar-vertical",!0).call(bO.fill,an.barColor),fe?(this.vbar=Ae.attr({rx:an.barRadius,ry:an.barRadius,x:Se,y:Me,width:le,height:Te}),this._vbarYMin=Me+Te/2,this._vbarTranslateMax=I-Te):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var pe=this.id,ke=O-.5,Ee=fe?q+le+.5:q+.5,Xe=z-.5,lt=V?N+J+.5:N+.5,it=a._topdefs.selectAll("#"+pe).data(V||fe?[0]:[]);if(it.exit().remove(),it.enter().append("clipPath").attr("id",pe).append("rect"),V||fe?(this._clipRect=it.select("rect").attr({x:Math.floor(ke),y:Math.floor(Xe),width:Math.ceil(Ee)-Math.floor(ke),height:Math.ceil(lt)-Math.floor(Xe)}),this.container.call(xm.setClipUrl,pe,this.gd),this.bg.attr({x:f,y:v,width:h,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(xm.setClipUrl,null),delete this._clipRect),V||fe){var _t=Wu.behavior.drag().on("dragstart",function(){Wu.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(_t);var Ye=Wu.behavior.drag().on("dragstart",function(){Wu.event.sourceEvent.preventDefault(),Wu.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));V&&this.hbar.on(".drag",null).call(Ye),fe&&this.vbar.on(".drag",null).call(Ye)}this.setTranslate(r,i)};an.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(xm.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};an.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=Wu.event.dx),this.vbar&&(r-=Wu.event.dy),this.setTranslate(t,r)};an.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=Wu.event.deltaY),this.vbar&&(r+=Wu.event.deltaY),this.setTranslate(t,r)};an.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var i=t+this._hbarXMin,a=i+this._hbarTranslateMax,s=gb.constrain(Wu.event.x,i,a),l=(s-i)/(a-i),f=this.position.w-this._box.w;t=l*f}if(this.vbar){var h=r+this._vbarYMin,v=h+this._vbarTranslateMax,m=gb.constrain(Wu.event.y,h,v),_=(m-h)/(v-h),T=this.position.h-this._box.h;r=_*T}this.setTranslate(t,r)};an.prototype.setTranslate=function(t,r){var i=this.position.w-this._box.w,a=this.position.h-this._box.h;if(t=gb.constrain(t||0,0,i),r=gb.constrain(r||0,0,a),this.translateX=t,this.translateY=r,this.container.call(xm.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var s=t/i;this.hbar.call(xm.setTranslate,t+s*this._hbarTranslateMax,r)}if(this.vbar){var l=r/a;this.vbar.call(xm.setTranslate,t,r+l*this._vbarTranslateMax)}}});var zO=me((Gxe,PO)=>{"use strict";var bm=ja(),s1=to(),l1=Oa(),wm=xi(),vl=Bt(),_b=ro(),qce=Ii().arrayEditor,MO=No().LINE_SPACING,ra=mb(),Nce=TO();PO.exports=function(t){var r=t._fullLayout,i=vl.filterVisible(r[ra.name]);function a(T){s1.autoMargin(t,LO(T))}var s=r._menulayer.selectAll("g."+ra.containerClassName).data(i.length>0?[0]:[]);if(s.enter().append("g").classed(ra.containerClassName,!0).style("cursor","pointer"),s.exit().each(function(){bm.select(this).selectAll("g."+ra.headerGroupClassName).each(a)}).remove(),i.length!==0){var l=s.selectAll("g."+ra.headerGroupClassName).data(i,Bce);l.enter().append("g").classed(ra.headerGroupClassName,!0);for(var f=vl.ensureSingle(s,"g",ra.dropdownButtonGroupClassName,function(T){T.style("pointer-events","all")}),h=0;h<i.length;h++){var v=i[h];Zce(t,v)}var m="updatemenus"+r._uid,_=new Nce(t,f,m);l.enter().size()&&(f.node().parentNode.appendChild(f.node()),f.call(qT)),l.exit().each(function(T){f.call(qT),a(T)}).remove(),l.each(function(T){var M=bm.select(this),C=T.type==="dropdown"?f:null;s1.manageCommandObserver(t,T,T.buttons,function(E){FT(t,T,T.buttons[E.index],M,C,_,E.index,!0)}),T.type==="dropdown"?(kO(t,M,f,_,T),SO(f,T)&&u1(t,M,f,_,T)):u1(t,M,null,null,T)})}};function Bce(e){return e._index}function Oce(e){return+e.attr(ra.menuIndexAttrName)==-1}function SO(e,t){return+e.attr(ra.menuIndexAttrName)===t._index}function FT(e,t,r,i,a,s,l,f){t.active=l,qce(e.layout,ra.name,t).applyUpdate("active",l),t.type==="buttons"?u1(e,i,null,null,t):t.type==="dropdown"&&(a.attr(ra.menuIndexAttrName,"-1"),kO(e,i,a,s,t),f||u1(e,i,a,s,t))}function kO(e,t,r,i,a){var s=vl.ensureSingle(t,"g",ra.headerClassName,function(T){T.style("pointer-events","all")}),l=a._dims,f=a.active,h=a.buttons[f]||ra.blankHeaderOpts,v={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},m={width:l.headerWidth,height:l.headerHeight};s.call(NT,a,h,e).call(DO,a,v,m);var _=vl.ensureSingle(t,"text",ra.headerArrowClassName,function(T){T.attr("text-anchor","end").call(wm.font,a.font).text(ra.arrowSymbol[a.direction])});_.attr({x:l.headerWidth-ra.arrowOffsetX+a.pad.l,y:l.headerHeight/2+ra.textOffsetY+a.pad.t}),s.on("click",function(){r.call(qT,String(SO(r,a)?-1:a._index)),u1(e,t,r,i,a)}),s.on("mouseover",function(){s.call(CO)}),s.on("mouseout",function(){s.call(EO,a)}),wm.setTranslate(t,l.lx,l.ly)}function u1(e,t,r,i,a){r||(r=t,r.attr("pointer-events","all"));var s=!Oce(r)||a.type==="buttons"?a.buttons:[],l=a.type==="dropdown"?ra.dropdownButtonClassName:ra.buttonClassName,f=r.selectAll("g."+l).data(vl.filterVisible(s)),h=f.enter().append("g").classed(l,!0),v=f.exit();a.type==="dropdown"?(h.attr("opacity","0").transition().attr("opacity","1"),v.transition().attr("opacity","0").remove()):v.remove();var m=0,_=0,T=a._dims,M=["up","down"].indexOf(a.direction)!==-1;a.type==="dropdown"&&(M?_=T.headerHeight+ra.gapButtonHeader:m=T.headerWidth+ra.gapButtonHeader),a.type==="dropdown"&&a.direction==="up"&&(_=-ra.gapButtonHeader+ra.gapButton-T.openHeight),a.type==="dropdown"&&a.direction==="left"&&(m=-ra.gapButtonHeader+ra.gapButton-T.openWidth);var C={x:T.lx+m+a.pad.l,y:T.ly+_+a.pad.t,yPad:ra.gapButton,xPad:ra.gapButton,index:0},E={l:C.x+a.borderwidth,t:C.y+a.borderwidth};f.each(function(L,I){var O=bm.select(this);O.call(NT,a,L,e).call(DO,a,C),O.on("click",function(){bm.event.defaultPrevented||(L.execute&&(L.args2&&a.active===I?(FT(e,a,L,t,r,i,-1),s1.executeAPICommand(e,L.method,L.args2)):(FT(e,a,L,t,r,i,I),s1.executeAPICommand(e,L.method,L.args))),e.emit("plotly_buttonclicked",{menu:a,button:L,active:a.active}))}),O.on("mouseover",function(){O.call(CO)}),O.on("mouseout",function(){O.call(EO,a),f.call(AO,a)})}),f.call(AO,a),M?(E.w=Math.max(T.openWidth,T.headerWidth),E.h=C.y-E.t):(E.w=C.x-E.l,E.h=Math.max(T.openHeight,T.headerHeight)),E.direction=a.direction,i&&(f.size()?Uce(e,t,r,i,a,E):Vce(i))}function Uce(e,t,r,i,a,s){var l=a.direction,f=l==="up"||l==="down",h=a._dims,v=a.active,m,_,T;if(f)for(_=0,T=0;T<v;T++)_+=h.heights[T]+ra.gapButton;else for(m=0,T=0;T<v;T++)m+=h.widths[T]+ra.gapButton;i.enable(s,m,_),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}function Vce(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function NT(e,t,r,i){e.call(Hce,t).call(Gce,t,r,i)}function Hce(e,t){var r=vl.ensureSingle(e,"rect",ra.itemRectClassName,function(i){i.attr({rx:ra.rx,ry:ra.ry,"shape-rendering":"crispEdges"})});r.call(l1.stroke,t.bordercolor).call(l1.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function Gce(e,t,r,i){var a=vl.ensureSingle(e,"text",ra.itemTextClassName,function(f){f.attr({"text-anchor":"start","data-notex":1})}),s=r.label,l=i._fullLayout._meta;l&&(s=vl.templateString(s,l)),a.call(wm.font,t.font).text(s).call(_b.convertToTspans,i)}function AO(e,t){var r=t.active;e.each(function(i,a){var s=bm.select(this);a===r&&t.showactive&&s.select("rect."+ra.itemRectClassName).call(l1.fill,ra.activeColor)})}function CO(e){e.select("rect."+ra.itemRectClassName).call(l1.fill,ra.hoverColor)}function EO(e,t){e.select("rect."+ra.itemRectClassName).call(l1.fill,t.bgcolor)}function Zce(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=wm.tester.selectAll("g."+ra.dropdownButtonClassName).data(vl.filterVisible(t.buttons));i.enter().append("g").classed(ra.dropdownButtonClassName,!0);var a=["up","down"].indexOf(t.direction)!==-1;i.each(function(m,_){var T=bm.select(this);T.call(NT,t,m,e);var M=T.select("."+ra.itemTextClassName),C=M.node()&&wm.bBox(M.node()).width,E=Math.max(C+ra.textPadX,ra.minWidth),L=t.font.size*MO,I=_b.lineCount(M),O=Math.max(L*I,ra.minHeight)+ra.textOffsetY;O=Math.ceil(O),E=Math.ceil(E),r.widths[_]=E,r.heights[_]=O,r.height1=Math.max(r.height1,O),r.width1=Math.max(r.width1,E),a?(r.totalWidth=Math.max(r.totalWidth,E),r.openWidth=r.totalWidth,r.totalHeight+=O+ra.gapButton,r.openHeight+=O+ra.gapButton):(r.totalWidth+=E+ra.gapButton,r.openWidth+=E+ra.gapButton,r.totalHeight=Math.max(r.totalHeight,O),r.openHeight=r.totalHeight)}),a?r.totalHeight-=ra.gapButton:r.totalWidth-=ra.gapButton,r.headerWidth=r.width1+ra.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(a?(r.width1+=ra.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=ra.arrowPadX),i.remove();var s=r.totalWidth+t.pad.l+t.pad.r,l=r.totalHeight+t.pad.t+t.pad.b,f=e._fullLayout._size;r.lx=f.l+f.w*t.x,r.ly=f.t+f.h*(1-t.y);var h="left";vl.isRightAnchor(t)&&(r.lx-=s,h="right"),vl.isCenterAnchor(t)&&(r.lx-=s/2,h="center");var v="top";vl.isBottomAnchor(t)&&(r.ly-=l,v="bottom"),vl.isMiddleAnchor(t)&&(r.ly-=l/2,v="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),s1.autoMargin(e,LO(t),{x:t.x,y:t.y,l:s*({right:1,center:.5}[h]||0),r:s*({left:1,center:.5}[h]||0),b:l*({top:1,middle:.5}[v]||0),t:l*({bottom:1,middle:.5}[v]||0)})}function LO(e){return ra.autoMarginIdRoot+e._index}function DO(e,t,r,i){i=i||{};var a=e.select("."+ra.itemRectClassName),s=e.select("."+ra.itemTextClassName),l=t.borderwidth,f=r.index,h=t._dims;wm.setTranslate(e,l+r.x,l+r.y);var v=["up","down"].indexOf(t.direction)!==-1,m=i.height||(v?h.heights[f]:h.height1);a.attr({x:0,y:0,width:i.width||(v?h.width1:h.widths[f]),height:m});var _=t.font.size*MO,T=_b.lineCount(s),M=(T-1)*_/2;_b.positionText(s,ra.textOffsetX,m/2-M+ra.textOffsetY),v?r.y+=h.heights[f]+r.yPad:r.x+=h.widths[f]+r.xPad,r.index++}function qT(e,t){e.attr(ra.menuIndexAttrName,t||"-1").selectAll("g."+ra.dropdownButtonClassName).remove()}});var RO=me((Zxe,IO)=>{"use strict";var Yce=mb();IO.exports={moduleType:"component",name:Yce.name,layoutAttributes:RT(),supplyLayoutDefaults:xO(),draw:zO()}});var f1=me((Yxe,FO)=>{"use strict";FO.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}});var BT=me((Wxe,BO)=>{"use strict";var qO=qo(),Wce=w_(),Xce=yn().extendDeepAll,jce=il().overrideAll,Jce=By(),NO=Ii().templatedArray,Jd=f1(),Kce=NO("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});BO.exports=jce(NO("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:Kce,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:Xce(Wce({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:Jce.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:qO({})},font:qO({}),activebgcolor:{valType:"color",dflt:Jd.gripBgActiveColor},bgcolor:{valType:"color",dflt:Jd.railBgColor},bordercolor:{valType:"color",dflt:Jd.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Jd.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Jd.tickLength},tickcolor:{valType:"color",dflt:Jd.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Jd.minorTickLength}}),"arraydraw","from-root")});var HO=me((Xxe,VO)=>{"use strict";var Tm=Bt(),OO=Wl(),UO=BT(),Qce=f1(),$ce=Qce.name,ehe=UO.steps;VO.exports=function(t,r){OO(t,r,{name:$ce,handleItemDefaults:the})};function the(e,t,r){function i(_,T){return Tm.coerce(e,t,UO,_,T)}for(var a=OO(e,t,{name:"steps",handleItemDefaults:rhe}),s=0,l=0;l<a.length;l++)a[l].visible&&s++;var f;if(s<2?f=t.visible=!1:f=i("visible"),!!f){t._stepCount=s;var h=t._visibleSteps=Tm.filterVisible(a),v=i("active");(a[v]||{}).visible||(t.active=h[0]._index),i("x"),i("y"),Tm.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),Tm.coerceFont(i,"font",r.font);var m=i("currentvalue.visible");m&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),Tm.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function rhe(e,t){function r(s,l){return Tm.coerce(e,t,ehe,s,l)}var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=t.visible=!1:i=r("visible"),i){r("method"),r("args");var a=r("label","step-"+t._index);r("value",a),r("execute")}}});var $O=me((jxe,QO)=>{"use strict";var Xu=ja(),xb=to(),nv=Oa(),ju=xi(),dl=Bt(),ahe=dl.strTranslate,c1=ro(),ihe=Ii().arrayEditor,xa=f1(),VT=No(),YO=VT.LINE_SPACING,OT=VT.FROM_TL,UT=VT.FROM_BR;QO.exports=function(t){var r=t._context.staticPlot,i=t._fullLayout,a=nhe(i,t),s=i._infolayer.selectAll("g."+xa.containerClassName).data(a.length>0?[0]:[]);s.enter().append("g").classed(xa.containerClassName,!0).style("cursor",r?null:"ew-resize");function l(m){m._commandObserver&&(m._commandObserver.remove(),delete m._commandObserver),xb.autoMargin(t,WO(m))}if(s.exit().each(function(){Xu.select(this).selectAll("g."+xa.groupClassName).each(l)}).remove(),a.length!==0){var f=s.selectAll("g."+xa.groupClassName).data(a,ohe);f.enter().append("g").classed(xa.groupClassName,!0),f.exit().each(l).remove();for(var h=0;h<a.length;h++){var v=a[h];she(t,v)}f.each(function(m){var _=Xu.select(this);hhe(m),xb.manageCommandObserver(t,m,m._visibleSteps,function(T){var M=_.data()[0];M.active!==T.index&&(M._dragging||jO(t,_,M,T.index,!1,!0))}),lhe(t,Xu.select(this),m)})}};function WO(e){return xa.autoMarginIdRoot+e._index}function nhe(e,t){for(var r=e[xa.name],i=[],a=0;a<r.length;a++){var s=r[a];s.visible&&(s._gd=t,i.push(s))}return i}function ohe(e){return e._index}function she(e,t){var r=ju.tester.selectAll("g."+xa.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(xa.labelGroupClass,!0);var i=0,a=0;r.each(function(C){var E=Xu.select(this),L=XO(E,{step:C},t),I=L.node();if(I){var O=ju.bBox(I);a=Math.max(a,O.height),i=Math.max(i,O.width)}}),r.remove();var s=t._dims={};s.inputAreaWidth=Math.max(xa.railWidth,xa.gripHeight);var l=e._fullLayout._size;s.lx=l.l+l.w*t.x,s.ly=l.t+l.h*(1-t.y),t.lenmode==="fraction"?s.outerLength=Math.round(l.w*t.len):s.outerLength=t.len,s.inputAreaStart=0,s.inputAreaLength=Math.round(s.outerLength-t.pad.l-t.pad.r);var f=s.inputAreaLength-2*xa.stepInset,h=f/(t._stepCount-1),v=i+xa.labelPadding;if(s.labelStride=Math.max(1,Math.ceil(v/h)),s.labelHeight=a,s.currentValueMaxWidth=0,s.currentValueHeight=0,s.currentValueTotalHeight=0,s.currentValueMaxLines=1,t.currentvalue.visible){var m=ju.tester.append("g");r.each(function(C){var E=bb(m,t,C.label),L=E.node()&&ju.bBox(E.node())||{width:0,height:0},I=c1.lineCount(E);s.currentValueMaxWidth=Math.max(s.currentValueMaxWidth,Math.ceil(L.width)),s.currentValueHeight=Math.max(s.currentValueHeight,Math.ceil(L.height)),s.currentValueMaxLines=Math.max(s.currentValueMaxLines,I)}),s.currentValueTotalHeight=s.currentValueHeight+t.currentvalue.offset,m.remove()}s.height=s.currentValueTotalHeight+xa.tickOffset+t.ticklen+xa.labelOffset+s.labelHeight+t.pad.t+t.pad.b;var _="left";dl.isRightAnchor(t)&&(s.lx-=s.outerLength,_="right"),dl.isCenterAnchor(t)&&(s.lx-=s.outerLength/2,_="center");var T="top";dl.isBottomAnchor(t)&&(s.ly-=s.height,T="bottom"),dl.isMiddleAnchor(t)&&(s.ly-=s.height/2,T="middle"),s.outerLength=Math.ceil(s.outerLength),s.height=Math.ceil(s.height),s.lx=Math.round(s.lx),s.ly=Math.round(s.ly);var M={y:t.y,b:s.height*UT[T],t:s.height*OT[T]};t.lenmode==="fraction"?(M.l=0,M.xl=t.x-t.len*OT[_],M.r=0,M.xr=t.x+t.len*UT[_]):(M.x=t.x,M.l=s.outerLength*OT[_],M.r=s.outerLength*UT[_]),xb.autoMargin(e,WO(t),M)}function lhe(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(bb,r).call(dhe,r).call(fhe,r).call(che,r).call(vhe,e,r).call(uhe,e,r);var i=r._dims;ju.setTranslate(t,i.lx+r.pad.l,i.ly+r.pad.t),t.call(KO,r,!1),t.call(bb,r)}function bb(e,t,r){if(t.currentvalue.visible){var i=t._dims,a,s;switch(t.currentvalue.xanchor){case"right":a=i.inputAreaLength-xa.currentValueInset-i.currentValueMaxWidth,s="left";break;case"center":a=i.inputAreaLength*.5,s="middle";break;default:a=xa.currentValueInset,s="left"}var l=dl.ensureSingle(e,"text",xa.labelClass,function(T){T.attr({"text-anchor":s,"data-notex":1})}),f=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")f+=r;else{var h=t.steps[t.active].label,v=t._gd._fullLayout._meta;v&&(h=dl.templateString(h,v)),f+=h}t.currentvalue.suffix&&(f+=t.currentvalue.suffix),l.call(ju.font,t.currentvalue.font).text(f).call(c1.convertToTspans,t._gd);var m=c1.lineCount(l),_=(i.currentValueMaxLines+1-m)*t.currentvalue.font.size*YO;return c1.positionText(l,a,_),l}}function uhe(e,t,r){var i=dl.ensureSingle(e,"rect",xa.gripRectClass,function(a){a.call(JO,t,e,r).style("pointer-events","all")});i.attr({width:xa.gripWidth,height:xa.gripHeight,rx:xa.gripRadius,ry:xa.gripRadius}).call(nv.stroke,r.bordercolor).call(nv.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function XO(e,t,r){var i=dl.ensureSingle(e,"text",xa.labelClass,function(l){l.attr({"text-anchor":"middle","data-notex":1})}),a=t.step.label,s=r._gd._fullLayout._meta;return s&&(a=dl.templateString(a,s)),i.call(ju.font,r.font).text(a).call(c1.convertToTspans,r._gd),i}function fhe(e,t){var r=dl.ensureSingle(e,"g",xa.labelsClass),i=t._dims,a=r.selectAll("g."+xa.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(xa.labelGroupClass,!0),a.exit().remove(),a.each(function(s){var l=Xu.select(this);l.call(XO,s,t),ju.setTranslate(l,HT(t,s.fraction),xa.tickOffset+t.ticklen+t.font.size*YO+xa.labelOffset+i.currentValueTotalHeight)})}function GO(e,t,r,i,a){var s=Math.round(i*(r._stepCount-1)),l=r._visibleSteps[s]._index;l!==r.active&&jO(e,t,r,l,!0,a)}function jO(e,t,r,i,a,s){var l=r.active;r.active=i,ihe(e.layout,xa.name,r).applyUpdate("active",i);var f=r.steps[r.active];t.call(KO,r,s),t.call(bb,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:a,previousActive:l}),f&&f.method&&a&&(t._nextMethod?(t._nextMethod.step=f,t._nextMethod.doCallback=a,t._nextMethod.doTransition=s):(t._nextMethod={step:f,doCallback:a,doTransition:s},t._nextMethodRaf=window.requestAnimationFrame(function(){var h=t._nextMethod.step;h.method&&(h.execute&&xb.executeAPICommand(e,h.method,h.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function JO(e,t,r){if(t._context.staticPlot)return;var i=r.node(),a=Xu.select(t);function s(){return r.data()[0]}function l(){var f=s();t.emit("plotly_sliderstart",{slider:f});var h=r.select("."+xa.gripRectClass);Xu.event.stopPropagation(),Xu.event.preventDefault(),h.call(nv.fill,f.activebgcolor);var v=ZO(f,Xu.mouse(i)[0]);GO(t,r,f,v,!0),f._dragging=!0;function m(){var T=s(),M=ZO(T,Xu.mouse(i)[0]);GO(t,r,T,M,!1)}a.on("mousemove",m),a.on("touchmove",m);function _(){var T=s();T._dragging=!1,h.call(nv.fill,T.bgcolor),a.on("mouseup",null),a.on("mousemove",null),a.on("touchend",null),a.on("touchmove",null),t.emit("plotly_sliderend",{slider:T,step:T.steps[T.active]})}a.on("mouseup",_),a.on("touchend",_)}e.on("mousedown",l),e.on("touchstart",l)}function che(e,t){var r=e.selectAll("rect."+xa.tickRectClass).data(t._visibleSteps),i=t._dims;r.enter().append("rect").classed(xa.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(a,s){var l=s%i.labelStride===0,f=Xu.select(this);f.attr({height:l?t.ticklen:t.minorticklen}).call(nv.fill,t.tickcolor),ju.setTranslate(f,HT(t,s/(t._stepCount-1))-.5*t.tickwidth,(l?xa.tickOffset:xa.minorTickOffset)+i.currentValueTotalHeight)})}function hhe(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,i=0;i<r;i+=t.labelStride)t.labelSteps.push({fraction:i/(r-1),step:e._visibleSteps[i]})}function KO(e,t,r){for(var i=e.select("rect."+xa.gripRectClass),a=0,s=0;s<t._stepCount;s++)if(t._visibleSteps[s]._index===t.active){a=s;break}var l=HT(t,a/(t._stepCount-1));if(!t._invokingCommand){var f=i;r&&t.transition.duration>0&&(f=f.transition().duration(t.transition.duration).ease(t.transition.easing)),f.attr("transform",ahe(l-xa.gripWidth*.5,t._dims.currentValueTotalHeight))}}function HT(e,t){var r=e._dims;return r.inputAreaStart+xa.stepInset+(r.inputAreaLength-2*xa.stepInset)*Math.min(1,Math.max(0,t))}function ZO(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-xa.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*xa.stepInset-2*r.inputAreaStart)))}function vhe(e,t,r){var i=r._dims,a=dl.ensureSingle(e,"rect",xa.railTouchRectClass,function(s){s.call(JO,t,e,r).style("pointer-events","all")});a.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,xa.tickOffset+r.ticklen+i.labelHeight)}).call(nv.fill,r.bgcolor).attr("opacity",0),ju.setTranslate(a,0,i.currentValueTotalHeight)}function dhe(e,t){var r=t._dims,i=r.inputAreaLength-xa.railInset*2,a=dl.ensureSingle(e,"rect",xa.railRectClass);a.attr({width:i,height:xa.railWidth,rx:xa.railRadius,ry:xa.railRadius,"shape-rendering":"crispEdges"}).call(nv.stroke,t.bordercolor).call(nv.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),ju.setTranslate(a,xa.railInset,(r.inputAreaWidth-xa.railWidth)*.5+r.currentValueTotalHeight)}});var tU=me((Jxe,eU)=>{"use strict";var phe=f1();eU.exports={moduleType:"component",name:phe.name,layoutAttributes:BT(),supplyLayoutDefaults:HO(),draw:$O()}});var wb=me((Kxe,aU)=>{"use strict";var rU=Sf();aU.exports={bgcolor:{valType:"color",dflt:rU.background,editType:"plot"},bordercolor:{valType:"color",dflt:rU.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}});var GT=me((Qxe,iU)=>{"use strict";iU.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}});var Tb=me(($xe,nU)=>{"use strict";nU.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}});var lU=me(Mb=>{"use strict";var mhe=jn(),yhe=ro(),oU=Tb(),ghe=No().LINE_SPACING,Ab=oU.name;function sU(e){var t=e&&e[Ab];return t&&t.visible}Mb.isVisible=sU;Mb.makeData=function(e){for(var t=mhe.list({_fullLayout:e},"x",!0),r=e.margin,i=[],a=0;a<t.length;a++){var s=t[a];if(sU(s)){i.push(s);var l=s[Ab];l._id=Ab+s._id,l._height=(e.height-r.b-r.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}e._rangeSliderData=i};Mb.autoMarginOpts=function(e,t){var r=e._fullLayout,i=t[Ab],a=t._id.charAt(0),s=0,l=0;if(t.side==="bottom"&&(s=t._depth,t.title.text!==r._dfltTitle[a])){l=1.5*t.title.font.size+10+i._offsetShift;var f=(t.title.text.match(yhe.BR_TAG_ALL)||[]).length;l+=f*t.title.font.size*ghe}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+s+Math.max(r.margin.b,l),pad:oU.extraPad+i._offsetShift*2}}});var hU=me((tbe,cU)=>{"use strict";var Sb=Bt(),uU=Ii(),fU=jn(),_he=wb(),xhe=GT();cU.exports=function(t,r,i){var a=t[i],s=r[i];if(!(a.rangeslider||r._requestRangeslider[s._id]))return;Sb.isPlainObject(a.rangeslider)||(a.rangeslider={});var l=a.rangeslider,f=uU.newContainer(s,"rangeslider");function h(N,H){return Sb.coerce(l,f,_he,N,H)}var v,m;function _(N,H){return Sb.coerce(v,m,xhe,N,H)}var T=h("visible");if(T){h("bgcolor",r.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!s.isValidRange(l.range)),h("range");var M=r._subplots;if(M)for(var C=M.cartesian.filter(function(N){return N.slice(0,Math.max(0,N.indexOf("y")))===fU.name2id(i)}).map(function(N){return N.slice(N.indexOf("y"),N.length)}),E=Sb.simpleMap(C,fU.id2name),L=0;L<E.length;L++){var I=E[L];v=l[I]||{},m=uU.newContainer(f,I,"yaxis");var O=r[I],q;v.range&&O.isValidRange(v.range)&&(q="fixed");var z=_("rangemode",q);z!=="match"&&_("range",O.range.slice())}f._input=l}}});var dU=me((rbe,vU)=>{"use strict";var bhe=jn().list,whe=ag().getAutoRange,The=Tb();vU.exports=function(t){for(var r=bhe(t,"x",!0),i=0;i<r.length;i++){var a=r[i],s=a[The.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=whe(t,a))}}});var gU=me((abe,yU)=>{"use strict";var kb=ja(),Ahe=sa(),Mhe=to(),_n=Bt(),Cb=_n.strTranslate,mU=xi(),ov=Oa(),She=tg(),khe=yT(),ZT=jn(),Che=jl(),Ehe=Wh(),Ia=Tb();yU.exports=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,i=0;i<r.length;i++){var a=r[i][Ia.name];a._clipId=a._id+"-"+t._uid}function s(f){return f._name}var l=t._infolayer.selectAll("g."+Ia.containerClassName).data(r,s);l.exit().each(function(f){var h=f[Ia.name];t._topdefs.select("#"+h._clipId).remove()}).remove(),r.length!==0&&(l.enter().append("g").classed(Ia.containerClassName,!0).attr("pointer-events","all"),l.each(function(f){var h=kb.select(this),v=f[Ia.name],m=t[ZT.id2name(f.anchor)],_=v[ZT.id2name(f.anchor)];if(v.range){var T=_n.simpleMap(v.range,f.r2l),M=_n.simpleMap(f.range,f.r2l),C;M[0]<M[1]?C=[Math.min(T[0],M[0]),Math.max(T[1],M[1])]:C=[Math.max(T[0],M[0]),Math.min(T[1],M[1])],v.range=v._input.range=_n.simpleMap(C,f.l2r)}f.cleanRange("rangeslider.range");var E=t._size,L=f.domain;v._width=E.w*(L[1]-L[0]);var I=Math.round(E.l+E.w*L[0]),O=Math.round(E.t+E.h*(1-f._counterDomainMin)+(f.side==="bottom"?f._depth:0)+v._offsetShift+Ia.extraPad);h.attr("transform",Cb(I,O)),v._rl=_n.simpleMap(v.range,f.r2l);var q=v._rl[0],z=v._rl[1],N=z-q;if(v.p2d=function(Te){return Te/v._width*N+q},v.d2p=function(Te){return(Te-q)/N*v._width},f.rangebreaks){var H=f.locateBreaks(q,z);if(H.length){var V,W,J=0;for(V=0;V<H.length;V++)W=H[V],J+=W.max-W.min;var ee=v._width/(z-q-J),ie=[-ee*q];for(V=0;V<H.length;V++)W=H[V],ie.push(ie[ie.length-1]-ee*(W.max-W.min));for(v.d2p=function(Te){for(var Se=ie[0],Me=0;Me<H.length;Me++){var Ae=H[Me];if(Te>=Ae.max)Se=ie[Me+1];else if(Te<Ae.min)break}return Se+ee*Te},V=0;V<H.length;V++)W=H[V],W.pmin=v.d2p(W.min),W.pmax=v.d2p(W.max);v.p2d=function(Te){for(var Se=ie[0],Me=0;Me<H.length;Me++){var Ae=H[Me];if(Te>=Ae.pmax)Se=ie[Me+1];else if(Te<Ae.pmin)break}return(Te-Se)/ee}}}if(_.rangemode!=="match"){var oe=m.r2l(_.range[0]),fe=m.r2l(_.range[1]),le=fe-oe;v.d2pOppAxis=function(Te){return(Te-oe)/le*v._height}}h.call(zhe,e,f,v).call(Ihe,e,f,v).call(Rhe,e,f,v).call(qhe,e,f,v,_).call(Nhe,e,f,v).call(Bhe,e,f,v),Lhe(h,e,f,v),Phe(h,e,f,v,m,_),f.side==="bottom"&&She.draw(e,f._id+"title",{propContainer:f,propName:f._name+".title.text",placeholder:t._dfltTitle.x,attributes:{x:f._offset+f._length/2,y:O+v._height+v._offsetShift+10+1.5*f.title.font.size,"text-anchor":"middle"}})}))};function pU(e){return typeof e.clientX=="number"?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function Lhe(e,t,r,i){if(t._context.staticPlot)return;var a=e.select("rect."+Ia.slideBoxClassName).node(),s=e.select("rect."+Ia.grabAreaMinClassName).node(),l=e.select("rect."+Ia.grabAreaMaxClassName).node();function f(){var h=kb.event,v=h.target,m=pU(h),_=m-e.node().getBoundingClientRect().left,T=i.d2p(r._rl[0]),M=i.d2p(r._rl[1]),C=Che.coverSlip();this.addEventListener("touchmove",E),this.addEventListener("touchend",L),C.addEventListener("mousemove",E),C.addEventListener("mouseup",L);function E(I){var O=pU(I),q=+O-m,z,N,H;switch(v){case a:if(H="ew-resize",T+q>r._length||M+q<0)return;z=T+q,N=M+q;break;case s:if(H="col-resize",T+q>r._length)return;z=T+q,N=M;break;case l:if(H="col-resize",M+q<0)return;z=T,N=M+q;break;default:H="ew-resize",z=_,N=_+q;break}if(N<z){var V=N;N=z,z=V}i._pixelMin=z,i._pixelMax=N,Ehe(kb.select(C),H),Dhe(e,t,r,i)}function L(){C.removeEventListener("mousemove",E),C.removeEventListener("mouseup",L),this.removeEventListener("touchmove",E),this.removeEventListener("touchend",L),_n.removeElement(C)}}e.on("mousedown",f),e.on("touchstart",f)}function Dhe(e,t,r,i){function a(f){return r.l2r(_n.constrain(f,i._rl[0],i._rl[1]))}var s=a(i.p2d(i._pixelMin)),l=a(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){Ahe.call("_guiRelayout",t,r._name+".range",[s,l])})}function Phe(e,t,r,i,a,s){var l=Ia.handleWidth/2;function f(I){return _n.constrain(I,0,i._width)}function h(I){return _n.constrain(I,0,i._height)}function v(I){return _n.constrain(I,-l,i._width+l)}var m=f(i.d2p(r._rl[0])),_=f(i.d2p(r._rl[1]));if(e.select("rect."+Ia.slideBoxClassName).attr("x",m).attr("width",_-m),e.select("rect."+Ia.maskMinClassName).attr("width",m),e.select("rect."+Ia.maskMaxClassName).attr("x",_).attr("width",i._width-_),s.rangemode!=="match"){var T=i._height-h(i.d2pOppAxis(a._rl[1])),M=i._height-h(i.d2pOppAxis(a._rl[0]));e.select("rect."+Ia.maskMinOppAxisClassName).attr("x",m).attr("height",T).attr("width",_-m),e.select("rect."+Ia.maskMaxOppAxisClassName).attr("x",m).attr("y",M).attr("height",i._height-M).attr("width",_-m),e.select("rect."+Ia.slideBoxClassName).attr("y",T).attr("height",M-T)}var C=.5,E=Math.round(v(m-l))-C,L=Math.round(v(_-l))+C;e.select("g."+Ia.grabberMinClassName).attr("transform",Cb(E,C)),e.select("g."+Ia.grabberMaxClassName).attr("transform",Cb(L,C))}function zhe(e,t,r,i){var a=_n.ensureSingle(e,"rect",Ia.bgClassName,function(h){h.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),s=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,l=-i._offsetShift,f=mU.crispRound(t,i.borderwidth);a.attr({width:i._width+s,height:i._height+s,transform:Cb(l,l),"stroke-width":f}).call(ov.stroke,i.bordercolor).call(ov.fill,i.bgcolor)}function Ihe(e,t,r,i){var a=t._fullLayout,s=_n.ensureSingleById(a._topdefs,"clipPath",i._clipId,function(l){l.append("rect").attr({x:0,y:0})});s.select("rect").attr({width:i._width,height:i._height})}function Rhe(e,t,r,i){var a=t.calcdata,s=e.selectAll("g."+Ia.rangePlotClassName).data(r._subplotsWith,_n.identity);s.enter().append("g").attr("class",function(f){return Ia.rangePlotClassName+" "+f}).call(mU.setClipUrl,i._clipId,t),s.order(),s.exit().remove();var l;s.each(function(f,h){var v=kb.select(this),m=h===0,_=ZT.getFromId(t,f,"y"),T=_._name,M=i[T],C={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(C.layout.xaxis.rangebreaks=r.rangebreaks),C.layout[T]={type:_.type,domain:[0,1],range:M.rangemode!=="match"?M.range.slice():_.range.slice(),calendar:_.calendar},_.rangebreaks&&(C.layout[T].rangebreaks=_.rangebreaks),Mhe.supplyDefaults(C);var E=C._fullLayout.xaxis,L=C._fullLayout[T];E.clearCalc(),E.setScale(),L.clearCalc(),L.setScale();var I={id:f,plotgroup:v,xaxis:E,yaxis:L,isRangePlot:!0};m?l=I:(I.mainplot="xy",I.mainplotinfo=l),khe.rangePlot(t,I,Fhe(a,f))})}function Fhe(e,t){for(var r=[],i=0;i<e.length;i++){var a=e[i],s=a[0].trace;s.xaxis+s.yaxis===t&&r.push(a)}return r}function qhe(e,t,r,i,a){var s=_n.ensureSingle(e,"rect",Ia.maskMinClassName,function(v){v.attr({x:0,y:0,"shape-rendering":"crispEdges"})});s.attr("height",i._height).call(ov.fill,Ia.maskColor);var l=_n.ensureSingle(e,"rect",Ia.maskMaxClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});if(l.attr("height",i._height).call(ov.fill,Ia.maskColor),a.rangemode!=="match"){var f=_n.ensureSingle(e,"rect",Ia.maskMinOppAxisClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});f.attr("width",i._width).call(ov.fill,Ia.maskOppAxisColor);var h=_n.ensureSingle(e,"rect",Ia.maskMaxOppAxisClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});h.attr("width",i._width).style("border-top",Ia.maskOppBorder).call(ov.fill,Ia.maskOppAxisColor)}}function Nhe(e,t,r,i){if(!t._context.staticPlot){var a=_n.ensureSingle(e,"rect",Ia.slideBoxClassName,function(s){s.attr({y:0,cursor:Ia.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:i._height,fill:Ia.slideBoxFill})}}function Bhe(e,t,r,i){var a=_n.ensureSingle(e,"g",Ia.grabberMinClassName),s=_n.ensureSingle(e,"g",Ia.grabberMaxClassName),l={x:0,width:Ia.handleWidth,rx:Ia.handleRadius,fill:ov.background,stroke:ov.defaultLine,"stroke-width":Ia.handleStrokeWidth,"shape-rendering":"crispEdges"},f={y:Math.round(i._height/4),height:Math.round(i._height/2)},h=_n.ensureSingle(a,"rect",Ia.handleMinClassName,function(M){M.attr(l)});h.attr(f);var v=_n.ensureSingle(s,"rect",Ia.handleMaxClassName,function(M){M.attr(l)});v.attr(f);var m={width:Ia.grabAreaWidth,x:0,y:0,fill:Ia.grabAreaFill,cursor:t._context.staticPlot?void 0:Ia.grabAreaCursor},_=_n.ensureSingle(a,"rect",Ia.grabAreaMinClassName,function(M){M.attr(m)});_.attr("height",i._height);var T=_n.ensureSingle(s,"rect",Ia.grabAreaMaxClassName,function(M){M.attr(m)});T.attr("height",i._height)}});var xU=me((ibe,_U)=>{"use strict";var Ohe=Bt(),Uhe=wb(),Vhe=GT(),YT=lU();_U.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:Ohe.extendFlat({},Uhe,{yaxis:Vhe})}}},layoutAttributes:wb(),handleDefaults:hU(),calcAutorange:dU(),draw:gU(),isVisible:YT.isVisible,makeData:YT.makeData,autoMarginOpts:YT.autoMarginOpts}});var Eb=me((nbe,wU)=>{"use strict";var Hhe=qo(),bU=Sf(),Ghe=Ii().templatedArray,Zhe=Ghe("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});wU.exports={visible:{valType:"boolean",editType:"plot"},buttons:Zhe,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:Hhe({editType:"plot"}),bgcolor:{valType:"color",dflt:bU.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:bU.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}});var WT=me((obe,TU)=>{"use strict";TU.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}});var SU=me((sbe,MU)=>{"use strict";var Lb=Bt(),Yhe=Oa(),Whe=Ii(),Xhe=Wl(),AU=Eb(),XT=WT();MU.exports=function(t,r,i,a,s){var l=t.rangeselector||{},f=Whe.newContainer(r,"rangeselector");function h(M,C){return Lb.coerce(l,f,AU,M,C)}var v=Xhe(l,f,{name:"buttons",handleItemDefaults:jhe,calendar:s}),m=h("visible",v.length>0);if(m){var _=Jhe(r,i,a);h("x",_[0]),h("y",_[1]),Lb.noneOrAll(t,r,["x","y"]),h("xanchor"),h("yanchor"),Lb.coerceFont(h,"font",i.font);var T=h("bgcolor");h("activecolor",Yhe.contrast(T,XT.lightAmount,XT.darkAmount)),h("bordercolor"),h("borderwidth")}};function jhe(e,t,r,i){var a=i.calendar;function s(h,v){return Lb.coerce(e,t,AU.buttons,h,v)}var l=s("visible");if(l){var f=s("step");f!=="all"&&(a&&a!=="gregorian"&&(f==="month"||f==="year")?t.stepmode="backward":s("stepmode"),s("count")),s("label")}}function Jhe(e,t,r){for(var i=r.filter(function(f){return t[f].anchor===e._id}),a=0,s=0;s<i.length;s++){var l=t[i[s]].domain;l&&(a=Math.max(l[1],a))}return[e.domain[0],a+XT.yPad]}});var CU=me((lbe,kU)=>{"use strict";var Khe=Z3(),Qhe=Bt().titleCase;kU.exports=function(t,r){var i=t._name,a={};if(r.step==="all")a[i+".autorange"]=!0;else{var s=$he(t,r);a[i+".range[0]"]=s[0],a[i+".range[1]"]=s[1]}return a};function $he(e,t){var r=e.range,i=new Date(e.r2l(r[1])),a=t.step,s=Khe["utc"+Qhe(a)],l=t.count,f;switch(t.stepmode){case"backward":f=e.l2r(+s.offset(i,-l));break;case"todate":var h=s.offset(i,-l);f=e.l2r(+s.ceil(h));break}var v=r[1];return[f,v]}});var FU=me((ube,RU)=>{"use strict";var Pb=ja(),eve=sa(),tve=to(),EU=Oa(),IU=xi(),qc=Bt(),LU=qc.strTranslate,Db=ro(),rve=jn(),KT=No(),DU=KT.LINE_SPACING,PU=KT.FROM_TL,zU=KT.FROM_BR,JT=WT(),ave=CU();RU.exports=function(t){var r=t._fullLayout,i=r._infolayer.selectAll(".rangeselector").data(ive(t),nve);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(a){var s=Pb.select(this),l=a,f=l.rangeselector,h=s.selectAll("g.button").data(qc.filterVisible(f.buttons));h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(v){var m=Pb.select(this),_=ave(l,v);v._isActive=ove(l,v,_),m.call(jT,f,v),m.call(lve,f,v,t),m.on("click",function(){t._dragged||eve.call("_guiRelayout",t,_)}),m.on("mouseover",function(){v._isHovered=!0,m.call(jT,f,v)}),m.on("mouseout",function(){v._isHovered=!1,m.call(jT,f,v)})}),fve(t,h,f,l._name,s)})};function ive(e){for(var t=rve.list(e,"x",!0),r=[],i=0;i<t.length;i++){var a=t[i];a.rangeselector&&a.rangeselector.visible&&r.push(a)}return r}function nve(e){return e._id}function ove(e,t,r){if(t.step==="all")return e.autorange===!0;var i=Object.keys(r);return e.range[0]===r[i[0]]&&e.range[1]===r[i[1]]}function jT(e,t,r){var i=qc.ensureSingle(e,"rect","selector-rect",function(a){a.attr("shape-rendering","crispEdges")});i.attr({rx:JT.rx,ry:JT.ry}),i.call(EU.stroke,t.bordercolor).call(EU.fill,sve(t,r)).style("stroke-width",t.borderwidth+"px")}function sve(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function lve(e,t,r,i){function a(l){Db.convertToTspans(l,i)}var s=qc.ensureSingle(e,"text","selector-text",function(l){l.attr("text-anchor","middle")});s.call(IU.font,t.font).text(uve(r,i._fullLayout._meta)).call(a)}function uve(e,t){return e.label?t?qc.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function fve(e,t,r,i,a){var s=0,l=0,f=r.borderwidth;t.each(function(){var M=Pb.select(this),C=M.select(".selector-text"),E=r.font.size*DU,L=Math.max(E*Db.lineCount(C),16)+3;l=Math.max(l,L)}),t.each(function(){var M=Pb.select(this),C=M.select(".selector-rect"),E=M.select(".selector-text"),L=E.node()&&IU.bBox(E.node()).width,I=r.font.size*DU,O=Db.lineCount(E),q=Math.max(L+10,JT.minButtonWidth);M.attr("transform",LU(f+s,f)),C.attr({x:0,y:0,width:q,height:l}),Db.positionText(E,q/2,l/2-(O-1)*I/2+3),s+=q+5});var h=e._fullLayout._size,v=h.l+h.w*r.x,m=h.t+h.h*(1-r.y),_="left";qc.isRightAnchor(r)&&(v-=s,_="right"),qc.isCenterAnchor(r)&&(v-=s/2,_="center");var T="top";qc.isBottomAnchor(r)&&(m-=l,T="bottom"),qc.isMiddleAnchor(r)&&(m-=l/2,T="middle"),s=Math.ceil(s),l=Math.ceil(l),v=Math.round(v),m=Math.round(m),tve.autoMargin(e,i+"-range-selector",{x:r.x,y:r.y,l:s*PU[_],r:s*zU[_],b:l*zU[T],t:l*PU[T]}),a.attr("transform",LU(v,m))}});var NU=me((fbe,qU)=>{"use strict";qU.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:Eb()}}},layoutAttributes:Eb(),handleDefaults:SU(),draw:FU()}});var zb=me(QT=>{"use strict";var BU=yn().extendFlat;QT.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",a=e.trace?"trace ":"subplot ",s=t.description?" "+t.description:"",l={x:BU({},r,{}),y:BU({},r,{}),editType:e.editType};return e.noGridCell||(l.row={valType:"integer",min:0,dflt:0,editType:e.editType},l.column={valType:"integer",min:0,dflt:0,editType:e.editType}),l};QT.defaults=function(e,t,r,i){var a=i&&i.x||[0,1],s=i&&i.y||[0,1],l=t.grid;if(l){var f=r("domain.column");f!==void 0&&(f<l.columns?a=l._domains.x[f]:delete e.domain.column);var h=r("domain.row");h!==void 0&&(h<l.rows?s=l._domains.y[h]:delete e.domain.row)}var v=r("domain.x",a),m=r("domain.y",s);v[0]<v[1]||(e.domain.x=a.slice()),m[0]<m[1]||(e.domain.y=s.slice())}});var GU=me((hbe,HU)=>{"use strict";var cve=Bt(),hve=b0().counter,vve=zb().attributes,OU=eo().idRegex,dve=Ii(),$T={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[hve("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[OU.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[OU.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:vve({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function Ib(e,t,r){var i=t[r+"axes"],a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(i))return i;if(a.length)return a}function pve(e,t){var r=e.grid||{},i=Ib(t,r,"x"),a=Ib(t,r,"y");if(!e.grid&&!i&&!a)return;var s=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),l=Array.isArray(i),f=Array.isArray(a),h=l&&i!==r.xaxes&&f&&a!==r.yaxes,v,m;s?(v=r.subplots.length,m=r.subplots[0].length):(f&&(v=a.length),l&&(m=i.length));var _=dve.newContainer(t,"grid");function T(H,V){return cve.coerce(r,_,$T,H,V)}var M=T("rows",v),C=T("columns",m);if(!(M*C>1)){delete t.grid;return}if(!s&&!l&&!f){var E=T("pattern")==="independent";E&&(s=!0)}_._hasSubplotGrid=s;var L=T("roworder"),I=L==="top to bottom",O=s?.2:.1,q=s?.3:.1,z,N;h&&t._splomGridDflt&&(z=t._splomGridDflt.xside,N=t._splomGridDflt.yside),_._domains={x:UU("x",T,O,z,C),y:UU("y",T,q,N,M,I)}}function UU(e,t,r,i,a,s){var l=t(e+"gap",r),f=t("domain."+e);t(e+"side",i);for(var h=new Array(a),v=f[0],m=(f[1]-v)/(a-l),_=m*(1-l),T=0;T<a;T++){var M=v+m*T;h[s?a-1-T:T]=[M,M+_]}return h}function mve(e,t){var r=t.grid;if(!(!r||!r._domains)){var i=e.grid||{},a=t._subplots,s=r._hasSubplotGrid,l=r.rows,f=r.columns,h=r.pattern==="independent",v,m,_,T,M,C,E,L=r._axisMap={};if(s){var I=i.subplots||[];C=r.subplots=new Array(l);var O=1;for(v=0;v<l;v++){var q=C[v]=new Array(f),z=I[v]||[];for(m=0;m<f;m++)if(h?(M=O===1?"xy":"x"+O+"y"+O,O++):M=z[m],q[m]="",a.cartesian.indexOf(M)!==-1){if(E=M.indexOf("y"),_=M.slice(0,E),T=M.slice(E),L[_]!==void 0&&L[_]!==m||L[T]!==void 0&&L[T]!==v)continue;q[m]=M,L[_]=m,L[T]=v}}}else{var N=Ib(t,i,"x"),H=Ib(t,i,"y");r.xaxes=VU(N,a.xaxis,f,L,"x"),r.yaxes=VU(H,a.yaxis,l,L,"y")}var V=r._anchors={},W=r.roworder==="top to bottom";for(var J in L){var ee=J.charAt(0),ie=r[ee+"side"],oe,fe,le;if(ie.length<8)V[J]="free";else if(ee==="x"){if(ie.charAt(0)==="t"===W?(oe=0,fe=1,le=l):(oe=l-1,fe=-1,le=-1),s){var Te=L[J];for(v=oe;v!==le;v+=fe)if(M=C[v][Te],!!M&&(E=M.indexOf("y"),M.slice(0,E)===J)){V[J]=M.slice(E);break}}else for(v=oe;v!==le;v+=fe)if(T=r.yaxes[v],a.cartesian.indexOf(J+T)!==-1){V[J]=T;break}}else if(ie.charAt(0)==="l"?(oe=0,fe=1,le=f):(oe=f-1,fe=-1,le=-1),s){var Se=L[J];for(v=oe;v!==le;v+=fe)if(M=C[Se][v],!!M&&(E=M.indexOf("y"),M.slice(E)===J)){V[J]=M.slice(0,E);break}}else for(v=oe;v!==le;v+=fe)if(_=r.xaxes[v],a.cartesian.indexOf(_+J)!==-1){V[J]=_;break}}}}function VU(e,t,r,i,a){var s=new Array(r),l;function f(h,v){t.indexOf(v)!==-1&&i[v]===void 0?(s[h]=v,i[v]=h):s[h]=""}if(Array.isArray(e))for(l=0;l<r;l++)f(l,e[l]);else for(f(0,a),l=1;l<r;l++)f(l,a+(l+1));return s}HU.exports={moduleType:"component",name:"grid",schema:{layout:{grid:$T}},layoutAttributes:$T,sizeDefaults:pve,contentDefaults:mve}});var eA=me((vbe,ZU)=>{"use strict";ZU.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}});var XU=me((dbe,WU)=>{"use strict";var YU=Da(),yve=sa(),gve=Bt(),_ve=Ii(),xve=eA();WU.exports=function(e,t,r,i){var a="error_"+i.axis,s=_ve.newContainer(t,a),l=e[a]||{};function f(C,E){return gve.coerce(l,s,xve,C,E)}var h=l.array!==void 0||l.value!==void 0||l.type==="sqrt",v=f("visible",h);if(v!==!1){var m=f("type","array"in l?"data":"percent"),_=!0;m!=="sqrt"&&(_=f("symmetric",!((m==="data"?"arrayminus":"valueminus")in l))),m==="data"?(f("array"),f("traceref"),_||(f("arrayminus"),f("tracerefminus"))):(m==="percent"||m==="constant")&&(f("value"),_||f("valueminus"));var T="copy_"+i.inherit+"style";if(i.inherit){var M=t["error_"+i.inherit];(M||{}).visible&&f(T,!(l.color||YU(l.thickness)||YU(l.width)))}(!i.inherit||!s[T])&&(f("color",r),f("thickness"),f("width",yve.traceIs(t,"gl3d")?0:4))}}});var tA=me((pbe,JU)=>{"use strict";JU.exports=function(t){var r=t.type,i=t.symmetric;if(r==="data"){var a=t.array||[];if(i)return function(v,m){var _=+a[m];return[_,_]};var s=t.arrayminus||[];return function(v,m){var _=+a[m],T=+s[m];return!isNaN(_)||!isNaN(T)?[T||0,_||0]:[NaN,NaN]}}else{var l=jU(r,t.value),f=jU(r,t.valueminus);return i||t.valueminus===void 0?function(v){var m=l(v);return[m,m]}:function(v){return[f(v),l(v)]}}};function jU(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}});var $U=me((mbe,QU)=>{"use strict";var rA=Da(),bve=sa(),aA=Xi(),wve=Bt(),Tve=tA();QU.exports=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var a=r[i],s=a[0].trace;if(s.visible===!0&&bve.traceIs(s,"errorBarsOK")){var l=aA.getFromId(t,s.xaxis),f=aA.getFromId(t,s.yaxis);KU(a,s,l,"x"),KU(a,s,f,"y")}}};function KU(e,t,r,i){var a=t["error_"+i]||{},s=a.visible&&["linear","log"].indexOf(r.type)!==-1,l=[];if(s){for(var f=Tve(a),h=0;h<e.length;h++){var v=e[h],m=v.i;if(m===void 0)m=h;else if(m===null)continue;var _=v[i];if(rA(r.c2l(_))){var T=f(_,m);if(rA(T[0])&&rA(T[1])){var M=v[i+"s"]=_-T[0],C=v[i+"h"]=_+T[1];l.push(M,C)}}}var E=r._id,L=t._extremes[E],I=aA.findExtremes(r,l,wve.extendFlat({tozero:L.opts.tozero},{padded:!0}));L.min=L.min.concat(I.min),L.max=L.max.concat(I.max)}}});var rV=me((ybe,tV)=>{"use strict";var eV=ja(),sv=Da(),Ave=xi(),Mve=rs();tV.exports=function(t,r,i,a){var s,l=i.xaxis,f=i.yaxis,h=a&&a.duration>0,v=t._context.staticPlot;r.each(function(m){var _=m[0].trace,T=_.error_x||{},M=_.error_y||{},C;_.ids&&(C=function(O){return O.id});var E=Mve.hasMarkers(_)&&_.marker.maxdisplayed>0;!M.visible&&!T.visible&&(m=[]);var L=eV.select(this).selectAll("g.errorbar").data(m,C);if(L.exit().remove(),!!m.length){T.visible||L.selectAll("path.xerror").remove(),M.visible||L.selectAll("path.yerror").remove(),L.style("opacity",1);var I=L.enter().append("g").classed("errorbar",!0);h&&I.style("opacity",0).transition().duration(a.duration).style("opacity",1),Ave.setClipUrl(L,i.layerClipId,t),L.each(function(O){var q=eV.select(this),z=Sve(O,l,f);if(!(E&&!O.vis)){var N,H=q.select("path.yerror");if(M.visible&&sv(z.x)&&sv(z.yh)&&sv(z.ys)){var V=M.width;N="M"+(z.x-V)+","+z.yh+"h"+2*V+"m-"+V+",0V"+z.ys,z.noYS||(N+="m-"+V+",0h"+2*V),s=!H.size(),s?H=q.append("path").style("vector-effect",v?"none":"non-scaling-stroke").classed("yerror",!0):h&&(H=H.transition().duration(a.duration).ease(a.easing)),H.attr("d",N)}else H.remove();var W=q.select("path.xerror");if(T.visible&&sv(z.y)&&sv(z.xh)&&sv(z.xs)){var J=(T.copy_ystyle?M:T).width;N="M"+z.xh+","+(z.y-J)+"v"+2*J+"m0,-"+J+"H"+z.xs,z.noXS||(N+="m0,-"+J+"v"+2*J),s=!W.size(),s?W=q.append("path").style("vector-effect",v?"none":"non-scaling-stroke").classed("xerror",!0):h&&(W=W.transition().duration(a.duration).ease(a.easing)),W.attr("d",N)}else W.remove()}})}})};function Sve(e,t,r){var i={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(i.yh=r.c2p(e.yh),i.ys=r.c2p(e.ys),sv(i.ys)||(i.noYS=!0,i.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),sv(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0))),i}});var nV=me((gbe,iV)=>{"use strict";var kve=ja(),aV=Oa();iV.exports=function(t){t.each(function(r){var i=r[0].trace,a=i.error_y||{},s=i.error_x||{},l=kve.select(this);l.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(aV.stroke,a.color),s.copy_ystyle&&(s=a),l.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(aV.stroke,s.color)})}});var lV=me((_be,sV)=>{"use strict";var h1=Bt(),oV=il().overrideAll,v1=eA(),Kd={error_x:h1.extendFlat({},v1),error_y:h1.extendFlat({},v1)};delete Kd.error_x.copy_zstyle;delete Kd.error_y.copy_zstyle;delete Kd.error_y.copy_ystyle;var d1={error_x:h1.extendFlat({},v1),error_y:h1.extendFlat({},v1),error_z:h1.extendFlat({},v1)};delete d1.error_x.copy_ystyle;delete d1.error_y.copy_ystyle;delete d1.error_z.copy_ystyle;delete d1.error_z.copy_zstyle;sV.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Kd,bar:Kd,histogram:Kd,scatter3d:oV(d1,"calc","nested"),scattergl:oV(Kd,"calc","nested")}},supplyDefaults:XU(),calc:$U(),makeComputeError:tA(),plot:rV(),style:nV(),hoverInfo:Cve};function Cve(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}});var fV=me((xbe,uV)=>{"use strict";uV.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}});var yV=me((bbe,mV)=>{"use strict";var lv=ja(),iA=Mf(),Fb=to(),cV=sa(),Nc=Xi(),Rb=jl(),uu=Bt(),Ku=uu.strTranslate,pV=yn().extendFlat,nA=Wh(),Ju=xi(),oA=Oa(),Eve=tg(),Lve=ro(),Dve=Ef().flipScale,Pve=vT(),zve=dT(),Ive=Nu(),sA=No(),hV=sA.LINE_SPACING,vV=sA.FROM_TL,dV=sA.FROM_BR,Qi=fV().cn;function Rve(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+Qi.colorbar).data(Fve(e),function(i){return i._id});r.enter().append("g").attr("class",function(i){return i._id}).classed(Qi.colorbar,!0),r.each(function(i){var a=lv.select(this);uu.ensureSingle(a,"rect",Qi.cbbg),uu.ensureSingle(a,"g",Qi.cbfills),uu.ensureSingle(a,"g",Qi.cblines),uu.ensureSingle(a,"g",Qi.cbaxis,function(l){l.classed(Qi.crisp,!0)}),uu.ensureSingle(a,"g",Qi.cbtitleunshift,function(l){l.append("g").classed(Qi.cbtitle,!0)}),uu.ensureSingle(a,"rect",Qi.cboutline);var s=qve(a,i,e);s&&s.then&&(e._promises||[]).push(s),e._context.edits.colorbarPosition&&Nve(a,i,e)}),r.exit().each(function(i){Fb.autoMargin(e,i._id)}).remove(),r.order()}function Fve(e){var t=e._fullLayout,r=e.calcdata,i=[],a,s,l,f;function h(q){return pV(q,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function v(){typeof f.calc=="function"?f.calc(e,l,a):(a._fillgradient=s.reversescale?Dve(s.colorscale):s.colorscale,a._zrange=[s[f.min],s[f.max]])}for(var m=0;m<r.length;m++){var _=r[m];if(l=_[0].trace,!!l._module){var T=l._module.colorbar;if(l.visible===!0&&T)for(var M=Array.isArray(T),C=M?T:[T],E=0;E<C.length;E++){f=C[E];var L=f.container;s=L?l[L]:l,s&&s.showscale&&(a=h(s.colorbar),a._id="cb"+l.uid+(M&&L?"-"+L:""),a._traceIndex=l.index,a._propPrefix=(L?L+".":"")+"colorbar.",a._meta=l._meta,v(),i.push(a))}}}for(var I in t._colorAxes)if(s=t[I],s.showscale){var O=t._colorAxes[I];a=h(s.colorbar),a._id="cb"+I,a._propPrefix=I+".colorbar.",a._meta=t._meta,f={min:"cmin",max:"cmax"},O[0]!=="heatmap"&&(l=O[1],f.calc=l._module.colorbar.calc),v(),i.push(a)}return i}function qve(e,t,r){var i=t.orientation==="v",a=t.len,s=t.lenmode,l=t.thickness,f=t.thicknessmode,h=t.outlinewidth,v=t.borderwidth,m=t.bgcolor,_=t.xanchor,T=t.yanchor,M=t.xpad,C=t.ypad,E=t.x,L=i?t.y:1-t.y,I=t.yref==="paper",O=t.xref==="paper",q=r._fullLayout,z=q._size,N=t._fillcolor,H=t._line,V=t.title,W=V.side,J=t._zrange||lv.extent((typeof N=="function"?N:H.color).domain()),ee=typeof H.color=="function"?H.color:function(){return H.color},ie=typeof N=="function"?N:function(){return N},oe=t._levels,fe=Bve(r,t,J),le=fe.fill,Te=fe.line,Se=Math.round(l*(f==="fraction"?i?z.w:z.h:1)),Me=Se/(i?z.w:z.h),Ae=Math.round(a*(s==="fraction"?i?z.h:z.w:1)),pe=Ae/(i?z.h:z.w),ke=O?z.w:r._fullLayout.width,Ee=I?z.h:r._fullLayout.height,Xe=Math.round(i?E*ke+M:L*Ee+C),lt={center:.5,right:1}[_]||0,it={top:1,middle:.5}[T]||0,_t=i?E-lt*Me:L-it*Me,Ye=i?L-it*pe:E-lt*pe,kt=Math.round(i?Ee*(1-Ye):ke*Ye);t._lenFrac=pe,t._thickFrac=Me,t._uFrac=_t,t._vFrac=Ye;var st=t._axis=Ove(r,t,J);st.position=Me+(i?E+M/z.w:L+C/z.h);var dt=["top","bottom"].indexOf(W)!==-1;if(i&&dt&&(st.title.side=W,st.titlex=E+M/z.w,st.titley=Ye+(V.side==="top"?pe-C/z.h:C/z.h)),!i&&!dt&&(st.title.side=W,st.titley=L+C/z.h,st.titlex=Ye+M/z.w),H.color&&t.tickmode==="auto"){st.tickmode="linear",st.tick0=oe.start;var It=oe.size,yt=uu.constrain(Ae/50,4,15)+1,de=(J[1]-J[0])/((t.nticks||yt)*It);if(de>1){var ze=Math.pow(10,Math.floor(Math.log(de)/Math.LN10));It*=ze*uu.roundUp(de/ze,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(st.tick0=0)}st.dtick=It}st.domain=i?[Ye+C/z.h,Ye+pe-C/z.h]:[Ye+M/z.w,Ye+pe-M/z.w],st.setScale(),e.attr("transform",Ku(Math.round(z.l),Math.round(z.t)));var _e=e.select("."+Qi.cbtitleunshift).attr("transform",Ku(-Math.round(z.l),-Math.round(z.t))),Ue=st.ticklabelposition,at=st.title.font.size,Je=e.select("."+Qi.cbaxis),Ct,wt=0,xt=0;function qt(Yt,Be){var ut={propContainer:st,propName:t._propPrefix+"title.text",traceIndex:t._traceIndex,_meta:t._meta,placeholder:q._dfltTitle.colorbar,containerGroup:e.select("."+Qi.cbtitle)},sr=Yt.charAt(0)==="h"?Yt.slice(1):"h"+Yt;e.selectAll("."+sr+",."+sr+"-math-group").remove(),Eve.draw(r,Yt,pV(ut,Be||{}))}function Ut(){if(i&&dt||!i&&!dt){var Yt,Be;W==="top"&&(Yt=M+z.l+ke*E,Be=C+z.t+Ee*(1-Ye-pe)+3+at*.75),W==="bottom"&&(Yt=M+z.l+ke*E,Be=C+z.t+Ee*(1-Ye)-3-at*.25),W==="right"&&(Be=C+z.t+Ee*L+3+at*.75,Yt=M+z.l+ke*Ye),qt(st._id+"title",{attributes:{x:Yt,y:Be,"text-anchor":i?"start":"middle"}})}}function Dt(){if(i&&!dt||!i&&dt){var Yt=st.position||0,Be=st._offset+st._length/2,ut,sr;if(W==="right")sr=Be,ut=z.l+ke*Yt+10+at*(st.showticklabels?1:.5);else if(ut=Be,W==="bottom"&&(sr=z.t+Ee*Yt+10+(Ue.indexOf("inside")===-1?st.tickfont.size:0)+(st.ticks!=="inside"&&t.ticklen||0)),W==="top"){var Pr=V.text.split("<br>").length;sr=z.t+Ee*Yt+10-Se-hV*at*Pr}qt((i?"h":"v")+st._id+"title",{avoid:{selection:lv.select(r).selectAll("g."+st._id+"tick"),side:W,offsetTop:i?0:z.t,offsetLeft:i?z.l:0,maxShift:i?q.width:q.height},attributes:{x:ut,y:sr,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function Mt(){if(!i&&!dt||i&&dt){var Yt=e.select("."+Qi.cbtitle),Be=Yt.select("text"),ut=[-h/2,h/2],sr=Yt.select(".h"+st._id+"title-math-group").node(),Pr=15.6;Be.node()&&(Pr=parseInt(Be.node().style.fontSize,10)*hV);var Et;if(sr?(Et=Ju.bBox(sr),xt=Et.width,wt=Et.height,wt>Pr&&(ut[1]-=(wt-Pr)/2)):Be.node()&&!Be.classed(Qi.jsPlaceholder)&&(Et=Ju.bBox(Be.node()),xt=Et.width,wt=Et.height),i){if(wt){if(wt+=5,W==="top")st.domain[1]-=wt/z.h,ut[1]*=-1;else{st.domain[0]+=wt/z.h;var ht=Lve.lineCount(Be);ut[1]+=(1-ht)*Pr}Yt.attr("transform",Ku(ut[0],ut[1])),st.setScale()}}else xt&&(W==="right"&&(st.domain[0]+=(xt+at/2)/z.w),Yt.attr("transform",Ku(ut[0],ut[1])),st.setScale())}e.selectAll("."+Qi.cbfills+",."+Qi.cblines).attr("transform",i?Ku(0,Math.round(z.h*(1-st.domain[1]))):Ku(Math.round(z.w*st.domain[0]),0)),Je.attr("transform",i?Ku(0,Math.round(-z.t)):Ku(Math.round(-z.l),0));var pt=e.select("."+Qi.cbfills).selectAll("rect."+Qi.cbfill).attr("style","").data(le);pt.enter().append("rect").classed(Qi.cbfill,!0).attr("style",""),pt.exit().remove();var Ot=J.map(st.c2p).map(Math.round).sort(function(yr,ur){return yr-ur});pt.each(function(yr,ur){var Lt=[ur===0?J[0]:(le[ur]+le[ur-1])/2,ur===le.length-1?J[1]:(le[ur]+le[ur+1])/2].map(st.c2p).map(Math.round);i&&(Lt[1]=uu.constrain(Lt[1]+(Lt[1]>Lt[0])?1:-1,Ot[0],Ot[1]));var Fe=lv.select(this).attr(i?"x":"y",Xe).attr(i?"y":"x",lv.min(Lt)).attr(i?"width":"height",Math.max(Se,2)).attr(i?"height":"width",Math.max(lv.max(Lt)-lv.min(Lt),2));if(t._fillgradient)Ju.gradient(Fe,r,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var Ve=ie(yr).replace("e-","");Fe.attr("fill",iA(Ve).toHexString())}});var er=e.select("."+Qi.cblines).selectAll("path."+Qi.cbline).data(H.color&&H.width?Te:[]);er.enter().append("path").classed(Qi.cbline,!0),er.exit().remove(),er.each(function(yr){var ur=Xe,Lt=Math.round(st.c2p(yr))+H.width/2%1;lv.select(this).attr("d","M"+(i?ur+","+Lt:Lt+","+ur)+(i?"h":"v")+Se).call(Ju.lineGroupStyle,H.width,ee(yr),H.dash)}),Je.selectAll("g."+st._id+"tick,path").remove();var Ht=Xe+Se+(h||0)/2-(t.ticks==="outside"?1:0),Kt=Nc.calcTicks(st),pr=Nc.getTickSigns(st)[2];return Nc.drawTicks(r,st,{vals:st.ticks==="inside"?Nc.clipEnds(st,Kt):Kt,layer:Je,path:Nc.makeTickPath(st,Ht,pr),transFn:Nc.makeTransTickFn(st)}),Nc.drawLabels(r,st,{vals:Kt,layer:Je,transFn:Nc.makeTransTickLabelFn(st),labelFns:Nc.makeLabelFns(st,Ht)})}function Zt(){var Yt,Be=Se+h/2;Ue.indexOf("inside")===-1&&(Yt=Ju.bBox(Je.node()),Be+=i?Yt.width:Yt.height),Ct=_e.select("text");var ut=0,sr=i&&W==="top",Pr=!i&&W==="right",Et=0;if(Ct.node()&&!Ct.classed(Qi.jsPlaceholder)){var ht,pt=_e.select(".h"+st._id+"title-math-group").node();pt&&(i&&dt||!i&&!dt)?(Yt=Ju.bBox(pt),ut=Yt.width,ht=Yt.height):(Yt=Ju.bBox(_e.node()),ut=Yt.right-z.l-(i?Xe:kt),ht=Yt.bottom-z.t-(i?kt:Xe),!i&&W==="top"&&(Be+=Yt.height,Et=Yt.height)),Pr&&(Ct.attr("transform",Ku(ut/2+at/2,0)),ut*=2),Be=Math.max(Be,i?ut:ht)}var Ot=(i?M:C)*2+Be+v+h/2,er=0;!i&&V.text&&T==="bottom"&&L<=0&&(er=Ot/2,Ot+=er,Et+=er),q._hColorbarMoveTitle=er,q._hColorbarMoveCBTitle=Et;var Ht=v+h,Kt=(i?Xe:kt)-Ht/2-(i?M:0),pr=(i?kt:Xe)-(i?Ae:C+Et-er);e.select("."+Qi.cbbg).attr("x",Kt).attr("y",pr).attr(i?"width":"height",Math.max(Ot-er,2)).attr(i?"height":"width",Math.max(Ae+Ht,2)).call(oA.fill,m).call(oA.stroke,t.bordercolor).style("stroke-width",v);var yr=Pr?Math.max(ut-10,0):0;e.selectAll("."+Qi.cboutline).attr("x",(i?Xe:kt+M)+yr).attr("y",(i?kt+C-Ae:Xe)+(sr?wt:0)).attr(i?"width":"height",Math.max(Se,2)).attr(i?"height":"width",Math.max(Ae-(i?2*C+wt:2*M+yr),2)).call(oA.stroke,t.outlinecolor).style({fill:"none","stroke-width":h});var ur=i?lt*Ot:0,Lt=i?0:(1-it)*Ot-Et;if(ur=O?z.l-ur:-ur,Lt=I?z.t-Lt:-Lt,e.attr("transform",Ku(ur,Lt)),!i&&(v||iA(m).getAlpha()&&!iA.equals(q.paper_bgcolor,m))){var Fe=Je.selectAll("text"),Ve=Fe[0].length,bt=e.select("."+Qi.cbbg).node(),Tt=Ju.bBox(bt),mr=Ju.getTranslate(e),Ar=2;Fe.each(function(vn,nn){var Ki=0,ir=Ve-1;if(nn===Ki||nn===ir){var oi=Ju.bBox(this),Sa=Ju.getTranslate(this),la;if(nn===ir){var Ci=oi.right+Sa.x,ma=Tt.right+mr.x+kt-v-Ar+E;la=ma-Ci,la>0&&(la=0)}else if(nn===Ki){var se=oi.left+Sa.x,te=Tt.left+mr.x+kt+v+Ar;la=te-se,la<0&&(la=0)}la&&(Ve<3?this.setAttribute("transform","translate("+la+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Mr={},Gr=vV[_],pa=dV[_],Ca=vV[T],ii=dV[T],wi=Ot-Se;i?(s==="pixels"?(Mr.y=L,Mr.t=Ae*Ca,Mr.b=Ae*ii):(Mr.t=Mr.b=0,Mr.yt=L+a*Ca,Mr.yb=L-a*ii),f==="pixels"?(Mr.x=E,Mr.l=Ot*Gr,Mr.r=Ot*pa):(Mr.l=wi*Gr,Mr.r=wi*pa,Mr.xl=E-l*Gr,Mr.xr=E+l*pa)):(s==="pixels"?(Mr.x=E,Mr.l=Ae*Gr,Mr.r=Ae*pa):(Mr.l=Mr.r=0,Mr.xl=E+a*Gr,Mr.xr=E-a*pa),f==="pixels"?(Mr.y=1-L,Mr.t=Ot*Ca,Mr.b=Ot*ii):(Mr.t=wi*Ca,Mr.b=wi*ii,Mr.yt=L-l*Ca,Mr.yb=L+l*ii));var vi=t.y<.5?"b":"t",Fi=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var Gi={r:q.width-Kt-ur,l:Kt+Mr.r,b:q.height-pr-Lt,t:pr+Mr.b};O&&I?Fb.autoMargin(r,t._id,Mr):O?r._fullLayout._reservedMargin[t._id][vi]=Gi[vi]:I||i?r._fullLayout._reservedMargin[t._id][Fi]=Gi[Fi]:r._fullLayout._reservedMargin[t._id][vi]=Gi[vi]}return uu.syncOrAsync([Fb.previousPromises,Ut,Mt,Dt,Fb.previousPromises,Zt],r)}function Nve(e,t,r){var i=t.orientation==="v",a=r._fullLayout,s=a._size,l,f,h;Rb.init({element:e.node(),gd:r,prepFn:function(){l=e.attr("transform"),nA(e)},moveFn:function(v,m){e.attr("transform",l+Ku(v,m)),f=Rb.align((i?t._uFrac:t._vFrac)+v/s.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),h=Rb.align((i?t._vFrac:1-t._uFrac)-m/s.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var _=Rb.getCursor(f,h,t.xanchor,t.yanchor);nA(e,_)},doneFn:function(){if(nA(e),f!==void 0&&h!==void 0){var v={};v[t._propPrefix+"x"]=f,v[t._propPrefix+"y"]=h,t._traceIndex!==void 0?cV.call("_guiRestyle",r,v,t._traceIndex):cV.call("_guiRelayout",r,v)}}})}function Bve(e,t,r){var i=t._levels,a=[],s=[],l,f,h=i.end+i.size/100,v=i.size,m=1.001*r[0]-.001*r[1],_=1.001*r[1]-.001*r[0];for(f=0;f<1e5&&(l=i.start+f*v,!(v>0?l>=h:l<=h));f++)l>m&&l<_&&a.push(l);if(t._fillgradient)s=[0];else if(typeof t._fillcolor=="function"){var T=t._filllevels;if(T)for(h=T.end+T.size/100,v=T.size,f=0;f<1e5&&(l=T.start+f*v,!(v>0?l>=h:l<=h));f++)l>r[0]&&l<r[1]&&s.push(l);else s=a.map(function(M){return M-i.size/2}),s.push(s[s.length-1]+i.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(s=[0]);return i.size<0&&(a.reverse(),s.reverse()),{line:a,fill:s}}function Ove(e,t,r){var i=e._fullLayout,a=t.orientation==="v",s={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:a?"right":"bottom",position:1},l=a?"y":"x",f={type:"linear",_id:l+t._id},h={letter:l,font:i.font,noAutotickangles:l==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function v(m,_){return uu.coerce(s,f,Ive,m,_)}return Pve(s,f,v,h,i),zve(s,f,v,h),f}mV.exports={draw:Rve}});var _V=me((wbe,gV)=>{"use strict";gV.exports={moduleType:"component",name:"colorbar",attributes:$_(),supplyDefaults:o5(),draw:yV().draw,hasColorbar:jw()}});var bV=me((Tbe,xV)=>{"use strict";xV.exports={moduleType:"component",name:"legend",layoutAttributes:a4(),supplyLayoutDefaults:n4(),draw:_4(),style:p4()}});var TV=me((Abe,wV)=>{"use strict";wV.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}});var MV=me((Mbe,AV)=>{"use strict";AV.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}});var uA=me((Sbe,EV)=>{"use strict";var Uve=sa(),CV=Bt(),lA=CV.extendFlat,SV=CV.extendDeep;function kV(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function Vve(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}EV.exports=function(t,r){var i,a=t.data,s=t.layout,l=SV([],a),f=SV({},s,kV(r.tileClass)),h=t._context||{};if(r.width&&(f.width=r.width),r.height&&(f.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){f.annotations=[];var v=Object.keys(f);for(i=0;i<v.length;i++)Vve(v[i])&&(f[v[i]].title={text:""});for(i=0;i<l.length;i++){var m=l[i];m.showscale=!1,m.marker&&(m.marker.showscale=!1),Uve.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(r.annotations))for(i=0;i<r.annotations.length;i++)f.annotations.push(r.annotations[i]);var _=Object.keys(f).filter(function(L){return L.match(/^scene\d*$/)});if(_.length){var T={};for(r.tileClass==="thumbnail"&&(T={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<_.length;i++){var M=f[_[i]];M.xaxis||(M.xaxis={}),M.yaxis||(M.yaxis={}),M.zaxis||(M.zaxis={}),lA(M.xaxis,T),lA(M.yaxis,T),lA(M.zaxis,T),M._scene=null}}var C=document.createElement("div");r.tileClass&&(C.className=r.tileClass);var E={gd:C,td:C,layout:f,data:l,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:h.mapboxAccessToken}};return r.setBackground!=="transparent"&&(E.config.setBackground=r.setBackground||"opaque"),E.gd.defaultLayout=kV(r.tileClass),E}});var PV=me((kbe,DV)=>{"use strict";var Hve=B_().EventEmitter,Gve=sa(),Zve=Bt(),LV=Ud(),Yve=uA(),Wve=Gx(),Xve=Zx();function jve(e,t){var r=new Hve,i=Yve(e,{format:"png"}),a=i.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);function s(){var f=LV.getDelay(a._fullLayout);setTimeout(function(){var h=Wve(a),v=document.createElement("canvas");v.id=Zve.randstr(),r=Xve({format:t.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:v,emitter:r,svg:h}),r.clean=function(){a&&document.body.removeChild(a)}},f)}var l=LV.getRedrawFunc(a);return Gve.call("_doPlot",a,i.data,i.layout,i.config).then(l).then(s).catch(function(f){r.emit("error",f)}),r}DV.exports=jve});var RV=me((Cbe,IV)=>{"use strict";var zV=Ud(),Jve={getDelay:zV.getDelay,getRedrawFunc:zV.getRedrawFunc,clone:uA(),toSVG:Gx(),svgToImg:Zx(),toImage:PV(),downloadImage:F6()};IV.exports=Jve});var qV=me(Bc=>{"use strict";Bc.version=t_().version;C7();yk();var Kve=sa(),p1=Bc.register=Kve.register,cA=NF(),FV=Object.keys(cA);for(qb=0;qb<FV.length;qb++)Am=FV[qb],Am.charAt(0)!=="_"&&(Bc[Am]=cA[Am]),p1({moduleType:"apiMethod",name:Am,fn:cA[Am]});var Am,qb;p1(JN());p1([bB(),RB(),Hf(),eO(),vO(),RO(),tU(),xU(),NU(),GU(),lV(),U0(),_V(),bV(),Nf(),G4()]);p1([TV(),MV()]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(p1(window.PlotlyLocales),delete window.PlotlyLocales);Bc.Icons=G2();var Nb=Nf(),fA=to();Bc.Plots={resize:fA.resize,graphJson:fA.graphJson,sendDataToCloud:fA.sendDataToCloud};Bc.Fx={hover:Nb.hover,unhover:Nb.unhover,loneHover:Nb.loneHover,loneUnhover:Nb.loneUnhover};Bc.Snapshot=RV();Bc.PlotSchema=F0()});var BV=me((Lbe,NV)=>{"use strict";NV.exports=qV()});var hA=me((Pbe,GV)=>{"use strict";var{hovertemplateAttrs:Qve,texttemplateAttrs:$ve,templatefallbackAttrs:OV}=kf(),ede=Ax(),Xf=zc(),tde=ys(),UV=Sc(),rde=gc().dash,Qd=yn().extendFlat,ade=il().overrideAll,fu=Xf.marker,VV=Xf.line,HV=fu.line,Dbe=["The library used by the *country names* `locationmode` option is changing in an upcoming version.","Country names in existing plots may not work in the new version."].join(" ");GV.exports=ade({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:Qd({},Xf.mode,{dflt:"markers"}),text:Qd({},Xf.text,{}),texttemplate:$ve({editType:"plot"},{keys:["lat","lon","location","text"]}),texttemplatefallback:OV({editType:"plot"}),hovertext:Qd({},Xf.hovertext,{}),textfont:Xf.textfont,textposition:Xf.textposition,line:{color:VV.color,width:VV.width,dash:rde},connectgaps:Xf.connectgaps,marker:Qd({symbol:fu.symbol,opacity:fu.opacity,angle:fu.angle,angleref:Qd({},fu.angleref,{values:["previous","up","north"]}),standoff:fu.standoff,size:fu.size,sizeref:fu.sizeref,sizemin:fu.sizemin,sizemode:fu.sizemode,colorbar:fu.colorbar,line:Qd({width:HV.width,dash:HV.dash},UV("marker.line")),gradient:fu.gradient},UV("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:ede(),selected:Xf.selected,unselected:Xf.unselected,hoverinfo:Qd({},tde.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:Qve(),hovertemplatefallback:OV()},"calc","nested")});var Oc=me((zbe,KV)=>{"use strict";var ide=E_(),ZV="1.13.4",jV='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',YV=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',jV].join(" "),WV=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),nde=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),JV={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:jV,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:YV,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:YV,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:WV,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:WV,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:nde,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},XV=ide(JV);KV.exports={requiredVersion:ZV,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:JV,styleValuesNonMapbox:XV,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+ZV+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",XV.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}});var m1=me((Ibe,tH)=>{"use strict";var QV=Bt(),$V=Oa().defaultLine,ode=zb().attributes,sde=qo(),lde=zc().textposition,ude=il().overrideAll,fde=Ii().templatedArray,vA=Oc(),eH=sde({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});eH.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var cde=tH.exports=ude({_arrayAttrRegexps:[QV.counterRegex("mapbox",".layers",!0)],domain:ode({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:vA.styleValuesMapbox.concat(vA.styleValuesNonMapbox),dflt:vA.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:fde("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:$V},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:$V}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:eH,textposition:QV.extendFlat({},lde,{arrayOk:!1})}})},"plot","from-root");cde.uirevision={valType:"any",editType:"none"}});var Bb=me((Rbe,nH)=>{"use strict";var{hovertemplateAttrs:hde,texttemplateAttrs:vde,templatefallbackAttrs:rH}=kf(),dde=Ax(),y1=hA(),Mm=zc(),aH=m1(),pde=ys(),mde=Sc(),$d=yn().extendFlat,yde=il().overrideAll,gde=m1(),iH=y1.line,Sm=y1.marker;nH.exports=yde({lon:y1.lon,lat:y1.lat,cluster:{enabled:{valType:"boolean"},maxzoom:$d({},gde.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:$d({},Sm.opacity,{dflt:1})},mode:$d({},Mm.mode,{dflt:"markers"}),text:$d({},Mm.text,{}),texttemplate:vde({editType:"plot"},{keys:["lat","lon","text"]}),texttemplatefallback:rH({editType:"plot"}),hovertext:$d({},Mm.hovertext,{}),line:{color:iH.color,width:iH.width},connectgaps:Mm.connectgaps,marker:$d({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:Sm.opacity,size:Sm.size,sizeref:Sm.sizeref,sizemin:Sm.sizemin,sizemode:Sm.sizemode},mde("marker")),fill:y1.fill,fillcolor:dde(),textfont:aH.layers.symbol.textfont,textposition:aH.layers.symbol.textposition,below:{valType:"string"},selected:{marker:Mm.selected.marker},unselected:{marker:Mm.unselected.marker},hoverinfo:$d({},pde.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:hde(),hovertemplatefallback:rH()},"calc","nested")});var dA=me((Fbe,oH)=>{"use strict";var _de=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];oH.exports={isSupportedFont:function(e){return _de.indexOf(e)!==-1}}});var uH=me((qbe,lH)=>{"use strict";var g1=Bt(),pA=rs(),xde=B6(),bde=O6(),wde=U6(),Tde=V6(),sH=Bb(),Ade=dA().isSupportedFont;lH.exports=function(t,r,i,a){function s(I,O){return g1.coerce(t,r,sH,I,O)}function l(I,O){return g1.coerce2(t,r,sH,I,O)}var f=Mde(t,r,s);if(!f){r.visible=!1;return}if(s("text"),s("texttemplate"),s("texttemplatefallback"),s("hovertext"),s("hovertemplate"),s("hovertemplatefallback"),s("mode"),s("below"),pA.hasMarkers(r)){xde(t,r,i,a,s,{noLine:!0,noAngle:!0}),s("marker.allowoverlap"),s("marker.angle");var h=r.marker;h.symbol!=="circle"&&(g1.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),g1.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}pA.hasLines(r)&&(bde(t,r,i,a,s,{noDash:!0}),s("connectgaps"));var v=l("cluster.maxzoom"),m=l("cluster.step"),_=l("cluster.color",r.marker&&r.marker.color||i),T=l("cluster.size"),M=l("cluster.opacity"),C=v!==!1||m!==!1||_!==!1||T!==!1||M!==!1,E=s("cluster.enabled",C);if(E||pA.hasText(r)){var L=a.font.family;wde(t,r,a,s,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:Ade(L)?L:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}s("fill"),r.fill!=="none"&&Tde(t,r,i,s),g1.coerceSelectionMarkerOpacity(r,s)};function Mde(e,t,r){var i=r("lon")||[],a=r("lat")||[],s=Math.min(i.length,a.length);return t._length=s,s}});var mA=me((Nbe,cH)=>{"use strict";var fH=Xi();cH.exports=function(t,r,i){var a={},s=i[r.subplot]._subplot,l=s.mockAxis,f=t.lonlat;return a.lonLabel=fH.tickText(l,l.c2l(f[0]),!0).text,a.latLabel=fH.tickText(l,l.c2l(f[1]),!0).text,a}});var mH=me((Bbe,pH)=>{"use strict";var yA=Da(),hH=Zi().BADNUM,Sde=Z6(),kde=Kg(),Cde=Qx(),Ede=Bt().isArrayOrTypedArray,vH=Bt()._;function dH(e){return e&&typeof e=="string"}pH.exports=function(t,r){var i=Ede(r.locations),a=i?r.locations.length:r._length,s=new Array(a),l;r.geojson?l=function(T){return dH(T)||yA(T)}:l=dH;for(var f=0;f<a;f++){var h=s[f]={};if(i){var v=r.locations[f];h.loc=l(v)?v:null}else{var m=r.lon[f],_=r.lat[f];yA(m)&&yA(_)?h.lonlat=[+m,+_]:h.lonlat=[hH,hH]}}return kde(s,r),Sde(t,r),Cde(s,r),a&&(s[0].t={labels:{lat:vH(t,"lat:")+" ",lon:vH(t,"lon:")+" "}}),s}});var Ob=me(_1=>{"use strict";var Lde=Zi().BADNUM;_1.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,i=[],a=[],s=0;s<e.length;s++){var l=e[s],f=l.lonlat;f[0]!==Lde?a.push(f):!r&&a.length>0&&(i.push(a),a=[])}return a.length>0&&i.push(a),i};_1.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};_1.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};_1.makeBlank=function(){return{type:"Point",coordinates:[]}}});var gA=me((Ube,gH)=>{"use strict";var yH=Bt();gH.exports=function(t,r){var i=t.split(" "),a=i[0],s=i[1],l=yH.isArrayOrTypedArray(r)?yH.mean(r):r,f=.5+l/100,h=1.5+l/100,v=["",""],m=[0,0];switch(a){case"top":v[0]="top",m[1]=-h;break;case"bottom":v[0]="bottom",m[1]=h;break}switch(s){case"left":v[1]="right",m[0]=-f;break;case"right":v[1]="left",m[0]=f;break}var _;return v[0]&&v[1]?_=v.join("-"):v[0]?_=v[0]:v[1]?_=v[1]:_="center",{anchor:_,offset:m}}});var AH=me((Vbe,TH)=>{"use strict";var bH=Da(),ko=Bt(),Dde=Zi().BADNUM,Vb=Ob(),_H=U0(),Pde=xi(),zde=f5(),Hb=rs(),Ide=dA().isSupportedFont,Rde=gA(),Fde=kc().appendArrayPointValue,qde=ro().NEWLINES,Nde=ro().BR_TAG_ALL;TH.exports=function(t,r){var i=r[0].trace,a=i.visible===!0&&i._length!==0,s=i.fill!=="none",l=Hb.hasLines(i),f=Hb.hasMarkers(i),h=Hb.hasText(i),v=f&&i.marker.symbol==="circle",m=f&&i.marker.symbol!=="circle",_=i.cluster&&i.cluster.enabled,T=Ub("fill"),M=Ub("line"),C=Ub("circle"),E=Ub("symbol"),L={fill:T,line:M,circle:C,symbol:E};if(!a)return L;var I;if((s||l)&&(I=Vb.calcTraceToLineCoords(r)),s&&(T.geojson=Vb.makePolygon(I),T.layout.visibility="visible",ko.extendFlat(T.paint,{"fill-color":i.fillcolor})),l&&(M.geojson=Vb.makeLine(I),M.layout.visibility="visible",ko.extendFlat(M.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),v){var O=Bde(r);C.geojson=O.geojson,C.layout.visibility="visible",_&&(C.filter=["!",["has","point_count"]],L.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":xA(i.cluster.color,i.cluster.step),"circle-radius":xA(i.cluster.size,i.cluster.step),"circle-opacity":xA(i.cluster.opacity,i.cluster.step)}},L.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":xH(i),"text-size":12}}),ko.extendFlat(C.paint,{"circle-color":O.mcc,"circle-radius":O.mrc,"circle-opacity":O.mo})}if(v&&_&&(C.filter=["!",["has","point_count"]]),(m||h)&&(E.geojson=Ode(r,t),ko.extendFlat(E.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),m&&(ko.extendFlat(E.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&i.marker.angle!=="auto"&&ko.extendFlat(E.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),E.layout["icon-allow-overlap"]=i.marker.allowoverlap,ko.extendFlat(E.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),h)){var q=(i.marker||{}).size,z=Rde(i.textposition,q);ko.extendFlat(E.layout,{"text-size":i.textfont.size,"text-anchor":z.anchor,"text-offset":z.offset,"text-font":xH(i)}),ko.extendFlat(E.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return L};function Ub(e){return{type:e,geojson:Vb.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function Bde(e){var t=e[0].trace,r=t.marker,i=t.selectedpoints,a=ko.isArrayOrTypedArray(r.color),s=ko.isArrayOrTypedArray(r.size),l=ko.isArrayOrTypedArray(r.opacity),f;function h(q){return t.opacity*q}function v(q){return q/2}var m;a&&(_H.hasColorscale(t,"marker")?m=_H.makeColorScaleFuncFromTrace(r):m=ko.identity);var _;s&&(_=zde(t));var T;l&&(T=function(q){var z=bH(q)?+ko.constrain(q,0,1):0;return h(z)});var M=[];for(f=0;f<e.length;f++){var C=e[f],E=C.lonlat;if(!wH(E)){var L={};m&&(L.mcc=C.mcc=m(C.mc)),_&&(L.mrc=C.mrc=_(C.ms)),T&&(L.mo=T(C.mo)),i&&(L.selected=C.selected||0),M.push({type:"Feature",id:f+1,geometry:{type:"Point",coordinates:E},properties:L})}}var I;if(i)for(I=Pde.makeSelectedPointStyleFns(t),f=0;f<M.length;f++){var O=M[f].properties;I.selectedOpacityFn&&(O.mo=h(I.selectedOpacityFn(O))),I.selectedColorFn&&(O.mcc=I.selectedColorFn(O)),I.selectedSizeFn&&(O.mrc=I.selectedSizeFn(O))}return{geojson:{type:"FeatureCollection",features:M},mcc:a||I&&I.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:s||I&&I.selectedSizeFn?{type:"identity",property:"mrc"}:v(r.size),mo:l||I&&I.selectedOpacityFn?{type:"identity",property:"mo"}:h(r.opacity)}}function Ode(e,t){for(var r=t._fullLayout,i=e[0].trace,a=i.marker||{},s=a.symbol,l=a.angle,f=s!=="circle"?_A(s):Gb,h=l!=="auto"?_A(l,!0):Gb,v=Hb.hasText(i)?_A(i.text):Gb,m=[],_=0;_<e.length;_++){var T=e[_];if(!wH(T.lonlat)){var M=i.texttemplate,C;if(M){var E=Array.isArray(M)?M[_]||"":M,L=i._module.formatLabels(T,i,r),I={};Fde(I,i,T.i),C=ko.texttemplateString({data:[I,T,i._meta],fallback:i.texttemplatefallback,labels:L,locale:r._d3locale,template:E})}else C=v(_);C&&(C=C.replace(qde,"").replace(Nde,`
`)),m.push({type:"Feature",geometry:{type:"Point",coordinates:T.lonlat},properties:{symbol:f(_),angle:h(_),text:C}})}}return{type:"FeatureCollection",features:m}}function _A(e,t){return ko.isArrayOrTypedArray(e)?t?function(r){return bH(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:Gb}function Gb(){return""}function wH(e){return e[0]===Dde}function xA(e,t){var r;if(ko.isArrayOrTypedArray(e)&&ko.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var i=1;i<e.length;i++)r.push(t[i-1],e[i])}else r=e;return r}function xH(e){var t=e.textfont,r=t.family,i=t.style,a=t.weight,s=r.split(" "),l=s[s.length-1]==="Italic";l&&s.pop(),l=l||i==="italic";var f=s.join(" ");a==="bold"&&s.indexOf("Bold")===-1?f+=" Bold":a<=1e3&&(s[0]==="Metropolis"?(f="Metropolis",a>850?f+=" Black":a>750?f+=" Extra Bold":a>650?f+=" Bold":a>550?f+=" Semi Bold":a>450?f+=" Medium":a>350?f+=" Regular":a>250?f+=" Light":a>150?f+=" Extra Light":f+=" Thin"):s.slice(0,2).join(" ")==="Open Sans"?(f="Open Sans",a>750?f+=" Extrabold":a>650?f+=" Bold":a>550?f+=" Semibold":a>350?f+=" Regular":f+=" Light"):s.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(f="Klokantech Noto Sans",s[3]==="CJK"&&(f+=" CJK"),f+=a>500?" Bold":" Regular")),l&&(f+=" Italic"),f==="Open Sans Regular Italic"?f="Open Sans Italic":f==="Open Sans Regular Bold"?f="Open Sans Bold":f==="Open Sans Regular Bold Italic"?f="Open Sans Bold Italic":f==="Klokantech Noto Sans Regular Italic"&&(f="Klokantech Noto Sans Italic"),Ide(f)||(f=r);var h=f.split(", ");return h}});var CH=me((Hbe,kH)=>{"use strict";var Ude=Bt(),MH=AH(),km=Oc().traceLayerPrefix,cu={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function SH(e,t,r,i){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=r,this.isHidden=i,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:km+t+"-fill",line:km+t+"-line",circle:km+t+"-circle",symbol:km+t+"-symbol",cluster:km+t+"-cluster",clusterCount:km+t+"-cluster-count"},this.below=null}var x1=SH.prototype;x1.addSource=function(e,t,r){var i={type:"geojson",data:t.geojson};r&&r.enabled&&Ude.extendFlat(i,{cluster:!0,clusterMaxZoom:r.maxzoom});var a=this.subplot.map.getSource(this.sourceIds[e]);a?a.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],i)};x1.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};x1.addLayer=function(e,t,r){var i={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(i.filter=t.filter);for(var a=this.layerIds[e],s,l=this.subplot.getMapLayers(),f=0;f<l.length;f++)if(l[f].id===a){s=!0;break}s?(this.subplot.setOptions(a,"setLayoutProperty",i.layout),i.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",i.paint)):this.subplot.addLayer(i,r)};x1.update=function(t){var r=t[0].trace,i=this.subplot,a=i.map,s=MH(i.gd,t),l=i.belowLookup["trace-"+this.uid],f=!!(r.cluster&&r.cluster.enabled),h=!!this.clusterEnabled,v=this;function m(q){q||v.addSource("circle",s.circle,r.cluster);for(var z=cu.cluster,N=0;N<z.length;N++){var H=z[N],V=s[H];v.addLayer(H,V,l)}}function _(q){for(var z=cu.cluster,N=z.length-1;N>=0;N--){var H=z[N];a.removeLayer(v.layerIds[H])}q||a.removeSource(v.sourceIds.circle)}function T(q){for(var z=cu.nonCluster,N=0;N<z.length;N++){var H=z[N],V=s[H];q||v.addSource(H,V),v.addLayer(H,V,l)}}function M(q){for(var z=cu.nonCluster,N=z.length-1;N>=0;N--){var H=z[N];a.removeLayer(v.layerIds[H]),q||a.removeSource(v.sourceIds[H])}}function C(q){h?_(q):M(q)}function E(q){f?m(q):T(q)}function L(){for(var q=f?cu.cluster:cu.nonCluster,z=0;z<q.length;z++){var N=q[z],H=s[N];H&&(i.setOptions(v.layerIds[N],"setLayoutProperty",H.layout),H.layout.visibility==="visible"&&(N!=="cluster"&&v.setSourceData(N,H),i.setOptions(v.layerIds[N],"setPaintProperty",H.paint)))}}var I=this.isHidden,O=r.visible!==!0;O?I||C():I?O||E():h!==f?(C(),E()):(this.below!==l&&(C(!0),E(!0)),L()),this.clusterEnabled=f,this.isHidden=O,this.below=l,t[0].trace._glTrace=this};x1.dispose=function(){for(var t=this.subplot.map,r=this.clusterEnabled?cu.cluster:cu.nonCluster,i=r.length-1;i>=0;i--){var a=r[i];t.removeLayer(this.layerIds[a]),t.removeSource(this.sourceIds[a])}};kH.exports=function(t,r){var i=r[0].trace,a=i.cluster&&i.cluster.enabled,s=i.visible!==!0,l=new SH(t,i.uid,a,s),f=MH(t.gd,r),h=l.below=t.belowLookup["trace-"+i.uid],v,m,_;if(a)for(l.addSource("circle",f.circle,i.cluster),v=0;v<cu.cluster.length;v++)m=cu.cluster[v],_=f[m],l.addLayer(m,_,h);else for(v=0;v<cu.nonCluster.length;v++)m=cu.nonCluster[v],_=f[m],l.addSource(m,_,i.cluster),l.addLayer(m,_,h);return r[0].trace._glTrace=l,l}});var Zb=me((Gbe,LH)=>{"use strict";var Vde=Nf(),bA=Bt(),Hde=uT(),Gde=bA.fillText,Zde=Zi().BADNUM,Yde=Oc().traceLayerPrefix;function Wde(e,t,r){var i=e.cd,a=i[0].trace,s=e.xa,l=e.ya,f=e.subplot,h=[],v=Yde+a.uid+"-circle",m=a.cluster&&a.cluster.enabled;if(m){var _=f.map.queryRenderedFeatures(null,{layers:[v]});h=_.map(function(W){return W.id})}var T=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),M=T*360,C=t-M;function E(W){var J=W.lonlat;if(J[0]===Zde||m&&h.indexOf(W.i+1)===-1)return 1/0;var ee=bA.modHalf(J[0],360),ie=J[1],oe=f.project([ee,ie]),fe=oe.x-s.c2p([C,ie]),le=oe.y-l.c2p([ee,r]),Te=Math.max(3,W.mrc||0);return Math.max(Math.sqrt(fe*fe+le*le)-Te,1-3/Te)}if(Vde.getClosest(i,E,e),e.index!==!1){var L=i[e.index],I=L.lonlat,O=[bA.modHalf(I[0],360)+M,I[1]],q=s.c2p(O),z=l.c2p(O),N=L.mrc||1;e.x0=q-N,e.x1=q+N,e.y0=z-N,e.y1=z+N;var H={};H[a.subplot]={_subplot:f};var V=a._module.formatLabels(L,a,H);return e.lonLabel=V.lonLabel,e.latLabel=V.latLabel,e.color=Hde(a,L),e.extraText=EH(a,L,i[0].t.labels),e.hovertemplate=a.hovertemplate,[e]}}function EH(e,t,r){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,a=i.split("+"),s=a.indexOf("all")!==-1,l=a.indexOf("lon")!==-1,f=a.indexOf("lat")!==-1,h=t.lonlat,v=[];function m(_){return _+"\xB0"}return s||l&&f?v.push("("+m(h[1])+", "+m(h[0])+")"):l?v.push(r.lon+m(h[0])):f&&v.push(r.lat+m(h[1])),(s||a.indexOf("text")!==-1)&&Gde(t,e,v),v.join("<br>")}LH.exports={hoverPoints:Wde,getExtraText:EH}});var PH=me((Zbe,DH)=>{"use strict";DH.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t}});var IH=me((Ybe,zH)=>{"use strict";var Xde=Bt(),jde=rs(),Jde=Zi().BADNUM;zH.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],f=i[0].trace,h;if(!jde.hasMarkers(f))return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++){var v=i[h],m=v.lonlat;if(m[0]!==Jde){var _=[Xde.modHalf(m[0],360),m[1]],T=[a.c2p(_),s.c2p(_)];r.contains(T,null,h,t)?(l.push({pointNumber:h,lon:m[0],lat:m[1]}),v.selected=1):v.selected=0}}return l}});var AA=me((wA,TA)=>{(function(e,t){typeof wA=="object"&&typeof TA!="undefined"?TA.exports=t():(e=e||self,e.mapboxgl=t())})(wA,function(){"use strict";var e,t,r;function i(a,s){if(!e)e=s;else if(!t)t=s;else{var l="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",f={};e(f),r=s(f),typeof window!="undefined"&&(r.workerUrl=window.URL.createObjectURL(new Blob([l],{type:"text/javascript"})))}}return i(["exports"],function(a){"use strict";function s(n,o){return o={exports:{}},n(o,o.exports),o.exports}var l="1.13.4",f=h;function h(n,o,u,p){this.cx=3*n,this.bx=3*(u-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=p,this.p2x=u,this.p2y=p}h.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},h.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},h.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},h.prototype.solveCurveX=function(n,o){typeof o=="undefined"&&(o=1e-6);var u,p,x,A,k;for(x=n,k=0;k<8;k++){if(A=this.sampleCurveX(x)-n,Math.abs(A)<o)return x;var F=this.sampleCurveDerivativeX(x);if(Math.abs(F)<1e-6)break;x=x-A/F}if(u=0,p=1,x=n,x<u)return u;if(x>p)return p;for(;u<p;){if(A=this.sampleCurveX(x),Math.abs(A-n)<o)return x;n>A?u=x:p=x,x=(p-u)*.5+u}return x},h.prototype.solve=function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))};var v=m;function m(n,o){this.x=n,this.y=o}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,o){return this.clone()._rotateAround(n,o)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var o=n.x-this.x,u=n.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,o){return Math.atan2(this.x*o-this.y*n,this.x*n+this.y*o)},_matMult:function(n){var o=n[0]*this.x+n[1]*this.y,u=n[2]*this.x+n[3]*this.y;return this.x=o,this.y=u,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var o=Math.cos(n),u=Math.sin(n),p=o*this.x-u*this.y,x=u*this.x+o*this.y;return this.x=p,this.y=x,this},_rotateAround:function(n,o){var u=Math.cos(n),p=Math.sin(n),x=o.x+u*(this.x-o.x)-p*(this.y-o.y),A=o.y+p*(this.x-o.x)+u*(this.y-o.y);return this.x=x,this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(n){return n instanceof m?n:Array.isArray(n)?new m(n[0],n[1]):n};var _=typeof self!="undefined"?self:{};function T(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(var u=0;u<n.length;u++)if(!T(n[u],o[u]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object")return!1;var p=Object.keys(n);if(p.length!==Object.keys(o).length)return!1;for(var x in n)if(!T(n[x],o[x]))return!1;return!0}return n===o}var M=Math.pow(2,53)-1;function C(n){if(n<=0)return 0;if(n>=1)return 1;var o=n*n,u=o*n;return 4*(n<.5?u:3*(n-o)+u-.75)}function E(n,o,u,p){var x=new f(n,o,u,p);return function(A){return x.solve(A)}}var L=E(.25,.1,.25,1);function I(n,o,u){return Math.min(u,Math.max(o,n))}function O(n,o,u){var p=u-o,x=((n-o)%p+p)%p+o;return x===o?u:x}function q(n,o,u){if(!n.length)return u(null,[]);var p=n.length,x=new Array(n.length),A=null;n.forEach(function(k,F){o(k,function(Y,j){Y&&(A=Y),x[F]=j,--p===0&&u(A,x)})})}function z(n){var o=[];for(var u in n)o.push(n[u]);return o}function N(n,o){var u=[];for(var p in n)p in o||u.push(p);return u}function H(n){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var p=0,x=o;p<x.length;p+=1){var A=x[p];for(var k in A)n[k]=A[k]}return n}function V(n,o){for(var u={},p=0;p<o.length;p++){var x=o[p];x in n&&(u[x]=n[x])}return u}var W=1;function J(){return W++}function ee(){function n(o){return o?(o^Math.random()*16>>o/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}return n()}function ie(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function oe(n){return n?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n):!1}function fe(n,o){n.forEach(function(u){o[u]&&(o[u]=o[u].bind(o))})}function le(n,o){return n.indexOf(o,n.length-o.length)!==-1}function Te(n,o,u){var p={};for(var x in n)p[x]=o.call(u||this,n[x],x,n);return p}function Se(n,o,u){var p={};for(var x in n)o.call(u||this,n[x],x,n)&&(p[x]=n[x]);return p}function Me(n){return Array.isArray(n)?n.map(Me):typeof n=="object"&&n?Te(n,Me):n}function Ae(n,o){for(var u=0;u<n.length;u++)if(o.indexOf(n[u])>=0)return!0;return!1}var pe={};function ke(n){pe[n]||(typeof console!="undefined"&&console.warn(n),pe[n]=!0)}function Ee(n,o,u){return(u.y-n.y)*(o.x-n.x)>(o.y-n.y)*(u.x-n.x)}function Xe(n){for(var o=0,u=0,p=n.length,x=p-1,A=void 0,k=void 0;u<p;x=u++)A=n[u],k=n[x],o+=(k.x-A.x)*(A.y+k.y);return o}function lt(n){var o=n[0],u=n[1],p=n[2];return u+=90,u*=Math.PI/180,p*=Math.PI/180,{x:o*Math.cos(u)*Math.sin(p),y:o*Math.sin(u)*Math.sin(p),z:o*Math.cos(p)}}function it(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function _t(n){var o=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,u={};if(n.replace(o,function(x,A,k,F){var Y=k||F;return u[A]=Y?Y.toLowerCase():!0,""}),u["max-age"]){var p=parseInt(u["max-age"],10);isNaN(p)?delete u["max-age"]:u["max-age"]=p}return u}var Ye=null;function kt(n){if(Ye==null){var o=n.navigator?n.navigator.userAgent:null;Ye=!!n.safari||!!(o&&(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ye}function st(n){try{var o=_[n];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch(u){return!1}}function dt(n){return _.btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(o,u){return String.fromCharCode(+("0x"+u))}))}function It(n){return decodeURIComponent(_.atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var yt=_.performance&&_.performance.now?_.performance.now.bind(_.performance):Date.now.bind(Date),de=_.requestAnimationFrame||_.mozRequestAnimationFrame||_.webkitRequestAnimationFrame||_.msRequestAnimationFrame,ze=_.cancelAnimationFrame||_.mozCancelAnimationFrame||_.webkitCancelAnimationFrame||_.msCancelAnimationFrame,_e,Ue,at={now:yt,frame:function(o){var u=de(o);return{cancel:function(){return ze(u)}}},getImageData:function(o,u){u===void 0&&(u=0);var p=_.document.createElement("canvas"),x=p.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return p.width=o.width,p.height=o.height,x.drawImage(o,0,0,o.width,o.height),x.getImageData(-u,-u,o.width+2*u,o.height+2*u)},resolveURL:function(o){return _e||(_e=_.document.createElement("a")),_e.href=o,_e.href},hardwareConcurrency:_.navigator&&_.navigator.hardwareConcurrency||4,get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return _.matchMedia?(Ue==null&&(Ue=_.matchMedia("(prefers-reduced-motion: reduce)")),Ue.matches):!1}},Je={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ct={supported:!1,testSupport:Dt},wt,xt=!1,qt,Ut=!1;_.document&&(qt=_.document.createElement("img"),qt.onload=function(){wt&&Mt(wt),wt=null,Ut=!0},qt.onerror=function(){xt=!0,wt=null},qt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function Dt(n){xt||!qt||(Ut?Mt(n):wt=n)}function Mt(n){var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,qt),n.isContextLost())return;Ct.supported=!0}catch(u){}n.deleteTexture(o),xt=!0}var Zt="01";function Yt(){for(var n="1",o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",u="",p=0;p<10;p++)u+=o[Math.floor(Math.random()*62)];var x=12*60*60*1e3,A=[n,Zt,u].join(""),k=Date.now()+x;return{token:A,tokenExpiresAt:k}}var Be=function(o,u){this._transformRequestFn=o,this._customAccessToken=u,this._createSkuToken()};Be.prototype._createSkuToken=function(){var o=Yt();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},Be.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Be.prototype.transformRequest=function(o,u){return this._transformRequestFn?this._transformRequestFn(o,u)||{url:o}:{url:o}},Be.prototype.normalizeStyleURL=function(o,u){if(!ut(o))return o;var p=Ot(o);return p.path="/styles/v1"+p.path,this._makeAPIURL(p,this._customAccessToken||u)},Be.prototype.normalizeGlyphsURL=function(o,u){if(!ut(o))return o;var p=Ot(o);return p.path="/fonts/v1"+p.path,this._makeAPIURL(p,this._customAccessToken||u)},Be.prototype.normalizeSourceURL=function(o,u){if(!ut(o))return o;var p=Ot(o);return p.path="/v4/"+p.authority+".json",p.params.push("secure"),this._makeAPIURL(p,this._customAccessToken||u)},Be.prototype.normalizeSpriteURL=function(o,u,p,x){var A=Ot(o);return ut(o)?(A.path="/styles/v1"+A.path+"/sprite"+u+p,this._makeAPIURL(A,this._customAccessToken||x)):(A.path+=""+u+p,er(A))},Be.prototype.normalizeTileURL=function(o,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!ut(o))return o;var p=Ot(o),x=/(\.(png|jpg)\d*)(?=$)/,A=/^.+\/v4\//,k=at.devicePixelRatio>=2||u===512?"@2x":"",F=Ct.supported?".webp":"$1";p.path=p.path.replace(x,""+k+F),p.path=p.path.replace(A,"/"),p.path="/v4"+p.path;var Y=this._customAccessToken||ht(p.params)||Je.ACCESS_TOKEN;return Je.REQUIRE_ACCESS_TOKEN&&Y&&this._skuToken&&p.params.push("sku="+this._skuToken),this._makeAPIURL(p,Y)},Be.prototype.canonicalizeTileURL=function(o,u){var p="/v4/",x=/\.[\w]+$/,A=Ot(o);if(!A.path.match(/(^\/v4\/)/)||!A.path.match(x))return o;var k="mapbox://tiles/";k+=A.path.replace(p,"");var F=A.params;return u&&(F=F.filter(function(Y){return!Y.match(/^access_token=/)})),F.length&&(k+="?"+F.join("&")),k},Be.prototype.canonicalizeTileset=function(o,u){for(var p=u?ut(u):!1,x=[],A=0,k=o.tiles||[];A<k.length;A+=1){var F=k[A];Pr(F)?x.push(this.canonicalizeTileURL(F,p)):x.push(F)}return x},Be.prototype._makeAPIURL=function(o,u){var p="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=Ot(Je.API_URL);if(o.protocol=x.protocol,o.authority=x.authority,o.protocol==="http"){var A=o.params.indexOf("secure");A>=0&&o.params.splice(A,1)}if(x.path!=="/"&&(o.path=""+x.path+o.path),!Je.REQUIRE_ACCESS_TOKEN)return er(o);if(u=u||Je.ACCESS_TOKEN,!u)throw new Error("An API access token is required to use Mapbox GL. "+p);if(u[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+p);return o.params=o.params.filter(function(k){return k.indexOf("access_token")===-1}),o.params.push("access_token="+u),er(o)};function ut(n){return n.indexOf("mapbox:")===0}var sr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Pr(n){return sr.test(n)}function Et(n){return n.indexOf("sku=")>0&&Pr(n)}function ht(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o],x=p.match(/^access_token=(.*)$/);if(x)return x[1]}return null}var pt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ot(n){var o=n.match(pt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function er(n){var o=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+o}var Ht="mapbox.eventData";function Kt(n){if(!n)return null;var o=n.split(".");if(!o||o.length!==3)return null;try{var u=JSON.parse(It(o[1]));return u}catch(p){return null}}var pr=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};pr.prototype.getStorageKey=function(o){var u=Kt(Je.ACCESS_TOKEN),p="";return u&&u.u?p=dt(u.u):p=Je.ACCESS_TOKEN||"",o?Ht+"."+o+":"+p:Ht+":"+p},pr.prototype.fetchEventData=function(){var o=st("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(o)try{var x=_.localStorage.getItem(u);x&&(this.eventData=JSON.parse(x));var A=_.localStorage.getItem(p);A&&(this.anonId=A)}catch(k){ke("Unable to read from LocalStorage")}},pr.prototype.saveEventData=function(){var o=st("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(o)try{_.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(u,JSON.stringify(this.eventData))}catch(x){ke("Unable to write to LocalStorage")}},pr.prototype.processRequests=function(o){},pr.prototype.postEvent=function(o,u,p,x){var A=this;if(Je.EVENTS_URL){var k=Ot(Je.EVENTS_URL);k.params.push("access_token="+(x||Je.ACCESS_TOKEN||""));var F={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:l,skuId:Zt,userId:this.anonId},Y=u?H(F,u):F,j={url:er(k),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Y])};this.pendingRequest=We(j,function(Q){A.pendingRequest=null,p(Q),A.saveEventData(),A.processRequests(x)})}},pr.prototype.queueRequest=function(o,u){this.queue.push(o),this.processRequests(u)};var yr=function(n){function o(){n.call(this,"map.load"),this.success={},this.skuToken=""}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.postMapLoadEvent=function(p,x,A,k){this.skuToken=A,(Je.EVENTS_URL&&k||Je.ACCESS_TOKEN&&Array.isArray(p)&&p.some(function(F){return ut(F)||Pr(F)}))&&this.queueRequest({id:x,timestamp:Date.now()},k)},o.prototype.processRequests=function(p){var x=this;if(!(this.pendingRequest||this.queue.length===0)){var A=this.queue.shift(),k=A.id,F=A.timestamp;k&&this.success[k]||(this.anonId||this.fetchEventData(),oe(this.anonId)||(this.anonId=ee()),this.postEvent(F,{skuToken:this.skuToken},function(Y){Y||k&&(x.success[k]=!0)},p))}},o}(pr),ur=function(n){function o(u){n.call(this,"appUserTurnstile"),this._customAccessToken=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.postTurnstileEvent=function(p,x){Je.EVENTS_URL&&Je.ACCESS_TOKEN&&Array.isArray(p)&&p.some(function(A){return ut(A)||Pr(A)})&&this.queueRequest(Date.now(),x)},o.prototype.processRequests=function(p){var x=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var A=Kt(Je.ACCESS_TOKEN),k=A?A.u:Je.ACCESS_TOKEN,F=k!==this.eventData.tokenU;oe(this.anonId)||(this.anonId=ee(),F=!0);var Y=this.queue.shift();if(this.eventData.lastSuccess){var j=new Date(this.eventData.lastSuccess),Q=new Date(Y),ne=(Y-this.eventData.lastSuccess)/(24*60*60*1e3);F=F||ne>=1||ne<-1||j.getDate()!==Q.getDate()}else F=!0;if(!F)return this.processRequests();this.postEvent(Y,{"enabled.telemetry":!1},function(ge){ge||(x.eventData.lastSuccess=Y,x.eventData.tokenU=k)},p)}},o}(pr),Lt=new ur,Fe=Lt.postTurnstileEvent.bind(Lt),Ve=new yr,bt=Ve.postMapLoadEvent.bind(Ve),Tt="mapbox-tiles",mr=500,Ar=50,Mr=1e3*60*7,Gr;function pa(){_.caches&&!Gr&&(Gr=_.caches.open(Tt))}var Ca;function ii(n,o){if(Ca===void 0)try{new Response(new ReadableStream),Ca=!0}catch(u){Ca=!1}Ca?o(n.body):n.blob().then(o)}function wi(n,o,u){if(pa(),!!Gr){var p={status:o.status,statusText:o.statusText,headers:new _.Headers};o.headers.forEach(function(k,F){return p.headers.set(F,k)});var x=_t(o.headers.get("Cache-Control")||"");if(!x["no-store"]){x["max-age"]&&p.headers.set("Expires",new Date(u+x["max-age"]*1e3).toUTCString());var A=new Date(p.headers.get("Expires")).getTime()-u;A<Mr||ii(o,function(k){var F=new _.Response(k,p);pa(),Gr&&Gr.then(function(Y){return Y.put(vi(n.url),F)}).catch(function(Y){return ke(Y.message)})})}}}function vi(n){var o=n.indexOf("?");return o<0?n:n.slice(0,o)}function Fi(n,o){if(pa(),!Gr)return o(null);var u=vi(n.url);Gr.then(function(p){p.match(u).then(function(x){var A=Gi(x);p.delete(u),A&&p.put(u,x.clone()),o(null,x,A)}).catch(o)}).catch(o)}function Gi(n){if(!n)return!1;var o=new Date(n.headers.get("Expires")||0),u=_t(n.headers.get("Cache-Control")||"");return o>Date.now()&&!u["no-cache"]}var vn=1/0;function nn(n){vn++,vn>Ar&&(n.getActor().send("enforceCacheSizeLimit",mr),vn=0)}function Ki(n){pa(),Gr&&Gr.then(function(o){o.keys().then(function(u){for(var p=0;p<u.length-n;p++)o.delete(u[p])})})}function ir(n){var o=_.caches.delete(Tt);n&&o.catch(n).then(function(){return n()})}function oi(n,o){mr=n,Ar=o}var Sa;function la(){return Sa==null&&(Sa=_.OffscreenCanvas&&new _.OffscreenCanvas(1,1).getContext("2d")&&typeof _.createImageBitmap=="function"),Sa}var Ci={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ci);var ma=function(n){function o(u,p,x){p===401&&Pr(x)&&(u+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,u),this.status=p,this.url=x,this.name=this.constructor.name,this.message=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},o}(Error),se=it()?function(){return self.worker&&self.worker.referrer}:function(){return(_.location.protocol==="blob:"?_.parent:_).location.href},te=function(n){return/^file:/.test(n)||/^file:/.test(se())&&!/^\w+:/.test(n)};function ue(n,o){var u=new _.AbortController,p=new _.Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:se(),signal:u.signal}),x=!1,A=!1,k=Et(p.url);n.type==="json"&&p.headers.set("Accept","application/json");var F=function(j,Q,ne){if(!A){if(j&&j.message!=="SecurityError"&&ke(j),Q&&ne)return Y(Q);var ge=Date.now();_.fetch(p).then(function(ve){if(ve.ok){var Ce=k?ve.clone():null;return Y(ve,Ce,ge)}else return o(new ma(ve.statusText,ve.status,n.url))}).catch(function(ve){ve.code!==20&&o(new Error(ve.message))})}},Y=function(j,Q,ne){(n.type==="arrayBuffer"?j.arrayBuffer():n.type==="json"?j.json():j.text()).then(function(ge){A||(Q&&ne&&wi(p,Q,ne),x=!0,o(null,ge,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(function(ge){A||o(new Error(ge.message))})};return k?Fi(p,F):F(null,null),{cancel:function(){A=!0,x||u.abort()}}}function he(n,o){var u=new _.XMLHttpRequest;u.open(n.method||"GET",n.url,!0),n.type==="arrayBuffer"&&(u.responseType="arraybuffer");for(var p in n.headers)u.setRequestHeader(p,n.headers[p]);return n.type==="json"&&(u.responseType="text",u.setRequestHeader("Accept","application/json")),u.withCredentials=n.credentials==="include",u.onerror=function(){o(new Error(u.statusText))},u.onload=function(){if((u.status>=200&&u.status<300||u.status===0)&&u.response!==null){var x=u.response;if(n.type==="json")try{x=JSON.parse(u.response)}catch(A){return o(A)}o(null,x,u.getResponseHeader("Cache-Control"),u.getResponseHeader("Expires"))}else o(new ma(u.statusText,u.status,n.url))},u.send(n.body),{cancel:function(){return u.abort()}}}var Le=function(n,o){if(!te(n.url)){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return ue(n,o);if(it()&&self.worker&&self.worker.actor){var u=!0;return self.worker.actor.send("getResource",n,o,void 0,u)}}return he(n,o)},Ne=function(n,o){return Le(H(n,{type:"json"}),o)},et=function(n,o){return Le(H(n,{type:"arrayBuffer"}),o)},We=function(n,o){return Le(H(n,{method:"POST"}),o)};function mt(n){var o=_.document.createElement("a");return o.href=n,o.protocol===_.document.location.protocol&&o.host===_.document.location.host}var Pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ft(n,o,u,p){var x=new _.Image,A=_.URL;x.onload=function(){o(null,x),A.revokeObjectURL(x.src),x.onload=null,_.requestAnimationFrame(function(){x.src=Pt})},x.onerror=function(){return o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var k=new _.Blob([new Uint8Array(n)],{type:"image/png"});x.cacheControl=u,x.expires=p,x.src=n.byteLength?A.createObjectURL(k):Pt}function tr(n,o){var u=new _.Blob([new Uint8Array(n)],{type:"image/png"});_.createImageBitmap(u).then(function(p){o(null,p)}).catch(function(p){o(new Error("Could not load image because of "+p.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var Wt,Sr,Zr=function(){Wt=[],Sr=0};Zr();var Or=function(n,o){if(Ct.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Sr>=Je.MAX_PARALLEL_IMAGE_REQUESTS){var u={requestParameters:n,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wt.push(u),u}Sr++;var p=!1,x=function(){if(!p)for(p=!0,Sr--;Wt.length&&Sr<Je.MAX_PARALLEL_IMAGE_REQUESTS;){var k=Wt.shift(),F=k.requestParameters,Y=k.callback,j=k.cancelled;j||(k.cancel=Or(F,Y).cancel)}},A=et(n,function(k,F,Y,j){x(),k?o(k):F&&(la()?tr(F,o):Ft(F,o,Y,j))});return{cancel:function(){A.cancel(),x()}}},ca=function(n,o){var u=_.document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(var p=0;p<n.length;p++){var x=_.document.createElement("source");mt(n[p])||(u.crossOrigin="Anonymous"),x.src=n[p],u.appendChild(x)}return{cancel:function(){}}};function ua(n,o,u){var p=u[n]&&u[n].indexOf(o)!==-1;p||(u[n]=u[n]||[],u[n].push(o))}function qa(n,o,u){if(u&&u[n]){var p=u[n].indexOf(o);p!==-1&&u[n].splice(p,1)}}var ri=function(o,u){u===void 0&&(u={}),H(this,u),this.type=o},Yr=function(n){function o(u,p){p===void 0&&(p={}),n.call(this,"error",H({error:u},p))}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(ri),gr=function(){};gr.prototype.on=function(o,u){return this._listeners=this._listeners||{},ua(o,u,this._listeners),this},gr.prototype.off=function(o,u){return qa(o,u,this._listeners),qa(o,u,this._oneTimeListeners),this},gr.prototype.once=function(o,u){return this._oneTimeListeners=this._oneTimeListeners||{},ua(o,u,this._oneTimeListeners),this},gr.prototype.fire=function(o,u){typeof o=="string"&&(o=new ri(o,u||{}));var p=o.type;if(this.listens(p)){o.target=this;for(var x=this._listeners&&this._listeners[p]?this._listeners[p].slice():[],A=0,k=x;A<k.length;A+=1){var F=k[A];F.call(this,o)}for(var Y=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[],j=0,Q=Y;j<Q.length;j+=1){var ne=Q[j];qa(p,ne,this._oneTimeListeners),ne.call(this,o)}var ge=this._eventedParent;ge&&(H(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ge.fire(o))}else o instanceof Yr&&console.error(o.error);return this},gr.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},gr.prototype.setEventedParent=function(o,u){return this._eventedParent=o,this._eventedParentData=u,this};var $r=8,ga={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},nr={"*":{type:"source"}},Ti=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Ea={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},si={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},fa={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},In={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Co={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},bs={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ga={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Kn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],du={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ui={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pl={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lp={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Gc={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zc={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pu={type:"array",value:"*"},ml={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},up={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},$u={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Kf={type:"array",value:"*",minimum:1},$i={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Go=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],mo={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},yl={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Zo={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},mu={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fp={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},wv={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ef={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Tv={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Av={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},lo={"*":{type:"string"}},Xt={$version:$r,$root:ga,sources:nr,source:Ti,source_vector:Ea,source_raster:si,source_raster_dem:fa,source_geojson:In,source_video:Co,source_image:bs,layer:Ga,layout:Kn,layout_background:du,layout_fill:Ui,layout_circle:pl,layout_heatmap:lp,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Gc,layout_symbol:Zc,layout_raster:xv,layout_hillshade:bv,filter:pu,filter_operator:ml,geometry_type:up,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:$u,expression:Kf,light:$i,paint:Go,paint_fill:mo,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:yl,paint_circle:Zo,paint_heatmap:mu,paint_symbol:fp,paint_raster:wv,paint_hillshade:ef,paint_background:Tv,transition:Av,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:lo},Ur=function(o,u,p,x){this.message=(o?o+": ":"")+p,x&&(this.identifier=x),u!=null&&u.__line__&&(this.line=u.__line__)};function cp(n){var o=n.key,u=n.value;return u?[new Ur(o,u,"constants have been deprecated as of v8")]:[]}function yu(n){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var p=0,x=o;p<x.length;p+=1){var A=x[p];for(var k in A)n[k]=A[k]}return n}function on(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function gl(n){if(Array.isArray(n))return n.map(gl);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var o={};for(var u in n)o[u]=gl(n[u]);return o}return on(n)}var ws=function(n){function o(u,p){n.call(this,p),this.message=p,this.key=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(Error),tf=function(o,u){u===void 0&&(u=[]),this.parent=o,this.bindings={};for(var p=0,x=u;p<x.length;p+=1){var A=x[p],k=A[0],F=A[1];this.bindings[k]=F}};tf.prototype.concat=function(o){return new tf(this,o)},tf.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},tf.prototype.has=function(o){return this.bindings[o]?!0:this.parent?this.parent.has(o):!1};var rf={kind:"null"},Er={kind:"number"},ba={kind:"string"},wa={kind:"boolean"},Ts={kind:"color"},_l={kind:"object"},Aa={kind:"value"},Ws={kind:"error"},gu={kind:"collator"},fs={kind:"formatted"},xl={kind:"resolvedImage"};function yo(n,o){return{kind:"array",itemType:n,N:o}}function Ei(n){if(n.kind==="array"){var o=Ei(n.itemType);return typeof n.N=="number"?"array<"+o+", "+n.N+">":n.itemType.kind==="value"?"array":"array<"+o+">"}else return n.kind}var As=[rf,Er,ba,wa,Ts,fs,_l,yo(Aa),xl];function cs(n,o){if(o.kind==="error")return null;if(n.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!cs(n.itemType,o.itemType))&&(typeof n.N!="number"||n.N===o.N))return null}else{if(n.kind===o.kind)return null;if(n.kind==="value")for(var u=0,p=As;u<p.length;u+=1){var x=p[u];if(!cs(x,o))return null}}return"Expected "+Ei(n)+" but found "+Ei(o)+" instead."}function Yc(n,o){return o.some(function(u){return u.kind===n.kind})}function _u(n,o){return o.some(function(u){return u==="null"?n===null:u==="array"?Array.isArray(n):u==="object"?n&&!Array.isArray(n)&&typeof n=="object":u===typeof n})}var Pm=s(function(n,o){var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(j){return j=Math.round(j),j<0?0:j>255?255:j}function x(j){return j<0?0:j>1?1:j}function A(j){return j[j.length-1]==="%"?p(parseFloat(j)/100*255):p(parseInt(j))}function k(j){return j[j.length-1]==="%"?x(parseFloat(j)/100):x(parseFloat(j))}function F(j,Q,ne){return ne<0?ne+=1:ne>1&&(ne-=1),ne*6<1?j+(Q-j)*ne*6:ne*2<1?Q:ne*3<2?j+(Q-j)*(2/3-ne)*6:j}function Y(j){var Q=j.replace(/ /g,"").toLowerCase();if(Q in u)return u[Q].slice();if(Q[0]==="#"){if(Q.length===4){var ne=parseInt(Q.substr(1),16);return ne>=0&&ne<=4095?[(ne&3840)>>4|(ne&3840)>>8,ne&240|(ne&240)>>4,ne&15|(ne&15)<<4,1]:null}else if(Q.length===7){var ne=parseInt(Q.substr(1),16);return ne>=0&&ne<=16777215?[(ne&16711680)>>16,(ne&65280)>>8,ne&255,1]:null}return null}var ge=Q.indexOf("("),ve=Q.indexOf(")");if(ge!==-1&&ve+1===Q.length){var Ce=Q.substr(0,ge),qe=Q.substr(ge+1,ve-(ge+1)).split(","),ft=1;switch(Ce){case"rgba":if(qe.length!==4)return null;ft=k(qe.pop());case"rgb":return qe.length!==3?null:[A(qe[0]),A(qe[1]),A(qe[2]),ft];case"hsla":if(qe.length!==4)return null;ft=k(qe.pop());case"hsl":if(qe.length!==3)return null;var tt=(parseFloat(qe[0])%360+360)%360/360,St=k(qe[1]),gt=k(qe[2]),At=gt<=.5?gt*(St+1):gt+St-gt*St,Rt=gt*2-At;return[p(F(Rt,At,tt+1/3)*255),p(F(Rt,At,tt)*255),p(F(Rt,At,tt-1/3)*255),ft];default:return null}}return null}try{o.parseCSSColor=Y}catch(j){}}),Qf=Pm.parseCSSColor,ni=function(o,u,p,x){x===void 0&&(x=1),this.r=o,this.g=u,this.b=p,this.a=x};ni.parse=function(o){if(o){if(o instanceof ni)return o;if(typeof o=="string"){var u=Qf(o);if(u)return new ni(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}}},ni.prototype.toString=function(){var o=this.toArray(),u=o[0],p=o[1],x=o[2],A=o[3];return"rgba("+Math.round(u)+","+Math.round(p)+","+Math.round(x)+","+A+")"},ni.prototype.toArray=function(){var o=this,u=o.r,p=o.g,x=o.b,A=o.a;return A===0?[0,0,0,0]:[u*255/A,p*255/A,x*255/A,A]},ni.black=new ni(0,0,0,1),ni.white=new ni(1,1,1,1),ni.transparent=new ni(0,0,0,0),ni.red=new ni(1,0,0,1);var $f=function(o,u,p){o?this.sensitivity=u?"variant":"case":this.sensitivity=u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};$f.prototype.compare=function(o,u){return this.collator.compare(o,u)},$f.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Mv=function(o,u,p,x,A){this.text=o,this.image=u,this.scale=p,this.fontStack=x,this.textColor=A},xn=function(o){this.sections=o};xn.fromString=function(o){return new xn([new Mv(o,null,null,null,null)])},xn.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(o){return o.text.length!==0||o.image&&o.image.name.length!==0})},xn.factory=function(o){return o instanceof xn?o:xn.fromString(o)},xn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(o){return o.text}).join("")},xn.prototype.serialize=function(){for(var o=["format"],u=0,p=this.sections;u<p.length;u+=1){var x=p[u];if(x.image){o.push(["image",x.image.name]);continue}o.push(x.text);var A={};x.fontStack&&(A["text-font"]=["literal",x.fontStack.split(",")]),x.scale&&(A["font-scale"]=x.scale),x.textColor&&(A["text-color"]=["rgba"].concat(x.textColor.toArray())),o.push(A)}return o};var Rn=function(o){this.name=o.name,this.available=o.available};Rn.prototype.toString=function(){return this.name},Rn.fromString=function(o){return o?new Rn({name:o,available:!1}):null},Rn.prototype.serialize=function(){return["image",this.name]};function hp(n,o,u,p){if(!(typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255)){var x=typeof p=="number"?[n,o,u,p]:[n,o,u];return"Invalid rgba value ["+x.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof p=="undefined"||typeof p=="number"&&p>=0&&p<=1?null:"Invalid rgba value ["+[n,o,u,p].join(", ")+"]: 'a' must be between 0 and 1."}function af(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof ni)return!0;if(n instanceof $f)return!0;if(n instanceof xn)return!0;if(n instanceof Rn)return!0;if(Array.isArray(n)){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(!af(p))return!1}return!0}else if(typeof n=="object"){for(var x in n)if(!af(n[x]))return!1;return!0}else return!1}function sn(n){if(n===null)return rf;if(typeof n=="string")return ba;if(typeof n=="boolean")return wa;if(typeof n=="number")return Er;if(n instanceof ni)return Ts;if(n instanceof $f)return gu;if(n instanceof xn)return fs;if(n instanceof Rn)return xl;if(Array.isArray(n)){for(var o=n.length,u,p=0,x=n;p<x.length;p+=1){var A=x[p],k=sn(A);if(!u)u=k;else{if(u===k)continue;u=Aa;break}}return yo(u||Aa,o)}else return _l}function Eo(n){var o=typeof n;return n===null?"":o==="string"||o==="number"||o==="boolean"?String(n):n instanceof ni||n instanceof xn||n instanceof Rn?n.toString():JSON.stringify(n)}var Yo=function(o,u){this.type=o,this.value=u};Yo.parse=function(o,u){if(o.length!==2)return u.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!af(o[1]))return u.error("invalid value");var p=o[1],x=sn(p),A=u.expectedType;return x.kind==="array"&&x.N===0&&A&&A.kind==="array"&&(typeof A.N!="number"||A.N===0)&&(x=A),new Yo(x,p)},Yo.prototype.evaluate=function(){return this.value},Yo.prototype.eachChild=function(){},Yo.prototype.outputDefined=function(){return!0},Yo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ni?["rgba"].concat(this.value.toArray()):this.value instanceof xn?this.value.serialize():this.value};var dn=function(o){this.name="ExpressionEvaluationError",this.message=o};dn.prototype.toJSON=function(){return this.message};var ec={string:ba,number:Er,boolean:wa,object:_l},ln=function(o,u){this.type=o,this.args=u};ln.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var p=1,x,A=o[0];if(A==="array"){var k;if(o.length>2){var F=o[1];if(typeof F!="string"||!(F in ec)||F==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);k=ec[F],p++}else k=Aa;var Y;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);Y=o[2],p++}x=yo(k,Y)}else x=ec[A];for(var j=[];p<o.length;p++){var Q=u.parse(o[p],p,Aa);if(!Q)return null;j.push(Q)}return new ln(x,j)},ln.prototype.evaluate=function(o){for(var u=0;u<this.args.length;u++){var p=this.args[u].evaluate(o),x=cs(this.type,sn(p));if(x){if(u===this.args.length-1)throw new dn("Expected value to be of type "+Ei(this.type)+", but found "+Ei(sn(p))+" instead.")}else return p}return null},ln.prototype.eachChild=function(o){this.args.forEach(o)},ln.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},ln.prototype.serialize=function(){var o=this.type,u=[o.kind];if(o.kind==="array"){var p=o.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){u.push(p.kind);var x=o.N;(typeof x=="number"||this.args.length>1)&&u.push(x)}}return u.concat(this.args.map(function(A){return A.serialize()}))};var Wo=function(o){this.type=fs,this.sections=o};Wo.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var p=o[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");for(var x=[],A=!1,k=1;k<=o.length-1;++k){var F=o[k];if(A&&typeof F=="object"&&!Array.isArray(F)){A=!1;var Y=null;if(F["font-scale"]&&(Y=u.parse(F["font-scale"],1,Er),!Y))return null;var j=null;if(F["text-font"]&&(j=u.parse(F["text-font"],1,yo(ba)),!j))return null;var Q=null;if(F["text-color"]&&(Q=u.parse(F["text-color"],1,Ts),!Q))return null;var ne=x[x.length-1];ne.scale=Y,ne.font=j,ne.textColor=Q}else{var ge=u.parse(o[k],1,Aa);if(!ge)return null;var ve=ge.type.kind;if(ve!=="string"&&ve!=="value"&&ve!=="null"&&ve!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");A=!0,x.push({content:ge,scale:null,font:null,textColor:null})}}return new Wo(x)},Wo.prototype.evaluate=function(o){var u=function(p){var x=p.content.evaluate(o);return sn(x)===xl?new Mv("",x,null,null,null):new Mv(Eo(x),null,p.scale?p.scale.evaluate(o):null,p.font?p.font.evaluate(o).join(","):null,p.textColor?p.textColor.evaluate(o):null)};return new xn(this.sections.map(u))},Wo.prototype.eachChild=function(o){for(var u=0,p=this.sections;u<p.length;u+=1){var x=p[u];o(x.content),x.scale&&o(x.scale),x.font&&o(x.font),x.textColor&&o(x.textColor)}},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){for(var o=["format"],u=0,p=this.sections;u<p.length;u+=1){var x=p[u];o.push(x.content.serialize());var A={};x.scale&&(A["font-scale"]=x.scale.serialize()),x.font&&(A["text-font"]=x.font.serialize()),x.textColor&&(A["text-color"]=x.textColor.serialize()),o.push(A)}return o};var Xs=function(o){this.type=xl,this.input=o};Xs.parse=function(o,u){if(o.length!==2)return u.error("Expected two arguments.");var p=u.parse(o[1],1,ba);return p?new Xs(p):u.error("No image name provided.")},Xs.prototype.evaluate=function(o){var u=this.input.evaluate(o),p=Rn.fromString(u);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(u)>-1),p},Xs.prototype.eachChild=function(o){o(this.input)},Xs.prototype.outputDefined=function(){return!1},Xs.prototype.serialize=function(){return["image",this.input.serialize()]};var zm={"to-boolean":wa,"to-color":Ts,"to-number":Er,"to-string":ba},Xo=function(o,u){this.type=o,this.args=u};Xo.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var p=o[0];if((p==="to-boolean"||p==="to-string")&&o.length!==2)return u.error("Expected one argument.");for(var x=zm[p],A=[],k=1;k<o.length;k++){var F=u.parse(o[k],k,Aa);if(!F)return null;A.push(F)}return new Xo(x,A)},Xo.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var u,p,x=0,A=this.args;x<A.length;x+=1){var k=A[x];if(u=k.evaluate(o),p=null,u instanceof ni)return u;if(typeof u=="string"){var F=o.parseColor(u);if(F)return F}else if(Array.isArray(u)&&(u.length<3||u.length>4?p="Invalid rbga value "+JSON.stringify(u)+": expected an array containing either three or four numeric values.":p=hp(u[0],u[1],u[2],u[3]),!p))return new ni(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new dn(p||"Could not parse color from value '"+(typeof u=="string"?u:String(JSON.stringify(u)))+"'")}else if(this.type.kind==="number"){for(var Y=null,j=0,Q=this.args;j<Q.length;j+=1){var ne=Q[j];if(Y=ne.evaluate(o),Y===null)return 0;var ge=Number(Y);if(!isNaN(ge))return ge}throw new dn("Could not convert "+JSON.stringify(Y)+" to number.")}else return this.type.kind==="formatted"?xn.fromString(Eo(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Rn.fromString(Eo(this.args[0].evaluate(o))):Eo(this.args[0].evaluate(o))},Xo.prototype.eachChild=function(o){this.args.forEach(o)},Xo.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},Xo.prototype.serialize=function(){if(this.type.kind==="formatted")return new Wo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Xs(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild(function(u){o.push(u.serialize())}),o};var Im=["Unknown","Point","LineString","Polygon"],js=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};js.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},js.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Im[this.feature.type]:this.feature.type:null},js.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},js.prototype.canonicalID=function(){return this.canonical},js.prototype.properties=function(){return this.feature&&this.feature.properties||{}},js.prototype.parseColor=function(o){var u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=ni.parse(o)),u};var Fn=function(o,u,p,x){this.name=o,this.type=u,this._evaluate=p,this.args=x};Fn.prototype.evaluate=function(o){return this._evaluate(o,this.args)},Fn.prototype.eachChild=function(o){this.args.forEach(o)},Fn.prototype.outputDefined=function(){return!1},Fn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(o){return o.serialize()}))},Fn.parse=function(o,u){var p,x=o[0],A=Fn.definitions[x];if(!A)return u.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0);for(var k=Array.isArray(A)?A[0]:A.type,F=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,Y=F.filter(function(qr){var Br=qr[0];return!Array.isArray(Br)||Br.length===o.length-1}),j=null,Q=0,ne=Y;Q<ne.length;Q+=1){var ge=ne[Q],ve=ge[0],Ce=ge[1];j=new Ml(u.registry,u.path,null,u.scope);for(var qe=[],ft=!1,tt=1;tt<o.length;tt++){var St=o[tt],gt=Array.isArray(ve)?ve[tt-1]:ve.type,At=j.parse(St,1+qe.length,gt);if(!At){ft=!0;break}qe.push(At)}if(!ft){if(Array.isArray(ve)&&ve.length!==qe.length){j.error("Expected "+ve.length+" arguments, but found "+qe.length+" instead.");continue}for(var Rt=0;Rt<qe.length;Rt++){var Jt=Array.isArray(ve)?ve[Rt]:ve.type,dr=qe[Rt];j.concat(Rt+1).checkSubtype(Jt,dr.type)}if(j.errors.length===0)return new Fn(x,k,Ce,qe)}}if(Y.length===1)(p=u.errors).push.apply(p,j.errors);else{for(var cr=Y.length?Y:F,Fr=cr.map(function(qr){var Br=qr[0];return Rm(Br)}).join(" | "),Cr=[],Ir=1;Ir<o.length;Ir++){var Qr=u.parse(o[Ir],1+Cr.length);if(!Qr)return null;Cr.push(Ei(Qr.type))}u.error("Expected arguments of type "+Fr+", but found ("+Cr.join(", ")+") instead.")}return null},Fn.register=function(o,u){Fn.definitions=u;for(var p in u)o[p]=Fn};function Rm(n){return Array.isArray(n)?"("+n.map(Ei).join(", ")+")":"("+Ei(n.type)+"...)"}var bl=function(o,u,p){this.type=gu,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=u};bl.parse=function(o,u){if(o.length!==2)return u.error("Expected one argument.");var p=o[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");var x=u.parse(p["case-sensitive"]===void 0?!1:p["case-sensitive"],1,wa);if(!x)return null;var A=u.parse(p["diacritic-sensitive"]===void 0?!1:p["diacritic-sensitive"],1,wa);if(!A)return null;var k=null;return p.locale&&(k=u.parse(p.locale,1,ba),!k)?null:new bl(x,A,k)},bl.prototype.evaluate=function(o){return new $f(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},bl.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},bl.prototype.outputDefined=function(){return!1},bl.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var wl=8192;function Sv(n,o){n[0]=Math.min(n[0],o[0]),n[1]=Math.min(n[1],o[1]),n[2]=Math.max(n[2],o[0]),n[3]=Math.max(n[3],o[1])}function Fm(n){return(180+n)/360}function qm(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Wc(n,o){return!(n[0]<=o[0]||n[2]>=o[2]||n[1]<=o[1]||n[3]>=o[3])}function Nm(n,o){var u=Fm(n[0]),p=qm(n[1]),x=Math.pow(2,o.z);return[Math.round(u*x*wl),Math.round(p*x*wl)]}function Bm(n,o,u){var p=n[0]-o[0],x=n[1]-o[1],A=n[0]-u[0],k=n[1]-u[1];return p*k-A*x===0&&p*A<=0&&x*k<=0}function Om(n,o,u){return o[1]>n[1]!=u[1]>n[1]&&n[0]<(u[0]-o[0])*(n[1]-o[1])/(u[1]-o[1])+o[0]}function kv(n,o){for(var u=!1,p=0,x=o.length;p<x;p++)for(var A=o[p],k=0,F=A.length;k<F-1;k++){if(Bm(n,A[k],A[k+1]))return!1;Om(n,A[k],A[k+1])&&(u=!u)}return u}function Um(n,o){for(var u=0;u<o.length;u++)if(kv(n,o[u]))return!0;return!1}function Vm(n,o){return n[0]*o[1]-n[1]*o[0]}function Cv(n,o,u,p){var x=n[0]-u[0],A=n[1]-u[1],k=o[0]-u[0],F=o[1]-u[1],Y=p[0]-u[0],j=p[1]-u[1],Q=x*j-Y*A,ne=k*j-Y*F;return Q>0&&ne<0||Q<0&&ne>0}function vp(n,o,u,p){var x=[o[0]-n[0],o[1]-n[1]],A=[p[0]-u[0],p[1]-u[1]];return Vm(A,x)===0?!1:!!(Cv(n,o,u,p)&&Cv(u,p,n,o))}function dp(n,o,u){for(var p=0,x=u;p<x.length;p+=1)for(var A=x[p],k=0;k<A.length-1;++k)if(vp(n,o,A[k],A[k+1]))return!0;return!1}function Ev(n,o){for(var u=0;u<n.length;++u)if(!kv(n[u],o))return!1;for(var p=0;p<n.length-1;++p)if(dp(n[p],n[p+1],o))return!1;return!0}function Hm(n,o){for(var u=0;u<o.length;u++)if(Ev(n,o[u]))return!0;return!1}function Lv(n,o,u){for(var p=[],x=0;x<n.length;x++){for(var A=[],k=0;k<n[x].length;k++){var F=Nm(n[x][k],u);Sv(o,F),A.push(F)}p.push(A)}return p}function xu(n,o,u){for(var p=[],x=0;x<n.length;x++){var A=Lv(n[x],o,u);p.push(A)}return p}function pp(n,o,u,p){if(n[0]<u[0]||n[0]>u[2]){var x=p*.5,A=n[0]-u[0]>x?-p:u[0]-n[0]>x?p:0;A===0&&(A=n[0]-u[2]>x?-p:u[2]-n[0]>x?p:0),n[0]+=A}Sv(o,n)}function Gm(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function mp(n,o,u,p){for(var x=Math.pow(2,p.z)*wl,A=[p.x*wl,p.y*wl],k=[],F=0,Y=n;F<Y.length;F+=1)for(var j=Y[F],Q=0,ne=j;Q<ne.length;Q+=1){var ge=ne[Q],ve=[ge.x+A[0],ge.y+A[1]];pp(ve,o,u,x),k.push(ve)}return k}function yp(n,o,u,p){for(var x=Math.pow(2,p.z)*wl,A=[p.x*wl,p.y*wl],k=[],F=0,Y=n;F<Y.length;F+=1){for(var j=Y[F],Q=[],ne=0,ge=j;ne<ge.length;ne+=1){var ve=ge[ne],Ce=[ve.x+A[0],ve.y+A[1]];Sv(o,Ce),Q.push(Ce)}k.push(Q)}if(o[2]-o[0]<=x/2){Gm(o);for(var qe=0,ft=k;qe<ft.length;qe+=1)for(var tt=ft[qe],St=0,gt=tt;St<gt.length;St+=1){var At=gt[St];pp(At,o,u,x)}}return k}function gp(n,o){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],x=n.canonicalID();if(o.type==="Polygon"){var A=Lv(o.coordinates,p,x),k=mp(n.geometry(),u,p,x);if(!Wc(u,p))return!1;for(var F=0,Y=k;F<Y.length;F+=1){var j=Y[F];if(!kv(j,A))return!1}}if(o.type==="MultiPolygon"){var Q=xu(o.coordinates,p,x),ne=mp(n.geometry(),u,p,x);if(!Wc(u,p))return!1;for(var ge=0,ve=ne;ge<ve.length;ge+=1){var Ce=ve[ge];if(!Um(Ce,Q))return!1}}return!0}function Zm(n,o){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],x=n.canonicalID();if(o.type==="Polygon"){var A=Lv(o.coordinates,p,x),k=yp(n.geometry(),u,p,x);if(!Wc(u,p))return!1;for(var F=0,Y=k;F<Y.length;F+=1){var j=Y[F];if(!Ev(j,A))return!1}}if(o.type==="MultiPolygon"){var Q=xu(o.coordinates,p,x),ne=yp(n.geometry(),u,p,x);if(!Wc(u,p))return!1;for(var ge=0,ve=ne;ge<ve.length;ge+=1){var Ce=ve[ge];if(!Hm(Ce,Q))return!1}}return!0}var hs=function(o,u){this.type=wa,this.geojson=o,this.geometries=u};hs.parse=function(o,u){if(o.length!==2)return u.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(af(o[1])){var p=o[1];if(p.type==="FeatureCollection")for(var x=0;x<p.features.length;++x){var A=p.features[x].geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new hs(p,p.features[x].geometry)}else if(p.type==="Feature"){var k=p.geometry.type;if(k==="Polygon"||k==="MultiPolygon")return new hs(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new hs(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")},hs.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return gp(o,this.geometries);if(o.geometryType()==="LineString")return Zm(o,this.geometries)}return!1},hs.prototype.eachChild=function(){},hs.prototype.outputDefined=function(){return!0},hs.prototype.serialize=function(){return["within",this.geojson]};function Xc(n){if(n instanceof Fn){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof hs)return!1;var o=!0;return n.eachChild(function(u){o&&!Xc(u)&&(o=!1)}),o}function Tl(n){if(n instanceof Fn&&n.name==="feature-state")return!1;var o=!0;return n.eachChild(function(u){o&&!Tl(u)&&(o=!1)}),o}function jc(n,o){if(n instanceof Fn&&o.indexOf(n.name)>=0)return!1;var u=!0;return n.eachChild(function(p){u&&!jc(p,o)&&(u=!1)}),u}var Al=function(o,u){this.type=u.type,this.name=o,this.boundExpression=u};Al.parse=function(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");var p=o[1];return u.scope.has(p)?new Al(p,u.scope.get(p)):u.error('Unknown variable "'+p+'". Make sure "'+p+'" has been bound in an enclosing "let" expression before using it.',1)},Al.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},Al.prototype.eachChild=function(){},Al.prototype.outputDefined=function(){return!1},Al.prototype.serialize=function(){return["var",this.name]};var Ml=function(o,u,p,x,A){u===void 0&&(u=[]),x===void 0&&(x=new tf),A===void 0&&(A=[]),this.registry=o,this.path=u,this.key=u.map(function(k){return"["+k+"]"}).join(""),this.scope=x,this.errors=A,this.expectedType=p};Ml.prototype.parse=function(o,u,p,x,A){return A===void 0&&(A={}),u?this.concat(u,p,x)._parse(o,A):this._parse(o,A)},Ml.prototype._parse=function(o,u){(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number")&&(o=["literal",o]);function p(Q,ne,ge){return ge==="assert"?new ln(ne,[Q]):ge==="coerce"?new Xo(ne,[Q]):Q}if(Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var x=o[0];if(typeof x!="string")return this.error("Expression name must be a string, but found "+typeof x+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var A=this.registry[x];if(A){var k=A.parse(o,this);if(!k)return null;if(this.expectedType){var F=this.expectedType,Y=k.type;if((F.kind==="string"||F.kind==="number"||F.kind==="boolean"||F.kind==="object"||F.kind==="array")&&Y.kind==="value")k=p(k,F,u.typeAnnotation||"assert");else if((F.kind==="color"||F.kind==="formatted"||F.kind==="resolvedImage")&&(Y.kind==="value"||Y.kind==="string"))k=p(k,F,u.typeAnnotation||"coerce");else if(this.checkSubtype(F,Y))return null}if(!(k instanceof Yo)&&k.type.kind!=="resolvedImage"&&Dv(k)){var j=new js;try{k=new Yo(k.type,k.evaluate(j))}catch(Q){return this.error(Q.message),null}}return k}return this.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof o=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof o=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof o+" instead.")},Ml.prototype.concat=function(o,u,p){var x=typeof o=="number"?this.path.concat(o):this.path,A=p?this.scope.concat(p):this.scope;return new Ml(this.registry,x,u||null,A,this.errors)},Ml.prototype.error=function(o){for(var u=[],p=arguments.length-1;p-- >0;)u[p]=arguments[p+1];var x=""+this.key+u.map(function(A){return"["+A+"]"}).join("");this.errors.push(new ws(x,o))},Ml.prototype.checkSubtype=function(o,u){var p=cs(o,u);return p&&this.error(p),p};function Dv(n){if(n instanceof Al)return Dv(n.boundExpression);if(n instanceof Fn&&n.name==="error")return!1;if(n instanceof bl)return!1;if(n instanceof hs)return!1;var o=n instanceof Xo||n instanceof ln,u=!0;return n.eachChild(function(p){o?u=u&&Dv(p):u=u&&p instanceof Yo}),u?Xc(n)&&jc(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Jc(n,o){for(var u=n.length-1,p=0,x=u,A=0,k,F;p<=x;)if(A=Math.floor((p+x)/2),k=n[A],F=n[A+1],k<=o){if(A===u||o<F)return A;p=A+1}else if(k>o)x=A-1;else throw new dn("Input is not a number.");return 0}var Ms=function(o,u,p){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(var x=0,A=p;x<A.length;x+=1){var k=A[x],F=k[0],Y=k[1];this.labels.push(F),this.outputs.push(Y)}};Ms.parse=function(o,u){if(o.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!==0)return u.error("Expected an even number of arguments.");var p=u.parse(o[1],1,Er);if(!p)return null;var x=[],A=null;u.expectedType&&u.expectedType.kind!=="value"&&(A=u.expectedType);for(var k=1;k<o.length;k+=2){var F=k===1?-1/0:o[k],Y=o[k+1],j=k,Q=k+1;if(typeof F!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(x.length&&x[x.length-1][0]>=F)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);var ne=u.parse(Y,Q,A);if(!ne)return null;A=A||ne.type,x.push([F,ne])}return new Ms(A,p,x)},Ms.prototype.evaluate=function(o){var u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);var x=this.input.evaluate(o);if(x<=u[0])return p[0].evaluate(o);var A=u.length;if(x>=u[A-1])return p[A-1].evaluate(o);var k=Jc(u,x);return p[k].evaluate(o)},Ms.prototype.eachChild=function(o){o(this.input);for(var u=0,p=this.outputs;u<p.length;u+=1){var x=p[u];o(x)}},Ms.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},Ms.prototype.serialize=function(){for(var o=["step",this.input.serialize()],u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o};function pn(n,o,u){return n*(1-u)+o*u}function Ym(n,o,u){return new ni(pn(n.r,o.r,u),pn(n.g,o.g,u),pn(n.b,o.b,u),pn(n.a,o.a,u))}function Wm(n,o,u){return n.map(function(p,x){return pn(p,o[x],u)})}var Sl=Object.freeze({__proto__:null,number:pn,color:Ym,array:Wm}),nf=.95047,vs=1,_p=1.08883,xp=4/29,of=6/29,bp=3*of*of,wp=of*of*of,Xm=Math.PI/180,jm=180/Math.PI;function Pv(n){return n>wp?Math.pow(n,1/3):n/bp+xp}function zv(n){return n>of?n*n*n:bp*(n-xp)}function Iv(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function tc(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Kc(n){var o=tc(n.r),u=tc(n.g),p=tc(n.b),x=Pv((.4124564*o+.3575761*u+.1804375*p)/nf),A=Pv((.2126729*o+.7151522*u+.072175*p)/vs),k=Pv((.0193339*o+.119192*u+.9503041*p)/_p);return{l:116*A-16,a:500*(x-A),b:200*(A-k),alpha:n.a}}function Tp(n){var o=(n.l+16)/116,u=isNaN(n.a)?o:o+n.a/500,p=isNaN(n.b)?o:o-n.b/200;return o=vs*zv(o),u=nf*zv(u),p=_p*zv(p),new ni(Iv(3.2404542*u-1.5371385*o-.4985314*p),Iv(-.969266*u+1.8760108*o+.041556*p),Iv(.0556434*u-.2040259*o+1.0572252*p),n.alpha)}function qi(n,o,u){return{l:pn(n.l,o.l,u),a:pn(n.a,o.a,u),b:pn(n.b,o.b,u),alpha:pn(n.alpha,o.alpha,u)}}function Jm(n){var o=Kc(n),u=o.l,p=o.a,x=o.b,A=Math.atan2(x,p)*jm;return{h:A<0?A+360:A,c:Math.sqrt(p*p+x*x),l:u,alpha:n.a}}function Qc(n){var o=n.h*Xm,u=n.c,p=n.l;return Tp({l:p,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:n.alpha})}function Rv(n,o,u){var p=o-n;return n+u*(p>180||p<-180?p-360*Math.round(p/360):p)}function Ap(n,o,u){return{h:Rv(n.h,o.h,u),c:pn(n.c,o.c,u),l:pn(n.l,o.l,u),alpha:pn(n.alpha,o.alpha,u)}}var sf={forward:Kc,reverse:Tp,interpolate:qi},bu={forward:Jm,reverse:Qc,interpolate:Ap},Fv=Object.freeze({__proto__:null,lab:sf,hcl:bu}),bn=function(o,u,p,x,A){this.type=o,this.operator=u,this.interpolation=p,this.input=x,this.labels=[],this.outputs=[];for(var k=0,F=A;k<F.length;k+=1){var Y=F[k],j=Y[0],Q=Y[1];this.labels.push(j),this.outputs.push(Q)}};bn.interpolationFactor=function(o,u,p,x){var A=0;if(o.name==="exponential")A=rc(u,o.base,p,x);else if(o.name==="linear")A=rc(u,1,p,x);else if(o.name==="cubic-bezier"){var k=o.controlPoints,F=new f(k[0],k[1],k[2],k[3]);A=F.solve(rc(u,1,p,x))}return A},bn.parse=function(o,u){var p=o[0],x=o[1],A=o[2],k=o.slice(3);if(!Array.isArray(x)||x.length===0)return u.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){var F=x[1];if(typeof F!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:F}}else if(x[0]==="cubic-bezier"){var Y=x.slice(1);if(Y.length!==4||Y.some(function(tt){return typeof tt!="number"||tt<0||tt>1}))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:Y}}else return u.error("Unknown interpolation type "+String(x[0]),1,0);if(o.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!==0)return u.error("Expected an even number of arguments.");if(A=u.parse(A,2,Er),!A)return null;var j=[],Q=null;p==="interpolate-hcl"||p==="interpolate-lab"?Q=Ts:u.expectedType&&u.expectedType.kind!=="value"&&(Q=u.expectedType);for(var ne=0;ne<k.length;ne+=2){var ge=k[ne],ve=k[ne+1],Ce=ne+3,qe=ne+4;if(typeof ge!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ce);if(j.length&&j[j.length-1][0]>=ge)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ce);var ft=u.parse(ve,qe,Q);if(!ft)return null;Q=Q||ft.type,j.push([ge,ft])}return Q.kind!=="number"&&Q.kind!=="color"&&!(Q.kind==="array"&&Q.itemType.kind==="number"&&typeof Q.N=="number")?u.error("Type "+Ei(Q)+" is not interpolatable."):new bn(Q,p,x,A,j)},bn.prototype.evaluate=function(o){var u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);var x=this.input.evaluate(o);if(x<=u[0])return p[0].evaluate(o);var A=u.length;if(x>=u[A-1])return p[A-1].evaluate(o);var k=Jc(u,x),F=u[k],Y=u[k+1],j=bn.interpolationFactor(this.interpolation,x,F,Y),Q=p[k].evaluate(o),ne=p[k+1].evaluate(o);return this.operator==="interpolate"?Sl[this.type.kind.toLowerCase()](Q,ne,j):this.operator==="interpolate-hcl"?bu.reverse(bu.interpolate(bu.forward(Q),bu.forward(ne),j)):sf.reverse(sf.interpolate(sf.forward(Q),sf.forward(ne),j))},bn.prototype.eachChild=function(o){o(this.input);for(var u=0,p=this.outputs;u<p.length;u+=1){var x=p[u];o(x)}},bn.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},bn.prototype.serialize=function(){var o;this.interpolation.name==="linear"?o=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?o=["linear"]:o=["exponential",this.interpolation.base]:o=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var u=[this.operator,o,this.input.serialize()],p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u};function rc(n,o,u,p){var x=p-u,A=n-u;return x===0?0:o===1?A/x:(Math.pow(o,A)-1)/(Math.pow(o,x)-1)}var Js=function(o,u){this.type=o,this.args=u};Js.parse=function(o,u){if(o.length<2)return u.error("Expectected at least one argument.");var p=null,x=u.expectedType;x&&x.kind!=="value"&&(p=x);for(var A=[],k=0,F=o.slice(1);k<F.length;k+=1){var Y=F[k],j=u.parse(Y,1+A.length,p,void 0,{typeAnnotation:"omit"});if(!j)return null;p=p||j.type,A.push(j)}var Q=x&&A.some(function(ne){return cs(x,ne.type)});return Q?new Js(Aa,A):new Js(p,A)},Js.prototype.evaluate=function(o){for(var u=null,p=0,x,A=0,k=this.args;A<k.length;A+=1){var F=k[A];if(p++,u=F.evaluate(o),u&&u instanceof Rn&&!u.available&&(x||(x=u.name),u=null,p===this.args.length&&(u=x)),u!==null)break}return u},Js.prototype.eachChild=function(o){this.args.forEach(o)},Js.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},Js.prototype.serialize=function(){var o=["coalesce"];return this.eachChild(function(u){o.push(u.serialize())}),o};var kl=function(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u};kl.prototype.evaluate=function(o){return this.result.evaluate(o)},kl.prototype.eachChild=function(o){for(var u=0,p=this.bindings;u<p.length;u+=1){var x=p[u];o(x[1])}o(this.result)},kl.parse=function(o,u){if(o.length<4)return u.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var p=[],x=1;x<o.length-1;x+=2){var A=o[x];if(typeof A!="string")return u.error("Expected string, but found "+typeof A+" instead.",x);if(/[^a-zA-Z0-9_]/.test(A))return u.error("Variable names must contain only alphanumeric characters or '_'.",x);var k=u.parse(o[x+1],x+1);if(!k)return null;p.push([A,k])}var F=u.parse(o[o.length-1],o.length-1,u.expectedType,p);return F?new kl(p,F):null},kl.prototype.outputDefined=function(){return this.result.outputDefined()},kl.prototype.serialize=function(){for(var o=["let"],u=0,p=this.bindings;u<p.length;u+=1){var x=p[u],A=x[0],k=x[1];o.push(A,k.serialize())}return o.push(this.result.serialize()),o};var Cl=function(o,u,p){this.type=o,this.index=u,this.input=p};Cl.parse=function(o,u){if(o.length!==3)return u.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Er),x=u.parse(o[2],2,yo(u.expectedType||Aa));if(!p||!x)return null;var A=x.type;return new Cl(A.itemType,p,x)},Cl.prototype.evaluate=function(o){var u=this.index.evaluate(o),p=this.input.evaluate(o);if(u<0)throw new dn("Array index out of bounds: "+u+" < 0.");if(u>=p.length)throw new dn("Array index out of bounds: "+u+" > "+(p.length-1)+".");if(u!==Math.floor(u))throw new dn("Array index must be an integer, but found "+u+" instead.");return p[u]},Cl.prototype.eachChild=function(o){o(this.index),o(this.input)},Cl.prototype.outputDefined=function(){return!1},Cl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var El=function(o,u){this.type=wa,this.needle=o,this.haystack=u};El.parse=function(o,u){if(o.length!==3)return u.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Aa),x=u.parse(o[2],2,Aa);return!p||!x?null:Yc(p.type,[wa,ba,Er,rf,Aa])?new El(p,x):u.error("Expected first argument to be of type boolean, string, number or null, but found "+Ei(p.type)+" instead")},El.prototype.evaluate=function(o){var u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!_u(u,["boolean","string","number","null"]))throw new dn("Expected first argument to be of type boolean, string, number or null, but found "+Ei(sn(u))+" instead.");if(!_u(p,["string","array"]))throw new dn("Expected second argument to be of type array or string, but found "+Ei(sn(p))+" instead.");return p.indexOf(u)>=0},El.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},El.prototype.outputDefined=function(){return!0},El.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ks=function(o,u,p){this.type=Er,this.needle=o,this.haystack=u,this.fromIndex=p};Ks.parse=function(o,u){if(o.length<=2||o.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Aa),x=u.parse(o[2],2,Aa);if(!p||!x)return null;if(!Yc(p.type,[wa,ba,Er,rf,Aa]))return u.error("Expected first argument to be of type boolean, string, number or null, but found "+Ei(p.type)+" instead");if(o.length===4){var A=u.parse(o[3],3,Er);return A?new Ks(p,x,A):null}else return new Ks(p,x)},Ks.prototype.evaluate=function(o){var u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!_u(u,["boolean","string","number","null"]))throw new dn("Expected first argument to be of type boolean, string, number or null, but found "+Ei(sn(u))+" instead.");if(!_u(p,["string","array"]))throw new dn("Expected second argument to be of type array or string, but found "+Ei(sn(p))+" instead.");if(this.fromIndex){var x=this.fromIndex.evaluate(o);return p.indexOf(u,x)}return p.indexOf(u)},Ks.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},Ks.prototype.outputDefined=function(){return!1},Ks.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ss=function(o,u,p,x,A,k){this.inputType=o,this.type=u,this.input=p,this.cases=x,this.outputs=A,this.otherwise=k};Ss.parse=function(o,u){if(o.length<5)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!==1)return u.error("Expected an even number of arguments.");var p,x;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);for(var A={},k=[],F=2;F<o.length-1;F+=2){var Y=o[F],j=o[F+1];Array.isArray(Y)||(Y=[Y]);var Q=u.concat(F);if(Y.length===0)return Q.error("Expected at least one branch label.");for(var ne=0,ge=Y;ne<ge.length;ne+=1){var ve=ge[ne];if(typeof ve!="number"&&typeof ve!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof ve=="number"&&Math.abs(ve)>Number.MAX_SAFE_INTEGER)return Q.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof ve=="number"&&Math.floor(ve)!==ve)return Q.error("Numeric branch labels must be integer values.");if(!p)p=sn(ve);else if(Q.checkSubtype(p,sn(ve)))return null;if(typeof A[String(ve)]!="undefined")return Q.error("Branch labels must be unique.");A[String(ve)]=k.length}var Ce=u.parse(j,F,x);if(!Ce)return null;x=x||Ce.type,k.push(Ce)}var qe=u.parse(o[1],1,Aa);if(!qe)return null;var ft=u.parse(o[o.length-1],o.length-1,x);return!ft||qe.type.kind!=="value"&&u.concat(1).checkSubtype(p,qe.type)?null:new Ss(p,x,qe,A,k,ft)},Ss.prototype.evaluate=function(o){var u=this.input.evaluate(o),p=sn(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise;return p.evaluate(o)},Ss.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},Ss.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})&&this.otherwise.outputDefined()},Ss.prototype.serialize=function(){for(var o=this,u=["match",this.input.serialize()],p=Object.keys(this.cases).sort(),x=[],A={},k=0,F=p;k<F.length;k+=1){var Y=F[k],j=A[this.cases[Y]];j===void 0?(A[this.cases[Y]]=x.length,x.push([this.cases[Y],[Y]])):x[j][1].push(Y)}for(var Q=function(qe){return o.inputType.kind==="number"?Number(qe):qe},ne=0,ge=x;ne<ge.length;ne+=1){var ve=ge[ne],j=ve[0],Ce=ve[1];Ce.length===1?u.push(Q(Ce[0])):u.push(Ce.map(Q)),u.push(this.outputs[outputIndex$1].serialize())}return u.push(this.otherwise.serialize()),u};var ks=function(o,u,p){this.type=o,this.branches=u,this.otherwise=p};ks.parse=function(o,u){if(o.length<4)return u.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!==0)return u.error("Expected an odd number of arguments.");var p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);for(var x=[],A=1;A<o.length-1;A+=2){var k=u.parse(o[A],A,wa);if(!k)return null;var F=u.parse(o[A+1],A+1,p);if(!F)return null;x.push([k,F]),p=p||F.type}var Y=u.parse(o[o.length-1],o.length-1,p);return Y?new ks(p,x,Y):null},ks.prototype.evaluate=function(o){for(var u=0,p=this.branches;u<p.length;u+=1){var x=p[u],A=x[0],k=x[1];if(A.evaluate(o))return k.evaluate(o)}return this.otherwise.evaluate(o)},ks.prototype.eachChild=function(o){for(var u=0,p=this.branches;u<p.length;u+=1){var x=p[u],A=x[0],k=x[1];o(A),o(k)}o(this.otherwise)},ks.prototype.outputDefined=function(){return this.branches.every(function(o){var u=o[0],p=o[1];return p.outputDefined()})&&this.otherwise.outputDefined()},ks.prototype.serialize=function(){var o=["case"];return this.eachChild(function(u){o.push(u.serialize())}),o};var Ll=function(o,u,p,x){this.type=o,this.input=u,this.beginIndex=p,this.endIndex=x};Ll.parse=function(o,u){if(o.length<=2||o.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Aa),x=u.parse(o[2],2,Er);if(!p||!x)return null;if(!Yc(p.type,[yo(Aa),ba,Aa]))return u.error("Expected first argument to be of type array or string, but found "+Ei(p.type)+" instead");if(o.length===4){var A=u.parse(o[3],3,Er);return A?new Ll(p.type,p,x,A):null}else return new Ll(p.type,p,x)},Ll.prototype.evaluate=function(o){var u=this.input.evaluate(o),p=this.beginIndex.evaluate(o);if(!_u(u,["string","array"]))throw new dn("Expected first argument to be of type array or string, but found "+Ei(sn(u))+" instead.");if(this.endIndex){var x=this.endIndex.evaluate(o);return u.slice(p,x)}return u.slice(p)},Ll.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},Ll.prototype.outputDefined=function(){return!1},Ll.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Mp(n,o){return n==="=="||n==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Km(n,o,u){return o===u}function Qm(n,o,u){return o!==u}function $m(n,o,u){return o<u}function Sp(n,o,u){return o>u}function kp(n,o,u){return o<=u}function qv(n,o,u){return o>=u}function Nv(n,o,u,p){return p.compare(o,u)===0}function ac(n,o,u,p){return!Nv(n,o,u,p)}function $c(n,o,u,p){return p.compare(o,u)<0}function Cp(n,o,u,p){return p.compare(o,u)>0}function Bv(n,o,u,p){return p.compare(o,u)<=0}function Ep(n,o,u,p){return p.compare(o,u)>=0}function lf(n,o,u){var p=n!=="=="&&n!=="!=";return function(){function x(A,k,F){this.type=wa,this.lhs=A,this.rhs=k,this.collator=F,this.hasUntypedArgument=A.type.kind==="value"||k.type.kind==="value"}return x.parse=function(k,F){if(k.length!==3&&k.length!==4)return F.error("Expected two or three arguments.");var Y=k[0],j=F.parse(k[1],1,Aa);if(!j)return null;if(!Mp(Y,j.type))return F.concat(1).error('"'+Y+`" comparisons are not supported for type '`+Ei(j.type)+"'.");var Q=F.parse(k[2],2,Aa);if(!Q)return null;if(!Mp(Y,Q.type))return F.concat(2).error('"'+Y+`" comparisons are not supported for type '`+Ei(Q.type)+"'.");if(j.type.kind!==Q.type.kind&&j.type.kind!=="value"&&Q.type.kind!=="value")return F.error("Cannot compare types '"+Ei(j.type)+"' and '"+Ei(Q.type)+"'.");p&&(j.type.kind==="value"&&Q.type.kind!=="value"?j=new ln(Q.type,[j]):j.type.kind!=="value"&&Q.type.kind==="value"&&(Q=new ln(j.type,[Q])));var ne=null;if(k.length===4){if(j.type.kind!=="string"&&Q.type.kind!=="string"&&j.type.kind!=="value"&&Q.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(ne=F.parse(k[3],3,gu),!ne)return null}return new x(j,Q,ne)},x.prototype.evaluate=function(k){var F=this.lhs.evaluate(k),Y=this.rhs.evaluate(k);if(p&&this.hasUntypedArgument){var j=sn(F),Q=sn(Y);if(j.kind!==Q.kind||!(j.kind==="string"||j.kind==="number"))throw new dn('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+j.kind+", "+Q.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var ne=sn(F),ge=sn(Y);if(ne.kind!=="string"||ge.kind!=="string")return o(k,F,Y)}return this.collator?u(k,F,Y,this.collator.evaluate(k)):o(k,F,Y)},x.prototype.eachChild=function(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)},x.prototype.outputDefined=function(){return!0},x.prototype.serialize=function(){var k=[n];return this.eachChild(function(F){k.push(F.serialize())}),k},x}()}var ey=lf("==",Km,Nv),Lp=lf("!=",Qm,ac),Dp=lf("<",$m,$c),Pp=lf(">",Sp,Cp),Ov=lf("<=",kp,Bv),Uv=lf(">=",qv,Ep),wu=function(o,u,p,x,A){this.type=ba,this.number=o,this.locale=u,this.currency=p,this.minFractionDigits=x,this.maxFractionDigits=A};wu.parse=function(o,u){if(o.length!==3)return u.error("Expected two arguments.");var p=u.parse(o[1],1,Er);if(!p)return null;var x=o[2];if(typeof x!="object"||Array.isArray(x))return u.error("NumberFormat options argument must be an object.");var A=null;if(x.locale&&(A=u.parse(x.locale,1,ba),!A))return null;var k=null;if(x.currency&&(k=u.parse(x.currency,1,ba),!k))return null;var F=null;if(x["min-fraction-digits"]&&(F=u.parse(x["min-fraction-digits"],1,Er),!F))return null;var Y=null;return x["max-fraction-digits"]&&(Y=u.parse(x["max-fraction-digits"],1,Er),!Y)?null:new wu(p,A,k,F,Y)},wu.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},wu.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},wu.prototype.outputDefined=function(){return!1},wu.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var Dl=function(o){this.type=Er,this.input=o};Dl.parse=function(o,u){if(o.length!==2)return u.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error("Expected argument of type string or array, but found "+Ei(p.type)+" instead."):new Dl(p):null},Dl.prototype.evaluate=function(o){var u=this.input.evaluate(o);if(typeof u=="string")return u.length;if(Array.isArray(u))return u.length;throw new dn("Expected value to be of type string or array, but found "+Ei(sn(u))+" instead.")},Dl.prototype.eachChild=function(o){o(this.input)},Dl.prototype.outputDefined=function(){return!1},Dl.prototype.serialize=function(){var o=["length"];return this.eachChild(function(u){o.push(u.serialize())}),o};var ic={"==":ey,"!=":Lp,">":Pp,"<":Dp,">=":Uv,"<=":Ov,array:ln,at:Cl,boolean:ln,case:ks,coalesce:Js,collator:bl,format:Wo,image:Xs,in:El,"index-of":Ks,interpolate:bn,"interpolate-hcl":bn,"interpolate-lab":bn,length:Dl,let:kl,literal:Yo,match:Ss,number:ln,"number-format":wu,object:ln,slice:Ll,step:Ms,string:ln,"to-boolean":Xo,"to-color":Xo,"to-number":Xo,"to-string":Xo,var:Al,within:hs};function Vv(n,o){var u=o[0],p=o[1],x=o[2],A=o[3];u=u.evaluate(n),p=p.evaluate(n),x=x.evaluate(n);var k=A?A.evaluate(n):1,F=hp(u,p,x,k);if(F)throw new dn(F);return new ni(u/255*k,p/255*k,x/255*k,k)}function eh(n,o){return n in o}function th(n,o){var u=o[n];return typeof u=="undefined"?null:u}function rh(n,o,u,p){for(;u<=p;){var x=u+p>>1;if(o[x]===n)return!0;o[x]>n?p=x-1:u=x+1}return!1}function Pl(n){return{type:n}}Fn.register(ic,{error:[Ws,[ba],function(n,o){var u=o[0];throw new dn(u.evaluate(n))}],typeof:[ba,[Aa],function(n,o){var u=o[0];return Ei(sn(u.evaluate(n)))}],"to-rgba":[yo(Er,4),[Ts],function(n,o){var u=o[0];return u.evaluate(n).toArray()}],rgb:[Ts,[Er,Er,Er],Vv],rgba:[Ts,[Er,Er,Er,Er],Vv],has:{type:wa,overloads:[[[ba],function(n,o){var u=o[0];return eh(u.evaluate(n),n.properties())}],[[ba,_l],function(n,o){var u=o[0],p=o[1];return eh(u.evaluate(n),p.evaluate(n))}]]},get:{type:Aa,overloads:[[[ba],function(n,o){var u=o[0];return th(u.evaluate(n),n.properties())}],[[ba,_l],function(n,o){var u=o[0],p=o[1];return th(u.evaluate(n),p.evaluate(n))}]]},"feature-state":[Aa,[ba],function(n,o){var u=o[0];return th(u.evaluate(n),n.featureState||{})}],properties:[_l,[],function(n){return n.properties()}],"geometry-type":[ba,[],function(n){return n.geometryType()}],id:[Aa,[],function(n){return n.id()}],zoom:[Er,[],function(n){return n.globals.zoom}],"heatmap-density":[Er,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[Er,[],function(n){return n.globals.lineProgress||0}],accumulated:[Aa,[],function(n){return n.globals.accumulated===void 0?null:n.globals.accumulated}],"+":[Er,Pl(Er),function(n,o){for(var u=0,p=0,x=o;p<x.length;p+=1){var A=x[p];u+=A.evaluate(n)}return u}],"*":[Er,Pl(Er),function(n,o){for(var u=1,p=0,x=o;p<x.length;p+=1){var A=x[p];u*=A.evaluate(n)}return u}],"-":{type:Er,overloads:[[[Er,Er],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)-p.evaluate(n)}],[[Er],function(n,o){var u=o[0];return-u.evaluate(n)}]]},"/":[Er,[Er,Er],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)/p.evaluate(n)}],"%":[Er,[Er,Er],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)%p.evaluate(n)}],ln2:[Er,[],function(){return Math.LN2}],pi:[Er,[],function(){return Math.PI}],e:[Er,[],function(){return Math.E}],"^":[Er,[Er,Er],function(n,o){var u=o[0],p=o[1];return Math.pow(u.evaluate(n),p.evaluate(n))}],sqrt:[Er,[Er],function(n,o){var u=o[0];return Math.sqrt(u.evaluate(n))}],log10:[Er,[Er],function(n,o){var u=o[0];return Math.log(u.evaluate(n))/Math.LN10}],ln:[Er,[Er],function(n,o){var u=o[0];return Math.log(u.evaluate(n))}],log2:[Er,[Er],function(n,o){var u=o[0];return Math.log(u.evaluate(n))/Math.LN2}],sin:[Er,[Er],function(n,o){var u=o[0];return Math.sin(u.evaluate(n))}],cos:[Er,[Er],function(n,o){var u=o[0];return Math.cos(u.evaluate(n))}],tan:[Er,[Er],function(n,o){var u=o[0];return Math.tan(u.evaluate(n))}],asin:[Er,[Er],function(n,o){var u=o[0];return Math.asin(u.evaluate(n))}],acos:[Er,[Er],function(n,o){var u=o[0];return Math.acos(u.evaluate(n))}],atan:[Er,[Er],function(n,o){var u=o[0];return Math.atan(u.evaluate(n))}],min:[Er,Pl(Er),function(n,o){return Math.min.apply(Math,o.map(function(u){return u.evaluate(n)}))}],max:[Er,Pl(Er),function(n,o){return Math.max.apply(Math,o.map(function(u){return u.evaluate(n)}))}],abs:[Er,[Er],function(n,o){var u=o[0];return Math.abs(u.evaluate(n))}],round:[Er,[Er],function(n,o){var u=o[0],p=u.evaluate(n);return p<0?-Math.round(-p):Math.round(p)}],floor:[Er,[Er],function(n,o){var u=o[0];return Math.floor(u.evaluate(n))}],ceil:[Er,[Er],function(n,o){var u=o[0];return Math.ceil(u.evaluate(n))}],"filter-==":[wa,[ba,Aa],function(n,o){var u=o[0],p=o[1];return n.properties()[u.value]===p.value}],"filter-id-==":[wa,[Aa],function(n,o){var u=o[0];return n.id()===u.value}],"filter-type-==":[wa,[ba],function(n,o){var u=o[0];return n.geometryType()===u.value}],"filter-<":[wa,[ba,Aa],function(n,o){var u=o[0],p=o[1],x=n.properties()[u.value],A=p.value;return typeof x==typeof A&&x<A}],"filter-id-<":[wa,[Aa],function(n,o){var u=o[0],p=n.id(),x=u.value;return typeof p==typeof x&&p<x}],"filter->":[wa,[ba,Aa],function(n,o){var u=o[0],p=o[1],x=n.properties()[u.value],A=p.value;return typeof x==typeof A&&x>A}],"filter-id->":[wa,[Aa],function(n,o){var u=o[0],p=n.id(),x=u.value;return typeof p==typeof x&&p>x}],"filter-<=":[wa,[ba,Aa],function(n,o){var u=o[0],p=o[1],x=n.properties()[u.value],A=p.value;return typeof x==typeof A&&x<=A}],"filter-id-<=":[wa,[Aa],function(n,o){var u=o[0],p=n.id(),x=u.value;return typeof p==typeof x&&p<=x}],"filter->=":[wa,[ba,Aa],function(n,o){var u=o[0],p=o[1],x=n.properties()[u.value],A=p.value;return typeof x==typeof A&&x>=A}],"filter-id->=":[wa,[Aa],function(n,o){var u=o[0],p=n.id(),x=u.value;return typeof p==typeof x&&p>=x}],"filter-has":[wa,[Aa],function(n,o){var u=o[0];return u.value in n.properties()}],"filter-has-id":[wa,[],function(n){return n.id()!==null&&n.id()!==void 0}],"filter-type-in":[wa,[yo(ba)],function(n,o){var u=o[0];return u.value.indexOf(n.geometryType())>=0}],"filter-id-in":[wa,[yo(Aa)],function(n,o){var u=o[0];return u.value.indexOf(n.id())>=0}],"filter-in-small":[wa,[ba,yo(Aa)],function(n,o){var u=o[0],p=o[1];return p.value.indexOf(n.properties()[u.value])>=0}],"filter-in-large":[wa,[ba,yo(Aa)],function(n,o){var u=o[0],p=o[1];return rh(n.properties()[u.value],p.value,0,p.value.length-1)}],all:{type:wa,overloads:[[[wa,wa],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)&&p.evaluate(n)}],[Pl(wa),function(n,o){for(var u=0,p=o;u<p.length;u+=1){var x=p[u];if(!x.evaluate(n))return!1}return!0}]]},any:{type:wa,overloads:[[[wa,wa],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)||p.evaluate(n)}],[Pl(wa),function(n,o){for(var u=0,p=o;u<p.length;u+=1){var x=p[u];if(x.evaluate(n))return!0}return!1}]]},"!":[wa,[wa],function(n,o){var u=o[0];return!u.evaluate(n)}],"is-supported-script":[wa,[ba],function(n,o){var u=o[0],p=n.globals&&n.globals.isSupportedScript;return p?p(u.evaluate(n)):!0}],upcase:[ba,[ba],function(n,o){var u=o[0];return u.evaluate(n).toUpperCase()}],downcase:[ba,[ba],function(n,o){var u=o[0];return u.evaluate(n).toLowerCase()}],concat:[ba,Pl(Aa),function(n,o){return o.map(function(u){return Eo(u.evaluate(n))}).join("")}],"resolved-locale":[ba,[gu],function(n,o){var u=o[0];return u.evaluate(n).resolvedLocale()}]});function ah(n){return{result:"success",value:n}}function Tu(n){return{result:"error",value:n}}function uf(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function zp(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function ih(n){return!!n.expression&&n.expression.interpolated}function di(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function nc(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Ip(n){return n}function Rp(n,o){var u=o.type==="color",p=n.stops&&typeof n.stops[0][0]=="object",x=p||n.property!==void 0,A=p||!x,k=n.type||(ih(o)?"exponential":"interval");if(u&&(n=yu({},n),n.stops&&(n.stops=n.stops.map(function(cr){return[cr[0],ni.parse(cr[1])]})),n.default?n.default=ni.parse(n.default):n.default=ni.parse(o.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!Fv[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);var F,Y,j;if(k==="exponential")F=Hv;else if(k==="interval")F=qp;else if(k==="categorical"){F=Fp,Y=Object.create(null);for(var Q=0,ne=n.stops;Q<ne.length;Q+=1){var ge=ne[Q];Y[ge[0]]=ge[1]}j=typeof n.stops[0][0]}else if(k==="identity")F=Np;else throw new Error('Unknown function type "'+k+'"');if(p){for(var ve={},Ce=[],qe=0;qe<n.stops.length;qe++){var ft=n.stops[qe],tt=ft[0].zoom;ve[tt]===void 0&&(ve[tt]={zoom:tt,type:n.type,property:n.property,default:n.default,stops:[]},Ce.push(tt)),ve[tt].stops.push([ft[0].value,ft[1]])}for(var St=[],gt=0,At=Ce;gt<At.length;gt+=1){var Rt=At[gt];St.push([ve[Rt].zoom,Rp(ve[Rt],o)])}var Jt={name:"linear"};return{kind:"composite",interpolationType:Jt,interpolationFactor:bn.interpolationFactor.bind(void 0,Jt),zoomStops:St.map(function(cr){return cr[0]}),evaluate:function(Fr,Cr){var Ir=Fr.zoom;return Hv({stops:St,base:n.base},o,Ir).evaluate(Ir,Cr)}}}else if(A){var dr=k==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:dr,interpolationFactor:bn.interpolationFactor.bind(void 0,dr),zoomStops:n.stops.map(function(cr){return cr[0]}),evaluate:function(cr){var Fr=cr.zoom;return F(n,o,Fr,Y,j)}}}else return{kind:"source",evaluate:function(Fr,Cr){var Ir=Cr&&Cr.properties?Cr.properties[n.property]:void 0;return Ir===void 0?zl(n.default,o.default):F(n,o,Ir,Y,j)}}}function zl(n,o,u){if(n!==void 0)return n;if(o!==void 0)return o;if(u!==void 0)return u}function Fp(n,o,u,p,x){var A=typeof u===x?p[u]:void 0;return zl(A,n.default,o.default)}function qp(n,o,u){if(di(u)!=="number")return zl(n.default,o.default);var p=n.stops.length;if(p===1||u<=n.stops[0][0])return n.stops[0][1];if(u>=n.stops[p-1][0])return n.stops[p-1][1];var x=Jc(n.stops.map(function(A){return A[0]}),u);return n.stops[x][1]}function Hv(n,o,u){var p=n.base!==void 0?n.base:1;if(di(u)!=="number")return zl(n.default,o.default);var x=n.stops.length;if(x===1||u<=n.stops[0][0])return n.stops[0][1];if(u>=n.stops[x-1][0])return n.stops[x-1][1];var A=Jc(n.stops.map(function(ne){return ne[0]}),u),k=ty(u,p,n.stops[A][0],n.stops[A+1][0]),F=n.stops[A][1],Y=n.stops[A+1][1],j=Sl[o.type]||Ip;if(n.colorSpace&&n.colorSpace!=="rgb"){var Q=Fv[n.colorSpace];j=function(ne,ge){return Q.reverse(Q.interpolate(Q.forward(ne),Q.forward(ge),k))}}return typeof F.evaluate=="function"?{evaluate:function(){for(var ge=[],ve=arguments.length;ve--;)ge[ve]=arguments[ve];var Ce=F.evaluate.apply(void 0,ge),qe=Y.evaluate.apply(void 0,ge);if(!(Ce===void 0||qe===void 0))return j(Ce,qe,k)}}:j(F,Y,k)}function Np(n,o,u){return o.type==="color"?u=ni.parse(u):o.type==="formatted"?u=xn.fromString(u.toString()):o.type==="resolvedImage"?u=Rn.fromString(u.toString()):di(u)!==o.type&&(o.type!=="enum"||!o.values[u])&&(u=void 0),zl(u,n.default,o.default)}function ty(n,o,u,p){var x=p-u,A=n-u;return x===0?0:o===1?A/x:(Math.pow(o,A)-1)/(Math.pow(o,x)-1)}var Il=function(o,u){this.expression=o,this._warningHistory={},this._evaluator=new js,this._defaultValue=u?ay(u):null,this._enumValues=u&&u.type==="enum"?u.values:null};Il.prototype.evaluateWithoutErrorHandling=function(o,u,p,x,A,k){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)},Il.prototype.evaluate=function(o,u,p,x,A,k){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=k||null;try{var F=this.expression.evaluate(this._evaluator);if(F==null||typeof F=="number"&&F!==F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new dn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Y){return JSON.stringify(Y)}).join(", ")+", but found "+JSON.stringify(F)+" instead.");return F}catch(Y){return this._warningHistory[Y.message]||(this._warningHistory[Y.message]=!0,typeof console!="undefined"&&console.warn(Y.message)),this._defaultValue}};function Au(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in ic}function oc(n,o){var u=new Ml(ic,[],o?Gv(o):void 0),p=u.parse(n,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?ah(new Il(p,o)):Tu(u.errors)}var Cs=function(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!Tl(u.expression)};Cs.prototype.evaluateWithoutErrorHandling=function(o,u,p,x,A,k){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,x,A,k)},Cs.prototype.evaluate=function(o,u,p,x,A,k){return this._styleExpression.evaluate(o,u,p,x,A,k)};var Es=function(o,u,p,x){this.kind=o,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!Tl(u.expression),this.interpolationType=x};Es.prototype.evaluateWithoutErrorHandling=function(o,u,p,x,A,k){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,x,A,k)},Es.prototype.evaluate=function(o,u,p,x,A,k){return this._styleExpression.evaluate(o,u,p,x,A,k)},Es.prototype.interpolationFactor=function(o,u,p){return this.interpolationType?bn.interpolationFactor(this.interpolationType,o,u,p):0};function jo(n,o){if(n=oc(n,o),n.result==="error")return n;var u=n.value.expression,p=Xc(u);if(!p&&!uf(o))return Tu([new ws("","data expressions not supported")]);var x=jc(u,["zoom"]);if(!x&&!zp(o))return Tu([new ws("","zoom expressions not supported")]);var A=cf(u);if(!A&&!x)return Tu([new ws("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(A instanceof ws)return Tu([A]);if(A instanceof bn&&!ih(o))return Tu([new ws("",'"interpolate" expressions cannot be used with this property')]);if(!A)return ah(p?new Cs("constant",n.value):new Cs("source",n.value));var k=A instanceof bn?A.interpolation:void 0;return ah(p?new Es("camera",n.value,A.labels,k):new Es("composite",n.value,A.labels,k))}var ff=function(o,u){this._parameters=o,this._specification=u,yu(this,Rp(this._parameters,this._specification))};ff.deserialize=function(o){return new ff(o._parameters,o._specification)},ff.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};function ry(n,o){if(nc(n))return new ff(n,o);if(Au(n)){var u=jo(n,o);if(u.result==="error")throw new Error(u.value.map(function(x){return x.key+": "+x.message}).join(", "));return u.value}else{var p=n;return typeof n=="string"&&o.type==="color"&&(p=ni.parse(n)),{kind:"constant",evaluate:function(){return p}}}}function cf(n){var o=null;if(n instanceof kl)o=cf(n.result);else if(n instanceof Js)for(var u=0,p=n.args;u<p.length;u+=1){var x=p[u];if(o=cf(x),o)break}else(n instanceof Ms||n instanceof bn)&&n.input instanceof Fn&&n.input.name==="zoom"&&(o=n);return o instanceof ws||n.eachChild(function(A){var k=cf(A);k instanceof ws?o=k:!o&&k?o=new ws("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&k&&o!==k&&(o=new ws("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function Gv(n){var o={color:Ts,string:ba,number:Er,enum:ba,boolean:wa,formatted:fs,resolvedImage:xl};return n.type==="array"?yo(o[n.value]||Aa,n.length):o[n.type]}function ay(n){return n.type==="color"&&nc(n.default)?new ni(0,0,0,0):n.type==="color"?ni.parse(n.default)||null:n.default===void 0?null:n.default}function ds(n){var o=n.key,u=n.value,p=n.valueSpec||{},x=n.objectElementValidators||{},A=n.style,k=n.styleSpec,F=[],Y=di(u);if(Y!=="object")return[new Ur(o,u,"object expected, "+Y+" found")];for(var j in u){var Q=j.split(".")[0],ne=p[Q]||p["*"],ge=void 0;if(x[Q])ge=x[Q];else if(p[Q])ge=li;else if(x["*"])ge=x["*"];else if(p["*"])ge=li;else{F.push(new Ur(o,u[j],'unknown property "'+j+'"'));continue}F=F.concat(ge({key:(o&&o+".")+j,value:u[j],valueSpec:ne,style:A,styleSpec:k,object:u,objectKey:j},u))}for(var ve in p)x[ve]||p[ve].required&&p[ve].default===void 0&&u[ve]===void 0&&F.push(new Ur(o,u,'missing required property "'+ve+'"'));return F}function Zv(n){var o=n.value,u=n.valueSpec,p=n.style,x=n.styleSpec,A=n.key,k=n.arrayElementValidator||li;if(di(o)!=="array")return[new Ur(A,o,"array expected, "+di(o)+" found")];if(u.length&&o.length!==u.length)return[new Ur(A,o,"array length "+u.length+" expected, length "+o.length+" found")];if(u["min-length"]&&o.length<u["min-length"])return[new Ur(A,o,"array length at least "+u["min-length"]+" expected, length "+o.length+" found")];var F={type:u.value,values:u.values};x.$version<7&&(F.function=u.function),di(u.value)==="object"&&(F=u.value);for(var Y=[],j=0;j<o.length;j++)Y=Y.concat(k({array:o,arrayIndex:j,value:o[j],valueSpec:F,style:p,styleSpec:x,key:A+"["+j+"]"}));return Y}function hf(n){var o=n.key,u=n.value,p=n.valueSpec,x=di(u);return x==="number"&&u!==u&&(x="NaN"),x!=="number"?[new Ur(o,u,"number expected, "+x+" found")]:"minimum"in p&&u<p.minimum?[new Ur(o,u,u+" is less than the minimum value "+p.minimum)]:"maximum"in p&&u>p.maximum?[new Ur(o,u,u+" is greater than the maximum value "+p.maximum)]:[]}function nh(n){var o=n.valueSpec,u=on(n.value.type),p,x={},A,k,F=u!=="categorical"&&n.value.property===void 0,Y=!F,j=di(n.value.stops)==="array"&&di(n.value.stops[0])==="array"&&di(n.value.stops[0][0])==="object",Q=ds({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:ne,default:Ce}});return u==="identity"&&F&&Q.push(new Ur(n.key,n.value,'missing required property "property"')),u!=="identity"&&!n.value.stops&&Q.push(new Ur(n.key,n.value,'missing required property "stops"')),u==="exponential"&&n.valueSpec.expression&&!ih(n.valueSpec)&&Q.push(new Ur(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(Y&&!uf(n.valueSpec)?Q.push(new Ur(n.key,n.value,"property functions not supported")):F&&!zp(n.valueSpec)&&Q.push(new Ur(n.key,n.value,"zoom functions not supported"))),(u==="categorical"||j)&&n.value.property===void 0&&Q.push(new Ur(n.key,n.value,'"property" property is required')),Q;function ne(qe){if(u==="identity")return[new Ur(qe.key,qe.value,'identity function may not have a "stops" property')];var ft=[],tt=qe.value;return ft=ft.concat(Zv({key:qe.key,value:tt,valueSpec:qe.valueSpec,style:qe.style,styleSpec:qe.styleSpec,arrayElementValidator:ge})),di(tt)==="array"&&tt.length===0&&ft.push(new Ur(qe.key,tt,"array must have at least one stop")),ft}function ge(qe){var ft=[],tt=qe.value,St=qe.key;if(di(tt)!=="array")return[new Ur(St,tt,"array expected, "+di(tt)+" found")];if(tt.length!==2)return[new Ur(St,tt,"array length 2 expected, length "+tt.length+" found")];if(j){if(di(tt[0])!=="object")return[new Ur(St,tt,"object expected, "+di(tt[0])+" found")];if(tt[0].zoom===void 0)return[new Ur(St,tt,"object stop key must have zoom")];if(tt[0].value===void 0)return[new Ur(St,tt,"object stop key must have value")];if(k&&k>on(tt[0].zoom))return[new Ur(St,tt[0].zoom,"stop zoom values must appear in ascending order")];on(tt[0].zoom)!==k&&(k=on(tt[0].zoom),A=void 0,x={}),ft=ft.concat(ds({key:St+"[0]",value:tt[0],valueSpec:{zoom:{}},style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{zoom:hf,value:ve}}))}else ft=ft.concat(ve({key:St+"[0]",value:tt[0],valueSpec:{},style:qe.style,styleSpec:qe.styleSpec},tt));return Au(gl(tt[1]))?ft.concat([new Ur(St+"[1]",tt[1],"expressions are not allowed in function stops.")]):ft.concat(li({key:St+"[1]",value:tt[1],valueSpec:o,style:qe.style,styleSpec:qe.styleSpec}))}function ve(qe,ft){var tt=di(qe.value),St=on(qe.value),gt=qe.value!==null?qe.value:ft;if(!p)p=tt;else if(tt!==p)return[new Ur(qe.key,gt,tt+" stop domain type must match previous stop domain type "+p)];if(tt!=="number"&&tt!=="string"&&tt!=="boolean")return[new Ur(qe.key,gt,"stop domain value must be a number, string, or boolean")];if(tt!=="number"&&u!=="categorical"){var At="number expected, "+tt+" found";return uf(o)&&u===void 0&&(At+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ur(qe.key,gt,At)]}return u==="categorical"&&tt==="number"&&(!isFinite(St)||Math.floor(St)!==St)?[new Ur(qe.key,gt,"integer expected, found "+St)]:u!=="categorical"&&tt==="number"&&A!==void 0&&St<A?[new Ur(qe.key,gt,"stop domain values must appear in ascending order")]:(A=St,u==="categorical"&&St in x?[new Ur(qe.key,gt,"stop domain values must be unique")]:(x[St]=!0,[]))}function Ce(qe){return li({key:qe.key,value:qe.value,valueSpec:o,style:qe.style,styleSpec:qe.styleSpec})}}function Mu(n){var o=(n.expressionContext==="property"?jo:oc)(gl(n.value),n.valueSpec);if(o.result==="error")return o.value.map(function(p){return new Ur(""+n.key+p.key,n.value,p.message)});var u=o.value.expression||o.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!u.outputDefined())return[new Ur(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Tl(u))return[new Ur(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!Tl(u))return[new Ur(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!jc(u,["zoom","feature-state"]))return[new Ur(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Xc(u))return[new Ur(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function iy(n){var o=n.value,u=n.key,p=di(o);return p!=="boolean"?[new Ur(u,o,"boolean expected, "+p+" found")]:[]}function ny(n){var o=n.key,u=n.value,p=di(u);return p!=="string"?[new Ur(o,u,"color expected, "+p+" found")]:Qf(u)===null?[new Ur(o,u,'color expected, "'+u+'" found')]:[]}function oh(n){var o=n.key,u=n.value,p=n.valueSpec,x=[];return Array.isArray(p.values)?p.values.indexOf(on(u))===-1&&x.push(new Ur(o,u,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(u)+" found")):Object.keys(p.values).indexOf(on(u))===-1&&x.push(new Ur(o,u,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(u)+" found")),x}function go(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var o=0,u=n.slice(1);o<u.length;o+=1){var p=u[o];if(!go(p)&&typeof p!="boolean")return!1}return!0;default:return!0}}var Bp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vf(n){if(n==null)return{filter:function(){return!0},needGeometry:!1};go(n)||(n=pf(n));var o=oc(n,Bp);if(o.result==="error")throw new Error(o.value.map(function(p){return p.key+": "+p.message}).join(", "));var u=df(n);return{filter:function(p,x,A){return o.value.evaluate(p,x,{},A)},needGeometry:u}}function Rl(n,o){return n<o?-1:n>o?1:0}function df(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(var o=1;o<n.length;o++)if(df(n[o]))return!0;return!1}function pf(n){if(!n)return!0;var o=n[0];if(n.length<=1)return o!=="any";var u=o==="=="?Yv(n[1],n[2],"=="):o==="!="?sc(Yv(n[1],n[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Yv(n[1],n[2],o):o==="any"?oy(n.slice(1)):o==="all"?["all"].concat(n.slice(1).map(pf)):o==="none"?["all"].concat(n.slice(1).map(pf).map(sc)):o==="in"?Op(n[1],n.slice(2)):o==="!in"?sc(Op(n[1],n.slice(2))):o==="has"?Wv(n[1]):o==="!has"?sc(Wv(n[1])):o==="within"?n:!0;return u}function Yv(n,o,u){switch(n){case"$type":return["filter-type-"+u,o];case"$id":return["filter-id-"+u,o];default:return["filter-"+u,n,o]}}function oy(n){return["any"].concat(n.map(pf))}function Op(n,o){if(o.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(function(u){return typeof u!=typeof o[0]})?["filter-in-large",n,["literal",o.sort(Rl)]]:["filter-in-small",n,["literal",o]]}}function Wv(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function sc(n){return["!",n]}function sh(n){return go(gl(n.value))?Mu(yu({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xv(n)}function Xv(n){var o=n.value,u=n.key;if(di(o)!=="array")return[new Ur(u,o,"array expected, "+di(o)+" found")];var p=n.styleSpec,x,A=[];if(o.length<1)return[new Ur(u,o,"filter array must have at least 1 element")];switch(A=A.concat(oh({key:u+"[0]",value:o[0],valueSpec:p.filter_operator,style:n.style,styleSpec:n.styleSpec})),on(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&on(o[1])==="$type"&&A.push(new Ur(u,o,'"$type" cannot be use with operator "'+o[0]+'"'));case"==":case"!=":o.length!==3&&A.push(new Ur(u,o,'filter array for operator "'+o[0]+'" must have 3 elements'));case"in":case"!in":o.length>=2&&(x=di(o[1]),x!=="string"&&A.push(new Ur(u+"[1]",o[1],"string expected, "+x+" found")));for(var k=2;k<o.length;k++)x=di(o[k]),on(o[1])==="$type"?A=A.concat(oh({key:u+"["+k+"]",value:o[k],valueSpec:p.geometry_type,style:n.style,styleSpec:n.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&A.push(new Ur(u+"["+k+"]",o[k],"string, number, or boolean expected, "+x+" found"));break;case"any":case"all":case"none":for(var F=1;F<o.length;F++)A=A.concat(Xv({key:u+"["+F+"]",value:o[F],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":x=di(o[1]),o.length!==2?A.push(new Ur(u,o,'filter array for "'+o[0]+'" operator must have 2 elements')):x!=="string"&&A.push(new Ur(u+"[1]",o[1],"string expected, "+x+" found"));break;case"within":x=di(o[1]),o.length!==2?A.push(new Ur(u,o,'filter array for "'+o[0]+'" operator must have 2 elements')):x!=="object"&&A.push(new Ur(u+"[1]",o[1],"object expected, "+x+" found"));break}return A}function Up(n,o){var u=n.key,p=n.style,x=n.styleSpec,A=n.value,k=n.objectKey,F=x[o+"_"+n.layerType];if(!F)return[];var Y=k.match(/^(.*)-transition$/);if(o==="paint"&&Y&&F[Y[1]]&&F[Y[1]].transition)return li({key:u,value:A,valueSpec:x.transition,style:p,styleSpec:x});var j=n.valueSpec||F[k];if(!j)return[new Ur(u,A,'unknown property "'+k+'"')];var Q;if(di(A)==="string"&&uf(j)&&!j.tokens&&(Q=/^{([^}]+)}$/.exec(A)))return[new Ur(u,A,'"'+k+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Q[1])+" }`.")];var ne=[];return n.layerType==="symbol"&&(k==="text-field"&&p&&!p.glyphs&&ne.push(new Ur(u,A,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&nc(gl(A))&&on(A.type)==="identity"&&ne.push(new Ur(u,A,'"text-font" does not support identity functions'))),ne.concat(li({key:n.key,value:A,valueSpec:j,style:p,styleSpec:x,expressionContext:"property",propertyType:o,propertyKey:k}))}function jv(n){return Up(n,"paint")}function Vp(n){return Up(n,"layout")}function Hp(n){var o=[],u=n.value,p=n.key,x=n.style,A=n.styleSpec;!u.type&&!u.ref&&o.push(new Ur(p,u,'either "type" or "ref" is required'));var k=on(u.type),F=on(u.ref);if(u.id)for(var Y=on(u.id),j=0;j<n.arrayIndex;j++){var Q=x.layers[j];on(Q.id)===Y&&o.push(new Ur(p,u.id,'duplicate layer id "'+u.id+'", previously used at line '+Q.id.__line__))}if("ref"in u){["type","source","source-layer","filter","layout"].forEach(function(Ce){Ce in u&&o.push(new Ur(p,u[Ce],'"'+Ce+'" is prohibited for ref layers'))});var ne;x.layers.forEach(function(Ce){on(Ce.id)===F&&(ne=Ce)}),ne?ne.ref?o.push(new Ur(p,u.ref,"ref cannot reference another ref layer")):k=on(ne.type):o.push(new Ur(p,u.ref,'ref layer "'+F+'" not found'))}else if(k!=="background")if(!u.source)o.push(new Ur(p,u,'missing required property "source"'));else{var ge=x.sources&&x.sources[u.source],ve=ge&&on(ge.type);ge?ve==="vector"&&k==="raster"?o.push(new Ur(p,u.source,'layer "'+u.id+'" requires a raster source')):ve==="raster"&&k!=="raster"?o.push(new Ur(p,u.source,'layer "'+u.id+'" requires a vector source')):ve==="vector"&&!u["source-layer"]?o.push(new Ur(p,u,'layer "'+u.id+'" must specify a "source-layer"')):ve==="raster-dem"&&k!=="hillshade"?o.push(new Ur(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):k==="line"&&u.paint&&u.paint["line-gradient"]&&(ve!=="geojson"||!ge.lineMetrics)&&o.push(new Ur(p,u,'layer "'+u.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):o.push(new Ur(p,u.source,'source "'+u.source+'" not found'))}return o=o.concat(ds({key:p,value:u,valueSpec:A.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return li({key:p+".type",value:u.type,valueSpec:A.layer.type,style:n.style,styleSpec:n.styleSpec,object:u,objectKey:"type"})},filter:sh,layout:function(qe){return ds({layer:u,key:qe.key,value:qe.value,style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{"*":function(tt){return Vp(yu({layerType:k},tt))}}})},paint:function(qe){return ds({layer:u,key:qe.key,value:qe.value,style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{"*":function(tt){return jv(yu({layerType:k},tt))}}})}}})),o}function mf(n){var o=n.value,u=n.key,p=di(o);return p!=="string"?[new Ur(u,o,"string expected, "+p+" found")]:[]}var lh={promoteId:Su};function uh(n){var o=n.value,u=n.key,p=n.styleSpec,x=n.style;if(!o.type)return[new Ur(u,o,'"type" is required')];var A=on(o.type),k;switch(A){case"vector":case"raster":case"raster-dem":return k=ds({key:u,value:o,valueSpec:p["source_"+A.replace("-","_")],style:n.style,styleSpec:p,objectElementValidators:lh}),k;case"geojson":if(k=ds({key:u,value:o,valueSpec:p.source_geojson,style:x,styleSpec:p,objectElementValidators:lh}),o.cluster)for(var F in o.clusterProperties){var Y=o.clusterProperties[F],j=Y[0],Q=Y[1],ne=typeof j=="string"?[j,["accumulated"],["get",F]]:j;k.push.apply(k,Mu({key:u+"."+F+".map",value:Q,expressionContext:"cluster-map"})),k.push.apply(k,Mu({key:u+"."+F+".reduce",value:ne,expressionContext:"cluster-reduce"}))}return k;case"video":return ds({key:u,value:o,valueSpec:p.source_video,style:x,styleSpec:p});case"image":return ds({key:u,value:o,valueSpec:p.source_image,style:x,styleSpec:p});case"canvas":return[new Ur(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oh({key:u+".type",value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,styleSpec:p})}}function Su(n){var o=n.key,u=n.value;if(di(u)==="string")return mf({key:o,value:u});var p=[];for(var x in u)p.push.apply(p,mf({key:o+"."+x,value:u[x]}));return p}function Jv(n){var o=n.value,u=n.styleSpec,p=u.light,x=n.style,A=[],k=di(o);if(o===void 0)return A;if(k!=="object")return A=A.concat([new Ur("light",o,"object expected, "+k+" found")]),A;for(var F in o){var Y=F.match(/^(.*)-transition$/);Y&&p[Y[1]]&&p[Y[1]].transition?A=A.concat(li({key:F,value:o[F],valueSpec:u.transition,style:x,styleSpec:u})):p[F]?A=A.concat(li({key:F,value:o[F],valueSpec:p[F],style:x,styleSpec:u})):A=A.concat([new Ur(F,o[F],'unknown property "'+F+'"')])}return A}function fh(n){return mf(n).length===0?[]:Mu(n)}function Gp(n){return mf(n).length===0?[]:Mu(n)}var yf={"*":function(){return[]},array:Zv,boolean:iy,number:hf,color:ny,constants:cp,enum:oh,filter:sh,function:nh,layer:Hp,object:ds,source:uh,light:Jv,string:mf,formatted:fh,resolvedImage:Gp};function li(n){var o=n.value,u=n.valueSpec,p=n.styleSpec;if(u.expression&&nc(on(o)))return nh(n);if(u.expression&&Au(gl(o)))return Mu(n);if(u.type&&yf[u.type])return yf[u.type](n);var x=ds(yu({},n,{valueSpec:u.type?p[u.type]:u}));return x}function Li(n){var o=n.value,u=n.key,p=mf(n);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new Ur(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new Ur(u,o,'"glyphs" url must include a "{range}" token'))),p}function uo(n,o){o===void 0&&(o=Xt);var u=[];return u=u.concat(li({key:"",value:n,valueSpec:o.$root,styleSpec:o,style:n,objectElementValidators:{glyphs:Li,"*":function(){return[]}}})),n.constants&&(u=u.concat(cp({key:"constants",value:n.constants,style:n,styleSpec:o}))),Ls(u)}uo.source=_o(uh),uo.light=_o(Jv),uo.layer=_o(Hp),uo.filter=_o(sh),uo.paintProperty=_o(jv),uo.layoutProperty=_o(Vp);function Ls(n){return[].concat(n).sort(function(o,u){return o.line-u.line})}function _o(n){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];return Ls(n.apply(this,o))}}var $a=uo,fi=$a.light,ch=$a.paintProperty,Fl=$a.layoutProperty;function lc(n,o){var u=!1;if(o&&o.length)for(var p=0,x=o;p<x.length;p+=1){var A=x[p];n.fire(new Yr(new Error(A.message))),u=!0}return u}var gf=Ds,ql=3;function Ds(n,o,u){var p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var x=new Int32Array(this.arrayBuffer);n=x[0],o=x[1],u=x[2],this.d=o+2*u;for(var A=0;A<this.d*this.d;A++){var k=x[ql+A],F=x[ql+A+1];p.push(k===F?null:x.subarray(k,F))}var Y=x[ql+p.length],j=x[ql+p.length+1];this.keys=x.subarray(Y,j),this.bboxes=x.subarray(j),this.insert=this._insertReadonly}else{this.d=o+2*u;for(var Q=0;Q<this.d*this.d;Q++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=u,this.scale=o/n,this.uid=0;var ne=u/o*n;this.min=-ne,this.max=n+ne}Ds.prototype.insert=function(n,o,u,p,x){this._forEachCell(o,u,p,x,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(x)},Ds.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ds.prototype._insertCell=function(n,o,u,p,x,A){this.cells[x].push(A)},Ds.prototype.query=function(n,o,u,p,x){var A=this.min,k=this.max;if(n<=A&&o<=A&&k<=u&&k<=p&&!x)return Array.prototype.slice.call(this.keys);var F=[],Y={};return this._forEachCell(n,o,u,p,this._queryCell,F,Y,x),F},Ds.prototype._queryCell=function(n,o,u,p,x,A,k,F){var Y=this.cells[x];if(Y!==null)for(var j=this.keys,Q=this.bboxes,ne=0;ne<Y.length;ne++){var ge=Y[ne];if(k[ge]===void 0){var ve=ge*4;(F?F(Q[ve+0],Q[ve+1],Q[ve+2],Q[ve+3]):n<=Q[ve+2]&&o<=Q[ve+3]&&u>=Q[ve+0]&&p>=Q[ve+1])?(k[ge]=!0,A.push(j[ge])):k[ge]=!1}}},Ds.prototype._forEachCell=function(n,o,u,p,x,A,k,F){for(var Y=this._convertToCellCoord(n),j=this._convertToCellCoord(o),Q=this._convertToCellCoord(u),ne=this._convertToCellCoord(p),ge=Y;ge<=Q;ge++)for(var ve=j;ve<=ne;ve++){var Ce=this.d*ve+ge;if(!(F&&!F(this._convertFromCellCoord(ge),this._convertFromCellCoord(ve),this._convertFromCellCoord(ge+1),this._convertFromCellCoord(ve+1)))&&x.call(this,n,o,u,p,Ce,A,k,F))return}},Ds.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},Ds.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},Ds.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,o=ql+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var x=new Int32Array(o+u+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var A=o,k=0;k<n.length;k++){var F=n[k];x[ql+k]=A,x.set(F,A),A+=F.length}return x[ql+n.length]=A,x.set(this.keys,A),A+=this.keys.length,x[ql+n.length+1]=A,x.set(this.bboxes,A),A+=this.bboxes.length,x.buffer};var hh=_.ImageData,_f=_.ImageBitmap,Nl={};function y(n,o,u){u===void 0&&(u={}),Object.defineProperty(o,"_classRegistryKey",{value:n,writeable:!1}),Nl[n]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}y("Object",Object),gf.serialize=function(o,u){var p=o.toArrayBuffer();return u&&u.push(p),{buffer:p}},gf.deserialize=function(o){return new gf(o.buffer)},y("Grid",gf),y("Color",ni),y("Error",Error),y("ResolvedImage",Rn),y("StylePropertyFunction",ff),y("StyleExpression",Il,{omit:["_evaluator"]}),y("ZoomDependentExpression",Es),y("ZoomConstantExpression",Cs),y("CompoundExpression",Fn,{omit:["_evaluate"]});for(var S in ic)ic[S]._classRegistryKey||y("Expression_"+S,ic[S]);function P(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function B(n){return _f&&n instanceof _f}function U(n,o){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(P(n)||B(n))return o&&o.push(n),n;if(ArrayBuffer.isView(n)){var u=n;return o&&o.push(u.buffer),u}if(n instanceof hh)return o&&o.push(n.data.buffer),n;if(Array.isArray(n)){for(var p=[],x=0,A=n;x<A.length;x+=1){var k=A[x];p.push(U(k,o))}return p}if(typeof n=="object"){var F=n.constructor,Y=F._classRegistryKey;if(!Y)throw new Error("can't serialize object of unregistered class");var j=F.serialize?F.serialize(n,o):{};if(!F.serialize){for(var Q in n)if(n.hasOwnProperty(Q)&&!(Nl[Y].omit.indexOf(Q)>=0)){var ne=n[Q];j[Q]=Nl[Y].shallow.indexOf(Q)>=0?ne:U(ne,o)}n instanceof Error&&(j.message=n.message)}if(j.$name)throw new Error("$name property is reserved for worker serialization logic.");return Y!=="Object"&&(j.$name=Y),j}throw new Error("can't serialize object of type "+typeof n)}function Z(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||P(n)||B(n)||ArrayBuffer.isView(n)||n instanceof hh)return n;if(Array.isArray(n))return n.map(Z);if(typeof n=="object"){var o=n.$name||"Object",u=Nl[o],p=u.klass;if(!p)throw new Error("can't deserialize unregistered class "+o);if(p.deserialize)return p.deserialize(n);for(var x=Object.create(p.prototype),A=0,k=Object.keys(n);A<k.length;A+=1){var F=k[A];if(F!=="$name"){var Y=n[F];x[F]=Nl[o].shallow.indexOf(F)>=0?Y:Z(Y)}}return x}throw new Error("can't deserialize object of type "+typeof n)}var $=function(){this.first=!0};$.prototype.update=function(o,u){var p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),o!==this.lastZoom?(this.lastZoom=o,this.lastFloorZoom=p,!0):!1)};var X={"Latin-1 Supplement":function(n){return n>=128&&n<=255},Arabic:function(n){return n>=1536&&n<=1791},"Arabic Supplement":function(n){return n>=1872&&n<=1919},"Arabic Extended-A":function(n){return n>=2208&&n<=2303},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},Khmer:function(n){return n>=6016&&n<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};function ae(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(De(p.charCodeAt(0)))return!0}return!1}function ye(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(!xe(p.charCodeAt(0)))return!1}return!0}function xe(n){return!(X.Arabic(n)||X["Arabic Supplement"](n)||X["Arabic Extended-A"](n)||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n))}function Pe(n){return n<11904?!1:!!(X["Bopomofo Extended"](n)||X.Bopomofo(n)||X["CJK Compatibility Forms"](n)||X["CJK Compatibility Ideographs"](n)||X["CJK Compatibility"](n)||X["CJK Radicals Supplement"](n)||X["CJK Strokes"](n)||X["CJK Symbols and Punctuation"](n)||X["CJK Unified Ideographs Extension A"](n)||X["CJK Unified Ideographs"](n)||X["Enclosed CJK Letters and Months"](n)||X["Halfwidth and Fullwidth Forms"](n)||X.Hiragana(n)||X["Ideographic Description Characters"](n)||X["Kangxi Radicals"](n)||X["Katakana Phonetic Extensions"](n)||X.Katakana(n)||X["Vertical Forms"](n)||X["Yi Radicals"](n)||X["Yi Syllables"](n))}function De(n){return n===746||n===747?!0:n<4352?!1:!!(X["Bopomofo Extended"](n)||X.Bopomofo(n)||X["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||X["CJK Compatibility Ideographs"](n)||X["CJK Compatibility"](n)||X["CJK Radicals Supplement"](n)||X["CJK Strokes"](n)||X["CJK Symbols and Punctuation"](n)&&!(n>=12296&&n<=12305)&&!(n>=12308&&n<=12319)&&n!==12336||X["CJK Unified Ideographs Extension A"](n)||X["CJK Unified Ideographs"](n)||X["Enclosed CJK Letters and Months"](n)||X["Hangul Compatibility Jamo"](n)||X["Hangul Jamo Extended-A"](n)||X["Hangul Jamo Extended-B"](n)||X["Hangul Jamo"](n)||X["Hangul Syllables"](n)||X.Hiragana(n)||X["Ideographic Description Characters"](n)||X.Kanbun(n)||X["Kangxi Radicals"](n)||X["Katakana Phonetic Extensions"](n)||X.Katakana(n)&&n!==12540||X["Halfwidth and Fullwidth Forms"](n)&&n!==65288&&n!==65289&&n!==65293&&!(n>=65306&&n<=65310)&&n!==65339&&n!==65341&&n!==65343&&!(n>=65371&&n<=65503)&&n!==65507&&!(n>=65512&&n<=65519)||X["Small Form Variants"](n)&&!(n>=65112&&n<=65118)&&!(n>=65123&&n<=65126)||X["Unified Canadian Aboriginal Syllabics"](n)||X["Unified Canadian Aboriginal Syllabics Extended"](n)||X["Vertical Forms"](n)||X["Yijing Hexagram Symbols"](n)||X["Yi Syllables"](n)||X["Yi Radicals"](n))}function $e(n){return!!(X["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||X["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||X["Letterlike Symbols"](n)||X["Number Forms"](n)||X["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||X["Control Pictures"](n)&&n!==9251||X["Optical Character Recognition"](n)||X["Enclosed Alphanumerics"](n)||X["Geometric Shapes"](n)||X["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||X["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||X["CJK Symbols and Punctuation"](n)||X.Katakana(n)||X["Private Use Area"](n)||X["CJK Compatibility Forms"](n)||X["Small Form Variants"](n)||X["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}function ot(n){return!(De(n)||$e(n))}function Ie(n){return X.Arabic(n)||X["Arabic Supplement"](n)||X["Arabic Extended-A"](n)||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n)}function He(n){return n>=1424&&n<=2303||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n)}function Qe(n,o){return!(!o&&He(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||X.Khmer(n))}function ct(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(He(p.charCodeAt(0)))return!0}return!1}function nt(n,o){for(var u=0,p=n;u<p.length;u+=1){var x=p[u];if(!Qe(x.charCodeAt(0),o))return!1}return!0}var je={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Vt=null,or=je.unavailable,hr=null,fr=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(or=je.error),Vt&&Vt(n)};function zr(){Rr.fire(new ri("pluginStateChange",{pluginStatus:or,pluginURL:hr}))}var Rr=new gr,ea=function(){return or},Vr=function(n){return n({pluginStatus:or,pluginURL:hr}),Rr.on("pluginStateChange",n),n},Kr=function(n,o,u){if(u===void 0&&(u=!1),or===je.deferred||or===je.loading||or===je.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");hr=at.resolveURL(n),or=je.deferred,Vt=o,zr(),u||Na()},Na=function(){if(or!==je.deferred||!hr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");or=je.loading,zr(),hr&&et({url:hr},function(n){n?fr(n):(or=je.loaded,zr())})},ei={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return or===je.loaded||ei.applyArabicShaping!=null},isLoading:function(){return or===je.loading},setState:function(o){or=o.pluginStatus,hr=o.pluginURL},isParsed:function(){return ei.applyArabicShaping!=null&&ei.processBidirectionalText!=null&&ei.processStyledBidirectionalText!=null},getPluginURL:function(){return hr}},Qa=function(){!ei.isLoading()&&!ei.isLoaded()&&ea()==="deferred"&&Na()},jt=function(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $,this.transition={})};jt.prototype.isSupportedScript=function(o){return nt(o,ei.isLoaded())},jt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},jt.prototype.getCrossfadeParameters=function(){var o=this.zoom,u=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}};var Jr=function(o,u){this.property=o,this.value=u,this.expression=ry(u===void 0?o.specification.default:u,o.specification)};Jr.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Jr.prototype.possiblyEvaluate=function(o,u,p){return this.property.possiblyEvaluate(this,o,u,p)};var na=function(o){this.property=o,this.value=new Jr(o,void 0)};na.prototype.transitioned=function(o,u){return new Di(this.property,this.value,u,H({},o.transition,this.transition),o.now)},na.prototype.untransitioned=function(){return new Di(this.property,this.value,null,{},0)};var oa=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};oa.prototype.getValue=function(o){return Me(this._values[o].value.value)},oa.prototype.setValue=function(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new na(this._values[o].property)),this._values[o].value=new Jr(this._values[o].property,u===null?void 0:Me(u))},oa.prototype.getTransition=function(o){return Me(this._values[o].transition)},oa.prototype.setTransition=function(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new na(this._values[o].property)),this._values[o].transition=Me(u)||void 0},oa.prototype.serialize=function(){for(var o={},u=0,p=Object.keys(this._values);u<p.length;u+=1){var x=p[u],A=this.getValue(x);A!==void 0&&(o[x]=A);var k=this.getTransition(x);k!==void 0&&(o[x+"-transition"]=k)}return o},oa.prototype.transitioned=function(o,u){for(var p=new Vi(this._properties),x=0,A=Object.keys(this._values);x<A.length;x+=1){var k=A[x];p._values[k]=this._values[k].transitioned(o,u._values[k])}return p},oa.prototype.untransitioned=function(){for(var o=new Vi(this._properties),u=0,p=Object.keys(this._values);u<p.length;u+=1){var x=p[u];o._values[x]=this._values[x].untransitioned()}return o};var Di=function(o,u,p,x,A){this.property=o,this.value=u,this.begin=A+x.delay||0,this.end=this.begin+x.duration||0,o.specification.transition&&(x.delay||x.duration)&&(this.prior=p)};Di.prototype.possiblyEvaluate=function(o,u,p){var x=o.now||0,A=this.value.possiblyEvaluate(o,u,p),k=this.prior;if(k){if(x>this.end)return this.prior=null,A;if(this.value.isDataDriven())return this.prior=null,A;if(x<this.begin)return k.possiblyEvaluate(o,u,p);var F=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(o,u,p),A,C(F))}else return A};var Vi=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};Vi.prototype.possiblyEvaluate=function(o,u,p){for(var x=new wn(this._properties),A=0,k=Object.keys(this._values);A<k.length;A+=1){var F=k[A];x._values[F]=this._values[F].possiblyEvaluate(o,u,p)}return x},Vi.prototype.hasTransition=function(){for(var o=0,u=Object.keys(this._values);o<u.length;o+=1){var p=u[o];if(this._values[p].prior)return!0}return!1};var en=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};en.prototype.getValue=function(o){return Me(this._values[o].value)},en.prototype.setValue=function(o,u){this._values[o]=new Jr(this._values[o].property,u===null?void 0:Me(u))},en.prototype.serialize=function(){for(var o={},u=0,p=Object.keys(this._values);u<p.length;u+=1){var x=p[u],A=this.getValue(x);A!==void 0&&(o[x]=A)}return o},en.prototype.possiblyEvaluate=function(o,u,p){for(var x=new wn(this._properties),A=0,k=Object.keys(this._values);A<k.length;A+=1){var F=k[A];x._values[F]=this._values[F].possiblyEvaluate(o,u,p)}return x};var bi=function(o,u,p){this.property=o,this.value=u,this.parameters=p};bi.prototype.isConstant=function(){return this.value.kind==="constant"},bi.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},bi.prototype.evaluate=function(o,u,p,x){return this.property.evaluate(this.value,this.parameters,o,u,p,x)};var wn=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};wn.prototype.get=function(o){return this._values[o]};var Tr=function(o){this.specification=o};Tr.prototype.possiblyEvaluate=function(o,u){return o.expression.evaluate(u)},Tr.prototype.interpolate=function(o,u,p){var x=Sl[this.specification.type];return x?x(o,u,p):o};var Hr=function(o,u){this.specification=o,this.overrides=u};Hr.prototype.possiblyEvaluate=function(o,u,p,x){return o.expression.kind==="constant"||o.expression.kind==="camera"?new bi(this,{kind:"constant",value:o.expression.evaluate(u,null,{},p,x)},u):new bi(this,o.expression,u)},Hr.prototype.interpolate=function(o,u,p){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new bi(this,{kind:"constant",value:void 0},o.parameters);var x=Sl[this.specification.type];return x?new bi(this,{kind:"constant",value:x(o.value.value,u.value.value,p)},o.parameters):o},Hr.prototype.evaluate=function(o,u,p,x,A,k){return o.kind==="constant"?o.value:o.evaluate(u,p,x,A,k)};var Ni=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.possiblyEvaluate=function(p,x,A,k){if(p.value===void 0)return new bi(this,{kind:"constant",value:void 0},x);if(p.expression.kind==="constant"){var F=p.expression.evaluate(x,null,{},A,k),Y=p.property.specification.type==="resolvedImage",j=Y&&typeof F!="string"?F.name:F,Q=this._calculate(j,j,j,x);return new bi(this,{kind:"constant",value:Q},x)}else if(p.expression.kind==="camera"){var ne=this._calculate(p.expression.evaluate({zoom:x.zoom-1}),p.expression.evaluate({zoom:x.zoom}),p.expression.evaluate({zoom:x.zoom+1}),x);return new bi(this,{kind:"constant",value:ne},x)}else return new bi(this,p.expression,x)},o.prototype.evaluate=function(p,x,A,k,F,Y){if(p.kind==="source"){var j=p.evaluate(x,A,k,F,Y);return this._calculate(j,j,j,x)}else return p.kind==="composite"?this._calculate(p.evaluate({zoom:Math.floor(x.zoom)-1},A,k),p.evaluate({zoom:Math.floor(x.zoom)},A,k),p.evaluate({zoom:Math.floor(x.zoom)+1},A,k),x):p.value},o.prototype._calculate=function(p,x,A,k){var F=k.zoom;return F>k.zoomHistory.lastIntegerZoom?{from:p,to:x}:{from:A,to:x}},o.prototype.interpolate=function(p){return p},o}(Hr),Ai=function(o){this.specification=o};Ai.prototype.possiblyEvaluate=function(o,u,p,x){if(o.value!==void 0)if(o.expression.kind==="constant"){var A=o.expression.evaluate(u,null,{},p,x);return this._calculate(A,A,A,u)}else return this._calculate(o.expression.evaluate(new jt(Math.floor(u.zoom-1),u)),o.expression.evaluate(new jt(Math.floor(u.zoom),u)),o.expression.evaluate(new jt(Math.floor(u.zoom+1),u)),u)},Ai.prototype._calculate=function(o,u,p,x){var A=x.zoom;return A>x.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:p,to:u}},Ai.prototype.interpolate=function(o){return o};var fo=function(o){this.specification=o};fo.prototype.possiblyEvaluate=function(o,u,p,x){return!!o.expression.evaluate(u,null,{},p,x)},fo.prototype.interpolate=function(){return!1};var qn=function(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var u in o){var p=o[u];p.specification.overridable&&this.overridableProperties.push(u);var x=this.defaultPropertyValues[u]=new Jr(p,void 0),A=this.defaultTransitionablePropertyValues[u]=new na(p);this.defaultTransitioningPropertyValues[u]=A.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=x.possiblyEvaluate({})}};y("DataDrivenProperty",Hr),y("DataConstantProperty",Tr),y("CrossFadedDataDrivenProperty",Ni),y("CrossFadedProperty",Ai),y("ColorRampProperty",fo);var mn="-transition",pi=function(n){function o(u,p){if(n.call(this),this.id=u.id,this.type=u.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},u.type!=="custom"&&(u=u,this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),p.layout&&(this._unevaluatedLayout=new en(p.layout)),p.paint)){this._transitionablePaint=new oa(p.paint);for(var x in u.paint)this.setPaintProperty(x,u.paint[x],{validate:!1});for(var A in u.layout)this.setLayoutProperty(A,u.layout[A],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wn(p.paint)}}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},o.prototype.getLayoutProperty=function(p){return p==="visibility"?this.visibility:this._unevaluatedLayout.getValue(p)},o.prototype.setLayoutProperty=function(p,x,A){if(A===void 0&&(A={}),x!=null){var k="layers."+this.id+".layout."+p;if(this._validate(Fl,k,p,x,A))return}if(p==="visibility"){this.visibility=x;return}this._unevaluatedLayout.setValue(p,x)},o.prototype.getPaintProperty=function(p){return le(p,mn)?this._transitionablePaint.getTransition(p.slice(0,-mn.length)):this._transitionablePaint.getValue(p)},o.prototype.setPaintProperty=function(p,x,A){if(A===void 0&&(A={}),x!=null){var k="layers."+this.id+".paint."+p;if(this._validate(ch,k,p,x,A))return!1}if(le(p,mn))return this._transitionablePaint.setTransition(p.slice(0,-mn.length),x||void 0),!1;var F=this._transitionablePaint._values[p],Y=F.property.specification["property-type"]==="cross-faded-data-driven",j=F.value.isDataDriven(),Q=F.value;this._transitionablePaint.setValue(p,x),this._handleSpecialPaintPropertyUpdate(p);var ne=this._transitionablePaint._values[p].value,ge=ne.isDataDriven();return ge||j||Y||this._handleOverridablePaintPropertyUpdate(p,Q,ne)},o.prototype._handleSpecialPaintPropertyUpdate=function(p){},o.prototype._handleOverridablePaintPropertyUpdate=function(p,x,A){return!1},o.prototype.isHidden=function(p){return this.minzoom&&p<this.minzoom||this.maxzoom&&p>=this.maxzoom?!0:this.visibility==="none"},o.prototype.updateTransitions=function(p){this._transitioningPaint=this._transitionablePaint.transitioned(p,this._transitioningPaint)},o.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},o.prototype.recalculate=function(p,x){p.getCrossfadeParameters&&(this._crossfadeParameters=p.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(p,void 0,x)),this.paint=this._transitioningPaint.possiblyEvaluate(p,void 0,x)},o.prototype.serialize=function(){var p={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(p.layout=p.layout||{},p.layout.visibility=this.visibility),Se(p,function(x,A){return x!==void 0&&!(A==="layout"&&!Object.keys(x).length)&&!(A==="paint"&&!Object.keys(x).length)})},o.prototype._validate=function(p,x,A,k,F){return F===void 0&&(F={}),F&&F.validate===!1?!1:lc(this,p.call($a,{key:x,layerType:this.type,objectKey:A,value:k,styleSpec:Xt,style:{glyphs:!0,sprite:!0}}))},o.prototype.is3D=function(){return!1},o.prototype.isTileClipped=function(){return!1},o.prototype.hasOffscreenPass=function(){return!1},o.prototype.resize=function(){},o.prototype.isStateDependent=function(){for(var p in this.paint._values){var x=this.paint.get(p);if(!(!(x instanceof bi)||!uf(x.property.specification))&&(x.value.kind==="source"||x.value.kind==="composite")&&x.value.isStateDependent)return!0}return!1},o}(gr),Jo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},co=function(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ci=128,xf=5,Ta=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ta.serialize=function(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},Ta.deserialize=function(o){var u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u},Ta.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ta.prototype.clear=function(){this.length=0},Ta.prototype.resize=function(o){this.reserve(o),this.length=o},Ta.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(this.capacity*xf),ci),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}},Ta.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function ui(n,o){o===void 0&&(o=1);var u=0,p=0,x=n.map(function(k){var F=Bl(k.type),Y=u=Kv(u,Math.max(o,F)),j=k.components||1;return p=Math.max(p,F),u+=F*j,{name:k.name,type:k.type,components:j,offset:Y}}),A=Kv(u,Math.max(p,o));return{members:x,size:A,alignment:o}}function Bl(n){return Jo[n].BYTES_PER_ELEMENT}function Kv(n,o){return Math.ceil(n/o)*o}var uc=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x){var A=this.length;return this.resize(A+1),this.emplace(A,p,x)},o.prototype.emplace=function(p,x,A){var k=p*2;return this.int16[k+0]=x,this.int16[k+1]=A,p},o}(Ta);uc.prototype.bytesPerElement=4,y("StructArrayLayout2i4",uc);var sy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k){var F=this.length;return this.resize(F+1),this.emplace(F,p,x,A,k)},o.prototype.emplace=function(p,x,A,k,F){var Y=p*4;return this.int16[Y+0]=x,this.int16[Y+1]=A,this.int16[Y+2]=k,this.int16[Y+3]=F,p},o}(Ta);sy.prototype.bytesPerElement=8,y("StructArrayLayout4i8",sy);var bf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y){var j=this.length;return this.resize(j+1),this.emplace(j,p,x,A,k,F,Y)},o.prototype.emplace=function(p,x,A,k,F,Y,j){var Q=p*6;return this.int16[Q+0]=x,this.int16[Q+1]=A,this.int16[Q+2]=k,this.int16[Q+3]=F,this.int16[Q+4]=Y,this.int16[Q+5]=j,p},o}(Ta);bf.prototype.bytesPerElement=12,y("StructArrayLayout2i4i12",bf);var vh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y){var j=this.length;return this.resize(j+1),this.emplace(j,p,x,A,k,F,Y)},o.prototype.emplace=function(p,x,A,k,F,Y,j){var Q=p*4,ne=p*8;return this.int16[Q+0]=x,this.int16[Q+1]=A,this.uint8[ne+4]=k,this.uint8[ne+5]=F,this.uint8[ne+6]=Y,this.uint8[ne+7]=j,p},o}(Ta);vh.prototype.bytesPerElement=8,y("StructArrayLayout2i4ub8",vh);var dh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x){var A=this.length;return this.resize(A+1),this.emplace(A,p,x)},o.prototype.emplace=function(p,x,A){var k=p*2;return this.float32[k+0]=x,this.float32[k+1]=A,p},o}(Ta);dh.prototype.bytesPerElement=8,y("StructArrayLayout2f8",dh);var Lo=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y,j,Q,ne,ge){var ve=this.length;return this.resize(ve+1),this.emplace(ve,p,x,A,k,F,Y,j,Q,ne,ge)},o.prototype.emplace=function(p,x,A,k,F,Y,j,Q,ne,ge,ve){var Ce=p*10;return this.uint16[Ce+0]=x,this.uint16[Ce+1]=A,this.uint16[Ce+2]=k,this.uint16[Ce+3]=F,this.uint16[Ce+4]=Y,this.uint16[Ce+5]=j,this.uint16[Ce+6]=Q,this.uint16[Ce+7]=ne,this.uint16[Ce+8]=ge,this.uint16[Ce+9]=ve,p},o}(Ta);Lo.prototype.bytesPerElement=20,y("StructArrayLayout10ui20",Lo);var wf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce){var qe=this.length;return this.resize(qe+1),this.emplace(qe,p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce)},o.prototype.emplace=function(p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe){var ft=p*12;return this.int16[ft+0]=x,this.int16[ft+1]=A,this.int16[ft+2]=k,this.int16[ft+3]=F,this.uint16[ft+4]=Y,this.uint16[ft+5]=j,this.uint16[ft+6]=Q,this.uint16[ft+7]=ne,this.int16[ft+8]=ge,this.int16[ft+9]=ve,this.int16[ft+10]=Ce,this.int16[ft+11]=qe,p},o}(Ta);wf.prototype.bytesPerElement=24,y("StructArrayLayout4i4ui4i24",wf);var ly=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,x,A)},o.prototype.emplace=function(p,x,A,k){var F=p*3;return this.float32[F+0]=x,this.float32[F+1]=A,this.float32[F+2]=k,p},o}(Ta);ly.prototype.bytesPerElement=12,y("StructArrayLayout3f12",ly);var uy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var x=this.length;return this.resize(x+1),this.emplace(x,p)},o.prototype.emplace=function(p,x){var A=p*1;return this.uint32[A+0]=x,p},o}(Ta);uy.prototype.bytesPerElement=4,y("StructArrayLayout1ul4",uy);var Qv=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y,j,Q,ne){var ge=this.length;return this.resize(ge+1),this.emplace(ge,p,x,A,k,F,Y,j,Q,ne)},o.prototype.emplace=function(p,x,A,k,F,Y,j,Q,ne,ge){var ve=p*10,Ce=p*5;return this.int16[ve+0]=x,this.int16[ve+1]=A,this.int16[ve+2]=k,this.int16[ve+3]=F,this.int16[ve+4]=Y,this.int16[ve+5]=j,this.uint32[Ce+3]=Q,this.uint16[ve+8]=ne,this.uint16[ve+9]=ge,p},o}(Ta);Qv.prototype.bytesPerElement=20,y("StructArrayLayout6i1ul2ui20",Qv);var Zp=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y){var j=this.length;return this.resize(j+1),this.emplace(j,p,x,A,k,F,Y)},o.prototype.emplace=function(p,x,A,k,F,Y,j){var Q=p*6;return this.int16[Q+0]=x,this.int16[Q+1]=A,this.int16[Q+2]=k,this.int16[Q+3]=F,this.int16[Q+4]=Y,this.int16[Q+5]=j,p},o}(Ta);Zp.prototype.bytesPerElement=12,y("StructArrayLayout2i2i2i12",Zp);var ku=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F){var Y=this.length;return this.resize(Y+1),this.emplace(Y,p,x,A,k,F)},o.prototype.emplace=function(p,x,A,k,F,Y){var j=p*4,Q=p*8;return this.float32[j+0]=x,this.float32[j+1]=A,this.float32[j+2]=k,this.int16[Q+6]=F,this.int16[Q+7]=Y,p},o}(Ta);ku.prototype.bytesPerElement=16,y("StructArrayLayout2f1f2i16",ku);var Ko=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k){var F=this.length;return this.resize(F+1),this.emplace(F,p,x,A,k)},o.prototype.emplace=function(p,x,A,k,F){var Y=p*12,j=p*3;return this.uint8[Y+0]=x,this.uint8[Y+1]=A,this.float32[j+1]=k,this.float32[j+2]=F,p},o}(Ta);Ko.prototype.bytesPerElement=12,y("StructArrayLayout2ub2f12",Ko);var Cu=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,x,A)},o.prototype.emplace=function(p,x,A,k){var F=p*3;return this.uint16[F+0]=x,this.uint16[F+1]=A,this.uint16[F+2]=k,p},o}(Ta);Cu.prototype.bytesPerElement=6,y("StructArrayLayout3ui6",Cu);var $v=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt){var At=this.length;return this.resize(At+1),this.emplace(At,p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt)},o.prototype.emplace=function(p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt,At){var Rt=p*24,Jt=p*12,dr=p*48;return this.int16[Rt+0]=x,this.int16[Rt+1]=A,this.uint16[Rt+2]=k,this.uint16[Rt+3]=F,this.uint32[Jt+2]=Y,this.uint32[Jt+3]=j,this.uint32[Jt+4]=Q,this.uint16[Rt+10]=ne,this.uint16[Rt+11]=ge,this.uint16[Rt+12]=ve,this.float32[Jt+7]=Ce,this.float32[Jt+8]=qe,this.uint8[dr+36]=ft,this.uint8[dr+37]=tt,this.uint8[dr+38]=St,this.uint32[Jt+10]=gt,this.int16[Rt+22]=At,p},o}(Ta);$v.prototype.bytesPerElement=48,y("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",$v);var Yp=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt,At,Rt,Jt,dr,cr,Fr,Cr,Ir,Qr,qr,Br){var ya=this.length;return this.resize(ya+1),this.emplace(ya,p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt,At,Rt,Jt,dr,cr,Fr,Cr,Ir,Qr,qr,Br)},o.prototype.emplace=function(p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt,At,Rt,Jt,dr,cr,Fr,Cr,Ir,Qr,qr,Br,ya){var Xr=p*34,Ya=p*17;return this.int16[Xr+0]=x,this.int16[Xr+1]=A,this.int16[Xr+2]=k,this.int16[Xr+3]=F,this.int16[Xr+4]=Y,this.int16[Xr+5]=j,this.int16[Xr+6]=Q,this.int16[Xr+7]=ne,this.uint16[Xr+8]=ge,this.uint16[Xr+9]=ve,this.uint16[Xr+10]=Ce,this.uint16[Xr+11]=qe,this.uint16[Xr+12]=ft,this.uint16[Xr+13]=tt,this.uint16[Xr+14]=St,this.uint16[Xr+15]=gt,this.uint16[Xr+16]=At,this.uint16[Xr+17]=Rt,this.uint16[Xr+18]=Jt,this.uint16[Xr+19]=dr,this.uint16[Xr+20]=cr,this.uint16[Xr+21]=Fr,this.uint16[Xr+22]=Cr,this.uint32[Ya+12]=Ir,this.float32[Ya+13]=Qr,this.float32[Ya+14]=qr,this.float32[Ya+15]=Br,this.float32[Ya+16]=ya,p},o}(Ta);Yp.prototype.bytesPerElement=68,y("StructArrayLayout8i15ui1ul4f68",Yp);var ph=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var x=this.length;return this.resize(x+1),this.emplace(x,p)},o.prototype.emplace=function(p,x){var A=p*1;return this.float32[A+0]=x,p},o}(Ta);ph.prototype.bytesPerElement=4,y("StructArrayLayout1f4",ph);var fy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,x,A)},o.prototype.emplace=function(p,x,A,k){var F=p*3;return this.int16[F+0]=x,this.int16[F+1]=A,this.int16[F+2]=k,p},o}(Ta);fy.prototype.bytesPerElement=6,y("StructArrayLayout3i6",fy);var Tf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,x,A)},o.prototype.emplace=function(p,x,A,k){var F=p*2,Y=p*4;return this.uint32[F+0]=x,this.uint16[Y+2]=A,this.uint16[Y+3]=k,p},o}(Ta);Tf.prototype.bytesPerElement=8,y("StructArrayLayout1ul2ui8",Tf);var ed=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x){var A=this.length;return this.resize(A+1),this.emplace(A,p,x)},o.prototype.emplace=function(p,x,A){var k=p*2;return this.uint16[k+0]=x,this.uint16[k+1]=A,p},o}(Ta);ed.prototype.bytesPerElement=4,y("StructArrayLayout2ui4",ed);var mh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var x=this.length;return this.resize(x+1),this.emplace(x,p)},o.prototype.emplace=function(p,x){var A=p*1;return this.uint16[A+0]=x,p},o}(Ta);mh.prototype.bytesPerElement=2,y("StructArrayLayout1ui2",mh);var fc=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,x,A,k){var F=this.length;return this.resize(F+1),this.emplace(F,p,x,A,k)},o.prototype.emplace=function(p,x,A,k,F){var Y=p*4;return this.float32[Y+0]=x,this.float32[Y+1]=A,this.float32[Y+2]=k,this.float32[Y+3]=F,p},o}(Ta);fc.prototype.bytesPerElement=16,y("StructArrayLayout4f16",fc);var k1=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return u.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},u.x1.get=function(){return this._structArray.int16[this._pos2+2]},u.y1.get=function(){return this._structArray.int16[this._pos2+3]},u.x2.get=function(){return this._structArray.int16[this._pos2+4]},u.y2.get=function(){return this._structArray.int16[this._pos2+5]},u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(o.prototype,u),o}(co);k1.prototype.size=20;var cy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new k1(this,p)},o}(Qv);y("CollisionBoxArray",cy);var cc=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},u.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},u.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},u.segment.get=function(){return this._structArray.uint16[this._pos2+10]},u.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},u.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},u.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},u.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},u.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},u.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},u.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},u.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},u.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},u.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},u.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(o.prototype,u),o}(co);cc.prototype.size=48;var hy=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new cc(this,p)},o}($v);y("PlacedSymbolArray",hy);var yh=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},u.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},u.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},u.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},u.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},u.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},u.key.get=function(){return this._structArray.uint16[this._pos2+8]},u.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},u.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},u.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},u.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},u.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},u.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},u.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},u.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},u.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},u.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},u.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},u.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},u.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},u.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},u.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},u.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},u.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},u.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(o.prototype,u),o}(co);yh.prototype.size=68;var C1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new yh(this,p)},o}(Yp);y("SymbolInstanceArray",C1);var E1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getoffsetX=function(p){return this.float32[p*1+0]},o}(ph);y("GlyphOffsetArray",E1);var Qs=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getx=function(p){return this.int16[p*3+0]},o.prototype.gety=function(p){return this.int16[p*3+1]},o.prototype.gettileUnitDistanceFromAnchor=function(p){return this.int16[p*3+2]},o}(fy);y("SymbolLineVertexArray",Qs);var L1=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(o.prototype,u),o}(co);L1.prototype.size=8;var D1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new L1(this,p)},o}(Tf);y("FeatureIndexArray",D1);var p3=ui([{name:"a_pos",components:2,type:"Int16"}],4),P1=p3.members,Tn=function(o){o===void 0&&(o=[]),this.segments=o};Tn.prototype.prepareSegment=function(o,u,p,x){var A=this.segments[this.segments.length-1];return o>Tn.MAX_VERTEX_ARRAY_LENGTH&&ke("Max vertices per segment is "+Tn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!A||A.vertexLength+o>Tn.MAX_VERTEX_ARRAY_LENGTH||A.sortKey!==x)&&(A={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},x!==void 0&&(A.sortKey=x),this.segments.push(A)),A},Tn.prototype.get=function(){return this.segments},Tn.prototype.destroy=function(){for(var o=0,u=this.segments;o<u.length;o+=1){var p=u[o];for(var x in p.vaos)p.vaos[x].destroy()}},Tn.simpleSegment=function(o,u,p,x){return new Tn([{vertexOffset:o,primitiveOffset:u,vertexLength:p,primitiveLength:x,vaos:{},sortKey:0}])},Tn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,y("SegmentVector",Tn);function g(n,o){return n=I(Math.floor(n),0,255),o=I(Math.floor(o),0,255),256*n+o}var c=ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),b=s(function(n){function o(u,p){var x,A,k,F,Y,j,Q,ne;for(x=u.length&3,A=u.length-x,k=p,Y=3432918353,j=461845907,ne=0;ne<A;)Q=u.charCodeAt(ne)&255|(u.charCodeAt(++ne)&255)<<8|(u.charCodeAt(++ne)&255)<<16|(u.charCodeAt(++ne)&255)<<24,++ne,Q=(Q&65535)*Y+(((Q>>>16)*Y&65535)<<16)&4294967295,Q=Q<<15|Q>>>17,Q=(Q&65535)*j+(((Q>>>16)*j&65535)<<16)&4294967295,k^=Q,k=k<<13|k>>>19,F=(k&65535)*5+(((k>>>16)*5&65535)<<16)&4294967295,k=(F&65535)+27492+(((F>>>16)+58964&65535)<<16);switch(Q=0,x){case 3:Q^=(u.charCodeAt(ne+2)&255)<<16;case 2:Q^=(u.charCodeAt(ne+1)&255)<<8;case 1:Q^=u.charCodeAt(ne)&255,Q=(Q&65535)*Y+(((Q>>>16)*Y&65535)<<16)&4294967295,Q=Q<<15|Q>>>17,Q=(Q&65535)*j+(((Q>>>16)*j&65535)<<16)&4294967295,k^=Q}return k^=u.length,k^=k>>>16,k=(k&65535)*2246822507+(((k>>>16)*2246822507&65535)<<16)&4294967295,k^=k>>>13,k=(k&65535)*3266489909+(((k>>>16)*3266489909&65535)<<16)&4294967295,k^=k>>>16,k>>>0}n.exports=o}),d=s(function(n){function o(u,p){for(var x=u.length,A=p^x,k=0,F;x>=4;)F=u.charCodeAt(k)&255|(u.charCodeAt(++k)&255)<<8|(u.charCodeAt(++k)&255)<<16|(u.charCodeAt(++k)&255)<<24,F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16),F^=F>>>24,F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16),A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16)^F,x-=4,++k;switch(x){case 3:A^=(u.charCodeAt(k+2)&255)<<16;case 2:A^=(u.charCodeAt(k+1)&255)<<8;case 1:A^=u.charCodeAt(k)&255,A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16)}return A^=A>>>13,A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16),A^=A>>>15,A>>>0}n.exports=o}),w=b,D=b,R=d;w.murmur3=D,w.murmur2=R;var G=function(){this.ids=[],this.positions=[],this.indexed=!1};G.prototype.add=function(o,u,p,x){this.ids.push(re(o)),this.positions.push(u,p,x)},G.prototype.getPositions=function(o){for(var u=re(o),p=0,x=this.ids.length-1;p<x;){var A=p+x>>1;this.ids[A]>=u?x=A:p=A+1}for(var k=[];this.ids[p]===u;){var F=this.positions[3*p],Y=this.positions[3*p+1],j=this.positions[3*p+2];k.push({index:F,start:Y,end:j}),p++}return k},G.serialize=function(o,u){var p=new Float64Array(o.ids),x=new Uint32Array(o.positions);return ce(p,x,0,p.length-1),u&&u.push(p.buffer,x.buffer),{ids:p,positions:x}},G.deserialize=function(o){var u=new G;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u};var K=Math.pow(2,53)-1;function re(n){var o=+n;return!isNaN(o)&&o<=K?o:w(String(n))}function ce(n,o,u,p){for(;u<p;){for(var x=n[u+p>>1],A=u-1,k=p+1;;){do A++;while(n[A]<x);do k--;while(n[k]>x);if(A>=k)break;we(n,A,k),we(o,3*A,3*k),we(o,3*A+1,3*k+1),we(o,3*A+2,3*k+2)}k-u<p-k?(ce(n,o,u,k),u=k+1):(ce(n,o,k+1,p),p=k)}}function we(n,o,u){var p=n[o];n[o]=n[u],n[u]=p}y("FeaturePositionMap",G);var be=function(o,u){this.gl=o.gl,this.location=u},Re=function(n){function o(u,p){n.call(this,u,p),this.current=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))},o}(be),Ze=function(n){function o(u,p){n.call(this,u,p),this.current=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))},o}(be),Ge=function(n){function o(u,p){n.call(this,u,p),this.current=[0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1])&&(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))},o}(be),Oe=function(n){function o(u,p){n.call(this,u,p),this.current=[0,0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1]||p[2]!==this.current[2])&&(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))},o}(be),Ke=function(n){function o(u,p){n.call(this,u,p),this.current=[0,0,0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1]||p[2]!==this.current[2]||p[3]!==this.current[3])&&(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3]))},o}(be),vt=function(n){function o(u,p){n.call(this,u,p),this.current=ni.transparent}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p.r!==this.current.r||p.g!==this.current.g||p.b!==this.current.b||p.a!==this.current.a)&&(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a))},o}(be),zt=new Float32Array(16),Nt=function(n){function o(u,p){n.call(this,u,p),this.current=zt}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){if(p[12]!==this.current[12]||p[0]!==this.current[0]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);return}for(var x=1;x<16;x++)if(p[x]!==this.current[x]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}},o}(be);function Qt(n){return[g(255*n.r,255*n.g),g(255*n.b,255*n.a)]}var rr=function(o,u,p){this.value=o,this.uniformNames=u.map(function(x){return"u_"+x}),this.type=p};rr.prototype.setUniform=function(o,u,p){o.set(p.constantOr(this.value))},rr.prototype.getBinding=function(o,u,p){return this.type==="color"?new vt(o,u):new Ze(o,u)};var Gt=function(o,u){this.uniformNames=u.map(function(p){return"u_"+p}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Gt.prototype.setConstantPatternPositions=function(o,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=o.tlbr},Gt.prototype.setUniform=function(o,u,p,x){var A=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;A&&o.set(A)},Gt.prototype.getBinding=function(o,u,p){return p.substr(0,9)==="u_pattern"?new Ke(o,u):new Ze(o,u)};var ar=function(o,u,p,x){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(function(A){return{name:"a_"+A,type:"Float32",components:p==="color"?2:1,offset:0}}),this.paintVertexArray=new x};ar.prototype.populatePaintArray=function(o,u,p,x,A){var k=this.paintVertexArray.length,F=this.expression.evaluate(new jt(0),u,{},x,[],A);this.paintVertexArray.resize(o),this._setPaintValue(k,o,F)},ar.prototype.updatePaintArray=function(o,u,p,x){var A=this.expression.evaluate({zoom:0},p,x);this._setPaintValue(o,u,A)},ar.prototype._setPaintValue=function(o,u,p){if(this.type==="color")for(var x=Qt(p),A=o;A<u;A++)this.paintVertexArray.emplace(A,x[0],x[1]);else{for(var k=o;k<u;k++)this.paintVertexArray.emplace(k,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}},ar.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ar.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var vr=function(o,u,p,x,A,k){this.expression=o,this.uniformNames=u.map(function(F){return"u_"+F+"_t"}),this.type=p,this.useIntegerZoom=x,this.zoom=A,this.maxValue=0,this.paintVertexAttributes=u.map(function(F){return{name:"a_"+F,type:"Float32",components:p==="color"?4:2,offset:0}}),this.paintVertexArray=new k};vr.prototype.populatePaintArray=function(o,u,p,x,A){var k=this.expression.evaluate(new jt(this.zoom),u,{},x,[],A),F=this.expression.evaluate(new jt(this.zoom+1),u,{},x,[],A),Y=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(Y,o,k,F)},vr.prototype.updatePaintArray=function(o,u,p,x){var A=this.expression.evaluate({zoom:this.zoom},p,x),k=this.expression.evaluate({zoom:this.zoom+1},p,x);this._setPaintValue(o,u,A,k)},vr.prototype._setPaintValue=function(o,u,p,x){if(this.type==="color")for(var A=Qt(p),k=Qt(x),F=o;F<u;F++)this.paintVertexArray.emplace(F,A[0],A[1],k[0],k[1]);else{for(var Y=o;Y<u;Y++)this.paintVertexArray.emplace(Y,p,x);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(x))}},vr.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},vr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},vr.prototype.setUniform=function(o,u){var p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=I(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(x)},vr.prototype.getBinding=function(o,u,p){return new Ze(o,u)};var wr=function(o,u,p,x,A,k){this.expression=o,this.type=u,this.useIntegerZoom=p,this.zoom=x,this.layerId=k,this.zoomInPaintVertexArray=new A,this.zoomOutPaintVertexArray=new A};wr.prototype.populatePaintArray=function(o,u,p){var x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(x,o,u.patterns&&u.patterns[this.layerId],p)},wr.prototype.updatePaintArray=function(o,u,p,x,A){this._setPaintValues(o,u,p.patterns&&p.patterns[this.layerId],A)},wr.prototype._setPaintValues=function(o,u,p,x){if(!(!x||!p)){var A=p.min,k=p.mid,F=p.max,Y=x[A],j=x[k],Q=x[F];if(!(!Y||!j||!Q))for(var ne=o;ne<u;ne++)this.zoomInPaintVertexArray.emplace(ne,j.tl[0],j.tl[1],j.br[0],j.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],j.pixelRatio,Y.pixelRatio),this.zoomOutPaintVertexArray.emplace(ne,j.tl[0],j.tl[1],j.br[0],j.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],j.pixelRatio,Q.pixelRatio)}},wr.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,c.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,c.members,this.expression.isStateDependent))},wr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Lr=function(o,u,p){this.binders={},this._buffers=[];var x=[];for(var A in o.paint._values)if(p(A)){var k=o.paint.get(A);if(!(!(k instanceof bi)||!uf(k.property.specification))){var F=Wr(A,o.type),Y=k.value,j=k.property.specification.type,Q=k.property.useIntegerZoom,ne=k.property.specification["property-type"],ge=ne==="cross-faded"||ne==="cross-faded-data-driven";if(Y.kind==="constant")this.binders[A]=ge?new Gt(Y.value,F):new rr(Y.value,F,j),x.push("/u_"+A);else if(Y.kind==="source"||ge){var ve=_a(A,j,"source");this.binders[A]=ge?new wr(Y,j,Q,u,ve,o.id):new ar(Y,F,j,ve),x.push("/a_"+A)}else{var Ce=_a(A,j,"composite");this.binders[A]=new vr(Y,F,j,Q,u,Ce),x.push("/z_"+A)}}}this.cacheKey=x.sort().join("")};Lr.prototype.getMaxValue=function(o){var u=this.binders[o];return u instanceof ar||u instanceof vr?u.maxValue:0},Lr.prototype.populatePaintArrays=function(o,u,p,x,A){for(var k in this.binders){var F=this.binders[k];(F instanceof ar||F instanceof vr||F instanceof wr)&&F.populatePaintArray(o,u,p,x,A)}},Lr.prototype.setConstantPatternPositions=function(o,u){for(var p in this.binders){var x=this.binders[p];x instanceof Gt&&x.setConstantPatternPositions(o,u)}},Lr.prototype.updatePaintArrays=function(o,u,p,x,A){var k=!1;for(var F in o)for(var Y=u.getPositions(F),j=0,Q=Y;j<Q.length;j+=1){var ne=Q[j],ge=p.feature(ne.index);for(var ve in this.binders){var Ce=this.binders[ve];if((Ce instanceof ar||Ce instanceof vr||Ce instanceof wr)&&Ce.expression.isStateDependent===!0){var qe=x.paint.get(ve);Ce.expression=qe.value,Ce.updatePaintArray(ne.start,ne.end,ge,o[F],A),k=!0}}}return k},Lr.prototype.defines=function(){var o=[];for(var u in this.binders){var p=this.binders[u];(p instanceof rr||p instanceof Gt)&&o.push.apply(o,p.uniformNames.map(function(x){return"#define HAS_UNIFORM_"+x}))}return o},Lr.prototype.getBinderAttributes=function(){var o=[];for(var u in this.binders){var p=this.binders[u];if(p instanceof ar||p instanceof vr)for(var x=0;x<p.paintVertexAttributes.length;x++)o.push(p.paintVertexAttributes[x].name);else if(p instanceof wr)for(var A=0;A<c.members.length;A++)o.push(c.members[A].name)}return o},Lr.prototype.getBinderUniforms=function(){var o=[];for(var u in this.binders){var p=this.binders[u];if(p instanceof rr||p instanceof Gt||p instanceof vr)for(var x=0,A=p.uniformNames;x<A.length;x+=1){var k=A[x];o.push(k)}}return o},Lr.prototype.getPaintVertexBuffers=function(){return this._buffers},Lr.prototype.getUniforms=function(o,u){var p=[];for(var x in this.binders){var A=this.binders[x];if(A instanceof rr||A instanceof Gt||A instanceof vr)for(var k=0,F=A.uniformNames;k<F.length;k+=1){var Y=F[k];if(u[Y]){var j=A.getBinding(o,u[Y],Y);p.push({name:Y,property:x,binding:j})}}}return p},Lr.prototype.setUniforms=function(o,u,p,x){for(var A=0,k=u;A<k.length;A+=1){var F=k[A],Y=F.name,j=F.property,Q=F.binding;this.binders[j].setUniform(Q,x,p.get(j),Y)}},Lr.prototype.updatePaintBuffers=function(o){this._buffers=[];for(var u in this.binders){var p=this.binders[u];if(o&&p instanceof wr){var x=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(p instanceof ar||p instanceof vr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}},Lr.prototype.upload=function(o){for(var u in this.binders){var p=this.binders[u];(p instanceof ar||p instanceof vr||p instanceof wr)&&p.upload(o)}this.updatePaintBuffers()},Lr.prototype.destroy=function(){for(var o in this.binders){var u=this.binders[o];(u instanceof ar||u instanceof vr||u instanceof wr)&&u.destroy()}};var kr=function(o,u,p){p===void 0&&(p=function(){return!0}),this.programConfigurations={};for(var x=0,A=o;x<A.length;x+=1){var k=A[x];this.programConfigurations[k.id]=new Lr(k,u,p)}this.needsUpload=!1,this._featureMap=new G,this._bufferOffset=0};kr.prototype.populatePaintArrays=function(o,u,p,x,A,k){for(var F in this.programConfigurations)this.programConfigurations[F].populatePaintArrays(o,u,x,A,k);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},kr.prototype.updatePaintArrays=function(o,u,p,x){for(var A=0,k=p;A<k.length;A+=1){var F=k[A];this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(o,this._featureMap,u,F,x)||this.needsUpload}},kr.prototype.get=function(o){return this.programConfigurations[o]},kr.prototype.upload=function(o){if(this.needsUpload){for(var u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}},kr.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()};function Wr(n,o){var u={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return u[n]||[n.replace(o+"-","").replace(/-/g,"_")]}function Ra(n){var o={"line-pattern":{source:Lo,composite:Lo},"fill-pattern":{source:Lo,composite:Lo},"fill-extrusion-pattern":{source:Lo,composite:Lo}};return o[n]}function _a(n,o,u){var p={color:{source:dh,composite:fc},number:{source:ph,composite:dh}},x=Ra(n);return x&&x[u]||p[o][u]}y("ConstantBinder",rr),y("CrossFadedConstantBinder",Gt),y("SourceExpressionBinder",ar),y("CrossFadedCompositeBinder",wr),y("CompositeExpressionBinder",vr),y("ProgramConfiguration",Lr,{omit:["_buffers"]}),y("ProgramConfigurationSet",kr);var Nr=8192,Ma=15,aa=Math.pow(2,Ma-1)-1,Za=-aa-1;function Ua(n){for(var o=Nr/n.extent,u=n.loadGeometry(),p=0;p<u.length;p++)for(var x=u[p],A=0;A<x.length;A++){var k=x[A],F=Math.round(k.x*o),Y=Math.round(k.y*o);k.x=I(F,Za,aa),k.y=I(Y,Za,aa),(F<k.x||F>k.x+1||Y<k.y||Y>k.y+1)&&ke("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return u}function Mi(n,o){return{type:n.type,id:n.id,properties:n.properties,geometry:o?Ua(n):[]}}function La(n,o,u,p,x){n.emplaceBack(o*2+(p+1)/2,u*2+(x+1)/2)}var mi=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new uc,this.indexArray=new Cu,this.segments=new Tn,this.programConfigurations=new kr(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};mi.prototype.populate=function(o,u,p){var x=this.layers[0],A=[],k=null;x.type==="circle"&&(k=x.layout.get("circle-sort-key"));for(var F=0,Y=o;F<Y.length;F+=1){var j=Y[F],Q=j.feature,ne=j.id,ge=j.index,ve=j.sourceLayerIndex,Ce=this.layers[0]._featureFilter.needGeometry,qe=Mi(Q,Ce);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),qe,p)){var ft=k?k.evaluate(qe,{},p):void 0,tt={id:ne,properties:Q.properties,type:Q.type,sourceLayerIndex:ve,index:ge,geometry:Ce?qe.geometry:Ua(Q),patterns:{},sortKey:ft};A.push(tt)}}k&&A.sort(function(Cr,Ir){return Cr.sortKey-Ir.sortKey});for(var St=0,gt=A;St<gt.length;St+=1){var At=gt[St],Rt=At,Jt=Rt.geometry,dr=Rt.index,cr=Rt.sourceLayerIndex,Fr=o[dr].feature;this.addFeature(At,Jt,dr,p),u.featureIndex.insert(Fr,Jt,dr,cr,this.index)}},mi.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},mi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mi.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,P1),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},mi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mi.prototype.addFeature=function(o,u,p,x){for(var A=0,k=u;A<k.length;A+=1)for(var F=k[A],Y=0,j=F;Y<j.length;Y+=1){var Q=j[Y],ne=Q.x,ge=Q.y;if(!(ne<0||ne>=Nr||ge<0||ge>=Nr)){var ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Ce=ve.vertexLength;La(this.layoutVertexArray,ne,ge,-1,-1),La(this.layoutVertexArray,ne,ge,1,-1),La(this.layoutVertexArray,ne,ge,1,1),La(this.layoutVertexArray,ne,ge,-1,1),this.indexArray.emplaceBack(Ce,Ce+1,Ce+2),this.indexArray.emplaceBack(Ce,Ce+3,Ce+2),ve.vertexLength+=4,ve.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},x)},y("CircleBucket",mi,{omit:["layers"]});function ia(n,o){for(var u=0;u<n.length;u++)if(Do(o,n[u]))return!0;for(var p=0;p<o.length;p++)if(Do(n,o[p]))return!0;return!!zs(n,o)}function Ba(n,o,u){return!!(Do(n,o)||Ol(o,n,u))}function tn(n,o){if(n.length===1)return Ul(o,n[0]);for(var u=0;u<o.length;u++)for(var p=o[u],x=0;x<p.length;x++)if(Do(n,p[x]))return!0;for(var A=0;A<n.length;A++)if(Ul(o,n[A]))return!0;for(var k=0;k<o.length;k++)if(zs(n,o[k]))return!0;return!1}function Nn(n,o,u){for(var p=0;p<o.length;p++){var x=o[p];if(n.length>=3){for(var A=0;A<x.length;A++)if(Do(n,x[A]))return!0}if(Ps(n,x,u))return!0}return!1}function Ps(n,o,u){if(n.length>1){if(zs(n,o))return!0;for(var p=0;p<o.length;p++)if(Ol(o[p],n,u))return!0}for(var x=0;x<n.length;x++)if(Ol(n[x],o,u))return!0;return!1}function zs(n,o){if(n.length===0||o.length===0)return!1;for(var u=0;u<n.length-1;u++)for(var p=n[u],x=n[u+1],A=0;A<o.length-1;A++){var k=o[A],F=o[A+1];if($s(p,x,k,F))return!0}return!1}function $s(n,o,u,p){return Ee(n,u,p)!==Ee(o,u,p)&&Ee(n,o,u)!==Ee(n,o,p)}function Ol(n,o,u){var p=u*u;if(o.length===1)return n.distSqr(o[0])<p;for(var x=1;x<o.length;x++){var A=o[x-1],k=o[x];if(hc(n,A,k)<p)return!0}return!1}function hc(n,o,u){var p=o.distSqr(u);if(p===0)return n.distSqr(o);var x=((n.x-o.x)*(u.x-o.x)+(n.y-o.y)*(u.y-o.y))/p;return x<0?n.distSqr(o):x>1?n.distSqr(u):n.distSqr(u.sub(o)._mult(x)._add(o))}function Ul(n,o){for(var u=!1,p,x,A,k=0;k<n.length;k++){p=n[k];for(var F=0,Y=p.length-1;F<p.length;Y=F++)x=p[F],A=p[Y],x.y>o.y!=A.y>o.y&&o.x<(A.x-x.x)*(o.y-x.y)/(A.y-x.y)+x.x&&(u=!u)}return u}function Do(n,o){for(var u=!1,p=0,x=n.length-1;p<n.length;x=p++){var A=n[p],k=n[x];A.y>o.y!=k.y>o.y&&o.x<(k.x-A.x)*(o.y-A.y)/(k.y-A.y)+A.x&&(u=!u)}return u}function Vl(n,o,u,p,x){for(var A=0,k=n;A<k.length;A+=1){var F=k[A];if(o<=F.x&&u<=F.y&&p>=F.x&&x>=F.y)return!0}var Y=[new v(o,u),new v(o,x),new v(p,x),new v(p,u)];if(n.length>2)for(var j=0,Q=Y;j<Q.length;j+=1){var ne=Q[j];if(Do(n,ne))return!0}for(var ge=0;ge<n.length-1;ge++){var ve=n[ge],Ce=n[ge+1];if(Qo(ve,Ce,Y))return!0}return!1}function Qo(n,o,u){var p=u[0],x=u[2];if(n.x<p.x&&o.x<p.x||n.x>x.x&&o.x>x.x||n.y<p.y&&o.y<p.y||n.y>x.y&&o.y>x.y)return!1;var A=Ee(n,o,u[0]);return A!==Ee(n,o,u[1])||A!==Ee(n,o,u[2])||A!==Ee(n,o,u[3])}function Po(n,o,u){var p=o.paint.get(n).value;return p.kind==="constant"?p.value:u.programConfigurations.get(o.id).getMaxValue(n)}function el(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Eu(n,o,u,p,x){if(!o[0]&&!o[1])return n;var A=v.convert(o)._mult(x);u==="viewport"&&A._rotate(-p);for(var k=[],F=0;F<n.length;F++){var Y=n[F];k.push(Y.sub(A))}return k}var tl=new qn({"circle-sort-key":new Hr(Xt.layout_circle["circle-sort-key"])}),Wp=new qn({"circle-radius":new Hr(Xt.paint_circle["circle-radius"]),"circle-color":new Hr(Xt.paint_circle["circle-color"]),"circle-blur":new Hr(Xt.paint_circle["circle-blur"]),"circle-opacity":new Hr(Xt.paint_circle["circle-opacity"]),"circle-translate":new Tr(Xt.paint_circle["circle-translate"]),"circle-translate-anchor":new Tr(Xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tr(Xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tr(Xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr(Xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr(Xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr(Xt.paint_circle["circle-stroke-opacity"])}),gh={paint:Wp,layout:tl},Gn=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=arguments,o=0,u=arguments.length;u--;)o+=n[u]*n[u];return Math.sqrt(o)});function Xp(){var n=new Gn(4);return Gn!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n}function td(n,o,u){var p=o[0],x=o[1],A=o[2],k=o[3],F=Math.sin(u),Y=Math.cos(u);return n[0]=p*Y+A*F,n[1]=x*Y+k*F,n[2]=p*-F+A*Y,n[3]=x*-F+k*Y,n}function xo(){var n=new Gn(9);return Gn!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function _h(n,o){var u=Math.sin(o),p=Math.cos(o);return n[0]=p,n[1]=u,n[2]=0,n[3]=-u,n[4]=p,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function jp(){var n=new Gn(16);return Gn!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function Jp(n){var o=new Gn(16);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o}function Kp(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function xh(n,o){var u=o[0],p=o[1],x=o[2],A=o[3],k=o[4],F=o[5],Y=o[6],j=o[7],Q=o[8],ne=o[9],ge=o[10],ve=o[11],Ce=o[12],qe=o[13],ft=o[14],tt=o[15],St=u*F-p*k,gt=u*Y-x*k,At=u*j-A*k,Rt=p*Y-x*F,Jt=p*j-A*F,dr=x*j-A*Y,cr=Q*qe-ne*Ce,Fr=Q*ft-ge*Ce,Cr=Q*tt-ve*Ce,Ir=ne*ft-ge*qe,Qr=ne*tt-ve*qe,qr=ge*tt-ve*ft,Br=St*qr-gt*Qr+At*Ir+Rt*Cr-Jt*Fr+dr*cr;return Br?(Br=1/Br,n[0]=(F*qr-Y*Qr+j*Ir)*Br,n[1]=(x*Qr-p*qr-A*Ir)*Br,n[2]=(qe*dr-ft*Jt+tt*Rt)*Br,n[3]=(ge*Jt-ne*dr-ve*Rt)*Br,n[4]=(Y*Cr-k*qr-j*Fr)*Br,n[5]=(u*qr-x*Cr+A*Fr)*Br,n[6]=(ft*At-Ce*dr-tt*gt)*Br,n[7]=(Q*dr-ge*At+ve*gt)*Br,n[8]=(k*Qr-F*Cr+j*cr)*Br,n[9]=(p*Cr-u*Qr-A*cr)*Br,n[10]=(Ce*Jt-qe*At+tt*St)*Br,n[11]=(ne*At-Q*Jt-ve*St)*Br,n[12]=(F*Fr-k*Ir-Y*cr)*Br,n[13]=(u*Ir-p*Fr+x*cr)*Br,n[14]=(qe*gt-Ce*Rt-ft*St)*Br,n[15]=(Q*Rt-ne*gt+ge*St)*Br,n):null}function bh(n,o,u){var p=o[0],x=o[1],A=o[2],k=o[3],F=o[4],Y=o[5],j=o[6],Q=o[7],ne=o[8],ge=o[9],ve=o[10],Ce=o[11],qe=o[12],ft=o[13],tt=o[14],St=o[15],gt=u[0],At=u[1],Rt=u[2],Jt=u[3];return n[0]=gt*p+At*F+Rt*ne+Jt*qe,n[1]=gt*x+At*Y+Rt*ge+Jt*ft,n[2]=gt*A+At*j+Rt*ve+Jt*tt,n[3]=gt*k+At*Q+Rt*Ce+Jt*St,gt=u[4],At=u[5],Rt=u[6],Jt=u[7],n[4]=gt*p+At*F+Rt*ne+Jt*qe,n[5]=gt*x+At*Y+Rt*ge+Jt*ft,n[6]=gt*A+At*j+Rt*ve+Jt*tt,n[7]=gt*k+At*Q+Rt*Ce+Jt*St,gt=u[8],At=u[9],Rt=u[10],Jt=u[11],n[8]=gt*p+At*F+Rt*ne+Jt*qe,n[9]=gt*x+At*Y+Rt*ge+Jt*ft,n[10]=gt*A+At*j+Rt*ve+Jt*tt,n[11]=gt*k+At*Q+Rt*Ce+Jt*St,gt=u[12],At=u[13],Rt=u[14],Jt=u[15],n[12]=gt*p+At*F+Rt*ne+Jt*qe,n[13]=gt*x+At*Y+Rt*ge+Jt*ft,n[14]=gt*A+At*j+Rt*ve+Jt*tt,n[15]=gt*k+At*Q+Rt*Ce+Jt*St,n}function un(n,o,u){var p=u[0],x=u[1],A=u[2],k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt;return o===n?(n[12]=o[0]*p+o[4]*x+o[8]*A+o[12],n[13]=o[1]*p+o[5]*x+o[9]*A+o[13],n[14]=o[2]*p+o[6]*x+o[10]*A+o[14],n[15]=o[3]*p+o[7]*x+o[11]*A+o[15]):(k=o[0],F=o[1],Y=o[2],j=o[3],Q=o[4],ne=o[5],ge=o[6],ve=o[7],Ce=o[8],qe=o[9],ft=o[10],tt=o[11],n[0]=k,n[1]=F,n[2]=Y,n[3]=j,n[4]=Q,n[5]=ne,n[6]=ge,n[7]=ve,n[8]=Ce,n[9]=qe,n[10]=ft,n[11]=tt,n[12]=k*p+Q*x+Ce*A+o[12],n[13]=F*p+ne*x+qe*A+o[13],n[14]=Y*p+ge*x+ft*A+o[14],n[15]=j*p+ve*x+tt*A+o[15]),n}function $o(n,o,u){var p=u[0],x=u[1],A=u[2];return n[0]=o[0]*p,n[1]=o[1]*p,n[2]=o[2]*p,n[3]=o[3]*p,n[4]=o[4]*x,n[5]=o[5]*x,n[6]=o[6]*x,n[7]=o[7]*x,n[8]=o[8]*A,n[9]=o[9]*A,n[10]=o[10]*A,n[11]=o[11]*A,n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n}function es(n,o,u){var p=Math.sin(u),x=Math.cos(u),A=o[4],k=o[5],F=o[6],Y=o[7],j=o[8],Q=o[9],ne=o[10],ge=o[11];return o!==n&&(n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15]),n[4]=A*x+j*p,n[5]=k*x+Q*p,n[6]=F*x+ne*p,n[7]=Y*x+ge*p,n[8]=j*x-A*p,n[9]=Q*x-k*p,n[10]=ne*x-F*p,n[11]=ge*x-Y*p,n}function Qp(n,o,u){var p=Math.sin(u),x=Math.cos(u),A=o[0],k=o[1],F=o[2],Y=o[3],j=o[4],Q=o[5],ne=o[6],ge=o[7];return o!==n&&(n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15]),n[0]=A*x+j*p,n[1]=k*x+Q*p,n[2]=F*x+ne*p,n[3]=Y*x+ge*p,n[4]=j*x-A*p,n[5]=Q*x-k*p,n[6]=ne*x-F*p,n[7]=ge*x-Y*p,n}function vy(n,o,u,p,x){var A=1/Math.tan(o/2),k;return n[0]=A/u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,x!=null&&x!==1/0?(k=1/(p-x),n[10]=(x+p)*k,n[14]=2*x*p*k):(n[10]=-1,n[14]=-2*p),n}function m3(n,o,u,p,x,A,k){var F=1/(o-u),Y=1/(p-x),j=1/(A-k);return n[0]=-2*F,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*Y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*j,n[11]=0,n[12]=(o+u)*F,n[13]=(x+p)*Y,n[14]=(k+A)*j,n[15]=1,n}var y3=bh;function rd(){var n=new Gn(3);return Gn!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function g3(n){var o=new Gn(3);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o}function $p(n,o,u){return n[0]=o[0]+u[0],n[1]=o[1]+u[1],n[2]=o[2]+u[2],n}function _3(n,o,u){return n[0]=o[0]-u[0],n[1]=o[1]-u[1],n[2]=o[2]-u[2],n}function x3(n,o,u){return n[0]=o[0]*u,n[1]=o[1]*u,n[2]=o[2]*u,n}function dy(n,o){var u=o[0],p=o[1],x=o[2],A=u*u+p*p+x*x;return A>0&&(A=1/Math.sqrt(A)),n[0]=o[0]*A,n[1]=o[1]*A,n[2]=o[2]*A,n}function hY(n,o){return n[0]*o[0]+n[1]*o[1]+n[2]*o[2]}function vY(n,o,u){var p=o[0],x=o[1],A=o[2],k=u[0],F=u[1],Y=u[2];return n[0]=x*Y-A*F,n[1]=A*k-p*Y,n[2]=p*F-x*k,n}function dY(n,o,u){var p=o[0],x=o[1],A=o[2];return n[0]=p*u[0]+x*u[3]+A*u[6],n[1]=p*u[1]+x*u[4]+A*u[7],n[2]=p*u[2]+x*u[5]+A*u[8],n}var pY=_3,Fme=function(){var n=rd();return function(o,u,p,x,A,k){var F,Y;for(u||(u=3),p||(p=0),x?Y=Math.min(x*u+p,o.length):Y=o.length,F=p;F<Y;F+=u)n[0]=o[F],n[1]=o[F+1],n[2]=o[F+2],A(n,n,k),o[F]=n[0],o[F+1]=n[1],o[F+2]=n[2];return o}}();function mY(){var n=new Gn(4);return Gn!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function yY(n,o,u){return n[0]=o[0]*u,n[1]=o[1]*u,n[2]=o[2]*u,n[3]=o[3]*u,n}function gY(n,o){return n[0]*o[0]+n[1]*o[1]+n[2]*o[2]+n[3]*o[3]}function z1(n,o,u){var p=o[0],x=o[1],A=o[2],k=o[3];return n[0]=u[0]*p+u[4]*x+u[8]*A+u[12]*k,n[1]=u[1]*p+u[5]*x+u[9]*A+u[13]*k,n[2]=u[2]*p+u[6]*x+u[10]*A+u[14]*k,n[3]=u[3]*p+u[7]*x+u[11]*A+u[15]*k,n}var qme=function(){var n=mY();return function(o,u,p,x,A,k){var F,Y;for(u||(u=4),p||(p=0),x?Y=Math.min(x*u+p,o.length):Y=o.length,F=p;F<Y;F+=u)n[0]=o[F],n[1]=o[F+1],n[2]=o[F+2],n[3]=o[F+3],A(n,n,k),o[F]=n[0],o[F+1]=n[1],o[F+2]=n[2],o[F+3]=n[3];return o}}();function _Y(){var n=new Gn(2);return Gn!=Float32Array&&(n[0]=0,n[1]=0),n}function xY(n){var o=n[0],u=n[1];return o*o+u*u}var bY=xY,Nme=function(){var n=_Y();return function(o,u,p,x,A,k){var F,Y;for(u||(u=2),p||(p=0),x?Y=Math.min(x*u+p,o.length):Y=o.length,F=p;F<Y;F+=u)n[0]=o[F],n[1]=o[F+1],A(n,n,k),o[F]=n[0],o[F+1]=n[1];return o}}(),wY=function(n){function o(u){n.call(this,u,gh)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new mi(p)},o.prototype.queryRadius=function(p){var x=p;return Po("circle-radius",this,x)+Po("circle-stroke-width",this,x)+el(this.paint.get("circle-translate"))},o.prototype.queryIntersectsFeature=function(p,x,A,k,F,Y,j,Q){for(var ne=Eu(p,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Y.angle,j),ge=this.paint.get("circle-radius").evaluate(x,A),ve=this.paint.get("circle-stroke-width").evaluate(x,A),Ce=ge+ve,qe=this.paint.get("circle-pitch-alignment")==="map",ft=qe?ne:TY(ne,Q),tt=qe?Ce*j:Ce,St=0,gt=k;St<gt.length;St+=1)for(var At=gt[St],Rt=0,Jt=At;Rt<Jt.length;Rt+=1){var dr=Jt[Rt],cr=qe?dr:mM(dr,Q),Fr=tt,Cr=z1([],[dr.x,dr.y,0,1],Q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Fr*=Cr[3]/Y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Fr*=Y.cameraToCenterDistance/Cr[3]),Ba(ft,cr,Fr))return!0}return!1},o}(pi);function mM(n,o){var u=z1([],[n.x,n.y,0,1],o);return new v(u[0]/u[3],u[1]/u[3])}function TY(n,o){return n.map(function(u){return mM(u,o)})}var yM=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(mi);y("HeatmapBucket",yM,{omit:["layers"]});function b3(n,o,u,p){var x=o.width,A=o.height;if(!p)p=new Uint8Array(x*A*u);else if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==x*A*u)throw new RangeError("mismatched image size");return n.width=x,n.height=A,n.data=p,n}function gM(n,o,u){var p=o.width,x=o.height;if(!(p===n.width&&x===n.height)){var A=b3({},{width:p,height:x},u);w3(n,A,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,p),height:Math.min(n.height,x)},u),n.width=p,n.height=x,n.data=A.data}}function w3(n,o,u,p,x,A){if(x.width===0||x.height===0)return o;if(x.width>n.width||x.height>n.height||u.x>n.width-x.width||u.y>n.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>o.width||x.height>o.height||p.x>o.width-x.width||p.y>o.height-x.height)throw new RangeError("out of range destination coordinates for image copy");for(var k=n.data,F=o.data,Y=0;Y<x.height;Y++)for(var j=((u.y+Y)*n.width+u.x)*A,Q=((p.y+Y)*o.width+p.x)*A,ne=0;ne<x.width*A;ne++)F[Q+ne]=k[j+ne];return o}var ad=function(o,u){b3(this,o,1,u)};ad.prototype.resize=function(o){gM(this,o,1)},ad.prototype.clone=function(){return new ad({width:this.width,height:this.height},new Uint8Array(this.data))},ad.copy=function(o,u,p,x,A){w3(o,u,p,x,A,1)};var ts=function(o,u){b3(this,o,4,u)};ts.prototype.resize=function(o){gM(this,o,4)},ts.prototype.replace=function(o,u){u?this.data.set(o):o instanceof Uint8ClampedArray?this.data=new Uint8Array(o.buffer):this.data=o},ts.prototype.clone=function(){return new ts({width:this.width,height:this.height},new Uint8Array(this.data))},ts.copy=function(o,u,p,x,A){w3(o,u,p,x,A,4)},y("AlphaImage",ad),y("RGBAImage",ts);var AY=new qn({"heatmap-radius":new Hr(Xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr(Xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tr(Xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fo(Xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tr(Xt.paint_heatmap["heatmap-opacity"])}),MY={paint:AY};function _M(n){var o={},u=n.resolution||256,p=n.clips?n.clips.length:1,x=n.image||new ts({width:u,height:p}),A=function(St,gt,At){o[n.evaluationKey]=At;var Rt=n.expression.evaluate(o);x.data[St+gt+0]=Math.floor(Rt.r*255/Rt.a),x.data[St+gt+1]=Math.floor(Rt.g*255/Rt.a),x.data[St+gt+2]=Math.floor(Rt.b*255/Rt.a),x.data[St+gt+3]=Math.floor(Rt.a*255)};if(n.clips)for(var j=0,Q=0;j<p;++j,Q+=u*4)for(var ne=0,ge=0;ne<u;ne++,ge+=4){var ve=ne/(u-1),Ce=n.clips[j],qe=Ce.start,ft=Ce.end,tt=qe*(1-ve)+ft*ve;A(Q,ge,tt)}else for(var k=0,F=0;k<u;k++,F+=4){var Y=k/(u-1);A(0,F,Y)}return x}var SY=function(n){function o(u){n.call(this,u,MY),this._updateColorRamp()}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new yM(p)},o.prototype._handleSpecialPaintPropertyUpdate=function(p){p==="heatmap-color"&&this._updateColorRamp()},o.prototype._updateColorRamp=function(){var p=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=_M({expression:p,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},o.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},o}(pi),kY=new qn({"hillshade-illumination-direction":new Tr(Xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tr(Xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tr(Xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tr(Xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tr(Xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tr(Xt.paint_hillshade["hillshade-accent-color"])}),CY={paint:kY},EY=function(n){function o(u){n.call(this,u,CY)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},o}(pi),LY=ui([{name:"a_pos",components:2,type:"Int16"}],4),DY=LY.members,T3=I1,PY=I1;function I1(n,o,u){u=u||2;var p=o&&o.length,x=p?o[0]*u:n.length,A=xM(n,0,x,u,!0),k=[];if(!A||A.next===A.prev)return k;var F,Y,j,Q,ne,ge,ve;if(p&&(A=qY(n,o,A,u)),n.length>80*u){F=j=n[0],Y=Q=n[1];for(var Ce=u;Ce<x;Ce+=u)ne=n[Ce],ge=n[Ce+1],ne<F&&(F=ne),ge<Y&&(Y=ge),ne>j&&(j=ne),ge>Q&&(Q=ge);ve=Math.max(j-F,Q-Y),ve=ve!==0?1/ve:0}return py(A,k,u,F,Y,ve),k}function xM(n,o,u,p,x){var A,k;if(x===S3(n,o,u,p)>0)for(A=o;A<u;A+=p)k=TM(A,n[A],n[A+1],k);else for(A=u-p;A>=o;A-=p)k=TM(A,n[A],n[A+1],k);return k&&R1(k,k.next)&&(yy(k),k=k.next),k}function wh(n,o){if(!n)return n;o||(o=n);var u=n,p;do if(p=!1,!u.steiner&&(R1(u,u.next)||An(u.prev,u,u.next)===0)){if(yy(u),u=o=u.prev,u===u.next)break;p=!0}else u=u.next;while(p||u!==o);return o}function py(n,o,u,p,x,A,k){if(n){!k&&A&&VY(n,p,x,A);for(var F=n,Y,j;n.prev!==n.next;){if(Y=n.prev,j=n.next,A?IY(n,p,x,A):zY(n)){o.push(Y.i/u),o.push(n.i/u),o.push(j.i/u),yy(n),n=j.next,F=j.next;continue}if(n=j,n===F){k?k===1?(n=RY(wh(n),o,u),py(n,o,u,p,x,A,2)):k===2&&FY(n,o,u,p,x,A):py(wh(n),o,u,p,x,A,1);break}}}}function zY(n){var o=n.prev,u=n,p=n.next;if(An(o,u,p)>=0)return!1;for(var x=n.next.next;x!==n.prev;){if(e0(o.x,o.y,u.x,u.y,p.x,p.y,x.x,x.y)&&An(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function IY(n,o,u,p){var x=n.prev,A=n,k=n.next;if(An(x,A,k)>=0)return!1;for(var F=x.x<A.x?x.x<k.x?x.x:k.x:A.x<k.x?A.x:k.x,Y=x.y<A.y?x.y<k.y?x.y:k.y:A.y<k.y?A.y:k.y,j=x.x>A.x?x.x>k.x?x.x:k.x:A.x>k.x?A.x:k.x,Q=x.y>A.y?x.y>k.y?x.y:k.y:A.y>k.y?A.y:k.y,ne=A3(F,Y,o,u,p),ge=A3(j,Q,o,u,p),ve=n.prevZ,Ce=n.nextZ;ve&&ve.z>=ne&&Ce&&Ce.z<=ge;){if(ve!==n.prev&&ve!==n.next&&e0(x.x,x.y,A.x,A.y,k.x,k.y,ve.x,ve.y)&&An(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,Ce!==n.prev&&Ce!==n.next&&e0(x.x,x.y,A.x,A.y,k.x,k.y,Ce.x,Ce.y)&&An(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;ve&&ve.z>=ne;){if(ve!==n.prev&&ve!==n.next&&e0(x.x,x.y,A.x,A.y,k.x,k.y,ve.x,ve.y)&&An(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;Ce&&Ce.z<=ge;){if(Ce!==n.prev&&Ce!==n.next&&e0(x.x,x.y,A.x,A.y,k.x,k.y,Ce.x,Ce.y)&&An(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function RY(n,o,u){var p=n;do{var x=p.prev,A=p.next.next;!R1(x,A)&&bM(x,p,p.next,A)&&my(x,A)&&my(A,x)&&(o.push(x.i/u),o.push(p.i/u),o.push(A.i/u),yy(p),yy(p.next),p=n=A),p=p.next}while(p!==n);return wh(p)}function FY(n,o,u,p,x,A){var k=n;do{for(var F=k.next.next;F!==k.prev;){if(k.i!==F.i&&ZY(k,F)){var Y=wM(k,F);k=wh(k,k.next),Y=wh(Y,Y.next),py(k,o,u,p,x,A),py(Y,o,u,p,x,A);return}F=F.next}k=k.next}while(k!==n)}function qY(n,o,u,p){var x=[],A,k,F,Y,j;for(A=0,k=o.length;A<k;A++)F=o[A]*p,Y=A<k-1?o[A+1]*p:n.length,j=xM(n,F,Y,p,!1),j===j.next&&(j.steiner=!0),x.push(GY(j));for(x.sort(NY),A=0;A<x.length;A++)BY(x[A],u),u=wh(u,u.next);return u}function NY(n,o){return n.x-o.x}function BY(n,o){if(o=OY(n,o),o){var u=wM(o,n);wh(o,o.next),wh(u,u.next)}}function OY(n,o){var u=o,p=n.x,x=n.y,A=-1/0,k;do{if(x<=u.y&&x>=u.next.y&&u.next.y!==u.y){var F=u.x+(x-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(F<=p&&F>A){if(A=F,F===p){if(x===u.y)return u;if(x===u.next.y)return u.next}k=u.x<u.next.x?u:u.next}}u=u.next}while(u!==o);if(!k)return null;if(p===A)return k;var Y=k,j=k.x,Q=k.y,ne=1/0,ge;u=k;do p>=u.x&&u.x>=j&&p!==u.x&&e0(x<Q?p:A,x,j,Q,x<Q?A:p,x,u.x,u.y)&&(ge=Math.abs(x-u.y)/(p-u.x),my(u,n)&&(ge<ne||ge===ne&&(u.x>k.x||u.x===k.x&&UY(k,u)))&&(k=u,ne=ge)),u=u.next;while(u!==Y);return k}function UY(n,o){return An(n.prev,n,o.prev)<0&&An(o.next,n,n.next)<0}function VY(n,o,u,p){var x=n;do x.z===null&&(x.z=A3(x.x,x.y,o,u,p)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next;while(x!==n);x.prevZ.nextZ=null,x.prevZ=null,HY(x)}function HY(n){var o,u,p,x,A,k,F,Y,j=1;do{for(u=n,n=null,A=null,k=0;u;){for(k++,p=u,F=0,o=0;o<j&&(F++,p=p.nextZ,!!p);o++);for(Y=j;F>0||Y>0&&p;)F!==0&&(Y===0||!p||u.z<=p.z)?(x=u,u=u.nextZ,F--):(x=p,p=p.nextZ,Y--),A?A.nextZ=x:n=x,x.prevZ=A,A=x;u=p}A.nextZ=null,j*=2}while(k>1);return n}function A3(n,o,u,p,x){return n=32767*(n-u)*x,o=32767*(o-p)*x,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,n|o<<1}function GY(n){var o=n,u=n;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==n);return u}function e0(n,o,u,p,x,A,k,F){return(x-k)*(o-F)-(n-k)*(A-F)>=0&&(n-k)*(p-F)-(u-k)*(o-F)>=0&&(u-k)*(A-F)-(x-k)*(p-F)>=0}function ZY(n,o){return n.next.i!==o.i&&n.prev.i!==o.i&&!YY(n,o)&&(my(n,o)&&my(o,n)&&WY(n,o)&&(An(n.prev,n,o.prev)||An(n,o.prev,o))||R1(n,o)&&An(n.prev,n,n.next)>0&&An(o.prev,o,o.next)>0)}function An(n,o,u){return(o.y-n.y)*(u.x-o.x)-(o.x-n.x)*(u.y-o.y)}function R1(n,o){return n.x===o.x&&n.y===o.y}function bM(n,o,u,p){var x=q1(An(n,o,u)),A=q1(An(n,o,p)),k=q1(An(u,p,n)),F=q1(An(u,p,o));return!!(x!==A&&k!==F||x===0&&F1(n,u,o)||A===0&&F1(n,p,o)||k===0&&F1(u,n,p)||F===0&&F1(u,o,p))}function F1(n,o,u){return o.x<=Math.max(n.x,u.x)&&o.x>=Math.min(n.x,u.x)&&o.y<=Math.max(n.y,u.y)&&o.y>=Math.min(n.y,u.y)}function q1(n){return n>0?1:n<0?-1:0}function YY(n,o){var u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==o.i&&u.next.i!==o.i&&bM(u,u.next,n,o))return!0;u=u.next}while(u!==n);return!1}function my(n,o){return An(n.prev,n,n.next)<0?An(n,o,n.next)>=0&&An(n,n.prev,o)>=0:An(n,o,n.prev)<0||An(n,n.next,o)<0}function WY(n,o){var u=n,p=!1,x=(n.x+o.x)/2,A=(n.y+o.y)/2;do u.y>A!=u.next.y>A&&u.next.y!==u.y&&x<(u.next.x-u.x)*(A-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==n);return p}function wM(n,o){var u=new M3(n.i,n.x,n.y),p=new M3(o.i,o.x,o.y),x=n.next,A=o.prev;return n.next=o,o.prev=n,u.next=x,x.prev=u,p.next=u,u.prev=p,A.next=p,p.prev=A,p}function TM(n,o,u,p){var x=new M3(n,o,u);return p?(x.next=p.next,x.prev=p,p.next.prev=x,p.next=x):(x.prev=x,x.next=x),x}function yy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function M3(n,o,u){this.i=n,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}I1.deviation=function(n,o,u,p){var x=o&&o.length,A=x?o[0]*u:n.length,k=Math.abs(S3(n,0,A,u));if(x)for(var F=0,Y=o.length;F<Y;F++){var j=o[F]*u,Q=F<Y-1?o[F+1]*u:n.length;k-=Math.abs(S3(n,j,Q,u))}var ne=0;for(F=0;F<p.length;F+=3){var ge=p[F]*u,ve=p[F+1]*u,Ce=p[F+2]*u;ne+=Math.abs((n[ge]-n[Ce])*(n[ve+1]-n[ge+1])-(n[ge]-n[ve])*(n[Ce+1]-n[ge+1]))}return k===0&&ne===0?0:Math.abs((ne-k)/k)};function S3(n,o,u,p){for(var x=0,A=o,k=u-p;A<u;A+=p)x+=(n[k]-n[A])*(n[A+1]+n[k+1]),k=A;return x}I1.flatten=function(n){for(var o=n[0][0].length,u={vertices:[],holes:[],dimensions:o},p=0,x=0;x<n.length;x++){for(var A=0;A<n[x].length;A++)for(var k=0;k<o;k++)u.vertices.push(n[x][A][k]);x>0&&(p+=n[x-1].length,u.holes.push(p))}return u},T3.default=PY;function XY(n,o,u,p,x){AM(n,o,u||0,p||n.length-1,x||jY)}function AM(n,o,u,p,x){for(;p>u;){if(p-u>600){var A=p-u+1,k=o-u+1,F=Math.log(A),Y=.5*Math.exp(2*F/3),j=.5*Math.sqrt(F*Y*(A-Y)/A)*(k-A/2<0?-1:1),Q=Math.max(u,Math.floor(o-k*Y/A+j)),ne=Math.min(p,Math.floor(o+(A-k)*Y/A+j));AM(n,o,Q,ne,x)}var ge=n[o],ve=u,Ce=p;for(gy(n,u,o),x(n[p],ge)>0&&gy(n,u,p);ve<Ce;){for(gy(n,ve,Ce),ve++,Ce--;x(n[ve],ge)<0;)ve++;for(;x(n[Ce],ge)>0;)Ce--}x(n[u],ge)===0?gy(n,u,Ce):(Ce++,gy(n,Ce,p)),Ce<=o&&(u=Ce+1),o<=Ce&&(p=Ce-1)}}function gy(n,o,u){var p=n[o];n[o]=n[u],n[u]=p}function jY(n,o){return n<o?-1:n>o?1:0}function k3(n,o){var u=n.length;if(u<=1)return[n];for(var p=[],x,A,k=0;k<u;k++){var F=Xe(n[k]);F!==0&&(n[k].area=Math.abs(F),A===void 0&&(A=F<0),A===F<0?(x&&p.push(x),x=[n[k]]):x.push(n[k]))}if(x&&p.push(x),o>1)for(var Y=0;Y<p.length;Y++)p[Y].length<=o||(XY(p[Y],o,1,p[Y].length-1,JY),p[Y]=p[Y].slice(0,o));return p}function JY(n,o){return o.area-n.area}function C3(n,o,u){for(var p=u.patternDependencies,x=!1,A=0,k=o;A<k.length;A+=1){var F=k[A],Y=F.paint.get(n+"-pattern");Y.isConstant()||(x=!0);var j=Y.constantOr(null);j&&(x=!0,p[j.to]=!0,p[j.from]=!0)}return x}function E3(n,o,u,p,x){for(var A=x.patternDependencies,k=0,F=o;k<F.length;k+=1){var Y=F[k],j=Y.paint.get(n+"-pattern"),Q=j.value;if(Q.kind!=="constant"){var ne=Q.evaluate({zoom:p-1},u,{},x.availableImages),ge=Q.evaluate({zoom:p},u,{},x.availableImages),ve=Q.evaluate({zoom:p+1},u,{},x.availableImages);ne=ne&&ne.name?ne.name:ne,ge=ge&&ge.name?ge.name:ge,ve=ve&&ve.name?ve.name:ve,A[ne]=!0,A[ge]=!0,A[ve]=!0,u.patterns[Y.id]={min:ne,mid:ge,max:ve}}}return u}var KY=500,Lu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new uc,this.indexArray=new Cu,this.indexArray2=new ed,this.programConfigurations=new kr(o.layers,o.zoom),this.segments=new Tn,this.segments2=new Tn,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};Lu.prototype.populate=function(o,u,p){this.hasPattern=C3("fill",this.layers,u);for(var x=this.layers[0].layout.get("fill-sort-key"),A=[],k=0,F=o;k<F.length;k+=1){var Y=F[k],j=Y.feature,Q=Y.id,ne=Y.index,ge=Y.sourceLayerIndex,ve=this.layers[0]._featureFilter.needGeometry,Ce=Mi(j,ve);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),Ce,p)){var qe=x?x.evaluate(Ce,{},p,u.availableImages):void 0,ft={id:Q,properties:j.properties,type:j.type,sourceLayerIndex:ge,index:ne,geometry:ve?Ce.geometry:Ua(j),patterns:{},sortKey:qe};A.push(ft)}}x&&A.sort(function(Cr,Ir){return Cr.sortKey-Ir.sortKey});for(var tt=0,St=A;tt<St.length;tt+=1){var gt=St[tt],At=gt,Rt=At.geometry,Jt=At.index,dr=At.sourceLayerIndex;if(this.hasPattern){var cr=E3("fill",this.layers,gt,this.zoom,u);this.patternFeatures.push(cr)}else this.addFeature(gt,Rt,Jt,p,{});var Fr=o[Jt].feature;u.featureIndex.insert(Fr,Rt,Jt,dr,this.index)}},Lu.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},Lu.prototype.addFeatures=function(o,u,p){for(var x=0,A=this.patternFeatures;x<A.length;x+=1){var k=A[x];this.addFeature(k,k.geometry,k.index,u,p)}},Lu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Lu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Lu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,DY),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},Lu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Lu.prototype.addFeature=function(o,u,p,x,A){for(var k=0,F=k3(u,KY);k<F.length;k+=1){for(var Y=F[k],j=0,Q=0,ne=Y;Q<ne.length;Q+=1){var ge=ne[Q];j+=ge.length}for(var ve=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),Ce=ve.vertexLength,qe=[],ft=[],tt=0,St=Y;tt<St.length;tt+=1){var gt=St[tt];if(gt.length!==0){gt!==Y[0]&&ft.push(qe.length/2);var At=this.segments2.prepareSegment(gt.length,this.layoutVertexArray,this.indexArray2),Rt=At.vertexLength;this.layoutVertexArray.emplaceBack(gt[0].x,gt[0].y),this.indexArray2.emplaceBack(Rt+gt.length-1,Rt),qe.push(gt[0].x),qe.push(gt[0].y);for(var Jt=1;Jt<gt.length;Jt++)this.layoutVertexArray.emplaceBack(gt[Jt].x,gt[Jt].y),this.indexArray2.emplaceBack(Rt+Jt-1,Rt+Jt),qe.push(gt[Jt].x),qe.push(gt[Jt].y);At.vertexLength+=gt.length,At.primitiveLength+=gt.length}}for(var dr=T3(qe,ft),cr=0;cr<dr.length;cr+=3)this.indexArray.emplaceBack(Ce+dr[cr],Ce+dr[cr+1],Ce+dr[cr+2]);ve.vertexLength+=j,ve.primitiveLength+=dr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,x)},y("FillBucket",Lu,{omit:["layers","patternFeatures"]});var QY=new qn({"fill-sort-key":new Hr(Xt.layout_fill["fill-sort-key"])}),$Y=new qn({"fill-antialias":new Tr(Xt.paint_fill["fill-antialias"]),"fill-opacity":new Hr(Xt.paint_fill["fill-opacity"]),"fill-color":new Hr(Xt.paint_fill["fill-color"]),"fill-outline-color":new Hr(Xt.paint_fill["fill-outline-color"]),"fill-translate":new Tr(Xt.paint_fill["fill-translate"]),"fill-translate-anchor":new Tr(Xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ni(Xt.paint_fill["fill-pattern"])}),eW={paint:$Y,layout:QY},tW=function(n){function o(u){n.call(this,u,eW)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.recalculate=function(p,x){n.prototype.recalculate.call(this,p,x);var A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},o.prototype.createBucket=function(p){return new Lu(p)},o.prototype.queryRadius=function(){return el(this.paint.get("fill-translate"))},o.prototype.queryIntersectsFeature=function(p,x,A,k,F,Y,j){var Q=Eu(p,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Y.angle,j);return tn(Q,k)},o.prototype.isTileClipped=function(){return!0},o}(pi),rW=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),aW=rW.members,MM=t0;function t0(n,o,u,p,x){this.properties={},this.extent=u,this.type=0,this._pbf=n,this._geometry=-1,this._keys=p,this._values=x,n.readFields(iW,this,o)}function iW(n,o,u){n==1?o.id=u.readVarint():n==2?nW(u,o):n==3?o.type=u.readVarint():n==4&&(o._geometry=u.pos)}function nW(n,o){for(var u=n.readVarint()+n.pos;n.pos<u;){var p=o._keys[n.readVarint()],x=o._values[n.readVarint()];o.properties[p]=x}}t0.types=["Unknown","Point","LineString","Polygon"],t0.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var o=n.readVarint()+n.pos,u=1,p=0,x=0,A=0,k=[],F;n.pos<o;){if(p<=0){var Y=n.readVarint();u=Y&7,p=Y>>3}if(p--,u===1||u===2)x+=n.readSVarint(),A+=n.readSVarint(),u===1&&(F&&k.push(F),F=[]),F.push(new v(x,A));else if(u===7)F&&F.push(F[0].clone());else throw new Error("unknown command "+u)}return F&&k.push(F),k},t0.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var o=n.readVarint()+n.pos,u=1,p=0,x=0,A=0,k=1/0,F=-1/0,Y=1/0,j=-1/0;n.pos<o;){if(p<=0){var Q=n.readVarint();u=Q&7,p=Q>>3}if(p--,u===1||u===2)x+=n.readSVarint(),A+=n.readSVarint(),x<k&&(k=x),x>F&&(F=x),A<Y&&(Y=A),A>j&&(j=A);else if(u!==7)throw new Error("unknown command "+u)}return[k,Y,F,j]},t0.prototype.toGeoJSON=function(n,o,u){var p=this.extent*Math.pow(2,u),x=this.extent*n,A=this.extent*o,k=this.loadGeometry(),F=t0.types[this.type],Y,j;function Q(ve){for(var Ce=0;Ce<ve.length;Ce++){var qe=ve[Ce],ft=180-(qe.y+A)*360/p;ve[Ce]=[(qe.x+x)*360/p-180,360/Math.PI*Math.atan(Math.exp(ft*Math.PI/180))-90]}}switch(this.type){case 1:var ne=[];for(Y=0;Y<k.length;Y++)ne[Y]=k[Y][0];k=ne,Q(k);break;case 2:for(Y=0;Y<k.length;Y++)Q(k[Y]);break;case 3:for(k=oW(k),Y=0;Y<k.length;Y++)for(j=0;j<k[Y].length;j++)Q(k[Y][j]);break}k.length===1?k=k[0]:F="Multi"+F;var ge={type:"Feature",geometry:{type:F,coordinates:k},properties:this.properties};return"id"in this&&(ge.id=this.id),ge};function oW(n){var o=n.length;if(o<=1)return[n];for(var u=[],p,x,A=0;A<o;A++){var k=sW(n[A]);k!==0&&(x===void 0&&(x=k<0),x===k<0?(p&&u.push(p),p=[n[A]]):p.push(n[A]))}return p&&u.push(p),u}function sW(n){for(var o=0,u=0,p=n.length,x=p-1,A,k;u<p;x=u++)A=n[u],k=n[x],o+=(k.x-A.x)*(A.y+k.y);return o}var SM=kM;function kM(n,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(lW,this,o),this.length=this._features.length}function lW(n,o,u){n===15?o.version=u.readVarint():n===1?o.name=u.readString():n===5?o.extent=u.readVarint():n===2?o._features.push(u.pos):n===3?o._keys.push(u.readString()):n===4&&o._values.push(uW(u))}function uW(n){for(var o=null,u=n.readVarint()+n.pos;n.pos<u;){var p=n.readVarint()>>3;o=p===1?n.readString():p===2?n.readFloat():p===3?n.readDouble():p===4?n.readVarint64():p===5?n.readVarint():p===6?n.readSVarint():p===7?n.readBoolean():null}return o}kM.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var o=this._pbf.readVarint()+this._pbf.pos;return new MM(this._pbf,o,this.extent,this._keys,this._values)};var fW=cW;function cW(n,o){this.layers=n.readFields(hW,{},o)}function hW(n,o,u){if(n===3){var p=new SM(u,u.readVarint()+u.pos);p.length&&(o[p.name]=p)}}var vW=fW,dW=MM,pW=SM,r0={VectorTile:vW,VectorTileFeature:dW,VectorTileLayer:pW},mW=r0.VectorTileFeature.types,yW=500,L3=Math.pow(2,13);function _y(n,o,u,p,x,A,k,F){n.emplaceBack(o,u,Math.floor(p*L3)*2+k,x*L3*2,A*L3*2,Math.round(F))}var Du=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new bf,this.indexArray=new Cu,this.programConfigurations=new kr(o.layers,o.zoom),this.segments=new Tn,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};Du.prototype.populate=function(o,u,p){this.features=[],this.hasPattern=C3("fill-extrusion",this.layers,u);for(var x=0,A=o;x<A.length;x+=1){var k=A[x],F=k.feature,Y=k.id,j=k.index,Q=k.sourceLayerIndex,ne=this.layers[0]._featureFilter.needGeometry,ge=Mi(F,ne);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),ge,p)){var ve={id:Y,sourceLayerIndex:Q,index:j,geometry:ne?ge.geometry:Ua(F),properties:F.properties,type:F.type,patterns:{}};this.hasPattern?this.features.push(E3("fill-extrusion",this.layers,ve,this.zoom,u)):this.addFeature(ve,ve.geometry,j,p,{}),u.featureIndex.insert(F,ve.geometry,j,Q,this.index,!0)}}},Du.prototype.addFeatures=function(o,u,p){for(var x=0,A=this.features;x<A.length;x+=1){var k=A[x],F=k.geometry;this.addFeature(k,F,k.index,u,p)}},Du.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},Du.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Du.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Du.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,aW),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Du.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Du.prototype.addFeature=function(o,u,p,x,A){for(var k=0,F=k3(u,yW);k<F.length;k+=1){for(var Y=F[k],j=0,Q=0,ne=Y;Q<ne.length;Q+=1){var ge=ne[Q];j+=ge.length}for(var ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ce=0,qe=Y;Ce<qe.length;Ce+=1){var ft=qe[Ce];if(ft.length!==0&&!_W(ft))for(var tt=0,St=0;St<ft.length;St++){var gt=ft[St];if(St>=1){var At=ft[St-1];if(!gW(gt,At)){ve.vertexLength+4>Tn.MAX_VERTEX_ARRAY_LENGTH&&(ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Rt=gt.sub(At)._perp()._unit(),Jt=At.dist(gt);tt+Jt>32768&&(tt=0),_y(this.layoutVertexArray,gt.x,gt.y,Rt.x,Rt.y,0,0,tt),_y(this.layoutVertexArray,gt.x,gt.y,Rt.x,Rt.y,0,1,tt),tt+=Jt,_y(this.layoutVertexArray,At.x,At.y,Rt.x,Rt.y,0,0,tt),_y(this.layoutVertexArray,At.x,At.y,Rt.x,Rt.y,0,1,tt);var dr=ve.vertexLength;this.indexArray.emplaceBack(dr,dr+2,dr+1),this.indexArray.emplaceBack(dr+1,dr+2,dr+3),ve.vertexLength+=4,ve.primitiveLength+=2}}}}if(ve.vertexLength+j>Tn.MAX_VERTEX_ARRAY_LENGTH&&(ve=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray)),mW[o.type]==="Polygon"){for(var cr=[],Fr=[],Cr=ve.vertexLength,Ir=0,Qr=Y;Ir<Qr.length;Ir+=1){var qr=Qr[Ir];if(qr.length!==0){qr!==Y[0]&&Fr.push(cr.length/2);for(var Br=0;Br<qr.length;Br++){var ya=qr[Br];_y(this.layoutVertexArray,ya.x,ya.y,0,0,1,1,0),cr.push(ya.x),cr.push(ya.y)}}}for(var Xr=T3(cr,Fr),Ya=0;Ya<Xr.length;Ya+=3)this.indexArray.emplaceBack(Cr+Xr[Ya],Cr+Xr[Ya+2],Cr+Xr[Ya+1]);ve.primitiveLength+=Xr.length/3,ve.vertexLength+=j}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,x)},y("FillExtrusionBucket",Du,{omit:["layers","features"]});function gW(n,o){return n.x===o.x&&(n.x<0||n.x>Nr)||n.y===o.y&&(n.y<0||n.y>Nr)}function _W(n){return n.every(function(o){return o.x<0})||n.every(function(o){return o.x>Nr})||n.every(function(o){return o.y<0})||n.every(function(o){return o.y>Nr})}var xW=new qn({"fill-extrusion-opacity":new Tr(Xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr(Xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tr(Xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tr(Xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ni(Xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr(Xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr(Xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tr(Xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),bW={paint:xW},wW=function(n){function o(u){n.call(this,u,bW)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new Du(p)},o.prototype.queryRadius=function(){return el(this.paint.get("fill-extrusion-translate"))},o.prototype.is3D=function(){return!0},o.prototype.queryIntersectsFeature=function(p,x,A,k,F,Y,j,Q){var ne=Eu(p,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Y.angle,j),ge=this.paint.get("fill-extrusion-height").evaluate(x,A),ve=this.paint.get("fill-extrusion-base").evaluate(x,A),Ce=MW(ne,Q,Y,0),qe=AW(k,ve,ge,Q),ft=qe[0],tt=qe[1];return TW(ft,tt,Ce)},o}(pi);function xy(n,o){return n.x*o.x+n.y*o.y}function CM(n,o){if(n.length===1){for(var u=0,p=o[u++],x;!x||p.equals(x);)if(x=o[u++],!x)return 1/0;for(;u<o.length;u++){var A=o[u],k=n[0],F=x.sub(p),Y=A.sub(p),j=k.sub(p),Q=xy(F,F),ne=xy(F,Y),ge=xy(Y,Y),ve=xy(j,F),Ce=xy(j,Y),qe=Q*ge-ne*ne,ft=(ge*ve-ne*Ce)/qe,tt=(Q*Ce-ne*ve)/qe,St=1-ft-tt,gt=p.z*St+x.z*ft+A.z*tt;if(isFinite(gt))return gt}return 1/0}else{for(var At=1/0,Rt=0,Jt=o;Rt<Jt.length;Rt+=1){var dr=Jt[Rt];At=Math.min(At,dr.z)}return At}}function TW(n,o,u){var p=1/0;tn(u,o)&&(p=CM(u,o[0]));for(var x=0;x<o.length;x++)for(var A=o[x],k=n[x],F=0;F<A.length-1;F++){var Y=A[F],j=A[F+1],Q=k[F],ne=k[F+1],ge=[Y,j,ne,Q,Y];ia(u,ge)&&(p=Math.min(p,CM(u,ge)))}return p===1/0?!1:p}function AW(n,o,u,p){for(var x=[],A=[],k=p[8]*o,F=p[9]*o,Y=p[10]*o,j=p[11]*o,Q=p[8]*u,ne=p[9]*u,ge=p[10]*u,ve=p[11]*u,Ce=0,qe=n;Ce<qe.length;Ce+=1){for(var ft=qe[Ce],tt=[],St=[],gt=0,At=ft;gt<At.length;gt+=1){var Rt=At[gt],Jt=Rt.x,dr=Rt.y,cr=p[0]*Jt+p[4]*dr+p[12],Fr=p[1]*Jt+p[5]*dr+p[13],Cr=p[2]*Jt+p[6]*dr+p[14],Ir=p[3]*Jt+p[7]*dr+p[15],Qr=cr+k,qr=Fr+F,Br=Cr+Y,ya=Ir+j,Xr=cr+Q,Ya=Fr+ne,gi=Cr+ge,Wa=Ir+ve,Xa=new v(Qr/ya,qr/ya);Xa.z=Br/ya,tt.push(Xa);var Va=new v(Xr/Wa,Ya/Wa);Va.z=gi/Wa,St.push(Va)}x.push(tt),A.push(St)}return[x,A]}function MW(n,o,u,p){for(var x=[],A=0,k=n;A<k.length;A+=1){var F=k[A],Y=[F.x,F.y,p,1];z1(Y,Y,o),x.push(new v(Y[0]/Y[3],Y[1]/Y[3]))}return x}var SW=ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),kW=SW.members,CW=ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),EW=CW.members,LW=r0.VectorTileFeature.types,EM=63,DW=Math.cos(75/2*(Math.PI/180)),PW=15,zW=20,IW=15,LM=1/2,DM=Math.pow(2,IW-1)/LM,zo=function(o){var u=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(p){return p.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(p){u.gradients[p.id]={}}),this.layoutVertexArray=new vh,this.layoutVertexArray2=new dh,this.indexArray=new Cu,this.programConfigurations=new kr(o.layers,o.zoom),this.segments=new Tn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(p){return p.isStateDependent()}).map(function(p){return p.id})};zo.prototype.populate=function(o,u,p){this.hasPattern=C3("line",this.layers,u);for(var x=this.layers[0].layout.get("line-sort-key"),A=[],k=0,F=o;k<F.length;k+=1){var Y=F[k],j=Y.feature,Q=Y.id,ne=Y.index,ge=Y.sourceLayerIndex,ve=this.layers[0]._featureFilter.needGeometry,Ce=Mi(j,ve);if(this.layers[0]._featureFilter.filter(new jt(this.zoom),Ce,p)){var qe=x?x.evaluate(Ce,{},p):void 0,ft={id:Q,properties:j.properties,type:j.type,sourceLayerIndex:ge,index:ne,geometry:ve?Ce.geometry:Ua(j),patterns:{},sortKey:qe};A.push(ft)}}x&&A.sort(function(Cr,Ir){return Cr.sortKey-Ir.sortKey});for(var tt=0,St=A;tt<St.length;tt+=1){var gt=St[tt],At=gt,Rt=At.geometry,Jt=At.index,dr=At.sourceLayerIndex;if(this.hasPattern){var cr=E3("line",this.layers,gt,this.zoom,u);this.patternFeatures.push(cr)}else this.addFeature(gt,Rt,Jt,p,{});var Fr=o[Jt].feature;u.featureIndex.insert(Fr,Rt,Jt,dr,this.index)}},zo.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},zo.prototype.addFeatures=function(o,u,p){for(var x=0,A=this.patternFeatures;x<A.length;x+=1){var k=A[x];this.addFeature(k,k.geometry,k.index,u,p)}},zo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},zo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zo.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,EW)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,kW),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},zo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},zo.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end")){var u=+o.properties.mapbox_clip_start,p=+o.properties.mapbox_clip_end;return{start:u,end:p}}},zo.prototype.addFeature=function(o,u,p,x,A){var k=this.layers[0].layout,F=k.get("line-join").evaluate(o,{}),Y=k.get("line-cap"),j=k.get("line-miter-limit"),Q=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var ne=0,ge=u;ne<ge.length;ne+=1){var ve=ge[ne];this.addLine(ve,o,F,Y,j,Q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,x)},zo.prototype.addLine=function(o,u,p,x,A,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var F=0;F<o.length-1;F++)this.totalDistance+=o[F].dist(o[F+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Y=LW[u.type]==="Polygon",j=o.length;j>=2&&o[j-1].equals(o[j-2]);)j--;for(var Q=0;Q<j-1&&o[Q].equals(o[Q+1]);)Q++;if(!(j<(Y?3:2))){p==="bevel"&&(A=1.05);var ne=this.overscaling<=16?PW*Nr/(512*this.overscaling):0,ge=this.segments.prepareSegment(j*10,this.layoutVertexArray,this.indexArray),ve,Ce=void 0,qe=void 0,ft=void 0,tt=void 0;this.e1=this.e2=-1,Y&&(ve=o[j-2],tt=o[Q].sub(ve)._unit()._perp());for(var St=Q;St<j;St++)if(qe=St===j-1?Y?o[Q+1]:void 0:o[St+1],!(qe&&o[St].equals(qe))){tt&&(ft=tt),ve&&(Ce=ve),ve=o[St],tt=qe?qe.sub(ve)._unit()._perp():ft,ft=ft||tt;var gt=ft.add(tt);(gt.x!==0||gt.y!==0)&&gt._unit();var At=ft.x*tt.x+ft.y*tt.y,Rt=gt.x*tt.x+gt.y*tt.y,Jt=Rt!==0?1/Rt:1/0,dr=2*Math.sqrt(2-2*Rt),cr=Rt<DW&&Ce&&qe,Fr=ft.x*tt.y-ft.y*tt.x>0;if(cr&&St>Q){var Cr=ve.dist(Ce);if(Cr>2*ne){var Ir=ve.sub(ve.sub(Ce)._mult(ne/Cr)._round());this.updateDistance(Ce,Ir),this.addCurrentVertex(Ir,ft,0,0,ge),Ce=Ir}}var Qr=Ce&&qe,qr=Qr?p:Y?"butt":x;if(Qr&&qr==="round"&&(Jt<k?qr="miter":Jt<=2&&(qr="fakeround")),qr==="miter"&&Jt>A&&(qr="bevel"),qr==="bevel"&&(Jt>2&&(qr="flipbevel"),Jt<A&&(qr="miter")),Ce&&this.updateDistance(Ce,ve),qr==="miter")gt._mult(Jt),this.addCurrentVertex(ve,gt,0,0,ge);else if(qr==="flipbevel"){if(Jt>100)gt=tt.mult(-1);else{var Br=Jt*ft.add(tt).mag()/ft.sub(tt).mag();gt._perp()._mult(Br*(Fr?-1:1))}this.addCurrentVertex(ve,gt,0,0,ge),this.addCurrentVertex(ve,gt.mult(-1),0,0,ge)}else if(qr==="bevel"||qr==="fakeround"){var ya=-Math.sqrt(Jt*Jt-1),Xr=Fr?ya:0,Ya=Fr?0:ya;if(Ce&&this.addCurrentVertex(ve,ft,Xr,Ya,ge),qr==="fakeround")for(var gi=Math.round(dr*180/Math.PI/zW),Wa=1;Wa<gi;Wa++){var Xa=Wa/gi;if(Xa!==.5){var Va=Xa-.5,Si=1.0904+At*(-3.2452+At*(3.55645-At*1.43519)),zi=.848013+At*(-1.06021+At*.215638);Xa=Xa+Xa*Va*(Xa-1)*(Si*Va*Va+zi)}var rn=tt.sub(ft)._mult(Xa)._add(ft)._unit()._mult(Fr?-1:1);this.addHalfVertex(ve,rn.x,rn.y,!1,Fr,0,ge)}qe&&this.addCurrentVertex(ve,tt,-Xr,-Ya,ge)}else if(qr==="butt")this.addCurrentVertex(ve,gt,0,0,ge);else if(qr==="square"){var fn=Ce?1:-1;this.addCurrentVertex(ve,gt,fn,fn,ge)}else qr==="round"&&(Ce&&(this.addCurrentVertex(ve,ft,0,0,ge),this.addCurrentVertex(ve,ft,1,1,ge,!0)),qe&&(this.addCurrentVertex(ve,tt,-1,-1,ge,!0),this.addCurrentVertex(ve,tt,0,0,ge)));if(cr&&St<j-1){var Yn=ve.dist(qe);if(Yn>2*ne){var kn=ve.add(qe.sub(ve)._mult(ne/Yn)._round());this.updateDistance(ve,kn),this.addCurrentVertex(kn,tt,0,0,ge),ve=kn}}}}},zo.prototype.addCurrentVertex=function(o,u,p,x,A,k){k===void 0&&(k=!1);var F=u.x+u.y*p,Y=u.y-u.x*p,j=-u.x+u.y*x,Q=-u.y-u.x*x;this.addHalfVertex(o,F,Y,k,!1,p,A),this.addHalfVertex(o,j,Q,k,!0,-x,A),this.distance>DM/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,u,p,x,A,k))},zo.prototype.addHalfVertex=function(o,u,p,x,A,k,F){var Y=o.x,j=o.y,Q=this.lineClips?this.scaledDistance*(DM-1):this.scaledDistance,ne=Q*LM;if(this.layoutVertexArray.emplaceBack((Y<<1)+(x?1:0),(j<<1)+(A?1:0),Math.round(EM*u)+128,Math.round(EM*p)+128,(k===0?0:k<0?-1:1)+1|(ne&63)<<2,ne>>6),this.lineClips){var ge=this.scaledDistance-this.lineClips.start,ve=this.lineClips.end-this.lineClips.start,Ce=ge/ve;this.layoutVertexArray2.emplaceBack(Ce,this.lineClipsArray.length)}var qe=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,qe),F.primitiveLength++),A?this.e2=qe:this.e1=qe},zo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},zo.prototype.updateDistance=function(o,u){this.distance+=o.dist(u),this.updateScaledDistance()},y("LineBucket",zo,{omit:["layers","patternFeatures"]});var RW=new qn({"line-cap":new Tr(Xt.layout_line["line-cap"]),"line-join":new Hr(Xt.layout_line["line-join"]),"line-miter-limit":new Tr(Xt.layout_line["line-miter-limit"]),"line-round-limit":new Tr(Xt.layout_line["line-round-limit"]),"line-sort-key":new Hr(Xt.layout_line["line-sort-key"])}),FW=new qn({"line-opacity":new Hr(Xt.paint_line["line-opacity"]),"line-color":new Hr(Xt.paint_line["line-color"]),"line-translate":new Tr(Xt.paint_line["line-translate"]),"line-translate-anchor":new Tr(Xt.paint_line["line-translate-anchor"]),"line-width":new Hr(Xt.paint_line["line-width"]),"line-gap-width":new Hr(Xt.paint_line["line-gap-width"]),"line-offset":new Hr(Xt.paint_line["line-offset"]),"line-blur":new Hr(Xt.paint_line["line-blur"]),"line-dasharray":new Ai(Xt.paint_line["line-dasharray"]),"line-pattern":new Ni(Xt.paint_line["line-pattern"]),"line-gradient":new fo(Xt.paint_line["line-gradient"])}),PM={paint:FW,layout:RW},qW=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.possiblyEvaluate=function(p,x){return x=new jt(Math.floor(x.zoom),{now:x.now,fadeDuration:x.fadeDuration,zoomHistory:x.zoomHistory,transition:x.transition}),n.prototype.possiblyEvaluate.call(this,p,x)},o.prototype.evaluate=function(p,x,A,k){return x=H({},x,{zoom:Math.floor(x.zoom)}),n.prototype.evaluate.call(this,p,x,A,k)},o}(Hr),zM=new qW(PM.paint.properties["line-width"].specification);zM.useIntegerZoom=!0;var NW=function(n){function o(u){n.call(this,u,PM),this.gradientVersion=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._handleSpecialPaintPropertyUpdate=function(p){if(p==="line-gradient"){var x=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=x._styleExpression.expression instanceof Ms,this.gradientVersion=(this.gradientVersion+1)%M}},o.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},o.prototype.recalculate=function(p,x){n.prototype.recalculate.call(this,p,x),this.paint._values["line-floorwidth"]=zM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,p)},o.prototype.createBucket=function(p){return new zo(p)},o.prototype.queryRadius=function(p){var x=p,A=IM(Po("line-width",this,x),Po("line-gap-width",this,x)),k=Po("line-offset",this,x);return A/2+Math.abs(k)+el(this.paint.get("line-translate"))},o.prototype.queryIntersectsFeature=function(p,x,A,k,F,Y,j){var Q=Eu(p,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Y.angle,j),ne=j/2*IM(this.paint.get("line-width").evaluate(x,A),this.paint.get("line-gap-width").evaluate(x,A)),ge=this.paint.get("line-offset").evaluate(x,A);return ge&&(k=BW(k,ge*j)),Nn(Q,k,ne)},o.prototype.isTileClipped=function(){return!0},o}(pi);function IM(n,o){return o>0?o+2*n:n}function BW(n,o){for(var u=[],p=new v(0,0),x=0;x<n.length;x++){for(var A=n[x],k=[],F=0;F<A.length;F++){var Y=A[F-1],j=A[F],Q=A[F+1],ne=F===0?p:j.sub(Y)._unit()._perp(),ge=F===A.length-1?p:Q.sub(j)._unit()._perp(),ve=ne._add(ge)._unit(),Ce=ve.x*ge.x+ve.y*ge.y;ve._mult(1/Ce),k.push(ve._mult(o)._add(j))}u.push(k)}return u}var OW=ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),UW=ui([{name:"a_projected_pos",components:3,type:"Float32"}],4),Bme=ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),VW=ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ome=ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),RM=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),HW=ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Ume=ui([{name:"triangle",components:3,type:"Uint16"}]),Vme=ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hme=ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Gme=ui([{type:"Float32",name:"offsetX"}]),Zme=ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function GW(n,o,u){var p=o.layout.get("text-transform").evaluate(u,{});return p==="uppercase"?n=n.toLocaleUpperCase():p==="lowercase"&&(n=n.toLocaleLowerCase()),ei.applyArabicShaping&&(n=ei.applyArabicShaping(n)),n}function ZW(n,o,u){return n.sections.forEach(function(p){p.text=GW(p.text,o,u)}),n}function YW(n){var o={},u={},p=[],x=0;function A(tt){p.push(n[tt]),x++}function k(tt,St,gt){var At=u[tt];return delete u[tt],u[St]=At,p[At].geometry[0].pop(),p[At].geometry[0]=p[At].geometry[0].concat(gt[0]),At}function F(tt,St,gt){var At=o[St];return delete o[St],o[tt]=At,p[At].geometry[0].shift(),p[At].geometry[0]=gt[0].concat(p[At].geometry[0]),At}function Y(tt,St,gt){var At=gt?St[0][St[0].length-1]:St[0][0];return tt+":"+At.x+":"+At.y}for(var j=0;j<n.length;j++){var Q=n[j],ne=Q.geometry,ge=Q.text?Q.text.toString():null;if(!ge){A(j);continue}var ve=Y(ge,ne),Ce=Y(ge,ne,!0);if(ve in u&&Ce in o&&u[ve]!==o[Ce]){var qe=F(ve,Ce,ne),ft=k(ve,Ce,p[qe].geometry);delete o[ve],delete u[Ce],u[Y(ge,p[ft].geometry,!0)]=ft,p[qe].geometry=null}else ve in u?k(ve,Ce,ne):Ce in o?F(ve,Ce,ne):(A(j),o[ve]=x-1,u[Ce]=x-1)}return p.filter(function(tt){return tt.geometry})}var by={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function WW(n){for(var o="",u=0;u<n.length;u++){var p=n.charCodeAt(u+1)||null,x=n.charCodeAt(u-1)||null,A=(!p||!ot(p)||by[n[u+1]])&&(!x||!ot(x)||by[n[u-1]]);A&&by[n[u]]?o+=by[n[u]]:o+=n[u]}return o}var Qn=24,XW=function(n,o,u,p,x){var A,k,F=x*8-p-1,Y=(1<<F)-1,j=Y>>1,Q=-7,ne=u?x-1:0,ge=u?-1:1,ve=n[o+ne];for(ne+=ge,A=ve&(1<<-Q)-1,ve>>=-Q,Q+=F;Q>0;A=A*256+n[o+ne],ne+=ge,Q-=8);for(k=A&(1<<-Q)-1,A>>=-Q,Q+=p;Q>0;k=k*256+n[o+ne],ne+=ge,Q-=8);if(A===0)A=1-j;else{if(A===Y)return k?NaN:(ve?-1:1)*(1/0);k=k+Math.pow(2,p),A=A-j}return(ve?-1:1)*k*Math.pow(2,A-p)},jW=function(n,o,u,p,x,A){var k,F,Y,j=A*8-x-1,Q=(1<<j)-1,ne=Q>>1,ge=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,ve=p?0:A-1,Ce=p?1:-1,qe=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(F=isNaN(o)?1:0,k=Q):(k=Math.floor(Math.log(o)/Math.LN2),o*(Y=Math.pow(2,-k))<1&&(k--,Y*=2),k+ne>=1?o+=ge/Y:o+=ge*Math.pow(2,1-ne),o*Y>=2&&(k++,Y/=2),k+ne>=Q?(F=0,k=Q):k+ne>=1?(F=(o*Y-1)*Math.pow(2,x),k=k+ne):(F=o*Math.pow(2,ne-1)*Math.pow(2,x),k=0));x>=8;n[u+ve]=F&255,ve+=Ce,F/=256,x-=8);for(k=k<<x|F,j+=x;j>0;n[u+ve]=k&255,ve+=Ce,k/=256,j-=8);n[u+ve-Ce]|=qe*128},N1={read:XW,write:jW},B1=Pi;function Pi(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Pi.Varint=0,Pi.Fixed64=1,Pi.Bytes=2,Pi.Fixed32=5;var D3=65536*65536,FM=1/D3,JW=12,qM=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Pi.prototype={destroy:function(){this.buf=null},readFields:function(n,o,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),x=p>>3,A=this.pos;this.type=p&7,n(x,o,this),this.pos===A&&this.skip(p)}return o},readMessage:function(n,o){return this.readFields(n,o,this.readVarint()+this.pos)},readFixed32:function(){var n=O1(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=BM(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=O1(this.buf,this.pos)+O1(this.buf,this.pos+4)*D3;return this.pos+=8,n},readSFixed64:function(){var n=O1(this.buf,this.pos)+BM(this.buf,this.pos+4)*D3;return this.pos+=8,n},readFloat:function(){var n=N1.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=N1.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var o=this.buf,u,p;return p=o[this.pos++],u=p&127,p<128||(p=o[this.pos++],u|=(p&127)<<7,p<128)||(p=o[this.pos++],u|=(p&127)<<14,p<128)||(p=o[this.pos++],u|=(p&127)<<21,p<128)?u:(p=o[this.pos],u|=(p&15)<<28,KW(u,n,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2===1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=JW&&qM?cX(this.buf,o,n):fX(this.buf,o,n)},readBytes:function(){var n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o},readPackedVarint:function(n,o){if(this.type!==Pi.Bytes)return n.push(this.readVarint(o));var u=vc(this);for(n=n||[];this.pos<u;)n.push(this.readVarint(o));return n},readPackedSVarint:function(n){if(this.type!==Pi.Bytes)return n.push(this.readSVarint());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Pi.Bytes)return n.push(this.readBoolean());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Pi.Bytes)return n.push(this.readFloat());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Pi.Bytes)return n.push(this.readDouble());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Pi.Bytes)return n.push(this.readFixed32());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Pi.Bytes)return n.push(this.readSFixed32());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Pi.Bytes)return n.push(this.readFixed64());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Pi.Bytes)return n.push(this.readSFixed64());var o=vc(this);for(n=n||[];this.pos<o;)n.push(this.readSFixed64());return n},skip:function(n){var o=n&7;if(o===Pi.Varint)for(;this.buf[this.pos++]>127;);else if(o===Pi.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Pi.Fixed32)this.pos+=4;else if(o===Pi.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+o)},writeTag:function(n,o){this.writeVarint(n<<3|o)},realloc:function(n){for(var o=this.length||16;o<this.pos+n;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),i0(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),i0(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),i0(this.buf,n&-1,this.pos),i0(this.buf,Math.floor(n*FM),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),i0(this.buf,n&-1,this.pos),i0(this.buf,Math.floor(n*FM),this.pos+4),this.pos+=8},writeVarint:function(n){if(n=+n||0,n>268435455||n<0){QW(n,this);return}this.realloc(4),this.buf[this.pos++]=n&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=n>>>7&127)))},writeSVarint:function(n){this.writeVarint(n<0?-n*2-1:n*2)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(n.length*4),this.pos++;var o=this.pos;this.pos=hX(this.buf,n,this.pos);var u=this.pos-o;u>=128&&NM(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(n){this.realloc(4),N1.write(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),N1.write(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var o=n.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=n[u]},writeRawMessage:function(n,o){this.pos++;var u=this.pos;n(o,this);var p=this.pos-u;p>=128&&NM(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(n,o,u){this.writeTag(n,Pi.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(n,o){o.length&&this.writeMessage(n,tX,o)},writePackedSVarint:function(n,o){o.length&&this.writeMessage(n,rX,o)},writePackedBoolean:function(n,o){o.length&&this.writeMessage(n,nX,o)},writePackedFloat:function(n,o){o.length&&this.writeMessage(n,aX,o)},writePackedDouble:function(n,o){o.length&&this.writeMessage(n,iX,o)},writePackedFixed32:function(n,o){o.length&&this.writeMessage(n,oX,o)},writePackedSFixed32:function(n,o){o.length&&this.writeMessage(n,sX,o)},writePackedFixed64:function(n,o){o.length&&this.writeMessage(n,lX,o)},writePackedSFixed64:function(n,o){o.length&&this.writeMessage(n,uX,o)},writeBytesField:function(n,o){this.writeTag(n,Pi.Bytes),this.writeBytes(o)},writeFixed32Field:function(n,o){this.writeTag(n,Pi.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(n,o){this.writeTag(n,Pi.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(n,o){this.writeTag(n,Pi.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(n,o){this.writeTag(n,Pi.Fixed64),this.writeSFixed64(o)},writeVarintField:function(n,o){this.writeTag(n,Pi.Varint),this.writeVarint(o)},writeSVarintField:function(n,o){this.writeTag(n,Pi.Varint),this.writeSVarint(o)},writeStringField:function(n,o){this.writeTag(n,Pi.Bytes),this.writeString(o)},writeFloatField:function(n,o){this.writeTag(n,Pi.Fixed32),this.writeFloat(o)},writeDoubleField:function(n,o){this.writeTag(n,Pi.Fixed64),this.writeDouble(o)},writeBooleanField:function(n,o){this.writeVarintField(n,!!o)}};function KW(n,o,u){var p=u.buf,x,A;if(A=p[u.pos++],x=(A&112)>>4,A<128||(A=p[u.pos++],x|=(A&127)<<3,A<128)||(A=p[u.pos++],x|=(A&127)<<10,A<128)||(A=p[u.pos++],x|=(A&127)<<17,A<128)||(A=p[u.pos++],x|=(A&127)<<24,A<128)||(A=p[u.pos++],x|=(A&1)<<31,A<128))return a0(n,x,o);throw new Error("Expected varint not more than 10 bytes")}function vc(n){return n.type===Pi.Bytes?n.readVarint()+n.pos:n.pos+1}function a0(n,o,u){return u?o*4294967296+(n>>>0):(o>>>0)*4294967296+(n>>>0)}function QW(n,o){var u,p;if(n>=0?(u=n%4294967296|0,p=n/4294967296|0):(u=~(-n%4294967296),p=~(-n/4294967296),u^4294967295?u=u+1|0:(u=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),$W(u,p,o),eX(p,o)}function $W(n,o,u){u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos]=n&127}function eX(n,o){var u=(n&7)<<4;o.buf[o.pos++]|=u|((n>>>=3)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127)))))}function NM(n,o,u){var p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(Math.LN2*7));u.realloc(p);for(var x=u.pos-1;x>=n;x--)u.buf[x+p]=u.buf[x]}function tX(n,o){for(var u=0;u<n.length;u++)o.writeVarint(n[u])}function rX(n,o){for(var u=0;u<n.length;u++)o.writeSVarint(n[u])}function aX(n,o){for(var u=0;u<n.length;u++)o.writeFloat(n[u])}function iX(n,o){for(var u=0;u<n.length;u++)o.writeDouble(n[u])}function nX(n,o){for(var u=0;u<n.length;u++)o.writeBoolean(n[u])}function oX(n,o){for(var u=0;u<n.length;u++)o.writeFixed32(n[u])}function sX(n,o){for(var u=0;u<n.length;u++)o.writeSFixed32(n[u])}function lX(n,o){for(var u=0;u<n.length;u++)o.writeFixed64(n[u])}function uX(n,o){for(var u=0;u<n.length;u++)o.writeSFixed64(n[u])}function O1(n,o){return(n[o]|n[o+1]<<8|n[o+2]<<16)+n[o+3]*16777216}function i0(n,o,u){n[u]=o,n[u+1]=o>>>8,n[u+2]=o>>>16,n[u+3]=o>>>24}function BM(n,o){return(n[o]|n[o+1]<<8|n[o+2]<<16)+(n[o+3]<<24)}function fX(n,o,u){for(var p="",x=o;x<u;){var A=n[x],k=null,F=A>239?4:A>223?3:A>191?2:1;if(x+F>u)break;var Y,j,Q;F===1?A<128&&(k=A):F===2?(Y=n[x+1],(Y&192)===128&&(k=(A&31)<<6|Y&63,k<=127&&(k=null))):F===3?(Y=n[x+1],j=n[x+2],(Y&192)===128&&(j&192)===128&&(k=(A&15)<<12|(Y&63)<<6|j&63,(k<=2047||k>=55296&&k<=57343)&&(k=null))):F===4&&(Y=n[x+1],j=n[x+2],Q=n[x+3],(Y&192)===128&&(j&192)===128&&(Q&192)===128&&(k=(A&15)<<18|(Y&63)<<12|(j&63)<<6|Q&63,(k<=65535||k>=1114112)&&(k=null))),k===null?(k=65533,F=1):k>65535&&(k-=65536,p+=String.fromCharCode(k>>>10&1023|55296),k=56320|k&1023),p+=String.fromCharCode(k),x+=F}return p}function cX(n,o,u){return qM.decode(n.subarray(o,u))}function hX(n,o,u){for(var p=0,x,A;p<o.length;p++){if(x=o.charCodeAt(p),x>55295&&x<57344)if(A)if(x<56320){n[u++]=239,n[u++]=191,n[u++]=189,A=x;continue}else x=A-55296<<10|x-56320|65536,A=null;else{x>56319||p+1===o.length?(n[u++]=239,n[u++]=191,n[u++]=189):A=x;continue}else A&&(n[u++]=239,n[u++]=191,n[u++]=189,A=null);x<128?n[u++]=x:(x<2048?n[u++]=x>>6|192:(x<65536?n[u++]=x>>12|224:(n[u++]=x>>18|240,n[u++]=x>>12&63|128),n[u++]=x>>6&63|128),n[u++]=x&63|128)}return u}var P3=3;function vX(n,o,u){n===1&&u.readMessage(dX,o)}function dX(n,o,u){if(n===3){var p=u.readMessage(pX,{}),x=p.id,A=p.bitmap,k=p.width,F=p.height,Y=p.left,j=p.top,Q=p.advance;o.push({id:x,bitmap:new ad({width:k+2*P3,height:F+2*P3},A),metrics:{width:k,height:F,left:Y,top:j,advance:Q}})}}function pX(n,o,u){n===1?o.id=u.readVarint():n===2?o.bitmap=u.readBytes():n===3?o.width=u.readVarint():n===4?o.height=u.readVarint():n===5?o.left=u.readSVarint():n===6?o.top=u.readSVarint():n===7&&(o.advance=u.readVarint())}function mX(n){return new B1(n).readFields(vX,[])}var OM=P3;function UM(n){for(var o=0,u=0,p=0,x=n;p<x.length;p+=1){var A=x[p];o+=A.w*A.h,u=Math.max(u,A.w)}n.sort(function(ft,tt){return tt.h-ft.h});for(var k=Math.max(Math.ceil(Math.sqrt(o/.95)),u),F=[{x:0,y:0,w:k,h:1/0}],Y=0,j=0,Q=0,ne=n;Q<ne.length;Q+=1)for(var ge=ne[Q],ve=F.length-1;ve>=0;ve--){var Ce=F[ve];if(!(ge.w>Ce.w||ge.h>Ce.h)){if(ge.x=Ce.x,ge.y=Ce.y,j=Math.max(j,ge.y+ge.h),Y=Math.max(Y,ge.x+ge.w),ge.w===Ce.w&&ge.h===Ce.h){var qe=F.pop();ve<F.length&&(F[ve]=qe)}else ge.h===Ce.h?(Ce.x+=ge.w,Ce.w-=ge.w):ge.w===Ce.w?(Ce.y+=ge.h,Ce.h-=ge.h):(F.push({x:Ce.x+ge.w,y:Ce.y,w:Ce.w-ge.w,h:ge.h}),Ce.y+=ge.h,Ce.h-=ge.h);break}}return{w:Y,h:j,fill:o/(Y*j)||0}}var ps=1,U1=function(o,u){var p=u.pixelRatio,x=u.version,A=u.stretchX,k=u.stretchY,F=u.content;this.paddedRect=o,this.pixelRatio=p,this.stretchX=A,this.stretchY=k,this.content=F,this.version=x},wy={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};wy.tl.get=function(){return[this.paddedRect.x+ps,this.paddedRect.y+ps]},wy.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ps,this.paddedRect.y+this.paddedRect.h-ps]},wy.tlbr.get=function(){return this.tl.concat(this.br)},wy.displaySize.get=function(){return[(this.paddedRect.w-ps*2)/this.pixelRatio,(this.paddedRect.h-ps*2)/this.pixelRatio]},Object.defineProperties(U1.prototype,wy);var Ty=function(o,u){var p={},x={};this.haveRenderCallbacks=[];var A=[];this.addImages(o,p,A),this.addImages(u,x,A);var k=UM(A),F=k.w,Y=k.h,j=new ts({width:F||1,height:Y||1});for(var Q in o){var ne=o[Q],ge=p[Q].paddedRect;ts.copy(ne.data,j,{x:0,y:0},{x:ge.x+ps,y:ge.y+ps},ne.data)}for(var ve in u){var Ce=u[ve],qe=x[ve].paddedRect,ft=qe.x+ps,tt=qe.y+ps,St=Ce.data.width,gt=Ce.data.height;ts.copy(Ce.data,j,{x:0,y:0},{x:ft,y:tt},Ce.data),ts.copy(Ce.data,j,{x:0,y:gt-1},{x:ft,y:tt-1},{width:St,height:1}),ts.copy(Ce.data,j,{x:0,y:0},{x:ft,y:tt+gt},{width:St,height:1}),ts.copy(Ce.data,j,{x:St-1,y:0},{x:ft-1,y:tt},{width:1,height:gt}),ts.copy(Ce.data,j,{x:0,y:0},{x:ft+St,y:tt},{width:1,height:gt})}this.image=j,this.iconPositions=p,this.patternPositions=x};Ty.prototype.addImages=function(o,u,p){for(var x in o){var A=o[x],k={x:0,y:0,w:A.data.width+2*ps,h:A.data.height+2*ps};p.push(k),u[x]=new U1(k,A),A.hasRenderCallback&&this.haveRenderCallbacks.push(x)}},Ty.prototype.patchUpdatedImages=function(o,u){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),u)},Ty.prototype.patchUpdatedImage=function(o,u,p){if(!(!o||!u)&&o.version!==u.version){o.version=u.version;var x=o.tl,A=x[0],k=x[1];p.update(u.data,void 0,{x:A,y:k})}},y("ImagePosition",U1),y("ImageAtlas",Ty);var Is={horizontal:1,vertical:2,horizontalOnly:3},Ay=-17;function yX(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(p.positionedGlyphs.length!==0)return!1}return!0}var VM=57344,HM=63743,n0=function(){this.scale=1,this.fontStack="",this.imageName=null};n0.forText=function(o,u){var p=new n0;return p.scale=o||1,p.fontStack=u,p},n0.forImage=function(o){var u=new n0;return u.imageName=o,u};var bo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};bo.fromFeature=function(o,u){for(var p=new bo,x=0;x<o.sections.length;x++){var A=o.sections[x];A.image?p.addImageSection(A):p.addTextSection(A,u)}return p},bo.prototype.length=function(){return this.text.length},bo.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},bo.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},bo.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},bo.prototype.verticalizePunctuation=function(){this.text=WW(this.text)},bo.prototype.trim=function(){for(var o=0,u=0;u<this.text.length&&Af[this.text.charCodeAt(u)];u++)o++;for(var p=this.text.length,x=this.text.length-1;x>=0&&x>=o&&Af[this.text.charCodeAt(x)];x--)p--;this.text=this.text.substring(o,p),this.sectionIndex=this.sectionIndex.slice(o,p)},bo.prototype.substring=function(o,u){var p=new bo;return p.text=this.text.substring(o,u),p.sectionIndex=this.sectionIndex.slice(o,u),p.sections=this.sections,p},bo.prototype.toString=function(){return this.text},bo.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(u,p){return Math.max(u,o.sections[p].scale)},0)},bo.prototype.addTextSection=function(o,u){this.text+=o.text,this.sections.push(n0.forText(o.scale,o.fontStack||u));for(var p=this.sections.length-1,x=0;x<o.text.length;++x)this.sectionIndex.push(p)},bo.prototype.addImageSection=function(o){var u=o.image?o.image.name:"";if(u.length===0){ke("Can't add FormattedSection with an empty image.");return}var p=this.getNextImageSectionCharCode();if(!p){ke("Reached maximum number of images "+(HM-VM+2));return}this.text+=String.fromCharCode(p),this.sections.push(n0.forImage(u)),this.sectionIndex.push(this.sections.length-1)},bo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=HM?null:++this.imageSectionID:(this.imageSectionID=VM,this.imageSectionID)};function gX(n,o){for(var u=[],p=n.text,x=0,A=0,k=o;A<k.length;A+=1){var F=k[A];u.push(n.substring(x,F)),x=F}return x<p.length&&u.push(n.substring(x,p.length)),u}function V1(n,o,u,p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe){var ft=bo.fromFeature(n,x);ne===Is.vertical&&ft.verticalizePunctuation();var tt,St=ei.processBidirectionalText,gt=ei.processStyledBidirectionalText;if(St&&ft.sections.length===1){tt=[];for(var At=St(ft.toString(),z3(ft,j,A,o,p,ve,Ce)),Rt=0,Jt=At;Rt<Jt.length;Rt+=1){var dr=Jt[Rt],cr=new bo;cr.text=dr,cr.sections=ft.sections;for(var Fr=0;Fr<dr.length;Fr++)cr.sectionIndex.push(0);tt.push(cr)}}else if(gt){tt=[];for(var Cr=gt(ft.text,ft.sectionIndex,z3(ft,j,A,o,p,ve,Ce)),Ir=0,Qr=Cr;Ir<Qr.length;Ir+=1){var qr=Qr[Ir],Br=new bo;Br.text=qr[0],Br.sectionIndex=qr[1],Br.sections=ft.sections,tt.push(Br)}}else tt=gX(ft,z3(ft,j,A,o,p,ve,Ce));var ya=[],Xr={positionedLines:ya,text:ft.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:ne,iconsInText:!1,verticalizable:!1};return bX(Xr,o,u,p,tt,k,F,Y,ne,j,ge,qe),yX(ya)?!1:Xr}var Af={};Af[9]=!0,Af[10]=!0,Af[11]=!0,Af[12]=!0,Af[13]=!0,Af[32]=!0;var ms={};ms[10]=!0,ms[32]=!0,ms[38]=!0,ms[40]=!0,ms[41]=!0,ms[43]=!0,ms[45]=!0,ms[47]=!0,ms[173]=!0,ms[183]=!0,ms[8203]=!0,ms[8208]=!0,ms[8211]=!0,ms[8231]=!0;function GM(n,o,u,p,x,A){if(o.imageName){var Y=p[o.imageName];return Y?Y.displaySize[0]*o.scale*Qn/A+x:0}else{var k=u[o.fontStack],F=k&&k[n];return F?F.metrics.advance*o.scale+x:0}}function _X(n,o,u,p,x,A){for(var k=0,F=0;F<n.length();F++){var Y=n.getSection(F);k+=GM(n.getCharCode(F),Y,p,x,o,A)}var j=Math.max(1,Math.ceil(k/u));return k/j}function ZM(n,o,u,p){var x=Math.pow(n-o,2);return p?n<o?x/2:x*2:x+Math.abs(u)*u}function xX(n,o,u){var p=0;return n===10&&(p-=1e4),u&&(p+=150),(n===40||n===65288)&&(p+=50),(o===41||o===65289)&&(p+=50),p}function YM(n,o,u,p,x,A){for(var k=null,F=ZM(o,u,x,A),Y=0,j=p;Y<j.length;Y+=1){var Q=j[Y],ne=o-Q.x,ge=ZM(ne,u,x,A)+Q.badness;ge<=F&&(k=Q,F=ge)}return{index:n,x:o,priorBreak:k,badness:F}}function WM(n){return n?WM(n.priorBreak).concat(n.index):[]}function z3(n,o,u,p,x,A,k){if(A!=="point")return[];if(!n)return[];for(var F=[],Y=_X(n,o,u,p,x,k),j=n.text.indexOf("\u200B")>=0,Q=0,ne=0;ne<n.length();ne++){var ge=n.getSection(ne),ve=n.getCharCode(ne);if(Af[ve]||(Q+=GM(ve,ge,p,x,o,k)),ne<n.length()-1){var Ce=Pe(ve);(ms[ve]||Ce||ge.imageName)&&F.push(YM(ne+1,Q,Y,F,xX(ve,n.getCharCode(ne+1),Ce&&j),!1))}}return WM(YM(n.length(),Q,Y,F,0,!0))}function I3(n){var o=.5,u=.5;switch(n){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break}switch(n){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0;break}return{horizontalAlign:o,verticalAlign:u}}function bX(n,o,u,p,x,A,k,F,Y,j,Q,ne){for(var ge=0,ve=Ay,Ce=0,qe=0,ft=F==="right"?1:F==="left"?0:.5,tt=0,St=0,gt=x;St<gt.length;St+=1){var At=gt[St];At.trim();var Rt=At.getMaxScale(),Jt=(Rt-1)*Qn,dr={positionedGlyphs:[],lineOffset:0};n.positionedLines[tt]=dr;var cr=dr.positionedGlyphs,Fr=0;if(!At.length()){ve+=A,++tt;continue}for(var Cr=0;Cr<At.length();Cr++){var Ir=At.getSection(Cr),Qr=At.getSectionIndex(Cr),qr=At.getCharCode(Cr),Br=0,ya=null,Xr=null,Ya=null,gi=Qn,Wa=!(Y===Is.horizontal||!Q&&!De(qr)||Q&&(Af[qr]||Ie(qr)));if(Ir.imageName){var rn=p[Ir.imageName];if(!rn)continue;Ya=Ir.imageName,n.iconsInText=n.iconsInText||!0,Xr=rn.paddedRect;var fn=rn.displaySize;Ir.scale=Ir.scale*Qn/ne,ya={width:fn[0],height:fn[1],left:ps,top:-OM,advance:Wa?fn[1]:fn[0]};var Yn=Qn-fn[1]*Ir.scale;Br=Jt+Yn,gi=ya.advance;var kn=Wa?fn[0]*Ir.scale-Qn*Rt:fn[1]*Ir.scale-Qn*Rt;kn>0&&kn>Fr&&(Fr=kn)}else{var Xa=u[Ir.fontStack],Va=Xa&&Xa[qr];if(Va&&Va.rect)Xr=Va.rect,ya=Va.metrics;else{var Si=o[Ir.fontStack],zi=Si&&Si[qr];if(!zi)continue;ya=zi.metrics}Br=(Rt-Ir.scale)*Qn}Wa?(n.verticalizable=!0,cr.push({glyph:qr,imageName:Ya,x:ge,y:ve+Br,vertical:Wa,scale:Ir.scale,fontStack:Ir.fontStack,sectionIndex:Qr,metrics:ya,rect:Xr}),ge+=gi*Ir.scale+j):(cr.push({glyph:qr,imageName:Ya,x:ge,y:ve+Br,vertical:Wa,scale:Ir.scale,fontStack:Ir.fontStack,sectionIndex:Qr,metrics:ya,rect:Xr}),ge+=ya.advance*Ir.scale+j)}if(cr.length!==0){var wo=ge-j;Ce=Math.max(wo,Ce),wX(cr,0,cr.length-1,ft,Fr)}ge=0;var To=A*Rt+Fr;dr.lineOffset=Math.max(Fr,Jt),ve+=To,qe=Math.max(To,qe),++tt}var Wn=ve-Ay,Io=I3(k),Ro=Io.horizontalAlign,Bn=Io.verticalAlign;TX(n.positionedLines,ft,Ro,Bn,Ce,qe,A,Wn,x.length),n.top+=-Bn*Wn,n.bottom=n.top+Wn,n.left+=-Ro*Ce,n.right=n.left+Ce}function wX(n,o,u,p,x){if(!(!p&&!x))for(var A=n[u],k=A.metrics.advance*A.scale,F=(n[u].x+k)*p,Y=o;Y<=u;Y++)n[Y].x-=F,n[Y].y+=x}function TX(n,o,u,p,x,A,k,F,Y){var j=(o-u)*x,Q=0;A!==k?Q=-F*p-Ay:Q=(-p*Y+.5)*k;for(var ne=0,ge=n;ne<ge.length;ne+=1)for(var ve=ge[ne],Ce=0,qe=ve.positionedGlyphs;Ce<qe.length;Ce+=1){var ft=qe[Ce];ft.x+=j,ft.y+=Q}}function AX(n,o,u){var p=I3(u),x=p.horizontalAlign,A=p.verticalAlign,k=o[0],F=o[1],Y=k-n.displaySize[0]*x,j=Y+n.displaySize[0],Q=F-n.displaySize[1]*A,ne=Q+n.displaySize[1];return{image:n,top:Q,bottom:ne,left:Y,right:j}}function XM(n,o,u,p,x,A){var k=n.image,F;if(k.content){var Y=k.content,j=k.pixelRatio||1;F=[Y[0]/j,Y[1]/j,k.displaySize[0]-Y[2]/j,k.displaySize[1]-Y[3]/j]}var Q=o.left*A,ne=o.right*A,ge,ve,Ce,qe;u==="width"||u==="both"?(qe=x[0]+Q-p[3],ve=x[0]+ne+p[1]):(qe=x[0]+(Q+ne-k.displaySize[0])/2,ve=qe+k.displaySize[0]);var ft=o.top*A,tt=o.bottom*A;return u==="height"||u==="both"?(ge=x[1]+ft-p[0],Ce=x[1]+tt+p[2]):(ge=x[1]+(ft+tt-k.displaySize[1])/2,Ce=ge+k.displaySize[1]),{image:k,top:ge,right:ve,bottom:Ce,left:qe,collisionPadding:F}}var o0=function(n){function o(u,p,x,A){n.call(this,u,p),this.angle=x,A!==void 0&&(this.segment=A)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.clone=function(){return new o(this.x,this.y,this.angle,this.segment)},o}(v);y("Anchor",o0);var Pu=128;function R3(n,o){var u=o.expression;if(u.kind==="constant"){var p=u.evaluate(new jt(n+1));return{kind:"constant",layoutSize:p}}else{if(u.kind==="source")return{kind:"source"};for(var x=u.zoomStops,A=u.interpolationType,k=0;k<x.length&&x[k]<=n;)k++;k=Math.max(0,k-1);for(var F=k;F<x.length&&x[F]<n+1;)F++;F=Math.min(x.length-1,F);var Y=x[k],j=x[F];if(u.kind==="composite")return{kind:"composite",minZoom:Y,maxZoom:j,interpolationType:A};var Q=u.evaluate(new jt(Y)),ne=u.evaluate(new jt(j));return{kind:"camera",minZoom:Y,maxZoom:j,minSize:Q,maxSize:ne,interpolationType:A}}}function jM(n,o,u){var p=o.uSize,x=o.uSizeT,A=u.lowerSize,k=u.upperSize;return n.kind==="source"?A/Pu:n.kind==="composite"?pn(A/Pu,k/Pu,x):p}function JM(n,o){var u=0,p=0;if(n.kind==="constant")p=n.layoutSize;else if(n.kind!=="source"){var x=n.interpolationType,A=n.minZoom,k=n.maxZoom,F=x?I(bn.interpolationFactor(x,o,A,k),0,1):0;n.kind==="camera"?p=pn(n.minSize,n.maxSize,F):u=F}return{uSizeT:u,uSize:p}}var MX=Object.freeze({__proto__:null,getSizeData:R3,evaluateSizeForFeature:jM,evaluateSizeForZoom:JM,SIZE_PACK_FACTOR:Pu});function KM(n,o,u,p,x){if(o.segment===void 0)return!0;for(var A=o,k=o.segment+1,F=0;F>-u/2;){if(k--,k<0)return!1;F-=n[k].dist(A),A=n[k]}F+=n[k].dist(n[k+1]),k++;for(var Y=[],j=0;F<u/2;){var Q=n[k-1],ne=n[k],ge=n[k+1];if(!ge)return!1;var ve=Q.angleTo(ne)-ne.angleTo(ge);for(ve=Math.abs((ve+3*Math.PI)%(Math.PI*2)-Math.PI),Y.push({distance:F,angleDelta:ve}),j+=ve;F-Y[0].distance>p;)j-=Y.shift().angleDelta;if(j>x)return!1;k++,F+=ne.dist(ge)}return!0}function QM(n){for(var o=0,u=0;u<n.length-1;u++)o+=n[u].dist(n[u+1]);return o}function $M(n,o,u){return n?3/5*o*u:0}function e7(n,o){return Math.max(n?n.right-n.left:0,o?o.right-o.left:0)}function SX(n,o,u,p,x,A){for(var k=$M(u,x,A),F=e7(u,p)*A,Y=0,j=QM(n)/2,Q=0;Q<n.length-1;Q++){var ne=n[Q],ge=n[Q+1],ve=ne.dist(ge);if(Y+ve>j){var Ce=(j-Y)/ve,qe=pn(ne.x,ge.x,Ce),ft=pn(ne.y,ge.y,Ce),tt=new o0(qe,ft,ge.angleTo(ne),Q);return tt._round(),!k||KM(n,tt,F,k,o)?tt:void 0}Y+=ve}}function kX(n,o,u,p,x,A,k,F,Y){var j=$M(p,A,k),Q=e7(p,x),ne=Q*k,ge=n[0].x===0||n[0].x===Y||n[0].y===0||n[0].y===Y;o-ne<o/4&&(o=ne+o/4);var ve=A*2,Ce=ge?o/2*F%o:(Q/2+ve)*k*F%o;return t7(n,Ce,o,j,u,ne,ge,!1,Y)}function t7(n,o,u,p,x,A,k,F,Y){for(var j=A/2,Q=QM(n),ne=0,ge=o-u,ve=[],Ce=0;Ce<n.length-1;Ce++){for(var qe=n[Ce],ft=n[Ce+1],tt=qe.dist(ft),St=ft.angleTo(qe);ge+u<ne+tt;){ge+=u;var gt=(ge-ne)/tt,At=pn(qe.x,ft.x,gt),Rt=pn(qe.y,ft.y,gt);if(At>=0&&At<Y&&Rt>=0&&Rt<Y&&ge-j>=0&&ge+j<=Q){var Jt=new o0(At,Rt,St,Ce);Jt._round(),(!p||KM(n,Jt,A,p,x))&&ve.push(Jt)}}ne+=tt}return!F&&!ve.length&&!k&&(ve=t7(n,ne/2,u,p,x,A,k,!0,Y)),ve}function r7(n,o,u,p,x){for(var A=[],k=0;k<n.length;k++)for(var F=n[k],Y=void 0,j=0;j<F.length-1;j++){var Q=F[j],ne=F[j+1];Q.x<o&&ne.x<o||(Q.x<o?Q=new v(o,Q.y+(ne.y-Q.y)*((o-Q.x)/(ne.x-Q.x)))._round():ne.x<o&&(ne=new v(o,Q.y+(ne.y-Q.y)*((o-Q.x)/(ne.x-Q.x)))._round()),!(Q.y<u&&ne.y<u)&&(Q.y<u?Q=new v(Q.x+(ne.x-Q.x)*((u-Q.y)/(ne.y-Q.y)),u)._round():ne.y<u&&(ne=new v(Q.x+(ne.x-Q.x)*((u-Q.y)/(ne.y-Q.y)),u)._round()),!(Q.x>=p&&ne.x>=p)&&(Q.x>=p?Q=new v(p,Q.y+(ne.y-Q.y)*((p-Q.x)/(ne.x-Q.x)))._round():ne.x>=p&&(ne=new v(p,Q.y+(ne.y-Q.y)*((p-Q.x)/(ne.x-Q.x)))._round()),!(Q.y>=x&&ne.y>=x)&&(Q.y>=x?Q=new v(Q.x+(ne.x-Q.x)*((x-Q.y)/(ne.y-Q.y)),x)._round():ne.y>=x&&(ne=new v(Q.x+(ne.x-Q.x)*((x-Q.y)/(ne.y-Q.y)),x)._round()),(!Y||!Q.equals(Y[Y.length-1]))&&(Y=[Q],A.push(Y)),Y.push(ne)))))}return A}var s0=ps;function a7(n,o,u,p){var x=[],A=n.image,k=A.pixelRatio,F=A.paddedRect.w-2*s0,Y=A.paddedRect.h-2*s0,j=n.right-n.left,Q=n.bottom-n.top,ne=A.stretchX||[[0,F]],ge=A.stretchY||[[0,Y]],ve=function(Xa,Va){return Xa+Va[1]-Va[0]},Ce=ne.reduce(ve,0),qe=ge.reduce(ve,0),ft=F-Ce,tt=Y-qe,St=0,gt=Ce,At=0,Rt=qe,Jt=0,dr=ft,cr=0,Fr=tt;if(A.content&&p){var Cr=A.content;St=H1(ne,0,Cr[0]),At=H1(ge,0,Cr[1]),gt=H1(ne,Cr[0],Cr[2]),Rt=H1(ge,Cr[1],Cr[3]),Jt=Cr[0]-St,cr=Cr[1]-At,dr=Cr[2]-Cr[0]-gt,Fr=Cr[3]-Cr[1]-Rt}var Ir=function(Xa,Va,Si,zi){var rn=G1(Xa.stretch-St,gt,j,n.left),fn=Z1(Xa.fixed-Jt,dr,Xa.stretch,Ce),Yn=G1(Va.stretch-At,Rt,Q,n.top),kn=Z1(Va.fixed-cr,Fr,Va.stretch,qe),wo=G1(Si.stretch-St,gt,j,n.left),To=Z1(Si.fixed-Jt,dr,Si.stretch,Ce),Wn=G1(zi.stretch-At,Rt,Q,n.top),Io=Z1(zi.fixed-cr,Fr,zi.stretch,qe),Ro=new v(rn,Yn),Bn=new v(wo,Yn),Fo=new v(wo,Wn),Rs=new v(rn,Wn),mc=new v(fn/k,kn/k),Mh=new v(To/k,Io/k),Sh=o*Math.PI/180;if(Sh){var kh=Math.sin(Sh),p0=Math.cos(Sh),Hl=[p0,-kh,kh,p0];Ro._matMult(Hl),Bn._matMult(Hl),Rs._matMult(Hl),Fo._matMult(Hl)}var K1=Xa.stretch+Xa.fixed,H3=Si.stretch+Si.fixed,Q1=Va.stretch+Va.fixed,G3=zi.stretch+zi.fixed,rl={x:A.paddedRect.x+s0+K1,y:A.paddedRect.y+s0+Q1,w:H3-K1,h:G3-Q1},m0=dr/k/j,$1=Fr/k/Q;return{tl:Ro,tr:Bn,bl:Rs,br:Fo,tex:rl,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mc,pixelOffsetBR:Mh,minFontScaleX:m0,minFontScaleY:$1,isSDF:u}};if(!p||!A.stretchX&&!A.stretchY)x.push(Ir({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:Y+1}));else for(var Qr=i7(ne,ft,Ce),qr=i7(ge,tt,qe),Br=0;Br<Qr.length-1;Br++)for(var ya=Qr[Br],Xr=Qr[Br+1],Ya=0;Ya<qr.length-1;Ya++){var gi=qr[Ya],Wa=qr[Ya+1];x.push(Ir(ya,gi,Xr,Wa))}return x}function H1(n,o,u){for(var p=0,x=0,A=n;x<A.length;x+=1){var k=A[x];p+=Math.max(o,Math.min(u,k[1]))-Math.max(o,Math.min(u,k[0]))}return p}function i7(n,o,u){for(var p=[{fixed:-s0,stretch:0}],x=0,A=n;x<A.length;x+=1){var k=A[x],F=k[0],Y=k[1],j=p[p.length-1];p.push({fixed:F-j.stretch,stretch:j.stretch}),p.push({fixed:F-j.stretch,stretch:j.stretch+(Y-F)})}return p.push({fixed:o+s0,stretch:u}),p}function G1(n,o,u,p){return n/o*u+p}function Z1(n,o,u,p){return n-o*u/p}function CX(n,o,u,p,x,A,k,F){for(var Y=p.layout.get("text-rotate").evaluate(A,{})*Math.PI/180,j=[],Q=0,ne=o.positionedLines;Q<ne.length;Q+=1)for(var ge=ne[Q],ve=0,Ce=ge.positionedGlyphs;ve<Ce.length;ve+=1){var qe=Ce[ve];if(qe.rect){var ft=qe.rect||{},tt=1,St=OM+tt,gt=!0,At=1,Rt=0,Jt=(x||F)&&qe.vertical,dr=qe.metrics.advance*qe.scale/2;if(F&&o.verticalizable){var cr=(qe.scale-1)*Qn,Fr=(Qn-qe.metrics.width*qe.scale)/2;Rt=ge.lineOffset/2-(qe.imageName?-Fr:cr)}if(qe.imageName){var Cr=k[qe.imageName];gt=Cr.sdf,At=Cr.pixelRatio,St=ps/At}var Ir=x?[qe.x+dr,qe.y]:[0,0],Qr=x?[0,0]:[qe.x+dr+u[0],qe.y+u[1]-Rt],qr=[0,0];Jt&&(qr=Qr,Qr=[0,0]);var Br=(qe.metrics.left-St)*qe.scale-dr+Qr[0],ya=(-qe.metrics.top-St)*qe.scale+Qr[1],Xr=Br+ft.w*qe.scale/At,Ya=ya+ft.h*qe.scale/At,gi=new v(Br,ya),Wa=new v(Xr,ya),Xa=new v(Br,Ya),Va=new v(Xr,Ya);if(Jt){var Si=new v(-dr,dr-Ay),zi=-Math.PI/2,rn=Qn/2-dr,fn=qe.imageName?rn:0,Yn=new v(5-Ay-rn,-fn),kn=new(Function.prototype.bind.apply(v,[null].concat(qr)));gi._rotateAround(zi,Si)._add(Yn)._add(kn),Wa._rotateAround(zi,Si)._add(Yn)._add(kn),Xa._rotateAround(zi,Si)._add(Yn)._add(kn),Va._rotateAround(zi,Si)._add(Yn)._add(kn)}if(Y){var wo=Math.sin(Y),To=Math.cos(Y),Wn=[To,-wo,wo,To];gi._matMult(Wn),Wa._matMult(Wn),Xa._matMult(Wn),Va._matMult(Wn)}var Io=new v(0,0),Ro=new v(0,0),Bn=0,Fo=0;j.push({tl:gi,tr:Wa,bl:Xa,br:Va,tex:ft,writingMode:o.writingMode,glyphOffset:Ir,sectionIndex:qe.sectionIndex,isSDF:gt,pixelOffsetTL:Io,pixelOffsetBR:Ro,minFontScaleX:Bn,minFontScaleY:Fo})}}return j}var Y1=function(o,u,p,x,A,k,F,Y,j,Q){if(this.boxStartIndex=o.length,j){var ne=k.top,ge=k.bottom,ve=k.collisionPadding;ve&&(ne-=ve[1],ge+=ve[3]);var Ce=ge-ne;Ce>0&&(Ce=Math.max(10,Ce),this.circleDiameter=Ce)}else{var qe=k.top*F-Y,ft=k.bottom*F+Y,tt=k.left*F-Y,St=k.right*F+Y,gt=k.collisionPadding;if(gt&&(tt-=gt[0]*F,qe-=gt[1]*F,St+=gt[2]*F,ft+=gt[3]*F),Q){var At=new v(tt,qe),Rt=new v(St,qe),Jt=new v(tt,ft),dr=new v(St,ft),cr=Q*Math.PI/180;At._rotate(cr),Rt._rotate(cr),Jt._rotate(cr),dr._rotate(cr),tt=Math.min(At.x,Rt.x,Jt.x,dr.x),St=Math.max(At.x,Rt.x,Jt.x,dr.x),qe=Math.min(At.y,Rt.y,Jt.y,dr.y),ft=Math.max(At.y,Rt.y,Jt.y,dr.y)}o.emplaceBack(u.x,u.y,tt,qe,St,ft,p,x,A)}this.boxEndIndex=o.length},l0=function(o,u){if(o===void 0&&(o=[]),u===void 0&&(u=EX),this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(var p=(this.length>>1)-1;p>=0;p--)this._down(p)};l0.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},l0.prototype.pop=function(){if(this.length!==0){var o=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),o}},l0.prototype.peek=function(){return this.data[0]},l0.prototype._up=function(o){for(var u=this,p=u.data,x=u.compare,A=p[o];o>0;){var k=o-1>>1,F=p[k];if(x(A,F)>=0)break;p[o]=F,o=k}p[o]=A},l0.prototype._down=function(o){for(var u=this,p=u.data,x=u.compare,A=this.length>>1,k=p[o];o<A;){var F=(o<<1)+1,Y=p[F],j=F+1;if(j<this.length&&x(p[j],Y)<0&&(F=j,Y=p[j]),x(Y,k)>=0)break;p[o]=Y,o=F}p[o]=k};function EX(n,o){return n<o?-1:n>o?1:0}function LX(n,o,u){o===void 0&&(o=1),u===void 0&&(u=!1);for(var p=1/0,x=1/0,A=-1/0,k=-1/0,F=n[0],Y=0;Y<F.length;Y++){var j=F[Y];(!Y||j.x<p)&&(p=j.x),(!Y||j.y<x)&&(x=j.y),(!Y||j.x>A)&&(A=j.x),(!Y||j.y>k)&&(k=j.y)}var Q=A-p,ne=k-x,ge=Math.min(Q,ne),ve=ge/2,Ce=new l0([],DX);if(ge===0)return new v(p,x);for(var qe=p;qe<A;qe+=ge)for(var ft=x;ft<k;ft+=ge)Ce.push(new u0(qe+ve,ft+ve,ve,n));for(var tt=zX(n),St=Ce.length;Ce.length;){var gt=Ce.pop();(gt.d>tt.d||!tt.d)&&(tt=gt,u&&console.log("found best %d after %d probes",Math.round(1e4*gt.d)/1e4,St)),!(gt.max-tt.d<=o)&&(ve=gt.h/2,Ce.push(new u0(gt.p.x-ve,gt.p.y-ve,ve,n)),Ce.push(new u0(gt.p.x+ve,gt.p.y-ve,ve,n)),Ce.push(new u0(gt.p.x-ve,gt.p.y+ve,ve,n)),Ce.push(new u0(gt.p.x+ve,gt.p.y+ve,ve,n)),St+=4)}return u&&(console.log("num probes: "+St),console.log("best distance: "+tt.d)),tt.p}function DX(n,o){return o.max-n.max}function u0(n,o,u,p){this.p=new v(n,o),this.h=u,this.d=PX(this.p,p),this.max=this.d+this.h*Math.SQRT2}function PX(n,o){for(var u=!1,p=1/0,x=0;x<o.length;x++)for(var A=o[x],k=0,F=A.length,Y=F-1;k<F;Y=k++){var j=A[k],Q=A[Y];j.y>n.y!=Q.y>n.y&&n.x<(Q.x-j.x)*(n.y-j.y)/(Q.y-j.y)+j.x&&(u=!u),p=Math.min(p,hc(n,j,Q))}return(u?1:-1)*Math.sqrt(p)}function zX(n){for(var o=0,u=0,p=0,x=n[0],A=0,k=x.length,F=k-1;A<k;F=A++){var Y=x[A],j=x[F],Q=Y.x*j.y-j.x*Y.y;u+=(Y.x+j.x)*Q,p+=(Y.y+j.y)*Q,o+=Q*3}return new u0(u/o,p/o,0,n)}var f0=7,F3=Number.POSITIVE_INFINITY;function n7(n,o){function u(x,A){var k=0,F=0;A<0&&(A=0);var Y=A/Math.sqrt(2);switch(x){case"top-right":case"top-left":F=Y-f0;break;case"bottom-right":case"bottom-left":F=-Y+f0;break;case"bottom":F=-A+f0;break;case"top":F=A-f0;break}switch(x){case"top-right":case"bottom-right":k=-Y;break;case"top-left":case"bottom-left":k=Y;break;case"left":k=A;break;case"right":k=-A;break}return[k,F]}function p(x,A,k){var F=0,Y=0;switch(A=Math.abs(A),k=Math.abs(k),x){case"top-right":case"top-left":case"top":Y=k-f0;break;case"bottom-right":case"bottom-left":case"bottom":Y=-k+f0;break}switch(x){case"top-right":case"bottom-right":case"right":F=-A;break;case"top-left":case"bottom-left":case"left":F=A;break}return[F,Y]}return o[1]!==F3?p(n,o[0],o[1]):u(n,o[0])}function IX(n,o,u,p,x,A,k){n.createArrays();var F=512*n.overscaling;n.tilePixelRatio=Nr/F,n.compareText={},n.iconsNeedLinear=!1;var Y=n.layers[0].layout,j=n.layers[0]._unevaluatedLayout._values,Q={};if(n.textSizeData.kind==="composite"){var ne=n.textSizeData,ge=ne.minZoom,ve=ne.maxZoom;Q.compositeTextSizes=[j["text-size"].possiblyEvaluate(new jt(ge),k),j["text-size"].possiblyEvaluate(new jt(ve),k)]}if(n.iconSizeData.kind==="composite"){var Ce=n.iconSizeData,qe=Ce.minZoom,ft=Ce.maxZoom;Q.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new jt(qe),k),j["icon-size"].possiblyEvaluate(new jt(ft),k)]}Q.layoutTextSize=j["text-size"].possiblyEvaluate(new jt(n.zoom+1),k),Q.layoutIconSize=j["icon-size"].possiblyEvaluate(new jt(n.zoom+1),k),Q.textMaxSize=j["text-size"].possiblyEvaluate(new jt(18));for(var tt=Y.get("text-line-height")*Qn,St=Y.get("text-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",gt=Y.get("text-keep-upright"),At=Y.get("text-size"),Rt=function(){var cr=dr[Jt],Fr=Y.get("text-font").evaluate(cr,{},k).join(","),Cr=At.evaluate(cr,{},k),Ir=Q.layoutTextSize.evaluate(cr,{},k),Qr=Q.layoutIconSize.evaluate(cr,{},k),qr={horizontal:{},vertical:void 0},Br=cr.text,ya=[0,0];if(Br){var Xr=Br.toString(),Ya=Y.get("text-letter-spacing").evaluate(cr,{},k)*Qn,gi=ye(Xr)?Ya:0,Wa=Y.get("text-anchor").evaluate(cr,{},k),Xa=Y.get("text-variable-anchor");if(!Xa){var Va=Y.get("text-radial-offset").evaluate(cr,{},k);Va?ya=n7(Wa,[Va*Qn,F3]):ya=Y.get("text-offset").evaluate(cr,{},k).map(function(mc){return mc*Qn})}var Si=St?"center":Y.get("text-justify").evaluate(cr,{},k),zi=Y.get("symbol-placement"),rn=zi==="point"?Y.get("text-max-width").evaluate(cr,{},k)*Qn:0,fn=function(){n.allowVerticalPlacement&&ae(Xr)&&(qr.vertical=V1(Br,o,u,x,Fr,rn,tt,Wa,"left",gi,ya,Is.vertical,!0,zi,Ir,Cr))};if(!St&&Xa){for(var Yn=Si==="auto"?Xa.map(function(mc){return q3(mc)}):[Si],kn=!1,wo=0;wo<Yn.length;wo++){var To=Yn[wo];if(!qr.horizontal[To])if(kn)qr.horizontal[To]=qr.horizontal[0];else{var Wn=V1(Br,o,u,x,Fr,rn,tt,"center",To,gi,ya,Is.horizontal,!1,zi,Ir,Cr);Wn&&(qr.horizontal[To]=Wn,kn=Wn.positionedLines.length===1)}}fn()}else{Si==="auto"&&(Si=q3(Wa));var Io=V1(Br,o,u,x,Fr,rn,tt,Wa,Si,gi,ya,Is.horizontal,!1,zi,Ir,Cr);Io&&(qr.horizontal[Si]=Io),fn(),ae(Xr)&&St&&gt&&(qr.vertical=V1(Br,o,u,x,Fr,rn,tt,Wa,Si,gi,ya,Is.vertical,!1,zi,Ir,Cr))}}var Ro=void 0,Bn=!1;if(cr.icon&&cr.icon.name){var Fo=p[cr.icon.name];Fo&&(Ro=AX(x[cr.icon.name],Y.get("icon-offset").evaluate(cr,{},k),Y.get("icon-anchor").evaluate(cr,{},k)),Bn=Fo.sdf,n.sdfIcons===void 0?n.sdfIcons=Fo.sdf:n.sdfIcons!==Fo.sdf&&ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fo.pixelRatio!==n.pixelRatio||Y.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}var Rs=s7(qr.horizontal)||qr.vertical;n.iconsInText=Rs?Rs.iconsInText:!1,(Rs||Ro)&&RX(n,cr,qr,Ro,p,Q,Ir,Qr,ya,Bn,k)},Jt=0,dr=n.features;Jt<dr.length;Jt+=1)Rt();A&&n.generateCollisionDebugBuffers()}function q3(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function RX(n,o,u,p,x,A,k,F,Y,j,Q){var ne=A.textMaxSize.evaluate(o,{});ne===void 0&&(ne=k);var ge=n.layers[0].layout,ve=ge.get("icon-offset").evaluate(o,{},Q),Ce=s7(u.horizontal),qe=24,ft=k/qe,tt=n.tilePixelRatio*ft,St=n.tilePixelRatio*ne/qe,gt=n.tilePixelRatio*F,At=n.tilePixelRatio*ge.get("symbol-spacing"),Rt=ge.get("text-padding")*n.tilePixelRatio,Jt=ge.get("icon-padding")*n.tilePixelRatio,dr=ge.get("text-max-angle")/180*Math.PI,cr=ge.get("text-rotation-alignment")==="map"&&ge.get("symbol-placement")!=="point",Fr=ge.get("icon-rotation-alignment")==="map"&&ge.get("symbol-placement")!=="point",Cr=ge.get("symbol-placement"),Ir=At/2,Qr=ge.get("icon-text-fit"),qr;p&&Qr!=="none"&&(n.allowVerticalPlacement&&u.vertical&&(qr=XM(p,u.vertical,Qr,ge.get("icon-text-fit-padding"),ve,ft)),Ce&&(p=XM(p,Ce,Qr,ge.get("icon-text-fit-padding"),ve,ft)));var Br=function(p0,Hl){Hl.x<0||Hl.x>=Nr||Hl.y<0||Hl.y>=Nr||FX(n,Hl,p0,u,p,x,qr,n.layers[0],n.collisionBoxArray,o.index,o.sourceLayerIndex,n.index,tt,Rt,cr,Y,gt,Jt,Fr,ve,o,A,j,Q,k)};if(Cr==="line")for(var ya=0,Xr=r7(o.geometry,0,0,Nr,Nr);ya<Xr.length;ya+=1)for(var Ya=Xr[ya],gi=kX(Ya,At,dr,u.vertical||Ce,p,qe,St,n.overscaling,Nr),Wa=0,Xa=gi;Wa<Xa.length;Wa+=1){var Va=Xa[Wa],Si=Ce;(!Si||!qX(n,Si.text,Ir,Va))&&Br(Ya,Va)}else if(Cr==="line-center")for(var zi=0,rn=o.geometry;zi<rn.length;zi+=1){var fn=rn[zi];if(fn.length>1){var Yn=SX(fn,dr,u.vertical||Ce,p,qe,St);Yn&&Br(fn,Yn)}}else if(o.type==="Polygon")for(var kn=0,wo=k3(o.geometry,0);kn<wo.length;kn+=1){var To=wo[kn],Wn=LX(To,16);Br(To[0],new o0(Wn.x,Wn.y,0))}else if(o.type==="LineString")for(var Io=0,Ro=o.geometry;Io<Ro.length;Io+=1){var Bn=Ro[Io];Br(Bn,new o0(Bn[0].x,Bn[0].y,0))}else if(o.type==="Point")for(var Fo=0,Rs=o.geometry;Fo<Rs.length;Fo+=1)for(var mc=Rs[Fo],Mh=0,Sh=mc;Mh<Sh.length;Mh+=1){var kh=Sh[Mh];Br([kh],new o0(kh.x,kh.y,0))}}var My=255,Th=My*Pu;function o7(n,o,u,p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce){var qe=CX(o,u,F,x,A,k,p,n.allowVerticalPlacement),ft=n.textSizeData,tt=null;ft.kind==="source"?(tt=[Pu*x.layout.get("text-size").evaluate(k,{})],tt[0]>Th&&ke(n.layerIds[0]+': Value for "text-size" is >= '+My+'. Reduce your "text-size".')):ft.kind==="composite"&&(tt=[Pu*ve.compositeTextSizes[0].evaluate(k,{},Ce),Pu*ve.compositeTextSizes[1].evaluate(k,{},Ce)],(tt[0]>Th||tt[1]>Th)&&ke(n.layerIds[0]+': Value for "text-size" is >= '+My+'. Reduce your "text-size".')),n.addSymbols(n.text,qe,tt,F,A,k,j,o,Y.lineStartIndex,Y.lineLength,ge,Ce);for(var St=0,gt=Q;St<gt.length;St+=1){var At=gt[St];ne[At]=n.text.placedSymbolArray.length-1}return qe.length*4}function s7(n){for(var o in n)return n[o];return null}function FX(n,o,u,p,x,A,k,F,Y,j,Q,ne,ge,ve,Ce,qe,ft,tt,St,gt,At,Rt,Jt,dr,cr){var Fr,Cr=n.addToLineVertexArray(o,u),Ir,Qr,qr,Br,ya=0,Xr=0,Ya=0,gi=0,Wa=-1,Xa=-1,Va={},Si=w(""),zi=0,rn=0;if(F._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Fr=F.layout.get("text-offset").evaluate(At,{},dr).map(function(Cy){return Cy*Qn}),zi=Fr[0],rn=Fr[1]):(zi=F.layout.get("text-radial-offset").evaluate(At,{},dr)*Qn,rn=F3),n.allowVerticalPlacement&&p.vertical){var fn=F.layout.get("text-rotate").evaluate(At,{},dr),Yn=fn+90,kn=p.vertical;qr=new Y1(Y,o,j,Q,ne,kn,ge,ve,Ce,Yn),k&&(Br=new Y1(Y,o,j,Q,ne,k,ft,tt,Ce,Yn))}if(x){var wo=F.layout.get("icon-rotate").evaluate(At,{}),To=F.layout.get("icon-text-fit")!=="none",Wn=a7(x,wo,Jt,To),Io=k?a7(k,wo,Jt,To):void 0;Qr=new Y1(Y,o,j,Q,ne,x,ft,tt,!1,wo),ya=Wn.length*4;var Ro=n.iconSizeData,Bn=null;Ro.kind==="source"?(Bn=[Pu*F.layout.get("icon-size").evaluate(At,{})],Bn[0]>Th&&ke(n.layerIds[0]+': Value for "icon-size" is >= '+My+'. Reduce your "icon-size".')):Ro.kind==="composite"&&(Bn=[Pu*Rt.compositeIconSizes[0].evaluate(At,{},dr),Pu*Rt.compositeIconSizes[1].evaluate(At,{},dr)],(Bn[0]>Th||Bn[1]>Th)&&ke(n.layerIds[0]+': Value for "icon-size" is >= '+My+'. Reduce your "icon-size".')),n.addSymbols(n.icon,Wn,Bn,gt,St,At,!1,o,Cr.lineStartIndex,Cr.lineLength,-1,dr),Wa=n.icon.placedSymbolArray.length-1,Io&&(Xr=Io.length*4,n.addSymbols(n.icon,Io,Bn,gt,St,At,Is.vertical,o,Cr.lineStartIndex,Cr.lineLength,-1,dr),Xa=n.icon.placedSymbolArray.length-1)}for(var Fo in p.horizontal){var Rs=p.horizontal[Fo];if(!Ir){Si=w(Rs.text);var mc=F.layout.get("text-rotate").evaluate(At,{},dr);Ir=new Y1(Y,o,j,Q,ne,Rs,ge,ve,Ce,mc)}var Mh=Rs.positionedLines.length===1;if(Ya+=o7(n,o,Rs,A,F,Ce,At,qe,Cr,p.vertical?Is.horizontal:Is.horizontalOnly,Mh?Object.keys(p.horizontal):[Fo],Va,Wa,Rt,dr),Mh)break}p.vertical&&(gi+=o7(n,o,p.vertical,A,F,Ce,At,qe,Cr,Is.vertical,["vertical"],Va,Xa,Rt,dr));var Sh=Ir?Ir.boxStartIndex:n.collisionBoxArray.length,kh=Ir?Ir.boxEndIndex:n.collisionBoxArray.length,p0=qr?qr.boxStartIndex:n.collisionBoxArray.length,Hl=qr?qr.boxEndIndex:n.collisionBoxArray.length,K1=Qr?Qr.boxStartIndex:n.collisionBoxArray.length,H3=Qr?Qr.boxEndIndex:n.collisionBoxArray.length,Q1=Br?Br.boxStartIndex:n.collisionBoxArray.length,G3=Br?Br.boxEndIndex:n.collisionBoxArray.length,rl=-1,m0=function(Cy,T7){return Cy&&Cy.circleDiameter?Math.max(Cy.circleDiameter,T7):T7};rl=m0(Ir,rl),rl=m0(qr,rl),rl=m0(Qr,rl),rl=m0(Br,rl);var $1=rl>-1?1:0;$1&&(rl*=cr/Qn),n.glyphOffsetArray.length>=yi.MAX_GLYPHS&&ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),At.sortKey!==void 0&&n.addToSortKeyRanges(n.symbolInstances.length,At.sortKey),n.symbolInstances.emplaceBack(o.x,o.y,Va.right>=0?Va.right:-1,Va.center>=0?Va.center:-1,Va.left>=0?Va.left:-1,Va.vertical||-1,Wa,Xa,Si,Sh,kh,p0,Hl,K1,H3,Q1,G3,j,Ya,gi,ya,Xr,$1,0,ge,zi,rn,rl)}function qX(n,o,u,p){var x=n.compareText;if(!(o in x))x[o]=[];else for(var A=x[o],k=A.length-1;k>=0;k--)if(p.dist(A[k])<u)return!0;return x[o].push(p),!1}var NX=r0.VectorTileFeature.types,BX=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function W1(n,o,u,p,x,A,k,F,Y,j,Q,ne,ge){var ve=F?Math.min(Th,Math.round(F[0])):0,Ce=F?Math.min(Th,Math.round(F[1])):0;n.emplaceBack(o,u,Math.round(p*32),Math.round(x*32),A,k,(ve<<1)+(Y?1:0),Ce,j*16,Q*16,ne*256,ge*256)}function N3(n,o,u){n.emplaceBack(o.x,o.y,u),n.emplaceBack(o.x,o.y,u),n.emplaceBack(o.x,o.y,u),n.emplaceBack(o.x,o.y,u)}function OX(n){for(var o=0,u=n.sections;o<u.length;o+=1){var p=u[o];if(ct(p.text))return!0}return!1}var c0=function(o){this.layoutVertexArray=new wf,this.indexArray=new Cu,this.programConfigurations=o,this.segments=new Tn,this.dynamicLayoutVertexArray=new ly,this.opacityVertexArray=new uy,this.placedSymbolArray=new hy};c0.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},c0.prototype.upload=function(o,u,p,x){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,OW.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,UW.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,BX,!0),this.opacityVertexBuffer.itemSize=1),(p||x)&&this.programConfigurations.upload(o))},c0.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},y("SymbolBuffers",c0);var Sy=function(o,u,p){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new p,this.segments=new Tn,this.collisionVertexArray=new Ko};Sy.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,VW.members,!0)},Sy.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},y("CollisionBuffers",Sy);var yi=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(Y){return Y.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Kp([]),this.placementViewportMatrix=Kp([]);var u=this.layers[0],p=u._unevaluatedLayout._values;this.textSizeData=R3(this.zoom,p["text-size"]),this.iconSizeData=R3(this.zoom,p["icon-size"]);var x=this.layers[0].layout,A=x.get("symbol-sort-key"),k=x.get("symbol-z-order");this.canOverlap=x.get("text-allow-overlap")||x.get("icon-allow-overlap")||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&A.constantOr(1)!==void 0;var F=k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=F&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(function(Y){return Is[Y]})),this.stateDependentLayerIds=this.layers.filter(function(Y){return Y.isStateDependent()}).map(function(Y){return Y.id}),this.sourceID=o.sourceID};yi.prototype.createArrays=function(){this.text=new c0(new kr(this.layers,this.zoom,function(o){return/^text/.test(o)})),this.icon=new c0(new kr(this.layers,this.zoom,function(o){return/^icon/.test(o)})),this.glyphOffsetArray=new E1,this.lineVertexArray=new Qs,this.symbolInstances=new C1},yi.prototype.calculateGlyphDependencies=function(o,u,p,x,A){for(var k=0;k<o.length;k++)if(u[o.charCodeAt(k)]=!0,(p||x)&&A){var F=by[o.charAt(k)];F&&(u[F.charCodeAt(0)]=!0)}},yi.prototype.populate=function(o,u,p){var x=this.layers[0],A=x.layout,k=A.get("text-font"),F=A.get("text-field"),Y=A.get("icon-image"),j=(F.value.kind!=="constant"||F.value.value instanceof xn&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),Q=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,ne=A.get("symbol-sort-key");if(this.features=[],!(!j&&!Q)){for(var ge=u.iconDependencies,ve=u.glyphDependencies,Ce=u.availableImages,qe=new jt(this.zoom),ft=0,tt=o;ft<tt.length;ft+=1){var St=tt[ft],gt=St.feature,At=St.id,Rt=St.index,Jt=St.sourceLayerIndex,dr=x._featureFilter.needGeometry,cr=Mi(gt,dr);if(x._featureFilter.filter(qe,cr,p)){dr||(cr.geometry=Ua(gt));var Fr=void 0;if(j){var Cr=x.getValueAndResolveTokens("text-field",cr,p,Ce),Ir=xn.factory(Cr);OX(Ir)&&(this.hasRTLText=!0),(!this.hasRTLText||ea()==="unavailable"||this.hasRTLText&&ei.isParsed())&&(Fr=ZW(Ir,x,cr))}var Qr=void 0;if(Q){var qr=x.getValueAndResolveTokens("icon-image",cr,p,Ce);qr instanceof Rn?Qr=qr:Qr=Rn.fromString(qr)}if(!(!Fr&&!Qr)){var Br=this.sortFeaturesByKey?ne.evaluate(cr,{},p):void 0,ya={id:At,text:Fr,icon:Qr,index:Rt,sourceLayerIndex:Jt,geometry:cr.geometry,properties:gt.properties,type:NX[gt.type],sortKey:Br};if(this.features.push(ya),Qr&&(ge[Qr.name]=!0),Fr){var Xr=k.evaluate(cr,{},p).join(","),Ya=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Is.vertical)>=0;for(var gi=0,Wa=Fr.sections;gi<Wa.length;gi+=1){var Xa=Wa[gi];if(Xa.image)ge[Xa.image.name]=!0;else{var Va=ae(Fr.toString()),Si=Xa.fontStack||Xr,zi=ve[Si]=ve[Si]||{};this.calculateGlyphDependencies(Xa.text,zi,Ya,this.allowVerticalPlacement,Va)}}}}}}A.get("symbol-placement")==="line"&&(this.features=YW(this.features)),this.sortFeaturesByKey&&this.features.sort(function(rn,fn){return rn.sortKey-fn.sortKey})}},yi.prototype.update=function(o,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,p))},yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yi.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yi.prototype.addToLineVertexArray=function(o,u){var p=this.lineVertexArray.length;if(o.segment!==void 0){for(var x=o.dist(u[o.segment+1]),A=o.dist(u[o.segment]),k={},F=o.segment+1;F<u.length;F++)k[F]={x:u[F].x,y:u[F].y,tileUnitDistanceFromAnchor:x},F<u.length-1&&(x+=u[F+1].dist(u[F]));for(var Y=o.segment||0;Y>=0;Y--)k[Y]={x:u[Y].x,y:u[Y].y,tileUnitDistanceFromAnchor:A},Y>0&&(A+=u[Y-1].dist(u[Y]));for(var j=0;j<u.length;j++){var Q=k[j];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}},yi.prototype.addSymbols=function(o,u,p,x,A,k,F,Y,j,Q,ne,ge){for(var ve=o.indexArray,Ce=o.layoutVertexArray,qe=o.segments.prepareSegment(4*u.length,Ce,ve,this.canOverlap?k.sortKey:void 0),ft=this.glyphOffsetArray.length,tt=qe.vertexLength,St=this.allowVerticalPlacement&&F===Is.vertical?Math.PI/2:0,gt=k.text&&k.text.sections,At=0;At<u.length;At++){var Rt=u[At],Jt=Rt.tl,dr=Rt.tr,cr=Rt.bl,Fr=Rt.br,Cr=Rt.tex,Ir=Rt.pixelOffsetTL,Qr=Rt.pixelOffsetBR,qr=Rt.minFontScaleX,Br=Rt.minFontScaleY,ya=Rt.glyphOffset,Xr=Rt.isSDF,Ya=Rt.sectionIndex,gi=qe.vertexLength,Wa=ya[1];W1(Ce,Y.x,Y.y,Jt.x,Wa+Jt.y,Cr.x,Cr.y,p,Xr,Ir.x,Ir.y,qr,Br),W1(Ce,Y.x,Y.y,dr.x,Wa+dr.y,Cr.x+Cr.w,Cr.y,p,Xr,Qr.x,Ir.y,qr,Br),W1(Ce,Y.x,Y.y,cr.x,Wa+cr.y,Cr.x,Cr.y+Cr.h,p,Xr,Ir.x,Qr.y,qr,Br),W1(Ce,Y.x,Y.y,Fr.x,Wa+Fr.y,Cr.x+Cr.w,Cr.y+Cr.h,p,Xr,Qr.x,Qr.y,qr,Br),N3(o.dynamicLayoutVertexArray,Y,St),ve.emplaceBack(gi,gi+1,gi+2),ve.emplaceBack(gi+1,gi+2,gi+3),qe.vertexLength+=4,qe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ya[0]),(At===u.length-1||Ya!==u[At+1].sectionIndex)&&o.programConfigurations.populatePaintArrays(Ce.length,k,k.index,{},ge,gt&&gt[Ya])}o.placedSymbolArray.emplaceBack(Y.x,Y.y,ft,this.glyphOffsetArray.length-ft,tt,j,Q,Y.segment,p?p[0]:0,p?p[1]:0,x[0],x[1],F,0,!1,0,ne)},yi.prototype._addCollisionDebugVertex=function(o,u,p,x,A,k){return u.emplaceBack(0,0),o.emplaceBack(p.x,p.y,x,A,Math.round(k.x),Math.round(k.y))},yi.prototype.addCollisionDebugVertices=function(o,u,p,x,A,k,F){var Y=A.segments.prepareSegment(4,A.layoutVertexArray,A.indexArray),j=Y.vertexLength,Q=A.layoutVertexArray,ne=A.collisionVertexArray,ge=F.anchorX,ve=F.anchorY;this._addCollisionDebugVertex(Q,ne,k,ge,ve,new v(o,u)),this._addCollisionDebugVertex(Q,ne,k,ge,ve,new v(p,u)),this._addCollisionDebugVertex(Q,ne,k,ge,ve,new v(p,x)),this._addCollisionDebugVertex(Q,ne,k,ge,ve,new v(o,x)),Y.vertexLength+=4;var Ce=A.indexArray;Ce.emplaceBack(j,j+1),Ce.emplaceBack(j+1,j+2),Ce.emplaceBack(j+2,j+3),Ce.emplaceBack(j+3,j),Y.primitiveLength+=4},yi.prototype.addDebugCollisionBoxes=function(o,u,p,x){for(var A=o;A<u;A++){var k=this.collisionBoxArray.get(A),F=k.x1,Y=k.y1,j=k.x2,Q=k.y2;this.addCollisionDebugVertices(F,Y,j,Q,x?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,p)}},yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sy(Zp,RM.members,ed),this.iconCollisionBox=new Sy(Zp,RM.members,ed);for(var o=0;o<this.symbolInstances.length;o++){var u=this.symbolInstances.get(o);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}},yi.prototype._deserializeCollisionBoxesForSymbol=function(o,u,p,x,A,k,F,Y,j){for(var Q={},ne=u;ne<p;ne++){var ge=o.get(ne);Q.textBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},Q.textFeatureIndex=ge.featureIndex;break}for(var ve=x;ve<A;ve++){var Ce=o.get(ve);Q.verticalTextBox={x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,anchorPointX:Ce.anchorPointX,anchorPointY:Ce.anchorPointY},Q.verticalTextFeatureIndex=Ce.featureIndex;break}for(var qe=k;qe<F;qe++){var ft=o.get(qe);Q.iconBox={x1:ft.x1,y1:ft.y1,x2:ft.x2,y2:ft.y2,anchorPointX:ft.anchorPointX,anchorPointY:ft.anchorPointY},Q.iconFeatureIndex=ft.featureIndex;break}for(var tt=Y;tt<j;tt++){var St=o.get(tt);Q.verticalIconBox={x1:St.x1,y1:St.y1,x2:St.x2,y2:St.y2,anchorPointX:St.anchorPointX,anchorPointY:St.anchorPointY},Q.verticalIconFeatureIndex=St.featureIndex;break}return Q},yi.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var u=0;u<this.symbolInstances.length;u++){var p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}},yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yi.prototype.addIndicesForPlacedSymbol=function(o,u){for(var p=o.placedSymbolArray.get(u),x=p.vertexStartIndex+p.numGlyphs*4,A=p.vertexStartIndex;A<x;A+=4)o.indexArray.emplaceBack(A,A+1,A+2),o.indexArray.emplaceBack(A+1,A+2,A+3)},yi.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var u=Math.sin(o),p=Math.cos(o),x=[],A=[],k=[],F=0;F<this.symbolInstances.length;++F){k.push(F);var Y=this.symbolInstances.get(F);x.push(Math.round(u*Y.anchorX+p*Y.anchorY)|0),A.push(Y.featureIndex)}return k.sort(function(j,Q){return x[j]-x[Q]||A[Q]-A[j]}),k},yi.prototype.addToSortKeyRanges=function(o,u){var p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})},yi.prototype.sortFeatures=function(o){var u=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var p=0,x=this.symbolInstanceIndexes;p<x.length;p+=1){var A=x[p],k=this.symbolInstances.get(A);this.featureSortOrder.push(k.featureIndex),[k.rightJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.leftJustifiedTextSymbolIndex].forEach(function(F,Y,j){F>=0&&j.indexOf(F)===Y&&u.addIndicesForPlacedSymbol(u.text,F)}),k.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,k.verticalPlacedTextSymbolIndex),k.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.placedIconSymbolIndex),k.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},y("SymbolBucket",yi,{omit:["layers","collisionBoxArray","features","compareText"]}),yi.MAX_GLYPHS=65535,yi.addDynamicAttributes=N3;function UX(n,o){return o.replace(/{([^{}]+)}/g,function(u,p){return p in n?String(n[p]):""})}var VX=new qn({"symbol-placement":new Tr(Xt.layout_symbol["symbol-placement"]),"symbol-spacing":new Tr(Xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tr(Xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr(Xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tr(Xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tr(Xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Tr(Xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tr(Xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tr(Xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr(Xt.layout_symbol["icon-size"]),"icon-text-fit":new Tr(Xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tr(Xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr(Xt.layout_symbol["icon-image"]),"icon-rotate":new Hr(Xt.layout_symbol["icon-rotate"]),"icon-padding":new Tr(Xt.layout_symbol["icon-padding"]),"icon-keep-upright":new Tr(Xt.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr(Xt.layout_symbol["icon-offset"]),"icon-anchor":new Hr(Xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tr(Xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tr(Xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tr(Xt.layout_symbol["text-rotation-alignment"]),"text-field":new Hr(Xt.layout_symbol["text-field"]),"text-font":new Hr(Xt.layout_symbol["text-font"]),"text-size":new Hr(Xt.layout_symbol["text-size"]),"text-max-width":new Hr(Xt.layout_symbol["text-max-width"]),"text-line-height":new Tr(Xt.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr(Xt.layout_symbol["text-letter-spacing"]),"text-justify":new Hr(Xt.layout_symbol["text-justify"]),"text-radial-offset":new Hr(Xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tr(Xt.layout_symbol["text-variable-anchor"]),"text-anchor":new Hr(Xt.layout_symbol["text-anchor"]),"text-max-angle":new Tr(Xt.layout_symbol["text-max-angle"]),"text-writing-mode":new Tr(Xt.layout_symbol["text-writing-mode"]),"text-rotate":new Hr(Xt.layout_symbol["text-rotate"]),"text-padding":new Tr(Xt.layout_symbol["text-padding"]),"text-keep-upright":new Tr(Xt.layout_symbol["text-keep-upright"]),"text-transform":new Hr(Xt.layout_symbol["text-transform"]),"text-offset":new Hr(Xt.layout_symbol["text-offset"]),"text-allow-overlap":new Tr(Xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Tr(Xt.layout_symbol["text-ignore-placement"]),"text-optional":new Tr(Xt.layout_symbol["text-optional"])}),HX=new qn({"icon-opacity":new Hr(Xt.paint_symbol["icon-opacity"]),"icon-color":new Hr(Xt.paint_symbol["icon-color"]),"icon-halo-color":new Hr(Xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr(Xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr(Xt.paint_symbol["icon-halo-blur"]),"icon-translate":new Tr(Xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tr(Xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr(Xt.paint_symbol["text-opacity"]),"text-color":new Hr(Xt.paint_symbol["text-color"],{runtimeType:Ts,getOverride:function(n){return n.textColor},hasOverride:function(n){return!!n.textColor}}),"text-halo-color":new Hr(Xt.paint_symbol["text-halo-color"]),"text-halo-width":new Hr(Xt.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr(Xt.paint_symbol["text-halo-blur"]),"text-translate":new Tr(Xt.paint_symbol["text-translate"]),"text-translate-anchor":new Tr(Xt.paint_symbol["text-translate-anchor"])}),B3={paint:HX,layout:VX},h0=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:rf,this.defaultValue=o};h0.prototype.evaluate=function(o){if(o.formattedSection){var u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},h0.prototype.eachChild=function(o){if(!this.defaultValue.isConstant()){var u=this.defaultValue.value;o(u._styleExpression.expression)}},h0.prototype.outputDefined=function(){return!1},h0.prototype.serialize=function(){return null},y("FormatSectionOverride",h0,{omit:["defaultValue"]});var GX=function(n){function o(u){n.call(this,u,B3)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.recalculate=function(p,x){if(n.prototype.recalculate.call(this,p,x),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var A=this.layout.get("text-writing-mode");if(A){for(var k=[],F=0,Y=A;F<Y.length;F+=1){var j=Y[F];k.indexOf(j)<0&&k.push(j)}this.layout._values["text-writing-mode"]=k}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},o.prototype.getValueAndResolveTokens=function(p,x,A,k){var F=this.layout.get(p).evaluate(x,{},A,k),Y=this._unevaluatedLayout._values[p];return!Y.isDataDriven()&&!Au(Y.value)&&F?UX(x.properties,F):F},o.prototype.createBucket=function(p){return new yi(p)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype._setPaintOverrides=function(){for(var p=0,x=B3.paint.overridableProperties;p<x.length;p+=1){var A=x[p];if(o.hasPaintOverride(this.layout,A)){var k=this.paint.get(A),F=new h0(k),Y=new Il(F,k.property.specification),j=null;k.value.kind==="constant"||k.value.kind==="source"?j=new Cs("source",Y):j=new Es("composite",Y,k.value.zoomStops,k.value._interpolationType),this.paint._values[A]=new bi(k.property,j,k.parameters)}}},o.prototype._handleOverridablePaintPropertyUpdate=function(p,x,A){return!this.layout||x.isDataDriven()||A.isDataDriven()?!1:o.hasPaintOverride(this.layout,p)},o.hasPaintOverride=function(p,x){var A=p.get("text-field"),k=B3.paint.properties[x],F=!1,Y=function(ne){for(var ge=0,ve=ne;ge<ve.length;ge+=1){var Ce=ve[ge];if(k.overrides&&k.overrides.hasOverride(Ce)){F=!0;return}}};if(A.value.kind==="constant"&&A.value.value instanceof xn)Y(A.value.value.sections);else if(A.value.kind==="source"){var j=function(ne){if(!F)if(ne instanceof Yo&&sn(ne.value)===fs){var ge=ne.value;Y(ge.sections)}else ne instanceof Wo?Y(ne.sections):ne.eachChild(j)},Q=A.value;Q._styleExpression&&j(Q._styleExpression.expression)}return F},o}(pi),ZX=new qn({"background-color":new Tr(Xt.paint_background["background-color"]),"background-pattern":new Ai(Xt.paint_background["background-pattern"]),"background-opacity":new Tr(Xt.paint_background["background-opacity"])}),YX={paint:ZX},WX=function(n){function o(u){n.call(this,u,YX)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(pi),XX=new qn({"raster-opacity":new Tr(Xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tr(Xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tr(Xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tr(Xt.paint_raster["raster-brightness-max"]),"raster-saturation":new Tr(Xt.paint_raster["raster-saturation"]),"raster-contrast":new Tr(Xt.paint_raster["raster-contrast"]),"raster-resampling":new Tr(Xt.paint_raster["raster-resampling"]),"raster-fade-duration":new Tr(Xt.paint_raster["raster-fade-duration"])}),jX={paint:XX},JX=function(n){function o(u){n.call(this,u,jX)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(pi);function KX(n){var o=[],u=n.id;return u===void 0&&o.push({message:"layers."+u+': missing required property "id"'}),n.render===void 0&&o.push({message:"layers."+u+': missing required method "render"'}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&o.push({message:"layers."+u+': property "renderingMode" must be either "2d" or "3d"'}),o}var QX=function(n){function o(u){n.call(this,u,{}),this.implementation=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},o.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},o.prototype.recalculate=function(){},o.prototype.updateTransitions=function(){},o.prototype.hasTransition=function(){},o.prototype.serialize=function(){},o.prototype.onAdd=function(p){this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},o.prototype.onRemove=function(p){this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},o}(pi),$X={circle:wY,heatmap:SY,hillshade:EY,fill:tW,"fill-extrusion":wW,line:NW,symbol:GX,background:WX,raster:JX};function ej(n){return n.type==="custom"?new QX(n):new $X[n.type](n)}var l7=_.HTMLImageElement,u7=_.HTMLCanvasElement,f7=_.HTMLVideoElement,c7=_.ImageData,X1=_.ImageBitmap,id=function(o,u,p,x){this.context=o,this.format=p,this.texture=o.gl.createTexture(),this.update(u,x)};id.prototype.update=function(o,u,p){var x=o.width,A=o.height,k=(!this.size||this.size[0]!==x||this.size[1]!==A)&&!p,F=this,Y=F.context,j=Y.gl;if(this.useMipmap=!!(u&&u.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),Y.pixelStoreUnpackFlipY.set(!1),Y.pixelStoreUnpack.set(1),Y.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!u||u.premultiply!==!1)),k)this.size=[x,A],o instanceof l7||o instanceof u7||o instanceof f7||o instanceof c7||X1&&o instanceof X1?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,o):j.texImage2D(j.TEXTURE_2D,0,this.format,x,A,0,this.format,j.UNSIGNED_BYTE,o.data);else{var Q=p||{x:0,y:0},ne=Q.x,ge=Q.y;o instanceof l7||o instanceof u7||o instanceof f7||o instanceof c7||X1&&o instanceof X1?j.texSubImage2D(j.TEXTURE_2D,0,ne,ge,j.RGBA,j.UNSIGNED_BYTE,o):j.texSubImage2D(j.TEXTURE_2D,0,ne,ge,x,A,j.RGBA,j.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D)},id.prototype.bind=function(o,u,p){var x=this,A=x.context,k=A.gl;k.bindTexture(k.TEXTURE_2D,this.texture),p===k.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(p=k.LINEAR),o!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,o),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,p||o),this.filter=o),u!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,u),this.wrap=u)},id.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},id.prototype.destroy=function(){var o=this.context,u=o.gl;u.deleteTexture(this.texture),this.texture=null};var O3=function(o){var u=this;this._callback=o,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){u._triggered=!1,u._callback()})};O3.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){o._triggered=!1,o._callback()},0))},O3.prototype.remove=function(){delete this._channel,this._callback=function(){}};var v0=function(o,u,p){this.target=o,this.parent=u,this.mapId=p,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},fe(["receive","process"],this),this.invoker=new O3(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=it()?o:_};v0.prototype.send=function(o,u,p,x,A){var k=this;A===void 0&&(A=!1);var F=Math.round(Math.random()*1e18).toString(36).substring(0,10);p&&(this.callbacks[F]=p);var Y=kt(this.globalScope)?void 0:[];return this.target.postMessage({id:F,type:o,hasCallback:!!p,targetMapId:x,mustQueue:A,sourceMapId:this.mapId,data:U(u,Y)},Y),{cancel:function(){p&&delete k.callbacks[F],k.target.postMessage({id:F,type:"<cancel>",targetMapId:x,sourceMapId:k.mapId})}}},v0.prototype.receive=function(o){var u=o.data,p=u.id;if(p&&!(u.targetMapId&&this.mapId!==u.targetMapId))if(u.type==="<cancel>"){delete this.tasks[p];var x=this.cancelCallbacks[p];delete this.cancelCallbacks[p],x&&x()}else it()||u.mustQueue?(this.tasks[p]=u,this.taskQueue.push(p),this.invoker.trigger()):this.processTask(p,u)},v0.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),u=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(o,u)}},v0.prototype.processTask=function(o,u){var p=this;if(u.type==="<response>"){var x=this.callbacks[o];delete this.callbacks[o],x&&(u.error?x(Z(u.error)):x(null,Z(u.data)))}else{var A=!1,k=kt(this.globalScope)?void 0:[],F=u.hasCallback?function(ge,ve){A=!0,delete p.cancelCallbacks[o],p.target.postMessage({id:o,type:"<response>",sourceMapId:p.mapId,error:ge?U(ge):null,data:U(ve,k)},k)}:function(ge){A=!0},Y=null,j=Z(u.data);if(this.parent[u.type])Y=this.parent[u.type](u.sourceMapId,j,F);else if(this.parent.getWorkerSource){var Q=u.type.split("."),ne=this.parent.getWorkerSource(u.sourceMapId,Q[0],j.source);Y=ne[Q[1]](j,F)}else F(new Error("Could not find function "+u.type));!A&&Y&&Y.cancel&&(this.cancelCallbacks[o]=Y.cancel)}},v0.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function tj(n,o,u){o=Math.pow(2,u)-o-1;var p=h7(n*256,o*256,u),x=h7((n+1)*256,(o+1)*256,u);return p[0]+","+p[1]+","+x[0]+","+x[1]}function h7(n,o,u){var p=2*Math.PI*6378137/256/Math.pow(2,u),x=n*p-2*Math.PI*6378137/2,A=o*p-2*Math.PI*6378137/2;return[x,A]}var Mn=function(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};Mn.prototype.setNorthEast=function(o){return this._ne=o instanceof Hi?new Hi(o.lng,o.lat):Hi.convert(o),this},Mn.prototype.setSouthWest=function(o){return this._sw=o instanceof Hi?new Hi(o.lng,o.lat):Hi.convert(o),this},Mn.prototype.extend=function(o){var u=this._sw,p=this._ne,x,A;if(o instanceof Hi)x=o,A=o;else if(o instanceof Mn){if(x=o._sw,A=o._ne,!x||!A)return this}else{if(Array.isArray(o))if(o.length===4||o.every(Array.isArray)){var k=o;return this.extend(Mn.convert(k))}else{var F=o;return this.extend(Hi.convert(F))}return this}return!u&&!p?(this._sw=new Hi(x.lng,x.lat),this._ne=new Hi(A.lng,A.lat)):(u.lng=Math.min(x.lng,u.lng),u.lat=Math.min(x.lat,u.lat),p.lng=Math.max(A.lng,p.lng),p.lat=Math.max(A.lat,p.lat)),this},Mn.prototype.getCenter=function(){return new Hi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Mn.prototype.getSouthWest=function(){return this._sw},Mn.prototype.getNorthEast=function(){return this._ne},Mn.prototype.getNorthWest=function(){return new Hi(this.getWest(),this.getNorth())},Mn.prototype.getSouthEast=function(){return new Hi(this.getEast(),this.getSouth())},Mn.prototype.getWest=function(){return this._sw.lng},Mn.prototype.getSouth=function(){return this._sw.lat},Mn.prototype.getEast=function(){return this._ne.lng},Mn.prototype.getNorth=function(){return this._ne.lat},Mn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Mn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Mn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Mn.prototype.contains=function(o){var u=Hi.convert(o),p=u.lng,x=u.lat,A=this._sw.lat<=x&&x<=this._ne.lat,k=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=p&&p>=this._ne.lng),A&&k},Mn.convert=function(o){return!o||o instanceof Mn?o:new Mn(o)};var v7=63710088e-1,Hi=function(o,u){if(isNaN(o)||isNaN(u))throw new Error("Invalid LngLat object: ("+o+", "+u+")");if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Hi.prototype.wrap=function(){return new Hi(O(this.lng,-180,180),this.lat)},Hi.prototype.toArray=function(){return[this.lng,this.lat]},Hi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Hi.prototype.distanceTo=function(o){var u=Math.PI/180,p=this.lat*u,x=o.lat*u,A=Math.sin(p)*Math.sin(x)+Math.cos(p)*Math.cos(x)*Math.cos((o.lng-this.lng)*u),k=v7*Math.acos(Math.min(A,1));return k},Hi.prototype.toBounds=function(o){o===void 0&&(o=0);var u=40075017,p=360*o/u,x=p/Math.cos(Math.PI/180*this.lat);return new Mn(new Hi(this.lng-x,this.lat-p),new Hi(this.lng+x,this.lat+p))},Hi.convert=function(o){if(o instanceof Hi)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Hi(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Hi(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var d7=2*Math.PI*v7;function p7(n){return d7*Math.cos(n*Math.PI/180)}function m7(n){return(180+n)/360}function y7(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function g7(n,o){return n/p7(o)}function rj(n){return n*360-180}function U3(n){var o=180-n*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}function aj(n,o){return n*p7(U3(o))}function ij(n){return 1/Math.cos(n*Math.PI/180)}var nd=function(o,u,p){p===void 0&&(p=0),this.x=+o,this.y=+u,this.z=+p};nd.fromLngLat=function(o,u){u===void 0&&(u=0);var p=Hi.convert(o);return new nd(m7(p.lng),y7(p.lat),g7(u,p.lat))},nd.prototype.toLngLat=function(){return new Hi(rj(this.x),U3(this.y))},nd.prototype.toAltitude=function(){return aj(this.z,this.y)},nd.prototype.meterInMercatorCoordinateUnits=function(){return 1/d7*ij(U3(this.y))};var od=function(o,u,p){this.z=o,this.x=u,this.y=p,this.key=ky(0,o,o,u,p)};od.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},od.prototype.url=function(o,u){var p=tj(this.x,this.y,this.z),x=nj(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",x).replace("{bbox-epsg-3857}",p)},od.prototype.getTilePoint=function(o){var u=Math.pow(2,this.z);return new v((o.x*u-this.x)*Nr,(o.y*u-this.y)*Nr)},od.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var _7=function(o,u){this.wrap=o,this.canonical=u,this.key=ky(o,u.z,u.z,u.x,u.y)},Sn=function(o,u,p,x,A){this.overscaledZ=o,this.wrap=u,this.canonical=new od(p,+x,+A),this.key=ky(u,o,p,x,A)};Sn.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},Sn.prototype.scaledTo=function(o){var u=this.canonical.z-o;return o>this.canonical.z?new Sn(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sn(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)},Sn.prototype.calculateScaledKey=function(o,u){var p=this.canonical.z-o;return o>this.canonical.z?ky(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y):ky(this.wrap*+u,o,o,this.canonical.x>>p,this.canonical.y>>p)},Sn.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u},Sn.prototype.children=function(o){if(this.overscaledZ>=o)return[new Sn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var u=this.canonical.z+1,p=this.canonical.x*2,x=this.canonical.y*2;return[new Sn(u,this.wrap,u,p,x),new Sn(u,this.wrap,u,p+1,x),new Sn(u,this.wrap,u,p,x+1),new Sn(u,this.wrap,u,p+1,x+1)]},Sn.prototype.isLessThan=function(o){return this.wrap<o.wrap?!0:this.wrap>o.wrap?!1:this.overscaledZ<o.overscaledZ?!0:this.overscaledZ>o.overscaledZ?!1:this.canonical.x<o.canonical.x?!0:this.canonical.x>o.canonical.x?!1:this.canonical.y<o.canonical.y},Sn.prototype.wrapped=function(){return new Sn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Sn.prototype.unwrapTo=function(o){return new Sn(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},Sn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Sn.prototype.toUnwrapped=function(){return new _7(this.wrap,this.canonical)},Sn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Sn.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new nd(o.x-this.wrap,o.y))};function ky(n,o,u,p,x){n*=2,n<0&&(n=n*-1-1);var A=1<<u;return(A*A*n+A*x+p).toString(36)+u.toString(36)+o.toString(36)}function nj(n,o,u){for(var p="",x,A=n;A>0;A--)x=1<<A-1,p+=(o&x?1:0)+(u&x?2:0);return p}y("CanonicalTileID",od),y("OverscaledTileID",Sn,{omit:["posMatrix"]});var dc=function(o,u,p){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return ke('"'+p+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=u.height;var x=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=p||"mapbox";for(var A=0;A<x;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(x,A)]=this.data[this._idx(x-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,x)]=this.data[this._idx(A,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)]};dc.prototype.get=function(o,u){var p=new Uint8Array(this.data.buffer),x=this._idx(o,u)*4,A=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return A(p[x],p[x+1],p[x+2])},dc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},dc.prototype._idx=function(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)},dc.prototype._unpackMapbox=function(o,u,p){return(o*256*256+u*256+p)/10-1e4},dc.prototype._unpackTerrarium=function(o,u,p){return o*256+u+p/256-32768},dc.prototype.getPixels=function(){return new ts({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},dc.prototype.backfillBorder=function(o,u,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var x=u*this.dim,A=u*this.dim+this.dim,k=p*this.dim,F=p*this.dim+this.dim;switch(u){case-1:x=A-1;break;case 1:A=x+1;break}switch(p){case-1:k=F-1;break;case 1:F=k+1;break}for(var Y=-u*this.dim,j=-p*this.dim,Q=k;Q<F;Q++)for(var ne=x;ne<A;ne++)this.data[this._idx(ne,Q)]=o.data[this._idx(ne+Y,Q+j)]},y("DEMData",dc);function oj(n,o){var u={};if(!o)return u;for(var p=function(){var k=A[x],F=k.layerIds.map(function(ne){return o.getLayer(ne)}).filter(Boolean);if(F.length!==0){k.layers=F,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(function(ne){return F.filter(function(ge){return ge.id===ne})[0]}));for(var Y=0,j=F;Y<j.length;Y+=1){var Q=j[Y];u[Q.id]=k}}},x=0,A=n;x<A.length;x+=1)p();return u}var j1=function(o){this._stringToNumber={},this._numberToString=[];for(var u=0;u<o.length;u++){var p=o[u];this._stringToNumber[p]=u,this._numberToString[u]=p}};j1.prototype.encode=function(o){return this._stringToNumber[o]},j1.prototype.decode=function(o){return this._numberToString[o]};var J1=function(o,u,p,x,A){this.type="Feature",this._vectorTileFeature=o,o._z=u,o._x=p,o._y=x,this.properties=o.properties,this.id=A},V3={geometry:{configurable:!0}};V3.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},V3.geometry.set=function(n){this._geometry=n},J1.prototype.toJSON=function(){var o={geometry:this.geometry};for(var u in this)u==="_geometry"||u==="_vectorTileFeature"||(o[u]=this[u]);return o},Object.defineProperties(J1.prototype,V3);var d0=function(){this.state={},this.stateChanges={},this.deletedStates={}};d0.prototype.updateState=function(o,u,p){var x=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][x]=this.stateChanges[o][x]||{},H(this.stateChanges[o][x],p),this.deletedStates[o]===null){this.deletedStates[o]={};for(var A in this.state[o])A!==x&&(this.deletedStates[o][A]=null)}else{var k=this.deletedStates[o]&&this.deletedStates[o][x]===null;if(k){this.deletedStates[o][x]={};for(var F in this.state[o][x])p[F]||(this.deletedStates[o][x][F]=null)}else for(var Y in p){var j=this.deletedStates[o]&&this.deletedStates[o][x]&&this.deletedStates[o][x][Y]===null;j&&delete this.deletedStates[o][x][Y]}}},d0.prototype.removeFeatureState=function(o,u,p){var x=this.deletedStates[o]===null;if(!x){var A=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},p&&u!==void 0)this.deletedStates[o][A]!==null&&(this.deletedStates[o][A]=this.deletedStates[o][A]||{},this.deletedStates[o][A][p]=null);else if(u!==void 0){var k=this.stateChanges[o]&&this.stateChanges[o][A];if(k){this.deletedStates[o][A]={};for(p in this.stateChanges[o][A])this.deletedStates[o][A][p]=null}else this.deletedStates[o][A]=null}else this.deletedStates[o]=null}},d0.prototype.getState=function(o,u){var p=String(u),x=this.state[o]||{},A=this.stateChanges[o]||{},k=H({},x[p],A[p]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var F=this.deletedStates[o][u];if(F===null)return{};for(var Y in F)delete k[Y]}return k},d0.prototype.initializeTileState=function(o,u){o.setFeatureState(this.state,u)},d0.prototype.coalesceChanges=function(o,u){var p={};for(var x in this.stateChanges){this.state[x]=this.state[x]||{};var A={};for(var k in this.stateChanges[x])this.state[x][k]||(this.state[x][k]={}),H(this.state[x][k],this.stateChanges[x][k]),A[k]=this.state[x][k];p[x]=A}for(var F in this.deletedStates){this.state[F]=this.state[F]||{};var Y={};if(this.deletedStates[F]===null)for(var j in this.state[F])Y[j]={},this.state[F][j]={};else for(var Q in this.deletedStates[F]){var ne=this.deletedStates[F][Q]===null;if(ne)this.state[F][Q]={};else for(var ge=0,ve=Object.keys(this.deletedStates[F][Q]);ge<ve.length;ge+=1){var Ce=ve[ge];delete this.state[F][Q][Ce]}Y[Q]=this.state[F][Q]}p[F]=p[F]||{},H(p[F],Y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(var qe in o){var ft=o[qe];ft.setFeatureState(p,u)}};var pc=function(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new gf(Nr,16,0),this.grid3D=new gf(Nr,16,0),this.featureIndexArray=new D1,this.promoteId=u};pc.prototype.insert=function(o,u,p,x,A,k){var F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,x,A);for(var Y=k?this.grid3D:this.grid,j=0;j<u.length;j++){for(var Q=u[j],ne=[1/0,1/0,-1/0,-1/0],ge=0;ge<Q.length;ge++){var ve=Q[ge];ne[0]=Math.min(ne[0],ve.x),ne[1]=Math.min(ne[1],ve.y),ne[2]=Math.max(ne[2],ve.x),ne[3]=Math.max(ne[3],ve.y)}ne[0]<Nr&&ne[1]<Nr&&ne[2]>=0&&ne[3]>=0&&Y.insert(F,ne[0],ne[1],ne[2],ne[3])}},pc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new r0.VectorTile(new B1(this.rawTileData)).layers,this.sourceLayerCoder=new j1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},pc.prototype.query=function(o,u,p,x){var A=this;this.loadVTLayers();for(var k=o.params||{},F=Nr/o.tileSize/o.scale,Y=vf(k.filter),j=o.queryGeometry,Q=o.queryPadding*F,ne=b7(j),ge=this.grid.query(ne.minX-Q,ne.minY-Q,ne.maxX+Q,ne.maxY+Q),ve=b7(o.cameraQueryGeometry),Ce=this.grid3D.query(ve.minX-Q,ve.minY-Q,ve.maxX+Q,ve.maxY+Q,function(Jt,dr,cr,Fr){return Vl(o.cameraQueryGeometry,Jt-Q,dr-Q,cr+Q,Fr+Q)}),qe=0,ft=Ce;qe<ft.length;qe+=1){var tt=ft[qe];ge.push(tt)}ge.sort(sj);for(var St={},gt,At=function(Jt){var dr=ge[Jt];if(dr!==gt){gt=dr;var cr=A.featureIndexArray.get(dr),Fr=null;A.loadMatchingFeature(St,cr.bucketIndex,cr.sourceLayerIndex,cr.featureIndex,Y,k.layers,k.availableImages,u,p,x,function(Cr,Ir,Qr){return Fr||(Fr=Ua(Cr)),Ir.queryIntersectsFeature(j,Cr,Qr,Fr,A.z,o.transform,F,o.pixelPosMatrix)})}},Rt=0;Rt<ge.length;Rt++)At(Rt);return St},pc.prototype.loadMatchingFeature=function(o,u,p,x,A,k,F,Y,j,Q,ne){var ge=this.bucketLayerIDs[u];if(!(k&&!Ae(k,ge))){var ve=this.sourceLayerCoder.decode(p),Ce=this.vtLayers[ve],qe=Ce.feature(x);if(A.needGeometry){var ft=Mi(qe,!0);if(!A.filter(new jt(this.tileID.overscaledZ),ft,this.tileID.canonical))return}else if(!A.filter(new jt(this.tileID.overscaledZ),qe))return;for(var tt=this.getId(qe,ve),St=0;St<ge.length;St++){var gt=ge[St];if(!(k&&k.indexOf(gt)<0)){var At=Y[gt];if(At){var Rt={};tt!==void 0&&Q&&(Rt=Q.getState(At.sourceLayer||"_geojsonTileLayer",tt));var Jt=H({},j[gt]);Jt.paint=x7(Jt.paint,At.paint,qe,Rt,F),Jt.layout=x7(Jt.layout,At.layout,qe,Rt,F);var dr=!ne||ne(qe,At,Rt);if(dr){var cr=new J1(qe,this.z,this.x,this.y,tt);cr.layer=Jt;var Fr=o[gt];Fr===void 0&&(Fr=o[gt]=[]),Fr.push({featureIndex:x,feature:cr,intersectionZ:dr})}}}}}},pc.prototype.lookupSymbolFeatures=function(o,u,p,x,A,k,F,Y){var j={};this.loadVTLayers();for(var Q=vf(A),ne=0,ge=o;ne<ge.length;ne+=1){var ve=ge[ne];this.loadMatchingFeature(j,p,x,ve,Q,k,F,Y,u)}return j},pc.prototype.hasLayer=function(o){for(var u=0,p=this.bucketLayerIDs;u<p.length;u+=1)for(var x=p[u],A=0,k=x;A<k.length;A+=1){var F=k[A];if(o===F)return!0}return!1},pc.prototype.getId=function(o,u){var p=o.id;if(this.promoteId){var x=typeof this.promoteId=="string"?this.promoteId:this.promoteId[u];p=o.properties[x],typeof p=="boolean"&&(p=Number(p))}return p},y("FeatureIndex",pc,{omit:["rawTileData","sourceLayerCoder"]});function x7(n,o,u,p,x){return Te(n,function(A,k){var F=o instanceof wn?o.get(k):null;return F&&F.evaluate?F.evaluate(u,p,x):F})}function b7(n){for(var o=1/0,u=1/0,p=-1/0,x=-1/0,A=0,k=n;A<k.length;A+=1){var F=k[A];o=Math.min(o,F.x),u=Math.min(u,F.y),p=Math.max(p,F.x),x=Math.max(x,F.y)}return{minX:o,minY:u,maxX:p,maxY:x}}function sj(n,o){return o-n}var lj=3e4,Zn=function(o,u){this.tileID=o,this.uid=J(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Zn.prototype.registerFadeDuration=function(o){var u=o+this.timeAdded;u<at.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)},Zn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Zn.prototype.loadVectorData=function(o,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!o){this.collisionBoxArray=new cy;return}o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=oj(o.buckets,u.style),this.hasSymbolBuckets=!1;for(var x in this.buckets){var A=this.buckets[x];if(A instanceof yi)if(this.hasSymbolBuckets=!0,p)A.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var k in this.buckets){var F=this.buckets[k];if(F instanceof yi&&F.hasRTLText){this.hasRTLText=!0,Qa();break}}this.queryPadding=0;for(var Y in this.buckets){var j=this.buckets[Y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(Y).queryRadius(j))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)},Zn.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Zn.prototype.getBucket=function(o){return this.buckets[o.id]},Zn.prototype.upload=function(o){for(var u in this.buckets){var p=this.buckets[u];p.uploadPending()&&p.upload(o)}var x=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new id(o,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new id(o,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)},Zn.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},Zn.prototype.queryRenderedFeatures=function(o,u,p,x,A,k,F,Y,j,Q){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:A,scale:k,tileSize:this.tileSize,pixelPosMatrix:Q,transform:Y,params:F,queryPadding:this.queryPadding*j},o,u,p)},Zn.prototype.querySourceFeatures=function(o,u){var p=this.latestFeatureIndex;if(!(!p||!p.rawTileData)){var x=p.loadVTLayers(),A=u?u.sourceLayer:"",k=x._geojsonTileLayer||x[A];if(k)for(var F=vf(u&&u.filter),Y=this.tileID.canonical,j=Y.z,Q=Y.x,ne=Y.y,ge={z:j,x:Q,y:ne},ve=0;ve<k.length;ve++){var Ce=k.feature(ve);if(F.needGeometry){var qe=Mi(Ce,!0);if(!F.filter(new jt(this.tileID.overscaledZ),qe,this.tileID.canonical))continue}else if(!F.filter(new jt(this.tileID.overscaledZ),Ce))continue;var ft=p.getId(Ce,A),tt=new J1(Ce,j,Q,ne,ft);tt.tile=ge,o.push(tt)}}},Zn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Zn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Zn.prototype.setExpiryData=function(o){var u=this.expirationTime;if(o.cacheControl){var p=_t(o.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+p["max-age"]*1e3)}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var x=Date.now(),A=!1;if(this.expirationTime>x)A=!1;else if(!u)A=!0;else if(this.expirationTime<u)A=!0;else{var k=this.expirationTime-u;k?this.expirationTime=x+Math.max(k,lj):A=!0}A?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Zn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Zn.prototype.setFeatureState=function(o,u){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)){var p=this.latestFeatureIndex.loadVTLayers();for(var x in this.buckets)if(u.style.hasLayer(x)){var A=this.buckets[x],k=A.layers[0].sourceLayer||"_geojsonTileLayer",F=p[k],Y=o[k];if(!(!F||!Y||Object.keys(Y).length===0)){A.update(Y,F,this.imageAtlas&&this.imageAtlas.patternPositions||{});var j=u&&u.style&&u.style.getLayer(x);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(A)))}}}},Zn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Zn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<at.now()},Zn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Zn.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=at.now()+o},Zn.prototype.setDependencies=function(o,u){for(var p={},x=0,A=u;x<A.length;x+=1){var k=A[x];p[k]=!0}this.dependencies[o]=p},Zn.prototype.hasDependency=function(o,u){for(var p=0,x=o;p<x.length;p+=1){var A=x[p],k=this.dependencies[A];if(k)for(var F=0,Y=u;F<Y.length;F+=1){var j=Y[F];if(k[j])return!0}}return!1};var uj=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Ah=_.performance,w7=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},Ah.mark(this._marks.start)};w7.prototype.finish=function(){Ah.mark(this._marks.end);var o=Ah.getEntriesByName(this._marks.measure);return o.length===0&&(Ah.measure(this._marks.measure,this._marks.start,this._marks.end),o=Ah.getEntriesByName(this._marks.measure),Ah.clearMarks(this._marks.start),Ah.clearMarks(this._marks.end),Ah.clearMeasures(this._marks.measure)),o},a.Actor=v0,a.AlphaImage=ad,a.CanonicalTileID=od,a.CollisionBoxArray=cy,a.Color=ni,a.DEMData=dc,a.DataConstantProperty=Tr,a.DictionaryCoder=j1,a.EXTENT=Nr,a.ErrorEvent=Yr,a.EvaluationParameters=jt,a.Event=ri,a.Evented=gr,a.FeatureIndex=pc,a.FillBucket=Lu,a.FillExtrusionBucket=Du,a.ImageAtlas=Ty,a.ImagePosition=U1,a.LineBucket=zo,a.LngLat=Hi,a.LngLatBounds=Mn,a.MercatorCoordinate=nd,a.ONE_EM=Qn,a.OverscaledTileID=Sn,a.Point=v,a.Point$1=v,a.Properties=qn,a.Protobuf=B1,a.RGBAImage=ts,a.RequestManager=Be,a.RequestPerformance=w7,a.ResourceType=Ci,a.SegmentVector=Tn,a.SourceFeatureState=d0,a.StructArrayLayout1ui2=mh,a.StructArrayLayout2f1f2i16=ku,a.StructArrayLayout2i4=uc,a.StructArrayLayout3ui6=Cu,a.StructArrayLayout4i8=sy,a.SymbolBucket=yi,a.Texture=id,a.Tile=Zn,a.Transitionable=oa,a.Uniform1f=Ze,a.Uniform1i=Re,a.Uniform2f=Ge,a.Uniform3f=Oe,a.Uniform4f=Ke,a.UniformColor=vt,a.UniformMatrix4f=Nt,a.UnwrappedTileID=_7,a.ValidationError=Ur,a.WritingMode=Is,a.ZoomHistory=$,a.add=$p,a.addDynamicAttributes=N3,a.asyncAll=q,a.bezier=E,a.bindAll=fe,a.browser=at,a.cacheEntryPossiblyAdded=nn,a.clamp=I,a.clearTileCache=ir,a.clipLine=r7,a.clone=Jp,a.clone$1=Me,a.clone$2=g3,a.collisionCircleLayout=HW,a.config=Je,a.create=jp,a.create$1=xo,a.create$2=Xp,a.createCommonjsModule=s,a.createExpression=oc,a.createLayout=ui,a.createStyleLayer=ej,a.cross=vY,a.deepEqual=T,a.dot=hY,a.dot$1=gY,a.ease=L,a.emitValidationErrors=lc,a.endsWith=le,a.enforceCacheSizeLimit=Ki,a.evaluateSizeForFeature=jM,a.evaluateSizeForZoom=JM,a.evaluateVariableOffset=n7,a.evented=Rr,a.extend=H,a.featureFilter=vf,a.filterObject=Se,a.fromRotation=_h,a.getAnchorAlignment=I3,a.getAnchorJustification=q3,a.getArrayBuffer=et,a.getImage=Or,a.getJSON=Ne,a.getRTLTextPluginStatus=ea,a.getReferrer=se,a.getVideo=ca,a.identity=Kp,a.invert=xh,a.isChar=X,a.isMapboxURL=ut,a.keysDifference=N,a.makeRequest=Le,a.mapObject=Te,a.mercatorXfromLng=m7,a.mercatorYfromLat=y7,a.mercatorZfromAltitude=g7,a.mul=y3,a.multiply=bh,a.mvt=r0,a.nextPowerOfTwo=ie,a.normalize=dy,a.number=pn,a.offscreenCanvasSupported=la,a.ortho=m3,a.parseGlyphPBF=mX,a.pbf=B1,a.performSymbolLayout=IX,a.perspective=vy,a.pick=V,a.plugin=ei,a.polygonIntersectsPolygon=ia,a.postMapLoadEvent=bt,a.postTurnstileEvent=Fe,a.potpack=UM,a.refProperties=uj,a.register=y,a.registerForPluginStateChange=Vr,a.renderColorRamp=_M,a.rotate=td,a.rotateX=es,a.rotateZ=Qp,a.scale=$o,a.scale$1=yY,a.scale$2=x3,a.setCacheLimits=oi,a.setRTLTextPlugin=Kr,a.sphericalToCartesian=lt,a.sqrLen=bY,a.styleSpec=Xt,a.sub=pY,a.symbolSize=MX,a.transformMat3=dY,a.transformMat4=z1,a.translate=un,a.triggerPluginCompletionEvent=fr,a.uniqueId=J,a.validateCustomStyleLayer=KX,a.validateLight=fi,a.validateStyle=$a,a.values=z,a.vectorTile=r0,a.version=l,a.warnOnce=ke,a.webpSupported=Ct,a.window=_,a.wrap=O}),i(["./shared"],function(a){"use strict";function s(se){var te=typeof se;if(te==="number"||te==="boolean"||te==="string"||se===void 0||se===null)return JSON.stringify(se);if(Array.isArray(se)){for(var ue="[",he=0,Le=se;he<Le.length;he+=1){var Ne=Le[he];ue+=s(Ne)+","}return ue+"]"}for(var et=Object.keys(se).sort(),We="{",mt=0;mt<et.length;mt++)We+=JSON.stringify(et[mt])+":"+s(se[et[mt]])+",";return We+"}"}function l(se){for(var te="",ue=0,he=a.refProperties;ue<he.length;ue+=1){var Le=he[ue];te+="/"+s(se[Le])}return te}function f(se,te){for(var ue={},he=0;he<se.length;he++){var Le=te&&te[se[he].id]||l(se[he]);te&&(te[se[he].id]=Le);var Ne=ue[Le];Ne||(Ne=ue[Le]=[]),Ne.push(se[he])}var et=[];for(var We in ue)et.push(ue[We]);return et}var h=function(te){this.keyCache={},te&&this.replace(te)};h.prototype.replace=function(te){this._layerConfigs={},this._layers={},this.update(te,[])},h.prototype.update=function(te,ue){for(var he=this,Le=0,Ne=te;Le<Ne.length;Le+=1){var et=Ne[Le];this._layerConfigs[et.id]=et;var We=this._layers[et.id]=a.createStyleLayer(et);We._featureFilter=a.featureFilter(We.filter),this.keyCache[et.id]&&delete this.keyCache[et.id]}for(var mt=0,Pt=ue;mt<Pt.length;mt+=1){var Ft=Pt[mt];delete this.keyCache[Ft],delete this._layerConfigs[Ft],delete this._layers[Ft]}this.familiesBySource={};for(var tr=f(a.values(this._layerConfigs),this.keyCache),Wt=0,Sr=tr;Wt<Sr.length;Wt+=1){var Zr=Sr[Wt],Or=Zr.map(function(gr){return he._layers[gr.id]}),ca=Or[0];if(ca.visibility!=="none"){var ua=ca.source||"",qa=this.familiesBySource[ua];qa||(qa=this.familiesBySource[ua]={});var ri=ca.sourceLayer||"_geojsonTileLayer",Yr=qa[ri];Yr||(Yr=qa[ri]=[]),Yr.push(Or)}}};var v=1,m=function(te){var ue={},he=[];for(var Le in te){var Ne=te[Le],et=ue[Le]={};for(var We in Ne){var mt=Ne[+We];if(!(!mt||mt.bitmap.width===0||mt.bitmap.height===0)){var Pt={x:0,y:0,w:mt.bitmap.width+2*v,h:mt.bitmap.height+2*v};he.push(Pt),et[We]={rect:Pt,metrics:mt.metrics}}}}var Ft=a.potpack(he),tr=Ft.w,Wt=Ft.h,Sr=new a.AlphaImage({width:tr||1,height:Wt||1});for(var Zr in te){var Or=te[Zr];for(var ca in Or){var ua=Or[+ca];if(!(!ua||ua.bitmap.width===0||ua.bitmap.height===0)){var qa=ue[Zr][ca].rect;a.AlphaImage.copy(ua.bitmap,Sr,{x:0,y:0},{x:qa.x+v,y:qa.y+v},ua.bitmap)}}}this.image=Sr,this.positions=ue};a.register("GlyphAtlas",m);var _=function(te){this.tileID=new a.OverscaledTileID(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId};_.prototype.parse=function(te,ue,he,Le,Ne){var et=this;this.status="parsing",this.data=te,this.collisionBoxArray=new a.CollisionBoxArray;var We=new a.DictionaryCoder(Object.keys(te.layers).sort()),mt=new a.FeatureIndex(this.tileID,this.promoteId);mt.bucketLayerIDs=[];var Pt={},Ft={featureIndex:mt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},tr=ue.familiesBySource[this.source];for(var Wt in tr){var Sr=te.layers[Wt];if(Sr){Sr.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Zr=We.encode(Wt),Or=[],ca=0;ca<Sr.length;ca++){var ua=Sr.feature(ca),qa=mt.getId(ua,Wt);Or.push({feature:ua,id:qa,index:ca,sourceLayerIndex:Zr})}for(var ri=0,Yr=tr[Wt];ri<Yr.length;ri+=1){var gr=Yr[ri],$r=gr[0];if(!($r.minzoom&&this.zoom<Math.floor($r.minzoom))&&!($r.maxzoom&&this.zoom>=$r.maxzoom)&&$r.visibility!=="none"){T(gr,this.zoom,he);var ga=Pt[$r.id]=$r.createBucket({index:mt.bucketLayerIDs.length,layers:gr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zr,sourceID:this.source});ga.populate(Or,Ft,this.tileID.canonical),mt.bucketLayerIDs.push(gr.map(function(Ga){return Ga.id}))}}}}var nr,Ti,Ea,si,fa=a.mapObject(Ft.glyphDependencies,function(Ga){return Object.keys(Ga).map(Number)});Object.keys(fa).length?Le.send("getGlyphs",{uid:this.uid,stacks:fa},function(Ga,Kn){nr||(nr=Ga,Ti=Kn,bs.call(et))}):Ti={};var In=Object.keys(Ft.iconDependencies);In.length?Le.send("getImages",{icons:In,source:this.source,tileID:this.tileID,type:"icons"},function(Ga,Kn){nr||(nr=Ga,Ea=Kn,bs.call(et))}):Ea={};var Co=Object.keys(Ft.patternDependencies);Co.length?Le.send("getImages",{icons:Co,source:this.source,tileID:this.tileID,type:"patterns"},function(Ga,Kn){nr||(nr=Ga,si=Kn,bs.call(et))}):si={},bs.call(this);function bs(){if(nr)return Ne(nr);if(Ti&&Ea&&si){var Ga=new m(Ti),Kn=new a.ImageAtlas(Ea,si);for(var du in Pt){var Ui=Pt[du];Ui instanceof a.SymbolBucket?(T(Ui.layers,this.zoom,he),a.performSymbolLayout(Ui,Ti,Ga.positions,Ea,Kn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ui.hasPattern&&(Ui instanceof a.LineBucket||Ui instanceof a.FillBucket||Ui instanceof a.FillExtrusionBucket)&&(T(Ui.layers,this.zoom,he),Ui.addFeatures(Ft,this.tileID.canonical,Kn.patternPositions))}this.status="done",Ne(null,{buckets:a.values(Pt).filter(function(pl){return!pl.isEmpty()}),featureIndex:mt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ga.image,imageAtlas:Kn,glyphMap:this.returnDependencies?Ti:null,iconMap:this.returnDependencies?Ea:null,glyphPositions:this.returnDependencies?Ga.positions:null})}}};function T(se,te,ue){for(var he=new a.EvaluationParameters(te),Le=0,Ne=se;Le<Ne.length;Le+=1){var et=Ne[Le];et.recalculate(he,ue)}}function M(se,te){var ue=a.getArrayBuffer(se.request,function(he,Le,Ne,et){he?te(he):Le&&te(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Le)),rawData:Le,cacheControl:Ne,expires:et})});return function(){ue.cancel(),te()}}var C=function(te,ue,he,Le){this.actor=te,this.layerIndex=ue,this.availableImages=he,this.loadVectorData=Le||M,this.loading={},this.loaded={}};C.prototype.loadTile=function(te,ue){var he=this,Le=te.uid;this.loading||(this.loading={});var Ne=te&&te.request&&te.request.collectResourceTiming?new a.RequestPerformance(te.request):!1,et=this.loading[Le]=new _(te);et.abort=this.loadVectorData(te,function(We,mt){if(delete he.loading[Le],We||!mt)return et.status="done",he.loaded[Le]=et,ue(We);var Pt=mt.rawData,Ft={};mt.expires&&(Ft.expires=mt.expires),mt.cacheControl&&(Ft.cacheControl=mt.cacheControl);var tr={};if(Ne){var Wt=Ne.finish();Wt&&(tr.resourceTiming=JSON.parse(JSON.stringify(Wt)))}et.vectorTile=mt.vectorTile,et.parse(mt.vectorTile,he.layerIndex,he.availableImages,he.actor,function(Sr,Zr){if(Sr||!Zr)return ue(Sr);ue(null,a.extend({rawTileData:Pt.slice(0)},Zr,Ft,tr))}),he.loaded=he.loaded||{},he.loaded[Le]=et})},C.prototype.reloadTile=function(te,ue){var he=this,Le=this.loaded,Ne=te.uid,et=this;if(Le&&Le[Ne]){var We=Le[Ne];We.showCollisionBoxes=te.showCollisionBoxes;var mt=function(Pt,Ft){var tr=We.reloadCallback;tr&&(delete We.reloadCallback,We.parse(We.vectorTile,et.layerIndex,he.availableImages,et.actor,tr)),ue(Pt,Ft)};We.status==="parsing"?We.reloadCallback=mt:We.status==="done"&&(We.vectorTile?We.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,mt):mt())}},C.prototype.abortTile=function(te,ue){var he=this.loading,Le=te.uid;he&&he[Le]&&he[Le].abort&&(he[Le].abort(),delete he[Le]),ue()},C.prototype.removeTile=function(te,ue){var he=this.loaded,Le=te.uid;he&&he[Le]&&delete he[Le],ue()};var E=a.window.ImageBitmap,L=function(){this.loaded={}};L.prototype.loadTile=function(te,ue){var he=te.uid,Le=te.encoding,Ne=te.rawImageData,et=E&&Ne instanceof E?this.getImageData(Ne):Ne,We=new a.DEMData(he,et,Le);this.loaded=this.loaded||{},this.loaded[he]=We,ue(null,We)},L.prototype.getImageData=function(te){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(te.width,te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=te.width,this.offscreenCanvas.height=te.height,this.offscreenCanvasContext.drawImage(te,0,0,te.width,te.height);var ue=this.offscreenCanvasContext.getImageData(-1,-1,te.width+2,te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:ue.width,height:ue.height},ue.data)},L.prototype.removeTile=function(te){var ue=this.loaded,he=te.uid;ue&&ue[he]&&delete ue[he]};var I=O;function O(se,te){var ue=se&&se.type,he;if(ue==="FeatureCollection")for(he=0;he<se.features.length;he++)O(se.features[he],te);else if(ue==="GeometryCollection")for(he=0;he<se.geometries.length;he++)O(se.geometries[he],te);else if(ue==="Feature")O(se.geometry,te);else if(ue==="Polygon")q(se.coordinates,te);else if(ue==="MultiPolygon")for(he=0;he<se.coordinates.length;he++)q(se.coordinates[he],te);return se}function q(se,te){if(se.length!==0){z(se[0],te);for(var ue=1;ue<se.length;ue++)z(se[ue],!te)}}function z(se,te){for(var ue=0,he=0,Le=se.length,Ne=Le-1;he<Le;Ne=he++)ue+=(se[he][0]-se[Ne][0])*(se[Ne][1]+se[he][1]);ue>=0!=!!te&&se.reverse()}var N=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,H=function(te){this._feature=te,this.extent=a.EXTENT,this.type=te.type,this.properties=te.tags,"id"in te&&!isNaN(te.id)&&(this.id=parseInt(te.id,10))};H.prototype.loadGeometry=function(){if(this._feature.type===1){for(var te=[],ue=0,he=this._feature.geometry;ue<he.length;ue+=1){var Le=he[ue];te.push([new a.Point$1(Le[0],Le[1])])}return te}else{for(var Ne=[],et=0,We=this._feature.geometry;et<We.length;et+=1){for(var mt=We[et],Pt=[],Ft=0,tr=mt;Ft<tr.length;Ft+=1){var Wt=tr[Ft];Pt.push(new a.Point$1(Wt[0],Wt[1]))}Ne.push(Pt)}return Ne}},H.prototype.toGeoJSON=function(te,ue,he){return N.call(this,te,ue,he)};var V=function(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=te.length,this._features=te};V.prototype.feature=function(te){return new H(this._features[te])};var W=a.vectorTile.VectorTileFeature,J=ee;function ee(se,te){this.options=te||{},this.features=se,this.length=se.length}ee.prototype.feature=function(se){return new ie(this.features[se],this.options.extent)};function ie(se,te){this.id=typeof se.id=="number"?se.id:void 0,this.type=se.type,this.rawGeometry=se.type===1?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=te||4096}ie.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var te=0;te<se.length;te++){for(var ue=se[te],he=[],Le=0;Le<ue.length;Le++)he.push(new a.Point$1(ue[Le][0],ue[Le][1]));this.geometry.push(he)}return this.geometry},ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,te=1/0,ue=-1/0,he=1/0,Le=-1/0,Ne=0;Ne<se.length;Ne++)for(var et=se[Ne],We=0;We<et.length;We++){var mt=et[We];te=Math.min(te,mt.x),ue=Math.max(ue,mt.x),he=Math.min(he,mt.y),Le=Math.max(Le,mt.y)}return[te,he,ue,Le]},ie.prototype.toGeoJSON=W.prototype.toGeoJSON;var oe=Se,fe=Se,le=Me,Te=J;function Se(se){var te=new a.pbf;return Ae(se,te),te.finish()}function Me(se,te){te=te||{};var ue={};for(var he in se)ue[he]=new J(se[he].features,te),ue[he].name=he,ue[he].version=te.version,ue[he].extent=te.extent;return Se({layers:ue})}function Ae(se,te){for(var ue in se.layers)te.writeMessage(3,pe,se.layers[ue])}function pe(se,te){te.writeVarintField(15,se.version||1),te.writeStringField(1,se.name||""),te.writeVarintField(5,se.extent||4096);var ue,he={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<se.length;ue++)he.feature=se.feature(ue),te.writeMessage(2,ke,he);var Le=he.keys;for(ue=0;ue<Le.length;ue++)te.writeStringField(3,Le[ue]);var Ne=he.values;for(ue=0;ue<Ne.length;ue++)te.writeMessage(4,_t,Ne[ue])}function ke(se,te){var ue=se.feature;ue.id!==void 0&&te.writeVarintField(1,ue.id),te.writeMessage(2,Ee,se),te.writeVarintField(3,ue.type),te.writeMessage(4,it,ue)}function Ee(se,te){var ue=se.feature,he=se.keys,Le=se.values,Ne=se.keycache,et=se.valuecache;for(var We in ue.properties){var mt=Ne[We];typeof mt=="undefined"&&(he.push(We),mt=he.length-1,Ne[We]=mt),te.writeVarint(mt);var Pt=ue.properties[We],Ft=typeof Pt;Ft!=="string"&&Ft!=="boolean"&&Ft!=="number"&&(Pt=JSON.stringify(Pt));var tr=Ft+":"+Pt,Wt=et[tr];typeof Wt=="undefined"&&(Le.push(Pt),Wt=Le.length-1,et[tr]=Wt),te.writeVarint(Wt)}}function Xe(se,te){return(te<<3)+(se&7)}function lt(se){return se<<1^se>>31}function it(se,te){for(var ue=se.loadGeometry(),he=se.type,Le=0,Ne=0,et=ue.length,We=0;We<et;We++){var mt=ue[We],Pt=1;he===1&&(Pt=mt.length),te.writeVarint(Xe(1,Pt));for(var Ft=he===3?mt.length-1:mt.length,tr=0;tr<Ft;tr++){tr===1&&he!==1&&te.writeVarint(Xe(2,Ft-1));var Wt=mt[tr].x-Le,Sr=mt[tr].y-Ne;te.writeVarint(lt(Wt)),te.writeVarint(lt(Sr)),Le+=Wt,Ne+=Sr}he===3&&te.writeVarint(Xe(7,1))}}function _t(se,te){var ue=typeof se;ue==="string"?te.writeStringField(1,se):ue==="boolean"?te.writeBooleanField(7,se):ue==="number"&&(se%1!==0?te.writeDoubleField(3,se):se<0?te.writeSVarintField(6,se):te.writeVarintField(5,se))}oe.fromVectorTileJs=fe,oe.fromGeojsonVt=le,oe.GeoJSONWrapper=Te;function Ye(se,te,ue,he,Le,Ne){if(!(Le-he<=ue)){var et=he+Le>>1;kt(se,te,et,he,Le,Ne%2),Ye(se,te,ue,he,et-1,Ne+1),Ye(se,te,ue,et+1,Le,Ne+1)}}function kt(se,te,ue,he,Le,Ne){for(;Le>he;){if(Le-he>600){var et=Le-he+1,We=ue-he+1,mt=Math.log(et),Pt=.5*Math.exp(2*mt/3),Ft=.5*Math.sqrt(mt*Pt*(et-Pt)/et)*(We-et/2<0?-1:1),tr=Math.max(he,Math.floor(ue-We*Pt/et+Ft)),Wt=Math.min(Le,Math.floor(ue+(et-We)*Pt/et+Ft));kt(se,te,ue,tr,Wt,Ne)}var Sr=te[2*ue+Ne],Zr=he,Or=Le;for(st(se,te,he,ue),te[2*Le+Ne]>Sr&&st(se,te,he,Le);Zr<Or;){for(st(se,te,Zr,Or),Zr++,Or--;te[2*Zr+Ne]<Sr;)Zr++;for(;te[2*Or+Ne]>Sr;)Or--}te[2*he+Ne]===Sr?st(se,te,he,Or):(Or++,st(se,te,Or,Le)),Or<=ue&&(he=Or+1),ue<=Or&&(Le=Or-1)}}function st(se,te,ue,he){dt(se,ue,he),dt(te,2*ue,2*he),dt(te,2*ue+1,2*he+1)}function dt(se,te,ue){var he=se[te];se[te]=se[ue],se[ue]=he}function It(se,te,ue,he,Le,Ne,et){for(var We=[0,se.length-1,0],mt=[],Pt,Ft;We.length;){var tr=We.pop(),Wt=We.pop(),Sr=We.pop();if(Wt-Sr<=et){for(var Zr=Sr;Zr<=Wt;Zr++)Pt=te[2*Zr],Ft=te[2*Zr+1],Pt>=ue&&Pt<=Le&&Ft>=he&&Ft<=Ne&&mt.push(se[Zr]);continue}var Or=Math.floor((Sr+Wt)/2);Pt=te[2*Or],Ft=te[2*Or+1],Pt>=ue&&Pt<=Le&&Ft>=he&&Ft<=Ne&&mt.push(se[Or]);var ca=(tr+1)%2;(tr===0?ue<=Pt:he<=Ft)&&(We.push(Sr),We.push(Or-1),We.push(ca)),(tr===0?Le>=Pt:Ne>=Ft)&&(We.push(Or+1),We.push(Wt),We.push(ca))}return mt}function yt(se,te,ue,he,Le,Ne){for(var et=[0,se.length-1,0],We=[],mt=Le*Le;et.length;){var Pt=et.pop(),Ft=et.pop(),tr=et.pop();if(Ft-tr<=Ne){for(var Wt=tr;Wt<=Ft;Wt++)de(te[2*Wt],te[2*Wt+1],ue,he)<=mt&&We.push(se[Wt]);continue}var Sr=Math.floor((tr+Ft)/2),Zr=te[2*Sr],Or=te[2*Sr+1];de(Zr,Or,ue,he)<=mt&&We.push(se[Sr]);var ca=(Pt+1)%2;(Pt===0?ue-Le<=Zr:he-Le<=Or)&&(et.push(tr),et.push(Sr-1),et.push(ca)),(Pt===0?ue+Le>=Zr:he+Le>=Or)&&(et.push(Sr+1),et.push(Ft),et.push(ca))}return We}function de(se,te,ue,he){var Le=se-ue,Ne=te-he;return Le*Le+Ne*Ne}var ze=function(se){return se[0]},_e=function(se){return se[1]},Ue=function(te,ue,he,Le,Ne){ue===void 0&&(ue=ze),he===void 0&&(he=_e),Le===void 0&&(Le=64),Ne===void 0&&(Ne=Float64Array),this.nodeSize=Le,this.points=te;for(var et=te.length<65536?Uint16Array:Uint32Array,We=this.ids=new et(te.length),mt=this.coords=new Ne(te.length*2),Pt=0;Pt<te.length;Pt++)We[Pt]=Pt,mt[2*Pt]=ue(te[Pt]),mt[2*Pt+1]=he(te[Pt]);Ye(We,mt,Le,0,We.length-1,0)};Ue.prototype.range=function(te,ue,he,Le){return It(this.ids,this.coords,te,ue,he,Le,this.nodeSize)},Ue.prototype.within=function(te,ue,he){return yt(this.ids,this.coords,te,ue,he,this.nodeSize)};var at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(se){return se}},Je=function(te){this.options=Yt(Object.create(at),te),this.trees=new Array(this.options.maxZoom+1)};Je.prototype.load=function(te){var ue=this.options,he=ue.log,Le=ue.minZoom,Ne=ue.maxZoom,et=ue.nodeSize;he&&console.time("total time");var We="prepare "+te.length+" points";he&&console.time(We),this.points=te;for(var mt=[],Pt=0;Pt<te.length;Pt++)te[Pt].geometry&&mt.push(wt(te[Pt],Pt));this.trees[Ne+1]=new Ue(mt,Be,ut,et,Float32Array),he&&console.timeEnd(We);for(var Ft=Ne;Ft>=Le;Ft--){var tr=+Date.now();mt=this._cluster(mt,Ft),this.trees[Ft]=new Ue(mt,Be,ut,et,Float32Array),he&&console.log("z%d: %d clusters in %dms",Ft,mt.length,+Date.now()-tr)}return he&&console.timeEnd("total time"),this},Je.prototype.getClusters=function(te,ue){var he=((te[0]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,te[1])),Ne=te[2]===180?180:((te[2]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)he=-180,Ne=180;else if(he>Ne){var We=this.getClusters([he,Le,180,et],ue),mt=this.getClusters([-180,Le,Ne,et],ue);return We.concat(mt)}for(var Pt=this.trees[this._limitZoom(ue)],Ft=Pt.range(Ut(he),Dt(et),Ut(Ne),Dt(Le)),tr=[],Wt=0,Sr=Ft;Wt<Sr.length;Wt+=1){var Zr=Sr[Wt],Or=Pt.points[Zr];tr.push(Or.numPoints?xt(Or):this.points[Or.index])}return tr},Je.prototype.getChildren=function(te){var ue=this._getOriginId(te),he=this._getOriginZoom(te),Le="No cluster with the specified id.",Ne=this.trees[he];if(!Ne)throw new Error(Le);var et=Ne.points[ue];if(!et)throw new Error(Le);for(var We=this.options.radius/(this.options.extent*Math.pow(2,he-1)),mt=Ne.within(et.x,et.y,We),Pt=[],Ft=0,tr=mt;Ft<tr.length;Ft+=1){var Wt=tr[Ft],Sr=Ne.points[Wt];Sr.parentId===te&&Pt.push(Sr.numPoints?xt(Sr):this.points[Sr.index])}if(Pt.length===0)throw new Error(Le);return Pt},Je.prototype.getLeaves=function(te,ue,he){ue=ue||10,he=he||0;var Le=[];return this._appendLeaves(Le,te,ue,he,0),Le},Je.prototype.getTile=function(te,ue,he){var Le=this.trees[this._limitZoom(te)],Ne=Math.pow(2,te),et=this.options,We=et.extent,mt=et.radius,Pt=mt/We,Ft=(he-Pt)/Ne,tr=(he+1+Pt)/Ne,Wt={features:[]};return this._addTileFeatures(Le.range((ue-Pt)/Ne,Ft,(ue+1+Pt)/Ne,tr),Le.points,ue,he,Ne,Wt),ue===0&&this._addTileFeatures(Le.range(1-Pt/Ne,Ft,1,tr),Le.points,Ne,he,Ne,Wt),ue===Ne-1&&this._addTileFeatures(Le.range(0,Ft,Pt/Ne,tr),Le.points,-1,he,Ne,Wt),Wt.features.length?Wt:null},Je.prototype.getClusterExpansionZoom=function(te){for(var ue=this._getOriginZoom(te)-1;ue<=this.options.maxZoom;){var he=this.getChildren(te);if(ue++,he.length!==1)break;te=he[0].properties.cluster_id}return ue},Je.prototype._appendLeaves=function(te,ue,he,Le,Ne){for(var et=this.getChildren(ue),We=0,mt=et;We<mt.length;We+=1){var Pt=mt[We],Ft=Pt.properties;if(Ft&&Ft.cluster?Ne+Ft.point_count<=Le?Ne+=Ft.point_count:Ne=this._appendLeaves(te,Ft.cluster_id,he,Le,Ne):Ne<Le?Ne++:te.push(Pt),te.length===he)break}return Ne},Je.prototype._addTileFeatures=function(te,ue,he,Le,Ne,et){for(var We=0,mt=te;We<mt.length;We+=1){var Pt=mt[We],Ft=ue[Pt],tr=Ft.numPoints,Wt={type:1,geometry:[[Math.round(this.options.extent*(Ft.x*Ne-he)),Math.round(this.options.extent*(Ft.y*Ne-Le))]],tags:tr?qt(Ft):this.points[Ft.index].properties},Sr=void 0;tr?Sr=Ft.id:this.options.generateId?Sr=Ft.index:this.points[Ft.index].id&&(Sr=this.points[Ft.index].id),Sr!==void 0&&(Wt.id=Sr),et.features.push(Wt)}},Je.prototype._limitZoom=function(te){return Math.max(this.options.minZoom,Math.min(+te,this.options.maxZoom+1))},Je.prototype._cluster=function(te,ue){for(var he=[],Le=this.options,Ne=Le.radius,et=Le.extent,We=Le.reduce,mt=Le.minPoints,Pt=Ne/(et*Math.pow(2,ue)),Ft=0;Ft<te.length;Ft++){var tr=te[Ft];if(!(tr.zoom<=ue)){tr.zoom=ue;for(var Wt=this.trees[ue+1],Sr=Wt.within(tr.x,tr.y,Pt),Zr=tr.numPoints||1,Or=Zr,ca=0,ua=Sr;ca<ua.length;ca+=1){var qa=ua[ca],ri=Wt.points[qa];ri.zoom>ue&&(Or+=ri.numPoints||1)}if(Or>=mt){for(var Yr=tr.x*Zr,gr=tr.y*Zr,$r=We&&Zr>1?this._map(tr,!0):null,ga=(Ft<<5)+(ue+1)+this.points.length,nr=0,Ti=Sr;nr<Ti.length;nr+=1){var Ea=Ti[nr],si=Wt.points[Ea];if(!(si.zoom<=ue)){si.zoom=ue;var fa=si.numPoints||1;Yr+=si.x*fa,gr+=si.y*fa,si.parentId=ga,We&&($r||($r=this._map(tr,!0)),We($r,this._map(si)))}}tr.parentId=ga,he.push(Ct(Yr/Or,gr/Or,ga,Or,$r))}else if(he.push(tr),Or>1)for(var In=0,Co=Sr;In<Co.length;In+=1){var bs=Co[In],Ga=Wt.points[bs];Ga.zoom<=ue||(Ga.zoom=ue,he.push(Ga))}}}return he},Je.prototype._getOriginId=function(te){return te-this.points.length>>5},Je.prototype._getOriginZoom=function(te){return(te-this.points.length)%32},Je.prototype._map=function(te,ue){if(te.numPoints)return ue?Yt({},te.properties):te.properties;var he=this.points[te.index].properties,Le=this.options.map(he);return ue&&Le===he?Yt({},Le):Le};function Ct(se,te,ue,he,Le){return{x:se,y:te,zoom:1/0,id:ue,parentId:-1,numPoints:he,properties:Le}}function wt(se,te){var ue=se.geometry.coordinates,he=ue[0],Le=ue[1];return{x:Ut(he),y:Dt(Le),zoom:1/0,index:te,parentId:-1}}function xt(se){return{type:"Feature",id:se.id,properties:qt(se),geometry:{type:"Point",coordinates:[Mt(se.x),Zt(se.y)]}}}function qt(se){var te=se.numPoints,ue=te>=1e4?Math.round(te/1e3)+"k":te>=1e3?Math.round(te/100)/10+"k":te;return Yt(Yt({},se.properties),{cluster:!0,cluster_id:se.id,point_count:te,point_count_abbreviated:ue})}function Ut(se){return se/360+.5}function Dt(se){var te=Math.sin(se*Math.PI/180),ue=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ue<0?0:ue>1?1:ue}function Mt(se){return(se-.5)*360}function Zt(se){var te=(180-se*360)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function Yt(se,te){for(var ue in te)se[ue]=te[ue];return se}function Be(se){return se.x}function ut(se){return se.y}function sr(se,te,ue,he){for(var Le=he,Ne=ue-te>>1,et=ue-te,We,mt=se[te],Pt=se[te+1],Ft=se[ue],tr=se[ue+1],Wt=te+3;Wt<ue;Wt+=3){var Sr=Pr(se[Wt],se[Wt+1],mt,Pt,Ft,tr);if(Sr>Le)We=Wt,Le=Sr;else if(Sr===Le){var Zr=Math.abs(Wt-Ne);Zr<et&&(We=Wt,et=Zr)}}Le>he&&(We-te>3&&sr(se,te,We,he),se[We+2]=Le,ue-We>3&&sr(se,We,ue,he))}function Pr(se,te,ue,he,Le,Ne){var et=Le-ue,We=Ne-he;if(et!==0||We!==0){var mt=((se-ue)*et+(te-he)*We)/(et*et+We*We);mt>1?(ue=Le,he=Ne):mt>0&&(ue+=et*mt,he+=We*mt)}return et=se-ue,We=te-he,et*et+We*We}function Et(se,te,ue,he){var Le={id:typeof se=="undefined"?null:se,type:te,geometry:ue,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return ht(Le),Le}function ht(se){var te=se.geometry,ue=se.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")pt(se,te);else if(ue==="Polygon"||ue==="MultiLineString")for(var he=0;he<te.length;he++)pt(se,te[he]);else if(ue==="MultiPolygon")for(he=0;he<te.length;he++)for(var Le=0;Le<te[he].length;Le++)pt(se,te[he][Le])}function pt(se,te){for(var ue=0;ue<te.length;ue+=3)se.minX=Math.min(se.minX,te[ue]),se.minY=Math.min(se.minY,te[ue+1]),se.maxX=Math.max(se.maxX,te[ue]),se.maxY=Math.max(se.maxY,te[ue+1])}function Ot(se,te){var ue=[];if(se.type==="FeatureCollection")for(var he=0;he<se.features.length;he++)er(ue,se.features[he],te,he);else se.type==="Feature"?er(ue,se,te):er(ue,{geometry:se},te);return ue}function er(se,te,ue,he){if(te.geometry){var Le=te.geometry.coordinates,Ne=te.geometry.type,et=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),We=[],mt=te.id;if(ue.promoteId?mt=te.properties[ue.promoteId]:ue.generateId&&(mt=he||0),Ne==="Point")Ht(Le,We);else if(Ne==="MultiPoint")for(var Pt=0;Pt<Le.length;Pt++)Ht(Le[Pt],We);else if(Ne==="LineString")Kt(Le,We,et,!1);else if(Ne==="MultiLineString")if(ue.lineMetrics){for(Pt=0;Pt<Le.length;Pt++)We=[],Kt(Le[Pt],We,et,!1),se.push(Et(mt,"LineString",We,te.properties));return}else pr(Le,We,et,!1);else if(Ne==="Polygon")pr(Le,We,et,!0);else if(Ne==="MultiPolygon")for(Pt=0;Pt<Le.length;Pt++){var Ft=[];pr(Le[Pt],Ft,et,!0),We.push(Ft)}else if(Ne==="GeometryCollection"){for(Pt=0;Pt<te.geometry.geometries.length;Pt++)er(se,{id:mt,geometry:te.geometry.geometries[Pt],properties:te.properties},ue,he);return}else throw new Error("Input data is not a valid GeoJSON object.");se.push(Et(mt,Ne,We,te.properties))}}function Ht(se,te){te.push(yr(se[0])),te.push(ur(se[1])),te.push(0)}function Kt(se,te,ue,he){for(var Le,Ne,et=0,We=0;We<se.length;We++){var mt=yr(se[We][0]),Pt=ur(se[We][1]);te.push(mt),te.push(Pt),te.push(0),We>0&&(he?et+=(Le*Pt-mt*Ne)/2:et+=Math.sqrt(Math.pow(mt-Le,2)+Math.pow(Pt-Ne,2))),Le=mt,Ne=Pt}var Ft=te.length-3;te[2]=1,sr(te,0,Ft,ue),te[Ft+2]=1,te.size=Math.abs(et),te.start=0,te.end=te.size}function pr(se,te,ue,he){for(var Le=0;Le<se.length;Le++){var Ne=[];Kt(se[Le],Ne,ue,he),te.push(Ne)}}function yr(se){return se/360+.5}function ur(se){var te=Math.sin(se*Math.PI/180),ue=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ue<0?0:ue>1?1:ue}function Lt(se,te,ue,he,Le,Ne,et,We){if(ue/=te,he/=te,Ne>=ue&&et<he)return se;if(et<ue||Ne>=he)return null;for(var mt=[],Pt=0;Pt<se.length;Pt++){var Ft=se[Pt],tr=Ft.geometry,Wt=Ft.type,Sr=Le===0?Ft.minX:Ft.minY,Zr=Le===0?Ft.maxX:Ft.maxY;if(Sr>=ue&&Zr<he){mt.push(Ft);continue}else if(Zr<ue||Sr>=he)continue;var Or=[];if(Wt==="Point"||Wt==="MultiPoint")Fe(tr,Or,ue,he,Le);else if(Wt==="LineString")Ve(tr,Or,ue,he,Le,!1,We.lineMetrics);else if(Wt==="MultiLineString")Tt(tr,Or,ue,he,Le,!1);else if(Wt==="Polygon")Tt(tr,Or,ue,he,Le,!0);else if(Wt==="MultiPolygon")for(var ca=0;ca<tr.length;ca++){var ua=[];Tt(tr[ca],ua,ue,he,Le,!0),ua.length&&Or.push(ua)}if(Or.length){if(We.lineMetrics&&Wt==="LineString"){for(ca=0;ca<Or.length;ca++)mt.push(Et(Ft.id,Wt,Or[ca],Ft.tags));continue}(Wt==="LineString"||Wt==="MultiLineString")&&(Or.length===1?(Wt="LineString",Or=Or[0]):Wt="MultiLineString"),(Wt==="Point"||Wt==="MultiPoint")&&(Wt=Or.length===3?"Point":"MultiPoint"),mt.push(Et(Ft.id,Wt,Or,Ft.tags))}}return mt.length?mt:null}function Fe(se,te,ue,he,Le){for(var Ne=0;Ne<se.length;Ne+=3){var et=se[Ne+Le];et>=ue&&et<=he&&(te.push(se[Ne]),te.push(se[Ne+1]),te.push(se[Ne+2]))}}function Ve(se,te,ue,he,Le,Ne,et){for(var We=bt(se),mt=Le===0?Ar:Mr,Pt=se.start,Ft,tr,Wt=0;Wt<se.length-3;Wt+=3){var Sr=se[Wt],Zr=se[Wt+1],Or=se[Wt+2],ca=se[Wt+3],ua=se[Wt+4],qa=Le===0?Sr:Zr,ri=Le===0?ca:ua,Yr=!1;et&&(Ft=Math.sqrt(Math.pow(Sr-ca,2)+Math.pow(Zr-ua,2))),qa<ue?ri>ue&&(tr=mt(We,Sr,Zr,ca,ua,ue),et&&(We.start=Pt+Ft*tr)):qa>he?ri<he&&(tr=mt(We,Sr,Zr,ca,ua,he),et&&(We.start=Pt+Ft*tr)):mr(We,Sr,Zr,Or),ri<ue&&qa>=ue&&(tr=mt(We,Sr,Zr,ca,ua,ue),Yr=!0),ri>he&&qa<=he&&(tr=mt(We,Sr,Zr,ca,ua,he),Yr=!0),!Ne&&Yr&&(et&&(We.end=Pt+Ft*tr),te.push(We),We=bt(se)),et&&(Pt+=Ft)}var gr=se.length-3;Sr=se[gr],Zr=se[gr+1],Or=se[gr+2],qa=Le===0?Sr:Zr,qa>=ue&&qa<=he&&mr(We,Sr,Zr,Or),gr=We.length-3,Ne&&gr>=3&&(We[gr]!==We[0]||We[gr+1]!==We[1])&&mr(We,We[0],We[1],We[2]),We.length&&te.push(We)}function bt(se){var te=[];return te.size=se.size,te.start=se.start,te.end=se.end,te}function Tt(se,te,ue,he,Le,Ne){for(var et=0;et<se.length;et++)Ve(se[et],te,ue,he,Le,Ne,!1)}function mr(se,te,ue,he){se.push(te),se.push(ue),se.push(he)}function Ar(se,te,ue,he,Le,Ne){var et=(Ne-te)/(he-te);return se.push(Ne),se.push(ue+(Le-ue)*et),se.push(1),et}function Mr(se,te,ue,he,Le,Ne){var et=(Ne-ue)/(Le-ue);return se.push(te+(he-te)*et),se.push(Ne),se.push(1),et}function Gr(se,te){var ue=te.buffer/te.extent,he=se,Le=Lt(se,1,-1-ue,ue,0,-1,2,te),Ne=Lt(se,1,1-ue,2+ue,0,-1,2,te);return(Le||Ne)&&(he=Lt(se,1,-ue,1+ue,0,-1,2,te)||[],Le&&(he=pa(Le,1).concat(he)),Ne&&(he=he.concat(pa(Ne,-1)))),he}function pa(se,te){for(var ue=[],he=0;he<se.length;he++){var Le=se[he],Ne=Le.type,et;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")et=Ca(Le.geometry,te);else if(Ne==="MultiLineString"||Ne==="Polygon"){et=[];for(var We=0;We<Le.geometry.length;We++)et.push(Ca(Le.geometry[We],te))}else if(Ne==="MultiPolygon")for(et=[],We=0;We<Le.geometry.length;We++){for(var mt=[],Pt=0;Pt<Le.geometry[We].length;Pt++)mt.push(Ca(Le.geometry[We][Pt],te));et.push(mt)}ue.push(Et(Le.id,Ne,et,Le.tags))}return ue}function Ca(se,te){var ue=[];ue.size=se.size,se.start!==void 0&&(ue.start=se.start,ue.end=se.end);for(var he=0;he<se.length;he+=3)ue.push(se[he]+te,se[he+1],se[he+2]);return ue}function ii(se,te){if(se.transformed)return se;var ue=1<<se.z,he=se.x,Le=se.y,Ne,et,We;for(Ne=0;Ne<se.features.length;Ne++){var mt=se.features[Ne],Pt=mt.geometry,Ft=mt.type;if(mt.geometry=[],Ft===1)for(et=0;et<Pt.length;et+=2)mt.geometry.push(wi(Pt[et],Pt[et+1],te,ue,he,Le));else for(et=0;et<Pt.length;et++){var tr=[];for(We=0;We<Pt[et].length;We+=2)tr.push(wi(Pt[et][We],Pt[et][We+1],te,ue,he,Le));mt.geometry.push(tr)}}return se.transformed=!0,se}function wi(se,te,ue,he,Le,Ne){return[Math.round(ue*(se*he-Le)),Math.round(ue*(te*he-Ne))]}function vi(se,te,ue,he,Le){for(var Ne=te===Le.maxZoom?0:Le.tolerance/((1<<te)*Le.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:he,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<se.length;We++){et.numFeatures++,Fi(et,se[We],Ne,Le);var mt=se[We].minX,Pt=se[We].minY,Ft=se[We].maxX,tr=se[We].maxY;mt<et.minX&&(et.minX=mt),Pt<et.minY&&(et.minY=Pt),Ft>et.maxX&&(et.maxX=Ft),tr>et.maxY&&(et.maxY=tr)}return et}function Fi(se,te,ue,he){var Le=te.geometry,Ne=te.type,et=[];if(Ne==="Point"||Ne==="MultiPoint")for(var We=0;We<Le.length;We+=3)et.push(Le[We]),et.push(Le[We+1]),se.numPoints++,se.numSimplified++;else if(Ne==="LineString")Gi(et,Le,se,ue,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(We=0;We<Le.length;We++)Gi(et,Le[We],se,ue,Ne==="Polygon",We===0);else if(Ne==="MultiPolygon")for(var mt=0;mt<Le.length;mt++){var Pt=Le[mt];for(We=0;We<Pt.length;We++)Gi(et,Pt[We],se,ue,!0,We===0)}if(et.length){var Ft=te.tags||null;if(Ne==="LineString"&&he.lineMetrics){Ft={};for(var tr in te.tags)Ft[tr]=te.tags[tr];Ft.mapbox_clip_start=Le.start/Le.size,Ft.mapbox_clip_end=Le.end/Le.size}var Wt={geometry:et,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:Ft};te.id!==null&&(Wt.id=te.id),se.features.push(Wt)}}function Gi(se,te,ue,he,Le,Ne){var et=he*he;if(he>0&&te.size<(Le?et:he)){ue.numPoints+=te.length/3;return}for(var We=[],mt=0;mt<te.length;mt+=3)(he===0||te[mt+2]>et)&&(ue.numSimplified++,We.push(te[mt]),We.push(te[mt+1])),ue.numPoints++;Le&&vn(We,Ne),se.push(We)}function vn(se,te){for(var ue=0,he=0,Le=se.length,Ne=Le-2;he<Le;Ne=he,he+=2)ue+=(se[he]-se[Ne])*(se[he+1]+se[Ne+1]);if(ue>0===te)for(he=0,Le=se.length;he<Le/2;he+=2){var et=se[he],We=se[he+1];se[he]=se[Le-2-he],se[he+1]=se[Le-1-he],se[Le-2-he]=et,se[Le-1-he]=We}}function nn(se,te){return new Ki(se,te)}function Ki(se,te){te=this.options=oi(Object.create(this.options),te);var ue=te.debug;if(ue&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");var he=Ot(se,te);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=Gr(he,te),he.length&&this.splitTile(he,0,0,0),ue&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Ki.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ki.prototype.splitTile=function(se,te,ue,he,Le,Ne,et){for(var We=[se,te,ue,he],mt=this.options,Pt=mt.debug;We.length;){he=We.pop(),ue=We.pop(),te=We.pop(),se=We.pop();var Ft=1<<te,tr=ir(te,ue,he),Wt=this.tiles[tr];if(!Wt&&(Pt>1&&console.time("creation"),Wt=this.tiles[tr]=vi(se,te,ue,he,mt),this.tileCoords.push({z:te,x:ue,y:he}),Pt)){Pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,ue,he,Wt.numFeatures,Wt.numPoints,Wt.numSimplified),console.timeEnd("creation"));var Sr="z"+te;this.stats[Sr]=(this.stats[Sr]||0)+1,this.total++}if(Wt.source=se,Le){if(te===mt.maxZoom||te===Le)continue;var Zr=1<<Le-te;if(ue!==Math.floor(Ne/Zr)||he!==Math.floor(et/Zr))continue}else if(te===mt.indexMaxZoom||Wt.numPoints<=mt.indexMaxPoints)continue;if(Wt.source=null,se.length!==0){Pt>1&&console.time("clipping");var Or=.5*mt.buffer/mt.extent,ca=.5-Or,ua=.5+Or,qa=1+Or,ri,Yr,gr,$r,ga,nr;ri=Yr=gr=$r=null,ga=Lt(se,Ft,ue-Or,ue+ua,0,Wt.minX,Wt.maxX,mt),nr=Lt(se,Ft,ue+ca,ue+qa,0,Wt.minX,Wt.maxX,mt),se=null,ga&&(ri=Lt(ga,Ft,he-Or,he+ua,1,Wt.minY,Wt.maxY,mt),Yr=Lt(ga,Ft,he+ca,he+qa,1,Wt.minY,Wt.maxY,mt),ga=null),nr&&(gr=Lt(nr,Ft,he-Or,he+ua,1,Wt.minY,Wt.maxY,mt),$r=Lt(nr,Ft,he+ca,he+qa,1,Wt.minY,Wt.maxY,mt),nr=null),Pt>1&&console.timeEnd("clipping"),We.push(ri||[],te+1,ue*2,he*2),We.push(Yr||[],te+1,ue*2,he*2+1),We.push(gr||[],te+1,ue*2+1,he*2),We.push($r||[],te+1,ue*2+1,he*2+1)}}},Ki.prototype.getTile=function(se,te,ue){var he=this.options,Le=he.extent,Ne=he.debug;if(se<0||se>24)return null;var et=1<<se;te=(te%et+et)%et;var We=ir(se,te,ue);if(this.tiles[We])return ii(this.tiles[We],Le);Ne>1&&console.log("drilling down to z%d-%d-%d",se,te,ue);for(var mt=se,Pt=te,Ft=ue,tr;!tr&&mt>0;)mt--,Pt=Math.floor(Pt/2),Ft=Math.floor(Ft/2),tr=this.tiles[ir(mt,Pt,Ft)];return!tr||!tr.source?null:(Ne>1&&console.log("found parent tile z%d-%d-%d",mt,Pt,Ft),Ne>1&&console.time("drilling down"),this.splitTile(tr.source,mt,Pt,Ft,se,te,ue),Ne>1&&console.timeEnd("drilling down"),this.tiles[We]?ii(this.tiles[We],Le):null)};function ir(se,te,ue){return((1<<se)*ue+te)*32+se}function oi(se,te){for(var ue in te)se[ue]=te[ue];return se}function Sa(se,te){var ue=se.tileID.canonical;if(!this._geoJSONIndex)return te(null,null);var he=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!he)return te(null,null);var Le=new V(he.features),Ne=oe(Le);(Ne.byteOffset!==0||Ne.byteLength!==Ne.buffer.byteLength)&&(Ne=new Uint8Array(Ne)),te(null,{vectorTile:Le,rawData:Ne.buffer})}var la=function(se){function te(ue,he,Le,Ne){se.call(this,ue,he,Le,Sa),Ne&&(this.loadGeoJSON=Ne)}return se&&(te.__proto__=se),te.prototype=Object.create(se&&se.prototype),te.prototype.constructor=te,te.prototype.loadData=function(he,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Le,this._pendingLoadDataParams=he,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},te.prototype._loadData=function(){var he=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Le=this._pendingCallback,Ne=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var et=Ne&&Ne.request&&Ne.request.collectResourceTiming?new a.RequestPerformance(Ne.request):!1;this.loadGeoJSON(Ne,function(We,mt){if(We||!mt)return Le(We);if(typeof mt!="object")return Le(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));I(mt,!0);try{if(Ne.filter){var Pt=a.createExpression(Ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Pt.result==="error")throw new Error(Pt.value.map(function(Sr){return Sr.key+": "+Sr.message}).join(", "));var Ft=mt.features.filter(function(Sr){return Pt.value.evaluate({zoom:0},Sr)});mt={type:"FeatureCollection",features:Ft}}he._geoJSONIndex=Ne.cluster?new Je(Ci(Ne)).load(mt.features):nn(mt,Ne.geojsonVtOptions)}catch(Sr){return Le(Sr)}he.loaded={};var tr={};if(et){var Wt=et.finish();Wt&&(tr.resourceTiming={},tr.resourceTiming[Ne.source]=JSON.parse(JSON.stringify(Wt)))}Le(null,tr)})}},te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},te.prototype.reloadTile=function(he,Le){var Ne=this.loaded,et=he.uid;return Ne&&Ne[et]?se.prototype.reloadTile.call(this,he,Le):this.loadTile(he,Le)},te.prototype.loadGeoJSON=function(he,Le){if(he.request)a.getJSON(he.request,Le);else if(typeof he.data=="string")try{return Le(null,JSON.parse(he.data))}catch(Ne){return Le(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."))}else return Le(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."))},te.prototype.removeSource=function(he,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Le()},te.prototype.getClusterExpansionZoom=function(he,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(he.clusterId))}catch(Ne){Le(Ne)}},te.prototype.getClusterChildren=function(he,Le){try{Le(null,this._geoJSONIndex.getChildren(he.clusterId))}catch(Ne){Le(Ne)}},te.prototype.getClusterLeaves=function(he,Le){try{Le(null,this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset))}catch(Ne){Le(Ne)}},te}(C);function Ci(se){var te=se.superclusterOptions,ue=se.clusterProperties;if(!ue||!te)return te;for(var he={},Le={},Ne={accumulated:null,zoom:0},et={properties:null},We=Object.keys(ue),mt=0,Pt=We;mt<Pt.length;mt+=1){var Ft=Pt[mt],tr=ue[Ft],Wt=tr[0],Sr=tr[1],Zr=a.createExpression(Sr),Or=a.createExpression(typeof Wt=="string"?[Wt,["accumulated"],["get",Ft]]:Wt);he[Ft]=Zr.value,Le[Ft]=Or.value}return te.map=function(ca){et.properties=ca;for(var ua={},qa=0,ri=We;qa<ri.length;qa+=1){var Yr=ri[qa];ua[Yr]=he[Yr].evaluate(Ne,et)}return ua},te.reduce=function(ca,ua){et.properties=ua;for(var qa=0,ri=We;qa<ri.length;qa+=1){var Yr=ri[qa];Ne.accumulated=ca[Yr],ca[Yr]=Le[Yr].evaluate(Ne,et)}},te}var ma=function(te){var ue=this;this.self=te,this.actor=new a.Actor(te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:C,geojson:la},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(he,Le){if(ue.workerSourceTypes[he])throw new Error('Worker source with name "'+he+'" already registered.');ue.workerSourceTypes[he]=Le},this.self.registerRTLTextPlugin=function(he){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=he.applyArabicShaping,a.plugin.processBidirectionalText=he.processBidirectionalText,a.plugin.processStyledBidirectionalText=he.processStyledBidirectionalText}};return ma.prototype.setReferrer=function(te,ue){this.referrer=ue},ma.prototype.setImages=function(te,ue,he){this.availableImages[te]=ue;for(var Le in this.workerSources[te]){var Ne=this.workerSources[te][Le];for(var et in Ne)Ne[et].availableImages=ue}he()},ma.prototype.setLayers=function(te,ue,he){this.getLayerIndex(te).replace(ue),he()},ma.prototype.updateLayers=function(te,ue,he){this.getLayerIndex(te).update(ue.layers,ue.removedIds),he()},ma.prototype.loadTile=function(te,ue,he){this.getWorkerSource(te,ue.type,ue.source).loadTile(ue,he)},ma.prototype.loadDEMTile=function(te,ue,he){this.getDEMWorkerSource(te,ue.source).loadTile(ue,he)},ma.prototype.reloadTile=function(te,ue,he){this.getWorkerSource(te,ue.type,ue.source).reloadTile(ue,he)},ma.prototype.abortTile=function(te,ue,he){this.getWorkerSource(te,ue.type,ue.source).abortTile(ue,he)},ma.prototype.removeTile=function(te,ue,he){this.getWorkerSource(te,ue.type,ue.source).removeTile(ue,he)},ma.prototype.removeDEMTile=function(te,ue){this.getDEMWorkerSource(te,ue.source).removeTile(ue)},ma.prototype.removeSource=function(te,ue,he){if(!(!this.workerSources[te]||!this.workerSources[te][ue.type]||!this.workerSources[te][ue.type][ue.source])){var Le=this.workerSources[te][ue.type][ue.source];delete this.workerSources[te][ue.type][ue.source],Le.removeSource!==void 0?Le.removeSource(ue,he):he()}},ma.prototype.loadWorkerSource=function(te,ue,he){try{this.self.importScripts(ue.url),he()}catch(Le){he(Le.toString())}},ma.prototype.syncRTLPluginState=function(te,ue,he){try{a.plugin.setState(ue);var Le=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Le!=null){this.self.importScripts(Le);var Ne=a.plugin.isParsed(),et=Ne?void 0:new Error("RTL Text Plugin failed to import scripts from "+Le);he(et,Ne)}}catch(We){he(We.toString())}},ma.prototype.getAvailableImages=function(te){var ue=this.availableImages[te];return ue||(ue=[]),ue},ma.prototype.getLayerIndex=function(te){var ue=this.layerIndexes[te];return ue||(ue=this.layerIndexes[te]=new h),ue},ma.prototype.getWorkerSource=function(te,ue,he){var Le=this;if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ue]||(this.workerSources[te][ue]={}),!this.workerSources[te][ue][he]){var Ne={send:function(et,We,mt){Le.actor.send(et,We,mt,te)}};this.workerSources[te][ue][he]=new this.workerSourceTypes[ue](Ne,this.getLayerIndex(te),this.getAvailableImages(te))}return this.workerSources[te][ue][he]},ma.prototype.getDEMWorkerSource=function(te,ue){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ue]||(this.demWorkerSources[te][ue]=new L),this.demWorkerSources[te][ue]},ma.prototype.enforceCacheSizeLimit=function(te,ue){a.enforceCacheSizeLimit(ue)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ma(self)),ma}),i(["./shared"],function(a){"use strict";var s=a.createCommonjsModule(function(g){g.exports?g.exports=c:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=c,window.mapboxgl.notSupportedReason=b);function c(Oe){return!b(Oe)}function b(Oe){if(!d())return"not a browser";if(!w())return"insufficent Array support";if(!D())return"insufficient Function support";if(!R())return"insufficient Object support";if(!G())return"insufficient JSON support";if(!K())return"insufficient worker support";if(!re())return"insufficient Uint8ClampedArray support";if(!ce())return"insufficient ArrayBuffer support";if(!we())return"insufficient Canvas/getImageData support";if(!Re(Oe&&Oe.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function d(){return typeof window!="undefined"&&typeof document!="undefined"}function w(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function D(){return Function.prototype&&Function.prototype.bind}function R(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function G(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function K(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Oe=new Blob([""],{type:"text/javascript"}),Ke=URL.createObjectURL(Oe),vt,zt;try{zt=new Worker(Ke),vt=!0}catch(Nt){vt=!1}return zt&&zt.terminate(),URL.revokeObjectURL(Ke),vt}function re(){return"Uint8ClampedArray"in window}function ce(){return ArrayBuffer.isView}function we(){var Oe=document.createElement("canvas");Oe.width=Oe.height=1;var Ke=Oe.getContext("2d");if(!Ke)return!1;var vt=Ke.getImageData(0,0,1,1);return vt&&vt.width===Oe.width}var be={};function Re(Oe){return be[Oe]===void 0&&(be[Oe]=Ge(Oe)),be[Oe]}c.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Ze(Oe){var Ke=document.createElement("canvas"),vt=Object.create(c.webGLContextAttributes);return vt.failIfMajorPerformanceCaveat=Oe,Ke.probablySupportsContext?Ke.probablySupportsContext("webgl",vt)||Ke.probablySupportsContext("experimental-webgl",vt):Ke.supportsContext?Ke.supportsContext("webgl",vt)||Ke.supportsContext("experimental-webgl",vt):Ke.getContext("webgl",vt)||Ke.getContext("experimental-webgl",vt)}function Ge(Oe){var Ke=Ze(Oe);if(!Ke)return!1;var vt=Ke.createShader(Ke.VERTEX_SHADER);return!vt||Ke.isContextLost()?!1:(Ke.shaderSource(vt,"void main() {}"),Ke.compileShader(vt),Ke.getShaderParameter(vt,Ke.COMPILE_STATUS)===!0)}}),l={};l.create=function(g,c,b){var d=a.window.document.createElement(g);return c!==void 0&&(d.className=c),b&&b.appendChild(d),d},l.createNS=function(g,c){var b=a.window.document.createElementNS(g,c);return b};var f=a.window.document&&a.window.document.documentElement.style;function h(g){if(!f)return g[0];for(var c=0;c<g.length;c++)if(g[c]in f)return g[c];return g[0]}var v=h(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),m;l.disableDrag=function(){f&&v&&(m=f[v],f[v]="none")},l.enableDrag=function(){f&&v&&(f[v]=m)};var _=h(["transform","WebkitTransform"]);l.setTransform=function(g,c){g.style[_]=c};var T=!1;try{var M=Object.defineProperty({},"passive",{get:function(){T=!0}});a.window.addEventListener("test",M,M),a.window.removeEventListener("test",M,M)}catch(g){T=!1}l.addEventListener=function(g,c,b,d){d===void 0&&(d={}),"passive"in d&&T?g.addEventListener(c,b,d):g.addEventListener(c,b,d.capture)},l.removeEventListener=function(g,c,b,d){d===void 0&&(d={}),"passive"in d&&T?g.removeEventListener(c,b,d):g.removeEventListener(c,b,d.capture)};var C=function(g){g.preventDefault(),g.stopPropagation(),a.window.removeEventListener("click",C,!0)};l.suppressClick=function(){a.window.addEventListener("click",C,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",C,!0)},0)},l.mousePos=function(g,c){var b=g.getBoundingClientRect();return new a.Point(c.clientX-b.left-g.clientLeft,c.clientY-b.top-g.clientTop)},l.touchPos=function(g,c){for(var b=g.getBoundingClientRect(),d=[],w=0;w<c.length;w++)d.push(new a.Point(c[w].clientX-b.left-g.clientLeft,c[w].clientY-b.top-g.clientTop));return d},l.mouseButton=function(g){return typeof a.window.InstallTrigger!="undefined"&&g.button===2&&g.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button},l.remove=function(g){g.parentNode&&g.parentNode.removeChild(g)};function E(g,c,b){var d,w,D,R=a.browser.devicePixelRatio>1?"@2x":"",G=a.getJSON(c.transformRequest(c.normalizeSpriteURL(g,R,".json"),a.ResourceType.SpriteJSON),function(ce,we){G=null,D||(D=ce,d=we,re())}),K=a.getImage(c.transformRequest(c.normalizeSpriteURL(g,R,".png"),a.ResourceType.SpriteImage),function(ce,we){K=null,D||(D=ce,w=we,re())});function re(){if(D)b(D);else if(d&&w){var ce=a.browser.getImageData(w),we={};for(var be in d){var Re=d[be],Ze=Re.width,Ge=Re.height,Oe=Re.x,Ke=Re.y,vt=Re.sdf,zt=Re.pixelRatio,Nt=Re.stretchX,Qt=Re.stretchY,rr=Re.content,Gt=new a.RGBAImage({width:Ze,height:Ge});a.RGBAImage.copy(ce,Gt,{x:Oe,y:Ke},{x:0,y:0},{width:Ze,height:Ge}),we[be]={data:Gt,pixelRatio:zt,sdf:vt,stretchX:Nt,stretchY:Qt,content:rr}}b(null,we)}}return{cancel:function(){G&&(G.cancel(),G=null),K&&(K.cancel(),K=null)}}}function L(g){var c=g.userImage;if(c&&c.render){var b=c.render();if(b)return g.data.replace(new Uint8Array(c.data.buffer)),!0}return!1}var I=1,O=function(g){function c(){g.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.isLoaded=function(){return this.loaded},c.prototype.setLoaded=function(d){if(this.loaded!==d&&(this.loaded=d,d)){for(var w=0,D=this.requestors;w<D.length;w+=1){var R=D[w],G=R.ids,K=R.callback;this._notify(G,K)}this.requestors=[]}},c.prototype.getImage=function(d){return this.images[d]},c.prototype.addImage=function(d,w){this._validate(d,w)&&(this.images[d]=w)},c.prototype._validate=function(d,w){var D=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "stretchX" value'))),D=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "stretchY" value'))),D=!1),this._validateContent(w.content,w)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "content" value'))),D=!1),D},c.prototype._validateStretch=function(d,w){if(!d)return!0;for(var D=0,R=0,G=d;R<G.length;R+=1){var K=G[R];if(K[0]<D||K[1]<K[0]||w<K[1])return!1;D=K[1]}return!0},c.prototype._validateContent=function(d,w){return d?!(d.length!==4||d[0]<0||w.data.width<d[0]||d[1]<0||w.data.height<d[1]||d[2]<0||w.data.width<d[2]||d[3]<0||w.data.height<d[3]||d[2]<d[0]||d[3]<d[1]):!0},c.prototype.updateImage=function(d,w){var D=this.images[d];w.version=D.version+1,this.images[d]=w,this.updatedImages[d]=!0},c.prototype.removeImage=function(d){var w=this.images[d];delete this.images[d],delete this.patterns[d],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},c.prototype.listImages=function(){return Object.keys(this.images)},c.prototype.getImages=function(d,w){var D=!0;if(!this.isLoaded())for(var R=0,G=d;R<G.length;R+=1){var K=G[R];this.images[K]||(D=!1)}this.isLoaded()||D?this._notify(d,w):this.requestors.push({ids:d,callback:w})},c.prototype._notify=function(d,w){for(var D={},R=0,G=d;R<G.length;R+=1){var K=G[R];this.images[K]||this.fire(new a.Event("styleimagemissing",{id:K}));var re=this.images[K];re?D[K]={data:re.data.clone(),pixelRatio:re.pixelRatio,sdf:re.sdf,version:re.version,stretchX:re.stretchX,stretchY:re.stretchY,content:re.content,hasRenderCallback:!!(re.userImage&&re.userImage.render)}:a.warnOnce('Image "'+K+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,D)},c.prototype.getPixelSize=function(){var d=this.atlasImage,w=d.width,D=d.height;return{width:w,height:D}},c.prototype.getPattern=function(d){var w=this.patterns[d],D=this.getImage(d);if(!D)return null;if(w&&w.position.version===D.version)return w.position;if(w)w.position.version=D.version;else{var R=D.data.width+I*2,G=D.data.height+I*2,K={w:R,h:G,x:0,y:0},re=new a.ImagePosition(K,D);this.patterns[d]={bin:K,position:re}}return this._updatePatternAtlas(),this.patterns[d].position},c.prototype.bind=function(d){var w=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(d,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},c.prototype._updatePatternAtlas=function(){var d=[];for(var w in this.patterns)d.push(this.patterns[w].bin);var D=a.potpack(d),R=D.w,G=D.h,K=this.atlasImage;K.resize({width:R||1,height:G||1});for(var re in this.patterns){var ce=this.patterns[re],we=ce.bin,be=we.x+I,Re=we.y+I,Ze=this.images[re].data,Ge=Ze.width,Oe=Ze.height;a.RGBAImage.copy(Ze,K,{x:0,y:0},{x:be,y:Re},{width:Ge,height:Oe}),a.RGBAImage.copy(Ze,K,{x:0,y:Oe-1},{x:be,y:Re-1},{width:Ge,height:1}),a.RGBAImage.copy(Ze,K,{x:0,y:0},{x:be,y:Re+Oe},{width:Ge,height:1}),a.RGBAImage.copy(Ze,K,{x:Ge-1,y:0},{x:be-1,y:Re},{width:1,height:Oe}),a.RGBAImage.copy(Ze,K,{x:0,y:0},{x:be+Ge,y:Re},{width:1,height:Oe})}this.dirty=!0},c.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},c.prototype.dispatchRenderCallbacks=function(d){for(var w=0,D=d;w<D.length;w+=1){var R=D[w];if(!this.callbackDispatchedThisFrame[R]){this.callbackDispatchedThisFrame[R]=!0;var G=this.images[R],K=L(G);K&&this.updateImage(R,G)}}},c}(a.Evented);function q(g,c,b,d,w){var D=c*256,R=D+255,G=d.transformRequest(d.normalizeGlyphsURL(b).replace("{fontstack}",g).replace("{range}",D+"-"+R),a.ResourceType.Glyphs);a.getArrayBuffer(G,function(K,re){if(K)w(K);else if(re){for(var ce={},we=0,be=a.parseGlyphPBF(re);we<be.length;we+=1){var Re=be[we];ce[Re.id]=Re}w(null,ce)}})}var z=V,N=V,H=1e20;function V(g,c,b,d,w,D){this.fontSize=g||24,this.buffer=c===void 0?3:c,this.cutoff=d||.25,this.fontFamily=w||"sans-serif",this.fontWeight=D||"normal",this.radius=b||8;var R=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=R,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.d=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Int16Array(R),this.middle=Math.round(R/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}V.prototype.draw=function(g){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(g,this.buffer,this.middle);for(var c=this.ctx.getImageData(0,0,this.size,this.size),b=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var w=c.data[d*4+3]/255;this.gridOuter[d]=w===1?0:w===0?H:Math.pow(Math.max(0,.5-w),2),this.gridInner[d]=w===1?H:w===0?0:Math.pow(Math.max(0,w-.5),2)}for(W(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),W(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++){var D=this.gridOuter[d]-this.gridInner[d];b[d]=Math.max(0,Math.min(255,Math.round(255-255*(D/this.radius+this.cutoff))))}return b};function W(g,c,b,d,w,D,R){for(var G=0;G<c;G++){for(var K=0;K<b;K++)d[K]=g[K*c+G];for(J(d,w,D,R,b),K=0;K<b;K++)g[K*c+G]=w[K]}for(K=0;K<b;K++){for(G=0;G<c;G++)d[G]=g[K*c+G];for(J(d,w,D,R,c),G=0;G<c;G++)g[K*c+G]=Math.sqrt(w[G])}}function J(g,c,b,d,w){b[0]=0,d[0]=-H,d[1]=+H;for(var D=1,R=0;D<w;D++){for(var G=(g[D]+D*D-(g[b[R]]+b[R]*b[R]))/(2*D-2*b[R]);G<=d[R];)R--,G=(g[D]+D*D-(g[b[R]]+b[R]*b[R]))/(2*D-2*b[R]);R++,b[R]=D,d[R]=G,d[R+1]=+H}for(D=0,R=0;D<w;D++){for(;d[R+1]<D;)R++;c[D]=(D-b[R])*(D-b[R])+g[b[R]]}}z.default=N;var ee=function(c,b){this.requestManager=c,this.localIdeographFontFamily=b,this.entries={}};ee.prototype.setURL=function(c){this.url=c},ee.prototype.getGlyphs=function(c,b){var d=this,w=[];for(var D in c)for(var R=0,G=c[D];R<G.length;R+=1){var K=G[R];w.push({stack:D,id:K})}a.asyncAll(w,function(re,ce){var we=re.stack,be=re.id,Re=d.entries[we];Re||(Re=d.entries[we]={glyphs:{},requests:{},ranges:{}});var Ze=Re.glyphs[be];if(Ze!==void 0){ce(null,{stack:we,id:be,glyph:Ze});return}if(Ze=d._tinySDF(Re,we,be),Ze){Re.glyphs[be]=Ze,ce(null,{stack:we,id:be,glyph:Ze});return}var Ge=Math.floor(be/256);if(Ge*256>65535){ce(new Error("glyphs > 65535 not supported"));return}if(Re.ranges[Ge]){ce(null,{stack:we,id:be,glyph:Ze});return}var Oe=Re.requests[Ge];Oe||(Oe=Re.requests[Ge]=[],ee.loadGlyphRange(we,Ge,d.url,d.requestManager,function(Ke,vt){if(vt){for(var zt in vt)d._doesCharSupportLocalGlyph(+zt)||(Re.glyphs[+zt]=vt[+zt]);Re.ranges[Ge]=!0}for(var Nt=0,Qt=Oe;Nt<Qt.length;Nt+=1){var rr=Qt[Nt];rr(Ke,vt)}delete Re.requests[Ge]})),Oe.push(function(Ke,vt){Ke?ce(Ke):vt&&ce(null,{stack:we,id:be,glyph:vt[be]||null})})},function(re,ce){if(re)b(re);else if(ce){for(var we={},be=0,Re=ce;be<Re.length;be+=1){var Ze=Re[be],Ge=Ze.stack,Oe=Ze.id,Ke=Ze.glyph;(we[Ge]||(we[Ge]={}))[Oe]=Ke&&{id:Ke.id,bitmap:Ke.bitmap.clone(),metrics:Ke.metrics}}b(null,we)}})},ee.prototype._doesCharSupportLocalGlyph=function(c){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](c)||a.isChar["Hangul Syllables"](c)||a.isChar.Hiragana(c)||a.isChar.Katakana(c))},ee.prototype._tinySDF=function(c,b,d){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(d)){var D=c.tinySDF;if(!D){var R="400";/bold/i.test(b)?R="900":/medium/i.test(b)?R="500":/light/i.test(b)&&(R="200"),D=c.tinySDF=new ee.TinySDF(24,3,8,.25,w,R)}return{id:d,bitmap:new a.AlphaImage({width:30,height:30},D.draw(String.fromCharCode(d))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ee.loadGlyphRange=q,ee.TinySDF=z;var ie=function(){this.specification=a.styleSpec.light.position};ie.prototype.possiblyEvaluate=function(c,b){return a.sphericalToCartesian(c.expression.evaluate(b))},ie.prototype.interpolate=function(c,b,d){return{x:a.number(c.x,b.x,d),y:a.number(c.y,b.y,d),z:a.number(c.z,b.z,d)}};var oe=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new ie,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),fe="-transition",le=function(g){function c(b){g.call(this),this._transitionable=new a.Transitionable(oe),this.setLight(b),this._transitioning=this._transitionable.untransitioned()}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getLight=function(){return this._transitionable.serialize()},c.prototype.setLight=function(d,w){if(w===void 0&&(w={}),!this._validate(a.validateLight,d,w))for(var D in d){var R=d[D];a.endsWith(D,fe)?this._transitionable.setTransition(D.slice(0,-fe.length),R):this._transitionable.setValue(D,R)}},c.prototype.updateTransitions=function(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)},c.prototype.hasTransition=function(){return this._transitioning.hasTransition()},c.prototype.recalculate=function(d){this.properties=this._transitioning.possiblyEvaluate(d)},c.prototype._validate=function(d,w,D){return D&&D.validate===!1?!1:a.emitValidationErrors(this,d.call(a.validateStyle,a.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},c}(a.Evented),Te=function(c,b){this.width=c,this.height=b,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Te.prototype.getDash=function(c,b){var d=c.join(",")+String(b);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(c,b)),this.dashEntry[d]},Te.prototype.getDashRanges=function(c,b,d){var w=c.length%2===1,D=[],R=w?-c[c.length-1]*d:0,G=c[0]*d,K=!0;D.push({left:R,right:G,isDash:K,zeroLength:c[0]===0});for(var re=c[0],ce=1;ce<c.length;ce++){K=!K;var we=c[ce];R=re*d,re+=we,G=re*d,D.push({left:R,right:G,isDash:K,zeroLength:we===0})}return D},Te.prototype.addRoundDash=function(c,b,d){for(var w=b/2,D=-d;D<=d;D++)for(var R=this.nextRow+d+D,G=this.width*R,K=0,re=c[K],ce=0;ce<this.width;ce++){ce/re.right>1&&(re=c[++K]);var we=Math.abs(ce-re.left),be=Math.abs(ce-re.right),Re=Math.min(we,be),Ze=void 0,Ge=D/d*(w+1);if(re.isDash){var Oe=w-Math.abs(Ge);Ze=Math.sqrt(Re*Re+Oe*Oe)}else Ze=w-Math.sqrt(Re*Re+Ge*Ge);this.data[G+ce]=Math.max(0,Math.min(255,Ze+128))}},Te.prototype.addRegularDash=function(c){for(var b=c.length-1;b>=0;--b){var d=c[b],w=c[b+1];d.zeroLength?c.splice(b,1):w&&w.isDash===d.isDash&&(w.left=d.left,c.splice(b,1))}var D=c[0],R=c[c.length-1];D.isDash===R.isDash&&(D.left=R.left-this.width,R.right=D.right+this.width);for(var G=this.width*this.nextRow,K=0,re=c[K],ce=0;ce<this.width;ce++){ce/re.right>1&&(re=c[++K]);var we=Math.abs(ce-re.left),be=Math.abs(ce-re.right),Re=Math.min(we,be),Ze=re.isDash?Re:-Re;this.data[G+ce]=Math.max(0,Math.min(255,Ze+128))}},Te.prototype.addDash=function(c,b){var d=b?7:0,w=2*d+1;if(this.nextRow+w>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var D=0,R=0;R<c.length;R++)D+=c[R];if(D!==0){var G=this.width/D,K=this.getDashRanges(c,this.width,G);b?this.addRoundDash(K,G,d):this.addRegularDash(K)}var re={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:D};return this.nextRow+=w,this.dirty=!0,re},Te.prototype.bind=function(c){var b=c.gl;this.texture?(b.bindTexture(b.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.width,this.height,b.ALPHA,b.UNSIGNED_BYTE,this.data))):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.ALPHA,this.width,this.height,0,b.ALPHA,b.UNSIGNED_BYTE,this.data))};var Se=function g(c,b){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var d=this.workerPool.acquire(this.id),w=0;w<d.length;w++){var D=d[w],R=new g.Actor(D,b,this.id);R.name="Worker "+w,this.actors.push(R)}};Se.prototype.broadcast=function(c,b,d){d=d||function(){},a.asyncAll(this.actors,function(w,D){w.send(c,b,D)},d)},Se.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Se.prototype.remove=function(){this.actors.forEach(function(c){c.remove()}),this.actors=[],this.workerPool.release(this.id)},Se.Actor=a.Actor;function Me(g,c,b){var d=function(w,D){if(w)return b(w);if(D){var R=a.pick(a.extend(D,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(R.vectorLayers=D.vector_layers,R.vectorLayerIds=R.vectorLayers.map(function(G){return G.id})),R.tiles=c.canonicalizeTileset(R,g.url),b(null,R)}};return g.url?a.getJSON(c.transformRequest(c.normalizeSourceURL(g.url),a.ResourceType.Source),d):a.browser.frame(function(){return d(null,g)})}var Ae=function(c,b,d){this.bounds=a.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=b||0,this.maxzoom=d||24};Ae.prototype.validateBounds=function(c){return!Array.isArray(c)||c.length!==4?[-180,-90,180,90]:[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]},Ae.prototype.contains=function(c){var b=Math.pow(2,c.z),d={minX:Math.floor(a.mercatorXfromLng(this.bounds.getWest())*b),minY:Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*b),maxX:Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*b),maxY:Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*b)},w=c.x>=d.minX&&c.x<d.maxX&&c.y>=d.minY&&c.y<d.maxY;return w};var pe=function(g){function c(b,d,w,D){if(g.call(this),this.id=b,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Me(this._options,this.map._requestManager,function(w,D){d._tileJSONRequest=null,d._loaded=!0,w?d.fire(new a.ErrorEvent(w)):D&&(a.extend(d,D),D.bounds&&(d.tileBounds=new Ae(D.bounds,d.minzoom,d.maxzoom)),a.postTurnstileEvent(D.tiles,d.map._requestManager._customAccessToken),a.postMapLoadEvent(D.tiles,d.map._getMapId(),d.map._requestManager._skuToken,d.map._requestManager._customAccessToken),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.hasTile=function(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.setSourceProperty=function(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d();var w=this.map.style.sourceCaches[this.id];w.clearTiles(),this.load()},c.prototype.setTiles=function(d){var w=this;return this.setSourceProperty(function(){w._options.tiles=d}),this},c.prototype.setUrl=function(d){var w=this;return this.setSourceProperty(function(){w.url=d,w._options.url=d}),this},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return a.extend({},this._options)},c.prototype.loadTile=function(d,w){var D=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),R={request:this.map._requestManager.transformRequest(D,a.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};R.request.collectResourceTiming=this._collectResourceTiming,!d.actor||d.state==="expired"?(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",R,G.bind(this))):d.state==="loading"?d.reloadCallback=w:d.request=d.actor.send("reloadTile",R,G.bind(this));function G(K,re){if(delete d.request,d.aborted)return w(null);if(K&&K.status!==404)return w(K);re&&re.resourceTiming&&(d.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&d.setExpiryData(re),d.loadVectorData(re,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),w(null),d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)}},c.prototype.abortTile=function(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)},c.prototype.unloadTile=function(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)},c.prototype.hasTransition=function(){return!1},c}(a.Evented),ke=function(g){function c(b,d,w,D){g.call(this),this.id=b,this.dispatcher=w,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Me(this._options,this.map._requestManager,function(w,D){d._tileJSONRequest=null,d._loaded=!0,w?d.fire(new a.ErrorEvent(w)):D&&(a.extend(d,D),D.bounds&&(d.tileBounds=new Ae(D.bounds,d.minzoom,d.maxzoom)),a.postTurnstileEvent(D.tiles),a.postMapLoadEvent(D.tiles,d.map._getMapId(),d.map._requestManager._skuToken),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return a.extend({},this._options)},c.prototype.hasTile=function(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)},c.prototype.loadTile=function(d,w){var D=this,R=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);d.request=a.getImage(this.map._requestManager.transformRequest(R,a.ResourceType.Tile),function(G,K){if(delete d.request,d.aborted)d.state="unloaded",w(null);else if(G)d.state="errored",w(G);else if(K){D.map._refreshExpiredTiles&&d.setExpiryData(K),delete K.cacheControl,delete K.expires;var re=D.map.painter.context,ce=re.gl;d.texture=D.map.painter.getTileTexture(K.width),d.texture?d.texture.update(K,{useMipmap:!0}):(d.texture=new a.Texture(re,K,ce.RGBA,{useMipmap:!0}),d.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST),re.extTextureFilterAnisotropic&&ce.texParameterf(ce.TEXTURE_2D,re.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,re.extTextureFilterAnisotropicMax)),d.state="loaded",a.cacheEntryPossiblyAdded(D.dispatcher),w(null)}})},c.prototype.abortTile=function(d,w){d.request&&(d.request.cancel(),delete d.request),w()},c.prototype.unloadTile=function(d,w){d.texture&&this.map.painter.saveTileTexture(d.texture),w()},c.prototype.hasTransition=function(){return!1},c}(a.Evented),Ee=function(g){function c(b,d,w,D){g.call(this,b,d,w,D),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},c.prototype.loadTile=function(d,w){var D=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);d.request=a.getImage(this.map._requestManager.transformRequest(D,a.ResourceType.Tile),R.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID);function R(K,re){if(delete d.request,d.aborted)d.state="unloaded",w(null);else if(K)d.state="errored",w(K);else if(re){this.map._refreshExpiredTiles&&d.setExpiryData(re),delete re.cacheControl,delete re.expires;var ce=a.window.ImageBitmap&&re instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported(),we=ce?re:a.browser.getImageData(re,1),be={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:we,encoding:this.encoding};(!d.actor||d.state==="expired")&&(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",be,G.bind(this)))}}function G(K,re){K&&(d.state="errored",w(K)),re&&(d.dem=re,d.needsHillshadePrepare=!0,d.state="loaded",w(null))}},c.prototype._getNeighboringTiles=function(d){var w=d.canonical,D=Math.pow(2,w.z),R=(w.x-1+D)%D,G=w.x===0?d.wrap-1:d.wrap,K=(w.x+1+D)%D,re=w.x+1===D?d.wrap+1:d.wrap,ce={};return ce[new a.OverscaledTileID(d.overscaledZ,G,w.z,R,w.y).key]={backfilled:!1},ce[new a.OverscaledTileID(d.overscaledZ,re,w.z,K,w.y).key]={backfilled:!1},w.y>0&&(ce[new a.OverscaledTileID(d.overscaledZ,G,w.z,R,w.y-1).key]={backfilled:!1},ce[new a.OverscaledTileID(d.overscaledZ,d.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},ce[new a.OverscaledTileID(d.overscaledZ,re,w.z,K,w.y-1).key]={backfilled:!1}),w.y+1<D&&(ce[new a.OverscaledTileID(d.overscaledZ,G,w.z,R,w.y+1).key]={backfilled:!1},ce[new a.OverscaledTileID(d.overscaledZ,d.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},ce[new a.OverscaledTileID(d.overscaledZ,re,w.z,K,w.y+1).key]={backfilled:!1}),ce},c.prototype.unloadTile=function(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})},c}(ke),Xe=function(g){function c(b,d,w,D){g.call(this),this.id=b,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=w.getActor(),this.setEventedParent(D),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var R=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*R,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*R,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*R,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w){d.fire(new a.ErrorEvent(w));return}var D={dataType:"source",sourceDataType:"metadata"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(D.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new a.Event("data",D))})},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.setData=function(d){var w=this;return this._data=d,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D){w.fire(new a.ErrorEvent(D));return}var R={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(R.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new a.Event("data",R))}),this},c.prototype.getClusterExpansionZoom=function(d,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},w),this},c.prototype.getClusterChildren=function(d,w){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},w),this},c.prototype.getClusterLeaves=function(d,w,D,R){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:w,offset:D},R),this},c.prototype._updateWorkerData=function(d){var w=this;this._loaded=!1;var D=a.extend({},this.workerOptions),R=this._data;typeof R=="string"?(D.request=this.map._requestManager.transformRequest(a.browser.resolveURL(R),a.ResourceType.Source),D.request.collectResourceTiming=this._collectResourceTiming):D.data=JSON.stringify(R),this.actor.send(this.type+".loadData",D,function(G,K){w._removed||K&&K.abandoned||(w._loaded=!0,K&&K.resourceTiming&&K.resourceTiming[w.id]&&(w._resourceTiming=K.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:D.source},null),d(G))})},c.prototype.loaded=function(){return this._loaded},c.prototype.loadTile=function(d,w){var D=this,R=d.actor?"reloadTile":"loadTile";d.actor=this.actor;var G={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(R,G,function(K,re){return delete d.request,d.unloadVectorData(),d.aborted?w(null):K?w(K):(d.loadVectorData(re,D.map.painter,R==="reloadTile"),w(null))})},c.prototype.abortTile=function(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0},c.prototype.unloadTile=function(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})},c.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},c.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(a.Evented),lt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),it=function(g){function c(b,d,w,D){g.call(this),this.id=b,this.dispatcher=w,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=d}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(d,w){var D=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(R,G){D._loaded=!0,R?D.fire(new a.ErrorEvent(R)):G&&(D.image=G,d&&(D.coordinates=d),w&&w(),D._finishLoading())})},c.prototype.loaded=function(){return this._loaded},c.prototype.updateImage=function(d){var w=this;return!this.image||!d.url?this:(this.options.url=d.url,this.load(d.coordinates,function(){w.texture=null}),this)},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.setCoordinates=function(d){var w=this;this.coordinates=d;var D=d.map(a.MercatorCoordinate.fromLngLat);this.tileID=_t(D),this.minzoom=this.maxzoom=this.tileID.z;var R=D.map(function(G){return w.tileID.getTilePoint(G)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(R[0].x,R[0].y,0,0),this._boundsArray.emplaceBack(R[1].x,R[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(R[3].x,R[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(R[2].x,R[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,lt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(d,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(var D in this.tiles){var R=this.tiles[D];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}},c.prototype.loadTile=function(d,w){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},w(null)):(d.state="errored",w(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return!1},c}(a.Evented);function _t(g){for(var c=1/0,b=1/0,d=-1/0,w=-1/0,D=0,R=g;D<R.length;D+=1){var G=R[D];c=Math.min(c,G.x),b=Math.min(b,G.y),d=Math.max(d,G.x),w=Math.max(w,G.y)}var K=d-c,re=w-b,ce=Math.max(K,re),we=Math.max(0,Math.floor(-Math.log(ce)/Math.LN2)),be=Math.pow(2,we);return new a.CanonicalTileID(we,Math.floor((c+d)/2*be),Math.floor((b+w)/2*be))}var Ye=function(g){function c(b,d,w,D){g.call(this,b,d,w,D),this.roundZoom=!0,this.type="video",this.options=d}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this._loaded=!1;var w=this.options;this.urls=[];for(var D=0,R=w.urls;D<R.length;D+=1){var G=R[D];this.urls.push(this.map._requestManager.transformRequest(G,a.ResourceType.Source).url)}a.getVideo(this.urls,function(K,re){d._loaded=!0,K?d.fire(new a.ErrorEvent(K)):re&&(d.video=re,d.video.loop=!0,d.video.addEventListener("playing",function(){d.map.triggerRepaint()}),d.map&&d.video.play(),d._finishLoading())})},c.prototype.pause=function(){this.video&&this.video.pause()},c.prototype.play=function(){this.video&&this.video.play()},c.prototype.seek=function(d){if(this.video){var w=this.video.seekable;d<w.start(0)||d>w.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=d}},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,lt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(d,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(var D in this.tiles){var R=this.tiles[D];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}},c.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(it),kt=function(g){function c(b,d,w,D){g.call(this,b,d,w,D),d.coordinates?(!Array.isArray(d.coordinates)||d.coordinates.length!==4||d.coordinates.some(function(R){return!Array.isArray(R)||R.length!==2||R.some(function(G){return typeof G!="number"})}))&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas!="string"&&!(d.canvas instanceof a.window.HTMLCanvasElement)&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+b,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate!==void 0?d.animate:!0}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var w=this.map.painter.context,D=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,lt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(w,this.canvas,D.RGBA,{premultiply:!0});for(var R in this.tiles){var G=this.tiles[R];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var d=0,w=[this.canvas.width,this.canvas.height];d<w.length;d+=1){var D=w[d];if(isNaN(D)||D<=0)return!0}return!1},c}(it),st={vector:pe,raster:ke,"raster-dem":Ee,geojson:Xe,video:Ye,image:it,canvas:kt},dt=function(g,c,b,d){var w=new st[c.type](g,c,b,d);if(w.id!==g)throw new Error("Expected Source id to be "+g+" instead of "+w.id);return a.bindAll(["load","abort","unload","serialize","prepare"],w),w},It=function(g){return st[g]},yt=function(g,c){st[g]=c};function de(g,c){var b=a.identity([]);return a.translate(b,b,[1,1,0]),a.scale(b,b,[g.width*.5,g.height*.5,1]),a.multiply(b,b,g.calculatePosMatrix(c.toUnwrapped()))}function ze(g,c,b){if(g)for(var d=0,w=g;d<w.length;d+=1){var D=w[d],R=c[D];if(R&&R.source===b&&R.type==="fill-extrusion")return!0}else for(var G in c){var K=c[G];if(K.source===b&&K.type==="fill-extrusion")return!0}return!1}function _e(g,c,b,d,w,D){var R=ze(w&&w.layers,c,g.id),G=D.maxPitchScaleFactor(),K=g.tilesIn(d,G,R);K.sort(Je);for(var re=[],ce=0,we=K;ce<we.length;ce+=1){var be=we[ce];re.push({wrappedTileID:be.tileID.wrapped().key,queryResults:be.tile.queryRenderedFeatures(c,b,g._state,be.queryGeometry,be.cameraQueryGeometry,be.scale,w,D,G,de(g.transform,be.tileID))})}var Re=Ct(re);for(var Ze in Re)Re[Ze].forEach(function(Ge){var Oe=Ge.feature,Ke=g.getFeatureState(Oe.layer["source-layer"],Oe.id);Oe.source=Oe.layer.source,Oe.layer["source-layer"]&&(Oe.sourceLayer=Oe.layer["source-layer"]),Oe.state=Ke});return Re}function Ue(g,c,b,d,w,D,R){for(var G={},K=D.queryRenderedSymbols(d),re=[],ce=0,we=Object.keys(K).map(Number);ce<we.length;ce+=1){var be=we[ce];re.push(R[be])}re.sort(Je);for(var Re=function(){var vt=Ge[Ze],zt=vt.featureIndex.lookupSymbolFeatures(K[vt.bucketInstanceId],c,vt.bucketIndex,vt.sourceLayerIndex,w.filter,w.layers,w.availableImages,g);for(var Nt in zt){var Qt=G[Nt]=G[Nt]||[],rr=zt[Nt];rr.sort(function(wr,Lr){var kr=vt.featureSortOrder;if(kr){var Wr=kr.indexOf(wr.featureIndex),Ra=kr.indexOf(Lr.featureIndex);return Ra-Wr}else return Lr.featureIndex-wr.featureIndex});for(var Gt=0,ar=rr;Gt<ar.length;Gt+=1){var vr=ar[Gt];Qt.push(vr)}}},Ze=0,Ge=re;Ze<Ge.length;Ze+=1)Re();var Oe=function(vt){G[vt].forEach(function(zt){var Nt=zt.feature,Qt=g[vt],rr=b[Qt.source],Gt=rr.getFeatureState(Nt.layer["source-layer"],Nt.id);Nt.source=Nt.layer.source,Nt.layer["source-layer"]&&(Nt.sourceLayer=Nt.layer["source-layer"]),Nt.state=Gt})};for(var Ke in G)Oe(Ke);return G}function at(g,c){for(var b=g.getRenderableIds().map(function(K){return g.getTileByID(K)}),d=[],w={},D=0;D<b.length;D++){var R=b[D],G=R.tileID.canonical.key;w[G]||(w[G]=!0,R.querySourceFeatures(d,c))}return d}function Je(g,c){var b=g.tileID,d=c.tileID;return b.overscaledZ-d.overscaledZ||b.canonical.y-d.canonical.y||b.wrap-d.wrap||b.canonical.x-d.canonical.x}function Ct(g){for(var c={},b={},d=0,w=g;d<w.length;d+=1){var D=w[d],R=D.queryResults,G=D.wrappedTileID,K=b[G]=b[G]||{};for(var re in R)for(var ce=R[re],we=K[re]=K[re]||{},be=c[re]=c[re]||[],Re=0,Ze=ce;Re<Ze.length;Re+=1){var Ge=Ze[Re];we[Ge.featureIndex]||(we[Ge.featureIndex]=!0,be.push(Ge))}}return c}var wt=function(c,b){this.max=c,this.onRemove=b,this.reset()};wt.prototype.reset=function(){for(var c in this.data)for(var b=0,d=this.data[c];b<d.length;b+=1){var w=d[b];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},wt.prototype.add=function(c,b,d){var w=this,D=c.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);var R={value:b,timeout:void 0};if(d!==void 0&&(R.timeout=setTimeout(function(){w.remove(c,R)},d)),this.data[D].push(R),this.order.push(D),this.order.length>this.max){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},wt.prototype.has=function(c){return c.wrapped().key in this.data},wt.prototype.getAndRemove=function(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null},wt.prototype._getAndRemoveByKey=function(c){var b=this.data[c].shift();return b.timeout&&clearTimeout(b.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),b.value},wt.prototype.getByKey=function(c){var b=this.data[c];return b?b[0].value:null},wt.prototype.get=function(c){if(!this.has(c))return null;var b=this.data[c.wrapped().key][0];return b.value},wt.prototype.remove=function(c,b){if(!this.has(c))return this;var d=c.wrapped().key,w=b===void 0?0:this.data[d].indexOf(b),D=this.data[d][w];return this.data[d].splice(w,1),D.timeout&&clearTimeout(D.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(D.value),this.order.splice(this.order.indexOf(d),1),this},wt.prototype.setMaxSize=function(c){for(this.max=c;this.order.length>this.max;){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},wt.prototype.filter=function(c){var b=[];for(var d in this.data)for(var w=0,D=this.data[d];w<D.length;w+=1){var R=D[w];c(R.value)||b.push(R)}for(var G=0,K=b;G<K.length;G+=1){var re=K[G];this.remove(re.value.tileID,re)}};var xt=function(c,b,d){this.context=c;var w=c.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete b.arrayBuffer};xt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},xt.prototype.updateData=function(c){var b=this.context.gl;this.context.unbindVAO(),this.bind(),b.bufferSubData(b.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)},xt.prototype.destroy=function(){var c=this.context.gl;this.buffer&&(c.deleteBuffer(this.buffer),delete this.buffer)};var qt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ut=function(c,b,d,w){this.length=b.length,this.attributes=d,this.itemSize=b.bytesPerElement,this.dynamicDraw=w,this.context=c;var D=c.gl;this.buffer=D.createBuffer(),c.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete b.arrayBuffer};Ut.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ut.prototype.updateData=function(c){var b=this.context.gl;this.bind(),b.bufferSubData(b.ARRAY_BUFFER,0,c.arrayBuffer)},Ut.prototype.enableAttributes=function(c,b){for(var d=0;d<this.attributes.length;d++){var w=this.attributes[d],D=b.attributes[w.name];D!==void 0&&c.enableVertexAttribArray(D)}},Ut.prototype.setVertexAttribPointers=function(c,b,d){for(var w=0;w<this.attributes.length;w++){var D=this.attributes[w],R=b.attributes[D.name];R!==void 0&&c.vertexAttribPointer(R,D.components,c[qt[D.type]],!1,this.itemSize,D.offset+this.itemSize*(d||0))}},Ut.prototype.destroy=function(){var c=this.context.gl;this.buffer&&(c.deleteBuffer(this.buffer),delete this.buffer)};var Dt=function(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Dt.prototype.get=function(){return this.current},Dt.prototype.set=function(c){},Dt.prototype.getDefault=function(){return this.default},Dt.prototype.setDefault=function(){this.set(this.default)};var Mt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return a.Color.transparent},c.prototype.set=function(d){var w=this.current;d.r===w.r&&d.g===w.g&&d.b===w.b&&d.a===w.a&&!this.dirty||(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)},c}(Dt),Zt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 1},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.clearDepth(d),this.current=d,this.dirty=!1)},c}(Dt),Yt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 0},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.clearStencil(d),this.current=d,this.dirty=!1)},c}(Dt),Be=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return[!0,!0,!0,!0]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&d[3]===w[3]&&!this.dirty||(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)},c}(Dt),ut=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!0},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.depthMask(d),this.current=d,this.dirty=!1)},c}(Dt),sr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 255},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.stencilMask(d),this.current=d,this.dirty=!1)},c}(Dt),Pr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},c.prototype.set=function(d){var w=this.current;d.func===w.func&&d.ref===w.ref&&d.mask===w.mask&&!this.dirty||(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)},c}(Dt),Et=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&!this.dirty||(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)},c}(Dt),ht=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=d,this.dirty=!1}},c}(Dt),pt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return[0,1]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&!this.dirty||(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)},c}(Dt),Ot=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=d,this.dirty=!1}},c}(Dt),er=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.LESS},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.depthFunc(d),this.current=d,this.dirty=!1)},c}(Dt),Ht=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.BLEND):w.disable(w.BLEND),this.current=d,this.dirty=!1}},c}(Dt),Kt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var d=this.gl;return[d.ONE,d.ZERO]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&!this.dirty||(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)},c}(Dt),pr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return a.Color.transparent},c.prototype.set=function(d){var w=this.current;d.r===w.r&&d.g===w.g&&d.b===w.b&&d.a===w.a&&!this.dirty||(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)},c}(Dt),yr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.FUNC_ADD},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.blendEquation(d),this.current=d,this.dirty=!1)},c}(Dt),ur=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=d,this.dirty=!1}},c}(Dt),Lt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.BACK},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.cullFace(d),this.current=d,this.dirty=!1)},c}(Dt),Fe=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.CCW},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.frontFace(d),this.current=d,this.dirty=!1)},c}(Dt),Ve=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.useProgram(d),this.current=d,this.dirty=!1)},c}(Dt),bt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.TEXTURE0},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.activeTexture(d),this.current=d,this.dirty=!1)},c}(Dt),Tt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&d[3]===w[3]&&!this.dirty||(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)},c}(Dt),mr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,d),this.current=d,this.dirty=!1}},c}(Dt),Ar=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,d),this.current=d,this.dirty=!1}},c}(Dt),Mr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindTexture(w.TEXTURE_2D,d),this.current=d,this.dirty=!1}},c}(Dt),Gr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}},c}(Dt),pa=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1},c}(Dt),Ca=function(g){function c(b){g.call(this,b),this.vao=b.extVertexArrayObject}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){!this.vao||d===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)},c}(Dt),ii=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 4},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}},c}(Dt),wi=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}},c}(Dt),vi=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}},c}(Dt),Fi=function(g){function c(b,d){g.call(this,b),this.context=b,this.parent=d}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c}(Dt),Gi=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.setDirty=function(){this.dirty=!0},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}},c}(Fi),vn=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,d),this.current=d,this.dirty=!1}},c}(Fi),nn=function(c,b,d,w){this.context=c,this.width=b,this.height=d;var D=c.gl,R=this.framebuffer=D.createFramebuffer();this.colorAttachment=new Gi(c,R),w&&(this.depthAttachment=new vn(c,R))};nn.prototype.destroy=function(){var c=this.context.gl,b=this.colorAttachment.get();if(b&&c.deleteTexture(b),this.depthAttachment){var d=this.depthAttachment.get();d&&c.deleteRenderbuffer(d)}c.deleteFramebuffer(this.framebuffer)};var Ki=519,ir=function(c,b,d){this.func=c,this.mask=b,this.range=d};ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(Ki,ir.ReadOnly,[0,1]);var oi=519,Sa=7680,la=function(c,b,d,w,D,R){this.test=c,this.ref=b,this.mask=d,this.fail=w,this.depthFail=D,this.pass=R};la.disabled=new la({func:oi,mask:0},0,0,Sa,Sa,Sa);var Ci=0,ma=1,se=771,te=function(c,b,d){this.blendFunction=c,this.blendColor=b,this.mask=d};te.Replace=[ma,Ci],te.disabled=new te(te.Replace,a.Color.transparent,[!1,!1,!1,!1]),te.unblended=new te(te.Replace,a.Color.transparent,[!0,!0,!0,!0]),te.alphaBlended=new te([ma,se],a.Color.transparent,[!0,!0,!0,!0]);var ue=1029,he=2305,Le=function(c,b,d){this.enable=c,this.mode=b,this.frontFace=d};Le.disabled=new Le(!1,ue,he),Le.backCCW=new Le(!0,ue,he);var Ne=function(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Mt(this),this.clearDepth=new Zt(this),this.clearStencil=new Yt(this),this.colorMask=new Be(this),this.depthMask=new ut(this),this.stencilMask=new sr(this),this.stencilFunc=new Pr(this),this.stencilOp=new Et(this),this.stencilTest=new ht(this),this.depthRange=new pt(this),this.depthTest=new Ot(this),this.depthFunc=new er(this),this.blend=new Ht(this),this.blendFunc=new Kt(this),this.blendColor=new pr(this),this.blendEquation=new yr(this),this.cullFace=new ur(this),this.cullFaceSide=new Lt(this),this.frontFace=new Fe(this),this.program=new Ve(this),this.activeTexture=new bt(this),this.viewport=new Tt(this),this.bindFramebuffer=new mr(this),this.bindRenderbuffer=new Ar(this),this.bindTexture=new Mr(this),this.bindVertexBuffer=new Gr(this),this.bindElementBuffer=new pa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ca(this),this.pixelStoreUnpack=new ii(this),this.pixelStoreUnpackPremultiplyAlpha=new wi(this),this.pixelStoreUnpackFlipY=new vi(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)};Ne.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ne.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ne.prototype.createIndexBuffer=function(c,b){return new xt(this,c,b)},Ne.prototype.createVertexBuffer=function(c,b,d){return new Ut(this,c,b,d)},Ne.prototype.createRenderbuffer=function(c,b,d){var w=this.gl,D=w.createRenderbuffer();return this.bindRenderbuffer.set(D),w.renderbufferStorage(w.RENDERBUFFER,c,b,d),this.bindRenderbuffer.set(null),D},Ne.prototype.createFramebuffer=function(c,b,d){return new nn(this,c,b,d)},Ne.prototype.clear=function(c){var b=c.color,d=c.depth,w=this.gl,D=0;b&&(D|=w.COLOR_BUFFER_BIT,this.clearColor.set(b),this.colorMask.set([!0,!0,!0,!0])),typeof d!="undefined"&&(D|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),w.clear(D)},Ne.prototype.setCullFace=function(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))},Ne.prototype.setDepthMode=function(c){c.func===this.gl.ALWAYS&&!c.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range))},Ne.prototype.setStencilMode=function(c){c.test.func===this.gl.ALWAYS&&!c.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask}))},Ne.prototype.setColorMode=function(c){a.deepEqual(c.blendFunction,te.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)},Ne.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var et=function(g){function c(b,d,w){var D=this;g.call(this),this.id=b,this.dispatcher=w,this.on("data",function(R){R.dataType==="source"&&R.sourceDataType==="metadata"&&(D._sourceLoaded=!0),D._sourceLoaded&&!D._paused&&R.dataType==="source"&&R.sourceDataType==="content"&&(D.reload(),D.transform&&D.update(D.transform))}),this.on("error",function(){D._sourceErrored=!0}),this._source=dt(b,d,w,this),this._tiles={},this._cache=new wt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)},c.prototype.onRemove=function(d){this._source&&this._source.onRemove&&this._source.onRemove(d)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var d in this._tiles){var w=this._tiles[d];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform)}},c.prototype._loadTile=function(d,w){return this._source.loadTile(d,w)},c.prototype._unloadTile=function(d){if(this._source.unloadTile)return this._source.unloadTile(d,function(){})},c.prototype._abortTile=function(d){if(this._source.abortTile)return this._source.abortTile(d,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var w in this._tiles){var D=this._tiles[w];D.upload(d),D.prepare(this.map.style.imageManager)}},c.prototype.getIds=function(){return a.values(this._tiles).map(function(d){return d.tileID}).sort(We).map(function(d){return d.key})},c.prototype.getRenderableIds=function(d){var w=this,D=[];for(var R in this._tiles)this._isIdRenderable(R,d)&&D.push(this._tiles[R]);return d?D.sort(function(G,K){var re=G.tileID,ce=K.tileID,we=new a.Point(re.canonical.x,re.canonical.y)._rotate(w.transform.angle),be=new a.Point(ce.canonical.x,ce.canonical.y)._rotate(w.transform.angle);return re.overscaledZ-ce.overscaledZ||be.y-we.y||be.x-we.x}).map(function(G){return G.tileID.key}):D.map(function(G){return G.tileID}).sort(We).map(function(G){return G.key})},c.prototype.hasRenderableParent=function(d){var w=this.findLoadedParent(d,0);return w?this._isIdRenderable(w.tileID.key):!1},c.prototype._isIdRenderable=function(d,w){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(w||!this._tiles[d].holdingForFade())},c.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")},c.prototype._reloadTile=function(d,w){var D=this._tiles[d];D&&(D.state!=="loading"&&(D.state=w),this._loadTile(D,this._tileLoaded.bind(this,D,d,w)))},c.prototype._tileLoaded=function(d,w,D,R){if(R){d.state="errored",R.status!==404?this._source.fire(new a.ErrorEvent(R,{tile:d})):this.update(this.transform);return}d.timeAdded=a.browser.now(),D==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(w,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:d,coord:d.tileID}))},c.prototype._backfillDEM=function(d){for(var w=this.getRenderableIds(),D=0;D<w.length;D++){var R=w[D];if(d.neighboringTiles&&d.neighboringTiles[R]){var G=this.getTileByID(R);K(d,G),K(G,d)}}function K(re,ce){re.needsHillshadePrepare=!0;var we=ce.tileID.canonical.x-re.tileID.canonical.x,be=ce.tileID.canonical.y-re.tileID.canonical.y,Re=Math.pow(2,re.tileID.canonical.z),Ze=ce.tileID.key;we===0&&be===0||Math.abs(be)>1||(Math.abs(we)>1&&(Math.abs(we+Re)===1?we+=Re:Math.abs(we-Re)===1&&(we-=Re)),!(!ce.dem||!re.dem)&&(re.dem.backfillBorder(ce.dem,we,be),re.neighboringTiles&&re.neighboringTiles[Ze]&&(re.neighboringTiles[Ze].backfilled=!0)))}},c.prototype.getTile=function(d){return this.getTileByID(d.key)},c.prototype.getTileByID=function(d){return this._tiles[d]},c.prototype._retainLoadedChildren=function(d,w,D,R){for(var G in this._tiles){var K=this._tiles[G];if(!(R[G]||!K.hasData()||K.tileID.overscaledZ<=w||K.tileID.overscaledZ>D)){for(var re=K.tileID;K&&K.tileID.overscaledZ>w+1;){var ce=K.tileID.scaledTo(K.tileID.overscaledZ-1);K=this._tiles[ce.key],K&&K.hasData()&&(re=ce)}for(var we=re;we.overscaledZ>w;)if(we=we.scaledTo(we.overscaledZ-1),d[we.key]){R[re.key]=re;break}}}},c.prototype.findLoadedParent=function(d,w){if(d.key in this._loadedParentTiles){var D=this._loadedParentTiles[d.key];return D&&D.tileID.overscaledZ>=w?D:null}for(var R=d.overscaledZ-1;R>=w;R--){var G=d.scaledTo(R),K=this._getLoadedTile(G);if(K)return K}},c.prototype._getLoadedTile=function(d){var w=this._tiles[d.key];if(w&&w.hasData())return w;var D=this._cache.getByKey(d.wrapped().key);return D},c.prototype.updateCacheSize=function(d){var w=Math.ceil(d.width/this._source.tileSize)+1,D=Math.ceil(d.height/this._source.tileSize)+1,R=w*D,G=5,K=Math.floor(R*G),re=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,K):K;this._cache.setMaxSize(re)},c.prototype.handleWrapJump=function(d){var w=this._prevLng===void 0?d:this._prevLng,D=d-w,R=D/360,G=Math.round(R);if(this._prevLng=d,G){var K={};for(var re in this._tiles){var ce=this._tiles[re];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+G),K[ce.tileID.key]=ce}this._tiles=K;for(var we in this._timers)clearTimeout(this._timers[we]),delete this._timers[we];for(var be in this._tiles){var Re=this._tiles[be];this._setTileReloadTimer(be,Re)}}},c.prototype.update=function(d){var w=this;if(this.transform=d,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var D;this.used?this._source.tileID?D=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(wr){return new a.OverscaledTileID(wr.canonical.z,wr.wrap,wr.canonical.z,wr.canonical.x,wr.canonical.y)}):(D=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(D=D.filter(function(wr){return w._source.hasTile(wr)}))):D=[];var R=d.coveringZoomLevel(this._source),G=Math.max(R-c.maxOverzooming,this._source.minzoom),K=Math.max(R+c.maxUnderzooming,this._source.minzoom),re=this._updateRetainedTiles(D,R);if(mt(this._source.type)){for(var ce={},we={},be=Object.keys(re),Re=0,Ze=be;Re<Ze.length;Re+=1){var Ge=Ze[Re],Oe=re[Ge],Ke=this._tiles[Ge];if(!(!Ke||Ke.fadeEndTime&&Ke.fadeEndTime<=a.browser.now())){var vt=this.findLoadedParent(Oe,G);vt&&(this._addTile(vt.tileID),ce[vt.tileID.key]=vt.tileID),we[Ge]=Oe}}this._retainLoadedChildren(we,R,K,re);for(var zt in ce)re[zt]||(this._coveredTiles[zt]=!0,re[zt]=ce[zt])}for(var Nt in re)this._tiles[Nt].clearFadeHold();for(var Qt=a.keysDifference(this._tiles,re),rr=0,Gt=Qt;rr<Gt.length;rr+=1){var ar=Gt[rr],vr=this._tiles[ar];vr.hasSymbolBuckets&&!vr.holdingForFade()?vr.setHoldDuration(this.map._fadeDuration):(!vr.hasSymbolBuckets||vr.symbolFadeFinished())&&this._removeTile(ar)}this._updateLoadedParentTileCache()}},c.prototype.releaseSymbolFadeTiles=function(){for(var d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)},c.prototype._updateRetainedTiles=function(d,w){for(var D={},R={},G=Math.max(w-c.maxOverzooming,this._source.minzoom),K=Math.max(w+c.maxUnderzooming,this._source.minzoom),re={},ce=0,we=d;ce<we.length;ce+=1){var be=we[ce],Re=this._addTile(be);D[be.key]=be,!Re.hasData()&&w<this._source.maxzoom&&(re[be.key]=be)}this._retainLoadedChildren(re,w,K,D);for(var Ze=0,Ge=d;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze],Ke=this._tiles[Oe.key];if(!Ke.hasData()){if(w+1>this._source.maxzoom){var vt=Oe.children(this._source.maxzoom)[0],zt=this.getTile(vt);if(zt&&zt.hasData()){D[vt.key]=vt;continue}}else{var Nt=Oe.children(this._source.maxzoom);if(D[Nt[0].key]&&D[Nt[1].key]&&D[Nt[2].key]&&D[Nt[3].key])continue}for(var Qt=Ke.wasRequested(),rr=Oe.overscaledZ-1;rr>=G;--rr){var Gt=Oe.scaledTo(rr);if(R[Gt.key]||(R[Gt.key]=!0,Ke=this.getTile(Gt),!Ke&&Qt&&(Ke=this._addTile(Gt)),Ke&&(D[Gt.key]=Gt,Qt=Ke.wasRequested(),Ke.hasData())))break}}}return D},c.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var d in this._tiles){for(var w=[],D=void 0,R=this._tiles[d].tileID;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){D=this._loadedParentTiles[R.key];break}w.push(R.key);var G=R.scaledTo(R.overscaledZ-1);if(D=this._getLoadedTile(G),D)break;R=G}for(var K=0,re=w;K<re.length;K+=1){var ce=re[K];this._loadedParentTiles[ce]=D}}},c.prototype._addTile=function(d){var w=this._tiles[d.key];if(w)return w;w=this._cache.getAndRemove(d),w&&(this._setTileReloadTimer(d.key,w),w.tileID=d,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,w)));var D=!!w;return D||(w=new a.Tile(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,d.key,w.state))),w?(w.uses++,this._tiles[d.key]=w,D||this._source.fire(new a.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},c.prototype._setTileReloadTimer=function(d,w){var D=this;d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);var R=w.getExpiryTimeout();R&&(this._timers[d]=setTimeout(function(){D._reloadTile(d,"expired"),delete D._timers[d]},R))},c.prototype._removeTile=function(d){var w=this._tiles[d];w&&(w.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),!(w.uses>0)&&(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},c.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var d in this._tiles)this._removeTile(d);this._cache.reset()},c.prototype.tilesIn=function(d,w,D){var R=this,G=[],K=this.transform;if(!K)return G;for(var re=D?K.getCameraQueryGeometry(d):d,ce=d.map(function(rr){return K.pointCoordinate(rr)}),we=re.map(function(rr){return K.pointCoordinate(rr)}),be=this.getIds(),Re=1/0,Ze=1/0,Ge=-1/0,Oe=-1/0,Ke=0,vt=we;Ke<vt.length;Ke+=1){var zt=vt[Ke];Re=Math.min(Re,zt.x),Ze=Math.min(Ze,zt.y),Ge=Math.max(Ge,zt.x),Oe=Math.max(Oe,zt.y)}for(var Nt=function(rr){var Gt=R._tiles[be[rr]];if(!Gt.holdingForFade()){var ar=Gt.tileID,vr=Math.pow(2,K.zoom-Gt.tileID.overscaledZ),wr=w*Gt.queryPadding*a.EXTENT/Gt.tileSize/vr,Lr=[ar.getTilePoint(new a.MercatorCoordinate(Re,Ze)),ar.getTilePoint(new a.MercatorCoordinate(Ge,Oe))];if(Lr[0].x-wr<a.EXTENT&&Lr[0].y-wr<a.EXTENT&&Lr[1].x+wr>=0&&Lr[1].y+wr>=0){var kr=ce.map(function(Ra){return ar.getTilePoint(Ra)}),Wr=we.map(function(Ra){return ar.getTilePoint(Ra)});G.push({tile:Gt,tileID:ar,queryGeometry:kr,cameraQueryGeometry:Wr,scale:vr})}}},Qt=0;Qt<be.length;Qt++)Nt(Qt);return G},c.prototype.getVisibleCoordinates=function(d){for(var w=this,D=this.getRenderableIds(d).map(function(re){return w._tiles[re].tileID}),R=0,G=D;R<G.length;R+=1){var K=G[R];K.posMatrix=this.transform.calculatePosMatrix(K.toUnwrapped())}return D},c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(mt(this._source.type))for(var d in this._tiles){var w=this._tiles[d];if(w.fadeEndTime!==void 0&&w.fadeEndTime>=a.browser.now())return!0}return!1},c.prototype.setFeatureState=function(d,w,D){d=d||"_geojsonTileLayer",this._state.updateState(d,w,D)},c.prototype.removeFeatureState=function(d,w,D){d=d||"_geojsonTileLayer",this._state.removeFeatureState(d,w,D)},c.prototype.getFeatureState=function(d,w){return d=d||"_geojsonTileLayer",this._state.getState(d,w)},c.prototype.setDependencies=function(d,w,D){var R=this._tiles[d];R&&R.setDependencies(w,D)},c.prototype.reloadTilesForDependencies=function(d,w){for(var D in this._tiles){var R=this._tiles[D];R.hasDependency(d,w)&&this._reloadTile(D,"reloading")}this._cache.filter(function(G){return!G.hasDependency(d,w)})},c}(a.Evented);et.maxOverzooming=10,et.maxUnderzooming=3;function We(g,c){var b=Math.abs(g.wrap*2)-+(g.wrap<0),d=Math.abs(c.wrap*2)-+(c.wrap<0);return g.overscaledZ-c.overscaledZ||d-b||c.canonical.y-g.canonical.y||c.canonical.x-g.canonical.x}function mt(g){return g==="raster"||g==="image"||g==="video"}function Pt(){return new a.window.Worker(Tn.workerUrl)}var Ft="mapboxgl_preloaded_worker_pool",tr=function(){this.active={}};tr.prototype.acquire=function(c){if(!this.workers)for(this.workers=[];this.workers.length<tr.workerCount;)this.workers.push(new Pt);return this.active[c]=!0,this.workers.slice()},tr.prototype.release=function(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(function(b){b.terminate()}),this.workers=null)},tr.prototype.isPreloaded=function(){return!!this.active[Ft]},tr.prototype.numActive=function(){return Object.keys(this.active).length};var Wt=Math.floor(a.browser.hardwareConcurrency/2);tr.workerCount=Math.max(Math.min(Wt,6),1);var Sr;function Zr(){return Sr||(Sr=new tr),Sr}function Or(){var g=Zr();g.acquire(Ft)}function ca(){var g=Sr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Ft),Sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function ua(g,c){var b={};for(var d in g)d!=="ref"&&(b[d]=g[d]);return a.refProperties.forEach(function(w){w in c&&(b[w]=c[w])}),b}function qa(g){g=g.slice();for(var c=Object.create(null),b=0;b<g.length;b++)c[g[b].id]=g[b];for(var d=0;d<g.length;d++)"ref"in g[d]&&(g[d]=ua(g[d],c[g[d].ref]));return g}function ri(){var g={},c=a.styleSpec.$version;for(var b in a.styleSpec.$root){var d=a.styleSpec.$root[b];if(d.required){var w=null;b==="version"?w=c:d.type==="array"?w=[]:w={},w!=null&&(g[b]=w)}}return g}var Yr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function gr(g,c,b){b.push({command:Yr.addSource,args:[g,c[g]]})}function $r(g,c,b){c.push({command:Yr.removeSource,args:[g]}),b[g]=!0}function ga(g,c,b,d){$r(g,b,d),gr(g,c,b)}function nr(g,c,b){var d;for(d in g[b])if(g[b].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(g[b][d],c[b][d]))return!1;for(d in c[b])if(c[b].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(g[b][d],c[b][d]))return!1;return!0}function Ti(g,c,b,d){g=g||{},c=c||{};var w;for(w in g)g.hasOwnProperty(w)&&(c.hasOwnProperty(w)||$r(w,b,d));for(w in c)c.hasOwnProperty(w)&&(g.hasOwnProperty(w)?a.deepEqual(g[w],c[w])||(g[w].type==="geojson"&&c[w].type==="geojson"&&nr(g,c,w)?b.push({command:Yr.setGeoJSONSourceData,args:[w,c[w].data]}):ga(w,c,b,d)):gr(w,c,b))}function Ea(g,c,b,d,w,D){g=g||{},c=c||{};var R;for(R in g)g.hasOwnProperty(R)&&(a.deepEqual(g[R],c[R])||b.push({command:D,args:[d,R,c[R],w]}));for(R in c)!c.hasOwnProperty(R)||g.hasOwnProperty(R)||a.deepEqual(g[R],c[R])||b.push({command:D,args:[d,R,c[R],w]})}function si(g){return g.id}function fa(g,c){return g[c.id]=c,g}function In(g,c,b){g=g||[],c=c||[];var d=g.map(si),w=c.map(si),D=g.reduce(fa,{}),R=c.reduce(fa,{}),G=d.slice(),K=Object.create(null),re,ce,we,be,Re,Ze,Ge;for(re=0,ce=0;re<d.length;re++)we=d[re],R.hasOwnProperty(we)?ce++:(b.push({command:Yr.removeLayer,args:[we]}),G.splice(G.indexOf(we,ce),1));for(re=0,ce=0;re<w.length;re++)we=w[w.length-1-re],G[G.length-1-re]!==we&&(D.hasOwnProperty(we)?(b.push({command:Yr.removeLayer,args:[we]}),G.splice(G.lastIndexOf(we,G.length-ce),1)):ce++,Ze=G[G.length-re],b.push({command:Yr.addLayer,args:[R[we],Ze]}),G.splice(G.length-re,0,we),K[we]=!0);for(re=0;re<w.length;re++)if(we=w[re],be=D[we],Re=R[we],!(K[we]||a.deepEqual(be,Re))){if(!a.deepEqual(be.source,Re.source)||!a.deepEqual(be["source-layer"],Re["source-layer"])||!a.deepEqual(be.type,Re.type)){b.push({command:Yr.removeLayer,args:[we]}),Ze=G[G.lastIndexOf(we)+1],b.push({command:Yr.addLayer,args:[Re,Ze]});continue}Ea(be.layout,Re.layout,b,we,null,Yr.setLayoutProperty),Ea(be.paint,Re.paint,b,we,null,Yr.setPaintProperty),a.deepEqual(be.filter,Re.filter)||b.push({command:Yr.setFilter,args:[we,Re.filter]}),(!a.deepEqual(be.minzoom,Re.minzoom)||!a.deepEqual(be.maxzoom,Re.maxzoom))&&b.push({command:Yr.setLayerZoomRange,args:[we,Re.minzoom,Re.maxzoom]});for(Ge in be)be.hasOwnProperty(Ge)&&(Ge==="layout"||Ge==="paint"||Ge==="filter"||Ge==="metadata"||Ge==="minzoom"||Ge==="maxzoom"||(Ge.indexOf("paint.")===0?Ea(be[Ge],Re[Ge],b,we,Ge.slice(6),Yr.setPaintProperty):a.deepEqual(be[Ge],Re[Ge])||b.push({command:Yr.setLayerProperty,args:[we,Ge,Re[Ge]]})));for(Ge in Re)!Re.hasOwnProperty(Ge)||be.hasOwnProperty(Ge)||Ge==="layout"||Ge==="paint"||Ge==="filter"||Ge==="metadata"||Ge==="minzoom"||Ge==="maxzoom"||(Ge.indexOf("paint.")===0?Ea(be[Ge],Re[Ge],b,we,Ge.slice(6),Yr.setPaintProperty):a.deepEqual(be[Ge],Re[Ge])||b.push({command:Yr.setLayerProperty,args:[we,Ge,Re[Ge]]}))}}function Co(g,c){if(!g)return[{command:Yr.setStyle,args:[c]}];var b=[];try{if(!a.deepEqual(g.version,c.version))return[{command:Yr.setStyle,args:[c]}];a.deepEqual(g.center,c.center)||b.push({command:Yr.setCenter,args:[c.center]}),a.deepEqual(g.zoom,c.zoom)||b.push({command:Yr.setZoom,args:[c.zoom]}),a.deepEqual(g.bearing,c.bearing)||b.push({command:Yr.setBearing,args:[c.bearing]}),a.deepEqual(g.pitch,c.pitch)||b.push({command:Yr.setPitch,args:[c.pitch]}),a.deepEqual(g.sprite,c.sprite)||b.push({command:Yr.setSprite,args:[c.sprite]}),a.deepEqual(g.glyphs,c.glyphs)||b.push({command:Yr.setGlyphs,args:[c.glyphs]}),a.deepEqual(g.transition,c.transition)||b.push({command:Yr.setTransition,args:[c.transition]}),a.deepEqual(g.light,c.light)||b.push({command:Yr.setLight,args:[c.light]});var d={},w=[];Ti(g.sources,c.sources,w,d);var D=[];g.layers&&g.layers.forEach(function(R){d[R.source]?b.push({command:Yr.removeLayer,args:[R.id]}):D.push(R)}),b=b.concat(w),In(D,c.layers,b)}catch(R){console.warn("Unable to compute style diff:",R),b=[{command:Yr.setStyle,args:[c]}]}return b}var bs=function(c,b){this.reset(c,b)};bs.prototype.reset=function(c,b){this.points=c||[],this._distances=[0];for(var d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(b||0,this.length*.5),this.paddedLength=this.length-this.padding*2},bs.prototype.lerp=function(c){if(this.points.length===1)return this.points[0];c=a.clamp(c,0,1);for(var b=1,d=this._distances[b],w=c*this.paddedLength+this.padding;d<w&&b<this._distances.length;)d=this._distances[++b];var D=b-1,R=this._distances[D],G=d-R,K=G>0?(w-R)/G:0;return this.points[D].mult(1-K).add(this.points[b].mult(K))};var Ga=function(c,b,d){var w=this.boxCells=[],D=this.circleCells=[];this.xCellCount=Math.ceil(c/d),this.yCellCount=Math.ceil(b/d);for(var R=0;R<this.xCellCount*this.yCellCount;R++)w.push([]),D.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=b,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/b,this.boxUid=0,this.circleUid=0};Ga.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ga.prototype.insert=function(c,b,d,w,D){this._forEachCell(b,d,w,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(b),this.bboxes.push(d),this.bboxes.push(w),this.bboxes.push(D)},Ga.prototype.insertCircle=function(c,b,d,w){this._forEachCell(b-w,d-w,b+w,d+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(b),this.circles.push(d),this.circles.push(w)},Ga.prototype._insertBoxCell=function(c,b,d,w,D,R){this.boxCells[D].push(R)},Ga.prototype._insertCircleCell=function(c,b,d,w,D,R){this.circleCells[D].push(R)},Ga.prototype._query=function(c,b,d,w,D,R){if(d<0||c>this.width||w<0||b>this.height)return D?!1:[];var G=[];if(c<=0&&b<=0&&this.width<=d&&this.height<=w){if(D)return!0;for(var K=0;K<this.boxKeys.length;K++)G.push({key:this.boxKeys[K],x1:this.bboxes[K*4],y1:this.bboxes[K*4+1],x2:this.bboxes[K*4+2],y2:this.bboxes[K*4+3]});for(var re=0;re<this.circleKeys.length;re++){var ce=this.circles[re*3],we=this.circles[re*3+1],be=this.circles[re*3+2];G.push({key:this.circleKeys[re],x1:ce-be,y1:we-be,x2:ce+be,y2:we+be})}return R?G.filter(R):G}else{var Re={hitTest:D,seenUids:{box:{},circle:{}}};return this._forEachCell(c,b,d,w,this._queryCell,G,Re,R),D?G.length>0:G}},Ga.prototype._queryCircle=function(c,b,d,w,D){var R=c-d,G=c+d,K=b-d,re=b+d;if(G<0||R>this.width||re<0||K>this.height)return w?!1:[];var ce=[],we={hitTest:w,circle:{x:c,y:b,radius:d},seenUids:{box:{},circle:{}}};return this._forEachCell(R,K,G,re,this._queryCellCircle,ce,we,D),w?ce.length>0:ce},Ga.prototype.query=function(c,b,d,w,D){return this._query(c,b,d,w,!1,D)},Ga.prototype.hitTest=function(c,b,d,w,D){return this._query(c,b,d,w,!0,D)},Ga.prototype.hitTestCircle=function(c,b,d,w){return this._queryCircle(c,b,d,!0,w)},Ga.prototype._queryCell=function(c,b,d,w,D,R,G,K){var re=G.seenUids,ce=this.boxCells[D];if(ce!==null)for(var we=this.bboxes,be=0,Re=ce;be<Re.length;be+=1){var Ze=Re[be];if(!re.box[Ze]){re.box[Ze]=!0;var Ge=Ze*4;if(c<=we[Ge+2]&&b<=we[Ge+3]&&d>=we[Ge+0]&&w>=we[Ge+1]&&(!K||K(this.boxKeys[Ze]))){if(G.hitTest)return R.push(!0),!0;R.push({key:this.boxKeys[Ze],x1:we[Ge],y1:we[Ge+1],x2:we[Ge+2],y2:we[Ge+3]})}}}var Oe=this.circleCells[D];if(Oe!==null)for(var Ke=this.circles,vt=0,zt=Oe;vt<zt.length;vt+=1){var Nt=zt[vt];if(!re.circle[Nt]){re.circle[Nt]=!0;var Qt=Nt*3;if(this._circleAndRectCollide(Ke[Qt],Ke[Qt+1],Ke[Qt+2],c,b,d,w)&&(!K||K(this.circleKeys[Nt]))){if(G.hitTest)return R.push(!0),!0;var rr=Ke[Qt],Gt=Ke[Qt+1],ar=Ke[Qt+2];R.push({key:this.circleKeys[Nt],x1:rr-ar,y1:Gt-ar,x2:rr+ar,y2:Gt+ar})}}}},Ga.prototype._queryCellCircle=function(c,b,d,w,D,R,G,K){var re=G.circle,ce=G.seenUids,we=this.boxCells[D];if(we!==null)for(var be=this.bboxes,Re=0,Ze=we;Re<Ze.length;Re+=1){var Ge=Ze[Re];if(!ce.box[Ge]){ce.box[Ge]=!0;var Oe=Ge*4;if(this._circleAndRectCollide(re.x,re.y,re.radius,be[Oe+0],be[Oe+1],be[Oe+2],be[Oe+3])&&(!K||K(this.boxKeys[Ge])))return R.push(!0),!0}}var Ke=this.circleCells[D];if(Ke!==null)for(var vt=this.circles,zt=0,Nt=Ke;zt<Nt.length;zt+=1){var Qt=Nt[zt];if(!ce.circle[Qt]){ce.circle[Qt]=!0;var rr=Qt*3;if(this._circlesCollide(vt[rr],vt[rr+1],vt[rr+2],re.x,re.y,re.radius)&&(!K||K(this.circleKeys[Qt])))return R.push(!0),!0}}},Ga.prototype._forEachCell=function(c,b,d,w,D,R,G,K){for(var re=this._convertToXCellCoord(c),ce=this._convertToYCellCoord(b),we=this._convertToXCellCoord(d),be=this._convertToYCellCoord(w),Re=re;Re<=we;Re++)for(var Ze=ce;Ze<=be;Ze++){var Ge=this.xCellCount*Ze+Re;if(D.call(this,c,b,d,w,Ge,R,G,K))return}},Ga.prototype._convertToXCellCoord=function(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))},Ga.prototype._convertToYCellCoord=function(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))},Ga.prototype._circlesCollide=function(c,b,d,w,D,R){var G=w-c,K=D-b,re=d+R;return re*re>G*G+K*K},Ga.prototype._circleAndRectCollide=function(c,b,d,w,D,R,G){var K=(R-w)/2,re=Math.abs(c-(w+K));if(re>K+d)return!1;var ce=(G-D)/2,we=Math.abs(b-(D+ce));if(we>ce+d)return!1;if(re<=K||we<=ce)return!0;var be=re-K,Re=we-ce;return be*be+Re*Re<=d*d};function Kn(g,c,b,d,w){var D=a.create();return c?(a.scale(D,D,[1/w,1/w,1]),b||a.rotateZ(D,D,d.angle)):a.multiply(D,d.labelPlaneMatrix,g),D}function du(g,c,b,d,w){if(c){var D=a.clone(g);return a.scale(D,D,[w,w,1]),b||a.rotateZ(D,D,-d.angle),D}else return d.glCoordMatrix}function Ui(g,c){var b=[g.x,g.y,0,1];Kf(b,b,c);var d=b[3];return{point:new a.Point(b[0]/d,b[1]/d),signedDistanceFromCamera:d}}function pl(g,c){return .5+.5*(g/c)}function lp(g,c){var b=g[0]/g[3],d=g[1]/g[3],w=b>=-c[0]&&b<=c[0]&&d>=-c[1]&&d<=c[1];return w}function Gc(g,c,b,d,w,D,R,G){var K=d?g.textSizeData:g.iconSizeData,re=a.evaluateSizeForZoom(K,b.transform.zoom),ce=[256/b.width*2+1,256/b.height*2+1],we=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;we.clear();for(var be=g.lineVertexArray,Re=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ze=b.transform.width/b.transform.height,Ge=!1,Oe=0;Oe<Re.length;Oe++){var Ke=Re.get(Oe);if(Ke.hidden||Ke.writingMode===a.WritingMode.vertical&&!Ge){$u(Ke.numGlyphs,we);continue}Ge=!1;var vt=[Ke.anchorX,Ke.anchorY,0,1];if(a.transformMat4(vt,vt,c),!lp(vt,ce)){$u(Ke.numGlyphs,we);continue}var zt=vt[3],Nt=pl(b.transform.cameraToCenterDistance,zt),Qt=a.evaluateSizeForFeature(K,re,Ke),rr=R?Qt/Nt:Qt*Nt,Gt=new a.Point(Ke.anchorX,Ke.anchorY),ar=Ui(Gt,w).point,vr={},wr=bv(Ke,rr,!1,G,c,w,D,g.glyphOffsetArray,be,we,ar,Gt,vr,Ze);Ge=wr.useVertical,(wr.notEnoughRoom||Ge||wr.needsFlipping&&bv(Ke,rr,!0,G,c,w,D,g.glyphOffsetArray,be,we,ar,Gt,vr,Ze).notEnoughRoom)&&$u(Ke.numGlyphs,we)}d?g.text.dynamicLayoutVertexBuffer.updateData(we):g.icon.dynamicLayoutVertexBuffer.updateData(we)}function Zc(g,c,b,d,w,D,R,G,K,re,ce){var we=G.glyphStartIndex+G.numGlyphs,be=G.lineStartIndex,Re=G.lineStartIndex+G.lineLength,Ze=c.getoffsetX(G.glyphStartIndex),Ge=c.getoffsetX(we-1),Oe=ml(g*Ze,b,d,w,D,R,G.segment,be,Re,K,re,ce);if(!Oe)return null;var Ke=ml(g*Ge,b,d,w,D,R,G.segment,be,Re,K,re,ce);return Ke?{first:Oe,last:Ke}:null}function xv(g,c,b,d){if(g===a.WritingMode.horizontal){var w=Math.abs(b.y-c.y),D=Math.abs(b.x-c.x)*d;if(w>D)return{useVertical:!0}}return(g===a.WritingMode.vertical?c.y<b.y:c.x>b.x)?{needsFlipping:!0}:null}function bv(g,c,b,d,w,D,R,G,K,re,ce,we,be,Re){var Ze=c/24,Ge=g.lineOffsetX*Ze,Oe=g.lineOffsetY*Ze,Ke;if(g.numGlyphs>1){var vt=g.glyphStartIndex+g.numGlyphs,zt=g.lineStartIndex,Nt=g.lineStartIndex+g.lineLength,Qt=Zc(Ze,G,Ge,Oe,b,ce,we,g,K,D,be);if(!Qt)return{notEnoughRoom:!0};var rr=Ui(Qt.first.point,R).point,Gt=Ui(Qt.last.point,R).point;if(d&&!b){var ar=xv(g.writingMode,rr,Gt,Re);if(ar)return ar}Ke=[Qt.first];for(var vr=g.glyphStartIndex+1;vr<vt-1;vr++)Ke.push(ml(Ze*G.getoffsetX(vr),Ge,Oe,b,ce,we,g.segment,zt,Nt,K,D,be));Ke.push(Qt.last)}else{if(d&&!b){var wr=Ui(we,w).point,Lr=g.lineStartIndex+g.segment+1,kr=new a.Point(K.getx(Lr),K.gety(Lr)),Wr=Ui(kr,w),Ra=Wr.signedDistanceFromCamera>0?Wr.point:pu(we,kr,wr,1,w),_a=xv(g.writingMode,wr,Ra,Re);if(_a)return _a}var Nr=ml(Ze*G.getoffsetX(g.glyphStartIndex),Ge,Oe,b,ce,we,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,K,D,be);if(!Nr)return{notEnoughRoom:!0};Ke=[Nr]}for(var Ma=0,aa=Ke;Ma<aa.length;Ma+=1){var Za=aa[Ma];a.addDynamicAttributes(re,Za.point,Za.angle)}return{}}function pu(g,c,b,d,w){var D=Ui(g.add(g.sub(c)._unit()),w).point,R=b.sub(D);return b.add(R._mult(d/R.mag()))}function ml(g,c,b,d,w,D,R,G,K,re,ce,we){var be=d?g-c:g+c,Re=be>0?1:-1,Ze=0;d&&(Re*=-1,Ze=Math.PI),Re<0&&(Ze+=Math.PI);for(var Ge=Re>0?G+R:G+R+1,Oe=w,Ke=w,vt=0,zt=0,Nt=Math.abs(be),Qt=[];vt+zt<=Nt;){if(Ge+=Re,Ge<G||Ge>=K)return null;if(Ke=Oe,Qt.push(Oe),Oe=we[Ge],Oe===void 0){var rr=new a.Point(re.getx(Ge),re.gety(Ge)),Gt=Ui(rr,ce);if(Gt.signedDistanceFromCamera>0)Oe=we[Ge]=Gt.point;else{var ar=Ge-Re,vr=vt===0?D:new a.Point(re.getx(ar),re.gety(ar));Oe=pu(vr,rr,Ke,Nt-vt+1,ce)}}vt+=zt,zt=Ke.dist(Oe)}var wr=(Nt-vt)/zt,Lr=Oe.sub(Ke),kr=Lr.mult(wr)._add(Ke);kr._add(Lr._unit()._perp()._mult(b*Re));var Wr=Ze+Math.atan2(Oe.y-Ke.y,Oe.x-Ke.x);return Qt.push(kr),{point:kr,angle:Wr,path:Qt}}var up=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $u(g,c){for(var b=0;b<g;b++){var d=c.length;c.resize(d+4),c.float32.set(up,d*3)}}function Kf(g,c,b){var d=c[0],w=c[1];return g[0]=b[0]*d+b[4]*w+b[12],g[1]=b[1]*d+b[5]*w+b[13],g[3]=b[3]*d+b[7]*w+b[15],g}var $i=100,Go=function(c,b,d){b===void 0&&(b=new Ga(c.width+2*$i,c.height+2*$i,25)),d===void 0&&(d=new Ga(c.width+2*$i,c.height+2*$i,25)),this.transform=c,this.grid=b,this.ignoredGrid=d,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+$i,this.screenBottomBoundary=c.height+$i,this.gridRightBoundary=c.width+2*$i,this.gridBottomBoundary=c.height+2*$i};Go.prototype.placeCollisionBox=function(c,b,d,w,D){var R=this.projectAndGetPerspectiveRatio(w,c.anchorPointX,c.anchorPointY),G=d*R.perspectiveRatio,K=c.x1*G+R.point.x,re=c.y1*G+R.point.y,ce=c.x2*G+R.point.x,we=c.y2*G+R.point.y;return!this.isInsideGrid(K,re,ce,we)||!b&&this.grid.hitTest(K,re,ce,we,D)?{box:[],offscreen:!1}:{box:[K,re,ce,we],offscreen:this.isOffscreen(K,re,ce,we)}},Go.prototype.placeCollisionCircles=function(c,b,d,w,D,R,G,K,re,ce,we,be,Re){var Ze=[],Ge=new a.Point(b.anchorX,b.anchorY),Oe=Ui(Ge,R),Ke=pl(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),vt=ce?D/Ke:D*Ke,zt=vt/a.ONE_EM,Nt=Ui(Ge,G).point,Qt={},rr=b.lineOffsetX*zt,Gt=b.lineOffsetY*zt,ar=Zc(zt,w,rr,Gt,!1,Nt,Ge,b,d,G,Qt),vr=!1,wr=!1,Lr=!0;if(ar){for(var kr=be*.5*Ke+Re,Wr=new a.Point(-$i,-$i),Ra=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),_a=new bs,Nr=ar.first,Ma=ar.last,aa=[],Za=Nr.path.length-1;Za>=1;Za--)aa.push(Nr.path[Za]);for(var Ua=1;Ua<Ma.path.length;Ua++)aa.push(Ma.path[Ua]);var Mi=kr*2.5;if(K){var La=aa.map(function(tl){return Ui(tl,K)});La.some(function(tl){return tl.signedDistanceFromCamera<=0})?aa=[]:aa=La.map(function(tl){return tl.point})}var mi=[];if(aa.length>0){for(var ia=aa[0].clone(),Ba=aa[0].clone(),tn=1;tn<aa.length;tn++)ia.x=Math.min(ia.x,aa[tn].x),ia.y=Math.min(ia.y,aa[tn].y),Ba.x=Math.max(Ba.x,aa[tn].x),Ba.y=Math.max(Ba.y,aa[tn].y);ia.x>=Wr.x&&Ba.x<=Ra.x&&ia.y>=Wr.y&&Ba.y<=Ra.y?mi=[aa]:Ba.x<Wr.x||ia.x>Ra.x||Ba.y<Wr.y||ia.y>Ra.y?mi=[]:mi=a.clipLine([aa],Wr.x,Wr.y,Ra.x,Ra.y)}for(var Nn=0,Ps=mi;Nn<Ps.length;Nn+=1){var zs=Ps[Nn];_a.reset(zs,kr*.25);var $s=0;_a.length<=.5*kr?$s=1:$s=Math.ceil(_a.paddedLength/Mi)+1;for(var Ol=0;Ol<$s;Ol++){var hc=Ol/Math.max($s-1,1),Ul=_a.lerp(hc),Do=Ul.x+$i,Vl=Ul.y+$i;Ze.push(Do,Vl,kr,0);var Qo=Do-kr,Po=Vl-kr,el=Do+kr,Eu=Vl+kr;if(Lr=Lr&&this.isOffscreen(Qo,Po,el,Eu),wr=wr||this.isInsideGrid(Qo,Po,el,Eu),!c&&this.grid.hitTestCircle(Do,Vl,kr,we)&&(vr=!0,!re))return{circles:[],offscreen:!1,collisionDetected:vr}}}}return{circles:!re&&vr||!wr?[]:Ze,offscreen:Lr,collisionDetected:vr}},Go.prototype.queryRenderedSymbols=function(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var b=[],d=1/0,w=1/0,D=-1/0,R=-1/0,G=0,K=c;G<K.length;G+=1){var re=K[G],ce=new a.Point(re.x+$i,re.y+$i);d=Math.min(d,ce.x),w=Math.min(w,ce.y),D=Math.max(D,ce.x),R=Math.max(R,ce.y),b.push(ce)}for(var we=this.grid.query(d,w,D,R).concat(this.ignoredGrid.query(d,w,D,R)),be={},Re={},Ze=0,Ge=we;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze],Ke=Oe.key;if(be[Ke.bucketInstanceId]===void 0&&(be[Ke.bucketInstanceId]={}),!be[Ke.bucketInstanceId][Ke.featureIndex]){var vt=[new a.Point(Oe.x1,Oe.y1),new a.Point(Oe.x2,Oe.y1),new a.Point(Oe.x2,Oe.y2),new a.Point(Oe.x1,Oe.y2)];a.polygonIntersectsPolygon(b,vt)&&(be[Ke.bucketInstanceId][Ke.featureIndex]=!0,Re[Ke.bucketInstanceId]===void 0&&(Re[Ke.bucketInstanceId]=[]),Re[Ke.bucketInstanceId].push(Ke.featureIndex))}}return Re},Go.prototype.insertCollisionBox=function(c,b,d,w,D){var R=b?this.ignoredGrid:this.grid,G={bucketInstanceId:d,featureIndex:w,collisionGroupID:D};R.insert(G,c[0],c[1],c[2],c[3])},Go.prototype.insertCollisionCircles=function(c,b,d,w,D){for(var R=b?this.ignoredGrid:this.grid,G={bucketInstanceId:d,featureIndex:w,collisionGroupID:D},K=0;K<c.length;K+=4)R.insertCircle(G,c[K],c[K+1],c[K+2])},Go.prototype.projectAndGetPerspectiveRatio=function(c,b,d){var w=[b,d,0,1];Kf(w,w,c);var D=new a.Point((w[0]/w[3]+1)/2*this.transform.width+$i,(-w[1]/w[3]+1)/2*this.transform.height+$i);return{point:D,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/w[3])}},Go.prototype.isOffscreen=function(c,b,d,w){return d<$i||c>=this.screenRightBoundary||w<$i||b>this.screenBottomBoundary},Go.prototype.isInsideGrid=function(c,b,d,w){return d>=0&&c<this.gridRightBoundary&&w>=0&&b<this.gridBottomBoundary},Go.prototype.getViewportMatrix=function(){var c=a.identity([]);return a.translate(c,c,[-$i,-$i,0]),c};function mo(g,c,b){return c*(a.EXTENT/(g.tileSize*Math.pow(2,b-g.tileID.overscaledZ)))}var yl=function(c,b,d,w){c?this.opacity=Math.max(0,Math.min(1,c.opacity+(c.placed?b:-b))):this.opacity=w&&d?1:0,this.placed=d};yl.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Zo=function(c,b,d,w,D){this.text=new yl(c?c.text:null,b,d,D),this.icon=new yl(c?c.icon:null,b,w,D)};Zo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var mu=function(c,b,d){this.text=c,this.icon=b,this.skipFade=d},fp=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},wv=function(c,b,d,w,D){this.bucketInstanceId=c,this.featureIndex=b,this.sourceLayerIndex=d,this.bucketIndex=w,this.tileID=D},ef=function(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}};ef.prototype.get=function(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){var b=++this.maxGroupID;this.collisionGroups[c]={ID:b,predicate:function(d){return d.collisionGroupID===b}}}return this.collisionGroups[c]};function Tv(g,c,b,d,w){var D=a.getAnchorAlignment(g),R=D.horizontalAlign,G=D.verticalAlign,K=-(R-.5)*c,re=-(G-.5)*b,ce=a.evaluateVariableOffset(g,d);return new a.Point(K+ce[0]*w,re+ce[1]*w)}function Av(g,c,b,d,w,D){var R=g.x1,G=g.x2,K=g.y1,re=g.y2,ce=g.anchorPointX,we=g.anchorPointY,be=new a.Point(c,b);return d&&be._rotate(w?D:-D),{x1:R+be.x,y1:K+be.y,x2:G+be.x,y2:re+be.y,anchorPointX:ce,anchorPointY:we}}var lo=function(c,b,d,w){this.transform=c.clone(),this.collisionIndex=new Go(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new ef(d),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};lo.prototype.getBucketParts=function(c,b,d,w){var D=d.getBucket(b),R=d.latestFeatureIndex;if(!(!D||!R||b.id!==D.layerIds[0])){var G=d.collisionBoxArray,K=D.layers[0].layout,re=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),ce=d.tileSize/a.EXTENT,we=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),be=K.get("text-pitch-alignment")==="map",Re=K.get("text-rotation-alignment")==="map",Ze=mo(d,1,this.transform.zoom),Ge=Kn(we,be,Re,this.transform,Ze),Oe=null;if(be){var Ke=du(we,be,Re,this.transform,Ze);Oe=a.multiply([],this.transform.labelPlaneMatrix,Ke)}this.retainedQueryData[D.bucketInstanceId]=new wv(D.bucketInstanceId,R,D.sourceLayerIndex,D.index,d.tileID);var vt={bucket:D,layout:K,posMatrix:we,textLabelPlaneMatrix:Ge,labelToScreenMatrix:Oe,scale:re,textPixelRatio:ce,holdingForFade:d.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(w)for(var zt=0,Nt=D.sortKeyRanges;zt<Nt.length;zt+=1){var Qt=Nt[zt],rr=Qt.sortKey,Gt=Qt.symbolInstanceStart,ar=Qt.symbolInstanceEnd;c.push({sortKey:rr,symbolInstanceStart:Gt,symbolInstanceEnd:ar,parameters:vt})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:vt})}},lo.prototype.attemptAnchorPlacement=function(c,b,d,w,D,R,G,K,re,ce,we,be,Re,Ze,Ge){var Oe=[be.textOffset0,be.textOffset1],Ke=Tv(c,d,w,Oe,D),vt=this.collisionIndex.placeCollisionBox(Av(b,Ke.x,Ke.y,R,G,this.transform.angle),we,K,re,ce.predicate);if(Ge){var zt=this.collisionIndex.placeCollisionBox(Av(Ge,Ke.x,Ke.y,R,G,this.transform.angle),we,K,re,ce.predicate);if(zt.box.length===0)return}if(vt.box.length>0){var Nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),this.variableOffsets[be.crossTileID]={textOffset:Oe,width:d,height:w,anchor:c,textBoxScale:D,prevAnchor:Nt},this.markUsedJustification(Re,c,be,Ze),Re.allowVerticalPlacement&&(this.markUsedOrientation(Re,Ze,be),this.placedOrientations[be.crossTileID]=Ze),{shift:Ke,placedGlyphBoxes:vt}}},lo.prototype.placeLayerBucketPart=function(c,b,d){var w=this,D=c.parameters,R=D.bucket,G=D.layout,K=D.posMatrix,re=D.textLabelPlaneMatrix,ce=D.labelToScreenMatrix,we=D.textPixelRatio,be=D.holdingForFade,Re=D.collisionBoxArray,Ze=D.partiallyEvaluatedTextSize,Ge=D.collisionGroup,Oe=G.get("text-optional"),Ke=G.get("icon-optional"),vt=G.get("text-allow-overlap"),zt=G.get("icon-allow-overlap"),Nt=G.get("text-rotation-alignment")==="map",Qt=G.get("text-pitch-alignment")==="map",rr=G.get("icon-text-fit")!=="none",Gt=G.get("symbol-z-order")==="viewport-y",ar=vt&&(zt||!R.hasIconData()||Ke),vr=zt&&(vt||!R.hasTextData()||Oe);!R.collisionArrays&&Re&&R.deserializeCollisionBoxes(Re);var wr=function(Nr,Ma){if(!b[Nr.crossTileID]){if(be){w.placements[Nr.crossTileID]=new mu(!1,!1,!1);return}var aa=!1,Za=!1,Ua=!0,Mi=null,La={box:null,offscreen:null},mi={box:null,offscreen:null},ia=null,Ba=null,tn=null,Nn=0,Ps=0,zs=0;Ma.textFeatureIndex?Nn=Ma.textFeatureIndex:Nr.useRuntimeCollisionCircles&&(Nn=Nr.featureIndex),Ma.verticalTextFeatureIndex&&(Ps=Ma.verticalTextFeatureIndex);var $s=Ma.textBox;if($s){var Ol=function(un){var $o=a.WritingMode.horizontal;if(R.allowVerticalPlacement&&!un&&w.prevPlacement){var es=w.prevPlacement.placedOrientations[Nr.crossTileID];es&&(w.placedOrientations[Nr.crossTileID]=es,$o=es,w.markUsedOrientation(R,$o,Nr))}return $o},hc=function(un,$o){if(R.allowVerticalPlacement&&Nr.numVerticalGlyphVertices>0&&Ma.verticalTextBox)for(var es=0,Qp=R.writingModes;es<Qp.length;es+=1){var vy=Qp[es];if(vy===a.WritingMode.vertical?(La=$o(),mi=La):La=un(),La&&La.box&&La.box.length)break}else La=un()};if(G.get("text-variable-anchor")){var Qo=G.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[Nr.crossTileID]){var Po=w.prevPlacement.variableOffsets[Nr.crossTileID];Qo.indexOf(Po.anchor)>0&&(Qo=Qo.filter(function(un){return un!==Po.anchor}),Qo.unshift(Po.anchor))}var el=function(un,$o,es){for(var Qp=un.x2-un.x1,vy=un.y2-un.y1,m3=Nr.textBoxScale,y3=rr&&!zt?$o:null,rd={box:[],offscreen:!1},g3=vt?Qo.length*2:Qo.length,$p=0;$p<g3;++$p){var _3=Qo[$p%Qo.length],x3=$p>=Qo.length,dy=w.attemptAnchorPlacement(_3,un,Qp,vy,m3,Nt,Qt,we,K,Ge,x3,Nr,R,es,y3);if(dy&&(rd=dy.placedGlyphBoxes,rd&&rd.box&&rd.box.length)){aa=!0,Mi=dy.shift;break}}return rd},Eu=function(){return el($s,Ma.iconBox,a.WritingMode.horizontal)},tl=function(){var un=Ma.verticalTextBox,$o=La&&La.box&&La.box.length;return R.allowVerticalPlacement&&!$o&&Nr.numVerticalGlyphVertices>0&&un?el(un,Ma.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}};hc(Eu,tl),La&&(aa=La.box,Ua=La.offscreen);var Wp=Ol(La&&La.box);if(!aa&&w.prevPlacement){var gh=w.prevPlacement.variableOffsets[Nr.crossTileID];gh&&(w.variableOffsets[Nr.crossTileID]=gh,w.markUsedJustification(R,gh.anchor,Nr,Wp))}}else{var Ul=function(un,$o){var es=w.collisionIndex.placeCollisionBox(un,vt,we,K,Ge.predicate);return es&&es.box&&es.box.length&&(w.markUsedOrientation(R,$o,Nr),w.placedOrientations[Nr.crossTileID]=$o),es},Do=function(){return Ul($s,a.WritingMode.horizontal)},Vl=function(){var un=Ma.verticalTextBox;return R.allowVerticalPlacement&&Nr.numVerticalGlyphVertices>0&&un?Ul(un,a.WritingMode.vertical):{box:null,offscreen:null}};hc(Do,Vl),Ol(La&&La.box&&La.box.length)}}if(ia=La,aa=ia&&ia.box&&ia.box.length>0,Ua=ia&&ia.offscreen,Nr.useRuntimeCollisionCircles){var Gn=R.text.placedSymbolArray.get(Nr.centerJustifiedTextSymbolIndex),Xp=a.evaluateSizeForFeature(R.textSizeData,Ze,Gn),td=G.get("text-padding"),xo=Nr.collisionCircleDiameter;Ba=w.collisionIndex.placeCollisionCircles(vt,Gn,R.lineVertexArray,R.glyphOffsetArray,Xp,K,re,ce,d,Qt,Ge.predicate,xo,td),aa=vt||Ba.circles.length>0&&!Ba.collisionDetected,Ua=Ua&&Ba.offscreen}if(Ma.iconFeatureIndex&&(zs=Ma.iconFeatureIndex),Ma.iconBox){var _h=function(un){var $o=rr&&Mi?Av(un,Mi.x,Mi.y,Nt,Qt,w.transform.angle):un;return w.collisionIndex.placeCollisionBox($o,zt,we,K,Ge.predicate)};mi&&mi.box&&mi.box.length&&Ma.verticalIconBox?(tn=_h(Ma.verticalIconBox),Za=tn.box.length>0):(tn=_h(Ma.iconBox),Za=tn.box.length>0),Ua=Ua&&tn.offscreen}var jp=Oe||Nr.numHorizontalGlyphVertices===0&&Nr.numVerticalGlyphVertices===0,Jp=Ke||Nr.numIconVertices===0;if(!jp&&!Jp?Za=aa=Za&&aa:Jp?jp||(Za=Za&&aa):aa=Za&&aa,aa&&ia&&ia.box&&(mi&&mi.box&&Ps?w.collisionIndex.insertCollisionBox(ia.box,G.get("text-ignore-placement"),R.bucketInstanceId,Ps,Ge.ID):w.collisionIndex.insertCollisionBox(ia.box,G.get("text-ignore-placement"),R.bucketInstanceId,Nn,Ge.ID)),Za&&tn&&w.collisionIndex.insertCollisionBox(tn.box,G.get("icon-ignore-placement"),R.bucketInstanceId,zs,Ge.ID),Ba&&(aa&&w.collisionIndex.insertCollisionCircles(Ba.circles,G.get("text-ignore-placement"),R.bucketInstanceId,Nn,Ge.ID),d)){var Kp=R.bucketInstanceId,xh=w.collisionCircleArrays[Kp];xh===void 0&&(xh=w.collisionCircleArrays[Kp]=new fp);for(var bh=0;bh<Ba.circles.length;bh+=4)xh.circles.push(Ba.circles[bh+0]),xh.circles.push(Ba.circles[bh+1]),xh.circles.push(Ba.circles[bh+2]),xh.circles.push(Ba.collisionDetected?1:0)}w.placements[Nr.crossTileID]=new mu(aa||ar,Za||vr,Ua||R.justReloaded),b[Nr.crossTileID]=!0}};if(Gt)for(var Lr=R.getSortedSymbolIndexes(this.transform.angle),kr=Lr.length-1;kr>=0;--kr){var Wr=Lr[kr];wr(R.symbolInstances.get(Wr),R.collisionArrays[Wr])}else for(var Ra=c.symbolInstanceStart;Ra<c.symbolInstanceEnd;Ra++)wr(R.symbolInstances.get(Ra),R.collisionArrays[Ra]);if(d&&R.bucketInstanceId in this.collisionCircleArrays){var _a=this.collisionCircleArrays[R.bucketInstanceId];a.invert(_a.invProjMatrix,K),_a.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1},lo.prototype.markUsedJustification=function(c,b,d,w){var D={left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex},R;w===a.WritingMode.vertical?R=d.verticalPlacedTextSymbolIndex:R=D[a.getAnchorJustification(b)];for(var G=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex],K=0,re=G;K<re.length;K+=1){var ce=re[K];ce>=0&&(R>=0&&ce!==R?c.text.placedSymbolArray.get(ce).crossTileID=0:c.text.placedSymbolArray.get(ce).crossTileID=d.crossTileID)}},lo.prototype.markUsedOrientation=function(c,b,d){for(var w=b===a.WritingMode.horizontal||b===a.WritingMode.horizontalOnly?b:0,D=b===a.WritingMode.vertical?b:0,R=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex],G=0,K=R;G<K.length;G+=1){var re=K[G];c.text.placedSymbolArray.get(re).placedOrientation=w}d.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=D)},lo.prototype.commit=function(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;var b=this.prevPlacement,d=!1;this.prevZoomAdjustment=b?b.zoomAdjustment(this.transform.zoom):0;var w=b?b.symbolFadeChange(c):1,D=b?b.opacities:{},R=b?b.variableOffsets:{},G=b?b.placedOrientations:{};for(var K in this.placements){var re=this.placements[K],ce=D[K];ce?(this.opacities[K]=new Zo(ce,w,re.text,re.icon),d=d||re.text!==ce.text.placed||re.icon!==ce.icon.placed):(this.opacities[K]=new Zo(null,w,re.text,re.icon,re.skipFade),d=d||re.text||re.icon)}for(var we in D){var be=D[we];if(!this.opacities[we]){var Re=new Zo(be,w,!1,!1);Re.isHidden()||(this.opacities[we]=Re,d=d||be.text.placed||be.icon.placed)}}for(var Ze in R)!this.variableOffsets[Ze]&&this.opacities[Ze]&&!this.opacities[Ze].isHidden()&&(this.variableOffsets[Ze]=R[Ze]);for(var Ge in G)!this.placedOrientations[Ge]&&this.opacities[Ge]&&!this.opacities[Ge].isHidden()&&(this.placedOrientations[Ge]=G[Ge]);d?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=b?b.lastPlacementChangeTime:c)},lo.prototype.updateLayerOpacities=function(c,b){for(var d={},w=0,D=b;w<D.length;w+=1){var R=D[w],G=R.getBucket(c);G&&R.latestFeatureIndex&&c.id===G.layerIds[0]&&this.updateBucketOpacities(G,d,R.collisionBoxArray)}},lo.prototype.updateBucketOpacities=function(c,b,d){var w=this;c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();var D=c.layers[0].layout,R=new Zo(null,0,!1,!1,!0),G=D.get("text-allow-overlap"),K=D.get("icon-allow-overlap"),re=D.get("text-variable-anchor"),ce=D.get("text-rotation-alignment")==="map",we=D.get("text-pitch-alignment")==="map",be=D.get("icon-text-fit")!=="none",Re=new Zo(null,0,G&&(K||!c.hasIconData()||D.get("icon-optional")),K&&(G||!c.hasTextData()||D.get("text-optional")),!0);!c.collisionArrays&&d&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(d);for(var Ze=function(vt,zt,Nt){for(var Qt=0;Qt<zt/4;Qt++)vt.opacityVertexArray.emplaceBack(Nt)},Ge=function(vt){var zt=c.symbolInstances.get(vt),Nt=zt.numHorizontalGlyphVertices,Qt=zt.numVerticalGlyphVertices,rr=zt.crossTileID,Gt=b[rr],ar=w.opacities[rr];Gt?ar=R:ar||(ar=Re,w.opacities[rr]=ar),b[rr]=!0;var vr=Nt>0||Qt>0,wr=zt.numIconVertices>0,Lr=w.placedOrientations[zt.crossTileID],kr=Lr===a.WritingMode.vertical,Wr=Lr===a.WritingMode.horizontal||Lr===a.WritingMode.horizontalOnly;if(vr){var Ra=rf(ar.text),_a=kr?Er:Ra;Ze(c.text,Nt,_a);var Nr=Wr?Er:Ra;Ze(c.text,Qt,Nr);var Ma=ar.text.isHidden();[zt.rightJustifiedTextSymbolIndex,zt.centerJustifiedTextSymbolIndex,zt.leftJustifiedTextSymbolIndex].forEach(function(zs){zs>=0&&(c.text.placedSymbolArray.get(zs).hidden=Ma||kr?1:0)}),zt.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(zt.verticalPlacedTextSymbolIndex).hidden=Ma||Wr?1:0);var aa=w.variableOffsets[zt.crossTileID];aa&&w.markUsedJustification(c,aa.anchor,zt,Lr);var Za=w.placedOrientations[zt.crossTileID];Za&&(w.markUsedJustification(c,"left",zt,Za),w.markUsedOrientation(c,Za,zt))}if(wr){var Ua=rf(ar.icon),Mi=!(be&&zt.verticalPlacedIconSymbolIndex&&kr);if(zt.placedIconSymbolIndex>=0){var La=Mi?Ua:Er;Ze(c.icon,zt.numIconVertices,La),c.icon.placedSymbolArray.get(zt.placedIconSymbolIndex).hidden=ar.icon.isHidden()}if(zt.verticalPlacedIconSymbolIndex>=0){var mi=Mi?Er:Ua;Ze(c.icon,zt.numVerticalIconVertices,mi),c.icon.placedSymbolArray.get(zt.verticalPlacedIconSymbolIndex).hidden=ar.icon.isHidden()}}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){var ia=c.collisionArrays[vt];if(ia){var Ba=new a.Point(0,0);if(ia.textBox||ia.verticalTextBox){var tn=!0;if(re){var Nn=w.variableOffsets[rr];Nn?(Ba=Tv(Nn.anchor,Nn.width,Nn.height,Nn.textOffset,Nn.textBoxScale),ce&&Ba._rotate(we?w.transform.angle:-w.transform.angle)):tn=!1}ia.textBox&&Xt(c.textCollisionBox.collisionVertexArray,ar.text.placed,!tn||kr,Ba.x,Ba.y),ia.verticalTextBox&&Xt(c.textCollisionBox.collisionVertexArray,ar.text.placed,!tn||Wr,Ba.x,Ba.y)}var Ps=!!(!Wr&&ia.verticalIconBox);ia.iconBox&&Xt(c.iconCollisionBox.collisionVertexArray,ar.icon.placed,Ps,be?Ba.x:0,be?Ba.y:0),ia.verticalIconBox&&Xt(c.iconCollisionBox.collisionVertexArray,ar.icon.placed,!Ps,be?Ba.x:0,be?Ba.y:0)}}},Oe=0;Oe<c.symbolInstances.length;Oe++)Ge(Oe);if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){var Ke=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Ke.invProjMatrix,c.placementViewportMatrix=Ke.viewportMatrix,c.collisionCircleArray=Ke.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}},lo.prototype.symbolFadeChange=function(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},lo.prototype.zoomAdjustment=function(c){return Math.max(0,(this.transform.zoom-c)/1.5)},lo.prototype.hasTransitions=function(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration},lo.prototype.stillRecent=function(c,b){var d=this.zoomAtLastRecencyCheck===b?1-this.zoomAdjustment(b):1;return this.zoomAtLastRecencyCheck=b,this.commitTime+this.fadeDuration*d>c},lo.prototype.setStale=function(){this.stale=!0};function Xt(g,c,b,d,w){g.emplaceBack(c?1:0,b?1:0,d||0,w||0),g.emplaceBack(c?1:0,b?1:0,d||0,w||0),g.emplaceBack(c?1:0,b?1:0,d||0,w||0),g.emplaceBack(c?1:0,b?1:0,d||0,w||0)}var Ur=Math.pow(2,25),cp=Math.pow(2,24),yu=Math.pow(2,17),on=Math.pow(2,16),gl=Math.pow(2,9),ws=Math.pow(2,8),tf=Math.pow(2,1);function rf(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;var c=g.placed?1:0,b=Math.floor(g.opacity*127);return b*Ur+c*cp+b*yu+c*on+b*gl+c*ws+b*tf+c}var Er=0,ba=function(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ba.prototype.continuePlacement=function(c,b,d,w,D){for(var R=this._bucketParts;this._currentTileIndex<c.length;){var G=c[this._currentTileIndex];if(b.getBucketParts(R,w,G,this._sortAcrossTiles),this._currentTileIndex++,D())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort(function(re,ce){return re.sortKey-ce.sortKey}));this._currentPartIndex<R.length;){var K=R[this._currentPartIndex];if(b.placeLayerBucketPart(K,this._seenCrossTileIDs,d),this._currentPartIndex++,D())return!0}return!1};var wa=function(c,b,d,w,D,R,G){this.placement=new lo(c,D,R,G),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=w,this._done=!1};wa.prototype.isDone=function(){return this._done},wa.prototype.continuePlacement=function(c,b,d){for(var w=this,D=a.browser.now(),R=function(){var we=a.browser.now()-D;return w._forceFullPlacement?!1:we>2};this._currentPlacementIndex>=0;){var G=c[this._currentPlacementIndex],K=b[G],re=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=re)&&(!K.maxzoom||K.maxzoom>re)){this._inProgressLayer||(this._inProgressLayer=new ba(K));var ce=this._inProgressLayer.continuePlacement(d[K.source],this.placement,this._showCollisionBoxes,K,R);if(ce)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},wa.prototype.commit=function(c){return this.placement.commit(c),this.placement};var Ts=512/a.EXTENT/2,_l=function(c,b,d){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(var w=0;w<b.length;w++){var D=b.get(w),R=D.key;this.indexedSymbolInstances[R]||(this.indexedSymbolInstances[R]=[]),this.indexedSymbolInstances[R].push({crossTileID:D.crossTileID,coord:this.getScaledCoordinates(D,c)})}};_l.prototype.getScaledCoordinates=function(c,b){var d=b.canonical.z-this.tileID.canonical.z,w=Ts/Math.pow(2,d);return{x:Math.floor((b.canonical.x*a.EXTENT+c.anchorX)*w),y:Math.floor((b.canonical.y*a.EXTENT+c.anchorY)*w)}},_l.prototype.findMatches=function(c,b,d){for(var w=this.tileID.canonical.z<b.canonical.z?1:Math.pow(2,this.tileID.canonical.z-b.canonical.z),D=0;D<c.length;D++){var R=c.get(D);if(!R.crossTileID){var G=this.indexedSymbolInstances[R.key];if(G)for(var K=this.getScaledCoordinates(R,b),re=0,ce=G;re<ce.length;re+=1){var we=ce[re];if(Math.abs(we.coord.x-K.x)<=w&&Math.abs(we.coord.y-K.y)<=w&&!d[we.crossTileID]){d[we.crossTileID]=!0,R.crossTileID=we.crossTileID;break}}}}};var Aa=function(){this.maxCrossTileID=0};Aa.prototype.generate=function(){return++this.maxCrossTileID};var Ws=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ws.prototype.handleWrapJump=function(c){var b=Math.round((c-this.lng)/360);if(b!==0)for(var d in this.indexes){var w=this.indexes[d],D={};for(var R in w){var G=w[R];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+b),D[G.tileID.key]=G}this.indexes[d]=D}this.lng=c},Ws.prototype.addBucket=function(c,b,d){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===b.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(var w=0;w<b.symbolInstances.length;w++){var D=b.symbolInstances.get(w);D.crossTileID=0}this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});var R=this.usedCrossTileIDs[c.overscaledZ];for(var G in this.indexes){var K=this.indexes[G];if(Number(G)>c.overscaledZ)for(var re in K){var ce=K[re];ce.tileID.isChildOf(c)&&ce.findMatches(b.symbolInstances,c,R)}else{var we=c.scaledTo(Number(G)),be=K[we.key];be&&be.findMatches(b.symbolInstances,c,R)}}for(var Re=0;Re<b.symbolInstances.length;Re++){var Ze=b.symbolInstances.get(Re);Ze.crossTileID||(Ze.crossTileID=d.generate(),R[Ze.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new _l(c,b.symbolInstances,b.bucketInstanceId),!0},Ws.prototype.removeBucketCrossTileIDs=function(c,b){for(var d in b.indexedSymbolInstances)for(var w=0,D=b.indexedSymbolInstances[d];w<D.length;w+=1){var R=D[w];delete this.usedCrossTileIDs[c][R.crossTileID]}},Ws.prototype.removeStaleBuckets=function(c){var b=!1;for(var d in this.indexes){var w=this.indexes[d];for(var D in w)c[w[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,w[D]),delete w[D],b=!0)}return b};var gu=function(){this.layerIndexes={},this.crossTileIDs=new Aa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};gu.prototype.addLayer=function(c,b,d){var w=this.layerIndexes[c.id];w===void 0&&(w=this.layerIndexes[c.id]=new Ws);var D=!1,R={};w.handleWrapJump(d);for(var G=0,K=b;G<K.length;G+=1){var re=K[G],ce=re.getBucket(c);!ce||c.id!==ce.layerIds[0]||(ce.bucketInstanceId||(ce.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(re.tileID,ce,this.crossTileIDs)&&(D=!0),R[ce.bucketInstanceId]=!0)}return w.removeStaleBuckets(R)&&(D=!0),D},gu.prototype.pruneUnusedLayers=function(c){var b={};c.forEach(function(w){b[w]=!0});for(var d in this.layerIndexes)b[d]||delete this.layerIndexes[d]};var fs=function(g,c){return a.emitValidationErrors(g,c&&c.filter(function(b){return b.identifier!=="source.canvas"}))},xl=a.pick(Yr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),yo=a.pick(Yr,["setCenter","setZoom","setBearing","setPitch"]),Ei=ri(),As=function(g){function c(b,d){var w=this;d===void 0&&(d={}),g.call(this),this.map=b,this.dispatcher=new Se(Zr(),this),this.imageManager=new O,this.imageManager.setEventedParent(this),this.glyphManager=new ee(b._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new gu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var D=this;this._rtlTextPluginCallback=c.registerForPluginStateChange(function(R){var G={pluginStatus:R.pluginStatus,pluginURL:R.pluginURL};D.dispatcher.broadcast("syncRTLPluginState",G,function(K,re){if(a.triggerPluginCompletionEvent(K),re){var ce=re.every(function(be){return be});if(ce)for(var we in D.sourceCaches)D.sourceCaches[we].reload()}})}),this.on("data",function(R){if(!(R.dataType!=="source"||R.sourceDataType!=="metadata")){var G=w.sourceCaches[R.sourceId];if(G){var K=G.getSource();if(!(!K||!K.vectorLayerIds))for(var re in w._layers){var ce=w._layers[re];ce.source===K.id&&w._validateLayer(ce)}}}})}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.loadURL=function(d,w){var D=this;w===void 0&&(w={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var R=typeof w.validate=="boolean"?w.validate:!a.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,w.accessToken);var G=this.map._requestManager.transformRequest(d,a.ResourceType.Style);this._request=a.getJSON(G,function(K,re){D._request=null,K?D.fire(new a.ErrorEvent(K)):re&&D._load(re,R)})},c.prototype.loadJSON=function(d,w){var D=this;w===void 0&&(w={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){D._request=null,D._load(d,w.validate!==!1)})},c.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Ei,!1)},c.prototype._load=function(d,w){if(!(w&&fs(this,a.validateStyle(d)))){this._loaded=!0,this.stylesheet=d;for(var D in d.sources)this.addSource(D,d.sources[D],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);var R=qa(this.stylesheet.layers);this._order=R.map(function(ce){return ce.id}),this._layers={},this._serializedLayers={};for(var G=0,K=R;G<K.length;G+=1){var re=K[G];re=a.createStyleLayer(re),re.setEventedParent(this,{layer:{id:re.id}}),this._layers[re.id]=re,this._serializedLayers[re.id]=re.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new le(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},c.prototype._loadSprite=function(d){var w=this;this._spriteRequest=E(d,this.map._requestManager,function(D,R){if(w._spriteRequest=null,D)w.fire(new a.ErrorEvent(D));else if(R)for(var G in R)w.imageManager.addImage(G,R[G]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new a.Event("data",{dataType:"style"}))})},c.prototype._validateLayer=function(d){var w=this.sourceCaches[d.source];if(w){var D=d.sourceLayer;if(D){var R=w.getSource();(R.type==="geojson"||R.vectorLayerIds&&R.vectorLayerIds.indexOf(D)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+D+'" does not exist on source "'+R.id+'" as specified by style layer "'+d.id+'"')))}}},c.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()},c.prototype._serializeLayers=function(d){for(var w=[],D=0,R=d;D<R.length;D+=1){var G=R[D],K=this._layers[G];K.type!=="custom"&&w.push(K.serialize())}return w},c.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},c.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},c.prototype.update=function(d){if(this._loaded){var w=this._changed;if(this._changed){var D=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(D.length||R.length)&&this._updateWorkerLayers(D,R);for(var G in this._updatedSources){var K=this._updatedSources[G];K==="reload"?this._reloadSource(G):K==="clear"&&this._clearSource(G)}this._updateTilesForChangedImages();for(var re in this._updatedPaintProps)this._layers[re].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}var ce={};for(var we in this.sourceCaches){var be=this.sourceCaches[we];ce[we]=be.used,be.used=!1}for(var Re=0,Ze=this._order;Re<Ze.length;Re+=1){var Ge=Ze[Re],Oe=this._layers[Ge];Oe.recalculate(d,this._availableImages),!Oe.isHidden(d.zoom)&&Oe.source&&(this.sourceCaches[Oe.source].used=!0)}for(var Ke in ce){var vt=this.sourceCaches[Ke];ce[Ke]!==vt.used&&vt.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ke}))}this.light.recalculate(d),this.z=d.zoom,w&&this.fire(new a.Event("data",{dataType:"style"}))}},c.prototype._updateTilesForChangedImages=function(){var d=Object.keys(this._changedImages);if(d.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}},c.prototype._updateWorkerLayers=function(d,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:w})},c.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},c.prototype.setState=function(d){var w=this;if(this._checkLoaded(),fs(this,a.validateStyle(d)))return!1;d=a.clone$1(d),d.layers=qa(d.layers);var D=Co(this.serialize(),d).filter(function(G){return!(G.command in yo)});if(D.length===0)return!1;var R=D.filter(function(G){return!(G.command in xl)});if(R.length>0)throw new Error("Unimplemented: "+R.map(function(G){return G.command}).join(", ")+".");return D.forEach(function(G){G.command!=="setTransition"&&w[G.command].apply(w,G.args)}),this.stylesheet=d,!0},c.prototype.addImage=function(d,w){if(this.getImage(d))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(d,w),this._afterImageUpdated(d)},c.prototype.updateImage=function(d,w){this.imageManager.updateImage(d,w)},c.prototype.getImage=function(d){return this.imageManager.getImage(d)},c.prototype.removeImage=function(d){if(!this.getImage(d))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(d),this._afterImageUpdated(d)},c.prototype._afterImageUpdated=function(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},c.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},c.prototype.addSource=function(d,w,D){var R=this;if(D===void 0&&(D={}),this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");var G=["vector","raster","geojson","video","image"],K=G.indexOf(w.type)>=0;if(!(K&&this._validate(a.validateStyle.source,"sources."+d,w,null,D))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var re=this.sourceCaches[d]=new et(d,w,this.dispatcher);re.style=this,re.setEventedParent(this,function(){return{isSourceLoaded:R.loaded(),source:re.serialize(),sourceId:d}}),re.onAdd(this.map),this._changed=!0}},c.prototype.removeSource=function(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===d)return this.fire(new a.ErrorEvent(new Error('Source "'+d+'" cannot be removed while layer "'+w+'" is using it.')));var D=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],D.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),D.setEventedParent(null),D.clearTiles(),D.onRemove&&D.onRemove(this.map),this._changed=!0},c.prototype.setGeoJSONSourceData=function(d,w){this._checkLoaded();var D=this.sourceCaches[d].getSource();D.setData(w),this._changed=!0},c.prototype.getSource=function(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()},c.prototype.addLayer=function(d,w,D){D===void 0&&(D={}),this._checkLoaded();var R=d.id;if(this.getLayer(R)){this.fire(new a.ErrorEvent(new Error('Layer with id "'+R+'" already exists on this map')));return}var G;if(d.type==="custom"){if(fs(this,a.validateCustomStyleLayer(d)))return;G=a.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(R,d.source),d=a.clone$1(d),d=a.extend(d,{source:R})),this._validate(a.validateStyle.layer,"layers."+R,d,{arrayIndex:-1},D))return;G=a.createStyleLayer(d),this._validateLayer(G),G.setEventedParent(this,{layer:{id:R}}),this._serializedLayers[G.id]=G.serialize()}var K=w?this._order.indexOf(w):this._order.length;if(w&&K===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));return}if(this._order.splice(K,0,R),this._layerOrderChanged=!0,this._layers[R]=G,this._removedLayers[R]&&G.source&&G.type!=="custom"){var re=this._removedLayers[R];delete this._removedLayers[R],re.type!==G.type?this._updatedSources[G.source]="clear":(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause())}this._updateLayer(G),G.onAdd&&G.onAdd(this.map)},c.prototype.moveLayer=function(d,w){this._checkLoaded(),this._changed=!0;var D=this._layers[d];if(!D){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be moved.")));return}if(d!==w){var R=this._order.indexOf(d);this._order.splice(R,1);var G=w?this._order.indexOf(w):this._order.length;if(w&&G===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));return}this._order.splice(G,0,d),this._layerOrderChanged=!0}},c.prototype.removeLayer=function(d){this._checkLoaded();var w=this._layers[d];if(!w){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be removed.")));return}w.setEventedParent(null);var D=this._order.indexOf(d);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=w,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],w.onRemove&&w.onRemove(this.map)},c.prototype.getLayer=function(d){return this._layers[d]},c.prototype.hasLayer=function(d){return d in this._layers},c.prototype.setLayerZoomRange=function(d,w,D){this._checkLoaded();var R=this.getLayer(d);if(!R){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot have zoom extent.")));return}R.minzoom===w&&R.maxzoom===D||(w!=null&&(R.minzoom=w),D!=null&&(R.maxzoom=D),this._updateLayer(R))},c.prototype.setFilter=function(d,w,D){D===void 0&&(D={}),this._checkLoaded();var R=this.getLayer(d);if(!R){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be filtered.")));return}if(!a.deepEqual(R.filter,w)){if(w==null){R.filter=void 0,this._updateLayer(R);return}this._validate(a.validateStyle.filter,"layers."+R.id+".filter",w,null,D)||(R.filter=a.clone$1(w),this._updateLayer(R))}},c.prototype.getFilter=function(d){return a.clone$1(this.getLayer(d).filter)},c.prototype.setLayoutProperty=function(d,w,D,R){R===void 0&&(R={}),this._checkLoaded();var G=this.getLayer(d);if(!G){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be styled.")));return}a.deepEqual(G.getLayoutProperty(w),D)||(G.setLayoutProperty(w,D,R),this._updateLayer(G))},c.prototype.getLayoutProperty=function(d,w){var D=this.getLayer(d);if(!D){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style.")));return}return D.getLayoutProperty(w)},c.prototype.setPaintProperty=function(d,w,D,R){R===void 0&&(R={}),this._checkLoaded();var G=this.getLayer(d);if(!G){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be styled.")));return}if(!a.deepEqual(G.getPaintProperty(w),D)){var K=G.setPaintProperty(w,D,R);K&&this._updateLayer(G),this._changed=!0,this._updatedPaintProps[d]=!0}},c.prototype.getPaintProperty=function(d,w){return this.getLayer(d).getPaintProperty(w)},c.prototype.setFeatureState=function(d,w){this._checkLoaded();var D=d.source,R=d.sourceLayer,G=this.sourceCaches[D];if(G===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")));return}var K=G.getSource().type;if(K==="geojson"&&R){this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(K==="vector"&&!R){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}d.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),G.setFeatureState(R,d.id,w)},c.prototype.removeFeatureState=function(d,w){this._checkLoaded();var D=d.source,R=this.sourceCaches[D];if(R===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")));return}var G=R.getSource().type,K=G==="vector"?d.sourceLayer:void 0;if(G==="vector"&&!K){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(w&&typeof d.id!="string"&&typeof d.id!="number"){this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}R.removeFeatureState(K,d.id,w)},c.prototype.getFeatureState=function(d){this._checkLoaded();var w=d.source,D=d.sourceLayer,R=this.sourceCaches[w];if(R===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")));return}var G=R.getSource().type;if(G==="vector"&&!D){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return d.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),R.getFeatureState(D,d.id)},c.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},c.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(d){return d.serialize()}),layers:this._serializeLayers(this._order)},function(d){return d!==void 0})},c.prototype._updateLayer=function(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0},c.prototype._flattenAndSortRenderedFeatures=function(d){for(var w=this,D=function(Wr){return w._layers[Wr].type==="fill-extrusion"},R={},G=[],K=this._order.length-1;K>=0;K--){var re=this._order[K];if(D(re)){R[re]=K;for(var ce=0,we=d;ce<we.length;ce+=1){var be=we[ce],Re=be[re];if(Re)for(var Ze=0,Ge=Re;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze];G.push(Oe)}}}}G.sort(function(Wr,Ra){return Ra.intersectionZ-Wr.intersectionZ});for(var Ke=[],vt=this._order.length-1;vt>=0;vt--){var zt=this._order[vt];if(D(zt))for(var Nt=G.length-1;Nt>=0;Nt--){var Qt=G[Nt].feature;if(R[Qt.layer.id]<vt)break;Ke.push(Qt),G.pop()}else for(var rr=0,Gt=d;rr<Gt.length;rr+=1){var ar=Gt[rr],vr=ar[zt];if(vr)for(var wr=0,Lr=vr;wr<Lr.length;wr+=1){var kr=Lr[wr];Ke.push(kr.feature)}}}return Ke},c.prototype.queryRenderedFeatures=function(d,w,D){w&&w.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var R={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var G=0,K=w.layers;G<K.length;G+=1){var re=K[G],ce=this._layers[re];if(!ce)return this.fire(new a.ErrorEvent(new Error("The layer '"+re+"' does not exist in the map's style and cannot be queried for features."))),[];R[ce.source]=!0}}var we=[];w.availableImages=this._availableImages;for(var be in this.sourceCaches)w.layers&&!R[be]||we.push(_e(this.sourceCaches[be],this._layers,this._serializedLayers,d,w,D));return this.placement&&we.push(Ue(this._layers,this._serializedLayers,this.sourceCaches,d,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(we)},c.prototype.querySourceFeatures=function(d,w){w&&w.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var D=this.sourceCaches[d];return D?at(D,w):[]},c.prototype.addSourceType=function(d,w,D){if(c.getSourceType(d))return D(new Error('A source type called "'+d+'" already exists.'));if(c.setSourceType(d,w),!w.workerSourceURL)return D(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:d,url:w.workerSourceURL},D)},c.prototype.getLight=function(){return this.light.getLight()},c.prototype.setLight=function(d,w){w===void 0&&(w={}),this._checkLoaded();var D=this.light.getLight(),R=!1;for(var G in d)if(!a.deepEqual(d[G],D[G])){R=!0;break}if(R){var K={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,w),this.light.updateTransitions(K)}},c.prototype._validate=function(d,w,D,R,G){return G===void 0&&(G={}),G&&G.validate===!1?!1:fs(this,d.call(a.validateStyle,a.extend({key:w,style:this.serialize(),value:D,styleSpec:a.styleSpec},R)))},c.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var d in this._layers){var w=this._layers[d];w.setEventedParent(null)}for(var D in this.sourceCaches)this.sourceCaches[D].clearTiles(),this.sourceCaches[D].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},c.prototype._clearSource=function(d){this.sourceCaches[d].clearTiles()},c.prototype._reloadSource=function(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()},c.prototype._updateSources=function(d){for(var w in this.sourceCaches)this.sourceCaches[w].update(d)},c.prototype._generateCollisionBoxes=function(){for(var d in this.sourceCaches)this._reloadSource(d)},c.prototype._updatePlacement=function(d,w,D,R,G){G===void 0&&(G=!1);for(var K=!1,re=!1,ce={},we=0,be=this._order;we<be.length;we+=1){var Re=be[we],Ze=this._layers[Re];if(Ze.type==="symbol"){if(!ce[Ze.source]){var Ge=this.sourceCaches[Ze.source];ce[Ze.source]=Ge.getRenderableIds(!0).map(function(rr){return Ge.getTileByID(rr)}).sort(function(rr,Gt){return Gt.tileID.overscaledZ-rr.tileID.overscaledZ||(rr.tileID.isLessThan(Gt.tileID)?-1:1)})}var Oe=this.crossTileSymbolIndex.addLayer(Ze,ce[Ze.source],d.center.lng);K=K||Oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),G=G||this._layerOrderChanged||D===0,(G||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),d.zoom))&&(this.pauseablePlacement=new wa(d,this._order,G,w,D,R,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ce),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),re=!0),K&&this.pauseablePlacement.placement.setStale()),re||K)for(var Ke=0,vt=this._order;Ke<vt.length;Ke+=1){var zt=vt[Ke],Nt=this._layers[zt];Nt.type==="symbol"&&this.placement.updateLayerOpacities(Nt,ce[Nt.source])}var Qt=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now());return Qt},c.prototype._releaseSymbolFadeTiles=function(){for(var d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()},c.prototype.getImages=function(d,w,D){this.imageManager.getImages(w.icons,D),this._updateTilesForChangedImages();var R=this.sourceCaches[w.source];R&&R.setDependencies(w.tileID.key,w.type,w.icons)},c.prototype.getGlyphs=function(d,w,D){this.glyphManager.getGlyphs(w.stacks,D)},c.prototype.getResource=function(d,w,D){return a.makeRequest(w,D)},c}(a.Evented);As.getSourceType=It,As.setSourceType=yt,As.registerForPluginStateChange=a.registerForPluginStateChange;var cs=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Yc=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,_u=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Pm=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qf="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ni=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$f="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Mv=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xn=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Rn="void main() {gl_FragColor=vec4(1.0);}",hp="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",af=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,sn=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Eo=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Yo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",dn="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",ec="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",ln="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Wo="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Xs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",zm="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Xo=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Im=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,js=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fn=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Rm=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bl=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,wl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Fm=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qm=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Wc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Nm=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Bm=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Om="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",kv=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Um="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Vm=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cv=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,vp=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dp=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ev=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hm=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Lv=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,pp=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gm="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",mp=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yp=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,gp=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zm=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,hs=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Tl=qi(Yc,_u),jc=qi(Pm,Qf),Al=qi(ni,$f),Ml=qi(Mv,xn),Dv=qi(Rn,hp),Jc=qi(af,sn),Ms=qi(Eo,Yo),pn=qi(dn,ec),Ym=qi(ln,Wo),Wm=qi(Xs,zm),Sl=qi(Xo,Im),nf=qi(js,Fn),vs=qi(Rm,bl),_p=qi(wl,Sv),xp=qi(Fm,qm),of=qi(Wc,Nm),bp=qi(Bm,Om),wp=qi(kv,Um),Xm=qi(Vm,Cv),jm=qi(vp,dp),Pv=qi(Ev,Hm),zv=qi(Lv,xu),Iv=qi(pp,Gm),tc=qi(mp,yp),Kc=qi(gp,Zm),Tp=qi(hs,Xc);function qi(g,c){var b=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=c.match(/attribute ([\w]+) ([\w]+)/g),w=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=D?D.concat(w):w,G={};return g=g.replace(b,function(K,re,ce,we,be){return G[be]=!0,re==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
varying `+ce+" "+we+" "+be+`;
#else
uniform `+ce+" "+we+" u_"+be+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+be+`
    `+ce+" "+we+" "+be+" = u_"+be+`;
#endif
`}),c=c.replace(b,function(K,re,ce,we,be){var Re=we==="float"?"vec2":"vec4",Ze=be.match(/color/)?"color":Re;return G[be]?re==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+ce+" "+Re+" a_"+be+`;
varying `+ce+" "+we+" "+be+`;
#else
uniform `+ce+" "+we+" u_"+be+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = a_"+be+`;
#else
    `+ce+" "+we+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = unpack_mix_"+Ze+"(a_"+be+", u_"+be+`_t);
#else
    `+ce+" "+we+" "+be+" = u_"+be+`;
#endif
`:re==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+ce+" "+Re+" a_"+be+`;
#else
uniform `+ce+" "+we+" u_"+be+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+ce+" "+we+" "+be+" = a_"+be+`;
#else
    `+ce+" "+we+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+ce+" "+we+" "+be+" = unpack_mix_"+Ze+"(a_"+be+", u_"+be+`_t);
#else
    `+ce+" "+we+" "+be+" = u_"+be+`;
#endif
`}),{fragmentSource:g,vertexSource:c,staticAttributes:d,staticUniforms:R}}var Jm=Object.freeze({__proto__:null,prelude:Tl,background:jc,backgroundPattern:Al,circle:Ml,clippingMask:Dv,heatmap:Jc,heatmapTexture:Ms,collisionBox:pn,collisionCircle:Ym,debug:Wm,fill:Sl,fillOutline:nf,fillOutlinePattern:vs,fillPattern:_p,fillExtrusion:xp,fillExtrusionPattern:of,hillshadePrepare:bp,hillshade:wp,line:Xm,lineGradient:jm,linePattern:Pv,lineSDF:zv,raster:Iv,symbolIcon:tc,symbolSDF:Kc,symbolTextAndIcon:Tp}),Qc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Qc.prototype.bind=function(c,b,d,w,D,R,G,K){this.context=c;for(var re=this.boundPaintVertexBuffers.length!==w.length,ce=0;!re&&ce<w.length;ce++)this.boundPaintVertexBuffers[ce]!==w[ce]&&(re=!0);var we=!this.vao||this.boundProgram!==b||this.boundLayoutVertexBuffer!==d||re||this.boundIndexBuffer!==D||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==K;!c.extVertexArrayObject||we?this.freshBind(b,d,w,D,R,G,K):(c.bindVertexArrayOES.set(this.vao),G&&G.bind(),D&&D.dynamicDraw&&D.bind(),K&&K.bind())},Qc.prototype.freshBind=function(c,b,d,w,D,R,G){var K,re=c.numAttributes,ce=this.context,we=ce.gl;if(ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ce.extVertexArrayObject.createVertexArrayOES(),ce.bindVertexArrayOES.set(this.vao),K=0,this.boundProgram=c,this.boundLayoutVertexBuffer=b,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=w,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=G;else{K=ce.currentNumAttributes||0;for(var be=re;be<K;be++)we.disableVertexAttribArray(be)}b.enableAttributes(we,c);for(var Re=0,Ze=d;Re<Ze.length;Re+=1){var Ge=Ze[Re];Ge.enableAttributes(we,c)}R&&R.enableAttributes(we,c),G&&G.enableAttributes(we,c),b.bind(),b.setVertexAttribPointers(we,c,D);for(var Oe=0,Ke=d;Oe<Ke.length;Oe+=1){var vt=Ke[Oe];vt.bind(),vt.setVertexAttribPointers(we,c,D)}R&&(R.bind(),R.setVertexAttribPointers(we,c,D)),w&&w.bind(),G&&(G.bind(),G.setVertexAttribPointers(we,c,D)),ce.currentNumAttributes=re},Qc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Rv(g){for(var c=[],b=0;b<g.length;b++)if(g[b]!==null){var d=g[b].split(" ");c.push(d.pop())}return c}var Ap=function(c,b,d,w,D,R){var G=c.gl;this.program=G.createProgram();for(var K=Rv(d.staticAttributes),re=w?w.getBinderAttributes():[],ce=K.concat(re),we=d.staticUniforms?Rv(d.staticUniforms):[],be=w?w.getBinderUniforms():[],Re=we.concat(be),Ze=[],Ge=0,Oe=Re;Ge<Oe.length;Ge+=1){var Ke=Oe[Ge];Ze.indexOf(Ke)<0&&Ze.push(Ke)}var vt=w?w.defines():[];R&&vt.push("#define OVERDRAW_INSPECTOR;");var zt=vt.concat(Tl.fragmentSource,d.fragmentSource).join(`
`),Nt=vt.concat(Tl.vertexSource,d.vertexSource).join(`
`),Qt=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost()){this.failedToCreate=!0;return}G.shaderSource(Qt,zt),G.compileShader(Qt),G.attachShader(this.program,Qt);var rr=G.createShader(G.VERTEX_SHADER);if(G.isContextLost()){this.failedToCreate=!0;return}G.shaderSource(rr,Nt),G.compileShader(rr),G.attachShader(this.program,rr),this.attributes={};var Gt={};this.numAttributes=ce.length;for(var ar=0;ar<this.numAttributes;ar++)ce[ar]&&(G.bindAttribLocation(this.program,ar,ce[ar]),this.attributes[ce[ar]]=ar);G.linkProgram(this.program),G.deleteShader(rr),G.deleteShader(Qt);for(var vr=0;vr<Ze.length;vr++){var wr=Ze[vr];if(wr&&!Gt[wr]){var Lr=G.getUniformLocation(this.program,wr);Lr&&(Gt[wr]=Lr)}}this.fixedUniforms=D(c,Gt),this.binderUniforms=w?w.getUniforms(c,Gt):[]};Ap.prototype.draw=function(c,b,d,w,D,R,G,K,re,ce,we,be,Re,Ze,Ge,Oe){var Ke,vt=c.gl;if(!this.failedToCreate){c.program.set(this.program),c.setDepthMode(d),c.setStencilMode(w),c.setColorMode(D),c.setCullFace(R);for(var zt in this.fixedUniforms)this.fixedUniforms[zt].set(G[zt]);Ze&&Ze.setUniforms(c,this.binderUniforms,be,{zoom:Re});for(var Nt=(Ke={},Ke[vt.LINES]=2,Ke[vt.TRIANGLES]=3,Ke[vt.LINE_STRIP]=1,Ke)[b],Qt=0,rr=we.get();Qt<rr.length;Qt+=1){var Gt=rr[Qt],ar=Gt.vaos||(Gt.vaos={}),vr=ar[K]||(ar[K]=new Qc);vr.bind(c,this,re,Ze?Ze.getPaintVertexBuffers():[],ce,Gt.vertexOffset,Ge,Oe),vt.drawElements(b,Gt.primitiveLength*Nt,vt.UNSIGNED_SHORT,Gt.primitiveOffset*Nt*2)}}};function sf(g,c,b){var d=1/mo(b,1,c.transform.tileZoom),w=Math.pow(2,b.tileID.overscaledZ),D=b.tileSize*Math.pow(2,c.transform.tileZoom)/w,R=D*(b.tileID.canonical.x+b.tileID.wrap*w),G=D*b.tileID.canonical.y;return{u_image:0,u_texsize:b.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[R>>16,G>>16],u_pixel_coord_lower:[R&65535,G&65535]}}function bu(g,c,b,d){var w=b.imageManager.getPattern(g.from.toString()),D=b.imageManager.getPattern(g.to.toString()),R=b.imageManager.getPixelSize(),G=R.width,K=R.height,re=Math.pow(2,d.tileID.overscaledZ),ce=d.tileSize*Math.pow(2,b.transform.tileZoom)/re,we=ce*(d.tileID.canonical.x+d.tileID.wrap*re),be=ce*d.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:w.tl,u_pattern_br_a:w.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[G,K],u_mix:c.t,u_pattern_size_a:w.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/mo(d,1,b.transform.tileZoom),u_pixel_coord_upper:[we>>16,be>>16],u_pixel_coord_lower:[we&65535,be&65535]}}var Fv=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_lightpos:new a.Uniform3f(g,c.u_lightpos),u_lightintensity:new a.Uniform1f(g,c.u_lightintensity),u_lightcolor:new a.Uniform3f(g,c.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,c.u_vertical_gradient),u_opacity:new a.Uniform1f(g,c.u_opacity)}},bn=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_lightpos:new a.Uniform3f(g,c.u_lightpos),u_lightintensity:new a.Uniform1f(g,c.u_lightintensity),u_lightcolor:new a.Uniform3f(g,c.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,c.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,c.u_height_factor),u_image:new a.Uniform1i(g,c.u_image),u_texsize:new a.Uniform2f(g,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade),u_opacity:new a.Uniform1f(g,c.u_opacity)}},rc=function(g,c,b,d){var w=c.style.light,D=w.properties.get("position"),R=[D.x,D.y,D.z],G=a.create$1();w.properties.get("anchor")==="viewport"&&a.fromRotation(G,-c.transform.angle),a.transformMat3(R,R,G);var K=w.properties.get("color");return{u_matrix:g,u_lightpos:R,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+b,u_opacity:d}},Js=function(g,c,b,d,w,D,R){return a.extend(rc(g,c,b,d),sf(D,c,R),{u_height_factor:-Math.pow(2,w.overscaledZ)/R.tileSize/8})},kl=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},Cl=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_image:new a.Uniform1i(g,c.u_image),u_texsize:new a.Uniform2f(g,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade)}},El=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_world:new a.Uniform2f(g,c.u_world)}},Ks=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_world:new a.Uniform2f(g,c.u_world),u_image:new a.Uniform1i(g,c.u_image),u_texsize:new a.Uniform2f(g,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade)}},Ss=function(g){return{u_matrix:g}},ks=function(g,c,b,d){return a.extend(Ss(g),sf(b,c,d))},Ll=function(g,c){return{u_matrix:g,u_world:c}},Mp=function(g,c,b,d,w){return a.extend(ks(g,c,b,d),{u_world:w})},Km=function(g,c){return{u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,c.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,c.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},Qm=function(g,c,b,d){var w=g.transform,D,R;if(d.paint.get("circle-pitch-alignment")==="map"){var G=mo(b,1,w.zoom);D=!0,R=[G,G]}else D=!1,R=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(c.posMatrix,b,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+D,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:R}},$m=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,c.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,c.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,c.u_overscale_factor)}},Sp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,c.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,c.u_viewport_size)}},kp=function(g,c,b){var d=mo(b,1,c.zoom),w=Math.pow(2,c.zoom-b.tileID.overscaledZ),D=b.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[c.pixelsToGLUnits[0]/(d*w),c.pixelsToGLUnits[1]/(d*w)],u_overscale_factor:D}},qv=function(g,c,b){return{u_matrix:g,u_inv_matrix:c,u_camera_to_center_distance:b.cameraToCenterDistance,u_viewport_size:[b.width,b.height]}},Nv=function(g,c){return{u_color:new a.UniformColor(g,c.u_color),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_overlay:new a.Uniform1i(g,c.u_overlay),u_overlay_scale:new a.Uniform1f(g,c.u_overlay_scale)}},ac=function(g,c,b){return b===void 0&&(b=1),{u_matrix:g,u_color:c,u_overlay:0,u_overlay_scale:b}},$c=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},Cp=function(g){return{u_matrix:g}},Bv=function(g,c){return{u_extrude_scale:new a.Uniform1f(g,c.u_extrude_scale),u_intensity:new a.Uniform1f(g,c.u_intensity),u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},Ep=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_world:new a.Uniform2f(g,c.u_world),u_image:new a.Uniform1i(g,c.u_image),u_color_ramp:new a.Uniform1i(g,c.u_color_ramp),u_opacity:new a.Uniform1f(g,c.u_opacity)}},lf=function(g,c,b,d){return{u_matrix:g,u_extrude_scale:mo(c,1,b),u_intensity:d}},ey=function(g,c,b,d){var w=a.create();a.ortho(w,0,g.width,g.height,0,0,1);var D=g.context.gl;return{u_matrix:w,u_world:[D.drawingBufferWidth,D.drawingBufferHeight],u_image:b,u_color_ramp:d,u_opacity:c.paint.get("heatmap-opacity")}},Lp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_image:new a.Uniform1i(g,c.u_image),u_latrange:new a.Uniform2f(g,c.u_latrange),u_light:new a.Uniform2f(g,c.u_light),u_shadow:new a.UniformColor(g,c.u_shadow),u_highlight:new a.UniformColor(g,c.u_highlight),u_accent:new a.UniformColor(g,c.u_accent)}},Dp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_image:new a.Uniform1i(g,c.u_image),u_dimension:new a.Uniform2f(g,c.u_dimension),u_zoom:new a.Uniform1f(g,c.u_zoom),u_unpack:new a.Uniform4f(g,c.u_unpack)}},Pp=function(g,c,b){var d=b.paint.get("hillshade-shadow-color"),w=b.paint.get("hillshade-highlight-color"),D=b.paint.get("hillshade-accent-color"),R=b.paint.get("hillshade-illumination-direction")*(Math.PI/180);b.paint.get("hillshade-illumination-anchor")==="viewport"&&(R-=g.transform.angle);var G=!g.options.moving;return{u_matrix:g.transform.calculatePosMatrix(c.tileID.toUnwrapped(),G),u_image:0,u_latrange:Uv(g,c.tileID),u_light:[b.paint.get("hillshade-exaggeration"),R],u_shadow:d,u_highlight:w,u_accent:D}},Ov=function(g,c){var b=c.stride,d=a.create();return a.ortho(d,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(d,d,[0,-a.EXTENT,0]),{u_matrix:d,u_image:1,u_dimension:[b,b],u_zoom:g.overscaledZ,u_unpack:c.getUnpackVector()}};function Uv(g,c){var b=Math.pow(2,c.canonical.z),d=c.canonical.y;return[new a.MercatorCoordinate(0,d/b).toLngLat().lat,new a.MercatorCoordinate(0,(d+1)/b).toLngLat().lat]}var wu=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels)}},Dl=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels),u_image:new a.Uniform1i(g,c.u_image),u_image_height:new a.Uniform1f(g,c.u_image_height)}},ic=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_texsize:new a.Uniform2f(g,c.u_texsize),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_image:new a.Uniform1i(g,c.u_image),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade)}},Vv=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,c.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,c.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,c.u_sdfgamma),u_image:new a.Uniform1i(g,c.u_image),u_tex_y_a:new a.Uniform1f(g,c.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,c.u_tex_y_b),u_mix:new a.Uniform1f(g,c.u_mix)}},eh=function(g,c,b){var d=g.transform;return{u_matrix:Tu(g,c,b),u_ratio:1/mo(c,1,d.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},th=function(g,c,b,d){return a.extend(eh(g,c,b),{u_image:0,u_image_height:d})},rh=function(g,c,b,d){var w=g.transform,D=ah(c,w);return{u_matrix:Tu(g,c,b),u_texsize:c.imageAtlasTexture.size,u_ratio:1/mo(c,1,w.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[D,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Pl=function(g,c,b,d,w){var D=g.transform,R=g.lineAtlas,G=ah(c,D),K=b.layout.get("line-cap")==="round",re=R.getDash(d.from,K),ce=R.getDash(d.to,K),we=re.width*w.fromScale,be=ce.width*w.toScale;return a.extend(eh(g,c,b),{u_patternscale_a:[G/we,-re.height/2],u_patternscale_b:[G/be,-ce.height/2],u_sdfgamma:R.width/(Math.min(we,be)*256*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:re.y,u_tex_y_b:ce.y,u_mix:w.t})};function ah(g,c){return 1/mo(g,1,c.tileZoom)}function Tu(g,c,b){return g.translatePosMatrix(c.tileID.posMatrix,c,b.paint.get("line-translate"),b.paint.get("line-translate-anchor"))}var uf=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_tl_parent:new a.Uniform2f(g,c.u_tl_parent),u_scale_parent:new a.Uniform1f(g,c.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,c.u_buffer_scale),u_fade_t:new a.Uniform1f(g,c.u_fade_t),u_opacity:new a.Uniform1f(g,c.u_opacity),u_image0:new a.Uniform1i(g,c.u_image0),u_image1:new a.Uniform1i(g,c.u_image1),u_brightness_low:new a.Uniform1f(g,c.u_brightness_low),u_brightness_high:new a.Uniform1f(g,c.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,c.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,c.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,c.u_spin_weights)}},zp=function(g,c,b,d,w){return{u_matrix:g,u_tl_parent:c,u_scale_parent:b,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:nc(w.paint.get("raster-saturation")),u_contrast_factor:di(w.paint.get("raster-contrast")),u_spin_weights:ih(w.paint.get("raster-hue-rotate"))}};function ih(g){g*=Math.PI/180;var c=Math.sin(g),b=Math.cos(g);return[(2*b+1)/3,(-Math.sqrt(3)*c-b+1)/3,(Math.sqrt(3)*c-b+1)/3]}function di(g){return g>0?1/(1-g):1+g}function nc(g){return g>0?1-1/(1.001-g):-g}var Ip=function(g,c){return{u_is_size_zoom_constant:new a.Uniform1i(g,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,c.u_size_t),u_size:new a.Uniform1f(g,c.u_size),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,c.u_pitch),u_rotate_symbol:new a.Uniform1i(g,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,c.u_fade_change),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,c.u_coord_matrix),u_is_text:new a.Uniform1i(g,c.u_is_text),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_texsize:new a.Uniform2f(g,c.u_texsize),u_texture:new a.Uniform1i(g,c.u_texture)}},Rp=function(g,c){return{u_is_size_zoom_constant:new a.Uniform1i(g,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,c.u_size_t),u_size:new a.Uniform1f(g,c.u_size),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,c.u_pitch),u_rotate_symbol:new a.Uniform1i(g,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,c.u_fade_change),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,c.u_coord_matrix),u_is_text:new a.Uniform1i(g,c.u_is_text),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_texsize:new a.Uniform2f(g,c.u_texsize),u_texture:new a.Uniform1i(g,c.u_texture),u_gamma_scale:new a.Uniform1f(g,c.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,c.u_is_halo)}},zl=function(g,c){return{u_is_size_zoom_constant:new a.Uniform1i(g,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,c.u_size_t),u_size:new a.Uniform1f(g,c.u_size),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,c.u_pitch),u_rotate_symbol:new a.Uniform1i(g,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,c.u_fade_change),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,c.u_coord_matrix),u_is_text:new a.Uniform1i(g,c.u_is_text),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_texsize:new a.Uniform2f(g,c.u_texsize),u_texsize_icon:new a.Uniform2f(g,c.u_texsize_icon),u_texture:new a.Uniform1i(g,c.u_texture),u_texture_icon:new a.Uniform1i(g,c.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,c.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,c.u_is_halo)}},Fp=function(g,c,b,d,w,D,R,G,K,re){var ce=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+b,u_aspect_ratio:ce.width/ce.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:D,u_label_plane_matrix:R,u_coord_matrix:G,u_is_text:+K,u_pitch_with_map:+d,u_texsize:re,u_texture:0}},qp=function(g,c,b,d,w,D,R,G,K,re,ce){var we=w.transform;return a.extend(Fp(g,c,b,d,w,D,R,G,K,re),{u_gamma_scale:d?Math.cos(we._pitch)*we.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+ce})},Hv=function(g,c,b,d,w,D,R,G,K,re){return a.extend(qp(g,c,b,d,w,D,R,G,!0,K,!0),{u_texsize_icon:re,u_texture_icon:1})},Np=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_opacity:new a.Uniform1f(g,c.u_opacity),u_color:new a.UniformColor(g,c.u_color)}},ty=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_opacity:new a.Uniform1f(g,c.u_opacity),u_image:new a.Uniform1i(g,c.u_image),u_pattern_tl_a:new a.Uniform2f(g,c.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,c.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,c.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,c.u_pattern_br_b),u_texsize:new a.Uniform2f(g,c.u_texsize),u_mix:new a.Uniform1f(g,c.u_mix),u_pattern_size_a:new a.Uniform2f(g,c.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,c.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,c.u_scale_a),u_scale_b:new a.Uniform1f(g,c.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,c.u_tile_units_to_pixels)}},Il=function(g,c,b){return{u_matrix:g,u_opacity:c,u_color:b}},Au=function(g,c,b,d,w,D){return a.extend(bu(d,D,b,w),{u_matrix:g,u_opacity:c})},oc={fillExtrusion:Fv,fillExtrusionPattern:bn,fill:kl,fillPattern:Cl,fillOutline:El,fillOutlinePattern:Ks,circle:Km,collisionBox:$m,collisionCircle:Sp,debug:Nv,clippingMask:$c,heatmap:Bv,heatmapTexture:Ep,hillshade:Lp,hillshadePrepare:Dp,line:wu,lineGradient:Dl,linePattern:ic,lineSDF:Vv,raster:uf,symbolIcon:Ip,symbolSDF:Rp,symbolTextAndIcon:zl,background:Np,backgroundPattern:ty},Cs;function Es(g,c,b,d,w,D,R){for(var G=g.context,K=G.gl,re=g.useProgram("collisionBox"),ce=[],we=0,be=0,Re=0;Re<d.length;Re++){var Ze=d[Re],Ge=c.getTile(Ze),Oe=Ge.getBucket(b);if(Oe){var Ke=Ze.posMatrix;(w[0]!==0||w[1]!==0)&&(Ke=g.translatePosMatrix(Ze.posMatrix,Ge,w,D));var vt=R?Oe.textCollisionBox:Oe.iconCollisionBox,zt=Oe.collisionCircleArray;if(zt.length>0){var Nt=a.create(),Qt=Ke;a.mul(Nt,Oe.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(Nt,Nt,Oe.placementViewportMatrix),ce.push({circleArray:zt,circleOffset:be,transform:Qt,invTransform:Nt}),we+=zt.length/4,be=we}vt&&re.draw(G,K.LINES,ir.disabled,la.disabled,g.colorModeForRenderPass(),Le.disabled,kp(Ke,g.transform,Ge),b.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,null,g.transform.zoom,null,null,vt.collisionVertexBuffer)}}if(!(!R||!ce.length)){var rr=g.useProgram("collisionCircle"),Gt=new a.StructArrayLayout2f1f2i16;Gt.resize(we*4),Gt._trim();for(var ar=0,vr=0,wr=ce;vr<wr.length;vr+=1)for(var Lr=wr[vr],kr=0;kr<Lr.circleArray.length/4;kr++){var Wr=kr*4,Ra=Lr.circleArray[Wr+0],_a=Lr.circleArray[Wr+1],Nr=Lr.circleArray[Wr+2],Ma=Lr.circleArray[Wr+3];Gt.emplace(ar++,Ra,_a,Nr,Ma,0),Gt.emplace(ar++,Ra,_a,Nr,Ma,1),Gt.emplace(ar++,Ra,_a,Nr,Ma,2),Gt.emplace(ar++,Ra,_a,Nr,Ma,3)}(!Cs||Cs.length<we*2)&&(Cs=jo(we));for(var aa=G.createIndexBuffer(Cs,!0),Za=G.createVertexBuffer(Gt,a.collisionCircleLayout.members,!0),Ua=0,Mi=ce;Ua<Mi.length;Ua+=1){var La=Mi[Ua],mi=qv(La.transform,La.invTransform,g.transform);rr.draw(G,K.TRIANGLES,ir.disabled,la.disabled,g.colorModeForRenderPass(),Le.disabled,mi,b.id,Za,aa,a.SegmentVector.simpleSegment(0,La.circleOffset*2,La.circleArray.length,La.circleArray.length/2),null,g.transform.zoom,null,null,null)}Za.destroy(),aa.destroy()}}function jo(g){var c=g*2,b=new a.StructArrayLayout3ui6;b.resize(c),b._trim();for(var d=0;d<c;d++){var w=d*6;b.uint16[w+0]=d*4+0,b.uint16[w+1]=d*4+1,b.uint16[w+2]=d*4+2,b.uint16[w+3]=d*4+2,b.uint16[w+4]=d*4+3,b.uint16[w+5]=d*4+0}return b}var ff=a.identity(new Float32Array(16));function ry(g,c,b,d,w){if(g.renderPass==="translucent"){var D=la.disabled,R=g.colorModeForRenderPass(),G=b.layout.get("text-variable-anchor");G&&Gv(d,g,b,c,b.layout.get("text-rotation-alignment"),b.layout.get("text-pitch-alignment"),w),b.paint.get("icon-opacity").constantOr(1)!==0&&Zv(g,c,b,d,!1,b.paint.get("icon-translate"),b.paint.get("icon-translate-anchor"),b.layout.get("icon-rotation-alignment"),b.layout.get("icon-pitch-alignment"),b.layout.get("icon-keep-upright"),D,R),b.paint.get("text-opacity").constantOr(1)!==0&&Zv(g,c,b,d,!0,b.paint.get("text-translate"),b.paint.get("text-translate-anchor"),b.layout.get("text-rotation-alignment"),b.layout.get("text-pitch-alignment"),b.layout.get("text-keep-upright"),D,R),c.map.showCollisionBoxes&&(Es(g,c,b,d,b.paint.get("text-translate"),b.paint.get("text-translate-anchor"),!0),Es(g,c,b,d,b.paint.get("icon-translate"),b.paint.get("icon-translate-anchor"),!1))}}function cf(g,c,b,d,w,D){var R=a.getAnchorAlignment(g),G=R.horizontalAlign,K=R.verticalAlign,re=-(G-.5)*c,ce=-(K-.5)*b,we=a.evaluateVariableOffset(g,d);return new a.Point((re/w+we[0])*D,(ce/w+we[1])*D)}function Gv(g,c,b,d,w,D,R){for(var G=c.transform,K=w==="map",re=D==="map",ce=0,we=g;ce<we.length;ce+=1){var be=we[ce],Re=d.getTile(be),Ze=Re.getBucket(b);if(!(!Ze||!Ze.text||!Ze.text.segments.get().length)){var Ge=Ze.textSizeData,Oe=a.evaluateSizeForZoom(Ge,G.zoom),Ke=mo(Re,1,c.transform.zoom),vt=Kn(be.posMatrix,re,K,c.transform,Ke),zt=b.layout.get("icon-text-fit")!=="none"&&Ze.hasIconData();if(Oe){var Nt=Math.pow(2,G.zoom-Re.tileID.overscaledZ);ay(Ze,K,re,R,a.symbolSize,G,vt,be.posMatrix,Nt,Oe,zt)}}}}function ay(g,c,b,d,w,D,R,G,K,re,ce){var we=g.text.placedSymbolArray,be=g.text.dynamicLayoutVertexArray,Re=g.icon.dynamicLayoutVertexArray,Ze={};be.clear();for(var Ge=0;Ge<we.length;Ge++){var Oe=we.get(Ge),Ke=g.allowVerticalPlacement&&!Oe.placedOrientation,vt=!Oe.hidden&&Oe.crossTileID&&!Ke?d[Oe.crossTileID]:null;if(!vt)$u(Oe.numGlyphs,be);else{var zt=new a.Point(Oe.anchorX,Oe.anchorY),Nt=Ui(zt,b?G:R),Qt=pl(D.cameraToCenterDistance,Nt.signedDistanceFromCamera),rr=w.evaluateSizeForFeature(g.textSizeData,re,Oe)*Qt/a.ONE_EM;b&&(rr*=g.tilePixelRatio/K);for(var Gt=vt.width,ar=vt.height,vr=vt.anchor,wr=vt.textOffset,Lr=vt.textBoxScale,kr=cf(vr,Gt,ar,wr,Lr,rr),Wr=b?Ui(zt.add(kr),R).point:Nt.point.add(c?kr.rotate(-D.angle):kr),Ra=g.allowVerticalPlacement&&Oe.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,_a=0;_a<Oe.numGlyphs;_a++)a.addDynamicAttributes(be,Wr,Ra);ce&&Oe.associatedIconIndex>=0&&(Ze[Oe.associatedIconIndex]={shiftedAnchor:Wr,angle:Ra})}}if(ce){Re.clear();for(var Nr=g.icon.placedSymbolArray,Ma=0;Ma<Nr.length;Ma++){var aa=Nr.get(Ma);if(aa.hidden)$u(aa.numGlyphs,Re);else{var Za=Ze[Ma];if(!Za)$u(aa.numGlyphs,Re);else for(var Ua=0;Ua<aa.numGlyphs;Ua++)a.addDynamicAttributes(Re,Za.shiftedAnchor,Za.angle)}}g.icon.dynamicLayoutVertexBuffer.updateData(Re)}g.text.dynamicLayoutVertexBuffer.updateData(be)}function ds(g,c,b){return b.iconsInText&&c?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Zv(g,c,b,d,w,D,R,G,K,re,ce,we){for(var be=g.context,Re=be.gl,Ze=g.transform,Ge=G==="map",Oe=K==="map",Ke=Ge&&b.layout.get("symbol-placement")!=="point",vt=Ge&&!Oe&&!Ke,zt=b.layout.get("symbol-sort-key").constantOr(1)!==void 0,Nt=!1,Qt=g.depthModeForSublayer(0,ir.ReadOnly),rr=b.layout.get("text-variable-anchor"),Gt=[],ar=0,vr=d;ar<vr.length;ar+=1){var wr=vr[ar],Lr=c.getTile(wr),kr=Lr.getBucket(b);if(kr){var Wr=w?kr.text:kr.icon;if(!(!Wr||!Wr.segments.get().length)){var Ra=Wr.programConfigurations.get(b.id),_a=w||kr.sdfIcons,Nr=w?kr.textSizeData:kr.iconSizeData,Ma=Oe||Ze.pitch!==0,aa=g.useProgram(ds(_a,w,kr),Ra),Za=a.evaluateSizeForZoom(Nr,Ze.zoom),Ua=void 0,Mi=[0,0],La=void 0,mi=void 0,ia=null,Ba=void 0;if(w){if(La=Lr.glyphAtlasTexture,mi=Re.LINEAR,Ua=Lr.glyphAtlasTexture.size,kr.iconsInText){Mi=Lr.imageAtlasTexture.size,ia=Lr.imageAtlasTexture;var tn=Nr.kind==="composite"||Nr.kind==="camera";Ba=Ma||g.options.rotating||g.options.zooming||tn?Re.LINEAR:Re.NEAREST}}else{var Nn=b.layout.get("icon-size").constantOr(0)!==1||kr.iconsNeedLinear;La=Lr.imageAtlasTexture,mi=_a||g.options.rotating||g.options.zooming||Nn||Ma?Re.LINEAR:Re.NEAREST,Ua=Lr.imageAtlasTexture.size}var Ps=mo(Lr,1,g.transform.zoom),zs=Kn(wr.posMatrix,Oe,Ge,g.transform,Ps),$s=du(wr.posMatrix,Oe,Ge,g.transform,Ps),Ol=rr&&kr.hasTextData(),hc=b.layout.get("icon-text-fit")!=="none"&&Ol&&kr.hasIconData();Ke&&Gc(kr,wr.posMatrix,g,w,zs,$s,Oe,re);var Ul=g.translatePosMatrix(wr.posMatrix,Lr,D,R),Do=Ke||w&&rr||hc?ff:zs,Vl=g.translatePosMatrix($s,Lr,D,R,!0),Qo=_a&&b.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Po=void 0;_a?kr.iconsInText?Po=Hv(Nr.kind,Za,vt,Oe,g,Ul,Do,Vl,Ua,Mi):Po=qp(Nr.kind,Za,vt,Oe,g,Ul,Do,Vl,w,Ua,!0):Po=Fp(Nr.kind,Za,vt,Oe,g,Ul,Do,Vl,w,Ua);var el={program:aa,buffers:Wr,uniformValues:Po,atlasTexture:La,atlasTextureIcon:ia,atlasInterpolation:mi,atlasInterpolationIcon:Ba,isSDF:_a,hasHalo:Qo};if(zt&&kr.canOverlap){Nt=!0;for(var Eu=Wr.segments.get(),tl=0,Wp=Eu;tl<Wp.length;tl+=1){var gh=Wp[tl];Gt.push({segments:new a.SegmentVector([gh]),sortKey:gh.sortKey,state:el})}}else Gt.push({segments:Wr.segments,sortKey:0,state:el})}}}Nt&&Gt.sort(function(jp,Jp){return jp.sortKey-Jp.sortKey});for(var Gn=0,Xp=Gt;Gn<Xp.length;Gn+=1){var td=Xp[Gn],xo=td.state;if(be.activeTexture.set(Re.TEXTURE0),xo.atlasTexture.bind(xo.atlasInterpolation,Re.CLAMP_TO_EDGE),xo.atlasTextureIcon&&(be.activeTexture.set(Re.TEXTURE1),xo.atlasTextureIcon&&xo.atlasTextureIcon.bind(xo.atlasInterpolationIcon,Re.CLAMP_TO_EDGE)),xo.isSDF){var _h=xo.uniformValues;xo.hasHalo&&(_h.u_is_halo=1,hf(xo.buffers,td.segments,b,g,xo.program,Qt,ce,we,_h)),_h.u_is_halo=0}hf(xo.buffers,td.segments,b,g,xo.program,Qt,ce,we,xo.uniformValues)}}function hf(g,c,b,d,w,D,R,G,K){var re=d.context,ce=re.gl;w.draw(re,ce.TRIANGLES,D,R,G,Le.disabled,K,b.id,g.layoutVertexBuffer,g.indexBuffer,c,b.paint,d.transform.zoom,g.programConfigurations.get(b.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function nh(g,c,b,d){if(g.renderPass==="translucent"){var w=b.paint.get("circle-opacity"),D=b.paint.get("circle-stroke-width"),R=b.paint.get("circle-stroke-opacity"),G=b.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(w.constantOr(1)===0&&(D.constantOr(1)===0||R.constantOr(1)===0))){for(var K=g.context,re=K.gl,ce=g.depthModeForSublayer(0,ir.ReadOnly),we=la.disabled,be=g.colorModeForRenderPass(),Re=[],Ze=0;Ze<d.length;Ze++){var Ge=d[Ze],Oe=c.getTile(Ge),Ke=Oe.getBucket(b);if(Ke){var vt=Ke.programConfigurations.get(b.id),zt=g.useProgram("circle",vt),Nt=Ke.layoutVertexBuffer,Qt=Ke.indexBuffer,rr=Qm(g,Ge,Oe,b),Gt={programConfiguration:vt,program:zt,layoutVertexBuffer:Nt,indexBuffer:Qt,uniformValues:rr};if(G)for(var ar=Ke.segments.get(),vr=0,wr=ar;vr<wr.length;vr+=1){var Lr=wr[vr];Re.push({segments:new a.SegmentVector([Lr]),sortKey:Lr.sortKey,state:Gt})}else Re.push({segments:Ke.segments,sortKey:0,state:Gt})}}G&&Re.sort(function(La,mi){return La.sortKey-mi.sortKey});for(var kr=0,Wr=Re;kr<Wr.length;kr+=1){var Ra=Wr[kr],_a=Ra.state,Nr=_a.programConfiguration,Ma=_a.program,aa=_a.layoutVertexBuffer,Za=_a.indexBuffer,Ua=_a.uniformValues,Mi=Ra.segments;Ma.draw(K,re.TRIANGLES,ce,we,be,Le.disabled,Ua,b.id,aa,Za,Mi,b.paint,g.transform.zoom,Nr)}}}}function Mu(g,c,b,d){if(b.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){var w=g.context,D=w.gl,R=la.disabled,G=new te([D.ONE,D.ONE],a.Color.transparent,[!0,!0,!0,!0]);iy(w,g,b),w.clear({color:a.Color.transparent});for(var K=0;K<d.length;K++){var re=d[K];if(!c.hasRenderableParent(re)){var ce=c.getTile(re),we=ce.getBucket(b);if(we){var be=we.programConfigurations.get(b.id),Re=g.useProgram("heatmap",be),Ze=g.transform,Ge=Ze.zoom;Re.draw(w,D.TRIANGLES,ir.disabled,R,G,Le.disabled,lf(re.posMatrix,ce,Ge,b.paint.get("heatmap-intensity")),b.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,b.paint,g.transform.zoom,be)}}}w.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),oh(g,b))}function iy(g,c,b){var d=g.gl;g.activeTexture.set(d.TEXTURE1),g.viewport.set([0,0,c.width/4,c.height/4]);var w=b.heatmapFbo;if(w)d.bindTexture(d.TEXTURE_2D,w.colorAttachment.get()),g.bindFramebuffer.set(w.framebuffer);else{var D=d.createTexture();d.bindTexture(d.TEXTURE_2D,D),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),w=b.heatmapFbo=g.createFramebuffer(c.width/4,c.height/4,!1),ny(g,c,D,w)}}function ny(g,c,b,d){var w=g.gl,D=g.extRenderToTextureHalfFloat?g.extTextureHalfFloat.HALF_FLOAT_OES:w.UNSIGNED_BYTE;w.texImage2D(w.TEXTURE_2D,0,w.RGBA,c.width/4,c.height/4,0,w.RGBA,D,null),d.colorAttachment.set(b)}function oh(g,c){var b=g.context,d=b.gl,w=c.heatmapFbo;if(w){b.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,w.colorAttachment.get()),b.activeTexture.set(d.TEXTURE1);var D=c.colorRampTexture;D||(D=c.colorRampTexture=new a.Texture(b,c.colorRamp,d.RGBA)),D.bind(d.LINEAR,d.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(b,d.TRIANGLES,ir.disabled,la.disabled,g.colorModeForRenderPass(),Le.disabled,ey(g,c,0,1),c.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,c.paint,g.transform.zoom)}}function go(g,c,b,d){if(g.renderPass==="translucent"){var w=b.paint.get("line-opacity"),D=b.paint.get("line-width");if(!(w.constantOr(1)===0||D.constantOr(1)===0))for(var R=g.depthModeForSublayer(0,ir.ReadOnly),G=g.colorModeForRenderPass(),K=b.paint.get("line-dasharray"),re=b.paint.get("line-pattern"),ce=re.constantOr(1),we=b.paint.get("line-gradient"),be=b.getCrossfadeParameters(),Re=ce?"linePattern":K?"lineSDF":we?"lineGradient":"line",Ze=g.context,Ge=Ze.gl,Oe=!0,Ke=0,vt=d;Ke<vt.length;Ke+=1){var zt=vt[Ke],Nt=c.getTile(zt);if(!(ce&&!Nt.patternsLoaded())){var Qt=Nt.getBucket(b);if(Qt){var rr=Qt.programConfigurations.get(b.id),Gt=g.context.program.get(),ar=g.useProgram(Re,rr),vr=Oe||ar.program!==Gt,wr=re.constantOr(null);if(wr&&Nt.imageAtlas){var Lr=Nt.imageAtlas,kr=Lr.patternPositions[wr.to.toString()],Wr=Lr.patternPositions[wr.from.toString()];kr&&Wr&&rr.setConstantPatternPositions(kr,Wr)}var Ra=ce?rh(g,Nt,b,be):K?Pl(g,Nt,b,K,be):we?th(g,Nt,b,Qt.lineClipsArray.length):eh(g,Nt,b);if(ce)Ze.activeTexture.set(Ge.TEXTURE0),Nt.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),rr.updatePaintBuffers(be);else if(K&&(vr||g.lineAtlas.dirty))Ze.activeTexture.set(Ge.TEXTURE0),g.lineAtlas.bind(Ze);else if(we){var _a=Qt.gradients[b.id],Nr=_a.texture;if(b.gradientVersion!==_a.version){var Ma=256;if(b.stepInterpolant){var aa=c.getSource().maxzoom,Za=zt.canonical.z===aa?Math.ceil(1<<g.transform.maxZoom-zt.canonical.z):1,Ua=Qt.maxLineLength/a.EXTENT,Mi=1024,La=Ua*Mi*Za;Ma=a.clamp(a.nextPowerOfTwo(La),256,Ze.maxTextureSize)}_a.gradient=a.renderColorRamp({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:Ma,image:_a.gradient||void 0,clips:Qt.lineClipsArray}),_a.texture?_a.texture.update(_a.gradient):_a.texture=new a.Texture(Ze,_a.gradient,Ge.RGBA),_a.version=b.gradientVersion,Nr=_a.texture}Ze.activeTexture.set(Ge.TEXTURE0),Nr.bind(b.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}ar.draw(Ze,Ge.TRIANGLES,R,g.stencilModeForClipping(zt),G,Le.disabled,Ra,b.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,b.paint,g.transform.zoom,rr,Qt.layoutVertexBuffer2),Oe=!1}}}}}function Bp(g,c,b,d){var w=b.paint.get("fill-color"),D=b.paint.get("fill-opacity");if(D.constantOr(1)!==0){var R=g.colorModeForRenderPass(),G=b.paint.get("fill-pattern"),K=g.opaquePassEnabledForLayer()&&!G.constantOr(1)&&w.constantOr(a.Color.transparent).a===1&&D.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===K){var re=g.depthModeForSublayer(1,g.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly);vf(g,c,b,d,re,R,!1)}if(g.renderPass==="translucent"&&b.paint.get("fill-antialias")){var ce=g.depthModeForSublayer(b.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly);vf(g,c,b,d,ce,R,!0)}}}function vf(g,c,b,d,w,D,R){var G=g.context.gl,K=b.paint.get("fill-pattern"),re=K&&K.constantOr(1),ce=b.getCrossfadeParameters(),we,be,Re,Ze,Ge;R?(be=re&&!b.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=G.LINES):(be=re?"fillPattern":"fill",we=G.TRIANGLES);for(var Oe=0,Ke=d;Oe<Ke.length;Oe+=1){var vt=Ke[Oe],zt=c.getTile(vt);if(!(re&&!zt.patternsLoaded())){var Nt=zt.getBucket(b);if(Nt){var Qt=Nt.programConfigurations.get(b.id),rr=g.useProgram(be,Qt);re&&(g.context.activeTexture.set(G.TEXTURE0),zt.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Qt.updatePaintBuffers(ce));var Gt=K.constantOr(null);if(Gt&&zt.imageAtlas){var ar=zt.imageAtlas,vr=ar.patternPositions[Gt.to.toString()],wr=ar.patternPositions[Gt.from.toString()];vr&&wr&&Qt.setConstantPatternPositions(vr,wr)}var Lr=g.translatePosMatrix(vt.posMatrix,zt,b.paint.get("fill-translate"),b.paint.get("fill-translate-anchor"));if(!R)Ze=Nt.indexBuffer,Ge=Nt.segments,Re=re?ks(Lr,g,ce,zt):Ss(Lr);else{Ze=Nt.indexBuffer2,Ge=Nt.segments2;var kr=[G.drawingBufferWidth,G.drawingBufferHeight];Re=be==="fillOutlinePattern"&&re?Mp(Lr,g,ce,zt,kr):Ll(Lr,kr)}rr.draw(g.context,we,w,g.stencilModeForClipping(vt),D,Le.disabled,Re,b.id,Nt.layoutVertexBuffer,Ze,Ge,b.paint,g.transform.zoom,Qt)}}}}function Rl(g,c,b,d){var w=b.paint.get("fill-extrusion-opacity");if(w!==0&&g.renderPass==="translucent"){var D=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D);if(w===1&&!b.paint.get("fill-extrusion-pattern").constantOr(1)){var R=g.colorModeForRenderPass();df(g,c,b,d,D,la.disabled,R)}else df(g,c,b,d,D,la.disabled,te.disabled),df(g,c,b,d,D,g.stencilModeFor3D(),g.colorModeForRenderPass())}}function df(g,c,b,d,w,D,R){for(var G=g.context,K=G.gl,re=b.paint.get("fill-extrusion-pattern"),ce=re.constantOr(1),we=b.getCrossfadeParameters(),be=b.paint.get("fill-extrusion-opacity"),Re=0,Ze=d;Re<Ze.length;Re+=1){var Ge=Ze[Re],Oe=c.getTile(Ge),Ke=Oe.getBucket(b);if(Ke){var vt=Ke.programConfigurations.get(b.id),zt=g.useProgram(ce?"fillExtrusionPattern":"fillExtrusion",vt);ce&&(g.context.activeTexture.set(K.TEXTURE0),Oe.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),vt.updatePaintBuffers(we));var Nt=re.constantOr(null);if(Nt&&Oe.imageAtlas){var Qt=Oe.imageAtlas,rr=Qt.patternPositions[Nt.to.toString()],Gt=Qt.patternPositions[Nt.from.toString()];rr&&Gt&&vt.setConstantPatternPositions(rr,Gt)}var ar=g.translatePosMatrix(Ge.posMatrix,Oe,b.paint.get("fill-extrusion-translate"),b.paint.get("fill-extrusion-translate-anchor")),vr=b.paint.get("fill-extrusion-vertical-gradient"),wr=ce?Js(ar,g,vr,be,Ge,we,Oe):rc(ar,g,vr,be);zt.draw(G,G.gl.TRIANGLES,w,D,R,Le.backCCW,wr,b.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,b.paint,g.transform.zoom,vt)}}}function pf(g,c,b,d){if(!(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")){for(var w=g.context,D=g.depthModeForSublayer(0,ir.ReadOnly),R=g.colorModeForRenderPass(),G=g.renderPass==="translucent"?g.stencilConfigForOverlap(d):[{},d],K=G[0],re=G[1],ce=0,we=re;ce<we.length;ce+=1){var be=we[ce],Re=c.getTile(be);Re.needsHillshadePrepare&&g.renderPass==="offscreen"?oy(g,Re,b,D,la.disabled,R):g.renderPass==="translucent"&&Yv(g,Re,b,D,K[be.overscaledZ],R)}w.viewport.set([0,0,g.width,g.height])}}function Yv(g,c,b,d,w,D){var R=g.context,G=R.gl,K=c.fbo;if(K){var re=g.useProgram("hillshade");R.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,K.colorAttachment.get());var ce=Pp(g,c,b);re.draw(R,G.TRIANGLES,d,w,D,Le.disabled,ce,b.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function oy(g,c,b,d,w,D){var R=g.context,G=R.gl,K=c.dem;if(K&&K.data){var re=K.dim,ce=K.stride,we=K.getPixels();if(R.activeTexture.set(G.TEXTURE1),R.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||g.getTileTexture(ce),c.demTexture){var be=c.demTexture;be.update(we,{premultiply:!1}),be.bind(G.NEAREST,G.CLAMP_TO_EDGE)}else c.demTexture=new a.Texture(R,we,G.RGBA,{premultiply:!1}),c.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);R.activeTexture.set(G.TEXTURE0);var Re=c.fbo;if(!Re){var Ze=new a.Texture(R,{width:re,height:re,data:null},G.RGBA);Ze.bind(G.LINEAR,G.CLAMP_TO_EDGE),Re=c.fbo=R.createFramebuffer(re,re,!0),Re.colorAttachment.set(Ze.texture)}R.bindFramebuffer.set(Re.framebuffer),R.viewport.set([0,0,re,re]),g.useProgram("hillshadePrepare").draw(R,G.TRIANGLES,d,w,D,Le.disabled,Ov(c.tileID,K),b.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function Op(g,c,b,d){if(g.renderPass==="translucent"&&b.paint.get("raster-opacity")!==0&&d.length)for(var w=g.context,D=w.gl,R=c.getSource(),G=g.useProgram("raster"),K=g.colorModeForRenderPass(),re=R instanceof it?[{},d]:g.stencilConfigForOverlap(d),ce=re[0],we=re[1],be=we[we.length-1].overscaledZ,Re=!g.options.moving,Ze=0,Ge=we;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze],Ke=g.depthModeForSublayer(Oe.overscaledZ-be,b.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,D.LESS),vt=c.getTile(Oe),zt=g.transform.calculatePosMatrix(Oe.toUnwrapped(),Re);vt.registerFadeDuration(b.paint.get("raster-fade-duration"));var Nt=c.findLoadedParent(Oe,0),Qt=Wv(vt,Nt,c,b,g.transform),rr=void 0,Gt=void 0,ar=b.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;w.activeTexture.set(D.TEXTURE0),vt.texture.bind(ar,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(D.TEXTURE1),Nt?(Nt.texture.bind(ar,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),rr=Math.pow(2,Nt.tileID.overscaledZ-vt.tileID.overscaledZ),Gt=[vt.tileID.canonical.x*rr%1,vt.tileID.canonical.y*rr%1]):vt.texture.bind(ar,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST);var vr=zp(zt,Gt||[0,0],rr||1,Qt,b);R instanceof it?G.draw(w,D.TRIANGLES,Ke,la.disabled,K,Le.disabled,vr,b.id,R.boundsBuffer,g.quadTriangleIndexBuffer,R.boundsSegments):G.draw(w,D.TRIANGLES,Ke,ce[Oe.overscaledZ],K,Le.disabled,vr,b.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function Wv(g,c,b,d,w){var D=d.paint.get("raster-fade-duration");if(D>0){var R=a.browser.now(),G=(R-g.timeAdded)/D,K=c?(R-c.timeAdded)/D:-1,re=b.getSource(),ce=w.coveringZoomLevel({tileSize:re.tileSize,roundZoom:re.roundZoom}),we=!c||Math.abs(c.tileID.overscaledZ-ce)>Math.abs(g.tileID.overscaledZ-ce),be=we&&g.refreshedUponExpiration?1:a.clamp(we?G:1-K,0,1);return g.refreshedUponExpiration&&G>=1&&(g.refreshedUponExpiration=!1),c?{opacity:1,mix:1-be}:{opacity:be,mix:0}}else return{opacity:1,mix:0}}function sc(g,c,b){var d=b.paint.get("background-color"),w=b.paint.get("background-opacity");if(w!==0){var D=g.context,R=D.gl,G=g.transform,K=G.tileSize,re=b.paint.get("background-pattern");if(!g.isPatternMissing(re)){var ce=!re&&d.a===1&&w===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass===ce){var we=la.disabled,be=g.depthModeForSublayer(0,ce==="opaque"?ir.ReadWrite:ir.ReadOnly),Re=g.colorModeForRenderPass(),Ze=g.useProgram(re?"backgroundPattern":"background"),Ge=G.coveringTiles({tileSize:K});re&&(D.activeTexture.set(R.TEXTURE0),g.imageManager.bind(g.context));for(var Oe=b.getCrossfadeParameters(),Ke=0,vt=Ge;Ke<vt.length;Ke+=1){var zt=vt[Ke],Nt=g.transform.calculatePosMatrix(zt.toUnwrapped()),Qt=re?Au(Nt,w,g,re,{tileID:zt,tileSize:K},Oe):Il(Nt,w,d);Ze.draw(D,R.TRIANGLES,be,we,Re,Le.disabled,Qt,b.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}}}}var sh=new a.Color(1,0,0,1),Xv=new a.Color(0,1,0,1),Up=new a.Color(0,0,1,1),jv=new a.Color(1,0,1,1),Vp=new a.Color(0,1,1,1);function Hp(g){var c=g.transform.padding,b=3;lh(g,g.transform.height-(c.top||0),b,sh),lh(g,c.bottom||0,b,Xv),uh(g,c.left||0,b,Up),uh(g,g.transform.width-(c.right||0),b,jv);var d=g.transform.centerPoint;mf(g,d.x,g.transform.height-d.y,Vp)}function mf(g,c,b,d){var w=20,D=2;Su(g,c-D/2,b-w/2,D,w,d),Su(g,c-w/2,b-D/2,w,D,d)}function lh(g,c,b,d){Su(g,0,c+b/2,g.transform.width,b,d)}function uh(g,c,b,d){Su(g,c-b/2,0,b,g.transform.height,d)}function Su(g,c,b,d,w,D){var R=g.context,G=R.gl;G.enable(G.SCISSOR_TEST),G.scissor(c*a.browser.devicePixelRatio,b*a.browser.devicePixelRatio,d*a.browser.devicePixelRatio,w*a.browser.devicePixelRatio),R.clear({color:D}),G.disable(G.SCISSOR_TEST)}function Jv(g,c,b){for(var d=0;d<b.length;d++)fh(g,c,b[d])}function fh(g,c,b){var d=g.context,w=d.gl,D=b.posMatrix,R=g.useProgram("debug"),G=ir.disabled,K=la.disabled,re=g.colorModeForRenderPass(),ce="$debug";d.activeTexture.set(w.TEXTURE0),g.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),R.draw(d,w.LINE_STRIP,G,K,re,Le.disabled,ac(D,a.Color.red),ce,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments);var we=c.getTileByID(b.key).latestRawTileData,be=we&&we.byteLength||0,Re=Math.floor(be/1024),Ze=c.getTile(b).tileSize,Ge=512/Math.min(Ze,512)*(b.overscaledZ/g.transform.zoom)*.5,Oe=b.canonical.toString();b.overscaledZ!==b.canonical.z&&(Oe+=" => "+b.overscaledZ);var Ke=Oe+" "+Re+"kb";Gp(g,Ke),R.draw(d,w.TRIANGLES,G,K,te.alphaBlended,Le.disabled,ac(D,a.Color.transparent,Ge),ce,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments)}function Gp(g,c){g.initDebugOverlayCanvas();var b=g.debugOverlayCanvas,d=g.context.gl,w=g.debugOverlayCanvas.getContext("2d");w.clearRect(0,0,b.width,b.height),w.shadowColor="white",w.shadowBlur=2,w.lineWidth=1.5,w.strokeStyle="white",w.textBaseline="top",w.font="bold 36px Open Sans, sans-serif",w.fillText(c,5,5),w.strokeText(c,5,5),g.debugOverlayTexture.update(b),g.debugOverlayTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}function yf(g,c,b){var d=g.context,w=b.implementation;if(g.renderPass==="offscreen"){var D=w.prerender;D&&(g.setCustomLayerDefaults(),d.setColorMode(g.colorModeForRenderPass()),D.call(w,d.gl,g.transform.customLayerMatrix()),d.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),d.setColorMode(g.colorModeForRenderPass()),d.setStencilMode(la.disabled);var R=w.renderingMode==="3d"?new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,ir.ReadOnly);d.setDepthMode(R),w.render(d.gl,g.transform.customLayerMatrix()),d.setDirty(),g.setBaseState(),d.bindFramebuffer.set(null)}}var li={symbol:ry,circle:nh,heatmap:Mu,line:go,fill:Bp,"fill-extrusion":Rl,hillshade:pf,raster:Op,background:sc,debug:Jv,custom:yf},Li=function(c,b){this.context=new Ne(c),this.transform=b,this._tileTextures={},this.setup(),this.numSublayers=et.maxUnderzooming+et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gu,this.gpuTimers={}};Li.prototype.resize=function(c,b){if(this.width=c*a.browser.devicePixelRatio,this.height=b*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var d=0,w=this.style._order;d<w.length;d+=1){var D=w[d];this.style._layers[D].resize()}},Li.prototype.setup=function(){var c=this.context,b=new a.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(a.EXTENT,0),b.emplaceBack(0,a.EXTENT),b.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(b,cs.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var d=new a.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(a.EXTENT,0),d.emplaceBack(0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=c.createVertexBuffer(d,cs.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var w=new a.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(a.EXTENT,0,a.EXTENT,0),w.emplaceBack(0,a.EXTENT,0,a.EXTENT),w.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=c.createVertexBuffer(w,lt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var D=new a.StructArrayLayout2i4;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(D,cs.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var R=new a.StructArrayLayout1ui2;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(R);var G=new a.StructArrayLayout3ui6;G.emplaceBack(0,1,2),G.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(G),this.emptyTexture=new a.Texture(c,{width:1,height:1,data:new Uint8Array([0,0,0,0])},c.gl.RGBA);var K=this.context.gl;this.stencilClearMode=new la({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)},Li.prototype.clearStencil=function(){var c=this.context,b=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var d=a.create();a.ortho(d,0,this.width,this.height,0,0,1),a.scale(d,d,[b.drawingBufferWidth,b.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,b.TRIANGLES,ir.disabled,this.stencilClearMode,te.disabled,Le.disabled,Cp(d),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Li.prototype._renderTileClippingMasks=function(c,b){if(!(this.currentStencilSource===c.source||!c.isTileClipped()||!b||!b.length)){this.currentStencilSource=c.source;var d=this.context,w=d.gl;this.nextStencilID+b.length>256&&this.clearStencil(),d.setColorMode(te.disabled),d.setDepthMode(ir.disabled);var D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var R=0,G=b;R<G.length;R+=1){var K=G[R],re=this._tileClippingMaskIDs[K.key]=this.nextStencilID++;D.draw(d,w.TRIANGLES,ir.disabled,new la({func:w.ALWAYS,mask:0},re,255,w.KEEP,w.KEEP,w.REPLACE),te.disabled,Le.disabled,Cp(K.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Li.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var c=this.nextStencilID++,b=this.context.gl;return new la({func:b.NOTEQUAL,mask:255},c,255,b.KEEP,b.KEEP,b.REPLACE)},Li.prototype.stencilModeForClipping=function(c){var b=this.context.gl;return new la({func:b.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,b.KEEP,b.KEEP,b.REPLACE)},Li.prototype.stencilConfigForOverlap=function(c){var b,d=this.context.gl,w=c.sort(function(re,ce){return ce.overscaledZ-re.overscaledZ}),D=w[w.length-1].overscaledZ,R=w[0].overscaledZ-D+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();for(var G={},K=0;K<R;K++)G[K+D]=new la({func:d.GEQUAL,mask:255},K+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=R,[G,w]}return[(b={},b[D]=la.disabled,b),w]},Li.prototype.colorModeForRenderPass=function(){var c=this.context.gl;if(this._showOverdrawInspector){var b=8,d=1/b;return new te([c.CONSTANT_COLOR,c.ONE],new a.Color(d,d,d,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?te.unblended:te.alphaBlended},Li.prototype.depthModeForSublayer=function(c,b,d){if(!this.opaquePassEnabledForLayer())return ir.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new ir(d||this.context.gl.LEQUAL,b,[w,w])},Li.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Li.prototype.render=function(c,b){var d=this;this.style=c,this.options=b,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var w=this.style._order,D=this.style.sourceCaches;for(var R in D){var G=D[R];G.used&&G.prepare(this.context)}var K={},re={},ce={};for(var we in D){var be=D[we];K[we]=be.getVisibleCoordinates(),re[we]=K[we].slice().reverse(),ce[we]=be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Re=0;Re<w.length;Re++){var Ze=w[Re];if(this.style._layers[Ze].is3D()){this.opaquePassCutoff=Re;break}}this.renderPass="offscreen";for(var Ge=0,Oe=w;Ge<Oe.length;Ge+=1){var Ke=Oe[Ge],vt=this.style._layers[Ke];if(!(!vt.hasOffscreenPass()||vt.isHidden(this.transform.zoom))){var zt=re[vt.source];vt.type!=="custom"&&!zt.length||this.renderLayer(this,D[vt.source],vt,zt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:b.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=b.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var Nt=this.style._layers[w[this.currentLayer]],Qt=D[Nt.source],rr=K[Nt.source];this._renderTileClippingMasks(Nt,rr),this.renderLayer(this,Qt,Nt,rr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var Gt=this.style._layers[w[this.currentLayer]],ar=D[Gt.source],vr=(Gt.type==="symbol"?ce:re)[Gt.source];this._renderTileClippingMasks(Gt,K[Gt.source]),this.renderLayer(this,ar,Gt,vr)}if(this.options.showTileBoundaries){var wr,Lr,kr=a.values(this.style._layers);kr.forEach(function(Wr){Wr.source&&!Wr.isHidden(d.transform.zoom)&&(Wr.source!==(Lr&&Lr.id)&&(Lr=d.style.sourceCaches[Wr.source]),(!wr||wr.getSource().maxzoom<Lr.getSource().maxzoom)&&(wr=Lr))}),wr&&li.debug(this,wr,wr.getVisibleCoordinates())}this.options.showPadding&&Hp(this),this.context.setDefault()},Li.prototype.renderLayer=function(c,b,d,w){d.isHidden(this.transform.zoom)||d.type!=="background"&&d.type!=="custom"&&!w.length||(this.id=d.id,this.gpuTimingStart(d),li[d.type](c,b,d,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Li.prototype.gpuTimingStart=function(c){if(this.options.gpuTiming){var b=this.context.extTimerQuery,d=this.gpuTimers[c.id];d||(d=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:b.createQueryEXT()}),d.calls++,b.beginQueryEXT(b.TIME_ELAPSED_EXT,d.query)}},Li.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}},Li.prototype.collectGpuTimers=function(){var c=this.gpuTimers;return this.gpuTimers={},c},Li.prototype.queryGpuTimers=function(c){var b={};for(var d in c){var w=c[d],D=this.context.extTimerQuery,R=D.getQueryObjectEXT(w.query,D.QUERY_RESULT_EXT)/(1e3*1e3);D.deleteQueryEXT(w.query),b[d]=R}return b},Li.prototype.translatePosMatrix=function(c,b,d,w,D){if(!d[0]&&!d[1])return c;var R=D?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(R){var G=Math.sin(R),K=Math.cos(R);d=[d[0]*K-d[1]*G,d[0]*G+d[1]*K]}var re=[D?d[0]:mo(b,d[0],this.transform.zoom),D?d[1]:mo(b,d[1],this.transform.zoom),0],ce=new Float32Array(16);return a.translate(ce,c,re),ce},Li.prototype.saveTileTexture=function(c){var b=this._tileTextures[c.size[0]];b?b.push(c):this._tileTextures[c.size[0]]=[c]},Li.prototype.getTileTexture=function(c){var b=this._tileTextures[c];return b&&b.length>0?b.pop():null},Li.prototype.isPatternMissing=function(c){if(!c)return!1;if(!c.from||!c.to)return!0;var b=this.imageManager.getPattern(c.from.toString()),d=this.imageManager.getPattern(c.to.toString());return!b||!d},Li.prototype.useProgram=function(c,b){this.cache=this.cache||{};var d=""+c+(b?b.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[d]||(this.cache[d]=new Ap(this.context,c,Jm[c],b,oc[c],this._showOverdrawInspector)),this.cache[d]},Li.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Li.prototype.setBaseState=function(){var c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)},Li.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var c=this.context.gl;this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,c.RGBA)}},Li.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var uo=function(c,b){this.points=c,this.planes=b};uo.fromInvProjectionMatrix=function(c,b,d){var w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],D=Math.pow(2,d),R=w.map(function(re){return a.transformMat4([],re,c)}).map(function(re){return a.scale$1([],re,1/re[3]/b*D)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],K=G.map(function(re){var ce=a.sub([],R[re[0]],R[re[1]]),we=a.sub([],R[re[2]],R[re[1]]),be=a.normalize([],a.cross([],ce,we)),Re=-a.dot(be,R[re[1]]);return be.concat(Re)});return new uo(R,K)};var Ls=function(c,b){this.min=c,this.max=b,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Ls.prototype.quadrant=function(c){for(var b=[c%2===0,c<2],d=a.clone$2(this.min),w=a.clone$2(this.max),D=0;D<b.length;D++)d[D]=b[D]?this.min[D]:this.center[D],w[D]=b[D]?this.center[D]:this.max[D];return w[2]=this.max[2],new Ls(d,w)},Ls.prototype.distanceX=function(c){var b=Math.max(Math.min(this.max[0],c[0]),this.min[0]);return b-c[0]},Ls.prototype.distanceY=function(c){var b=Math.max(Math.min(this.max[1],c[1]),this.min[1]);return b-c[1]},Ls.prototype.intersects=function(c){for(var b=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],d=!0,w=0;w<c.planes.length;w++){for(var D=c.planes[w],R=0,G=0;G<b.length;G++)R+=a.dot$1(D,b[G])>=0;if(R===0)return 0;R!==b.length&&(d=!1)}if(d)return 2;for(var K=0;K<3;K++){for(var re=Number.MAX_VALUE,ce=-Number.MAX_VALUE,we=0;we<c.points.length;we++){var be=c.points[we][K]-this.min[K];re=Math.min(re,be),ce=Math.max(ce,be)}if(ce<0||re>this.max[K]-this.min[K])return 0}return 1};var _o=function(c,b,d,w){if(c===void 0&&(c=0),b===void 0&&(b=0),d===void 0&&(d=0),w===void 0&&(w=0),isNaN(c)||c<0||isNaN(b)||b<0||isNaN(d)||d<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=b,this.left=d,this.right=w};_o.prototype.interpolate=function(c,b,d){return b.top!=null&&c.top!=null&&(this.top=a.number(c.top,b.top,d)),b.bottom!=null&&c.bottom!=null&&(this.bottom=a.number(c.bottom,b.bottom,d)),b.left!=null&&c.left!=null&&(this.left=a.number(c.left,b.left,d)),b.right!=null&&c.right!=null&&(this.right=a.number(c.right,b.right,d)),this},_o.prototype.getCenter=function(c,b){var d=a.clamp((this.left+c-this.right)/2,0,c),w=a.clamp((this.top+b-this.bottom)/2,0,b);return new a.Point(d,w)},_o.prototype.equals=function(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right},_o.prototype.clone=function(){return new _o(this.top,this.bottom,this.left,this.right)},_o.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var $a=function(c,b,d,w,D){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=D===void 0?!0:D,this._minZoom=c||0,this._maxZoom=b||22,this._minPitch=d==null?0:d,this._maxPitch=w==null?60:w,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _o,this._posMatrixCache={},this._alignedPosMatrixCache={}},fi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};$a.prototype.clone=function(){var c=new $a(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.tileSize=this.tileSize,c.latRange=this.latRange,c.width=this.width,c.height=this.height,c._center=this._center,c.zoom=this.zoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._calcMatrices(),c},fi.minZoom.get=function(){return this._minZoom},fi.minZoom.set=function(g){this._minZoom!==g&&(this._minZoom=g,this.zoom=Math.max(this.zoom,g))},fi.maxZoom.get=function(){return this._maxZoom},fi.maxZoom.set=function(g){this._maxZoom!==g&&(this._maxZoom=g,this.zoom=Math.min(this.zoom,g))},fi.minPitch.get=function(){return this._minPitch},fi.minPitch.set=function(g){this._minPitch!==g&&(this._minPitch=g,this.pitch=Math.max(this.pitch,g))},fi.maxPitch.get=function(){return this._maxPitch},fi.maxPitch.set=function(g){this._maxPitch!==g&&(this._maxPitch=g,this.pitch=Math.min(this.pitch,g))},fi.renderWorldCopies.get=function(){return this._renderWorldCopies},fi.renderWorldCopies.set=function(g){g===void 0?g=!0:g===null&&(g=!1),this._renderWorldCopies=g},fi.worldSize.get=function(){return this.tileSize*this.scale},fi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fi.size.get=function(){return new a.Point(this.width,this.height)},fi.bearing.get=function(){return-this.angle/Math.PI*180},fi.bearing.set=function(g){var c=-a.wrap(g,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fi.pitch.get=function(){return this._pitch/Math.PI*180},fi.pitch.set=function(g){var c=a.clamp(g,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())},fi.fov.get=function(){return this._fov/Math.PI*180},fi.fov.set=function(g){g=Math.max(.01,Math.min(60,g)),this._fov!==g&&(this._unmodified=!1,this._fov=g/180*Math.PI,this._calcMatrices())},fi.zoom.get=function(){return this._zoom},fi.zoom.set=function(g){var c=Math.min(Math.max(g,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())},fi.center.get=function(){return this._center},fi.center.set=function(g){g.lat===this._center.lat&&g.lng===this._center.lng||(this._unmodified=!1,this._center=g,this._constrain(),this._calcMatrices())},fi.padding.get=function(){return this._edgeInsets.toJSON()},fi.padding.set=function(g){this._edgeInsets.equals(g)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,g,1),this._calcMatrices())},fi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},$a.prototype.isPaddingEqual=function(c){return this._edgeInsets.equals(c)},$a.prototype.interpolatePadding=function(c,b,d){this._unmodified=!1,this._edgeInsets.interpolate(c,b,d),this._constrain(),this._calcMatrices()},$a.prototype.coveringZoomLevel=function(c){var b=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,b)},$a.prototype.getVisibleUnwrappedCoordinates=function(c){var b=[new a.UnwrappedTileID(0,c)];if(this._renderWorldCopies)for(var d=this.pointCoordinate(new a.Point(0,0)),w=this.pointCoordinate(new a.Point(this.width,0)),D=this.pointCoordinate(new a.Point(this.width,this.height)),R=this.pointCoordinate(new a.Point(0,this.height)),G=Math.floor(Math.min(d.x,w.x,D.x,R.x)),K=Math.floor(Math.max(d.x,w.x,D.x,R.x)),re=1,ce=G-re;ce<=K+re;ce++)ce!==0&&b.push(new a.UnwrappedTileID(ce,c));return b},$a.prototype.coveringTiles=function(c){var b=this.coveringZoomLevel(c),d=b;if(c.minzoom!==void 0&&b<c.minzoom)return[];c.maxzoom!==void 0&&b>c.maxzoom&&(b=c.maxzoom);var w=a.MercatorCoordinate.fromLngLat(this.center),D=Math.pow(2,b),R=[D*w.x,D*w.y,0],G=uo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b),K=c.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(K=b);var re=3,ce=function(kr){return{aabb:new Ls([kr*D,0,0],[(kr+1)*D,D,0]),zoom:0,x:0,y:0,wrap:kr,fullyVisible:!1}},we=[],be=[],Re=b,Ze=c.reparseOverscaled?d:b;if(this._renderWorldCopies)for(var Ge=1;Ge<=3;Ge++)we.push(ce(-Ge)),we.push(ce(Ge));for(we.push(ce(0));we.length>0;){var Oe=we.pop(),Ke=Oe.x,vt=Oe.y,zt=Oe.fullyVisible;if(!zt){var Nt=Oe.aabb.intersects(G);if(Nt===0)continue;zt=Nt===2}var Qt=Oe.aabb.distanceX(R),rr=Oe.aabb.distanceY(R),Gt=Math.max(Math.abs(Qt),Math.abs(rr)),ar=re+(1<<Re-Oe.zoom)-2;if(Oe.zoom===Re||Gt>ar&&Oe.zoom>=K){be.push({tileID:new a.OverscaledTileID(Oe.zoom===Re?Ze:Oe.zoom,Oe.wrap,Oe.zoom,Ke,vt),distanceSq:a.sqrLen([R[0]-.5-Ke,R[1]-.5-vt])});continue}for(var vr=0;vr<4;vr++){var wr=(Ke<<1)+vr%2,Lr=(vt<<1)+(vr>>1);we.push({aabb:Oe.aabb.quadrant(vr),zoom:Oe.zoom+1,x:wr,y:Lr,wrap:Oe.wrap,fullyVisible:zt})}}return be.sort(function(kr,Wr){return kr.distanceSq-Wr.distanceSq}).map(function(kr){return kr.tileID})},$a.prototype.resize=function(c,b){this.width=c,this.height=b,this.pixelsToGLUnits=[2/c,-2/b],this._constrain(),this._calcMatrices()},fi.unmodified.get=function(){return this._unmodified},$a.prototype.zoomScale=function(c){return Math.pow(2,c)},$a.prototype.scaleZoom=function(c){return Math.log(c)/Math.LN2},$a.prototype.project=function(c){var b=a.clamp(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(c.lng)*this.worldSize,a.mercatorYfromLat(b)*this.worldSize)},$a.prototype.unproject=function(c){return new a.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()},fi.point.get=function(){return this.project(this.center)},$a.prototype.setLocationAtPoint=function(c,b){var d=this.pointCoordinate(b),w=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(c),R=new a.MercatorCoordinate(D.x-(d.x-w.x),D.y-(d.y-w.y));this.center=this.coordinateLocation(R),this._renderWorldCopies&&(this.center=this.center.wrap())},$a.prototype.locationPoint=function(c){return this.coordinatePoint(this.locationCoordinate(c))},$a.prototype.pointLocation=function(c){return this.coordinateLocation(this.pointCoordinate(c))},$a.prototype.locationCoordinate=function(c){return a.MercatorCoordinate.fromLngLat(c)},$a.prototype.coordinateLocation=function(c){return c.toLngLat()},$a.prototype.pointCoordinate=function(c){var b=0,d=[c.x,c.y,0,1],w=[c.x,c.y,1,1];a.transformMat4(d,d,this.pixelMatrixInverse),a.transformMat4(w,w,this.pixelMatrixInverse);var D=d[3],R=w[3],G=d[0]/D,K=w[0]/R,re=d[1]/D,ce=w[1]/R,we=d[2]/D,be=w[2]/R,Re=we===be?0:(b-we)/(be-we);return new a.MercatorCoordinate(a.number(G,K,Re)/this.worldSize,a.number(re,ce,Re)/this.worldSize)},$a.prototype.coordinatePoint=function(c){var b=[c.x*this.worldSize,c.y*this.worldSize,0,1];return a.transformMat4(b,b,this.pixelMatrix),new a.Point(b[0]/b[3],b[1]/b[3])},$a.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},$a.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},$a.prototype.setMaxBounds=function(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},$a.prototype.calculatePosMatrix=function(c,b){b===void 0&&(b=!1);var d=c.key,w=b?this._alignedPosMatrixCache:this._posMatrixCache;if(w[d])return w[d];var D=c.canonical,R=this.worldSize/this.zoomScale(D.z),G=D.x+Math.pow(2,D.z)*c.wrap,K=a.identity(new Float64Array(16));return a.translate(K,K,[G*R,D.y*R,0]),a.scale(K,K,[R/a.EXTENT,R/a.EXTENT,1]),a.multiply(K,b?this.alignedProjMatrix:this.projMatrix,K),w[d]=new Float32Array(K),w[d]},$a.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},$a.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var c=-90,b=90,d=-180,w=180,D,R,G,K,re=this.size,ce=this._unmodified;if(this.latRange){var we=this.latRange;c=a.mercatorYfromLat(we[1])*this.worldSize,b=a.mercatorYfromLat(we[0])*this.worldSize,D=b-c<re.y?re.y/(b-c):0}if(this.lngRange){var be=this.lngRange;d=a.mercatorXfromLng(be[0])*this.worldSize,w=a.mercatorXfromLng(be[1])*this.worldSize,R=w-d<re.x?re.x/(w-d):0}var Re=this.point,Ze=Math.max(R||0,D||0);if(Ze){this.center=this.unproject(new a.Point(R?(w+d)/2:Re.x,D?(b+c)/2:Re.y)),this.zoom+=this.scaleZoom(Ze),this._unmodified=ce,this._constraining=!1;return}if(this.latRange){var Ge=Re.y,Oe=re.y/2;Ge-Oe<c&&(K=c+Oe),Ge+Oe>b&&(K=b-Oe)}if(this.lngRange){var Ke=Re.x,vt=re.x/2;Ke-vt<d&&(G=d+vt),Ke+vt>w&&(G=w-vt)}(G!==void 0||K!==void 0)&&(this.center=this.unproject(new a.Point(G!==void 0?G:Re.x,K!==void 0?K:Re.y))),this._unmodified=ce,this._constraining=!1}},$a.prototype._calcMatrices=function(){if(this.height){var c=this._fov/2,b=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(c)*this.height;var d=Math.PI/2+this._pitch,w=this._fov*(.5+b.y/this.height),D=Math.sin(w)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-d-w,.01,Math.PI-.01)),R=this.point,G=R.x,K=R.y,re=Math.cos(Math.PI/2-this._pitch)*D+this.cameraToCenterDistance,ce=re*1.01,we=this.height/50,be=new Float64Array(16);a.perspective(be,this._fov,this.width/this.height,we,ce),be[8]=-b.x*2/this.width,be[9]=b.y*2/this.height,a.scale(be,be,[1,-1,1]),a.translate(be,be,[0,0,-this.cameraToCenterDistance]),a.rotateX(be,be,this._pitch),a.rotateZ(be,be,this.angle),a.translate(be,be,[-G,-K,0]),this.mercatorMatrix=a.scale([],be,[this.worldSize,this.worldSize,this.worldSize]),a.scale(be,be,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=be,this.invProjMatrix=a.invert([],this.projMatrix);var Re=this.width%2/2,Ze=this.height%2/2,Ge=Math.cos(this.angle),Oe=Math.sin(this.angle),Ke=G-Math.round(G)+Ge*Re+Oe*Ze,vt=K-Math.round(K)+Ge*Ze+Oe*Re,zt=new Float64Array(be);if(a.translate(zt,zt,[Ke>.5?Ke-1:Ke,vt>.5?vt-1:vt,0]),this.alignedProjMatrix=zt,be=a.create(),a.scale(be,be,[this.width/2,-this.height/2,1]),a.translate(be,be,[1,-1,0]),this.labelPlaneMatrix=be,be=a.create(),a.scale(be,be,[1,-1,1]),a.translate(be,be,[-1,-1,0]),a.scale(be,be,[2/this.width,2/this.height,1]),this.glCoordMatrix=be,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),be=a.invert(new Float64Array(16),this.pixelMatrix),!be)throw new Error("failed to invert matrix");this.pixelMatrixInverse=be,this._posMatrixCache={},this._alignedPosMatrixCache={}}},$a.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var c=this.pointCoordinate(new a.Point(0,0)),b=[c.x*this.worldSize,c.y*this.worldSize,0,1],d=a.transformMat4(b,b,this.pixelMatrix);return d[3]/this.cameraToCenterDistance},$a.prototype.getCameraPoint=function(){var c=this._pitch,b=Math.tan(c)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,b))},$a.prototype.getCameraQueryGeometry=function(c){var b=this.getCameraPoint();if(c.length===1)return[c[0],b];for(var d=b.x,w=b.y,D=b.x,R=b.y,G=0,K=c;G<K.length;G+=1){var re=K[G];d=Math.min(d,re.x),w=Math.min(w,re.y),D=Math.max(D,re.x),R=Math.max(R,re.y)}return[new a.Point(d,w),new a.Point(D,w),new a.Point(D,R),new a.Point(d,R),new a.Point(d,w)]},Object.defineProperties($a.prototype,fi);function ch(g,c){var b=!1,d=null,w=function(){d=null,b&&(g(),d=setTimeout(w,c),b=!1)};return function(){return b=!0,d||w(),d}}var Fl=function(c){this._hashName=c&&encodeURIComponent(c),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ch(this._updateHashUnthrottled.bind(this),30*1e3/100)};Fl.prototype.addTo=function(c){return this._map=c,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Fl.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Fl.prototype.getHashString=function(c){var b=this._map.getCenter(),d=Math.round(this._map.getZoom()*100)/100,w=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,w),R=Math.round(b.lng*D)/D,G=Math.round(b.lat*D)/D,K=this._map.getBearing(),re=this._map.getPitch(),ce="";if(c?ce+="/"+R+"/"+G+"/"+d:ce+=d+"/"+G+"/"+R,(K||re)&&(ce+="/"+Math.round(K*10)/10),re&&(ce+="/"+Math.round(re)),this._hashName){var we=this._hashName,be=!1,Re=a.window.location.hash.slice(1).split("&").map(function(Ze){var Ge=Ze.split("=")[0];return Ge===we?(be=!0,Ge+"="+ce):Ze}).filter(function(Ze){return Ze});return be||Re.push(we+"="+ce),"#"+Re.join("&")}return"#"+ce},Fl.prototype._getCurrentHash=function(){var c=this,b=a.window.location.hash.replace("#","");if(this._hashName){var d;return b.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===c._hashName&&(d=w)}),(d&&d[1]||"").split("/")}return b.split("/")},Fl.prototype._onHashChange=function(){var c=this._getCurrentHash();if(c.length>=3&&!c.some(function(d){return isNaN(d)})){var b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:b,pitch:+(c[4]||0)}),!0}return!1},Fl.prototype._updateHashUnthrottled=function(){var c=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,c)}catch(b){}};var lc={linearity:.3,easing:a.bezier(0,0,.3,1)},gf=a.extend({deceleration:2500,maxSpeed:1400},lc),ql=a.extend({deceleration:20,maxSpeed:1400},lc),Ds=a.extend({deceleration:1e3,maxSpeed:360},lc),hh=a.extend({deceleration:1e3,maxSpeed:90},lc),_f=function(c){this._map=c,this.clear()};_f.prototype.clear=function(){this._inertiaBuffer=[]},_f.prototype.record=function(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:c})},_f.prototype._drainInertiaBuffer=function(){for(var c=this._inertiaBuffer,b=a.browser.now(),d=160;c.length>0&&b-c[0].time>d;)c.shift()},_f.prototype._onMoveEnd=function(c){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var b={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},d=0,w=this._inertiaBuffer;d<w.length;d+=1){var D=w[d],R=D.settings;b.zoom+=R.zoomDelta||0,b.bearing+=R.bearingDelta||0,b.pitch+=R.pitchDelta||0,R.panDelta&&b.pan._add(R.panDelta),R.around&&(b.around=R.around),R.pinchAround&&(b.pinchAround=R.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1],K=G.time-this._inertiaBuffer[0].time,re={};if(b.pan.mag()){var ce=y(b.pan.mag(),K,a.extend({},gf,c||{}));re.offset=b.pan.mult(ce.amount/b.pan.mag()),re.center=this._map.transform.center,Nl(re,ce)}if(b.zoom){var we=y(b.zoom,K,ql);re.zoom=this._map.transform.zoom+we.amount,Nl(re,we)}if(b.bearing){var be=y(b.bearing,K,Ds);re.bearing=this._map.transform.bearing+a.clamp(be.amount,-179,179),Nl(re,be)}if(b.pitch){var Re=y(b.pitch,K,hh);re.pitch=this._map.transform.pitch+Re.amount,Nl(re,Re)}if(re.zoom||re.bearing){var Ze=b.pinchAround===void 0?b.around:b.pinchAround;re.around=Ze?this._map.unproject(Ze):this._map.getCenter()}return this.clear(),a.extend(re,{noMoveStart:!0})}};function Nl(g,c){(!g.duration||g.duration<c.duration)&&(g.duration=c.duration,g.easing=c.easing)}function y(g,c,b){var d=b.maxSpeed,w=b.linearity,D=b.deceleration,R=a.clamp(g*w/(c/1e3),-d,d),G=Math.abs(R)/(D*w);return{easing:b.easing,duration:G*1e3,amount:R*(G/2)}}var S=function(g){function c(d,w,D,R){R===void 0&&(R={});var G=l.mousePos(w.getCanvasContainer(),D),K=w.unproject(G);g.call(this,d,a.extend({point:G,lngLat:K,originalEvent:D},R)),this._defaultPrevented=!1,this.target=w}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var b={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},b.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,b),c}(a.Event),P=function(g){function c(d,w,D){var R=d==="touchend"?D.changedTouches:D.touches,G=l.touchPos(w.getCanvasContainer(),R),K=G.map(function(we){return w.unproject(we)}),re=G.reduce(function(we,be,Re,Ze){return we.add(be.div(Ze.length))},new a.Point(0,0)),ce=w.unproject(re);g.call(this,d,{points:G,point:re,lngLats:K,lngLat:ce,originalEvent:D}),this._defaultPrevented=!1}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var b={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},b.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,b),c}(a.Event),B=function(g){function c(d,w,D){g.call(this,d,{originalEvent:D}),this._defaultPrevented=!1}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var b={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},b.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,b),c}(a.Event),U=function(c,b){this._map=c,this._clickTolerance=b.clickTolerance};U.prototype.reset=function(){delete this._mousedownPos},U.prototype.wheel=function(c){return this._firePreventable(new B(c.type,this._map,c))},U.prototype.mousedown=function(c,b){return this._mousedownPos=b,this._firePreventable(new S(c.type,this._map,c))},U.prototype.mouseup=function(c){this._map.fire(new S(c.type,this._map,c))},U.prototype.click=function(c,b){this._mousedownPos&&this._mousedownPos.dist(b)>=this._clickTolerance||this._map.fire(new S(c.type,this._map,c))},U.prototype.dblclick=function(c){return this._firePreventable(new S(c.type,this._map,c))},U.prototype.mouseover=function(c){this._map.fire(new S(c.type,this._map,c))},U.prototype.mouseout=function(c){this._map.fire(new S(c.type,this._map,c))},U.prototype.touchstart=function(c){return this._firePreventable(new P(c.type,this._map,c))},U.prototype.touchmove=function(c){this._map.fire(new P(c.type,this._map,c))},U.prototype.touchend=function(c){this._map.fire(new P(c.type,this._map,c))},U.prototype.touchcancel=function(c){this._map.fire(new P(c.type,this._map,c))},U.prototype._firePreventable=function(c){if(this._map.fire(c),c.defaultPrevented)return{}},U.prototype.isEnabled=function(){return!0},U.prototype.isActive=function(){return!1},U.prototype.enable=function(){},U.prototype.disable=function(){};var Z=function(c){this._map=c};Z.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Z.prototype.mousemove=function(c){this._map.fire(new S(c.type,this._map,c))},Z.prototype.mousedown=function(){this._delayContextMenu=!0},Z.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new S("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Z.prototype.contextmenu=function(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new S(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()},Z.prototype.isEnabled=function(){return!0},Z.prototype.isActive=function(){return!1},Z.prototype.enable=function(){},Z.prototype.disable=function(){};var $=function(c,b){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=b.clickTolerance||1};$.prototype.isEnabled=function(){return!!this._enabled},$.prototype.isActive=function(){return!!this._active},$.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$.prototype.mousedown=function(c,b){this.isEnabled()&&c.shiftKey&&c.button===0&&(l.disableDrag(),this._startPos=this._lastPos=b,this._active=!0)},$.prototype.mousemoveWindow=function(c,b){if(this._active){var d=b;if(!(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=d,this._box||(this._box=l.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));var D=Math.min(w.x,d.x),R=Math.max(w.x,d.x),G=Math.min(w.y,d.y),K=Math.max(w.y,d.y);l.setTransform(this._box,"translate("+D+"px,"+G+"px)"),this._box.style.width=R-D+"px",this._box.style.height=K-G+"px"}}},$.prototype.mouseupWindow=function(c,b){var d=this;if(this._active&&c.button===0){var w=this._startPos,D=b;if(this.reset(),l.suppressClick(),w.x===D.x&&w.y===D.y)this._fireEvent("boxzoomcancel",c);else return this._map.fire(new a.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:function(R){return R.fitScreenCoordinates(w,D,d._map.getBearing(),{linear:!0})}}}},$.prototype.keydown=function(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))},$.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(l.remove(this._box),this._box=null),l.enableDrag(),delete this._startPos,delete this._lastPos},$.prototype._fireEvent=function(c,b){return this._map.fire(new a.Event(c,{originalEvent:b}))};function X(g,c){for(var b={},d=0;d<g.length;d++)b[g[d].identifier]=c[d];return b}function ae(g){for(var c=new a.Point(0,0),b=0,d=g;b<d.length;b+=1){var w=d[b];c._add(w)}return c.div(g.length)}var ye=500,xe=500,Pe=30,De=function(c){this.reset(),this.numTouches=c.numTouches};De.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},De.prototype.touchstart=function(c,b,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=c.timeStamp),d.length===this.numTouches&&(this.centroid=ae(b),this.touches=X(d,b)))},De.prototype.touchmove=function(c,b,d){if(!(this.aborted||!this.centroid)){var w=X(d,b);for(var D in this.touches){var R=this.touches[D],G=w[D];(!G||G.dist(R)>Pe)&&(this.aborted=!0)}}},De.prototype.touchend=function(c,b,d){if((!this.centroid||c.timeStamp-this.startTime>xe)&&(this.aborted=!0),d.length===0){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var $e=function(c){this.singleTap=new De(c),this.numTaps=c.numTaps,this.reset()};$e.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},$e.prototype.touchstart=function(c,b,d){this.singleTap.touchstart(c,b,d)},$e.prototype.touchmove=function(c,b,d){this.singleTap.touchmove(c,b,d)},$e.prototype.touchend=function(c,b,d){var w=this.singleTap.touchend(c,b,d);if(w){var D=c.timeStamp-this.lastTime<ye,R=!this.lastTap||this.lastTap.dist(w)<Pe;if((!D||!R)&&this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var ot=function(){this._zoomIn=new $e({numTouches:1,numTaps:2}),this._zoomOut=new $e({numTouches:2,numTaps:1}),this.reset()};ot.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ot.prototype.touchstart=function(c,b,d){this._zoomIn.touchstart(c,b,d),this._zoomOut.touchstart(c,b,d)},ot.prototype.touchmove=function(c,b,d){this._zoomIn.touchmove(c,b,d),this._zoomOut.touchmove(c,b,d)},ot.prototype.touchend=function(c,b,d){var w=this,D=this._zoomIn.touchend(c,b,d),R=this._zoomOut.touchend(c,b,d);if(D)return this._active=!0,c.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(G){return G.easeTo({duration:300,zoom:G.getZoom()+1,around:G.unproject(D)},{originalEvent:c})}};if(R)return this._active=!0,c.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(G){return G.easeTo({duration:300,zoom:G.getZoom()-1,around:G.unproject(R)},{originalEvent:c})}}},ot.prototype.touchcancel=function(){this.reset()},ot.prototype.enable=function(){this._enabled=!0},ot.prototype.disable=function(){this._enabled=!1,this.reset()},ot.prototype.isEnabled=function(){return this._enabled},ot.prototype.isActive=function(){return this._active};var Ie=0,He=2,Qe={};Qe[Ie]=1,Qe[He]=2;function ct(g,c){var b=Qe[c];return g.buttons===void 0||(g.buttons&b)!==b}var nt=function(c){this.reset(),this._clickTolerance=c.clickTolerance||1};nt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},nt.prototype._correctButton=function(c,b){return!1},nt.prototype._move=function(c,b){return{}},nt.prototype.mousedown=function(c,b){if(!this._lastPoint){var d=l.mouseButton(c);this._correctButton(c,d)&&(this._lastPoint=b,this._eventButton=d)}},nt.prototype.mousemoveWindow=function(c,b){var d=this._lastPoint;if(d){if(c.preventDefault(),ct(c,this._eventButton)){this.reset();return}if(!(!this._moved&&b.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=b,this._move(d,b)}},nt.prototype.mouseupWindow=function(c){if(this._lastPoint){var b=l.mouseButton(c);b===this._eventButton&&(this._moved&&l.suppressClick(),this.reset())}},nt.prototype.enable=function(){this._enabled=!0},nt.prototype.disable=function(){this._enabled=!1,this.reset()},nt.prototype.isEnabled=function(){return this._enabled},nt.prototype.isActive=function(){return this._active};var je=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.mousedown=function(d,w){g.prototype.mousedown.call(this,d,w),this._lastPoint&&(this._active=!0)},c.prototype._correctButton=function(d,w){return w===Ie&&!d.ctrlKey},c.prototype._move=function(d,w){return{around:w,panDelta:w.sub(d)}},c}(nt),Vt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype._correctButton=function(d,w){return w===Ie&&d.ctrlKey||w===He},c.prototype._move=function(d,w){var D=.8,R=(w.x-d.x)*D;if(R)return this._active=!0,{bearingDelta:R}},c.prototype.contextmenu=function(d){d.preventDefault()},c}(nt),or=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype._correctButton=function(d,w){return w===Ie&&d.ctrlKey||w===He},c.prototype._move=function(d,w){var D=-.5,R=(w.y-d.y)*D;if(R)return this._active=!0,{pitchDelta:R}},c.prototype.contextmenu=function(d){d.preventDefault()},c}(nt),hr=function(c){this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset()};hr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},hr.prototype.touchstart=function(c,b,d){return this._calculateTransform(c,b,d)},hr.prototype.touchmove=function(c,b,d){if(!(!this._active||d.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,b,d)},hr.prototype.touchend=function(c,b,d){this._calculateTransform(c,b,d),this._active&&d.length<this._minTouches&&this.reset()},hr.prototype.touchcancel=function(){this.reset()},hr.prototype._calculateTransform=function(c,b,d){d.length>0&&(this._active=!0);var w=X(d,b),D=new a.Point(0,0),R=new a.Point(0,0),G=0;for(var K in w){var re=w[K],ce=this._touches[K];ce&&(D._add(re),R._add(re.sub(ce)),G++,w[K]=re)}if(this._touches=w,!(G<this._minTouches||!R.mag())){var we=R.div(G);if(this._sum._add(we),!(this._sum.mag()<this._clickTolerance)){var be=D.div(G);return{around:be,panDelta:we}}}},hr.prototype.enable=function(){this._enabled=!0},hr.prototype.disable=function(){this._enabled=!1,this.reset()},hr.prototype.isEnabled=function(){return this._enabled},hr.prototype.isActive=function(){return this._active};var fr=function(){this.reset()};fr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},fr.prototype._start=function(c){},fr.prototype._move=function(c,b,d){return{}},fr.prototype.touchstart=function(c,b,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([b[0],b[1]]))},fr.prototype.touchmove=function(c,b,d){if(this._firstTwoTouches){c.preventDefault();var w=this._firstTwoTouches,D=w[0],R=w[1],G=zr(d,b,D),K=zr(d,b,R);if(!(!G||!K)){var re=this._aroundCenter?null:G.add(K).div(2);return this._move([G,K],re,c)}}},fr.prototype.touchend=function(c,b,d){if(this._firstTwoTouches){var w=this._firstTwoTouches,D=w[0],R=w[1],G=zr(d,b,D),K=zr(d,b,R);G&&K||(this._active&&l.suppressClick(),this.reset())}},fr.prototype.touchcancel=function(){this.reset()},fr.prototype.enable=function(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"},fr.prototype.disable=function(){this._enabled=!1,this.reset()},fr.prototype.isEnabled=function(){return this._enabled},fr.prototype.isActive=function(){return this._active};function zr(g,c,b){for(var d=0;d<g.length;d++)if(g[d].identifier===b)return c[d]}var Rr=.1;function ea(g,c){return Math.log(g/c)/Math.LN2}var Vr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.reset=function(){g.prototype.reset.call(this),delete this._distance,delete this._startDistance},c.prototype._start=function(d){this._startDistance=this._distance=d[0].dist(d[1])},c.prototype._move=function(d,w){var D=this._distance;if(this._distance=d[0].dist(d[1]),!(!this._active&&Math.abs(ea(this._distance,this._startDistance))<Rr))return this._active=!0,{zoomDelta:ea(this._distance,D),pinchAround:w}},c}(fr),Kr=25;function Na(g,c){return g.angleWith(c)*180/Math.PI}var ei=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.reset=function(){g.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},c.prototype._start=function(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])},c.prototype._move=function(d,w){var D=this._vector;if(this._vector=d[0].sub(d[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Na(this._vector,D),pinchAround:w}},c.prototype._isBelowThreshold=function(d){this._minDiameter=Math.min(this._minDiameter,d.mag());var w=Math.PI*this._minDiameter,D=Kr/w*360,R=Na(d,this._startVector);return Math.abs(R)<D},c}(fr);function Qa(g){return Math.abs(g.y)>Math.abs(g.x)}var jt=100,Jr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.reset=function(){g.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},c.prototype._start=function(d){this._lastPoints=d,Qa(d[0].sub(d[1]))&&(this._valid=!1)},c.prototype._move=function(d,w,D){var R=d[0].sub(this._lastPoints[0]),G=d[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(R,G,D.timeStamp),!!this._valid){this._lastPoints=d,this._active=!0;var K=(R.y+G.y)/2,re=-.5;return{pitchDelta:K*re}}},c.prototype.gestureBeginsVertically=function(d,w,D){if(this._valid!==void 0)return this._valid;var R=2,G=d.mag()>=R,K=w.mag()>=R;if(!(!G&&!K)){if(!G||!K)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<jt?void 0:!1;var re=d.y>0==w.y>0;return Qa(d)&&Qa(w)&&re}},c}(fr),na={panStep:100,bearingStep:15,pitchStep:10},oa=function(){var c=na;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1};oa.prototype.reset=function(){this._active=!1},oa.prototype.keydown=function(c){var b=this;if(!(c.altKey||c.ctrlKey||c.metaKey)){var d=0,w=0,D=0,R=0,G=0;switch(c.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:c.shiftKey?w=-1:(c.preventDefault(),R=-1);break;case 39:c.shiftKey?w=1:(c.preventDefault(),R=1);break;case 38:c.shiftKey?D=1:(c.preventDefault(),G=-1);break;case 40:c.shiftKey?D=-1:(c.preventDefault(),G=1);break;default:return}return this._rotationDisabled&&(w=0,D=0),{cameraAnimation:function(K){var re=K.getZoom();K.easeTo({duration:300,easeId:"keyboardHandler",easing:Di,zoom:d?Math.round(re)+d*(c.shiftKey?2:1):re,bearing:K.getBearing()+w*b._bearingStep,pitch:K.getPitch()+D*b._pitchStep,offset:[-R*b._panStep,-G*b._panStep],center:K.getCenter()},{originalEvent:c})}}}},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active},oa.prototype.disableRotation=function(){this._rotationDisabled=!0},oa.prototype.enableRotation=function(){this._rotationDisabled=!1};function Di(g){return g*(2-g)}var Vi=4.000244140625,en=1/100,bi=1/450,wn=2,Tr=function(c,b){this._map=c,this._el=c.getCanvasContainer(),this._handler=b,this._delta=0,this._defaultZoomRate=en,this._wheelZoomRate=bi,a.bindAll(["_onTimeout"],this)};Tr.prototype.setZoomRate=function(c){this._defaultZoomRate=c},Tr.prototype.setWheelZoomRate=function(c){this._wheelZoomRate=c},Tr.prototype.isEnabled=function(){return!!this._enabled},Tr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Tr.prototype.isZooming=function(){return!!this._zooming},Tr.prototype.enable=function(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=c&&c.around==="center")},Tr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Tr.prototype.wheel=function(c){if(this.isEnabled()){var b=c.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?c.deltaY*40:c.deltaY,d=a.browser.now(),w=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,b!==0&&b%Vi===0?this._type="wheel":b!==0&&Math.abs(b)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(w*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),c.shiftKey&&b&&(b=b/4),this._type&&(this._lastWheelEvent=c,this._delta-=b,this._active||this._start(c)),c.preventDefault()}},Tr.prototype._onTimeout=function(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},Tr.prototype._start=function(c){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var b=l.mousePos(this._el,c);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(b)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Tr.prototype.renderFrame=function(){var c=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var b=this._map.transform;if(this._delta!==0){var d=this._type==="wheel"&&Math.abs(this._delta)>Vi?this._wheelZoomRate:this._defaultZoomRate,w=wn/(1+Math.exp(-Math.abs(this._delta*d)));this._delta<0&&w!==0&&(w=1/w);var D=typeof this._targetZoom=="number"?b.zoomScale(this._targetZoom):b.scale;this._targetZoom=Math.min(b.maxZoom,Math.max(b.minZoom,b.scaleZoom(D*w))),this._type==="wheel"&&(this._startZoom=b.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var R=typeof this._targetZoom=="number"?this._targetZoom:b.zoom,G=this._startZoom,K=this._easing,re=!1,ce;if(this._type==="wheel"&&G&&K){var we=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),be=K(we);ce=a.number(G,R,be),we<1?this._frameId||(this._frameId=!0):re=!0}else ce=R,re=!0;return this._active=!0,re&&(this._active=!1,this._finishTimeout=setTimeout(function(){c._zooming=!1,c._handler._triggerRenderFrame(),delete c._targetZoom,delete c._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!re,zoomDelta:ce-b.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Tr.prototype._smoothOutEasing=function(c){var b=a.ease;if(this._prevEase){var d=this._prevEase,w=(a.browser.now()-d.start)/d.duration,D=d.easing(w+.01)-d.easing(w),R=.27/Math.sqrt(D*D+1e-4)*.01,G=Math.sqrt(.27*.27-R*R);b=a.bezier(R,G,.25,1)}return this._prevEase={start:a.browser.now(),duration:c,easing:b},b},Tr.prototype.reset=function(){this._active=!1};var Hr=function(c,b){this._clickZoom=c,this._tapZoom=b};Hr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Hr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Hr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Hr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ni=function(){this.reset()};Ni.prototype.reset=function(){this._active=!1},Ni.prototype.dblclick=function(c,b){return c.preventDefault(),{cameraAnimation:function(d){d.easeTo({duration:300,zoom:d.getZoom()+(c.shiftKey?-1:1),around:d.unproject(b)},{originalEvent:c})}}},Ni.prototype.enable=function(){this._enabled=!0},Ni.prototype.disable=function(){this._enabled=!1,this.reset()},Ni.prototype.isEnabled=function(){return this._enabled},Ni.prototype.isActive=function(){return this._active};var Ai=function(){this._tap=new $e({numTouches:1,numTaps:1}),this.reset()};Ai.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ai.prototype.touchstart=function(c,b,d){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>ye&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=b[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(c,b,d))},Ai.prototype.touchmove=function(c,b,d){if(!this._tapTime)this._tap.touchmove(c,b,d);else if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;var w=b[0],D=w.y-this._swipePoint.y;return this._swipePoint=w,c.preventDefault(),this._active=!0,{zoomDelta:D/128}}},Ai.prototype.touchend=function(c,b,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{var w=this._tap.touchend(c,b,d);w&&(this._tapTime=c.timeStamp)}},Ai.prototype.touchcancel=function(){this.reset()},Ai.prototype.enable=function(){this._enabled=!0},Ai.prototype.disable=function(){this._enabled=!1,this.reset()},Ai.prototype.isEnabled=function(){return this._enabled},Ai.prototype.isActive=function(){return this._active};var fo=function(c,b,d){this._el=c,this._mousePan=b,this._touchPan=d};fo.prototype.enable=function(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},fo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},fo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},fo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var qn=function(c,b,d){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=b,this._mousePitch=d};qn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},qn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},qn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},qn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var mn=function(c,b,d,w){this._el=c,this._touchZoom=b,this._touchRotate=d,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};mn.prototype.enable=function(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},mn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},mn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},mn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},mn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},mn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var pi=function(g){return g.zoom||g.drag||g.pitch||g.rotate},Jo=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c}(a.Event);function co(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}var ci=function(c,b){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _f(c),this._bearingSnap=b.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(b),a.bindAll(["handleEvent","handleWindowEvent"],this);var d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[a.window,"blur",void 0]];for(var w=0,D=this._listeners;w<D.length;w+=1){var R=D[w],G=R[0],K=R[1],re=R[2];l.addEventListener(G,K,G===a.window.document?this.handleWindowEvent:this.handleEvent,re)}};ci.prototype.destroy=function(){for(var c=0,b=this._listeners;c<b.length;c+=1){var d=b[c],w=d[0],D=d[1],R=d[2];l.removeEventListener(w,D,w===a.window.document?this.handleWindowEvent:this.handleEvent,R)}},ci.prototype._addDefaultHandlers=function(c){var b=this._map,d=b.getCanvasContainer();this._add("mapEvent",new U(b,c));var w=b.boxZoom=new $(b,c);this._add("boxZoom",w);var D=new ot,R=new Ni;b.doubleClickZoom=new Hr(R,D),this._add("tapZoom",D),this._add("clickZoom",R);var G=new Ai;this._add("tapDragZoom",G);var K=b.touchPitch=new Jr;this._add("touchPitch",K);var re=new Vt(c),ce=new or(c);b.dragRotate=new qn(c,re,ce),this._add("mouseRotate",re,["mousePitch"]),this._add("mousePitch",ce,["mouseRotate"]);var we=new je(c),be=new hr(c);b.dragPan=new fo(d,we,be),this._add("mousePan",we),this._add("touchPan",be,["touchZoom","touchRotate"]);var Re=new ei,Ze=new Vr;b.touchZoomRotate=new mn(d,Ze,Re,G),this._add("touchRotate",Re,["touchPan","touchZoom"]),this._add("touchZoom",Ze,["touchPan","touchRotate"]);var Ge=b.scrollZoom=new Tr(b,this);this._add("scrollZoom",Ge,["mousePan"]);var Oe=b.keyboard=new oa;this._add("keyboard",Oe),this._add("blockableMapEvent",new Z(b));for(var Ke=0,vt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ke<vt.length;Ke+=1){var zt=vt[Ke];c.interactive&&c[zt]&&b[zt].enable(c[zt])}},ci.prototype._add=function(c,b,d){this._handlers.push({handlerName:c,handler:b,allowed:d}),this._handlersById[c]=b},ci.prototype.stop=function(c){if(!this._updatingCamera){for(var b=0,d=this._handlers;b<d.length;b+=1){var w=d[b],D=w.handler;D.reset()}this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}},ci.prototype.isActive=function(){for(var c=0,b=this._handlers;c<b.length;c+=1){var d=b[c],w=d.handler;if(w.isActive())return!0}return!1},ci.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ci.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ci.prototype.isMoving=function(){return!!pi(this._eventsInProgress)||this.isZooming()},ci.prototype._blockedByActive=function(c,b,d){for(var w in c)if(w!==d&&(!b||b.indexOf(w)<0))return!0;return!1},ci.prototype.handleWindowEvent=function(c){this.handleEvent(c,c.type+"Window")},ci.prototype._getMapTouches=function(c){for(var b=[],d=0,w=c;d<w.length;d+=1){var D=w[d],R=D.target;this._el.contains(R)&&b.push(D)}return b},ci.prototype.handleEvent=function(c,b){if(c.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var d=c.type==="renderFrame"?void 0:c,w={needsRenderFrame:!1},D={},R={},G=c.touches?this._getMapTouches(c.touches):void 0,K=G?l.touchPos(this._el,G):l.mousePos(this._el,c),re=0,ce=this._handlers;re<ce.length;re+=1){var we=ce[re],be=we.handlerName,Re=we.handler,Ze=we.allowed;if(Re.isEnabled()){var Ge=void 0;this._blockedByActive(R,Ze,be)?Re.reset():Re[b||c.type]&&(Ge=Re[b||c.type](c,K,G),this.mergeHandlerResult(w,D,Ge,be,d),Ge&&Ge.needsRenderFrame&&this._triggerRenderFrame()),(Ge||Re.isActive())&&(R[be]=Re)}}var Oe={};for(var Ke in this._previousActiveHandlers)R[Ke]||(Oe[Ke]=d);this._previousActiveHandlers=R,(Object.keys(Oe).length||co(w))&&(this._changes.push([w,D,Oe]),this._triggerRenderFrame()),(Object.keys(R).length||co(w))&&this._map._stop(!0),this._updatingCamera=!1;var vt=w.cameraAnimation;vt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],vt(this._map))},ci.prototype.mergeHandlerResult=function(c,b,d,w,D){if(d){a.extend(c,d);var R={handlerName:w,originalEvent:d.originalEvent||D};d.zoomDelta!==void 0&&(b.zoom=R),d.panDelta!==void 0&&(b.drag=R),d.pitchDelta!==void 0&&(b.pitch=R),d.bearingDelta!==void 0&&(b.rotate=R)}},ci.prototype._applyChanges=function(){for(var c={},b={},d={},w=0,D=this._changes;w<D.length;w+=1){var R=D[w],G=R[0],K=R[1],re=R[2];G.panDelta&&(c.panDelta=(c.panDelta||new a.Point(0,0))._add(G.panDelta)),G.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+G.zoomDelta),G.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+G.bearingDelta),G.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+G.pitchDelta),G.around!==void 0&&(c.around=G.around),G.pinchAround!==void 0&&(c.pinchAround=G.pinchAround),G.noInertia&&(c.noInertia=G.noInertia),a.extend(b,K),a.extend(d,re)}this._updateMapTransform(c,b,d),this._changes=[]},ci.prototype._updateMapTransform=function(c,b,d){var w=this._map,D=w.transform;if(!co(c))return this._fireEvents(b,d,!0);var R=c.panDelta,G=c.zoomDelta,K=c.bearingDelta,re=c.pitchDelta,ce=c.around,we=c.pinchAround;we!==void 0&&(ce=we),w._stop(!0),ce=ce||w.transform.centerPoint;var be=D.pointLocation(R?ce.sub(R):ce);K&&(D.bearing+=K),re&&(D.pitch+=re),G&&(D.zoom+=G),D.setLocationAtPoint(be,ce),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(b,d,!0)},ci.prototype._fireEvents=function(c,b,d){var w=this,D=pi(this._eventsInProgress),R=pi(c),G={};for(var K in c){var re=c[K],ce=re.originalEvent;this._eventsInProgress[K]||(G[K+"start"]=ce),this._eventsInProgress[K]=c[K]}!D&&R&&this._fireEvent("movestart",R.originalEvent);for(var we in G)this._fireEvent(we,G[we]);R&&this._fireEvent("move",R.originalEvent);for(var be in c){var Re=c[be],Ze=Re.originalEvent;this._fireEvent(be,Ze)}var Ge={},Oe;for(var Ke in this._eventsInProgress){var vt=this._eventsInProgress[Ke],zt=vt.handlerName,Nt=vt.originalEvent;this._handlersById[zt].isActive()||(delete this._eventsInProgress[Ke],Oe=b[zt]||Nt,Ge[Ke+"end"]=Oe)}for(var Qt in Ge)this._fireEvent(Qt,Ge[Qt]);var rr=pi(this._eventsInProgress);if(d&&(D||R)&&!rr){this._updatingCamera=!0;var Gt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ar=function(vr){return vr!==0&&-w._bearingSnap<vr&&vr<w._bearingSnap};Gt?(ar(Gt.bearing||this._map.getBearing())&&(Gt.bearing=0),this._map.easeTo(Gt,{originalEvent:Oe})):(this._map.fire(new a.Event("moveend",{originalEvent:Oe})),ar(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ci.prototype._fireEvent=function(c,b){this._map.fire(new a.Event(c,b?{originalEvent:b}:{}))},ci.prototype._requestFrame=function(){var c=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(b){delete c._frameId,c.handleEvent(new Jo("renderFrame",{timeStamp:b})),c._applyChanges()})},ci.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var xf=function(g){function c(b,d){g.call(this),this._moving=!1,this._zooming=!1,this.transform=b,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},c.prototype.setCenter=function(d,w){return this.jumpTo({center:d},w)},c.prototype.panBy=function(d,w,D){return d=a.Point.convert(d).mult(-1),this.panTo(this.transform.center,a.extend({offset:d},w),D)},c.prototype.panTo=function(d,w,D){return this.easeTo(a.extend({center:d},w),D)},c.prototype.getZoom=function(){return this.transform.zoom},c.prototype.setZoom=function(d,w){return this.jumpTo({zoom:d},w),this},c.prototype.zoomTo=function(d,w,D){return this.easeTo(a.extend({zoom:d},w),D)},c.prototype.zoomIn=function(d,w){return this.zoomTo(this.getZoom()+1,d,w),this},c.prototype.zoomOut=function(d,w){return this.zoomTo(this.getZoom()-1,d,w),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=function(d,w){return this.jumpTo({bearing:d},w),this},c.prototype.getPadding=function(){return this.transform.padding},c.prototype.setPadding=function(d,w){return this.jumpTo({padding:d},w),this},c.prototype.rotateTo=function(d,w,D){return this.easeTo(a.extend({bearing:d},w),D)},c.prototype.resetNorth=function(d,w){return this.rotateTo(0,a.extend({duration:1e3},d),w),this},c.prototype.resetNorthPitch=function(d,w){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},d),w),this},c.prototype.snapToNorth=function(d,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,w):this},c.prototype.getPitch=function(){return this.transform.pitch},c.prototype.setPitch=function(d,w){return this.jumpTo({pitch:d},w),this},c.prototype.cameraForBounds=function(d,w){d=a.LngLatBounds.convert(d);var D=w&&w.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),D,w)},c.prototype._cameraForBoxAndBearing=function(d,w,D,R){var G={top:0,bottom:0,right:0,left:0};if(R=a.extend({padding:G,offset:[0,0],maxZoom:this.transform.maxZoom},R),typeof R.padding=="number"){var K=R.padding;R.padding={top:K,bottom:K,right:K,left:K}}R.padding=a.extend(G,R.padding);var re=this.transform,ce=re.padding,we=re.project(a.LngLat.convert(d)),be=re.project(a.LngLat.convert(w)),Re=we.rotate(-D*Math.PI/180),Ze=be.rotate(-D*Math.PI/180),Ge=new a.Point(Math.max(Re.x,Ze.x),Math.max(Re.y,Ze.y)),Oe=new a.Point(Math.min(Re.x,Ze.x),Math.min(Re.y,Ze.y)),Ke=Ge.sub(Oe),vt=(re.width-(ce.left+ce.right+R.padding.left+R.padding.right))/Ke.x,zt=(re.height-(ce.top+ce.bottom+R.padding.top+R.padding.bottom))/Ke.y;if(zt<0||vt<0){a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Nt=Math.min(re.scaleZoom(re.scale*Math.min(vt,zt)),R.maxZoom),Qt=typeof R.offset.x=="number"?new a.Point(R.offset.x,R.offset.y):a.Point.convert(R.offset),rr=(R.padding.left-R.padding.right)/2,Gt=(R.padding.top-R.padding.bottom)/2,ar=new a.Point(rr,Gt),vr=ar.rotate(D*Math.PI/180),wr=Qt.add(vr),Lr=wr.mult(re.scale/re.zoomScale(Nt)),kr=re.unproject(we.add(be).div(2).sub(Lr));return{center:kr,zoom:Nt,bearing:D}},c.prototype.fitBounds=function(d,w,D){return this._fitInternal(this.cameraForBounds(d,w),w,D)},c.prototype.fitScreenCoordinates=function(d,w,D,R,G){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(d)),this.transform.pointLocation(a.Point.convert(w)),D,R),R,G)},c.prototype._fitInternal=function(d,w,D){return d?(w=a.extend(d,w),delete w.padding,w.linear?this.easeTo(w,D):this.flyTo(w,D)):this},c.prototype.jumpTo=function(d,w){this.stop();var D=this.transform,R=!1,G=!1,K=!1;return"zoom"in d&&D.zoom!==+d.zoom&&(R=!0,D.zoom=+d.zoom),d.center!==void 0&&(D.center=a.LngLat.convert(d.center)),"bearing"in d&&D.bearing!==+d.bearing&&(G=!0,D.bearing=+d.bearing),"pitch"in d&&D.pitch!==+d.pitch&&(K=!0,D.pitch=+d.pitch),d.padding!=null&&!D.isPaddingEqual(d.padding)&&(D.padding=d.padding),this.fire(new a.Event("movestart",w)).fire(new a.Event("move",w)),R&&this.fire(new a.Event("zoomstart",w)).fire(new a.Event("zoom",w)).fire(new a.Event("zoomend",w)),G&&this.fire(new a.Event("rotatestart",w)).fire(new a.Event("rotate",w)).fire(new a.Event("rotateend",w)),K&&this.fire(new a.Event("pitchstart",w)).fire(new a.Event("pitch",w)).fire(new a.Event("pitchend",w)),this.fire(new a.Event("moveend",w))},c.prototype.easeTo=function(d,w){var D=this;this._stop(!1,d.easeId),d=a.extend({offset:[0,0],duration:500,easing:a.ease},d),(d.animate===!1||!d.essential&&a.browser.prefersReducedMotion)&&(d.duration=0);var R=this.transform,G=this.getZoom(),K=this.getBearing(),re=this.getPitch(),ce=this.getPadding(),we="zoom"in d?+d.zoom:G,be="bearing"in d?this._normalizeBearing(d.bearing,K):K,Re="pitch"in d?+d.pitch:re,Ze="padding"in d?d.padding:R.padding,Ge=a.Point.convert(d.offset),Oe=R.centerPoint.add(Ge),Ke=R.pointLocation(Oe),vt=a.LngLat.convert(d.center||Ke);this._normalizeCenter(vt);var zt=R.project(Ke),Nt=R.project(vt).sub(zt),Qt=R.zoomScale(we-G),rr,Gt;d.around&&(rr=a.LngLat.convert(d.around),Gt=R.locationPoint(rr));var ar={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==G,this._rotating=this._rotating||K!==be,this._pitching=this._pitching||Re!==re,this._padding=!R.isPaddingEqual(Ze),this._easeId=d.easeId,this._prepareEase(w,d.noMoveStart,ar),this._ease(function(vr){if(D._zooming&&(R.zoom=a.number(G,we,vr)),D._rotating&&(R.bearing=a.number(K,be,vr)),D._pitching&&(R.pitch=a.number(re,Re,vr)),D._padding&&(R.interpolatePadding(ce,Ze,vr),Oe=R.centerPoint.add(Ge)),rr)R.setLocationAtPoint(rr,Gt);else{var wr=R.zoomScale(R.zoom-G),Lr=we>G?Math.min(2,Qt):Math.max(.5,Qt),kr=Math.pow(Lr,1-vr),Wr=R.unproject(zt.add(Nt.mult(vr*kr)).mult(wr));R.setLocationAtPoint(R.renderWorldCopies?Wr.wrap():Wr,Oe)}D._fireMoveEvents(w)},function(vr){D._afterEase(w,vr)},d),this},c.prototype._prepareEase=function(d,w,D){D===void 0&&(D={}),this._moving=!0,!w&&!D.moving&&this.fire(new a.Event("movestart",d)),this._zooming&&!D.zooming&&this.fire(new a.Event("zoomstart",d)),this._rotating&&!D.rotating&&this.fire(new a.Event("rotatestart",d)),this._pitching&&!D.pitching&&this.fire(new a.Event("pitchstart",d))},c.prototype._fireMoveEvents=function(d){this.fire(new a.Event("move",d)),this._zooming&&this.fire(new a.Event("zoom",d)),this._rotating&&this.fire(new a.Event("rotate",d)),this._pitching&&this.fire(new a.Event("pitch",d))},c.prototype._afterEase=function(d,w){if(!(this._easeId&&w&&this._easeId===w)){delete this._easeId;var D=this._zooming,R=this._rotating,G=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new a.Event("zoomend",d)),R&&this.fire(new a.Event("rotateend",d)),G&&this.fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))}},c.prototype.flyTo=function(d,w){var D=this;if(!d.essential&&a.browser.prefersReducedMotion){var R=a.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(R,w)}this.stop(),d=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},d);var G=this.transform,K=this.getZoom(),re=this.getBearing(),ce=this.getPitch(),we=this.getPadding(),be="zoom"in d?a.clamp(+d.zoom,G.minZoom,G.maxZoom):K,Re="bearing"in d?this._normalizeBearing(d.bearing,re):re,Ze="pitch"in d?+d.pitch:ce,Ge="padding"in d?d.padding:G.padding,Oe=G.zoomScale(be-K),Ke=a.Point.convert(d.offset),vt=G.centerPoint.add(Ke),zt=G.pointLocation(vt),Nt=a.LngLat.convert(d.center||zt);this._normalizeCenter(Nt);var Qt=G.project(zt),rr=G.project(Nt).sub(Qt),Gt=d.curve,ar=Math.max(G.width,G.height),vr=ar/Oe,wr=rr.mag();if("minZoom"in d){var Lr=a.clamp(Math.min(d.minZoom,K,be),G.minZoom,G.maxZoom),kr=ar/G.zoomScale(Lr-K);Gt=Math.sqrt(kr/wr*2)}var Wr=Gt*Gt;function Ra(ia){var Ba=(vr*vr-ar*ar+(ia?-1:1)*Wr*Wr*wr*wr)/(2*(ia?vr:ar)*Wr*wr);return Math.log(Math.sqrt(Ba*Ba+1)-Ba)}function _a(ia){return(Math.exp(ia)-Math.exp(-ia))/2}function Nr(ia){return(Math.exp(ia)+Math.exp(-ia))/2}function Ma(ia){return _a(ia)/Nr(ia)}var aa=Ra(0),Za=function(ia){return Nr(aa)/Nr(aa+Gt*ia)},Ua=function(ia){return ar*((Nr(aa)*Ma(aa+Gt*ia)-_a(aa))/Wr)/wr},Mi=(Ra(1)-aa)/Gt;if(Math.abs(wr)<1e-6||!isFinite(Mi)){if(Math.abs(ar-vr)<1e-6)return this.easeTo(d,w);var La=vr<ar?-1:1;Mi=Math.abs(Math.log(vr/ar))/Gt,Ua=function(){return 0},Za=function(ia){return Math.exp(La*Gt*ia)}}if("duration"in d)d.duration=+d.duration;else{var mi="screenSpeed"in d?+d.screenSpeed/Gt:+d.speed;d.duration=1e3*Mi/mi}return d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=re!==Re,this._pitching=Ze!==ce,this._padding=!G.isPaddingEqual(Ge),this._prepareEase(w,!1),this._ease(function(ia){var Ba=ia*Mi,tn=1/Za(Ba);G.zoom=ia===1?be:K+G.scaleZoom(tn),D._rotating&&(G.bearing=a.number(re,Re,ia)),D._pitching&&(G.pitch=a.number(ce,Ze,ia)),D._padding&&(G.interpolatePadding(we,Ge,ia),vt=G.centerPoint.add(Ke));var Nn=ia===1?Nt:G.unproject(Qt.add(rr.mult(Ua(Ba))).mult(tn));G.setLocationAtPoint(G.renderWorldCopies?Nn.wrap():Nn,vt),D._fireMoveEvents(w)},function(){return D._afterEase(w)},d),this},c.prototype.isEasing=function(){return!!this._easeFrameId},c.prototype.stop=function(){return this._stop()},c.prototype._stop=function(d,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,w)}if(!d){var R=this.handlers;R&&R.stop(!1)}return this},c.prototype._ease=function(d,w,D){D.animate===!1||D.duration===0?(d(1),w()):(this._easeStart=a.browser.now(),this._easeOptions=D,this._onEaseFrame=d,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var d=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(d,w){d=a.wrap(d,-180,180);var D=Math.abs(d-w);return Math.abs(d-360-w)<D&&(d-=360),Math.abs(d+360-w)<D&&(d+=360),d},c.prototype._normalizeCenter=function(d){var w=this.transform;if(!(!w.renderWorldCopies||w.lngRange)){var D=d.lng-w.center.lng;d.lng+=D>180?-360:D<-180?360:0}},c}(a.Evented),Ta=function(c){c===void 0&&(c={}),this.options=c,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ta.prototype.getDefaultPosition=function(){return"bottom-right"},Ta.prototype.onAdd=function(c){var b=this.options&&this.options.compact;return this._map=c,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=l.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=l.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),b&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),b===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ta.prototype.onRemove=function(){l.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ta.prototype._setElementTitle=function(c,b){var d=this._map._getUIString("AttributionControl."+b);c.title=d,c.setAttribute("aria-label",d)},Ta.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ta.prototype._updateEditLink=function(){var c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));var b=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(c){var d=b.reduce(function(w,D,R){return D.value&&(w+=D.key+"="+D.value+(R<b.length-1?"&":"")),w},"?");c.href=a.config.FEEDBACK_URL+"/"+d+(this._map._hash?this._map._hash.getHashString(!0):""),c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}},Ta.prototype._updateData=function(c){c&&(c.sourceDataType==="metadata"||c.sourceDataType==="visibility"||c.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Ta.prototype._updateAttributions=function(){if(this._map.style){var c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(function(K){return typeof K!="string"?"":K})):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){var b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}var d=this._map.style.sourceCaches;for(var w in d){var D=d[w];if(D.used){var R=D.getSource();R.attribution&&c.indexOf(R.attribution)<0&&c.push(R.attribution)}}c.sort(function(K,re){return K.length-re.length}),c=c.filter(function(K,re){for(var ce=re+1;ce<c.length;ce++)if(c[ce].indexOf(K)>=0)return!1;return!0});var G=c.join(" | ");G!==this._attribHTML&&(this._attribHTML=G,c.length?(this._innerContainer.innerHTML=G,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ta.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ui=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ui.prototype.onAdd=function(c){this._map=c,this._container=l.create("div","mapboxgl-ctrl");var b=l.create("a","mapboxgl-ctrl-logo");return b.target="_blank",b.rel="noopener nofollow",b.href="https://www.mapbox.com/",b.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),b.setAttribute("rel","noopener nofollow"),this._container.appendChild(b),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ui.prototype.onRemove=function(){l.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ui.prototype.getDefaultPosition=function(){return"bottom-left"},ui.prototype._updateLogo=function(c){(!c||c.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},ui.prototype._logoRequired=function(){if(this._map.style){var c=this._map.style.sourceCaches;for(var b in c){var d=c[b].getSource();if(d.mapbox_logo)return!0}return!1}},ui.prototype._updateCompact=function(){var c=this._container.children;if(c.length){var b=c[0];this._map.getCanvasContainer().offsetWidth<250?b.classList.add("mapboxgl-compact"):b.classList.remove("mapboxgl-compact")}};var Bl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Bl.prototype.add=function(c){var b=++this._id,d=this._queue;return d.push({callback:c,id:b,cancelled:!1}),b},Bl.prototype.remove=function(c){for(var b=this._currentlyRunning,d=b?this._queue.concat(b):this._queue,w=0,D=d;w<D.length;w+=1){var R=D[w];if(R.id===c){R.cancelled=!0;return}}},Bl.prototype.run=function(c){c===void 0&&(c=0);var b=this._currentlyRunning=this._queue;this._queue=[];for(var d=0,w=b;d<w.length;d+=1){var D=w[d];if(!D.cancelled&&(D.callback(c),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Bl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Kv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},uc=a.window.HTMLImageElement,sy=a.window.HTMLElement,bf=a.window.ImageBitmap,vh=-2,dh=22,Lo=0,wf=60,ly={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:vh,maxZoom:dh,minPitch:Lo,maxPitch:wf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},uy=function(g){function c(d){var w=this;if(d=a.extend({},ly,d),d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<Lo)throw new Error("minPitch must be greater than or equal to "+Lo);if(d.maxPitch!=null&&d.maxPitch>wf)throw new Error("maxPitch must be less than or equal to "+wf);var D=new $a(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(g.call(this,D,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new Bl,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Kv,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else if(d.container instanceof sy)this._container=d.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return w._update(!1)}),this.on("moveend",function(){return w._update(!1)}),this.on("zoom",function(){return w._update(!0)}),typeof a.window!="undefined"&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ci(this,d);var R=typeof d.hash=="string"&&d.hash||void 0;this._hash=d.hash&&new Fl(R).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Ta({customAttribution:d.customAttribution})),this.addControl(new ui,d.logoPosition),this.on("style.load",function(){w.transform.unmodified&&w.jumpTo(w.style.stylesheet)}),this.on("data",function(G){w._update(G.dataType==="style"),w.fire(new a.Event(G.dataType+"data",G))}),this.on("dataloading",function(G){w.fire(new a.Event(G.dataType+"dataloading",G))})}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var b={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return c.prototype._getMapId=function(){return this._mapId},c.prototype.addControl=function(w,D){if(D===void 0&&(w.getDefaultPosition?D=w.getDefaultPosition():D="top-right"),!w||!w.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var R=w.onAdd(this);this._controls.push(w);var G=this._controlPositions[D];return D.indexOf("bottom")!==-1?G.insertBefore(R,G.firstChild):G.appendChild(R),this},c.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var D=this._controls.indexOf(w);return D>-1&&this._controls.splice(D,1),w.onRemove(this),this},c.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},c.prototype.resize=function(w){var D=this._containerDimensions(),R=D[0],G=D[1];this._resizeCanvas(R,G),this.transform.resize(R,G),this.painter.resize(R,G);var K=!this._moving;return K&&(this.stop(),this.fire(new a.Event("movestart",w)).fire(new a.Event("move",w))),this.fire(new a.Event("resize",w)),K&&this.fire(new a.Event("moveend",w)),this},c.prototype.getBounds=function(){return this.transform.getBounds()},c.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},c.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(a.LngLatBounds.convert(w)),this._update()},c.prototype.setMinZoom=function(w){if(w=w==null?vh:w,w>=vh&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between "+vh+" and the current maxZoom, inclusive")},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(w){if(w=w==null?dh:w,w>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.setMinPitch=function(w){if(w=w==null?Lo:w,w<Lo)throw new Error("minPitch must be greater than or equal to "+Lo);if(w>=Lo&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between "+Lo+" and the current maxPitch, inclusive")},c.prototype.getMinPitch=function(){return this.transform.minPitch},c.prototype.setMaxPitch=function(w){if(w=w==null?wf:w,w>wf)throw new Error("maxPitch must be less than or equal to "+wf);if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},c.prototype.getMaxPitch=function(){return this.transform.maxPitch},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},c.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},c.prototype.project=function(w){return this.transform.locationPoint(a.LngLat.convert(w))},c.prototype.unproject=function(w){return this.transform.pointLocation(a.Point.convert(w))},c.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},c.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},c.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},c.prototype._createDelegatedListener=function(w,D,R){var G=this,K;if(w==="mouseenter"||w==="mouseover"){var re=!1,ce=function(Oe){var Ke=G.getLayer(D)?G.queryRenderedFeatures(Oe.point,{layers:[D]}):[];Ke.length?re||(re=!0,R.call(G,new S(w,G,Oe.originalEvent,{features:Ke}))):re=!1},we=function(){re=!1};return{layer:D,listener:R,delegates:{mousemove:ce,mouseout:we}}}else if(w==="mouseleave"||w==="mouseout"){var be=!1,Re=function(Oe){var Ke=G.getLayer(D)?G.queryRenderedFeatures(Oe.point,{layers:[D]}):[];Ke.length?be=!0:be&&(be=!1,R.call(G,new S(w,G,Oe.originalEvent)))},Ze=function(Oe){be&&(be=!1,R.call(G,new S(w,G,Oe.originalEvent)))};return{layer:D,listener:R,delegates:{mousemove:Re,mouseout:Ze}}}else{var Ge=function(Oe){var Ke=G.getLayer(D)?G.queryRenderedFeatures(Oe.point,{layers:[D]}):[];Ke.length&&(Oe.features=Ke,R.call(G,Oe),delete Oe.features)};return{layer:D,listener:R,delegates:(K={},K[w]=Ge,K)}}},c.prototype.on=function(w,D,R){if(R===void 0)return g.prototype.on.call(this,w,D);var G=this._createDelegatedListener(w,D,R);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(G);for(var K in G.delegates)this.on(K,G.delegates[K]);return this},c.prototype.once=function(w,D,R){if(R===void 0)return g.prototype.once.call(this,w,D);var G=this._createDelegatedListener(w,D,R);for(var K in G.delegates)this.once(K,G.delegates[K]);return this},c.prototype.off=function(w,D,R){var G=this;if(R===void 0)return g.prototype.off.call(this,w,D);var K=function(re){for(var ce=re[w],we=0;we<ce.length;we++){var be=ce[we];if(be.layer===D&&be.listener===R){for(var Re in be.delegates)G.off(Re,be.delegates[Re]);return ce.splice(we,1),G}}};return this._delegatedListeners&&this._delegatedListeners[w]&&K(this._delegatedListeners),this},c.prototype.queryRenderedFeatures=function(w,D){if(!this.style)return[];D===void 0&&w!==void 0&&!(w instanceof a.Point)&&!Array.isArray(w)&&(D=w,w=void 0),D=D||{},w=w||[[0,0],[this.transform.width,this.transform.height]];var R;if(w instanceof a.Point||typeof w[0]=="number")R=[a.Point.convert(w)];else{var G=a.Point.convert(w[0]),K=a.Point.convert(w[1]);R=[G,new a.Point(K.x,G.y),K,new a.Point(G.x,K.y),G]}return this.style.queryRenderedFeatures(R,D,this.transform)},c.prototype.querySourceFeatures=function(w,D){return this.style.querySourceFeatures(w,D)},c.prototype.setStyle=function(w,D){return D=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},D),D.diff!==!1&&D.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,D),this):(this._localIdeographFontFamily=D.localIdeographFontFamily,this._updateStyle(w,D))},c.prototype._getUIString=function(w){var D=this._locale[w];if(D==null)throw new Error("Missing UI string '"+w+"'");return D},c.prototype._updateStyle=function(w,D){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),w)this.style=new As(this,D||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w):this.style.loadJSON(w),this},c.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new As(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},c.prototype._diffStyle=function(w,D){var R=this;if(typeof w=="string"){var G=this._requestManager.normalizeStyleURL(w),K=this._requestManager.transformRequest(G,a.ResourceType.Style);a.getJSON(K,function(re,ce){re?R.fire(new a.ErrorEvent(re)):ce&&R._updateDiff(ce,D)})}else typeof w=="object"&&this._updateDiff(w,D)},c.prototype._updateDiff=function(w,D){try{this.style.setState(w)&&this._update(!0)}catch(R){a.warnOnce("Unable to perform style diff: "+(R.message||R.error||R)+".  Rebuilding the style from scratch."),this._updateStyle(w,D)}},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(w,D){return this._lazyInitEmptyStyle(),this.style.addSource(w,D),this._update(!0)},c.prototype.isSourceLoaded=function(w){var D=this.style&&this.style.sourceCaches[w];if(D===void 0){this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+w+"'")));return}return D.loaded()},c.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var D in w){var R=w[D],G=R._tiles;for(var K in G){var re=G[K];if(!(re.state==="loaded"||re.state==="errored"))return!1}}return!0},c.prototype.addSourceType=function(w,D,R){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,D,R)},c.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},c.prototype.getSource=function(w){return this.style.getSource(w)},c.prototype.addImage=function(w,D,R){R===void 0&&(R={});var G=R.pixelRatio;G===void 0&&(G=1);var K=R.sdf;K===void 0&&(K=!1);var re=R.stretchX,ce=R.stretchY,we=R.content;this._lazyInitEmptyStyle();var be=0;if(D instanceof uc||bf&&D instanceof bf){var Re=a.browser.getImageData(D),Ze=Re.width,Ge=Re.height,Oe=Re.data;this.style.addImage(w,{data:new a.RGBAImage({width:Ze,height:Ge},Oe),pixelRatio:G,stretchX:re,stretchY:ce,content:we,sdf:K,version:be})}else{if(D.width===void 0||D.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ke=D.width,vt=D.height,zt=D.data,Nt=D;this.style.addImage(w,{data:new a.RGBAImage({width:Ke,height:vt},new Uint8Array(zt)),pixelRatio:G,stretchX:re,stretchY:ce,content:we,sdf:K,version:be,userImage:Nt}),Nt.onAdd&&Nt.onAdd(this,w)}},c.prototype.updateImage=function(w,D){var R=this.style.getImage(w);if(!R)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var G=D instanceof uc||bf&&D instanceof bf?a.browser.getImageData(D):D,K=G.width,re=G.height,ce=G.data;if(K===void 0||re===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(K!==R.data.width||re!==R.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var we=!(D instanceof uc||bf&&D instanceof bf);R.data.replace(ce,we),this.style.updateImage(w,R)},c.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},c.prototype.removeImage=function(w){this.style.removeImage(w)},c.prototype.loadImage=function(w,D){a.getImage(this._requestManager.transformRequest(w,a.ResourceType.Image),D)},c.prototype.listImages=function(){return this.style.listImages()},c.prototype.addLayer=function(w,D){return this._lazyInitEmptyStyle(),this.style.addLayer(w,D),this._update(!0)},c.prototype.moveLayer=function(w,D){return this.style.moveLayer(w,D),this._update(!0)},c.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},c.prototype.getLayer=function(w){return this.style.getLayer(w)},c.prototype.setLayerZoomRange=function(w,D,R){return this.style.setLayerZoomRange(w,D,R),this._update(!0)},c.prototype.setFilter=function(w,D,R){return R===void 0&&(R={}),this.style.setFilter(w,D,R),this._update(!0)},c.prototype.getFilter=function(w){return this.style.getFilter(w)},c.prototype.setPaintProperty=function(w,D,R,G){return G===void 0&&(G={}),this.style.setPaintProperty(w,D,R,G),this._update(!0)},c.prototype.getPaintProperty=function(w,D){return this.style.getPaintProperty(w,D)},c.prototype.setLayoutProperty=function(w,D,R,G){return G===void 0&&(G={}),this.style.setLayoutProperty(w,D,R,G),this._update(!0)},c.prototype.getLayoutProperty=function(w,D){return this.style.getLayoutProperty(w,D)},c.prototype.setLight=function(w,D){return D===void 0&&(D={}),this._lazyInitEmptyStyle(),this.style.setLight(w,D),this._update(!0)},c.prototype.getLight=function(){return this.style.getLight()},c.prototype.setFeatureState=function(w,D){return this.style.setFeatureState(w,D),this._update()},c.prototype.removeFeatureState=function(w,D){return this.style.removeFeatureState(w,D),this._update()},c.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var w=0,D=0;return this._container&&(w=this._container.clientWidth||400,D=this._container.clientHeight||300),[w,D]},c.prototype._detectMissingCSS=function(){var w=a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");w!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},c.prototype._setupContainer=function(){var w=this._container;w.classList.add("mapboxgl-map");var D=this._missingCSSCanary=l.create("div","mapboxgl-canary",w);D.style.visibility="hidden",this._detectMissingCSS();var R=this._canvasContainer=l.create("div","mapboxgl-canvas-container",w);this._interactive&&R.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",R),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var K=this._controlContainer=l.create("div","mapboxgl-control-container",w),re=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ce){re[ce]=l.create("div","mapboxgl-ctrl-"+ce,K)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},c.prototype._resizeCanvas=function(w,D){var R=a.browser.devicePixelRatio||1;this._canvas.width=R*w,this._canvas.height=R*D,this._canvas.style.width=w+"px",this._canvas.style.height=D+"px"},c.prototype._setupPainter=function(){var w=a.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),D=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);if(!D){this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new Li(D,this.transform),a.webpSupported.testSupport(D)},c.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:w}))},c.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:w}))},c.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},c.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},c.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},c.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},c.prototype._render=function(w){var D=this,R,G=0,K=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(R=K.createQueryEXT(),K.beginQueryEXT(K.TIME_ELAPSED_EXT,R),G=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var re=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ce=this.transform.zoom,we=a.browser.now();this.style.zoomHistory.update(ce,we);var be=new a.EvaluationParameters(ce,{now:we,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Re=be.crossFadingFactor();(Re!==1||Re!==this._crossFadingFactor)&&(re=!0,this._crossFadingFactor=Re),this.style.update(be)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||re)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ze=a.browser.now()-G;K.endQueryEXT(K.TIME_ELAPSED_EXT,R),setTimeout(function(){var Ke=K.getQueryObjectEXT(R,K.QUERY_RESULT_EXT)/1e6;K.deleteQueryEXT(R),D.fire(new a.Event("gpu-timing-frame",{cpuTime:Ze,gpuTime:Ke}))},50)}if(this.listens("gpu-timing-layer")){var Ge=this.painter.collectGpuTimers();setTimeout(function(){var Ke=D.painter.queryGpuTimers(Ge);D.fire(new a.Event("gpu-timing-layer",{layerTimes:Ke}))},50)}var Oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return Oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),this._loaded&&!this._fullyLoaded&&!Oe&&(this._fullyLoaded=!0),this}},c.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,D=this._controls;w<D.length;w+=1){var R=D[w];R.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof a.window!="undefined"&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext&&G.loseContext(),Qv(this._canvasContainer),Qv(this._controlContainer),Qv(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},c.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(D){w._frame=null,w._render(D)}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},b.showTileBoundaries.get=function(){return!!this._showTileBoundaries},b.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},b.showPadding.get=function(){return!!this._showPadding},b.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},b.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},b.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},b.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},b.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},b.repaint.get=function(){return!!this._repaint},b.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},b.vertices.get=function(){return!!this._vertices},b.vertices.set=function(d){this._vertices=d,this._update()},c.prototype._setCacheLimits=function(w,D){a.setCacheLimits(w,D)},b.version.get=function(){return a.version},Object.defineProperties(c.prototype,b),c}(xf);function Qv(g){g.parentNode&&g.parentNode.removeChild(g)}var Zp={showCompass:!0,showZoom:!0,visualizePitch:!1},ku=function(c){var b=this;this.options=a.extend({},Zp,c),this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(d){return d.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(d){return b._map.zoomIn({},{originalEvent:d})}),l.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(d){return b._map.zoomOut({},{originalEvent:d})}),l.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(d){b.options.visualizePitch?b._map.resetNorthPitch({},{originalEvent:d}):b._map.resetNorth({},{originalEvent:d})}),this._compassIcon=l.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ku.prototype._updateZoomButtons=function(){var c=this._map.getZoom(),b=c===this._map.getMaxZoom(),d=c===this._map.getMinZoom();this._zoomInButton.disabled=b,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",b.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},ku.prototype._rotateCompassArrow=function(){var c=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=c},ku.prototype.onAdd=function(c){return this._map=c,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ko(this._map,this._compass,this.options.visualizePitch)),this._container},ku.prototype.onRemove=function(){l.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ku.prototype._createButton=function(c,b){var d=l.create("button",c,this._container);return d.type="button",d.addEventListener("click",b),d},ku.prototype._setButtonTitle=function(c,b){var d=this._map._getUIString("NavigationControl."+b);c.title=d,c.setAttribute("aria-label",d)};var Ko=function(c,b,d){d===void 0&&(d=!1),this._clickTolerance=10,this.element=b,this.mouseRotate=new Vt({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,d&&(this.mousePitch=new or({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener(b,"mousedown",this.mousedown),l.addEventListener(b,"touchstart",this.touchstart,{passive:!1}),l.addEventListener(b,"touchmove",this.touchmove),l.addEventListener(b,"touchend",this.touchend),l.addEventListener(b,"touchcancel",this.reset)};Ko.prototype.down=function(c,b){this.mouseRotate.mousedown(c,b),this.mousePitch&&this.mousePitch.mousedown(c,b),l.disableDrag()},Ko.prototype.move=function(c,b){var d=this.map,w=this.mouseRotate.mousemoveWindow(c,b);if(w&&w.bearingDelta&&d.setBearing(d.getBearing()+w.bearingDelta),this.mousePitch){var D=this.mousePitch.mousemoveWindow(c,b);D&&D.pitchDelta&&d.setPitch(d.getPitch()+D.pitchDelta)}},Ko.prototype.off=function(){var c=this.element;l.removeEventListener(c,"mousedown",this.mousedown),l.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),l.removeEventListener(c,"touchmove",this.touchmove),l.removeEventListener(c,"touchend",this.touchend),l.removeEventListener(c,"touchcancel",this.reset),this.offTemp()},Ko.prototype.offTemp=function(){l.enableDrag(),l.removeEventListener(a.window,"mousemove",this.mousemove),l.removeEventListener(a.window,"mouseup",this.mouseup)},Ko.prototype.mousedown=function(c){this.down(a.extend({},c,{ctrlKey:!0,preventDefault:function(){return c.preventDefault()}}),l.mousePos(this.element,c)),l.addEventListener(a.window,"mousemove",this.mousemove),l.addEventListener(a.window,"mouseup",this.mouseup)},Ko.prototype.mousemove=function(c){this.move(c,l.mousePos(this.element,c))},Ko.prototype.mouseup=function(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()},Ko.prototype.touchstart=function(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=l.touchPos(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return c.preventDefault()}},this._startPos))},Ko.prototype.touchmove=function(c){c.targetTouches.length!==1?this.reset():(this._lastPos=l.touchPos(this.element,c.targetTouches)[0],this.move({preventDefault:function(){return c.preventDefault()}},this._lastPos))},Ko.prototype.touchend=function(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ko.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Cu(g,c,b){if(g=new a.LngLat(g.lng,g.lat),c){var d=new a.LngLat(g.lng-360,g.lat),w=new a.LngLat(g.lng+360,g.lat),D=b.locationPoint(g).distSqr(c);b.locationPoint(d).distSqr(c)<D?g=d:b.locationPoint(w).distSqr(c)<D&&(g=w)}for(;Math.abs(g.lng-b.center.lng)>180;){var R=b.locationPoint(g);if(R.x>=0&&R.y>=0&&R.x<=b.width&&R.y<=b.height)break;g.lng>b.center.lng?g.lng-=360:g.lng+=360}return g}var $v={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yp(g,c,b){var d=g.classList;for(var w in $v)d.remove("mapboxgl-"+b+"-anchor-"+w);d.add("mapboxgl-"+b+"-anchor-"+c)}var ph=function(g){function c(b,d){if(g.call(this),(b instanceof a.window.HTMLElement||d)&&(b=a.extend({element:b},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=b&&b.anchor||"center",this._color=b&&b.color||"#3FB1CE",this._scale=b&&b.scale||1,this._draggable=b&&b.draggable||!1,this._clickTolerance=b&&b.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=b&&b.rotation||0,this._rotationAlignment=b&&b.rotationAlignment||"auto",this._pitchAlignment=b&&b.pitchAlignment&&b.pitchAlignment!=="auto"?b.pitchAlignment:this._rotationAlignment,!b||!b.element){this._defaultMarker=!0,this._element=l.create("div"),this._element.setAttribute("aria-label","Map marker");var w=l.createNS("http://www.w3.org/2000/svg","svg"),D=41,R=27;w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height",D+"px"),w.setAttributeNS(null,"width",R+"px"),w.setAttributeNS(null,"viewBox","0 0 "+R+" "+D);var G=l.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var K=l.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");var re=l.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(3.0, 29.0)"),re.setAttributeNS(null,"fill","#000000");for(var ce=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],we=0,be=ce;we<be.length;we+=1){var Re=be[we],Ze=l.createNS("http://www.w3.org/2000/svg","ellipse");Ze.setAttributeNS(null,"opacity","0.04"),Ze.setAttributeNS(null,"cx","10.5"),Ze.setAttributeNS(null,"cy","5.80029008"),Ze.setAttributeNS(null,"rx",Re.rx),Ze.setAttributeNS(null,"ry",Re.ry),re.appendChild(Ze)}var Ge=l.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"fill",this._color);var Oe=l.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ge.appendChild(Oe);var Ke=l.createNS("http://www.w3.org/2000/svg","g");Ke.setAttributeNS(null,"opacity","0.25"),Ke.setAttributeNS(null,"fill","#000000");var vt=l.createNS("http://www.w3.org/2000/svg","path");vt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ke.appendChild(vt);var zt=l.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),zt.setAttributeNS(null,"fill","#FFFFFF");var Nt=l.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Qt=l.createNS("http://www.w3.org/2000/svg","circle");Qt.setAttributeNS(null,"fill","#000000"),Qt.setAttributeNS(null,"opacity","0.25"),Qt.setAttributeNS(null,"cx","5.5"),Qt.setAttributeNS(null,"cy","5.5"),Qt.setAttributeNS(null,"r","5.4999962");var rr=l.createNS("http://www.w3.org/2000/svg","circle");rr.setAttributeNS(null,"fill","#FFFFFF"),rr.setAttributeNS(null,"cx","5.5"),rr.setAttributeNS(null,"cy","5.5"),rr.setAttributeNS(null,"r","5.4999962"),Nt.appendChild(Qt),Nt.appendChild(rr),K.appendChild(re),K.appendChild(Ge),K.appendChild(Ke),K.appendChild(zt),K.appendChild(Nt),w.appendChild(K),w.setAttributeNS(null,"height",D*this._scale+"px"),w.setAttributeNS(null,"width",R*this._scale+"px"),this._element.appendChild(w),this._offset=a.Point.convert(b&&b.offset||[0,-14])}else this._element=b.element,this._offset=a.Point.convert(b&&b.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Gt){Gt.preventDefault()}),this._element.addEventListener("mousedown",function(Gt){Gt.preventDefault()}),Yp(this._element,this._anchor,"marker"),this._popup=null}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.addTo=function(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},c.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),l.remove(this._element),this._popup&&this._popup.remove(),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(d){return this._lngLat=a.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},c.prototype.getElement=function(){return this._element},c.prototype.setPopup=function(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){var w=38.1,D=13.5,R=Math.sqrt(Math.pow(D,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-w],"bottom-left":[R,(w-D+R)*-1],"bottom-right":[-R,(w-D+R)*-1],left:[D,(w-D)*-1],right:[-D,(w-D)*-1]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},c.prototype._onKeyPress=function(d){var w=d.code,D=d.charCode||d.keyCode;(w==="Space"||w==="Enter"||D===32||D===13)&&this.togglePopup()},c.prototype._onMapClick=function(d){var w=d.originalEvent.target,D=this._element;this._popup&&(w===D||D.contains(w))&&this.togglePopup()},c.prototype.getPopup=function(){return this._popup},c.prototype.togglePopup=function(){var d=this._popup;if(d)d.isOpen()?d.remove():d.addTo(this._map);else return this;return this},c.prototype._update=function(d){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D="rotateX("+this._map.getPitch()+"deg)"),(!d||d.type==="moveend")&&(this._pos=this._pos.round()),l.setTransform(this._element,$v[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+D+" "+w)}},c.prototype.getOffset=function(){return this._offset},c.prototype.setOffset=function(d){return this._offset=a.Point.convert(d),this._update(),this},c.prototype._onMove=function(d){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},c.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},c.prototype._addDragHandler=function(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},c.prototype.setDraggable=function(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},c.prototype.isDraggable=function(){return this._draggable},c.prototype.setRotation=function(d){return this._rotation=d||0,this._update(),this},c.prototype.getRotation=function(){return this._rotation},c.prototype.setRotationAlignment=function(d){return this._rotationAlignment=d||"auto",this._update(),this},c.prototype.getRotationAlignment=function(){return this._rotationAlignment},c.prototype.setPitchAlignment=function(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this},c.prototype.getPitchAlignment=function(){return this._pitchAlignment},c}(a.Evented),fy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Tf;function ed(g){Tf!==void 0?g(Tf):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(c){Tf=c.state!=="denied",g(Tf)}):(Tf=!!a.window.navigator.geolocation,g(Tf))}var mh=0,fc=!1,k1=function(g){function c(b){g.call(this),this.options=a.extend({},fy,b),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(d){return this._map=d,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ed(this._setupUI),this._container},c.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),l.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,mh=0,fc=!1},c.prototype._isOutOfMapMaxBounds=function(d){var w=this._map.getMaxBounds(),D=d.coords;return w&&(D.longitude<w.getWest()||D.longitude>w.getEast()||D.latitude<w.getSouth()||D.latitude>w.getNorth())},c.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},c.prototype._onSuccess=function(d){if(this._map){if(this._isOutOfMapMaxBounds(d)){this._setErrorState(),this.fire(new a.Event("outofmaxbounds",d)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",d)),this._finish()}},c.prototype._updateCamera=function(d){var w=new a.LngLat(d.coords.longitude,d.coords.latitude),D=d.coords.accuracy,R=this._map.getBearing(),G=a.extend({bearing:R},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(D),G,{geolocateSource:!0})},c.prototype._updateMarker=function(d){if(d){var w=new a.LngLat(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},c.prototype._updateCircleRadius=function(){var d=this._map._container.clientHeight/2,w=this._map.unproject([0,d]),D=this._map.unproject([1,d]),R=w.distanceTo(D),G=Math.ceil(2*this._accuracy/R);this._circleElement.style.width=G+"px",this._circleElement.style.height=G+"px"},c.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},c.prototype._onError=function(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&fc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",d)),this._finish()}},c.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},c.prototype._setupUI=function(d){var w=this;if(this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this._geolocateButton=l.create("button","mapboxgl-ctrl-geolocate",this._container),l.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",d===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D)}else{var R=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=R,this._geolocateButton.setAttribute("aria-label",R)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=l.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ph(this._dotElement),this._circleElement=l.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ph({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(G){var K=G.originalEvent&&G.originalEvent.type==="resize";!G.geolocateSource&&w._watchState==="ACTIVE_LOCK"&&!K&&(w._watchState="BACKGROUND",w._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),w.fire(new a.Event("trackuserlocationend")))})},c.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":mh--,fc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),mh++;var d;mh>1?(d={maximumAge:6e5,timeout:0},fc=!0):(d=this.options.positionOptions,fc=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,d)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},c.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},c}(a.Evented),cy={maxWidth:100,unit:"metric"},cc=function(c){this.options=a.extend({},cy,c),a.bindAll(["_onMove","setUnit"],this)};cc.prototype.getDefaultPosition=function(){return"bottom-left"},cc.prototype._onMove=function(){hy(this._map,this._container,this.options)},cc.prototype.onAdd=function(c){return this._map=c,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",c.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},cc.prototype.onRemove=function(){l.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},cc.prototype.setUnit=function(c){this.options.unit=c,hy(this._map,this._container,this.options)};function hy(g,c,b){var d=b&&b.maxWidth||100,w=g._container.clientHeight/2,D=g.unproject([0,w]),R=g.unproject([d,w]),G=D.distanceTo(R);if(b&&b.unit==="imperial"){var K=3.2808*G;if(K>5280){var re=K/5280;yh(c,d,re,g._getUIString("ScaleControl.Miles"))}else yh(c,d,K,g._getUIString("ScaleControl.Feet"))}else if(b&&b.unit==="nautical"){var ce=G/1852;yh(c,d,ce,g._getUIString("ScaleControl.NauticalMiles"))}else G>=1e3?yh(c,d,G/1e3,g._getUIString("ScaleControl.Kilometers")):yh(c,d,G,g._getUIString("ScaleControl.Meters"))}function yh(g,c,b,d){var w=E1(b),D=w/b;g.style.width=c*D+"px",g.innerHTML=w+"&nbsp;"+d}function C1(g){var c=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10));return Math.round(g*c)/c}function E1(g){var c=Math.pow(10,(""+Math.floor(g)).length-1),b=g/c;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:C1(b),c*b}var Qs=function(c){this._fullscreen=!1,c&&c.container&&(c.container instanceof a.window.HTMLElement?this._container=c.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Qs.prototype.onAdd=function(c){return this._map=c,this._container||(this._container=this._map.getContainer()),this._controlContainer=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Qs.prototype.onRemove=function(){l.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Qs.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Qs.prototype._setupUI=function(){var c=this._fullscreenButton=l.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);l.create("span","mapboxgl-ctrl-icon",c).setAttribute("aria-hidden",!0),c.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Qs.prototype._updateTitle=function(){var c=this._getTitle();this._fullscreenButton.setAttribute("aria-label",c),this._fullscreenButton.title=c},Qs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Qs.prototype._isFullscreen=function(){return this._fullscreen},Qs.prototype._changeIcon=function(){var c=a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement;c===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Qs.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var L1={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},D1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),p3=function(g){function c(b){g.call(this),this.options=a.extend(Object.create(L1),b),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.addTo=function(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&l.remove(this._content),this._container&&(l.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(d){return this._lngLat=a.LngLat.convert(d),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},c.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},c.prototype.getElement=function(){return this._container},c.prototype.setText=function(d){return this.setDOMContent(a.window.document.createTextNode(d))},c.prototype.setHTML=function(d){var w=a.window.document.createDocumentFragment(),D=a.window.document.createElement("body"),R;for(D.innerHTML=d;R=D.firstChild,!!R;)w.appendChild(R);return this.setDOMContent(w)},c.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},c.prototype.setMaxWidth=function(d){return this.options.maxWidth=d,this._update(),this},c.prototype.setDOMContent=function(d){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=l.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(d),this._createCloseButton(),this._update(),this._focusFirstElement(),this},c.prototype.addClassName=function(d){this._container&&this._container.classList.add(d)},c.prototype.removeClassName=function(d){this._container&&this._container.classList.remove(d)},c.prototype.setOffset=function(d){return this.options.offset=d,this._update(),this},c.prototype.toggleClassName=function(d){if(this._container)return this._container.classList.toggle(d)},c.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=l.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},c.prototype._onMouseUp=function(d){this._update(d.point)},c.prototype._onMouseMove=function(d){this._update(d.point)},c.prototype._onDrag=function(d){this._update(d.point)},c.prototype._update=function(d){var w=this,D=this._lngLat||this._trackPointer;if(!(!this._map||!D||!this._content)&&(this._container||(this._container=l.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=l.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Re){return w._container.classList.add(Re)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cu(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!d))){var R=this._pos=this._trackPointer&&d?d:this._map.project(this._lngLat),G=this.options.anchor,K=P1(this.options.offset);if(!G){var re=this._container.offsetWidth,ce=this._container.offsetHeight,we;R.y+K.bottom.y<ce?we=["top"]:R.y>this._map.transform.height-ce?we=["bottom"]:we=[],R.x<re/2?we.push("left"):R.x>this._map.transform.width-re/2&&we.push("right"),we.length===0?G="bottom":G=we.join("-")}var be=R.add(K[G]).round();l.setTransform(this._container,$v[G]+" translate("+be.x+"px,"+be.y+"px)"),Yp(this._container,G,"popup")}},c.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var d=this._container.querySelector(D1);d&&d.focus()}},c.prototype._onClose=function(){this.remove()},c}(a.Evented);function P1(g){if(g)if(typeof g=="number"){var c=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new a.Point(0,0),top:new a.Point(0,g),"top-left":new a.Point(c,c),"top-right":new a.Point(-c,c),bottom:new a.Point(0,-g),"bottom-left":new a.Point(c,-c),"bottom-right":new a.Point(-c,-c),left:new a.Point(g,0),right:new a.Point(-g,0)}}else if(g instanceof a.Point||Array.isArray(g)){var b=a.Point.convert(g);return{center:b,top:b,"top-left":b,"top-right":b,bottom:b,"bottom-left":b,"bottom-right":b,left:b,right:b}}else return{center:a.Point.convert(g.center||[0,0]),top:a.Point.convert(g.top||[0,0]),"top-left":a.Point.convert(g["top-left"]||[0,0]),"top-right":a.Point.convert(g["top-right"]||[0,0]),bottom:a.Point.convert(g.bottom||[0,0]),"bottom-left":a.Point.convert(g["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(g["bottom-right"]||[0,0]),left:a.Point.convert(g.left||[0,0]),right:a.Point.convert(g.right||[0,0])};else return P1(new a.Point(0,0))}var Tn={version:a.version,supported:s,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:uy,NavigationControl:ku,GeolocateControl:k1,AttributionControl:Ta,ScaleControl:cc,FullscreenControl:Qs,Popup:p3,Marker:ph,Style:As,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:Or,clearPrewarmedResources:ca,get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(g){a.config.ACCESS_TOKEN=g},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(g){a.config.API_URL=g},get workerCount(){return tr.workerCount},set workerCount(g){tr.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage:function(c){a.clearTileCache(c)},workerUrl:""};return Tn}),r})});var FH=me((Wbe,RH)=>{RH.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}});var Xb=me(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var Zs=63710088e-1,SA={centimeters:Zs*100,centimetres:Zs*100,degrees:360/(2*Math.PI),feet:Zs*3.28084,inches:Zs*39.37,kilometers:Zs/1e3,kilometres:Zs/1e3,meters:Zs,metres:Zs,miles:Zs/1609.344,millimeters:Zs*1e3,millimetres:Zs*1e3,nauticalmiles:Zs/1852,radians:1,yards:Zs*1.0936},MA={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function uv(e,t,r={}){let i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function Kde(e,t,r={}){switch(e){case"Point":return kA(t).geometry;case"LineString":return EA(t).geometry;case"Polygon":return CA(t).geometry;case"MultiPoint":return NH(t).geometry;case"MultiLineString":return qH(t).geometry;case"MultiPolygon":return BH(t).geometry;default:throw new Error(e+" is invalid")}}function kA(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Yb(e[0])||!Yb(e[1]))throw new Error("coordinates must contain numbers");return uv({type:"Point",coordinates:e},t,r)}function Qde(e,t,r={}){return Wb(e.map(i=>kA(i,t)),r)}function CA(e,t,r={}){for(let a of e){if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(a[a.length-1].length!==a[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return uv({type:"Polygon",coordinates:e},t,r)}function $de(e,t,r={}){return Wb(e.map(i=>CA(i,t)),r)}function EA(e,t,r={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return uv({type:"LineString",coordinates:e},t,r)}function epe(e,t,r={}){return Wb(e.map(i=>EA(i,t)),r)}function Wb(e,t={}){let r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function qH(e,t,r={}){return uv({type:"MultiLineString",coordinates:e},t,r)}function NH(e,t,r={}){return uv({type:"MultiPoint",coordinates:e},t,r)}function BH(e,t,r={}){return uv({type:"MultiPolygon",coordinates:e},t,r)}function tpe(e,t,r={}){return uv({type:"GeometryCollection",geometries:e},t,r)}function rpe(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");let r=Math.pow(10,t||0);return Math.round(e*r)/r}function OH(e,t="kilometers"){let r=SA[t];if(!r)throw new Error(t+" units is invalid");return e*r}function LA(e,t="kilometers"){let r=SA[t];if(!r)throw new Error(t+" units is invalid");return e/r}function ape(e,t){return UH(LA(e,t))}function ipe(e){let t=e%360;return t<0&&(t+=360),t}function npe(e){return e=e%360,e>180?e-360:e<-180?e+360:e}function UH(e){return e%(2*Math.PI)*180/Math.PI}function ope(e){return e%360*Math.PI/180}function spe(e,t="kilometers",r="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return OH(LA(e,t),r)}function lpe(e,t="meters",r="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");let i=MA[t];if(!i)throw new Error("invalid original units");let a=MA[r];if(!a)throw new Error("invalid final units");return e/i*a}function Yb(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function upe(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function fpe(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!Yb(t))throw new Error("bbox must only contain numbers")})}function cpe(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}ki.areaFactors=MA;ki.azimuthToBearing=npe;ki.bearingToAzimuth=ipe;ki.convertArea=lpe;ki.convertLength=spe;ki.degreesToRadians=ope;ki.earthRadius=Zs;ki.factors=SA;ki.feature=uv;ki.featureCollection=Wb;ki.geometry=Kde;ki.geometryCollection=tpe;ki.isNumber=Yb;ki.isObject=upe;ki.lengthToDegrees=ape;ki.lengthToRadians=LA;ki.lineString=EA;ki.lineStrings=epe;ki.multiLineString=qH;ki.multiPoint=NH;ki.multiPolygon=BH;ki.point=kA;ki.points=Qde;ki.polygon=CA;ki.polygons=$de;ki.radiansToDegrees=UH;ki.radiansToLength=OH;ki.round=rpe;ki.validateBBox=fpe;ki.validateId=cpe});var Jb=me(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});var us=Xb();function b1(e,t,r){if(e!==null)for(var i,a,s,l,f,h,v,m=0,_=0,T,M=e.type,C=M==="FeatureCollection",E=M==="Feature",L=C?e.features.length:1,I=0;I<L;I++){v=C?e.features[I].geometry:E?e.geometry:e,T=v?v.type==="GeometryCollection":!1,f=T?v.geometries.length:1;for(var O=0;O<f;O++){var q=0,z=0;if(l=T?v.geometries[O]:v,l!==null){h=l.coordinates;var N=l.type;switch(m=r&&(N==="Polygon"||N==="MultiPolygon")?1:0,N){case null:break;case"Point":if(t(h,_,I,q,z)===!1)return!1;_++,q++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(t(h[i],_,I,q,z)===!1)return!1;_++,N==="MultiPoint"&&q++}N==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(a=0;a<h[i].length-m;a++){if(t(h[i][a],_,I,q,z)===!1)return!1;_++}N==="MultiLineString"&&q++,N==="Polygon"&&z++}N==="Polygon"&&q++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(z=0,a=0;a<h[i].length;a++){for(s=0;s<h[i][a].length-m;s++){if(t(h[i][a][s],_,I,q,z)===!1)return!1;_++}z++}q++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(b1(l.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function hpe(e,t,r,i){var a=r;return b1(e,function(s,l,f,h,v){l===0&&r===void 0?a=s:a=t(a,s,l,f,h,v)},i),a}function VH(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function vpe(e,t,r){var i=r;return VH(e,function(a,s){s===0&&r===void 0?i=a:i=t(i,a,s)}),i}function HH(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function dpe(e,t,r){var i=r;return HH(e,function(a,s){s===0&&r===void 0?i=a:i=t(i,a,s)}),i}function ppe(e){var t=[];return b1(e,function(r){t.push(r)}),t}function DA(e,t){var r,i,a,s,l,f,h,v,m,_,T=0,M=e.type==="FeatureCollection",C=e.type==="Feature",E=M?e.features.length:1;for(r=0;r<E;r++){for(f=M?e.features[r].geometry:C?e.geometry:e,v=M?e.features[r].properties:C?e.properties:{},m=M?e.features[r].bbox:C?e.bbox:void 0,_=M?e.features[r].id:C?e.id:void 0,h=f?f.type==="GeometryCollection":!1,l=h?f.geometries.length:1,a=0;a<l;a++){if(s=h?f.geometries[a]:f,s===null){if(t(null,T,v,m,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,T,v,m,_)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],T,v,m,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function mpe(e,t,r){var i=r;return DA(e,function(a,s,l,f,h){s===0&&r===void 0?i=a:i=t(i,a,s,l,f,h)}),i}function jb(e,t){DA(e,function(r,i,a,s,l){var f=r===null?null:r.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(us.feature.call(void 0,r,a,{bbox:s,id:l}),i,0)===!1?!1:void 0}var h;switch(f){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var v=0;v<r.coordinates.length;v++){var m=r.coordinates[v],_={type:h,coordinates:m};if(t(us.feature.call(void 0,_,a),i,v)===!1)return!1}})}function ype(e,t,r){var i=r;return jb(e,function(a,s,l){s===0&&l===0&&r===void 0?i=a:i=t(i,a,s,l)}),i}function GH(e,t){jb(e,function(r,i,a){var s=0;if(r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var f,h=0,v=0,m=0;if(b1(r,function(_,T,M,C,E){if(f===void 0||i>h||C>v||E>m){f=_,h=i,v=C,m=E,s=0;return}var L=us.lineString.call(void 0,[f,_],r.properties);if(t(L,i,a,E,s)===!1)return!1;s++,f=_})===!1)return!1}}})}function gpe(e,t,r){var i=r,a=!1;return GH(e,function(s,l,f,h,v){a===!1&&r===void 0?i=s:i=t(i,s,l,f,h,v),a=!0}),i}function ZH(e,t){if(!e)throw new Error("geojson is required");jb(e,function(r,i,a){if(r.geometry!==null){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(t(r,i,a,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<l.length;f++)if(t(us.lineString.call(void 0,l[f],r.properties),i,a,f)===!1)return!1;break}}})}function _pe(e,t,r){var i=r;return ZH(e,function(a,s,l,f){s===0&&r===void 0?i=a:i=t(i,a,s,l,f)}),i}function xpe(e,t){if(t=t||{},!us.isObject.call(void 0,t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties,f;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,f=e.features[r].geometry;break;case"Feature":l=l||e.properties,f=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=e;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var h=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),us.lineString.call(void 0,[h[s],h[s+1]],l,t);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s-1),us.lineString.call(void 0,[h[a][s],h[a][s+1]],l,t);case"MultiLineString":return i<0&&(i=h.length+i),s<0&&(s=h[i].length+s-1),us.lineString.call(void 0,[h[i][s],h[i][s+1]],l,t);case"MultiPolygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a),s<0&&(s=h[i][a].length-s-1),us.lineString.call(void 0,[h[i][a][s],h[i][a][s+1]],l,t)}throw new Error("geojson is invalid")}function bpe(e,t){if(t=t||{},!us.isObject.call(void 0,t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties,f;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,f=e.features[r].geometry;break;case"Feature":l=l||e.properties,f=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=e;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var h=f.coordinates;switch(f.type){case"Point":return us.point.call(void 0,h,l,t);case"MultiPoint":return i<0&&(i=h.length+i),us.point.call(void 0,h[i],l,t);case"LineString":return s<0&&(s=h.length+s),us.point.call(void 0,h[s],l,t);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s),us.point.call(void 0,h[a][s],l,t);case"MultiLineString":return i<0&&(i=h.length+i),s<0&&(s=h[i].length+s),us.point.call(void 0,h[i][s],l,t);case"MultiPolygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a),s<0&&(s=h[i][a].length-s),us.point.call(void 0,h[i][a][s],l,t)}throw new Error("geojson is invalid")}vo.coordAll=ppe;vo.coordEach=b1;vo.coordReduce=hpe;vo.featureEach=HH;vo.featureReduce=dpe;vo.findPoint=bpe;vo.findSegment=xpe;vo.flattenEach=jb;vo.flattenReduce=ype;vo.geomEach=DA;vo.geomReduce=mpe;vo.lineEach=ZH;vo.lineReduce=_pe;vo.propEach=VH;vo.propReduce=vpe;vo.segmentEach=GH;vo.segmentReduce=gpe});var JH=me(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});var YH=Xb(),wpe=Jb();function jH(e){return wpe.geomReduce.call(void 0,e,(t,r)=>t+Tpe(r),0)}function Tpe(e){let t=0,r;switch(e.type){case"Polygon":return WH(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=WH(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function WH(e){let t=0;if(e&&e.length>0){t+=Math.abs(XH(e[0]));for(let r=1;r<e.length;r++)t-=Math.abs(XH(e[r]))}return t}var Ape=YH.earthRadius*YH.earthRadius/2,PA=Math.PI/180;function XH(e){let t=e.length-1;if(t<=2)return 0;let r=0,i=0;for(;i<t;){let a=e[i],s=e[i+1===t?0:i+1],l=e[i+2>=t?(i+2)%t:i+2],f=a[0]*PA,h=s[1]*PA,v=l[0]*PA;r+=(v-f)*Math.sin(h),i++}return r*Ape}var Mpe=jH;Kb.area=jH;Kb.default=Mpe});var QH=me(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});var Spe=Xb(),kpe=Jb();function KH(e,t={}){let r=0,i=0,a=0;return kpe.coordEach.call(void 0,e,function(s){r+=s[0],i+=s[1],a++},!0),Spe.point.call(void 0,[r/a,i/a],t.properties)}var Cpe=KH;Qb.centroid=KH;Qb.default=Cpe});var eG=me($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0});var Epe=Jb();function $H(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return Epe.coordEach.call(void 0,e,i=>{r[0]>i[0]&&(r[0]=i[0]),r[1]>i[1]&&(r[1]=i[1]),r[2]<i[0]&&(r[2]=i[0]),r[3]<i[1]&&(r[3]=i[1])}),r}var Lpe=$H;$b.bbox=$H;$b.default=Lpe});var zA=me(($be,nG)=>{"use strict";var Dpe=ja(),aG=FH(),{area:Ppe}=JH(),{centroid:zpe}=QH(),{bbox:Ipe}=eG(),tG=C_(),Cm=Lh(),Rpe=yc(),Fpe=Ey(),e3=yx(),rG=Object.keys(aG),qpe={"ISO-3":tG,"USA-states":tG,"country names":Npe};function Npe(e){for(var t=0;t<rG.length;t++){var r=rG[t],i=new RegExp(aG[r]);if(i.test(e.trim().toLowerCase()))return r}return Cm.log("Unrecognized country name: "+e+"."),!1}function Bpe(e,t,r){if(!t||typeof t!="string")return!1;var i=qpe[e](t),a,s,l;if(i){if(e==="USA-states")for(a=[],l=0;l<r.length;l++)s=r[l],s.properties&&s.properties.gu&&s.properties.gu==="USA"&&a.push(s);else a=r;for(l=0;l<a.length;l++)if(s=a[l],s.id===i)return s;Cm.log(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function Ope(e){var t=e.geometry,r=t.coordinates,i=e.id,a=[],s,l,f,h;function v(m){for(var _=0;_<m.length-1;_++)if(m[_][0]>0&&m[_+1][0]<0)return _;return null}switch(i==="RUS"||i==="FJI"?s=function(m){var _;if(v(m)===null)_=m;else for(_=new Array(m.length),h=0;h<m.length;h++)_[h]=[m[h][0]<0?m[h][0]+360:m[h][0],m[h][1]];a.push(e3.tester(_))}:i==="ATA"?s=function(m){var _=v(m);if(_===null)return a.push(e3.tester(m));var T=new Array(m.length+1),M=0;for(h=0;h<m.length;h++)h>_?T[M++]=[m[h][0]+360,m[h][1]]:h===_?(T[M++]=m[h],T[M++]=[m[h][0],-90]):T[M++]=m[h];var C=e3.tester(T);C.pts.pop(),a.push(C)}:s=function(m){a.push(e3.tester(m))},t.type){case"MultiPolygon":for(l=0;l<r.length;l++)for(f=0;f<r[l].length;f++)s(r[l][f]);break;case"Polygon":for(l=0;l<r.length;l++)s(r[l]);break}return a}function iG(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},i=typeof t=="string"?r[t]:t;return Rpe(i)?i:(Cm.error("Oops ... something went wrong when fetching "+t),!1)}function Upe(e){var t=e[0].trace,r=iG(t);if(!r)return!1;var i={},a=[],s;for(s=0;s<t._length;s++){var l=e[s];(l.loc||l.loc===0)&&(i[l.loc]=l)}function f(m){var _=Fpe(m,t.featureidkey||"id").get(),T=i[_];if(T){var M=m.geometry;if(M.type==="Polygon"||M.type==="MultiPolygon"){var C={type:"Feature",id:_,geometry:M,properties:{}};C.geometry.coordinates.length>0?C.properties.ct=Vpe(C):C.properties.ct=[NaN,NaN],T.fIn=m,T.fOut=C,a.push(C)}else Cm.log(["Location",T.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[_]}switch(r.type){case"FeatureCollection":var h=r.features;for(s=0;s<h.length;s++)f(h[s]);break;case"Feature":f(r);break;default:return Cm.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var v in i)Cm.log(["Location *"+v+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return a}function Vpe(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var i=t.coordinates,a=0,s=0;s<i.length;s++){var l={type:"Polygon",coordinates:i[s]},f=Ppe(l);f>a&&(a=f,r=l)}else r=t;return zpe(r).geometry.coordinates}function Hpe(e){var t=window.PlotlyGeoAssets||{},r=[];function i(h){return new Promise(function(v,m){Dpe.json(h,function(_,T){if(_){delete t[h];var M=_.status===404?'GeoJSON at URL "'+h+'" does not exist.':"Unexpected error while fetching from "+h;return m(new Error(M))}return t[h]=T,v(T)})})}function a(h){return new Promise(function(v,m){var _=0,T=setInterval(function(){if(t[h]&&t[h]!=="pending")return clearInterval(T),v(t[h]);if(_>100)return clearInterval(T),m("Unexpected error while fetching from "+h);_++},50)})}for(var s=0;s<e.length;s++){var l=e[s][0].trace,f=l.geojson;typeof f=="string"&&(t[f]?t[f]==="pending"&&r.push(a(f)):(t[f]="pending",r.push(i(f))))}return r}function Gpe(e){return Ipe(e)}nG.exports={locationToFeature:Bpe,feature2polygons:Ope,getTraceGeojson:iG,extractTraceFeature:Upe,fetchTraceGeoData:Hpe,computeBbox:Gpe}});var fG=me((e3e,uG)=>{"use strict";var ep=Bt(),Zpe=ro().sanitizeHTML,Ype=gA(),oG=Oc();function sG(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=oG.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var hu=sG.prototype;hu.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=t3(t)};hu.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};hu.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};hu.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};hu.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};hu.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};hu.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!t3(e)){var r=Wpe(e);t.addSource(this.idSource,r)}};hu.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var i=t[r].id;if(typeof i=="string"&&i.indexOf(oG.traceLayerPrefix)===0){e=i;break}}return e};hu.updateLayer=function(e){var t=this.subplot,r=lG(e),i=this.lookupBelow(),a=this.findFollowingMapboxLayerId(i);this.removeLayer(),t3(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},a),this.layerType=e.type,this.below=i};hu.updateStyle=function(e){if(t3(e)){var t=lG(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};hu.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};hu.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function t3(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return ep.isPlainObject(t)||typeof t=="string"&&t.length>0}function lG(e){var t={},r={};switch(e.type){case"circle":ep.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":ep.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":ep.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,a=Ype(i.textposition,i.iconsize);ep.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset,"symbol-placement":i.placement}),ep.extendFlat(r,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity});break;case"raster":ep.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function Wpe(e){var t=e.sourcetype,r=e.source,i={type:t},a;return t==="geojson"?a="data":t==="vector"?a=typeof r=="string"?"url":"tiles":t==="raster"?(a="tiles",i.tileSize=256):t==="image"&&(a="url",i.coordinates=e.coordinates),i[a]=r,e.sourceattribution&&(i.attribution=Zpe(e.sourceattribution)),i}uG.exports=function(t,r,i){var a=new sG(t,r);return a.update(i),a}});var _G=me((t3e,gG)=>{"use strict";var IA=AA(),RA=Bt(),dG=zA(),cG=sa(),Xpe=Xi(),jpe=jl(),r3=Nf(),pG=qd(),Jpe=pG.drawMode,Kpe=pG.selectMode,Qpe=Hf().prepSelect,$pe=Hf().clearOutline,e0e=Hf().clearSelectionsCache,t0e=Hf().selectOnClick,fv=Oc(),r0e=fG();function mG(e,t){this.id=t,this.gd=e;var r=e._fullLayout,i=e._context;this.container=r._glcontainer.node(),this.isStatic=i.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var Hn=mG.prototype;Hn.plot=function(e,t,r){var i=this,a=t[i.id];i.map&&a.accesstoken!==i.accessToken&&(i.map.remove(),i.map=null,i.styleObj=null,i.traceHash={},i.layerList=[]);var s;i.map?s=new Promise(function(l,f){i.updateMap(e,t,l,f)}):s=new Promise(function(l,f){i.createMap(e,t,l,f)}),r.push(s)};Hn.createMap=function(e,t,r,i){var a=this,s=t[a.id],l=a.styleObj=yG(s.style,t);a.accessToken=s.accesstoken;var f=s.bounds,h=f?[[f.west,f.south],[f.east,f.north]]:null,v=a.map=new IA.Map({container:a.div,style:l.style,center:FA(s.center),zoom:s.zoom,bearing:s.bearing,pitch:s.pitch,maxBounds:h,interactive:!a.isStatic,preserveDrawingBuffer:a.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new IA.AttributionControl({compact:!0}));v._canvas.style.left="0px",v._canvas.style.top="0px",a.rejectOnError(i),a.isStatic||a.initFx(e,t);var m=[];m.push(new Promise(function(_){v.once("load",_)})),m=m.concat(dG.fetchTraceGeoData(e)),Promise.all(m).then(function(){a.fillBelowLookup(e,t),a.updateData(e),a.updateLayout(t),a.resolveOnRender(r)}).catch(i)};Hn.updateMap=function(e,t,r,i){var a=this,s=a.map,l=t[this.id];a.rejectOnError(i);var f=[],h=yG(l.style,t);JSON.stringify(a.styleObj)!==JSON.stringify(h)&&(a.styleObj=h,s.setStyle(h.style),a.traceHash={},f.push(new Promise(function(v){s.once("styledata",v)}))),f=f.concat(dG.fetchTraceGeoData(e)),Promise.all(f).then(function(){a.fillBelowLookup(e,t),a.updateData(e),a.updateLayout(t),a.resolveOnRender(r)}).catch(i)};Hn.fillBelowLookup=function(e,t){var r=t[this.id],i=r.layers,a,s,l=this.belowLookup={},f=!1;for(a=0;a<e.length;a++){var h=e[a][0].trace,v=h._module;typeof h.below=="string"?s=h.below:v.getBelow&&(s=v.getBelow(h,this)),s===""&&(f=!0),l["trace-"+h.uid]=s||""}for(a=0;a<i.length;a++){var m=i[a];typeof m.below=="string"?s=m.below:f?s="traces":s="",l["layout-"+a]=s}var _={},T,M;for(T in l)s=l[T],_[s]?_[s].push(T):_[s]=[T];for(s in _){var C=_[s];if(C.length>1)for(a=0;a<C.length;a++)T=C[a],T.indexOf("trace-")===0?(M=T.split("trace-")[1],this.traceHash[M]&&(this.traceHash[M].below=null)):T.indexOf("layout-")===0&&(M=T.split("layout-")[1],this.layerList[M]&&(this.layerList[M].below=null))}};var hG={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};Hn.updateData=function(e){var t=this.traceHash,r,i,a,s,l=e.slice().sort(function(_,T){return hG[_[0].trace.type]-hG[T[0].trace.type]});for(a=0;a<l.length;a++){var f=l[a];i=f[0].trace,r=t[i.uid];var h=!1;r&&(r.type===i.type?(r.update(f),h=!0):r.dispose()),!h&&i._module&&(t[i.uid]=i._module.plot(this,f))}var v=Object.keys(t);e:for(a=0;a<v.length;a++){var m=v[a];for(s=0;s<e.length;s++)if(i=e[s][0].trace,m===i.uid)continue e;r=t[m],r.dispose(),delete t[m]}};Hn.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(FA(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};Hn.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};Hn.rejectOnError=function(e){var t=this.map;function r(){e(new Error(fv.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};Hn.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(i){return t.project(i).x}},t.yaxis={_id:"y",c2p:function(i){return t.project(i).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},Xpe.setConvert(t.mockAxis,e)};Hn.initFx=function(e,t){var r=this,i=r.gd,a=r.map;a.on("moveend",function(f){if(r.map){var h=i._fullLayout;if(f.originalEvent||r.wheeling){var v=h[r.id];cG.call("_storeDirectGUIEdit",i.layout,h._preGUI,r.getViewEdits(v));var m=r.getView();v._input.center=v.center=m.center,v._input.zoom=v.zoom=m.zoom,v._input.bearing=v.bearing=m.bearing,v._input.pitch=v.pitch=m.pitch,i.emit("plotly_relayout",r.getViewEditsWithDerived(m))}f.originalEvent&&f.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),h._rehover&&h._rehover()}}),a.on("wheel",function(){r.wheeling=!0}),a.on("mousemove",function(f){var h=r.div.getBoundingClientRect(),v=[f.originalEvent.offsetX,f.originalEvent.offsetY];f.target.getBoundingClientRect=function(){return h},r.xaxis.p2c=function(){return a.unproject(v).lng},r.yaxis.p2c=function(){return a.unproject(v).lat},i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===r.id&&i._fullLayout[r.id]&&r3.hover(i,f,r.id)},r3.hover(i,f,r.id),i._fullLayout._hoversubplot=r.id});function s(){r3.loneUnhover(t._hoverlayer)}a.on("dragstart",function(){r.dragging=!0,s()}),a.on("zoomstart",s),a.on("mouseout",function(){i._fullLayout._hoversubplot=null});function l(){var f=r.getView();i.emit("plotly_relayouting",r.getViewEditsWithDerived(f))}a.on("drag",l),a.on("zoom",l),a.on("dblclick",function(){var f=i._fullLayout[r.id];cG.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,r.getViewEdits(f));var h=r.viewInitial;a.setCenter(FA(h.center)),a.setZoom(h.zoom),a.setBearing(h.bearing),a.setPitch(h.pitch);var v=r.getView();f._input.center=f.center=v.center,f._input.zoom=f.zoom=v.zoom,f._input.bearing=f.bearing=v.bearing,f._input.pitch=f.pitch=v.pitch,i.emit("plotly_doubleclick",null),i.emit("plotly_relayout",r.getViewEditsWithDerived(v))}),r.clearOutline=function(){e0e(r.dragOptions),$pe(r.dragOptions.gd)},r.onClickInPanFn=function(f){return function(h){var v=i._fullLayout.clickmode;v.indexOf("select")>-1&&t0e(h.originalEvent,i,[r.xaxis],[r.yaxis],r.id,f),v.indexOf("event")>-1&&r3.click(i,h.originalEvent)}}};Hn.updateFx=function(e){var t=this,r=t.map,i=t.gd;if(t.isStatic)return;function a(h){var v=t.map.unproject(h);return[v.lng,v.lat]}var s=e.dragmode,l;l=function(h,v){if(v.isRect){var m=h.range={};m[t.id]=[a([v.xmin,v.ymin]),a([v.xmax,v.ymax])]}else{var _=h.lassoPoints={};_[t.id]=v.map(a)}};var f=t.dragOptions;t.dragOptions=RA.extendDeep(f||{},{dragmode:e.dragmode,element:t.div,gd:i,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:l},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),Kpe(s)||Jpe(s)?(r.dragPan.disable(),r.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(h,v,m){Qpe(h,v,m,t.dragOptions,s)},jpe.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};Hn.updateFramework=function(e){var t=e[this.id].domain,r=e._size,i=this.div.style;i.width=r.w*(t.x[1]-t.x[0])+"px",i.height=r.h*(t.y[1]-t.y[0])+"px",i.left=r.l+t.x[0]*r.w+"px",i.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};Hn.updateLayers=function(e){var t=e[this.id],r=t.layers,i=this.layerList,a;if(r.length!==i.length){for(a=0;a<i.length;a++)i[a].dispose();for(i=this.layerList=[],a=0;a<r.length;a++)i.push(r0e(this,a,r[a]))}else for(a=0;a<r.length;a++)i[a].update(r[a])};Hn.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};Hn.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};Hn.setOptions=function(e,t,r){for(var i in r)this.map[t](e,i,r[i])};Hn.getMapLayers=function(){return this.map.getStyle().layers};Hn.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var i=this.getMapLayers(),a=0;a<i.length;a++)if(t===i[a].id){r.addLayer(e,t);return}RA.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};Hn.project=function(e){return this.map.project(new IA.LngLat(e[0],e[1]))};Hn.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,i=t.lat,a={lon:r,lat:i},s=e.getCanvas(),l=parseInt(s.style.width),f=parseInt(s.style.height);return{center:a,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([l,0]).toArray(),e.unproject([l,f]).toArray(),e.unproject([0,f]).toArray()]}}};Hn.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],i={},a=0;a<r.length;a++){var s=r[a];i[t+"."+s]=e[s]}return i};Hn.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function yG(e,t){var r={};if(RA.isPlainObject(e))r.id=e.id,r.style=e;else if(typeof e=="string")if(r.id=e,fv.styleValuesMapbox.indexOf(e)!==-1)r.style=vG(e);else if(fv.stylesNonMapbox[e]){r.style=fv.stylesNonMapbox[e];var i=r.style.sources["plotly-"+e],a=i?i.tiles:void 0;a&&a[0]&&a[0].slice(-9)==="?api_key="&&(a[0]+=t._mapboxAccessToken)}else r.style=e;else r.id=fv.styleValueDflt,r.style=vG(fv.styleValueDflt);return r.transition={duration:0,delay:0},r}function vG(e){return fv.styleUrlPrefix+e+"-"+fv.styleUrlSuffix}function FA(e){return[e.lon,e.lat]}gG.exports=mG});var bG=me((r3e,xG)=>{"use strict";var a0e=Bt(),i0e=Ii(),n0e=zb().defaults;xG.exports=function(t,r,i,a){var s=a.type,l=a.attributes,f=a.handleDefaults,h=a.partition||"x",v=r._subplots[s],m=v.length,_=m&&v[0].replace(/\d+$/,""),T,M;function C(O,q){return a0e.coerce(T,M,l,O,q)}for(var E=0;E<m;E++){var L=v[E];t[L]?T=t[L]:T=t[L]={},M=i0e.newContainer(r,L,_),a.noUirevision||C("uirevision",r.uirevision);var I={};I[h]=[E/m,(E+1)/m],n0e(M,r,C,I),a.id=L,f(T,M,C,a)}}});var AG=me((a3e,TG)=>{"use strict";var qA=Bt(),o0e=bG(),s0e=Wl(),wG=m1();TG.exports=function(t,r,i){o0e(t,r,i,{type:"mapbox",attributes:wG,handleDefaults:l0e,partition:"y",accessToken:r._mapboxAccessToken})};function l0e(e,t,r,i){r("accesstoken",i.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var a=r("bounds.west"),s=r("bounds.east"),l=r("bounds.south"),f=r("bounds.north");(a===void 0||s===void 0||l===void 0||f===void 0)&&delete t.bounds,s0e(e,t,{name:"layers",handleItemDefaults:u0e}),t._input=e}function u0e(e,t){function r(h,v){return qA.coerce(e,t,wG.layers,h,v)}var i=r("visible");if(i){var a=r("sourcetype"),s=a==="raster"||a==="image";r("source"),r("sourceattribution"),a==="vector"&&r("sourcelayer"),a==="image"&&r("coordinates");var l;s&&(l="raster");var f=r("type",l);s&&f!=="raster"&&(f=t.type="raster",qA.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),f==="circle"&&r("circle.radius"),f==="line"&&(r("line.width"),r("line.dash")),f==="fill"&&r("fill.outlinecolor"),f==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),qA.coerceFont(r,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),r("symbol.textposition"),r("symbol.placement"))}}});var a3=me(Ys=>{"use strict";var MG=AA(),Qu=Bt(),NA=Qu.strTranslate,f0e=Qu.strScale,c0e=W_().getSubplotCalcData,h0e=Oh(),v0e=ja(),SG=xi(),d0e=ro(),p0e=_G(),cv="mapbox",jf=Ys.constants=Oc();Ys.name=cv;Ys.attr="subplot";Ys.idRoot=cv;Ys.idRegex=Ys.attrRegex=Qu.counterRegex(cv);var m0e=["mapbox subplots and traces are deprecated!","Please consider switching to `map` subplots and traces.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");Ys.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};Ys.layoutAttributes=m1();Ys.supplyLayoutDefaults=AG();var kG=!0;Ys.plot=function(t){kG&&(kG=!1,Qu.warn(m0e));var r=t._fullLayout,i=t.calcdata,a=r._subplots[cv];if(MG.version!==jf.requiredVersion)throw new Error(jf.wrongVersionErrorMsg);var s=y0e(t,a);MG.accessToken=s;for(var l=0;l<a.length;l++){var f=a[l],h=c0e(i,cv,f),v=r[f],m=v._subplot;m||(m=new p0e(t,f),r[f]._subplot=m),m.viewInitial||(m.viewInitial={center:Qu.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),m.plot(h,r,t._promises)}};Ys.clean=function(e,t,r,i){for(var a=i._subplots[cv]||[],s=0;s<a.length;s++){var l=a[s];!t[l]&&i[l]._subplot&&i[l]._subplot.destroy()}};Ys.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[cv],i=t._size,a=0;a<r.length;a++){var s=t[r[a]],l=s.domain,f=s._subplot,h=f.toImage("png"),v=t._glimages.append("svg:image");v.attr({xmlns:h0e.svg,"xlink:href":h,x:i.l+i.w*l.x[0],y:i.t+i.h*(1-l.y[1]),width:i.w*(l.x[1]-l.x[0]),height:i.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"});var m=v0e.select(s._subplot.div),_=m.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!_){var T=t._glimages.append("g");T.attr("transform",NA(i.l+i.w*l.x[0]+10,i.t+i.h*(1-l.y[0])-31)),T.append("path").attr("d",jf.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),T.append("path").attr("d",jf.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),T.append("path").attr("d",jf.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),T.append("polygon").attr("points",jf.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var M=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=t._glimages.append("g"),E=C.append("text");E.text(M).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":M});var L=SG.bBox(E.node()),I=i.w*(l.x[1]-l.x[0]);if(L.width>I/2){var O=M.split("|").join("<br>");E.text(O).attr("data-unformatted",O).call(d0e.convertToTspans,e),L=SG.bBox(E.node())}E.attr("transform",NA(-3,-L.height+8)),C.insert("rect",".static-attribution").attr({x:-L.width-6,y:-L.height-3,width:L.width+6,height:L.height+3,fill:"rgba(255, 255, 255, 0.75)"});var q=1;L.width+6>I&&(q=I/(L.width+6));var z=[i.l+i.w*l.x[1],i.t+i.h*(1-l.y[0])];C.attr("transform",NA(z[0],z[1])+f0e(q))}};function y0e(e,t){var r=e._fullLayout,i=e._context;if(i.mapboxAccessToken==="")return"";for(var a=[],s=[],l=!1,f=!1,h=0;h<t.length;h++){var v=r[t[h]],m=v.accesstoken;CG(v.style)&&(m?Qu.pushUnique(a,m):(CG(v._input.style)&&(Qu.error("Uses Mapbox map style, but did not set an access token."),l=!0),f=!0)),m&&Qu.pushUnique(s,m)}if(f){var _=l?jf.noAccessTokenErrorMsg:jf.missingStyleErrorMsg;throw Qu.error(_),new Error(_)}return a.length?(a.length>1&&Qu.warn(jf.multipleTokensErrorMsg),a[0]):(s.length&&Qu.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function CG(e){return typeof e=="string"&&(jf.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}Ys.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[cv],i=0;i<r.length;i++){var a=t[r[i]]._subplot;a.updateFx(t)}}});var LG=me((o3e,EG)=>{"use strict";var n3e=["*scattermapbox* trace is deprecated!","Please consider switching to the *scattermap* trace type and `map` subplots.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");EG.exports={attributes:Bb(),supplyDefaults:uH(),colorbar:iT(),formatLabels:mA(),calc:mH(),plot:CH(),hoverPoints:Zb().hoverPoints,eventData:PH(),selectPoints:IH(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:a3(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}});var PG=me((s3e,DG)=>{"use strict";DG.exports=LG()});var BA=me((l3e,RG)=>{"use strict";var{hovertemplateAttrs:g0e,templatefallbackAttrs:_0e}=kf(),vv=hA(),x0e=Sc(),zG=ys(),b0e=Sf().defaultLine,hv=yn().extendFlat,IG=vv.marker.line;RG.exports=hv({locations:{valType:"data_array",editType:"calc"},locationmode:vv.locationmode,z:{valType:"data_array",editType:"calc"},geojson:hv({},vv.geojson,{}),featureidkey:vv.featureidkey,text:hv({},vv.text,{}),hovertext:hv({},vv.hovertext,{}),marker:{line:{color:hv({},IG.color,{dflt:b0e}),width:hv({},IG.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:vv.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:vv.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:hv({},zG.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:g0e(),hovertemplatefallback:_0e(),showlegend:hv({},zG.showlegend,{dflt:!1})},x0e("",{cLetter:"z",editTypeOverride:"calc"}))});var OA=me((u3e,FG)=>{"use strict";var Uc=BA(),w0e=Sc(),{hovertemplateAttrs:T0e,templatefallbackAttrs:A0e}=kf(),M0e=ys(),dv=yn().extendFlat;FG.exports=dv({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:dv({},Uc.featureidkey,{}),below:{valType:"string",editType:"plot"},text:Uc.text,hovertext:Uc.hovertext,marker:{line:{color:dv({},Uc.marker.line.color,{editType:"plot"}),width:dv({},Uc.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:dv({},Uc.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:dv({},Uc.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:dv({},Uc.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:Uc.hoverinfo,hovertemplate:T0e({},{keys:["properties"]}),hovertemplatefallback:A0e(),showlegend:dv({},M0e.showlegend,{dflt:!1})},w0e("",{cLetter:"z",editTypeOverride:"calc"}))});var NG=me((f3e,qG)=>{"use strict";var w1=Bt(),S0e=bd(),k0e=OA();qG.exports=function(t,r,i,a){function s(m,_){return w1.coerce(t,r,k0e,m,_)}var l=s("locations"),f=s("z"),h=s("geojson");if(!w1.isArrayOrTypedArray(l)||!l.length||!w1.isArrayOrTypedArray(f)||!f.length||!(typeof h=="string"&&h!==""||w1.isPlainObject(h))){r.visible=!1;return}s("featureidkey"),r._length=Math.min(l.length,f.length),s("below"),s("text"),s("hovertext"),s("hovertemplate"),s("hovertemplatefallback");var v=s("marker.line.width");v&&s("marker.line.color"),s("marker.opacity"),S0e(t,r,a,s,{prefix:"",cLetter:"z"}),w1.coerceSelectionMarkerOpacity(r,s)}});var UA=me((c3e,BG)=>{"use strict";BG.exports={min:"zmin",max:"zmax"}});var HG=me((h3e,VG)=>{"use strict";var OG=Da(),C0e=Zi().BADNUM,E0e=Qy(),L0e=Kg(),D0e=Qx();function UG(e){return e&&typeof e=="string"}VG.exports=function(t,r){var i=r._length,a=new Array(i),s;r.geojson?s=function(m){return UG(m)||OG(m)}:s=UG;for(var l=0;l<i;l++){var f=a[l]={},h=r.locations[l],v=r.z[l];s(h)&&OG(v)?(f.loc=h,f.z=v):(f.loc=null,f.z=C0e),f.index=l}return L0e(a,r),E0e(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),D0e(a,r),a}});var VA=me((v3e,YG)=>{"use strict";var P0e=Da(),Vc=Bt(),z0e=U0(),I0e=xi(),R0e=Ob().makeBlank,GG=zA();function F0e(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},s=t._opts={fill:i,line:a,geojson:R0e()};if(!r)return s;var l=GG.extractTraceFeature(e);if(!l)return s;var f=z0e.makeColorScaleFuncFromTrace(t),h=t.marker,v=h.line||{},m;Vc.isArrayOrTypedArray(h.opacity)&&(m=function(O){var q=O.mo;return P0e(q)?+Vc.constrain(q,0,1):0});var _;Vc.isArrayOrTypedArray(v.color)&&(_=function(O){return O.mlc});var T;Vc.isArrayOrTypedArray(v.width)&&(T=function(O){return O.mlw});for(var M=0;M<e.length;M++){var C=e[M],E=C.fOut;if(E){var L=E.properties;L.fc=f(C.z),m&&(L.mo=m(C)),_&&(L.mlc=_(C)),T&&(L.mlw=T(C)),C.ct=L.ct,C._polygons=GG.feature2polygons(E)}}var I=m?{type:"identity",property:"mo"}:h.opacity;return Vc.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":I}),Vc.extendFlat(a.paint,{"line-color":_?{type:"identity",property:"mlc"}:v.color,"line-width":T?{type:"identity",property:"mlw"}:v.width,"line-opacity":I}),i.layout.visibility="visible",a.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:l},ZG(e),s}function ZG(e){var t=e[0].trace,r=t._opts,i;if(t.selectedpoints){for(var a=I0e.makeSelectedPointStyleFns(t),s=0;s<e.length;s++){var l=e[s];l.fOut&&(l.fOut.properties.mo2=a.selectedOpacityFn(l))}i={type:"identity",property:"mo2"}}else i=Vc.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return Vc.extendFlat(r.fill.paint,{"fill-opacity":i}),Vc.extendFlat(r.line.paint,{"line-opacity":i}),r}YG.exports={convert:F0e,convertOnSelect:ZG}});var KG=me((d3e,JG)=>{"use strict";var XG=VA().convert,q0e=VA().convertOnSelect,WG=Oc().traceLayerPrefix;function jG(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",WG+t+"-fill"],["line",WG+t+"-line"]],this.below=null}var Em=jG.prototype;Em.update=function(e){this._update(XG(e)),e[0].trace._glTrace=this};Em.updateOnSelect=function(e){this._update(q0e(e))};Em._update=function(e){var t=this.subplot,r=this.layerList,i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var a=0;a<r.length;a++){var s=r[a],l=s[0],f=s[1],h=e[l];t.setOptions(f,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&t.setOptions(f,"setPaintProperty",h.paint)}};Em._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,a=this.sourceId,s=0;s<i.length;s++){var l=i[s],f=l[0],h=e[f];r.addLayer({type:f,id:l[1],source:a,layout:h.layout,paint:h.paint},t)}};Em._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};Em.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};JG.exports=function(t,r){var i=r[0].trace,a=new jG(t,i.uid),s=a.sourceId,l=XG(r),f=a.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(s,{type:"geojson",data:l.geojson}),a._addLayers(l,f),r[0].trace._glTrace=a,a}});var $G=me((p3e,QG)=>{"use strict";var N0e=Xi(),B0e=BA(),O0e=Bt().fillText;QG.exports=function(t,r,i){var a=t.cd,s=a[0].trace,l=t.subplot,f,h,v,m,_=[r,i],T=[r+360,i];for(h=0;h<a.length;h++)if(f=a[h],m=!1,f._polygons){for(v=0;v<f._polygons.length;v++)f._polygons[v].contains(_)&&(m=!m),f._polygons[v].contains(T)&&(m=!m);if(m)break}if(!(!m||!f))return t.x0=t.x1=t.xa.c2p(f.ct),t.y0=t.y1=t.ya.c2p(f.ct),t.index=f.index,t.location=f.loc,t.z=f.z,t.zLabel=N0e.tickText(l.mockAxis,l.mockAxis.c2l(f.z),"hover").text,t.hovertemplate=f.hovertemplate,U0e(t,s,f),[t]};function U0e(e,t,r){if(!t.hovertemplate){var i=r.hi||t.hoverinfo,a=String(r.loc),s=i==="all"?B0e.hoverinfo.flags:i.split("+"),l=s.indexOf("name")!==-1,f=s.indexOf("location")!==-1,h=s.indexOf("z")!==-1,v=s.indexOf("text")!==-1,m=!l&&f,_=[];m?e.nameOverride=a:(l&&(e.nameOverride=t.name),f&&_.push(a)),h&&_.push(e.zLabel),v&&O0e(r,t,_),e.extraText=_.join("<br>")}}});var tZ=me((m3e,eZ)=>{"use strict";eZ.exports=function(t,r,i,a,s){t.location=r.location,t.z=r.z;var l=a[s];return l.fIn&&l.fIn.properties&&(t.properties=l.fIn.properties),t.ct=l.ct,t}});var aZ=me((y3e,rZ)=>{"use strict";rZ.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],f,h,v,m,_;if(r===!1)for(f=0;f<i.length;f++)i[f].selected=0;else for(f=0;f<i.length;f++)h=i[f],v=h.ct,v&&(m=a.c2p(v),_=s.c2p(v),r.contains([m,_],null,f,t)?(l.push({pointNumber:f,lon:v[0],lat:v[1]}),h.selected=1):h.selected=0);return l}});var nZ=me((_3e,iZ)=>{"use strict";var g3e=["*choroplethmapbox* trace is deprecated!","Please consider switching to the *choroplethmap* trace type and `map` subplots.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");iZ.exports={attributes:OA(),supplyDefaults:NG(),colorbar:UA(),calc:HG(),plot:KG(),hoverPoints:$G(),eventData:tZ(),selectPoints:aZ(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),i=r.length-2;i>=0;i--){var a=r[i].id;if(typeof a=="string"&&a.indexOf("water")===0){for(var s=i+1;s<r.length;s++)if(a=r[s].id,typeof a=="string"&&a.indexOf("plotly-")===-1)return a}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:a3(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}});var sZ=me((x3e,oZ)=>{"use strict";oZ.exports=nZ()});var GA=me((b3e,uZ)=>{"use strict";var V0e=Sc(),{hovertemplateAttrs:H0e,templatefallbackAttrs:G0e}=kf(),lZ=ys(),i3=Bb(),HA=yn().extendFlat;uZ.exports=HA({lon:i3.lon,lat:i3.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:i3.text,hovertext:i3.hovertext,hoverinfo:HA({},lZ.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:H0e(),hovertemplatefallback:G0e(),showlegend:HA({},lZ.showlegend,{dflt:!1})},V0e("",{cLetter:"z",editTypeOverride:"calc"}))});var cZ=me((w3e,fZ)=>{"use strict";var Z0e=Bt(),Y0e=bd(),W0e=GA();fZ.exports=function(t,r,i,a){function s(v,m){return Z0e.coerce(t,r,W0e,v,m)}var l=s("lon")||[],f=s("lat")||[],h=Math.min(l.length,f.length);if(!h){r.visible=!1;return}r._length=h,s("z"),s("radius"),s("below"),s("text"),s("hovertext"),s("hovertemplate"),s("hovertemplatefallback"),Y0e(t,r,a,s,{prefix:"",cLetter:"z"})}});var dZ=me((T3e,vZ)=>{"use strict";var ZA=Da(),X0e=Bt().isArrayOrTypedArray,YA=Zi().BADNUM,j0e=Qy(),hZ=Bt()._;vZ.exports=function(t,r){for(var i=r._length,a=new Array(i),s=r.z,l=X0e(s)&&s.length,f=0;f<i;f++){var h=a[f]={},v=r.lon[f],m=r.lat[f];if(h.lonlat=ZA(v)&&ZA(m)?[+v,+m]:[YA,YA],l){var _=s[f];h.z=ZA(_)?_:YA}}return j0e(t,r,{vals:l?s:[0,1],containerStr:"",cLetter:"z"}),i&&(a[0].t={labels:{lat:hZ(t,"lat:")+" ",lon:hZ(t,"lon:")+" "}}),a}});var _Z=me((A3e,gZ)=>{"use strict";var J0e=Da(),WA=Bt(),pZ=Oa(),mZ=U0(),yZ=Zi().BADNUM,K0e=Ob().makeBlank;gZ.exports=function(t){var r=t[0].trace,i=r.visible===!0&&r._length!==0,a={layout:{visibility:"none"},paint:{}},s=r._opts={heatmap:a,geojson:K0e()};if(!i)return s;var l=[],f,h=r.z,v=r.radius,m=WA.isArrayOrTypedArray(h)&&h.length,_=WA.isArrayOrTypedArray(v);for(f=0;f<t.length;f++){var T=t[f],M=T.lonlat;if(M[0]!==yZ){var C={};if(m){var E=T.z;C.z=E!==yZ?E:0}_&&(C.r=J0e(v[f])&&v[f]>0?+v[f]:0),l.push({type:"Feature",geometry:{type:"Point",coordinates:M},properties:C})}}var L=mZ.extractOpts(r),I=L.reversescale?mZ.flipScale(L.colorscale):L.colorscale,O=I[0][1],q=pZ.opacity(O)<1?O:pZ.addOpacity(O,0),z=["interpolate",["linear"],["heatmap-density"],0,q];for(f=1;f<I.length;f++)z.push(I[f][0],I[f][1]);var N=["interpolate",["linear"],["get","z"],L.min,0,L.max,1];return WA.extendFlat(s.heatmap.paint,{"heatmap-weight":m?N:1/(L.max-L.min),"heatmap-color":z,"heatmap-radius":_?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),s.geojson={type:"FeatureCollection",features:l},s.heatmap.layout.visibility="visible",s}});var TZ=me((M3e,wZ)=>{"use strict";var xZ=_Z(),Q0e=Oc().traceLayerPrefix;function bZ(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",Q0e+t+"-heatmap"]],this.below=null}var n3=bZ.prototype;n3.update=function(e){var t=this.subplot,r=this.layerList,i=xZ(e),a=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(i,a),this.below=a);for(var s=0;s<r.length;s++){var l=r[s],f=l[0],h=l[1],v=i[f];t.setOptions(h,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&t.setOptions(h,"setPaintProperty",v.paint)}};n3._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,a=this.sourceId,s=0;s<i.length;s++){var l=i[s],f=l[0],h=e[f];r.addLayer({type:f,id:l[1],source:a,layout:h.layout,paint:h.paint},t)}};n3._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};n3.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};wZ.exports=function(t,r){var i=r[0].trace,a=new bZ(t,i.uid),s=a.sourceId,l=xZ(r),f=a.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(s,{type:"geojson",data:l.geojson}),a._addLayers(l,f),a}});var MZ=me((S3e,AZ)=>{"use strict";var $0e=Xi(),eme=Zb().hoverPoints,tme=Zb().getExtraText;AZ.exports=function(t,r,i){var a=eme(t,r,i);if(a){var s=a[0],l=s.cd,f=l[0].trace,h=l[s.index];if(delete s.color,"z"in h){var v=s.subplot.mockAxis;s.z=h.z,s.zLabel=$0e.tickText(v,v.c2l(h.z),"hover").text}return s.extraText=tme(f,h,l[0].t.labels),[s]}}});var kZ=me((k3e,SZ)=>{"use strict";SZ.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t}});var EZ=me((E3e,CZ)=>{"use strict";var C3e=["*densitymapbox* trace is deprecated!","Please consider switching to the *densitymap* trace type and `map` subplots.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");CZ.exports={attributes:GA(),supplyDefaults:cZ(),colorbar:UA(),formatLabels:mA(),calc:dZ(),plot:TZ(),hoverPoints:MZ(),eventData:kZ(),getBelow:function(e,t){for(var r=t.getMapLayers(),i=0;i<r.length;i++){var a=r[i],s=a.id;if(a.type==="symbol"&&typeof s=="string"&&s.indexOf("plotly-")===-1)return s}},moduleType:"trace",name:"densitymapbox",basePlotModule:a3(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}});var DZ=me((L3e,LZ)=>{"use strict";LZ.exports=EZ()});var Vo=me((D3e,zZ)=>{"use strict";var PZ=Object.getOwnPropertySymbols,rme=Object.prototype.hasOwnProperty,ame=Object.prototype.propertyIsEnumerable;function ime(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function nme(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(s){a[s]=s}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}zZ.exports=nme()?Object.assign:function(e,t){for(var r,i=ime(e),a,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var l in r)rme.call(r,l)&&(i[l]=r[l]);if(PZ){a=PZ(r);for(var f=0;f<a.length;f++)ame.call(r,a[f])&&(i[a[f]]=r[a[f]])}}return i}});var Ho=me((P3e,RZ)=>{var s3=Vo();function IZ(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}s3(IZ.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,i,a){return i=(e!=null&&e.year?e.calendar():typeof i=="string"?this.instance(i,a):i)||this.instance(),i.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var i="",a=0;r>0;){var s=r%10;i=(s===0?"":e[s]+t[a])+i,a++,r=Math.floor(r/10)}return i.indexOf(e[1]+t[1])===0&&(i=i.substr(1)),i||e[0]}}});function XA(e,t,r,i){if(this._calendar=e,this._year=t,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(ka.local.invalidDate||ka.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function o3(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}s3(XA.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(ka.local.invalidDate||ka.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(ka.local.differentCalendars||ka.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o3(Math.abs(this.year()),4)+"-"+o3(this.month(),2)+"-"+o3(this.day(),2)}});function jA(){this.shortYearCutoff="+10"}s3(jA.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new XA(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,ka.local.invalidYear||ka.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ka.local.invalidYear||ka.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o3(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,ka.local.invalidYear||ka.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,ka.local.invalidMonth||ka.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,ka.local.invalidMonth||ka.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ka.local.invalidYear||ka.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var i=this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,ka.local.invalidDate||ka.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var i=e.toJD()+t*(r==="w"?this.daysInWeek():1),a=e.calendar().fromJD(i);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var s=e.year()+(r==="y"?t:0),l=e.monthOfYear()+(r==="m"?t:0),a=e.day(),f=function(m){for(;l<m.minMonth;)s--,l+=m.monthsInYear(s);for(var _=m.monthsInYear(s);l>_-1+m.minMonth;)s++,l-=_,_=m.monthsInYear(s)};r==="y"?(e.month()!==this.fromMonthOfYear(s,l)&&(l=this.newDate(s,e.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(s)),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,l)))):r==="m"&&(f(this),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,l))));var h=[s,this.fromMonthOfYear(s,l),a];return this._validateLevel--,h}catch(v){throw this._validateLevel--,v}},_correctAdd:function(e,t,r,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],s=r<0?-1:1;t=this._add(e,r*a[0]+s*a[1],a[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,ka.local.invalidDate||ka.regionalOptions[""].invalidDate);var i=r==="y"?t:e.year(),a=r==="m"?t:e.month(),s=r==="d"?t:e.day();return(r==="y"||r==="m")&&(s=Math.min(s,this.daysInMonth(i,a))),e.date(i,a,s)},isValid:function(e,t,r){this._validateLevel++;var i=this.hasYearZero||e!==0;if(i){var a=this.newDate(e,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,i},toJSDate:function(e,t,r){var i=this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate);return ka.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(e){return this.fromJD(ka.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,i){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(ka.local.differentCalendars||ka.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw i.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,r);return this._validateLevel--,a}catch(s){throw this._validateLevel--,s}}});function JA(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}JA.prototype=new jA;s3(JA.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,ka.local.invalidYear||ka.regionalOptions[""].invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===0&&(r%100!==0||r%400===0)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,ka.local.invalidMonth||ka.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate);e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<3&&(t+=12,e--);var a=Math.floor(e/100),s=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+s-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var i=r+1524,a=Math.floor((i-122.1)/365.25),s=Math.floor(365.25*a),l=Math.floor((i-s)/30.6001),f=i-s-Math.floor(l*30.6001),h=l-(l>13.5?13:1),v=a-(h>2.5?4716:4715);return v<=0&&v--,this.newDate(v,h,f)},toJSDate:function(e,t,r){var i=this._validate(e,t,r,ka.local.invalidDate||ka.regionalOptions[""].invalidDate),a=new Date(i.year(),i.month()-1,i.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var ka=RZ.exports=new IZ;ka.cdate=XA;ka.baseCalendar=jA;ka.calendars.gregorian=JA});var FZ=me(()=>{var KA=Vo(),po=Ho();KA(po.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});po.local=po.regionalOptions[""];KA(po.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});KA(po.baseCalendar.prototype,{UNIX_EPOCH:po.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:po.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw po.local.invalidFormat||po.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var i=r.dayNamesShort||this.local.dayNamesShort,a=r.dayNames||this.local.dayNames,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,f=r.monthNames||this.local.monthNames,h=r.calculateWeek||this.local.calculateWeek,v=function(z,N){for(var H=1;q+H<e.length&&e.charAt(q+H)===z;)H++;return q+=H-1,Math.floor(H/(N||1))>1},m=function(z,N,H,V){var W=""+N;if(v(z,V))for(;W.length<H;)W="0"+W;return W},_=function(z,N,H,V){return v(z)?V[N]:H[N]},T=this,M=function(z){return typeof s=="function"?s.call(T,z,v("m")):L(m("m",z.month(),2))},C=function(z,N){return N?typeof f=="function"?f.call(T,z):f[z.month()-T.minMonth]:typeof l=="function"?l.call(T,z):l[z.month()-T.minMonth]},E=this.local.digits,L=function(z){return r.localNumbers&&E?E(z):z},I="",O=!1,q=0;q<e.length;q++)if(O)e.charAt(q)==="'"&&!v("'")?O=!1:I+=e.charAt(q);else switch(e.charAt(q)){case"d":I+=L(m("d",t.day(),2));break;case"D":I+=_("D",t.dayOfWeek(),i,a);break;case"o":I+=m("o",t.dayOfYear(),3);break;case"w":I+=m("w",t.weekOfYear(),2);break;case"m":I+=M(t);break;case"M":I+=C(t,v("M"));break;case"y":I+=v("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":v("Y",2),I+=t.formatYear();break;case"J":I+=t.toJD();break;case"@":I+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":I+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":v("'")?I+="'":O=!0;break;default:I+=e.charAt(q)}return I},parseDate:function(e,t,r){if(t==null)throw po.local.invalidArguments||po.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var i=r.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var a=r.dayNamesShort||this.local.dayNamesShort,s=r.dayNames||this.local.dayNames,l=r.parseMonth||this.local.parseMonth,f=r.monthNumbers||this.local.monthNumbers,h=r.monthNamesShort||this.local.monthNamesShort,v=r.monthNames||this.local.monthNames,m=-1,_=-1,T=-1,M=-1,C=-1,E=!1,L=!1,I=function(oe,fe){for(var le=1;J+le<e.length&&e.charAt(J+le)===oe;)le++;return J+=le-1,Math.floor(le/(fe||1))>1},O=function(oe,fe){var le=I(oe,fe),Te=[2,3,le?4:2,le?4:2,10,11,20]["oyYJ@!".indexOf(oe)+1],Se=new RegExp("^-?\\d{1,"+Te+"}"),Me=t.substring(W).match(Se);if(!Me)throw(po.local.missingNumberAt||po.regionalOptions[""].missingNumberAt).replace(/\{0\}/,W);return W+=Me[0].length,parseInt(Me[0],10)},q=this,z=function(){if(typeof f=="function"){I("m");var oe=f.call(q,t.substring(W));return W+=oe.length,oe}return O("m")},N=function(oe,fe,le,Te){for(var Se=I(oe,Te)?le:fe,Me=0;Me<Se.length;Me++)if(t.substr(W,Se[Me].length).toLowerCase()===Se[Me].toLowerCase())return W+=Se[Me].length,Me+q.minMonth;throw(po.local.unknownNameAt||po.regionalOptions[""].unknownNameAt).replace(/\{0\}/,W)},H=function(){if(typeof v=="function"){var oe=I("M")?v.call(q,t.substring(W)):h.call(q,t.substring(W));return W+=oe.length,oe}return N("M",h,v)},V=function(){if(t.charAt(W)!==e.charAt(J))throw(po.local.unexpectedLiteralAt||po.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,W);W++},W=0,J=0;J<e.length;J++)if(L)e.charAt(J)==="'"&&!I("'")?L=!1:V();else switch(e.charAt(J)){case"d":M=O("d");break;case"D":N("D",a,s);break;case"o":C=O("o");break;case"w":O("w");break;case"m":T=z();break;case"M":T=H();break;case"y":var ee=J;E=!I("y",2),J=ee,_=O("y",2);break;case"Y":_=O("Y",2);break;case"J":m=O("J")+.5,t.charAt(W)==="."&&(W++,O("J"));break;case"@":m=O("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":m=O("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":W=t.length;break;case"'":I("'")?V():L=!0;break;default:V()}if(W<t.length)throw po.local.unexpectedText||po.regionalOptions[""].unexpectedText;if(_===-1?_=this.today().year():_<100&&E&&(_+=i===-1?1900:this.today().year()-this.today().year()%100-(_<=i?0:100)),typeof T=="string"&&(T=l.call(this,_,T)),C>-1){T=1,M=C;for(var ie=this.daysInMonth(_,T);M>ie;ie=this.daysInMonth(_,T))T++,M-=ie}return m>-1?this.fromJD(m):this.newDate(_,T,M)},determineDate:function(e,t,r,i,a){r&&typeof r!="object"&&(a=i,i=r,r=null),typeof i!="string"&&(a=i,i="");var s=this,l=function(f){try{return s.parseDate(i,f,a)}catch(_){}f=f.toLowerCase();for(var h=(f.match(/^c/)&&r?r.newDate():null)||s.today(),v=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,m=v.exec(f);m;)h.add(parseInt(m[1],10),m[2]||"d"),m=v.exec(f);return h};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?l(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e),e}})});var qZ=me(()=>{var pv=Ho(),ome=Vo(),QA=pv.instance();function l3(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}l3.prototype=new pv.baseCalendar;ome(l3.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(lme);return r?r[0]:""}var i=this._validateYear(e),a=e.month(),s=""+this.toChineseMonth(i,a);return t&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(i,a)&&(s+="i"),s},monthNames:function(e){if(typeof e=="string"){var t=e.match(ume);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),a=this.toChineseMonth(r,i),s=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][a-1];return this.isIntercalaryMonth(r,i)&&(s="\u95F0"+s),s},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(fme);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),a=this.toChineseMonth(r,i),s=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][a-1];return this.isIntercalaryMonth(r,i)&&(s="\u95F0"+s),s},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),i;if(isNaN(r))t[0]==="\u95F0"&&(i=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var a=t[t.length-1];i=a==="i"||a==="I"}var s=this.toMonthIndex(e,r,i);return s},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var i=this.intercalaryMonth(e),a=r&&t!==i;if(a||t<1||t>12)throw pv.local.invalidMonth.replace(/\{0\}/,this.local.name);var s;return i?!r&&t<=i?s=t-1:s=t:s=t-1,s},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),i=r?12:11;if(t<0||t>i)throw pv.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return r?t<r?a=t+1:a=t:a=t+1,a},intercalaryMonth:function(e){e=this._validateYear(e);var t=mv[e-mv[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var i=this._validateYear(e,pv.local.invalidyear),a=yv[i-yv[0]],s=a>>9&4095,l=a>>5&15,f=a&31,h;h=QA.newDate(s,l,f),h.add(4-(h.dayOfWeek()||7),"d");var v=this.toJD(e,t,r)-h.toJD();return 1+Math.floor(v/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=mv[e-mv[0]],i=r>>13,a=i?12:11;if(t>a)throw pv.local.invalidMonth.replace(/\{0\}/,this.local.name);var s=r&1<<12-t?30:29;return s},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,s,r,pv.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),r=i.day();var a=this.isIntercalaryMonth(e,t),s=this.toChineseMonth(e,t),l=hme(e,s,r,a);return QA.toJD(l.year,l.month,l.day)},fromJD:function(e){var t=QA.fromJD(e),r=cme(t.year(),t.month(),t.day()),i=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,i,r.day)},fromString:function(e){var t=e.match(sme),r=this._validateYear(+t[1]),i=+t[2],a=!!t[3],s=this.toMonthIndex(r,i,a),l=+t[4];return this.newDate(r,s,l)},add:function(e,t,r){var i=e.year(),a=e.month(),s=this.isIntercalaryMonth(i,a),l=this.toChineseMonth(i,a),f=Object.getPrototypeOf(l3.prototype).add.call(this,e,t,r);if(r==="y"){var h=f.year(),v=f.month(),m=this.isIntercalaryMonth(h,l),_=s&&m?this.toMonthIndex(h,l,!0):this.toMonthIndex(h,l,!1);_!==v&&f.month(_)}return f}});var sme=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,lme=/^\d?\d[iI]?/m,ume=/^??[]?/m,fme=/^??[]?/m;pv.calendars.chinese=l3;var mv=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],yv=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function cme(e,t,r,i){var a,s;if(typeof e=="object")a=e,s=t||{};else{var l=typeof e=="number"&&e>=1888&&e<=2111;if(!l)throw new Error("Solar year outside range 1888-2111");var f=typeof t=="number"&&t>=1&&t<=12;if(!f)throw new Error("Solar month outside range 1 - 12");var h=typeof r=="number"&&r>=1&&r<=31;if(!h)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:r},s=i||{}}var v=yv[a.year-yv[0]],m=a.year<<9|a.month<<5|a.day;s.year=m>=v?a.year:a.year-1,v=yv[s.year-yv[0]];var _=v>>9&4095,T=v>>5&15,M=v&31,C,E=new Date(_,T-1,M),L=new Date(a.year,a.month-1,a.day);C=Math.round((L-E)/(24*3600*1e3));var I=mv[s.year-mv[0]],O;for(O=0;O<13;O++){var q=I&1<<12-O?30:29;if(C<q)break;C-=q}var z=I>>13;return!z||O<z?(s.isIntercalary=!1,s.month=1+O):O===z?(s.isIntercalary=!0,s.month=O):(s.isIntercalary=!1,s.month=O),s.day=1+C,s}function hme(e,t,r,i,a){var s,l;if(typeof e=="object")l=e,s=t||{};else{var f=typeof e=="number"&&e>=1888&&e<=2111;if(!f)throw new Error("Lunar year outside range 1888-2111");var h=typeof t=="number"&&t>=1&&t<=12;if(!h)throw new Error("Lunar month outside range 1 - 12");var v=typeof r=="number"&&r>=1&&r<=30;if(!v)throw new Error("Lunar day outside range 1 - 30");var m;typeof i=="object"?(m=!1,s=i):(m=!!i,s=a||{}),l={year:e,month:t,day:r,isIntercalary:m}}var _;_=l.day-1;var T=mv[l.year-mv[0]],M=T>>13,C;M&&(l.month>M||l.isIntercalary)?C=l.month:C=l.month-1;for(var E=0;E<C;E++){var L=T&1<<12-E?30:29;_+=L}var I=yv[l.year-yv[0]],O=I>>9&4095,q=I>>5&15,z=I&31,N=new Date(O,q-1,z+_);return s.year=N.getFullYear(),s.month=1+N.getMonth(),s.day=N.getDate(),s}});var NZ=me(()=>{var tp=Ho(),vme=Vo();function $A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}$A.prototype=new tp.baseCalendar;vme($A.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,tp.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,tp.local.invalidYear||tp.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,tp.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,tp.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,a=t-(i-1)*30+1;return this.newDate(r,i,a)}});tp.calendars.coptic=$A});var BZ=me(()=>{var Hc=Ho(),dme=Vo();function eM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}eM.prototype=new Hc.baseCalendar;dme(eM.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Hc.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Hc.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Hc.local.invalidYear),400},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Hc.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Hc.local.invalidDate);return(i.day()+1)%8},weekDay:function(e,t,r){var i=this.dayOfWeek(e,t,r);return i>=2&&i<=6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Hc.local.invalidDate);return{century:pme[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,r){var i=this._validate(e,t,r,Hc.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),r=i.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,i=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,i)}});var pme={20:"Fruitbat",21:"Anchovy"};Hc.calendars.discworld=eM});var OZ=me(()=>{var rp=Ho(),mme=Vo();function tM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}tM.prototype=new rp.baseCalendar;mme(tM.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,rp.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,rp.local.invalidYear||rp.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,rp.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,rp.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,a=t-(i-1)*30+1;return this.newDate(r,i,a)}});rp.calendars.ethiopian=tM});var UZ=me(()=>{var gv=Ho(),yme=Vo();function rM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}rM.prototype=new gv.baseCalendar;yme(rM.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,gv.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,u3(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,gv.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,gv.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,gv.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&u3(this.daysInYear(e),10)===5?30:t===9&&u3(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,gv.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,r){var i=this._validate(e,t,r,gv.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=e<=0?e+1:e,s=this.jdEpoch+this._delay1(a)+this._delay2(a)+r+1;if(t<7){for(var l=7;l<=this.monthsInYear(e);l++)s+=this.daysInMonth(e,l);for(var l=1;l<t;l++)s+=this.daysInMonth(e,l)}else for(var l=7;l<t;l++)s+=this.daysInMonth(e,l);return s},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,i=t*29+Math.floor(r/25920);return u3(3*(i+1),7)<3&&i++,i},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),i=this._delay1(e+1);return i-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});function u3(e,t){return e-t*Math.floor(e/t)}gv.calendars.hebrew=rM});var VZ=me(()=>{var T1=Ho(),gme=Vo();function aM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}aM.prototype=new T1.baseCalendar;gme(aM.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,T1.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,T1.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,T1.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});T1.calendars.islamic=aM});var HZ=me(()=>{var A1=Ho(),_me=Vo();function iM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}iM.prototype=new A1.baseCalendar;_me(iM.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,A1.local.invalidYear),r=t.year()<0?t.year()+1:t.year();return r%4===0},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,A1.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,A1.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,i=Math.floor((r-122.1)/365.25),a=Math.floor(365.25*i),s=Math.floor((r-a)/30.6001),l=s-Math.floor(s<14?1:13),f=i-Math.floor(l>2?4716:4715),h=r-a-Math.floor(30.6001*s);return f<=0&&f--,this.newDate(f,l,h)}});A1.calendars.julian=iM});var ZZ=me(()=>{var vu=Ho(),xme=Vo();function oM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}oM.prototype=new vu.baseCalendar;xme(oM.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,vu.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,vu.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var i=Math.floor(e/20);return r+"."+i+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r],10);if(Math.abs(i)>19||r>0&&i<0)throw"Invalid Mayan year";t=t*20+i}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,vu.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,vu.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,vu.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,vu.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,vu.local.invalidDate);return i.day()},weekDay:function(e,t,r){return this._validate(e,t,r,vu.local.invalidDate),!0},extraInfo:function(e,t,r){var i=this._validate(e,t,r,vu.local.invalidDate),a=i.toJD(),s=this._toHaab(a),l=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=nM(e+8+17*20,365);return[Math.floor(t/20)+1,nM(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[GZ(e+20,20),GZ(e+4,13)]},toJD:function(e,t,r){var i=this._validate(e,t,r,vu.local.invalidDate);return i.day()+i.month()*20+i.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),i=e%20;return this.newDate(t,r,i)}});function nM(e,t){return e-t*Math.floor(e/t)}function GZ(e,t){return nM(e-1,t)+1}vu.calendars.mayan=oM});var WZ=me(()=>{var ap=Ho(),bme=Vo();function sM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}sM.prototype=new ap.baseCalendar;var YZ=ap.instance("gregorian");bme(sM.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ap.local.invalidYear||ap.regionalOptions[""].invalidYear);return YZ.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,ap.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,ap.local.invalidMonth),a=i.year();a<0&&a++;for(var s=i.day(),l=1;l<i.month();l++)s+=this.daysPerMonth[l-1];return s+YZ.toJD(a+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,i=1;r>this.daysInMonth(t,i);)r-=this.daysInMonth(t,i),i++;return this.newDate(t,i,r)}});ap.calendars.nanakshahi=sM});var XZ=me(()=>{var ip=Ho(),wme=Vo();function lM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}lM.prototype=new ip.baseCalendar;wme(lM.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ip.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,i=this.minMonth;i<=12;i++)r+=this.NEPALI_CALENDAR_DATA[e][i];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,ip.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var i=this._validate(e,t,r,ip.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=ip.instance(),s=0,l=t,f=e;this._createMissingCalendarData(e);var h=e-(l>9||l===9&&r>=this.NEPALI_CALENDAR_DATA[f][0]?56:57);for(t!==9&&(s=r,l--);l!==9;)l<=0&&(l=12,f--),s+=this.NEPALI_CALENDAR_DATA[f][l],l--;return t===9?(s+=r-this.NEPALI_CALENDAR_DATA[f][0],s<0&&(s+=a.daysInYear(h))):s+=this.NEPALI_CALENDAR_DATA[f][9]-this.NEPALI_CALENDAR_DATA[f][0],a.newDate(h,1,1).add(s,"d").toJD()},fromJD:function(e){var t=ip.instance(),r=t.fromJD(e),i=r.year(),a=r.dayOfYear(),s=i+56;this._createMissingCalendarData(s);for(var l=9,f=this.NEPALI_CALENDAR_DATA[s][0],h=this.NEPALI_CALENDAR_DATA[s][l]-f+1;a>h;)l++,l>12&&(l=1,s++),h+=this.NEPALI_CALENDAR_DATA[s][l];var v=this.NEPALI_CALENDAR_DATA[s][l]-(h-a);return this.newDate(s,l,v)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});ip.calendars.nepali=lM});var jZ=me(()=>{var Lm=Ho(),Tme=Vo();function c3(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function f3(e){var t=e-475;e<0&&t++;var r=.242197,i=r*t,a=r*(t+1),s=i-Math.floor(i),l=a-Math.floor(a);return s>l}c3.prototype=new Lm.baseCalendar;Tme(c3.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chah\u0101rshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Lm.local.invalidYear);return f3(t.year())},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Lm.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,Lm.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=0;if(e>0)for(var s=1;s<e;s++)f3(s)&&a++;else if(e<0)for(var s=e;s<0;s++)f3(s)&&a--;return r+(t<=7?(t-1)*31:(t-1)*30+6)+(e>0?e-1:e)*365+a+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=475+(e-this.toJD(475,1,1))/365.242197,r=Math.floor(t);r<=0&&r--,e>this.toJD(r,12,f3(r)?30:29)&&(r++,r===0&&r++);var i=e-this.toJD(r,1,1)+1,a=i<=186?Math.ceil(i/31):Math.ceil((i-6)/30),s=e-this.toJD(r,a,1)+1;return this.newDate(r,a,s)}});Lm.calendars.persian=c3;Lm.calendars.jalali=c3});var JZ=me(()=>{var np=Ho(),Ame=Vo(),h3=np.instance();function uM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}uM.prototype=new np.baseCalendar;Ame(uM.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,np.local.invalidYear),r=this._t2gYear(t.year());return h3.leapYear(r)},weekOfYear:function(a,t,r){var i=this._validate(a,this.minMonth,this.minDay,np.local.invalidYear),a=this._t2gYear(i.year());return h3.weekOfYear(a,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,np.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,np.local.invalidDate),a=this._t2gYear(i.year());return h3.toJD(a,i.month(),i.day())},fromJD:function(e){var t=h3.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});np.calendars.taiwan=uM});var KZ=me(()=>{var op=Ho(),Mme=Vo(),v3=op.instance();function fM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}fM.prototype=new op.baseCalendar;Mme(fM.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,op.local.invalidYear),r=this._t2gYear(t.year());return v3.leapYear(r)},weekOfYear:function(a,t,r){var i=this._validate(a,this.minMonth,this.minDay,op.local.invalidYear),a=this._t2gYear(i.year());return v3.weekOfYear(a,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,op.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,op.local.invalidDate),a=this._t2gYear(i.year());return v3.toJD(a,i.month(),i.day())},fromJD:function(e){var t=v3.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});op.calendars.thai=fM});var QZ=me(()=>{var sp=Ho(),Sme=Vo();function cM(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}cM.prototype=new sp.baseCalendar;Sme(cM.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,sp.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,sp.local.invalidMonth),i=r.toJD()-24e5+.5,a=0,s=0;s<_v.length;s++){if(_v[s]>i)return _v[a]-_v[a-1];a++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,sp.local.invalidDate),a=12*(i.year()-1)+i.month()-15292,s=i.day()+_v[a-1]-1;return s+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,i=0;i<_v.length&&!(_v[i]>t);i++)r++;var a=r+15292,s=Math.floor((a-1)/12),l=s+1,f=a-12*s,h=t-_v[r-1]+1;return this.newDate(l,f,h)},isValid:function(e,t,r){var i=sp.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(e=e.year!=null?e.year:e,i=e>=1276&&e<=1500),i},_validate:function(e,t,r,i){var a=sp.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500)throw i.replace(/\{0\}/,this.local.name);return a}});sp.calendars.ummalqura=cM;var _v=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]});var eY=me((uwe,$Z)=>{"use strict";$Z.exports=Ho();FZ();qZ();NZ();BZ();OZ();UZ();VZ();HZ();ZZ();WZ();XZ();jZ();JZ();KZ();QZ()});var sY=me((fwe,oY)=>{"use strict";var rY=eY(),M1=Bt(),aY=Zi(),kme=aY.EPOCHJD,Cme=aY.ONEDAY,dM={valType:"enumerated",values:M1.sortObjectKeys(rY.calendars),editType:"calc",dflt:"gregorian"},iY=function(e,t,r,i){var a={};return a[r]=dM,M1.coerce(e,t,a,r,i)},Eme=function(e,t,r,i){for(var a=0;a<r.length;a++)iY(e,t,r[a]+"calendar",i.calendar)},Lme={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},Dme={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},Pme={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},d3="##",zme={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:d3,w:d3,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function Ime(e,t,r){for(var i=Math.floor((t+.05)/Cme)+kme,a=nY(r).fromJD(i),s=0,l,f,h,v,m;(s=e.indexOf("%",s))!==-1;)l=e.charAt(s+1),l==="0"||l==="-"||l==="_"?(h=3,f=e.charAt(s+2),l==="_"&&(l="-")):(f=l,l="0",h=2),v=zme[f],v?(v===d3?m=d3:m=a.formatDate(v[l]),e=e.slice(0,s)+m+e.slice(s+h),s+=m.length):s+=h;return e}var tY={};function nY(e){var t=tY[e];return t||(t=tY[e]=rY.instance(e),t)}function S1(e){return M1.extendFlat({},dM,{description:e})}function pM(e){return"Sets the calendar system to use with `"+e+"` date data."}var vM={xcalendar:S1(pM("x"))},Jf=M1.extendFlat({},vM,{ycalendar:S1(pM("y"))}),hM=M1.extendFlat({},Jf,{zcalendar:S1(pM("z"))}),Dm=S1(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));oY.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Jf,bar:Jf,box:Jf,heatmap:Jf,contour:Jf,histogram:Jf,histogram2d:Jf,histogram2dcontour:Jf,scatter3d:hM,surface:hM,mesh3d:hM,scattergl:Jf,ohlc:vM,candlestick:vM},layout:{calendar:S1(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:Dm},yaxis:{calendar:Dm},scene:{xaxis:{calendar:Dm},yaxis:{calendar:Dm},zaxis:{calendar:Dm}},polar:{radialaxis:{calendar:Dm}}}},layoutAttributes:dM,handleDefaults:iY,handleTraceDefaults:Eme,CANONICAL_SUNDAY:Dme,CANONICAL_TICK:Lme,DFLTRANGE:Pme,getCal:nY,worldCalFmt:Ime}});var uY=me((cwe,lY)=>{"use strict";lY.exports=sY()});var Rme=me((hwe,cY)=>{var fY=BV();fY.register([PG(),sZ(),DZ(),uY()]);cY.exports=fY});return Rme();})();
/*! Bundled license information:

native-promise-only/lib/npo.src.js:
  (*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  *)

polybooljs/index.js:
  (*
   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
   * @license MIT
   * @preserve Project Home: https://github.com/voidqk/polybooljs
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/

window.Plotly = Plotly;
return Plotly;
}));